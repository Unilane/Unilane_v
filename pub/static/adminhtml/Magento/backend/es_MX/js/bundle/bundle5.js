require.config({"config": {
        "jsbuild":{"Magento_MediaGalleryUi/js/image/image-actions.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_MediaGalleryUi/js/action/deleteImageWithDetailConfirmation',\r\n    'Magento_MediaGalleryUi/js/grid/columns/image/insertImageAction',\r\n    'Magento_MediaGalleryUi/js/action/saveDetails',\r\n    'mage/validation'\r\n], function ($, _, Element, deleteImageWithDetailConfirmation, addSelected, saveDetails) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            modalSelector: '',\r\n            modalWindowSelector: '',\r\n            mediaGalleryImageDetailsName: 'mediaGalleryImageDetails',\r\n            mediaGalleryEditDetailsName: 'mediaGalleryEditDetails',\r\n            template: 'Magento_MediaGalleryUi/image/actions',\r\n            modules: {\r\n                imageModel: '${ $.imageModelName }',\r\n                mediaGalleryImageDetails: '${ $.mediaGalleryImageDetailsName }',\r\n                mediaGalleryEditDetails: '${ $.mediaGalleryEditDetailsName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize the component\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            $(window).on('fileDeleted.enhancedMediaGallery', this.closeViewDetailsModal.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Close the images details modal\r\n         */\r\n        closeModal: function () {\r\n            var modalElement = $(this.modalSelector),\r\n                modalWindow = $(this.modalWindowSelector);\r\n\r\n            if (!modalWindow.hasClass('_show') || !modalElement.length || _.isUndefined(modalElement.modal)) {\r\n                return;\r\n            }\r\n\r\n            this.mediaGalleryEditDetails().keywordsSelect().cacheOptions.plain = [];\r\n            modalElement.modal('closeModal');\r\n        },\r\n\r\n        /**\r\n         * Opens the image edit panel\r\n         */\r\n        editImageAction: function () {\r\n            var record = this.imageModel().getSelected().id;\r\n\r\n            this.mediaGalleryEditDetails().showEditDetailsPanel(record);\r\n        },\r\n\r\n        /**\r\n         * Delete image action\r\n         */\r\n        deleteImageAction: function () {\r\n            var imageDetailsUrl = this.mediaGalleryImageDetails().imageDetailsUrl,\r\n                deleteImageUrl = this.imageModel().deleteImageUrl;\r\n\r\n            deleteImageWithDetailConfirmation.deleteImageAction(\r\n                [this.imageModel().getSelected().id],\r\n                imageDetailsUrl,\r\n                deleteImageUrl\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Save image details action\r\n         */\r\n        saveImageDetailsAction: function () {\r\n            var saveDetailsUrl = this.mediaGalleryEditDetails().saveDetailsUrl,\r\n                modalElement = $(this.modalSelector),\r\n                form = modalElement.find('#image-edit-details-form'),\r\n                imageId = this.imageModel().getSelected().id,\r\n                keywords = this.mediaGalleryEditDetails().selectedKeywords(),\r\n                imageDetails = this.mediaGalleryImageDetails(),\r\n                imageEditDetails = this.mediaGalleryEditDetails();\r\n\r\n            if (form.validation('isValid')) {\r\n                saveDetails(\r\n                    saveDetailsUrl,\r\n                    [form.serialize(), $.param({\r\n                        'keywords': keywords\r\n                    })].join('&')\r\n                ).then(function () {\r\n                    this.closeModal();\r\n                    this.imageModel().reloadGrid();\r\n                    imageDetails.removeCached(imageId);\r\n                    imageEditDetails.removeCached(imageId);\r\n\r\n                    if (imageDetails.isActive()) {\r\n                        imageDetails.showImageDetailsById(imageId);\r\n                    }\r\n                }.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add Image\r\n         */\r\n        addImage: function () {\r\n            addSelected.insertImage(\r\n                this.imageModel().getSelected(),\r\n                {\r\n                    onInsertUrl: this.imageModel().onInsertUrl,\r\n                    storeId: this.imageModel().storeId\r\n                }\r\n            );\r\n            this.closeModal();\r\n        },\r\n\r\n        /**\r\n         * Close view details modal after confirm deleting image\r\n         */\r\n        closeViewDetailsModal: function () {\r\n            this.closeModal();\r\n        }\r\n    });\r\n});\r\n","Magento_MediaGalleryUi/js/image/image-details.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_MediaGalleryUi/js/action/getDetails'\r\n], function ($, _, Component, getDetails) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_MediaGalleryUi/image/image-details',\r\n            modalSelector: '',\r\n            modalWindowSelector: '',\r\n            imageDetailsUrl: '/media_gallery/image/details',\r\n            images: [],\r\n            tagListLimit: 7,\r\n            showAllTags: false,\r\n            image: null,\r\n            modules: {\r\n                mediaGridMessages: '${ $.mediaGridMessages }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init observable variables\r\n         *\r\n         * @return {Object}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'image',\r\n                    'showAllTags'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Show image details by ID\r\n         *\r\n         * @param {String} imageId\r\n         */\r\n        showImageDetailsById: function (imageId) {\r\n            if (_.isUndefined(this.images[imageId])) {\r\n                getDetails(this.imageDetailsUrl, [imageId]).then(function (imageDetails) {\r\n                    this.images[imageId] = imageDetails[imageId];\r\n                    this.image(this.images[imageId]);\r\n                    this.openImageDetailsModal();\r\n                }.bind(this)).fail(function (error) {\r\n                    this.addMediaGridMessage('error', error);\r\n                }.bind(this));\r\n\r\n                return;\r\n            }\r\n\r\n            if (this.image() && this.image().id === imageId) {\r\n                this.openImageDetailsModal();\r\n\r\n                return;\r\n            }\r\n\r\n            this.image(this.images[imageId]);\r\n            this.openImageDetailsModal();\r\n        },\r\n\r\n        /**\r\n         * Open image details popup\r\n         */\r\n        openImageDetailsModal: function () {\r\n            var modalElement = $(this.modalSelector);\r\n\r\n            if (!modalElement.length || _.isUndefined(modalElement.modal)) {\r\n                return;\r\n            }\r\n\r\n            this.showAllTags(false);\r\n            modalElement.modal('openModal');\r\n        },\r\n\r\n        /**\r\n         * Close image details popup\r\n         */\r\n        closeImageDetailsModal: function () {\r\n            var modalElement = $(this.modalSelector);\r\n\r\n            if (!modalElement.length || _.isUndefined(modalElement.modal)) {\r\n                return;\r\n            }\r\n\r\n            modalElement.modal('closeModal');\r\n        },\r\n\r\n        /**\r\n         * Add media grid message\r\n         *\r\n         * @param {String} code\r\n         * @param {String} message\r\n         */\r\n        addMediaGridMessage: function (code, message) {\r\n            this.mediaGridMessages().add(code, message);\r\n            this.mediaGridMessages().scheduleCleanup();\r\n        },\r\n\r\n        /**\r\n         * Get tag text\r\n         *\r\n         * @param {String} tagText\r\n         * @param {Number} tagIndex\r\n         * @return {String}\r\n         */\r\n        getTagText: function (tagText, tagIndex) {\r\n            return tagText + (this.image().tags.length - 1 === tagIndex ? '' : ',');\r\n        },\r\n\r\n        /**\r\n         * Show all image tags\r\n         */\r\n        showMoreImageTags: function () {\r\n            this.showAllTags(true);\r\n        },\r\n\r\n        /**\r\n         * Is value an object\r\n         *\r\n         * @param {*} value\r\n         * @returns {Boolean}\r\n         */\r\n        isArray: function (value) {\r\n            return _.isArray(value);\r\n        },\r\n\r\n        /**\r\n         * Is value not empty\r\n         *\r\n         * @param {*} value\r\n         * @returns {Boolean}\r\n         */\r\n        notEmpty: function (value) {\r\n            return value.length > 0;\r\n        },\r\n\r\n        /**\r\n         * Get name and number text for used in link\r\n         *\r\n         * @param {Object} item\r\n         * @returns {String}\r\n         */\r\n        getUsedInText: function (item) {\r\n            return item.name +  '(' + item.number + ')';\r\n        },\r\n\r\n        /**\r\n         * Get filter url\r\n         *\r\n         * @param {String} link\r\n         */\r\n        getFilterUrl: function (link) {\r\n            return link + '?filters[asset_id]=[' + this.image().id + ']';\r\n        },\r\n\r\n        /**\r\n         * Check if details modal is active\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return $(this.modalWindowSelector).hasClass('_show');\r\n        },\r\n\r\n        /**\r\n         * Remove image details\r\n         *\r\n         * @param {String} id\r\n         */\r\n        removeCached: function (id) {\r\n            delete this.images[id];\r\n        }\r\n    });\r\n});\r\n","Magento_MediaGalleryUi/js/image/image-edit.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Ui/js/lib/key-codes',\r\n    'Magento_MediaGalleryUi/js/action/getDetails',\r\n    'mage/validation'\r\n], function ($, _, Component, layout, keyCodes, getDetails) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_MediaGalleryUi/image/image-edit',\r\n            modalSelector: '.media-gallery-edit-image-details-modal',\r\n            imageEditDetailsUrl: '/media_gallery/image/details',\r\n            saveDetailsUrl: '/media_gallery/image/saveDetails',\r\n            images: [],\r\n            image: null,\r\n            keywordOptions: [],\r\n            selectedKeywords: [],\r\n            newKeyword: '',\r\n            newKeywordSelector: '#keyword',\r\n            modules: {\r\n                mediaGridMessages: '${ $.mediaGridMessages }',\r\n                keywordsSelect: '${ $.name }_keywords'\r\n            },\r\n            viewConfig: [\r\n                {\r\n                    component: 'Magento_Ui/js/form/element/ui-select',\r\n                    name: '${ $.name }_keywords',\r\n                    template: 'ui/grid/filters/elements/ui-select',\r\n                    disableLabel: true\r\n                }\r\n            ],\r\n            exports: {\r\n                keywordOptions: '${ $.name }_keywords:options'\r\n            },\r\n            links: {\r\n                selectedKeywords: '${ $.name }_keywords:value'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize the component\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initialize: function () {\r\n            this._super().initView();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Add a new keyword to select\r\n         */\r\n        addKeyword: function () {\r\n            var options = this.keywordOptions(),\r\n                selected = this.selectedKeywords(),\r\n                newKeywordField = $(this.newKeywordSelector);\r\n\r\n            newKeywordField.validation();\r\n\r\n            if (!newKeywordField.validation('isValid') || this.newKeyword() === '') {\r\n                return;\r\n            }\r\n\r\n            options.push(this.getOptionForKeyword(this.newKeyword()));\r\n            selected.push(this.newKeyword());\r\n            this.newKeyword('');\r\n\r\n            this.keywordOptions(options);\r\n            this.selectedKeywords(selected);\r\n        },\r\n\r\n        /**\r\n         * Create an option object based on keyword string\r\n         *\r\n         * @param {String} keyword\r\n         * @returns {Object}\r\n         */\r\n        getOptionForKeyword: function (keyword) {\r\n            return {\r\n                'is_active': 1,\r\n                level: 1,\r\n                value: keyword,\r\n                label: keyword\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Convert array of keywords to options format\r\n         *\r\n         * @param {Array} tags\r\n         */\r\n        setKeywordOptions: function (tags) {\r\n            var options = [];\r\n\r\n            tags.forEach(function (tag) {\r\n                options.push(this.getOptionForKeyword(tag));\r\n            }.bind(this));\r\n\r\n            this.keywordOptions(options);\r\n            this.selectedKeywords(tags);\r\n        },\r\n\r\n        /**\r\n         * Initialize child components\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initView: function () {\r\n            layout(this.viewConfig);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init observable variables\r\n         *\r\n         * @return {Object}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'image',\r\n                    'keywordOptions',\r\n                    'selectedKeywords',\r\n                    'newKeyword'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get image details by ID\r\n         *\r\n         * @param {String} imageId\r\n         */\r\n        showEditDetailsPanel: function (imageId) {\r\n            if (_.isUndefined(this.images[imageId])) {\r\n                getDetails(this.imageEditDetailsUrl, [imageId]).then(function (imageDetails) {\r\n                    this.images[imageId] = imageDetails[imageId];\r\n                    this.image(this.images[imageId]);\r\n                    this.openEditImageDetailsModal();\r\n                }.bind(this)).fail(function (error) {\r\n                    this.addMediaGridMessage('error', error);\r\n                }.bind(this));\r\n\r\n                return;\r\n            }\r\n\r\n            if (this.image() && this.image().id === imageId) {\r\n                this.openEditImageDetailsModal();\r\n\r\n                return;\r\n            }\r\n\r\n            this.image(this.images[imageId]);\r\n            this.openEditImageDetailsModal();\r\n        },\r\n\r\n        /**\r\n         * Open edit image details popup\r\n         */\r\n        openEditImageDetailsModal: function () {\r\n            var modalElement = $(this.modalSelector);\r\n\r\n            if (!modalElement.length || _.isUndefined(modalElement.modal)) {\r\n                return;\r\n            }\r\n\r\n            this.setKeywordOptions(this.image().tags);\r\n            this.newKeyword('');\r\n\r\n            modalElement.modal('openModal');\r\n        },\r\n\r\n        /**\r\n         * Close image details popup\r\n         */\r\n        closeImageDetailsModal: function () {\r\n            var modalElement = $(this.modalSelector);\r\n\r\n            if (!modalElement.length || _.isUndefined(modalElement.modal)) {\r\n                return;\r\n            }\r\n\r\n            modalElement.modal('closeModal');\r\n        },\r\n\r\n        /**\r\n         * Add media grid message\r\n         *\r\n         * @param {String} code\r\n         * @param {String} message\r\n         */\r\n        addMediaGridMessage: function (code, message) {\r\n            this.mediaGridMessages().add(code, message);\r\n            this.mediaGridMessages().scheduleCleanup();\r\n        },\r\n\r\n        /**\r\n         * Handle Enter key event to save image details\r\n         *\r\n         * @param {Object} data\r\n         * @param {jQuery.Event} event\r\n         * @returns {Boolean}\r\n         */\r\n        handleEnterKey: function (data, event) {\r\n            var modalElement = $(this.modalSelector),\r\n                key = keyCodes[event.keyCode];\r\n\r\n            if (key === 'enterKey') {\r\n                event.preventDefault();\r\n                modalElement.find('.page-action-buttons button.save').trigger('click');\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Remove cached image details in edit form\r\n         *\r\n         * @param {String} id\r\n         */\r\n        removeCached: function (id) {\r\n            delete this.images[id];\r\n        }\r\n    });\r\n});\r\n","Magento_MediaGalleryUi/js/validation/validate-image-description.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/validate',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'validate-image-description', function (value) {\r\n            return /^[a-zA-Z0-9\\-\\_\\.\\,\\n\\s]+$|^$/i.test(value);\r\n\r\n        }, $.mage.__('Please use only letters (a-z or A-Z), numbers (0-9), ' +\r\n            'dots (.), commas(,), underscores (_), dashes (-), and spaces on this field.'));\r\n});\r\n","Magento_MediaGalleryUi/js/validation/validate-image-keyword.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/validate',\r\n    'mage/translate'\r\n], function ($, validate, $t) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'validate-image-keyword', function (value) {\r\n            return /^[a-zA-Z0-9\\-\\_\\.\\,]+$|^$/i.test(value);\r\n\r\n        }, $t('Please use only letters (a-z or A-Z), numbers (0-9), dots (.), commas(,), ' +\r\n            'underscores (_) and dashes(-) on this field.'));\r\n});\r\n","Magento_MediaGalleryUi/js/validation/validate-image-title.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/validate',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'validate-image-title', function (value) {\r\n            return /^[a-zA-Z0-9\\-\\_\\.\\,\\s]+$/i.test(value);\r\n\r\n        }, $.mage.__('Please use only letters (a-z or A-Z), numbers (0-9), dots (.), commas(,), ' +\r\n            'underscores (_), dashes(-) and spaces on this field.'));\r\n});\r\n","Magento_Msrp/js/msrp.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/price-utils',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/dropdown',\r\n    'mage/template'\r\n], function ($, priceUtils, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addToCart', {\r\n        options: {\r\n            showAddToCart: true,\r\n            submitUrl: '',\r\n            cartButtonId: '',\r\n            singleOpenDropDown: true,\r\n            dialog: {}, // Options for mage/dropdown\r\n            dialogDelay: 500, // Delay in ms after resize dropdown shown again\r\n            origin: '', //Required, type of popup: 'msrp', 'tier' or 'info' popup\r\n\r\n            // Selectors\r\n            cartForm: '.form.map.checkout',\r\n            msrpLabelId: '#map-popup-msrp',\r\n            msrpPriceElement: '#map-popup-msrp .price-wrapper',\r\n            priceLabelId: '#map-popup-price',\r\n            priceElement: '#map-popup-price .price',\r\n            mapInfoLinks: '.map-show-info',\r\n            displayPriceElement: '.old-price.map-old-price .price-wrapper',\r\n            fallbackPriceElement: '.normal-price.map-fallback-price .price-wrapper',\r\n            displayPriceContainer: '.old-price.map-old-price',\r\n            fallbackPriceContainer: '.normal-price.map-fallback-price',\r\n            popUpAttr: '[data-role=msrp-popup-template]',\r\n            popupCartButtonId: '#map-popup-button',\r\n            paypalCheckoutButons: '[data-action=checkout-form-submit]',\r\n            popupId: '',\r\n            realPrice: '',\r\n            isSaleable: '',\r\n            msrpPrice: '',\r\n            helpLinkId: '',\r\n            addToCartButton: '',\r\n\r\n            // Text options\r\n            productName: '',\r\n            addToCartUrl: ''\r\n        },\r\n\r\n        openDropDown: null,\r\n        triggerClass: 'dropdown-active',\r\n\r\n        popUpOptions: {\r\n            appendTo: 'body',\r\n            dialogContentClass: 'active',\r\n            closeOnMouseLeave: false,\r\n            autoPosition: true,\r\n            closeOnClickOutside: false,\r\n            'dialogClass': 'popup map-popup-wrapper',\r\n            position: {\r\n                my: 'left top',\r\n                collision: 'fit none',\r\n                at: 'left bottom',\r\n                within: 'body'\r\n            },\r\n            shadowHinter: 'popup popup-pointer'\r\n        },\r\n        popupOpened: false,\r\n        wasOpened: false,\r\n\r\n        /**\r\n         * Creates widget instance\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if (this.options.origin === 'msrp') {\r\n                this.initMsrpPopup();\r\n            } else if (this.options.origin === 'info') {\r\n                this.initInfoPopup();\r\n            } else if (this.options.origin === 'tier') {\r\n                this.initTierPopup();\r\n            }\r\n            $(this.options.cartButtonId).on('click', this._addToCartSubmit.bind(this));\r\n            $(document).on('updateMsrpPriceBlock', this.onUpdateMsrpPrice.bind(this));\r\n            $(this.options.cartForm).on('submit', this._onSubmitForm.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        initMsrpPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $msrpPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $msrpPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            $('body').append($msrpPopup);\r\n            $msrpPopup.trigger('contentUpdated');\r\n\r\n            $msrpPopup.find('button')\r\n                .on('click',\r\n                    this.handleMsrpAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $msrpPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleMsrpPaypalCheckout.bind(this));\r\n\r\n            $(this.options.popupId).on('click',\r\n                this.openPopup.bind(this));\r\n\r\n            this.$popup = $msrpPopup;\r\n        },\r\n\r\n        /**\r\n         * Init info popup\r\n         *\r\n         * @private\r\n         */\r\n        initInfoPopup: function () {\r\n            var infoPopupDOM = $('[data-role=msrp-info-template]')[0],\r\n                $infoPopup = $(infoPopupDOM.innerHTML.trim());\r\n\r\n            $('body').append($infoPopup);\r\n\r\n            $(this.options.helpLinkId).on('click', function (e) {\r\n                this.popUpOptions.position.of = $(e.target);\r\n                $infoPopup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n                this._toggle($infoPopup);\r\n            }.bind(this));\r\n\r\n            this.$popup = $infoPopup;\r\n        },\r\n\r\n        /**\r\n         * Init tier price popup\r\n         * @private\r\n         */\r\n        initTierPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $tierPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $('body').append($tierPopup);\r\n            $tierPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            this.popUpOptions.position.of = $(this.options.helpLinkId);\r\n\r\n            $tierPopup.find('button').on('click',\r\n                this.handleTierAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $tierPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleTierPaypalCheckout.bind(this));\r\n\r\n            $(this.options.attr).on('click', function (e) {\r\n                this.$popup = $tierPopup;\r\n                this.tierOptions = $(e.target).data('tier-price');\r\n                this.openPopup(e);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Msrp popup\r\n         * @param {Object} ev\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpPaypalCheckout: function () {\r\n            this.closePopup(this.$popup);\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Tier popup\r\n         *\r\n         * @param {Object} ev\r\n         * @private\r\n         */\r\n        handleTierAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton &&\r\n                this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Tier popup\r\n         *\r\n         * @private\r\n         */\r\n        handleTierPaypalCheckout: function () {\r\n            if (this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Open and set up popup\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        openPopup: function (event) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            this.popUpOptions.position.of = $(event.target);\r\n\r\n            if (!this.wasOpened) {\r\n                this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                this.wasOpened = true;\r\n            }\r\n            this.$popup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n            this._toggle(this.$popup);\r\n\r\n            if (!this.options.isSaleable) {\r\n                this.$popup.find('form').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggle MAP popup visibility\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         * @private\r\n         */\r\n        _toggle: function ($elem) {\r\n            $(document).on('mouseup.msrp touchend.msrp', function (e) {\r\n                if (!$elem.is(e.target) && $elem.has(e.target).length === 0) {\r\n                    this.closePopup($elem);\r\n                }\r\n            }.bind(this));\r\n            $(window).on('resize', function () {\r\n                this.closePopup($elem);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Close MAP information popup\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         */\r\n        closePopup: function ($elem) {\r\n            $elem.dropdownDialog('close');\r\n            $(document).off('mouseup.msrp touchend.msrp');\r\n        },\r\n\r\n        /**\r\n         * Handler for addToCart action\r\n         *\r\n         * @param {Object} e\r\n         */\r\n        _addToCartSubmit: function (e) {\r\n            this.element.trigger('addToCart', this.element);\r\n\r\n            if (this.element.data('stop-processing')) {\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartUrl) {\r\n                $('.mage-dropdown-dialog > .ui-dialog-content').dropdownDialog('close');\r\n            }\r\n\r\n            e.preventDefault();\r\n            $(this.options.cartForm).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Call on event updatePrice. Proxy to updateMsrpPrice method.\r\n         *\r\n         * @param {Event} event\r\n         * @param {mixed} priceIndex\r\n         * @param {Object} prices\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        onUpdateMsrpPrice: function onUpdateMsrpPrice(event, priceIndex, prices, $priceBox) {\r\n\r\n            var defaultMsrp,\r\n                defaultPrice,\r\n                msrpPrice,\r\n                finalPrice;\r\n\r\n            defaultMsrp = _.chain(prices).map(function (price) {\r\n                return price.msrpPrice.amount;\r\n            }).reject(function (p) {\r\n                return p === null;\r\n            }).max().value();\r\n\r\n            defaultPrice = _.chain(prices).map(function (p) {\r\n                return p.finalPrice.amount;\r\n            }).min().value();\r\n\r\n            if (typeof priceIndex !== 'undefined') {\r\n                msrpPrice = prices[priceIndex].msrpPrice.amount;\r\n                finalPrice = prices[priceIndex].finalPrice.amount;\r\n\r\n                if (msrpPrice === null || msrpPrice <= finalPrice) {\r\n                    this.updateNonMsrpPrice(priceUtils.formatPriceLocale(finalPrice), $priceBox);\r\n                } else {\r\n                    this.updateMsrpPrice(\r\n                        priceUtils.formatPriceLocale(finalPrice),\r\n                        priceUtils.formatPriceLocale(msrpPrice),\r\n                        false,\r\n                        $priceBox);\r\n                }\r\n            } else {\r\n                this.updateMsrpPrice(\r\n                    priceUtils.formatPriceLocale(defaultPrice),\r\n                    priceUtils.formatPriceLocale(defaultMsrp),\r\n                    true,\r\n                    $priceBox);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update prices for configurable product with MSRP enabled\r\n         *\r\n         * @param {String} finalPrice\r\n         * @param {String} msrpPrice\r\n         * @param {Boolean} useDefaultPrice\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateMsrpPrice: function (finalPrice, msrpPrice, useDefaultPrice, $priceBox) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            $(this.options.fallbackPriceContainer, $priceBox).hide();\r\n            $(this.options.displayPriceContainer, $priceBox).show();\r\n            $(this.options.mapInfoLinks, $priceBox).show();\r\n\r\n            if (useDefaultPrice || !this.wasOpened) {\r\n                if (this.$popup) {\r\n                    this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                    this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                }\r\n\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n                this.wasOpened = true;\r\n            }\r\n\r\n            if (!useDefaultPrice) {\r\n                this.$popup.find(this.options.msrpPriceElement).html(msrpPrice);\r\n                this.$popup.find(this.options.priceElement).html(finalPrice);\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display non MAP price for irrelevant products\r\n         *\r\n         * @param {String} price\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateNonMsrpPrice: function (price, $priceBox) {\r\n            $(this.options.fallbackPriceElement, $priceBox).html(price);\r\n            $(this.options.displayPriceContainer, $priceBox).hide();\r\n            $(this.options.mapInfoLinks, $priceBox).hide();\r\n            $(this.options.fallbackPriceContainer, $priceBox).show();\r\n        },\r\n\r\n        /**\r\n         * Handler for submit form\r\n         *\r\n         * @private\r\n         */\r\n        _onSubmitForm: function () {\r\n            if ($(this.options.cartForm).valid()) {\r\n                $(this.options.cartButtonId).prop('disabled', true);\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    return $.mage.addToCart;\r\n});\r\n","Magento_PageBuilder/js/acl.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\"], function (_config) {\r\n  var resources = {\r\n    TEMPLATE_SAVE: \"template_save\",\r\n    TEMPLATE_APPLY: \"template_apply\"\r\n  };\r\n  /**\r\n   * Determine if the current user is allowed to access this resource\r\n   *\r\n   * Usage: isAllowed(resources.TEMPLATE_SAVE)\r\n   *\r\n   * @param resource\r\n   */\r\n\r\n  function isAllowed(resource) {\r\n    return _config.getConfig(\"acl\")[resource] === true;\r\n  }\r\n\r\n  return {\r\n    isAllowed: isAllowed,\r\n    resources: resources\r\n  };\r\n});\r\n//# sourceMappingURL=acl.js.map","Magento_PageBuilder/js/collection.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\", \"Magento_PageBuilder/js/utils/array\"], function (_knockout, _array) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Collection = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Collection(children) {\r\n      this.children = children ? children : _knockout.observableArray([]);\r\n    }\r\n    /**\r\n     * Return the children of the current element\r\n     *\r\n     * @returns {KnockoutObservableArray<ContentTypeInterface | ContentTypeCollectionInterface>}\r\n     */\r\n\r\n\r\n    var _proto = Collection.prototype;\r\n\r\n    _proto.getChildren = function getChildren() {\r\n      return this.children;\r\n    }\r\n    /**\r\n     * Add a child into the observable array\r\n     *\r\n     * @param child\r\n     * @param index\r\n     */\r\n    ;\r\n\r\n    _proto.addChild = function addChild(child, index) {\r\n      if (typeof index === \"number\") {\r\n        // Use the arrayUtil function to add the item in the correct place within the array\r\n        (0, _array.moveArrayItemIntoArray)(child, this.children, index);\r\n      } else {\r\n        this.children.push(child);\r\n      }\r\n    }\r\n    /**\r\n     * Remove a child from the observable array\r\n     *\r\n     * @param child\r\n     */\r\n    ;\r\n\r\n    _proto.removeChild = function removeChild(child) {\r\n      (0, _array.removeArrayItem)(this.children, child);\r\n    }\r\n    /**\r\n     * Set the children observable array into the class\r\n     *\r\n     * @param children\r\n     */\r\n    ;\r\n\r\n    _proto.setChildren = function setChildren(children) {\r\n      this.children = children;\r\n    };\r\n\r\n    return Collection;\r\n  }();\r\n\r\n  return Collection;\r\n});\r\n//# sourceMappingURL=collection.js.map","Magento_PageBuilder/js/config.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\"], function (_underscore) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Config = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Config() {}\r\n\r\n    /**\r\n     * Set the initial config\r\n     *\r\n     * @param config\r\n     */\r\n    Config.setConfig = function setConfig(config) {\r\n      Config.config = _underscore.extend(Config.config, config);\r\n    }\r\n    /**\r\n     * Set the current instances mode, this differs between preview or master depending on whether we're rendering the\r\n     * admins preview or rendering the master format.\r\n     *\r\n     * @param {\"Preview\" | \"Master\"} mode\r\n     */\r\n    ;\r\n\r\n    Config.setMode = function setMode(mode) {\r\n      Config.mode = mode;\r\n    }\r\n    /**\r\n     * Retrieve the current instances mode\r\n     */\r\n    ;\r\n\r\n    Config.getMode = function getMode() {\r\n      return Config.mode;\r\n    }\r\n    /**\r\n     * Retrieve the init config\r\n     *\r\n     * @param {string} key\r\n     * @returns {T}\r\n     */\r\n    ;\r\n\r\n    Config.getConfig = function getConfig(key) {\r\n      if (key) {\r\n        if (typeof Config.config[key] !== \"undefined\") {\r\n          return Config.config[key];\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      return Config.config;\r\n    }\r\n    /**\r\n     * Retrieve a content type from the configuration\r\n     *\r\n     * @param {string} contentType\r\n     * @returns {any}\r\n     */\r\n    ;\r\n\r\n    Config.getContentTypeConfig = function getContentTypeConfig(contentType) {\r\n      if (typeof Config.getConfig(\"content_types\")[contentType] !== \"undefined\") {\r\n        return Config.getConfig(\"content_types\")[contentType];\r\n      }\r\n\r\n      return null;\r\n    };\r\n\r\n    return Config;\r\n  }();\r\n\r\n  Config.config = {\r\n    dataContentTypeAttributeName: \"data-content-type\",\r\n    bodyId: \"html-body\"\r\n  };\r\n  return Config;\r\n});\r\n//# sourceMappingURL=config.js.map","Magento_PageBuilder/js/content-type-collection.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/collection\", \"Magento_PageBuilder/js/content-type\"], function (_events, _underscore, _collection, _contentType) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ContentTypeCollection = /*#__PURE__*/function (_contentType2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(ContentTypeCollection, _contentType2);\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} parentContentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {string} stageId\r\n     */\r\n    function ContentTypeCollection(parentContentType, config, stageId) {\r\n      var _this;\r\n\r\n      _this = _contentType2.call(this, parentContentType, config, stageId) || this;\r\n      _this.collection = new _collection();\r\n\r\n      _this.collection.getChildren().subscribe(function () {\r\n        return _events.trigger(\"stage:updateAfter\", {\r\n          stageId: _this.stageId\r\n        });\r\n      });\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Return the children of the current element\r\n     *\r\n     * @returns {KnockoutObservableArray<ContentTypeInterface | ContentTypeCollectionInterface>}\r\n     */\r\n\r\n\r\n    var _proto = ContentTypeCollection.prototype;\r\n\r\n    _proto.getChildren = function getChildren() {\r\n      return this.collection.getChildren();\r\n    }\r\n    /**\r\n     * Add a child into the observable array\r\n     *\r\n     * @param {ContentTypeInterface | ContentTypeCollectionInterface} child\r\n     * @param {number} index\r\n     */\r\n    ;\r\n\r\n    _proto.addChild = function addChild(child, index) {\r\n      child.parentContentType = this;\r\n      this.collection.addChild(child, index); // Trigger a mount event when a child is added into a container content type, meaning it'll be re-rendered\r\n\r\n      _underscore.defer(function () {\r\n        _events.trigger(\"contentType:mountAfter\", {\r\n          id: child.id,\r\n          contentType: child\r\n        });\r\n\r\n        _events.trigger(child.config.name + \":mountAfter\", {\r\n          id: child.id,\r\n          contentType: child\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Remove a child from the observable array\r\n     *\r\n     * @param {ContentTypeInterface} child\r\n     */\r\n    ;\r\n\r\n    _proto.removeChild = function removeChild(child) {\r\n      this.collection.removeChild(child);\r\n    }\r\n    /**\r\n     * Destroys current instance and all children\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      [].concat(this.getChildren()()).forEach(function (contentType) {\r\n        contentType.destroy();\r\n      });\r\n\r\n      _contentType2.prototype.destroy.call(this);\r\n    }\r\n    /**\r\n     * Set the children observable array into the class\r\n     *\r\n     * @param {KnockoutObservableArray<ContentTypeInterface>} children\r\n     */\r\n    ;\r\n\r\n    _proto.setChildren = function setChildren(children) {\r\n      this.collection.setChildren(children);\r\n    };\r\n\r\n    _createClass(ContentTypeCollection, [{\r\n      key: \"children\",\r\n      get: function get() {\r\n        return this.collection.getChildren();\r\n      }\r\n    }]);\r\n\r\n    return ContentTypeCollection;\r\n  }(_contentType);\r\n\r\n  return ContentTypeCollection;\r\n});\r\n//# sourceMappingURL=content-type-collection.js.map","Magento_PageBuilder/js/content-type-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/master-factory\", \"Magento_PageBuilder/js/content-type/preview-factory\", \"Magento_PageBuilder/js/utils/loader\"], function (_events, _underscore, _config, _masterFactory, _previewFactory, _loader) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create new content type\r\n   *\r\n   * @param {ContentTypeConfigInterface} config\r\n   * @param {ContentTypeInterface} parentContentType\r\n   * @param {string} stageId\r\n   * @param {object} data\r\n   * @param {number} childrenLength\r\n   * * @param {object} viewportsData\r\n   * @returns {Promise<ContentTypeInterface>}\r\n   * @api\r\n   */\r\n  function createContentType(config, parentContentType, stageId, data, childrenLength, viewportsData) {\r\n    if (data === void 0) {\r\n      data = {};\r\n    }\r\n\r\n    if (childrenLength === void 0) {\r\n      childrenLength = 0;\r\n    }\r\n\r\n    if (viewportsData === void 0) {\r\n      viewportsData = {};\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      (0, _loader)([config.component], function (contentTypeComponent) {\r\n        try {\r\n          var _contentType = new contentTypeComponent(parentContentType, config, stageId);\r\n\r\n          var viewFactory = _config.getMode() === \"Preview\" ? _previewFactory : _masterFactory;\r\n          viewFactory(_contentType, config).then(function (viewComponent) {\r\n            var viewName = _config.getMode() === \"Preview\" ? \"preview\" : \"content\"; // @ts-ignore\r\n\r\n            _contentType[viewName] = viewComponent;\r\n            assignDataToDataStores(_contentType, config, data, viewportsData);\r\n            resolve(_contentType);\r\n          }).catch(function (error) {\r\n            reject(error);\r\n          });\r\n        } catch (error) {\r\n          reject(\"Error within component (\" + config.component + \") for \" + config.name + \".\");\r\n          console.error(error);\r\n        }\r\n      }, function (error) {\r\n        reject(\"Unable to load component (\" + config.component + \") for \" + config.name + \". Please check component exists\" + \" and content type configuration is correct.\");\r\n        console.error(error);\r\n      });\r\n    }).then(function (contentType) {\r\n      _events.trigger(\"contentType:createAfter\", {\r\n        id: contentType.id,\r\n        contentType: contentType\r\n      });\r\n\r\n      _events.trigger(config.name + \":createAfter\", {\r\n        id: contentType.id,\r\n        contentType: contentType\r\n      });\r\n\r\n      fireContentTypeReadyEvent(contentType, childrenLength);\r\n      return contentType;\r\n    }).catch(function (error) {\r\n      console.error(error);\r\n      return null;\r\n    });\r\n  }\r\n\r\n  function assignDataToDataStores(contentType, config, data, viewportsData) {\r\n    var defaultData = prepareData(config, data);\r\n\r\n    var currentViewport = _config.getConfig(\"viewport\") || _config.getConfig(\"defaultViewport\");\r\n\r\n    _underscore.each(_config.getConfig(\"viewports\"), function (viewport, name) {\r\n      var viewportData = {};\r\n      var breakpoint = config.breakpoints[name];\r\n      var viewportConfig = breakpoint && breakpoint.fields ? _underscore.extend({}, breakpoint, {\r\n        name: config.name\r\n      }) : {};\r\n\r\n      if (!_underscore.isEmpty(viewportConfig)) {\r\n        viewportsData[name] = viewportsData[name] || {};\r\n        viewportData = prepareData(viewportConfig, viewportsData[name]);\r\n      }\r\n\r\n      contentType.dataStores[name].setState(_underscore.extend({}, defaultData, viewportData));\r\n    });\r\n\r\n    contentType.setViewportDataToDataStore(currentViewport);\r\n  }\r\n  /**\r\n   * Merge defaults and content type data\r\n   *\r\n   * @param {ContentTypeConfigInterface} config\r\n   * @param {object} data\r\n   * @returns {any}\r\n   */\r\n\r\n\r\n  function prepareData(config, data) {\r\n    var appearance = data.appearance + \"-appearance\";\r\n    var fields = config.fields[appearance] || config.fields.default;\r\n    var defaults = prepareDefaults(fields || {}); // Set all content types to be displayed by default\r\n\r\n    defaults.display = true;\r\n    return _underscore.extend(defaults, data, {\r\n      name: config.name\r\n    });\r\n  }\r\n  /**\r\n   * Prepare the default values for fields within the form\r\n   *\r\n   * @param {ConfigFieldInterface} fields\r\n   * @returns {FieldDefaultsInterface}\r\n   */\r\n\r\n\r\n  function prepareDefaults(fields) {\r\n    if (_underscore.isEmpty(fields)) {\r\n      return {};\r\n    }\r\n\r\n    return _underscore.mapObject(fields, function (field) {\r\n      if (!_underscore.isUndefined(field.default)) {\r\n        return field.default;\r\n      } else if (_underscore.isObject(field)) {\r\n        return prepareDefaults(field);\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * A content type is ready once all of its children have mounted\r\n   *\r\n   * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n   * @param {number} childrenLength\r\n   */\r\n\r\n\r\n  function fireContentTypeReadyEvent(contentType, childrenLength) {\r\n    if (childrenLength === void 0) {\r\n      childrenLength = 0;\r\n    }\r\n\r\n    var fire = function fire() {\r\n      var params = {\r\n        id: contentType.id,\r\n        contentType: contentType,\r\n        expectChildren: childrenLength\r\n      };\r\n\r\n      _events.trigger(\"contentType:mountAfter\", params);\r\n\r\n      _events.trigger(contentType.config.name + \":mountAfter\", params);\r\n    };\r\n\r\n    if (childrenLength === 0) {\r\n      fire();\r\n    } else {\r\n      var mountCounter = 0;\r\n\r\n      _events.on(\"contentType:mountAfter\", function (args) {\r\n        if (args.contentType.parentContentType.id === contentType.id) {\r\n          mountCounter++;\r\n\r\n          if (mountCounter === childrenLength) {\r\n            mountCounter = 0;\r\n            fire();\r\n\r\n            _events.off(\"contentType:\" + contentType.id + \":mountAfter\");\r\n          }\r\n        }\r\n      }, \"contentType:\" + contentType.id + \":mountAfter\");\r\n    }\r\n  }\r\n  /**\r\n   * @api\r\n   */\r\n\r\n\r\n  return createContentType;\r\n});\r\n//# sourceMappingURL=content-type-factory.js.map","Magento_PageBuilder/js/content-type-menu.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\ndefine([\"knockout\", \"underscore\"], function (_knockout, _underscore) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var ContentTypeMenu = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Options constructor\r\n     *\r\n     * @param preview\r\n     * @param options\r\n     */\r\n    function ContentTypeMenu(preview, options) {\r\n      var _this = this;\r\n\r\n      this.options = _knockout.observableArray([]);\r\n      this.preview = preview;\r\n\r\n      var codes = _underscore.keys(options);\r\n\r\n      _underscore.values(options).forEach(function (option, index) {\r\n        option.code = codes[index];\r\n\r\n        _this.options.push(option);\r\n      });\r\n\r\n      this.sort();\r\n    }\r\n\r\n    var _proto = ContentTypeMenu.prototype;\r\n\r\n    /**\r\n     * Get an option from the options array\r\n     *\r\n     * @param {string} code\r\n     * @returns {OptionInterface}\r\n     */\r\n    _proto.getOption = function getOption(code) {\r\n      return this.options().find(function (option) {\r\n        return option.code === code;\r\n      });\r\n    }\r\n    /**\r\n     * Sort the options\r\n     */\r\n    ;\r\n\r\n    _proto.sort = function sort() {\r\n      this.options.sort(function (a, b) {\r\n        return a.sort === b.sort ? 0 : a.sort < b.sort ? -1 : 1;\r\n      });\r\n    };\r\n\r\n    _createClass(ContentTypeMenu, [{\r\n      key: \"template\",\r\n      get: function get() {\r\n        return \"Magento_PageBuilder/content-type/menu\";\r\n      }\r\n    }]);\r\n\r\n    return ContentTypeMenu;\r\n  }();\r\n\r\n  return ContentTypeMenu;\r\n});\r\n//# sourceMappingURL=content-type-menu.js.map","Magento_PageBuilder/js/content-type-toolbar.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/utils/check-stage-full-screen\", \"Magento_PageBuilder/js/utils/pagebuilder-header-height\", \"Magento_PageBuilder/js/utils/promise-deferred\"], function (_jquery, _knockout, _events, _checkStageFullScreen, _pagebuilderHeaderHeight, _promiseDeferred) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Toolbar = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Toolbar Options constructor\r\n     *\r\n     * @param preview\r\n     * @param options\r\n     */\r\n    function Toolbar(preview, options) {\r\n      this.options = _knockout.observableArray([]);\r\n      this.afterRenderDeferred = (0, _promiseDeferred)();\r\n      this.preview = preview;\r\n      this.options(options);\r\n    }\r\n    /**\r\n     * Toolbar template\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = Toolbar.prototype;\r\n\r\n    /**\r\n     * On render init the toolbar\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    _proto.afterRender = function afterRender(element) {\r\n      this.element = element;\r\n      this.afterRenderDeferred.resolve(element);\r\n    }\r\n    /**\r\n     * Upon clicking the option update the value as directed\r\n     * When user toggles the option off, set the value back to default\r\n     *\r\n     * @param {OptionInterface} option\r\n     * @param {ValueInterface} value\r\n     */\r\n    ;\r\n\r\n    _proto.onOptionClick = function onOptionClick(option, value) {\r\n      var appearance = this.preview.appearance() + \"-appearance\";\r\n      var fields = this.preview.config.fields[appearance] || this.preview.config.fields.default;\r\n      var defaultValue = fields[option.key].default;\r\n      var currentValue = this.preview.contentType.dataStore.get(option.key);\r\n      this.preview.updateData(option.key, currentValue === value.value ? defaultValue : value.value);\r\n    }\r\n    /**\r\n     * Set state based on toolbar focusin event for the preview\r\n     *\r\n     * @param {ContentTypeToolbarPreviewInterface} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusIn = function onFocusIn(context, event) {\r\n      var currentContentTypeTarget = context.toolbar.getCurrentContentTypeTarget();\r\n      var toolbarOptions = currentContentTypeTarget.find(\".pagebuilder-toolbar-options\");\r\n      var currentContentTypeTargetClientRectTop = currentContentTypeTarget[0].getBoundingClientRect().top - (0, _pagebuilderHeaderHeight)(context.contentType.stageId); // Change toolbar orientation if overflow on full screen mode\r\n\r\n      if ((0, _checkStageFullScreen)(context.contentType.stageId) && currentContentTypeTargetClientRectTop < toolbarOptions.outerHeight()) {\r\n        context.toolbar.observer = new MutationObserver(function () {\r\n          toolbarOptions.css(\"transform\", \"translateY(\" + currentContentTypeTarget.outerHeight() + \"px)\");\r\n        });\r\n        context.toolbar.observer.observe(currentContentTypeTarget[0], {\r\n          attributes: true,\r\n          childList: true,\r\n          subtree: true\r\n        });\r\n        toolbarOptions.css(\"transform\", \"translateY(\" + currentContentTypeTarget.outerHeight() + \"px)\");\r\n      } else {\r\n        toolbarOptions.css(\"transform\", \"translateY(-100%)\");\r\n      }\r\n\r\n      (0, _jquery)(currentContentTypeTarget).addClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStart\");\r\n    }\r\n    /**\r\n     * Set state based on toolbar focusout event for the preview\r\n     *\r\n     * @param {ContentTypeToolbarPreviewInterface} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusOut = function onFocusOut(context, event) {\r\n      var currentContentTypeTarget = context.toolbar.getCurrentContentTypeTarget();\r\n      currentContentTypeTarget.removeClass(\"pagebuilder-toolbar-active\");\r\n      currentContentTypeTarget.find(\".pagebuilder-toolbar-options\").css(\"transform\", \"\");\r\n\r\n      if (typeof context.toolbar.observer !== \"undefined\") {\r\n        context.toolbar.observer.disconnect();\r\n      }\r\n\r\n      _events.trigger(\"stage:interactionStop\");\r\n    }\r\n    /**\r\n     * Get fixed toolbar container element referenced as selector in wysiwyg adapter settings\r\n     *\r\n     * @returns {jQuery}\r\n     */\r\n    ;\r\n\r\n    _proto.getCurrentContentTypeTarget = function getCurrentContentTypeTarget() {\r\n      return (0, _jquery)(\"#\" + this.preview.contentType.id).find(\".pagebuilder-content-type\");\r\n    };\r\n\r\n    _createClass(Toolbar, [{\r\n      key: \"template\",\r\n      get: function get() {\r\n        return \"Magento_PageBuilder/content-type-toolbar\";\r\n      }\r\n    }]);\r\n\r\n    return Toolbar;\r\n  }();\r\n  /**\r\n   * Preview interface for preview instances implementation the toolbar functionality\r\n   */\r\n\r\n\r\n  return Toolbar;\r\n});\r\n//# sourceMappingURL=content-type-toolbar.js.map","Magento_PageBuilder/js/content-type.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/events\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/data-store\"], function (_events, _mageUtils, _underscore, _config, _dataStore) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ContentType = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} parentContentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {string} stageId\r\n     */\r\n    function ContentType(parentContentType, config, stageId) {\r\n      this.id = _mageUtils.uniqueid();\r\n      this.dataStore = new _dataStore();\r\n      this.dataStores = {};\r\n      this.dropped = false;\r\n      this.parentContentType = parentContentType;\r\n      this.config = config;\r\n      this.stageId = stageId;\r\n      this.initDataStores();\r\n      this.bindEvents();\r\n    }\r\n    /**\r\n     * Destroys current instance\r\n     */\r\n\r\n\r\n    var _proto = ContentType.prototype;\r\n\r\n    _proto.destroy = function destroy() {\r\n      var params = {\r\n        contentType: this,\r\n        index: this.parentContentType ? this.parentContentType.getChildren().indexOf(this) : null,\r\n        parentContentType: this.parentContentType,\r\n        stageId: this.stageId\r\n      };\r\n      this.preview ? this.preview.destroy() : this.content.destroy();\r\n\r\n      _events.trigger(\"contentType:removeAfter\", params);\r\n\r\n      _events.trigger(this.config.name + \":removeAfter\", params);\r\n    }\r\n    /**\r\n     * Get viewport fields.\r\n     *\r\n     * @param {string} viewport\r\n     * @param {DataObject} data\r\n     */\r\n    ;\r\n\r\n    _proto.getViewportFields = function getViewportFields(viewport, data) {\r\n      var viewportConfig = this.config.breakpoints[viewport];\r\n\r\n      if (!viewportConfig) {\r\n        return {};\r\n      }\r\n\r\n      return viewportConfig.fields[data.appearance + \"-appearance\"] || viewportConfig.fields.default;\r\n    }\r\n    /**\r\n     * Get data stores states only for viewport fields\r\n     */\r\n    ;\r\n\r\n    _proto.getDataStoresStates = function getDataStoresStates() {\r\n      var _this = this;\r\n\r\n      var result = {};\r\n\r\n      _underscore.each(this.dataStores, function (dataStore, name) {\r\n        if (_config.getConfig(\"defaultViewport\") !== name) {\r\n          var dataStoreFields = _underscore.keys(_this.getDiffViewportFields(name, dataStore.getState()));\r\n\r\n          result[name] = _underscore.pick(dataStore.getState(), dataStoreFields);\r\n        } else {\r\n          result[name] = dataStore.getState();\r\n        }\r\n      });\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Set data to dataStore from dataStores base on current viewport.\r\n     *\r\n     * @param {String} viewport\r\n     */\r\n    ;\r\n\r\n    _proto.setViewportDataToDataStore = function setViewportDataToDataStore(viewport) {\r\n      var defaultViewport = _config.getConfig(\"defaultViewport\");\r\n\r\n      var currentViewportState = this.dataStores[viewport].getState();\r\n      var defaultViewportState = this.dataStores[defaultViewport].getState();\r\n\r\n      var viewportFields = _underscore.keys(this.getDiffViewportFields(viewport, currentViewportState)); // Filter viewport specific data for states\r\n\r\n\r\n      this.dataStore.setState(_underscore.extend({}, defaultViewportState, _underscore.pick(currentViewportState, viewportFields)));\r\n    };\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      var eventName = this.config.name + \":\" + this.id + \":updateAfter\";\r\n      var paramObj = {};\r\n      paramObj[this.id] = this;\r\n      this.dataStore.subscribe(function (state) {\r\n        var defaultViewport = _config.getConfig(\"defaultViewport\");\r\n\r\n        var viewport = _config.getConfig(\"viewport\") || defaultViewport;\r\n\r\n        if (viewport !== defaultViewport) {\r\n          var viewportFields = _underscore.keys(_this2.getViewportFields(viewport, state));\r\n\r\n          var diffViewportFields = _underscore.keys(_this2.getDiffViewportFields(viewport, state));\r\n\r\n          _this2.dataStores[defaultViewport].setState(_underscore.extend(_this2.dataStores[defaultViewport].getState(), _underscore.omit(state, viewportFields)));\r\n\r\n          _this2.dataStores[viewport].setState(_underscore.extend(_this2.dataStores[viewport].getState(), _underscore.pick(state, diffViewportFields)));\r\n        } else {\r\n          _this2.dataStores[viewport].setState(state);\r\n        }\r\n\r\n        return _events.trigger(eventName, paramObj);\r\n      });\r\n      this.dataStore.subscribe(function () {\r\n        return _events.trigger(\"stage:updateAfter\", {\r\n          stageId: _this2.stageId\r\n        });\r\n      });\r\n\r\n      _events.on(\"stage:\" + this.stageId + \":viewportChangeAfter\", this.onViewportSwitch.bind(this));\r\n    }\r\n    /**\r\n     * Change data stores on viewport change.\r\n     * @param {Object} args\r\n     */\r\n    ;\r\n\r\n    _proto.onViewportSwitch = function onViewportSwitch(args) {\r\n      this.setViewportDataToDataStore(args.viewport);\r\n    }\r\n    /**\r\n     * Init data store for each viewport.\r\n     */\r\n    ;\r\n\r\n    _proto.initDataStores = function initDataStores() {\r\n      var _this3 = this;\r\n\r\n      _underscore.each(_config.getConfig(\"viewports\"), function (value, name) {\r\n        _this3.dataStores[name] = new _dataStore();\r\n      });\r\n    }\r\n    /**\r\n     * Get viewport fields that is different from default.\r\n     *\r\n     * @param {string} viewport\r\n     * @param {DataObject} data\r\n     */\r\n    ;\r\n\r\n    _proto.getDiffViewportFields = function getDiffViewportFields(viewport, data) {\r\n      var fields = this.getViewportFields(viewport, data);\r\n\r\n      var defaultData = this.dataStores[_config.getConfig(\"defaultViewport\")].getState();\r\n\r\n      var excludedFields = [];\r\n\r\n      _underscore.each(fields, function (field, key) {\r\n        var comparison = _mageUtils.compare(data[key], defaultData[key]);\r\n\r\n        var isEmpty = !_underscore.find(comparison.changes, function (change) {\r\n          return !_underscore.isEmpty(change.oldValue);\r\n        });\r\n\r\n        if (comparison.equal || isEmpty) {\r\n          excludedFields.push(key);\r\n        }\r\n      });\r\n\r\n      return _underscore.omit(fields, excludedFields);\r\n    };\r\n\r\n    return ContentType;\r\n  }();\r\n\r\n  return ContentType;\r\n});\r\n//# sourceMappingURL=content-type.js.map","Magento_PageBuilder/js/data-store.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"Magento_PageBuilder/js/utils/object\"], function (_jquery, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var DataStore = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function DataStore() {\r\n      this.state = {};\r\n      this.events = (0, _jquery)({});\r\n      this.previousState = {};\r\n    }\r\n\r\n    var _proto = DataStore.prototype;\r\n\r\n    /**\r\n     * Retrieve specific data from the data store\r\n     *\r\n     * @param {string} key\r\n     * @param defaultValue\r\n     * @returns {T}\r\n     */\r\n    _proto.get = function get(key, defaultValue) {\r\n      return (0, _object.get)(this.state, key, defaultValue);\r\n    }\r\n    /**\r\n     * Retrieve the entire state of the data object\r\n     *\r\n     * @returns {DataObject}\r\n     */\r\n    ;\r\n\r\n    _proto.getState = function getState() {\r\n      return this.state;\r\n    }\r\n    /**\r\n     * Retrieve the entire previous state of the data object\r\n     *\r\n     * @returns {DataObject}\r\n     */\r\n    ;\r\n\r\n    _proto.getPreviousState = function getPreviousState() {\r\n      return this.previousState;\r\n    }\r\n    /**\r\n     * Set a specific keys value in the data store\r\n     *\r\n     * @param {string} key\r\n     * @param value\r\n     */\r\n    ;\r\n\r\n    _proto.set = function set(key, value) {\r\n      this.previousState = Object.assign({}, this.state);\r\n      (0, _object.set)(this.state, key, value);\r\n      this.emitState();\r\n    }\r\n    /**\r\n     * Update the entire state for the content type\r\n     *\r\n     * @param {DataObject} state\r\n     */\r\n    ;\r\n\r\n    _proto.setState = function setState(state) {\r\n      this.previousState = Object.assign({}, this.state);\r\n      this.state = state;\r\n      this.emitState();\r\n    }\r\n    /**\r\n     * Remove item from DataStore\r\n     *\r\n     * @param {string | number} key\r\n     */\r\n    ;\r\n\r\n    _proto.unset = function unset(key) {\r\n      var storeState = this.state;\r\n      delete storeState[key];\r\n      this.setState(storeState);\r\n    }\r\n    /**\r\n     * Subscribe to data changes within the data store of a content type\r\n     *\r\n     * @param {(state: DataObject, event: Event) => void} handler\r\n     * @param {string | number} key\r\n     */\r\n    ;\r\n\r\n    _proto.subscribe = function subscribe(handler, key) {\r\n      var _this = this;\r\n\r\n      this.events.on(\"state\", function (event, data) {\r\n        if (key) {\r\n          if (_this.previousState[key] !== data.state[key]) {\r\n            handler(data.state, event);\r\n          }\r\n        } else {\r\n          if (_this.previousState !== data.state) {\r\n            handler(data.state, event);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Emit state updates through events\r\n     */\r\n    ;\r\n\r\n    _proto.emitState = function emitState() {\r\n      this.events.trigger(\"state\", {\r\n        state: this.state\r\n      });\r\n    };\r\n\r\n    return DataStore;\r\n  }();\r\n\r\n  return DataStore;\r\n});\r\n//# sourceMappingURL=data-store.js.map","Magento_PageBuilder/js/events.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiEvents'], function (uiEvents) {\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Calls callback when name event is triggered\r\n         *\r\n         * @param {String} events\r\n         * @param {Function} callback\r\n         * @param {Function} ns\r\n         * @return {Object}\r\n         */\r\n        on: function (events, callback, ns) {\r\n            uiEvents.on('pagebuilder:' + events, callback, 'pagebuilder:' + ns);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Removed callback from listening to target event\r\n         *\r\n         * @param {String} ns\r\n         * @return {Object}\r\n         */\r\n        off: function (ns) {\r\n            uiEvents.off('pagebuilder:' + ns);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Triggers event and executes all attached callbacks\r\n         *\r\n         * @param {String} name\r\n         * @param {any} args\r\n         * @returns {Boolean}\r\n         */\r\n        trigger: function (name, args) {\r\n            return uiEvents.trigger('pagebuilder:' + name, args);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/page-builder.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"Magento_Ui/js/lib/knockout/template/loader\", \"Magento_Ui/js/modal/alert\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/acl\", \"Magento_PageBuilder/js/binding/style\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/panel\", \"Magento_PageBuilder/js/stage\", \"Magento_PageBuilder/js/template-manager\"], function (_jquery, _knockout, _translate, _events, _loader, _alert, _mageUtils, _underscore, _acl, _style, _config, _contentTypeFactory, _panel, _stage, _templateManager) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var PageBuilder = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function PageBuilder(config, initialValue) {\r\n      var _this = this;\r\n\r\n      this.template = \"Magento_PageBuilder/page-builder\";\r\n      this.isStageReady = _knockout.observable(false);\r\n      this.id = _mageUtils.uniqueid();\r\n      this.originalScrollTop = 0;\r\n      this.isFullScreen = _knockout.observable(false);\r\n      this.isSnapshot = _knockout.observable(false);\r\n      this.isSnapshotTransition = _knockout.observable(false);\r\n      this.loading = _knockout.observable(true);\r\n      this.wrapperStyles = _knockout.observable({});\r\n      this.stageStyles = _knockout.observable({});\r\n      this.viewport = _knockout.observable(\"\");\r\n      this.viewports = {};\r\n      this.viewportClasses = {};\r\n      this.previousStyles = {};\r\n\r\n      _config.setConfig(config);\r\n\r\n      _config.setMode(\"Preview\");\r\n\r\n      this.preloadTemplates(config);\r\n      this.initialValue = initialValue;\r\n      this.initViewports(config);\r\n      this.isFullScreen(config.isFullScreen);\r\n      this.isSnapshot(!!config.pagebuilder_content_snapshot);\r\n      this.isSnapshotTransition(false);\r\n      this.snapshot = !!config.pagebuilder_content_snapshot;\r\n      this.config = config;\r\n      this.isAllowedTemplateApply = (0, _acl.isAllowed)(_acl.resources.TEMPLATE_APPLY);\r\n      this.isAllowedTemplateSave = (0, _acl.isAllowed)(_acl.resources.TEMPLATE_SAVE); // Create the required root container for the stage\r\n\r\n      (0, _contentTypeFactory)(_config.getContentTypeConfig(_stage.rootContainerName), null, this.id).then(function (rootContainer) {\r\n        _this.stage = new _stage(_this, rootContainer);\r\n\r\n        _this.isStageReady(true);\r\n      });\r\n      this.panel = new _panel(this);\r\n      this.initListeners();\r\n    }\r\n    /**\r\n     * Destroy rootContainer instance.\r\n     */\r\n\r\n\r\n    var _proto = PageBuilder.prototype;\r\n\r\n    _proto.destroy = function destroy() {\r\n      this.stage.rootContainer.destroy();\r\n    }\r\n    /**\r\n     * Init listeners.\r\n     */\r\n    ;\r\n\r\n    _proto.initListeners = function initListeners() {\r\n      var _this2 = this;\r\n\r\n      _events.on(\"stage:\" + this.id + \":toggleFullscreen\", this.toggleFullScreen.bind(this));\r\n\r\n      this.isFullScreen.subscribe(function () {\r\n        return _this2.onFullScreenChange();\r\n      });\r\n    }\r\n    /**\r\n     * Tells the stage wrapper to expand to fullScreen\r\n     *\r\n     * @param {StageToggleFullScreenParamsInterface} args\r\n     */\r\n    ;\r\n\r\n    _proto.toggleFullScreen = function toggleFullScreen(args) {\r\n      var _this3 = this;\r\n\r\n      if (args.animate === false) {\r\n        this.isFullScreen(!this.isFullScreen());\r\n        return;\r\n      }\r\n\r\n      var stageWrapper = (0, _jquery)(\"#\" + this.stage.id).parent();\r\n      var pageBuilderWrapper = stageWrapper.parents(\".pagebuilder-wysiwyg-wrapper\");\r\n      var panel = stageWrapper.find(\".pagebuilder-panel\");\r\n\r\n      if (this.snapshot) {\r\n        stageWrapper.scrollTop(0);\r\n      }\r\n\r\n      if (!this.isFullScreen()) {\r\n        pageBuilderWrapper.css(\"height\", pageBuilderWrapper.outerHeight());\r\n        /**\r\n         * Fix the stage in the exact place it is when it's part of the content and allow it to transition to full\r\n         * screen.\r\n         */\r\n\r\n        var xPosition = parseInt(stageWrapper.offset().top.toString(), 10) - parseInt((0, _jquery)(window).scrollTop().toString(), 10) - (this.snapshot ? 63 : 0);\r\n        var yPosition = stageWrapper.offset().left - (this.snapshot ? 150 : 0);\r\n        this.previousStyles = {\r\n          position: this.snapshot ? \"relative\" : \"fixed\",\r\n          top: xPosition + \"px\",\r\n          left: yPosition + \"px\",\r\n          zIndex: \"800\",\r\n          width: stageWrapper.outerWidth().toString() + \"px\"\r\n        };\r\n\r\n        if (this.snapshot) {\r\n          this.isSnapshot(false);\r\n          this.stageStyles(this.previousStyles);\r\n        } else {\r\n          this.previousPanelHeight = panel.outerHeight();\r\n          panel.css(\"height\", this.previousPanelHeight + \"px\");\r\n          this.wrapperStyles(this.previousStyles);\r\n        }\r\n\r\n        this.isFullScreen(true);\r\n\r\n        _underscore.defer(function () {\r\n          // Remove all styles we applied to fix the position once we're transitioning\r\n          panel.css(\"height\", \"\");\r\n\r\n          if (_this3.snapshot) {\r\n            _this3.stageStyles(Object.keys(_this3.previousStyles).reduce(function (object, styleName) {\r\n              var _Object$assign;\r\n\r\n              return Object.assign(object, (_Object$assign = {}, _Object$assign[styleName] = \"\", _Object$assign));\r\n            }, {}));\r\n          } else {\r\n            _this3.wrapperStyles(Object.keys(_this3.previousStyles).reduce(function (object, styleName) {\r\n              var _Object$assign2;\r\n\r\n              return Object.assign(object, (_Object$assign2 = {}, _Object$assign2[styleName] = \"\", _Object$assign2));\r\n            }, {}));\r\n          }\r\n        });\r\n      } else {\r\n        // When leaving full screen mode just transition back to the original state\r\n        if (this.snapshot) {\r\n          this.isSnapshotTransition(true);\r\n          this.stageStyles(this.previousStyles);\r\n        } else {\r\n          this.wrapperStyles(this.previousStyles);\r\n          this.isFullScreen(false);\r\n        }\r\n\r\n        panel.css(\"height\", this.previousPanelHeight + \"px\"); // Wait for the 350ms animation to complete before changing these properties back\r\n\r\n        _underscore.delay(function () {\r\n          if (_this3.snapshot) {\r\n            _this3.isSnapshot(true);\r\n\r\n            _this3.isSnapshotTransition(false);\r\n\r\n            _this3.stageStyles(Object.keys(_this3.previousStyles).reduce(function (object, styleName) {\r\n              var _Object$assign3;\r\n\r\n              return Object.assign(object, (_Object$assign3 = {}, _Object$assign3[styleName] = \"\", _Object$assign3));\r\n            }, {}));\r\n\r\n            _this3.isFullScreen(false);\r\n          } else {\r\n            _this3.wrapperStyles(Object.keys(_this3.previousStyles).reduce(function (object, styleName) {\r\n              var _Object$assign4;\r\n\r\n              return Object.assign(object, (_Object$assign4 = {}, _Object$assign4[styleName] = \"\", _Object$assign4));\r\n            }, {}));\r\n          }\r\n\r\n          panel.css(\"height\", \"\");\r\n          pageBuilderWrapper.css(\"height\", \"\");\r\n          _this3.previousStyles = {};\r\n          _this3.previousPanelHeight = null;\r\n        }, 350);\r\n      }\r\n\r\n      return true;\r\n    }\r\n    /**\r\n     * Change window scroll base on full screen mode.\r\n     */\r\n    ;\r\n\r\n    _proto.onFullScreenChange = function onFullScreenChange() {\r\n      if (this.isFullScreen()) {\r\n        (0, _jquery)(\"body\").css(\"overflow\", \"hidden\");\r\n      } else {\r\n        (0, _jquery)(\"body\").css(\"overflow\", \"\");\r\n      }\r\n\r\n      _events.trigger(\"stage:\" + this.id + \":fullScreenModeChangeAfter\", {\r\n        fullScreen: this.isFullScreen()\r\n      });\r\n\r\n      _events.trigger(\"stage:fullScreenModeChangeAfter\", {\r\n        pageBuilderId: this.id,\r\n        fullScreen: this.isFullScreen()\r\n      });\r\n    }\r\n    /**\r\n     * Get template.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getTemplate = function getTemplate() {\r\n      return this.template;\r\n    };\r\n\r\n    /**\r\n     * Toggle template manager\r\n     */\r\n    _proto.toggleTemplateManger = function toggleTemplateManger() {\r\n      if (!(0, _acl.isAllowed)(_acl.resources.TEMPLATE_APPLY)) {\r\n        (0, _alert)({\r\n          content: (0, _translate)(\"You do not have permission to apply templates.\"),\r\n          title: (0, _translate)(\"Permission Error\")\r\n        });\r\n        return false;\r\n      }\r\n\r\n      _events.trigger(\"stage:templateManager:open\", {\r\n        stage: this.stage\r\n      });\r\n    }\r\n    /**\r\n     * Enable saving the current stage as a template\r\n     */\r\n    ;\r\n\r\n    _proto.saveAsTemplate = function saveAsTemplate() {\r\n      return (0, _templateManager.saveAsTemplate)(this.stage);\r\n    };\r\n\r\n    _proto.toggleViewport = function toggleViewport(viewport) {\r\n      var previousViewport = this.viewport();\r\n      this.viewport(viewport);\r\n\r\n      _underscore.each(this.viewportClasses, function (viewportClass) {\r\n        viewportClass(false);\r\n      });\r\n\r\n      this.viewportClasses[viewport + \"-viewport\"](true);\r\n\r\n      _config.setConfig({\r\n        viewport: viewport\r\n      });\r\n\r\n      _events.trigger(\"stage:\" + this.id + \":viewportChangeAfter\", {\r\n        viewport: viewport,\r\n        previousViewport: previousViewport\r\n      });\r\n\r\n      _events.trigger(\"stage:viewportChangeAfter\", {\r\n        viewport: viewport,\r\n        previousViewport: previousViewport\r\n      });\r\n    }\r\n    /**\r\n     * Preload all templates into the window to reduce calls later in the app\r\n     *\r\n     * @param config\r\n     */\r\n    ;\r\n\r\n    _proto.preloadTemplates = function preloadTemplates(config) {\r\n      var previewTemplates = _underscore.values(config.content_types).map(function (contentType) {\r\n        return _underscore.values(contentType.appearances).map(function (appearance) {\r\n          return appearance.preview_template;\r\n        });\r\n      }).reduce(function (array, value) {\r\n        return array.concat(value);\r\n      }, []).map(function (value) {\r\n        return (0, _loader.formatPath)(value);\r\n      });\r\n\r\n      _underscore.defer(function () {\r\n        require(previewTemplates);\r\n      });\r\n    };\r\n\r\n    _proto.initViewports = function initViewports(config) {\r\n      var _this4 = this;\r\n\r\n      this.viewports = config.viewports;\r\n      this.defaultViewport = config.defaultViewport;\r\n      this.viewport(this.defaultViewport);\r\n\r\n      _config.setConfig({\r\n        viewport: this.defaultViewport\r\n      });\r\n\r\n      _underscore.each(this.viewports, function (viewport, name) {\r\n        _this4.viewportClasses[name + \"-viewport\"] = _knockout.observable(name === _this4.defaultViewport);\r\n      });\r\n    };\r\n\r\n    _createClass(PageBuilder, [{\r\n      key: \"viewportTemplate\",\r\n      get: function get() {\r\n        return \"Magento_PageBuilder/viewport/switcher\";\r\n      }\r\n    }]);\r\n\r\n    return PageBuilder;\r\n  }();\r\n\r\n  return PageBuilder;\r\n});\r\n//# sourceMappingURL=page-builder.js.map","Magento_PageBuilder/js/panel.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"consoleLogger\", \"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/binding/draggable\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/drag-drop/drop-indicators\", \"Magento_PageBuilder/js/drag-drop/registry\", \"Magento_PageBuilder/js/panel/menu\", \"Magento_PageBuilder/js/panel/menu/content-type\", \"Magento_PageBuilder/js/utils/position-sticky\"], function (_consoleLogger, _jquery, _knockout, _translate, _events, _underscore, _draggable, _config, _dropIndicators, _registry, _menu, _contentType, _positionSticky) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Panel = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Panel(pageBuilder) {\r\n      this.menuSections = _knockout.observableArray([]);\r\n      this.searchResults = _knockout.observableArray([]);\r\n      this.isVisible = _knockout.observable(false);\r\n      this.isStickyBottom = _knockout.observable(false);\r\n      this.isStickyTop = _knockout.observable(false);\r\n      this.searching = _knockout.observable(false);\r\n      this.searchValue = _knockout.observable(\"\");\r\n      this.searchPlaceholder = (0, _translate)(\"Find items\");\r\n      this.searchNoResult = (0, _translate)(\"Nothing found\");\r\n      this.searchTitle = (0, _translate)(\"Clear Search\");\r\n      this.template = \"Magento_PageBuilder/panel\";\r\n      this.pageBuilder = pageBuilder;\r\n      this.id = this.pageBuilder.id;\r\n      this.initListeners();\r\n    }\r\n    /**\r\n     * On render init the panel\r\n     *\r\n     * @param {Element} element\r\n     */\r\n\r\n\r\n    var _proto = Panel.prototype;\r\n\r\n    _proto.afterRender = function afterRender(element) {\r\n      this.element = element;\r\n    }\r\n    /**\r\n     * Init listeners\r\n     */\r\n    ;\r\n\r\n    _proto.initListeners = function initListeners() {\r\n      var _this = this;\r\n\r\n      _events.on(\"stage:\" + this.id + \":readyAfter\", function () {\r\n        _this.populateContentTypes();\r\n\r\n        if (!(0, _positionSticky.supportsPositionSticky)()) {\r\n          _this.onScroll();\r\n        }\r\n\r\n        _this.isVisible(true);\r\n      });\r\n    }\r\n    /**\r\n     * Return the template string\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getTemplate = function getTemplate() {\r\n      return this.template;\r\n    }\r\n    /**\r\n     * Conduct a search on the available content types,\r\n     * and find matches for beginning of words.\r\n     *\r\n     * @param self\r\n     * @param event\r\n     */\r\n    ;\r\n\r\n    _proto.search = function search(self, event) {\r\n      var _this2 = this;\r\n\r\n      this.searchValue(event.currentTarget.value.toLowerCase());\r\n\r\n      if (this.searchValue() === \"\") {\r\n        this.searching(false);\r\n      } else {\r\n        this.searching(true);\r\n        this.searchResults(_underscore.map(_underscore.filter(_config.getConfig(\"content_types\"), function (contentType) {\r\n          if (contentType.is_system !== true) {\r\n            return false;\r\n          }\r\n\r\n          var escapedSearchValue = self.searchValue().replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\r\n          var regEx = new RegExp(\"\\\\b\" + escapedSearchValue, \"gi\");\r\n          return regEx.test(contentType.label.toLowerCase());\r\n        }), function (contentType, identifier) {\r\n          // Create a new instance of GroupContentType for each result\r\n          return new _contentType.ContentType(identifier, contentType, _this2.pageBuilder.stage.id);\r\n        }));\r\n      }\r\n    }\r\n    /**\r\n     * Clear Search Results\r\n     */\r\n    ;\r\n\r\n    _proto.clearSearch = function clearSearch() {\r\n      this.searchValue(\"\");\r\n      this.searching(false);\r\n    }\r\n    /**\r\n     * Toggle stickiness of panel based on browser scroll position and height of panel\r\n     * Enable panel stickiness if panel and stage are available\r\n     * Only stick when panel height is smaller than stage height\r\n     * Stick panel to top when scroll reaches top position of stage\r\n     * Stick panel to bottom when scroll reaches bottom position of stage\r\n     */\r\n    ;\r\n\r\n    _proto.onScroll = function onScroll() {\r\n      var self = this;\r\n      var pageActions = (0, _jquery)(\".page-actions\");\r\n      var panel = (0, _jquery)(this.element);\r\n      panel.addClass(\"no-position-sticky\");\r\n      var stage = panel.siblings(\".pagebuilder-stage\");\r\n      (0, _jquery)(window).scroll(function () {\r\n        if (panel && panel.offset()) {\r\n          var panelOffsetTop = panel.offset().top;\r\n          var stageOffsetTop = stage.offset().top;\r\n          var panelHeight = panel.outerHeight();\r\n          var stageHeight = stage.outerHeight();\r\n          var currentPanelBottom = Math.round(panelOffsetTop + panel.outerHeight(true) - (0, _jquery)(this).scrollTop());\r\n          var currentStageBottom = Math.round(stageOffsetTop + stage.outerHeight(true) - (0, _jquery)(this).scrollTop());\r\n          var currentPanelTop = Math.round(panelOffsetTop - (0, _jquery)(this).scrollTop());\r\n          var currentStageTop = Math.round(stageOffsetTop - (0, _jquery)(this).scrollTop()); // When panel height is less than stage, begin stickiness\r\n\r\n          if (panelHeight <= stageHeight && pageActions.hasClass(\"_fixed\")) {\r\n            var pageActionsHeight = pageActions.outerHeight() + 15; // When scroll reaches top of stage, stick panel to top\r\n\r\n            if (currentStageTop <= pageActionsHeight) {\r\n              // When panel reaches bottom of stage, stick panel to bottom of stage\r\n              if (currentPanelBottom >= currentStageBottom && currentPanelTop <= pageActionsHeight) {\r\n                self.isStickyBottom(true);\r\n                self.isStickyTop(false);\r\n              } else {\r\n                self.isStickyBottom(false);\r\n                self.isStickyTop(true);\r\n              }\r\n            } else {\r\n              self.isStickyBottom(false);\r\n              self.isStickyTop(false);\r\n            }\r\n          } else {\r\n            self.isStickyBottom(false);\r\n            self.isStickyTop(false);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Retrieve the draggable options for the panel items\r\n     *\r\n     * @returns {JQueryUI.DraggableOptions}\r\n     */\r\n    ;\r\n\r\n    _proto.getDraggableOptions = function getDraggableOptions(element) {\r\n      // If we're within a modal make the containment be the current modal\r\n      var containment;\r\n\r\n      if ((0, _jquery)(element).parents(\".modal-inner-wrap\").length > 0) {\r\n        containment = (0, _jquery)(element).parents(\".modal-inner-wrap\");\r\n      }\r\n\r\n      var self = this;\r\n      return {\r\n        appendTo: \"body\",\r\n        cursor: \"-webkit-grabbing\",\r\n        connectToSortable: \".content-type-drop\",\r\n        containment: containment || \"document\",\r\n        scroll: true,\r\n        helper: function helper() {\r\n          return (0, _jquery)(this).clone().css({\r\n            width: (0, _jquery)(this).width(),\r\n            height: (0, _jquery)(this).height(),\r\n            zIndex: 10001,\r\n            pointerEvents: \"none\"\r\n          });\r\n        },\r\n        start: function start() {\r\n          var block = _knockout.dataFor(this);\r\n\r\n          if (block && block.config) {\r\n            // Blur any focused element\r\n            if (document.querySelector(\":focus\")) {\r\n              document.querySelector(\":focus\").blur();\r\n            }\r\n            /**\r\n             * Swap all sortable instances to use intersect, as the item from the left panel is a predictable\r\n             * size this yields better results when dragging\r\n             */\r\n\r\n\r\n            (0, _jquery)(\".content-type-container.ui-sortable\").each(function () {\r\n              if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n                (0, _jquery)(this).sortable(\"option\", \"tolerance\", \"intersect\");\r\n              }\r\n            });\r\n            (0, _dropIndicators.showDropIndicators)(block.config.name, self.pageBuilder.stage.id);\r\n            (0, _registry.setDraggedContentTypeConfig)(block.config);\r\n\r\n            _events.trigger(\"stage:interactionStart\", {\r\n              stage: self.pageBuilder.stage\r\n            });\r\n          }\r\n        },\r\n        stop: function stop() {\r\n          (0, _jquery)(\".content-type-container.ui-sortable\").each(function () {\r\n            if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n              (0, _jquery)(this).sortable(\"option\", \"tolerance\", \"pointer\");\r\n            }\r\n          });\r\n          (0, _dropIndicators.hideDropIndicators)();\r\n          (0, _registry.setDraggedContentTypeConfig)(null);\r\n\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            stage: self.pageBuilder.stage\r\n          });\r\n        }\r\n      };\r\n    }\r\n    /**\r\n     * Populate the panel with the content types\r\n     */\r\n    ;\r\n\r\n    _proto.populateContentTypes = function populateContentTypes() {\r\n      var _this3 = this;\r\n\r\n      var menuSections = _config.getConfig(\"menu_sections\");\r\n\r\n      var contentTypes = _config.getConfig(\"content_types\"); // Verify the configuration contains the required information\r\n\r\n\r\n      if (menuSections && contentTypes) {\r\n        // Iterate through the menu sections creating new instances with their associated content types\r\n        _underscore.each(menuSections, function (menuSection, id) {\r\n          // Push the menu section instance into the observable array to update the UI\r\n          _this3.menuSections.push(new _menu.Menu(id, menuSection, _underscore.map(_underscore.where(contentTypes, {\r\n            menu_section: id,\r\n            is_system: true\r\n          }),\r\n          /* Retrieve content types with menu section id */\r\n          function (contentType, identifier) {\r\n            return new _contentType.ContentType(identifier, contentType, _this3.pageBuilder.stage.id);\r\n          }), _this3.pageBuilder.stage.id));\r\n        }); // Display the panel\r\n\r\n\r\n        this.isVisible(true); // Open first menu section\r\n\r\n        var hasGroups = (0 in this.menuSections());\r\n\r\n        if (hasGroups) {\r\n          this.menuSections()[0].active(true);\r\n        }\r\n      } else {\r\n        _consoleLogger.error(\"Unable to retrieve content types from server, please inspect network requests \" + \"response.\");\r\n      }\r\n    };\r\n\r\n    return Panel;\r\n  }();\r\n\r\n  return Panel;\r\n});\r\n//# sourceMappingURL=panel.js.map","Magento_PageBuilder/js/stage-builder.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"mage/translate\", \"Magento_PageBuilder/js/events\", \"Magento_Ui/js/modal/alert\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-collection\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type/appearance-config\", \"Magento_PageBuilder/js/content-type/style-registry\", \"Magento_PageBuilder/js/master-format/validator\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/utils/object\"], function (_translate, _events, _alert, _, _config, _contentTypeCollection, _contentTypeFactory, _appearanceConfig, _styleRegistry, _validator, _directives, _loader, _object) {\r\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Build the stage with the provided value\r\n   *\r\n   * @param {stage} stage\r\n   * @param {string} value\r\n   * @returns {Promise<void>}\r\n   */\r\n  function buildFromContent(stage, value) {\r\n    var stageDocument = new DOMParser().parseFromString(value, \"text/html\");\r\n    stageDocument.body.setAttribute(_config.getConfig(\"dataContentTypeAttributeName\"), \"stage\");\r\n    stageDocument.body.id = _config.getConfig(\"bodyId\");\r\n    convertToInlineStyles(stageDocument);\r\n    return buildElementIntoStage(stageDocument.body, stage.rootContainer, stage);\r\n  }\r\n  /**\r\n   * Convert styles to block to inline styles.\r\n   *\r\n   * @param document\r\n   */\r\n\r\n\r\n  function convertToInlineStyles(document) {\r\n    var styleBlocks = document.getElementsByTagName(\"style\");\r\n    var viewportStyles = {};\r\n\r\n    _.each(_config.getConfig(\"viewports\"), function (viewport, name) {\r\n      return viewportStyles[name] = {};\r\n    });\r\n\r\n    if (styleBlocks.length > 0) {\r\n      Array.from(styleBlocks).forEach(function (styleBlock) {\r\n        var cssRules = styleBlock.sheet.cssRules;\r\n        processCssRules(cssRules, viewportStyles, _config.getConfig(\"defaultViewport\"));\r\n        styleBlock.remove();\r\n      });\r\n    }\r\n\r\n    _.each(viewportStyles, function (styles, name) {\r\n      _.each(styles, function (stylesArray, selector) {\r\n        var element = document.querySelector(selector);\r\n\r\n        _.each(stylesArray, function (style) {\r\n          element.setAttribute(\"data-\" + name + \"-style\", element.getAttribute(\"data-\" + name + \"-style\") ? element.getAttribute(\"data-\" + name + \"-style\") + style.cssText : style.cssText);\r\n        });\r\n      });\r\n    });\r\n\r\n    document.querySelectorAll(\"[\" + _styleRegistry.pbStyleAttribute + \"]\").forEach(function (element) {\r\n      element.removeAttribute(_styleRegistry.pbStyleAttribute);\r\n    });\r\n  }\r\n  /**\r\n   * Process styles and assign them to corespondent style object.\r\n   *\r\n   * @param cssRules\r\n   * @param styles\r\n   * @param scope\r\n   */\r\n\r\n\r\n  function processCssRules(cssRules, styles, scope) {\r\n    Array.from(cssRules).forEach(function (rule) {\r\n      if (rule instanceof CSSStyleRule) {\r\n        var selectors = rule.selectorText.split(\",\").map(function (selector) {\r\n          return selector.trim();\r\n        });\r\n        selectors.forEach(function (selector) {\r\n          if (!styles[scope][selector]) {\r\n            styles[scope][selector] = [];\r\n          }\r\n\r\n          styles[scope][selector].push(rule.style);\r\n        });\r\n      } else if (rule instanceof CSSMediaRule) {\r\n        var mediaCssRules = rule.cssRules;\r\n\r\n        var mediaScope = _.findKey(_config.getConfig(\"viewports\"), function (viewport) {\r\n          return rule.conditionText === viewport.media;\r\n        });\r\n\r\n        if (mediaScope) {\r\n          processCssRules(mediaCssRules, styles, mediaScope);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Build an element and it's children into the stage\r\n   *\r\n   * @param {Element} element\r\n   * @param {ContentTypeCollectionInterface} contentType\r\n   * @param {stage} stage\r\n   * @returns {Promise<void>}\r\n   */\r\n\r\n\r\n  function buildElementIntoStage(element, contentType, stage) {\r\n    if (element instanceof HTMLElement && element.getAttribute(_config.getConfig(\"dataContentTypeAttributeName\"))) {\r\n      var childPromises = [];\r\n      var childElements = [];\r\n      var children = getElementChildren(element);\r\n\r\n      if (children.length > 0) {\r\n        _.forEach(children, function (childElement) {\r\n          childPromises.push(createElementContentType(childElement, stage, contentType));\r\n          childElements.push(childElement);\r\n        });\r\n      } // Wait for all the promises to finish and add the instances to the stage\r\n\r\n\r\n      return Promise.all(childPromises).then(function (childrenPromises) {\r\n        return Promise.all(childrenPromises.map(function (child, index) {\r\n          contentType.addChild(child); // Only render children if the content type implements the collection\r\n\r\n          if (child instanceof _contentTypeCollection) {\r\n            return buildElementIntoStage(childElements[index], child, stage);\r\n          }\r\n        }));\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Parse an element in the structure and build the required element\r\n   *\r\n   * @param {Element} element\r\n   * @param {ContentTypeCollectionInterface} contentType\r\n   * @param {stage} stage\r\n   * @returns {Promise<ContentTypeInterface>}\r\n   */\r\n\r\n\r\n  function createElementContentType(element, stage, contentType) {\r\n    contentType = contentType || stage.rootContainer;\r\n    var role = element.getAttribute(_config.getConfig(\"dataContentTypeAttributeName\"));\r\n\r\n    if (!role) {\r\n      return Promise.reject(\"Invalid master format: Content type element does not contain\\n            \" + _config.getConfig(\"dataContentTypeAttributeName\") + \" attribute.\");\r\n    }\r\n\r\n    var config = _config.getContentTypeConfig(role);\r\n\r\n    if (!config) {\r\n      return Promise.reject(\"Unable to load Page Builder configuration for content type \\\"\" + role + \"\\\".\");\r\n    }\r\n\r\n    return getElementData(element, config).then( // @ts-ignore\r\n    function (data) {\r\n      return (0, _contentTypeFactory)(config, contentType, stage.id, data[_config.getConfig(\"defaultViewport\")], getElementChildren(element).length, data);\r\n    });\r\n  }\r\n  /**\r\n   * Retrieve the elements data\r\n   *\r\n   * @param {HTMLElement} element\r\n   * @param {ContentTypeConfigInterface} config\r\n   * @returns {Promise<{[p: string]: any}>}\r\n   */\r\n\r\n\r\n  function getElementData(element, config) {\r\n    // Create an object with all fields for the content type with an empty value\r\n    var appearance = element.dataset.appearance + \"-appearance\";\r\n    var fields = config.fields[appearance] || config.fields.default;\r\n    var result = createInitialElementData(fields);\r\n    return new Promise(function (resolve) {\r\n      var role = element.getAttribute(_config.getConfig(\"dataContentTypeAttributeName\"));\r\n\r\n      if (!_config.getConfig(\"content_types\").hasOwnProperty(role)) {\r\n        resolve(result);\r\n      } else {\r\n        var readerComponents = (0, _appearanceConfig)(role, element.dataset.appearance).reader;\r\n        (0, _loader)([readerComponents], function () {\r\n          for (var _len = arguments.length, readers = new Array(_len), _key = 0; _key < _len; _key++) {\r\n            readers[_key] = arguments[_key];\r\n          }\r\n\r\n          var ReaderComponent = readers.pop();\r\n          var reader = new ReaderComponent();\r\n          reader.read(element).then(function (readerData) {\r\n            /**\r\n             * Iterate through the reader data and set the values onto the result array to ensure dot notation\r\n             * keys are properly handled.\r\n             */\r\n            _.each(readerData[_config.getConfig(\"defaultViewport\")], function (value, key) {\r\n              (0, _object.set)(result, key, value);\r\n            });\r\n\r\n            readerData[_config.getConfig(\"defaultViewport\")] = result;\r\n            resolve(readerData);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Create the initial object for storing the elements data\r\n   *\r\n   * @param {ConfigFieldInterface} fields\r\n   * @returns {FieldDefaultsInterface}\r\n   */\r\n\r\n\r\n  function createInitialElementData(fields) {\r\n    return _.mapObject(fields, function (field) {\r\n      if (!_.isUndefined(field.default)) {\r\n        return \"\";\r\n      } else if (_.isObject(field)) {\r\n        return createInitialElementData(field);\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Return elements children, search for direct descendants, or traverse through to find deeper children\r\n   *\r\n   * @param {HTMLElement} element\r\n   * @returns {Array<HTMLElement>}\r\n   */\r\n\r\n\r\n  function getElementChildren(element) {\r\n    if (element.hasChildNodes()) {\r\n      var children = []; // Find direct children of the element\r\n\r\n      _.forEach(element.childNodes, function (child) {\r\n        if (child.nodeType === Node.ELEMENT_NODE) {\r\n          if (child.hasAttribute(_config.getConfig(\"dataContentTypeAttributeName\"))) {\r\n            children.push(child);\r\n          } else {\r\n            children = getElementChildren(child);\r\n          }\r\n        }\r\n      });\r\n\r\n      return children;\r\n    }\r\n\r\n    return [];\r\n  }\r\n  /**\r\n   * Build a new instance of stage, add row & text content types if needed\r\n   *\r\n   * @param {Stage} stage\r\n   * @param {string} initialValue\r\n   * @returns {Promise<any>}\r\n   */\r\n\r\n\r\n  function buildEmpty(stage, initialValue) {\r\n    var stageConfig = _config.getConfig(\"stage_config\");\r\n\r\n    var rootContainer = stage.rootContainer;\r\n\r\n    var rootContentTypeConfig = _config.getContentTypeConfig(stageConfig.root_content_type);\r\n\r\n    var htmlDisplayContentTypeConfig = _config.getContentTypeConfig(stageConfig.html_display_content_type); // @ts-ignore\r\n\r\n\r\n    var promise = Promise.resolve();\r\n\r\n    if (stageConfig.root_content_type && stageConfig.root_content_type !== \"none\") {\r\n      promise = (0, _contentTypeFactory)(rootContentTypeConfig, rootContainer, stage.id);\r\n      promise.then(function (rootContentType) {\r\n        if (!rootContentType) {\r\n          return Promise.reject(\"Unable to create initial \" + stageConfig.root_content_type + \" content type \" + \" within stage.\");\r\n        }\r\n\r\n        rootContainer.addChild(rootContentType);\r\n      });\r\n    }\r\n\r\n    promise.then(function (rootContentType) {\r\n      if (htmlDisplayContentTypeConfig && initialValue) {\r\n        return (0, _contentTypeFactory)(htmlDisplayContentTypeConfig, rootContainer, stage.id, {\r\n          html: initialValue\r\n        }).then(function (html) {\r\n          if (rootContentType) {\r\n            rootContentType.addChild(html);\r\n          } else {\r\n            rootContainer.addChild(html);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return promise;\r\n  }\r\n  /**\r\n   * Build a stage with the provided content type, content observable and initial value\r\n   *\r\n   * @param {Stage} stage\r\n   * @param {string} content\r\n   * @returns {Promise}\r\n   */\r\n\r\n\r\n  function build(stage, content) {\r\n    var currentBuild;\r\n    content = (0, _directives.removeQuotesInMediaDirectives)(content); // Determine if we're building from existing page builder content\r\n\r\n    if ((0, _validator)(content)) {\r\n      currentBuild = buildFromContent(stage, content).catch(function (error) {\r\n        console.error(error);\r\n        stage.rootContainer.children([]);\r\n        currentBuild = buildEmpty(stage, content);\r\n      });\r\n    } else {\r\n      currentBuild = buildEmpty(stage, content);\r\n    } // Once the build process is finished the stage is ready\r\n\r\n\r\n    return currentBuild.catch(function (error) {\r\n      (0, _alert)({\r\n        content: (0, _translate)(\"An error has occurred while initiating Page Builder. Please consult with your technical \" + \"support contact.\"),\r\n        title: (0, _translate)(\"Page Builder Error\")\r\n      });\r\n\r\n      _events.trigger(\"stage:error\", error);\r\n\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  return build;\r\n});\r\n//# sourceMappingURL=stage-builder.js.map","Magento_PageBuilder/js/stage.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/resource/jquery/ui/jquery.ui.touch-punch\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/binding/sortable\", \"Magento_PageBuilder/js/collection\", \"Magento_PageBuilder/js/data-store\", \"Magento_PageBuilder/js/drag-drop/matrix\", \"Magento_PageBuilder/js/master-format/render\", \"Magento_PageBuilder/js/stage-builder\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/promise-deferred\"], function (_jquery, _knockout, _events, _jqueryUi, _mageUtils, _underscore, _sortable, _collection, _dataStore, _matrix, _render, _stageBuilder, _editor, _promiseDeferred) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Stage = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * We always complete a single render when the stage is first loaded, so we can set the lock when the stage is\r\n     * created. The lock is used to halt the parent forms submission when Page Builder is rendering.\r\n     */\r\n\r\n    /**\r\n     * Debounce the applyBindings call by 500ms to stop duplicate calls\r\n     *\r\n     * @type {(() => void) & _.Cancelable}\r\n     */\r\n\r\n    /**\r\n     * @param {PageBuilderInterface} pageBuilder\r\n     * @param {ContentTypeCollectionInterface} rootContainer\r\n     */\r\n    function Stage(pageBuilder, rootContainer) {\r\n      var _this = this;\r\n\r\n      this.loading = _knockout.observable(true);\r\n      this.showBorders = _knockout.observable(false);\r\n      this.interacting = _knockout.observable(false);\r\n      this.userSelect = _knockout.observable(true);\r\n      this.focusChild = _knockout.observable(false);\r\n      this.dataStore = new _dataStore();\r\n      this.afterRenderDeferred = (0, _promiseDeferred)();\r\n      this.renderingLocks = [];\r\n      this.template = \"Magento_PageBuilder/content-type/preview\";\r\n      this.collection = new _collection();\r\n      this.applyBindingsDebounce = _underscore.debounce(function (renderId) {\r\n        _this.render.applyBindings(_this.rootContainer).then(function (renderedOutput) {\r\n          if (_this.lastRenderId === renderId) {\r\n            _events.trigger(\"stage:\" + _this.id + \":masterFormatRenderAfter\", {\r\n              value: (0, _editor.unescapeDoubleQuoteWithinWidgetDirective)(renderedOutput)\r\n            });\r\n\r\n            _this.renderingLocks.forEach(function (lock) {\r\n              lock.resolve(renderedOutput);\r\n            });\r\n          }\r\n        }).catch(function (error) {\r\n          if (error) {\r\n            console.error(error);\r\n          }\r\n        });\r\n      }, 500);\r\n      this.pageBuilder = pageBuilder;\r\n      this.id = pageBuilder.id;\r\n      this.render = new _render(pageBuilder.id);\r\n      this.rootContainer = rootContainer;\r\n      (0, _matrix.generateAllowedParents)(); // Fire an event after the DOM has rendered\r\n\r\n      this.afterRenderDeferred.promise.then(function () {\r\n        _this.render.setupChannel();\r\n\r\n        _events.trigger(\"stage:\" + _this.id + \":renderAfter\", {\r\n          stage: _this\r\n        });\r\n      }); // Wait for the stage to be built alongside the stage being rendered\r\n\r\n      Promise.all([(0, _stageBuilder)(this, (0, _editor.escapeDoubleQuoteWithinWidgetDirective)(this.pageBuilder.initialValue)), this.afterRenderDeferred.promise]).then(this.ready.bind(this)).catch(function (error) {\r\n        console.error(error);\r\n      });\r\n    }\r\n    /**\r\n     * Get template.\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = Stage.prototype;\r\n\r\n    _proto.getTemplate = function getTemplate() {\r\n      return this.template;\r\n    }\r\n    /**\r\n     * The stage has been initiated fully and is ready\r\n     */\r\n    ;\r\n\r\n    _proto.ready = function ready() {\r\n      _events.trigger(\"stage:\" + this.id + \":readyAfter\", {\r\n        stage: this\r\n      });\r\n\r\n      this.loading(false);\r\n      this.initListeners(); // Ensure we complete an initial save of the data within the stage once we're ready\r\n\r\n      _events.trigger(\"stage:updateAfter\", {\r\n        stageId: this.id\r\n      });\r\n    }\r\n    /**\r\n     * Init listeners\r\n     */\r\n    ;\r\n\r\n    _proto.initListeners = function initListeners() {\r\n      var _this2 = this;\r\n\r\n      this.collection.getChildren().subscribe(function () {\r\n        return _events.trigger(\"stage:updateAfter\", {\r\n          stageId: _this2.id\r\n        });\r\n      }); // ContentType being removed from container\r\n\r\n      _events.on(\"contentType:removeAfter\", function (args) {\r\n        if (args.stageId === _this2.id) {\r\n          _this2.onContentTypeRemoved(args);\r\n        }\r\n      }); // Any store state changes trigger a stage update event\r\n\r\n\r\n      this.dataStore.subscribe(function () {\r\n        return _events.trigger(\"stage:updateAfter\", {\r\n          stageId: _this2.id\r\n        });\r\n      }); // Watch for stage update events & manipulations to the store, debounce for 50ms as multiple stage changes\r\n      // can occur concurrently.\r\n\r\n      _events.on(\"stage:updateAfter\", function (args) {\r\n        if (args.stageId === _this2.id) {\r\n          // Create the rendering lock straight away\r\n          _this2.createLock();\r\n\r\n          var renderId = _mageUtils.uniqueid();\r\n\r\n          _this2.lastRenderId = renderId;\r\n\r\n          _this2.applyBindingsDebounce(renderId);\r\n        }\r\n      });\r\n\r\n      var interactionLevel = 0;\r\n\r\n      _events.on(\"stage:interactionStart\", function () {\r\n        ++interactionLevel;\r\n\r\n        _this2.interacting(true);\r\n      });\r\n\r\n      _events.on(\"stage:interactionStop\", function (args) {\r\n        var forced = _underscore.isObject(args) && args.force === true;\r\n        interactionLevel = Math.max(interactionLevel - 1, 0);\r\n\r\n        if (interactionLevel === 0 || forced) {\r\n          _this2.interacting(false);\r\n\r\n          if (forced) {\r\n            interactionLevel = 0;\r\n          }\r\n        }\r\n      });\r\n\r\n      _events.on(\"stage:childFocusStart\", function () {\r\n        return _this2.focusChild(true);\r\n      });\r\n\r\n      _events.on(\"stage:childFocusStop\", function () {\r\n        return _this2.focusChild(false);\r\n      });\r\n    }\r\n    /**\r\n     * Create a new lock for rendering\r\n     */\r\n    ;\r\n\r\n    _proto.createLock = function createLock() {\r\n      this.renderingLocks.push(_jquery.Deferred());\r\n    }\r\n    /**\r\n     * On content type removed\r\n     *\r\n     * @param params\r\n     */\r\n    ;\r\n\r\n    _proto.onContentTypeRemoved = function onContentTypeRemoved(params) {\r\n      if (params.parentContentType) {\r\n        params.parentContentType.removeChild(params.contentType);\r\n      }\r\n    };\r\n\r\n    return Stage;\r\n  }();\r\n\r\n  Stage.rootContainerName = \"root-container\";\r\n  return Stage;\r\n});\r\n//# sourceMappingURL=stage.js.map","Magento_PageBuilder/js/template-manager.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"html2canvas\", \"jquery\", \"mage/translate\", \"Magento_PageBuilder/js/modal/confirm-alert\", \"Magento_PageBuilder/js/modal/template-manager-save\", \"text!Magento_PageBuilder/template/modal/template-manager/save-content-modal.html\", \"uiRegistry\", \"underscore\", \"Magento_PageBuilder/js/acl\", \"Magento_PageBuilder/js/config\"], function (_html2canvas, _jquery, _translate, _confirmAlert, _templateManagerSave, _saveContentModal, _uiRegistry, _underscore, _acl, _config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Save the current stage contents as a template\r\n   *\r\n   * @param stage\r\n   */\r\n  function saveAsTemplate(stage) {\r\n    if (!(0, _acl.isAllowed)(_acl.resources.TEMPLATE_SAVE)) {\r\n      (0, _confirmAlert)({\r\n        content: (0, _translate)(\"You do not have permission to save new templates.\"),\r\n        title: (0, _translate)(\"Permission Error\")\r\n      });\r\n      return false;\r\n    }\r\n\r\n    var capture = createCapture(stage);\r\n    var prompt = (0, _templateManagerSave)({\r\n      title: (0, _translate)(\"Save Content as Template\"),\r\n      promptContentTmpl: _saveContentModal,\r\n      templateTypes: _config.getConfig(\"stage_config\").template_types,\r\n      createdForNote: (0, _translate)(\"Created For is to help with filtering templates. This does not restrict where this template can be used.\"),\r\n      typeLabel: (0, _translate)(\"Created For\"),\r\n      label: (0, _translate)(\"Template Name\"),\r\n      validation: true,\r\n      modalClass: \"template-manager-save\",\r\n      validationRules: [\"required-entry\"],\r\n      attributesForm: {\r\n        novalidate: \"novalidate\",\r\n        action: \"\"\r\n      },\r\n      attributesField: {\r\n        \"name\": \"name\",\r\n        \"data-validate\": \"{required:true}\",\r\n        \"maxlength\": \"255\"\r\n      },\r\n      actions: {\r\n        /**\r\n         * Handle confirmation of the prompt\r\n         *\r\n         * @param {String} name\r\n         * @param {String} createdFor\r\n         * @this {actions}\r\n         */\r\n        confirm: function confirm(name, createdFor) {\r\n          return new Promise(function (resolve, reject) {\r\n            // Wait for the screenshot and the rendering lock to complete before making the request\r\n            var renderingLock = stage.renderingLocks[stage.renderingLocks.length - 1];\r\n\r\n            _jquery.when(capture, renderingLock).then(function (imageSrc, content) {\r\n              _jquery.ajax({\r\n                url: _config.getConfig(\"template_save_url\"),\r\n                data: {\r\n                  name: name,\r\n                  template: content,\r\n                  previewImage: imageSrc,\r\n                  createdFor: createdFor\r\n                },\r\n                method: \"POST\",\r\n                dataType: \"json\"\r\n              }).done(function (data) {\r\n                if (data.status === \"ok\") {\r\n                  (0, _confirmAlert)({\r\n                    content: (0, _translate)(\"The current contents of Page Builder has been successfully saved as a template.\"),\r\n                    title: (0, _translate)(\"Template Saved\")\r\n                  });\r\n                  refreshGrid();\r\n                  resolve();\r\n                } else if (data.status === \"error\") {\r\n                  (0, _confirmAlert)({\r\n                    content: data.message || (0, _translate)(\"An issue occurred while attempting to save \" + \"the template, please try again.\"),\r\n                    title: (0, _translate)(\"An error occurred\")\r\n                  });\r\n                  reject();\r\n                }\r\n              }).fail(function () {\r\n                (0, _confirmAlert)({\r\n                  content: (0, _translate)(\"An issue occurred while attempting to save the template, \" + \"please try again.\"),\r\n                  title: (0, _translate)(\"Template Save Error\")\r\n                });\r\n                reject();\r\n              });\r\n            });\r\n          });\r\n        }\r\n      }\r\n    }); // Update the UI with the preview image once available\r\n\r\n    capture.then(function (imageSrc) {\r\n      // @ts-ignore\r\n      prompt.templateManagerSave(\"setPreviewImage\", imageSrc);\r\n    });\r\n  }\r\n  /**\r\n   * Refresh the grid if it exists\r\n   */\r\n\r\n\r\n  function refreshGrid() {\r\n    var templateStageGrid = _uiRegistry.get(\"pagebuilder_stage_template_grid.pagebuilder_stage_template_grid_data_source\");\r\n\r\n    if (templateStageGrid) {\r\n      templateStageGrid.storage().clearRequests();\r\n      templateStageGrid.reload();\r\n    }\r\n  }\r\n  /**\r\n   * Create a capture of the stage\r\n   *\r\n   * @param stage\r\n   */\r\n\r\n\r\n  function createCapture(stage) {\r\n    var scrollY = window.scrollY;\r\n    var stageElement = document.querySelector(\"#\" + stage.id);\r\n\r\n    var deferred = _jquery.Deferred(); // Wait for the stage to complete rendering before taking the capture\r\n\r\n\r\n    var renderingLock = stage.renderingLocks[stage.renderingLocks.length - 1];\r\n    renderingLock.then(function () {\r\n      // Resolve issues with Parallax\r\n      var parallaxRestore = disableParallax(stageElement);\r\n      stageElement.style.height = (0, _jquery)(stageElement).outerHeight(false) + \"px\";\r\n      stageElement.classList.add(\"capture\");\r\n      stageElement.classList.add(\"interacting\");\r\n\r\n      if (stage.pageBuilder.isFullScreen()) {\r\n        window.scrollTo({\r\n          top: 0\r\n        });\r\n      }\r\n\r\n      _underscore.defer(function () {\r\n        (0, _html2canvas)(document.querySelector(\"#\" + stage.id + \" .pagebuilder-canvas\"), {\r\n          scale: 1,\r\n          useCORS: true,\r\n          scrollY: window.pageYOffset * -1\r\n        }).then(function (canvas) {\r\n          var imageSrc = canvas.toDataURL(\"image/jpeg\", 0.85);\r\n          deferred.resolve(imageSrc);\r\n\r\n          if (stage.pageBuilder.isFullScreen()) {\r\n            window.scrollTo({\r\n              top: scrollY\r\n            });\r\n          }\r\n\r\n          stageElement.style.height = null;\r\n          stageElement.classList.remove(\"capture\");\r\n          stageElement.classList.remove(\"interacting\");\r\n          restoreParallax(parallaxRestore);\r\n        });\r\n      });\r\n    });\r\n    return deferred;\r\n  }\r\n  /**\r\n   * Disable the parallax elements in the stage\r\n   *\r\n   * @param {Element} stageElement\r\n   */\r\n\r\n\r\n  function disableParallax(stageElement) {\r\n    var rowsToReset = [];\r\n    var parallaxRows = stageElement.querySelectorAll(\"[data-jarallax-original-styles]\");\r\n\r\n    _underscore.each(parallaxRows, function (row) {\r\n      var originalStyles = row.getAttribute(\"data-jarallax-original-styles\");\r\n      var jarallaxStyle = row.style.cssText;\r\n      row.style.cssText = originalStyles;\r\n      var jarallaxContainer = row.querySelector('div[id*=\"jarallax-container\"]');\r\n      jarallaxContainer.style.display = \"none\";\r\n      rowsToReset.push({\r\n        element: row,\r\n        styles: jarallaxStyle,\r\n        container: jarallaxContainer\r\n      });\r\n    });\r\n\r\n    return rowsToReset;\r\n  }\r\n  /**\r\n   * Restore parallax on modified nodes\r\n   *\r\n   * @param rows\r\n   */\r\n\r\n\r\n  function restoreParallax(rows) {\r\n    _underscore.each(rows, function (_ref) {\r\n      var element = _ref.element,\r\n          styles = _ref.styles,\r\n          container = _ref.container;\r\n      element.style.cssText = styles;\r\n      container.style.display = \"\";\r\n    });\r\n  }\r\n\r\n  return {\r\n    saveAsTemplate: saveAsTemplate\r\n  };\r\n});\r\n//# sourceMappingURL=template-manager.js.map","Magento_PageBuilder/js/uploader.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/events\", \"uiLayout\", \"uiRegistry\"], function (_events, _uiLayout, _uiRegistry) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Uploader = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Config data of uploader instance\r\n     */\r\n\r\n    /**\r\n     * The supplied data store\r\n     */\r\n\r\n    /**\r\n     * @param {String} name Name to use for lookup reference in registry\r\n     * @param {Object} uploaderConfig The config used when initializing the Uploader UI component\r\n     * @param {String} contentTypeId The id of the content type this will be used in\r\n     * @param {DataStore} dataStore The datastore that the selected image should be stored in.\r\n     * @param {Object[]} initialValue The value that should be used for the initial state of the component.\r\n     * @param {Function} onChangeCallback Called when image is added or updated\r\n     * @param {Function} onDeleteCallback Called when currently set image is deleted from storage\r\n     */\r\n    function Uploader(name, uploaderConfig, contentTypeId, dataStore, initialValue, onChangeCallback, onDeleteCallback) {\r\n      if (onChangeCallback === void 0) {\r\n        onChangeCallback = null;\r\n      }\r\n\r\n      if (onDeleteCallback === void 0) {\r\n        onDeleteCallback = null;\r\n      }\r\n\r\n      var config = Object.assign({}, uploaderConfig, {\r\n        value: initialValue\r\n      });\r\n      config.id = contentTypeId;\r\n      config.name = name;\r\n      this.dataStore = dataStore;\r\n\r\n      _events.on(\"image:\" + contentTypeId + \":uploadAfter\", onChangeCallback ? onChangeCallback : this.onImageChanged.bind(this));\r\n\r\n      _events.on(\"image:\" + contentTypeId + \":deleteFileAfter\", onDeleteCallback ? onDeleteCallback : this.onImageDeleted.bind(this));\r\n\r\n      this.config = config; // Render uploader\r\n\r\n      this.render();\r\n    }\r\n    /**\r\n     * Default callback for upload event\r\n     * @param {object[]} data\r\n     */\r\n\r\n\r\n    var _proto = Uploader.prototype;\r\n\r\n    _proto.onImageChanged = function onImageChanged(data) {\r\n      this.dataStore.set(this.config.dataScope.toString(), data);\r\n    }\r\n    /**\r\n     * Default callback for image deleted event\r\n     */\r\n    ;\r\n\r\n    _proto.onImageDeleted = function onImageDeleted() {\r\n      this.dataStore.set(this.config.dataScope.toString(), \"\");\r\n    }\r\n    /**\r\n     * Get registry callback reference to uploader UI component\r\n     *\r\n     * @returns {Function}\r\n     */\r\n    ;\r\n\r\n    _proto.getUiComponent = function getUiComponent() {\r\n      return _uiRegistry.async(this.config.name);\r\n    }\r\n    /**\r\n     * Instantiate uploader through layout UI component renderer\r\n     */\r\n    ;\r\n\r\n    _proto.render = function render() {\r\n      (0, _uiLayout)([this.config]);\r\n    };\r\n\r\n    return Uploader;\r\n  }();\r\n\r\n  return Uploader;\r\n});\r\n//# sourceMappingURL=uploader.js.map","Magento_PageBuilder/js/widget-initializer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mage/apply/main',\r\n    'Magento_Ui/js/lib/view/utils/dom-observer'\r\n], function (_, $, mage, domObserver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Initializes components assigned to HTML elements.\r\n     *\r\n     *\r\n     * @param {HTMLElement} el\r\n     * @param {Array} data\r\n     * @param {Object} breakpoints\r\n     * @param {Object} currentViewport\r\n     */\r\n    function initializeWidget(el, data, breakpoints, currentViewport) {\r\n        _.each(data, function (config, component) {\r\n            config = config || {};\r\n            config.breakpoints = breakpoints;\r\n            config.currentViewport = currentViewport;\r\n            mage.applyFor(el, config, component);\r\n        });\r\n    }\r\n\r\n    return function (data, contextElement) {\r\n        _.each(data.config, function (componentConfiguration, elementPath) {\r\n            domObserver.get(\r\n                elementPath,\r\n                function (element) {\r\n                    var $element = $(element);\r\n\r\n                    if (contextElement) {\r\n                        $element = $(contextElement).find(element);\r\n                    }\r\n\r\n                    if ($element.length) {\r\n                        initializeWidget($element, componentConfiguration, data.breakpoints, data.currentViewport);\r\n                    }\r\n                }\r\n            );\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/binding/draggable.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"knockout\"], function (_jquery, _knockout) {\r\n  \"use strict\";\r\n\r\n  _jquery = _interopRequireDefault(_jquery);\r\n  _knockout = _interopRequireDefault(_knockout);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  // Create a new sortable Knockout binding\r\n  _knockout.default.bindingHandlers.draggable = {\r\n    init: function init(element, valueAccessor) {\r\n      (0, _jquery.default)(element).draggable(valueAccessor());\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=draggable.js.map","Magento_PageBuilder/js/binding/focus.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\"], function (_knockout) {\r\n  \"use strict\";\r\n\r\n  _knockout = _interopRequireDefault(_knockout);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  _knockout.default.bindingHandlers.hasFocusNoScroll = {\r\n    init: _knockout.default.bindingHandlers.hasFocus.init,\r\n    update: function update(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n      var value = !!_knockout.default.utils.unwrapObservable(valueAccessor());\r\n      value ? element.focus({\r\n        preventScroll: true\r\n      }) : element.blur();\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=focus.js.map","Magento_PageBuilder/js/binding/live-edit.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"knockout\", \"Magento_Ui/js/lib/key-codes\", \"underscore\"], function (_jquery, _knockout, _keyCodes, _underscore) {\r\n  \"use strict\";\r\n\r\n  _jquery = _interopRequireDefault(_jquery);\r\n  _knockout = _interopRequireDefault(_knockout);\r\n  _keyCodes = _interopRequireDefault(_keyCodes);\r\n  _underscore = _interopRequireDefault(_underscore);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n\r\n  /**\r\n   * Strip HTML and return text\r\n   *\r\n   * @param {string} html\r\n   * @returns {string}\r\n   */\r\n  function stripHtml(html) {\r\n    if (html) {\r\n      var htmlDocument = new DOMParser().parseFromString(html, \"text/html\");\r\n      return htmlDocument.body ? htmlDocument.body.textContent : \"\";\r\n    }\r\n\r\n    return html;\r\n  }\r\n  /**\r\n   * Add or remove the placeholder-text class from the element based on its content\r\n   *\r\n   * @param {Element} element\r\n   */\r\n\r\n\r\n  function handlePlaceholderClass(element) {\r\n    if (stripHtml(element.innerHTML).length === 0) {\r\n      element.innerHTML = \"\";\r\n      element.classList.add(\"placeholder-text\");\r\n    } else {\r\n      element.classList.remove(\"placeholder-text\");\r\n    }\r\n  } // Custom Knockout binding for live editing text inputs\r\n\r\n\r\n  _knockout.default.bindingHandlers.liveEdit = {\r\n    /**\r\n     * Init the live edit binding on an element\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @param {() => any} valueAccessor\r\n     * @param {KnockoutAllBindingsAccessor} allBindings\r\n     * @param {any} viewModel\r\n     * @param {KnockoutBindingContext} bindingContext\r\n     */\r\n    init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n      var _valueAccessor = valueAccessor(),\r\n          field = _valueAccessor.field,\r\n          placeholder = _valueAccessor.placeholder,\r\n          _valueAccessor$select = _valueAccessor.selectAll,\r\n          selectAll = _valueAccessor$select === void 0 ? false : _valueAccessor$select;\r\n\r\n      var focusedValue = element.innerHTML;\r\n      var previouslyFocused = false;\r\n      var blurTimeout;\r\n      var lastUpdateValue;\r\n      /**\r\n       * Record the value on focus, only conduct an update when data changes\r\n       */\r\n\r\n      var onFocus = function onFocus() {\r\n        clearTimeout(blurTimeout);\r\n        focusedValue = stripHtml(element.innerHTML);\r\n        lastUpdateValue = focusedValue;\r\n\r\n        if (selectAll && element.innerHTML !== \"\" && !previouslyFocused) {\r\n          _underscore.default.defer(function () {\r\n            var selection = window.getSelection();\r\n            var range = document.createRange();\r\n            range.selectNodeContents(element);\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n            previouslyFocused = true;\r\n          });\r\n        }\r\n      };\r\n      /**\r\n       * On blur change our timeout for previously focused. We require a flag to track whether the input has been\r\n       * focused and selected previously due to a bug in Firefox which doesn't handle focus events correctly when\r\n       * contenteditable is placed within an anchor.\r\n       */\r\n\r\n\r\n      var onBlur = function onBlur() {\r\n        blurTimeout = setTimeout(function () {\r\n          previouslyFocused = false;\r\n        }, 100);\r\n      };\r\n      /**\r\n       * Mousedown event on element\r\n       *\r\n       * @param {Event} event\r\n       */\r\n\r\n\r\n      var onMouseDown = function onMouseDown(event) {\r\n        event.stopPropagation();\r\n      };\r\n      /**\r\n       * Key down event on element\r\n       *\r\n       * Prevent styling such as bold, italic, and underline using keyboard commands, and prevent multi-line entries\r\n       *\r\n       * @param {JQueryEventObject} event\r\n       */\r\n\r\n\r\n      var onKeyDown = function onKeyDown(event) {\r\n        var key = _keyCodes.default[event.keyCode]; // command or control\r\n\r\n        if (event.metaKey || event.ctrlKey) {\r\n          if (key === \"bKey\" || key === \"iKey\" || key === \"uKey\") {\r\n            event.preventDefault();\r\n          }\r\n        }\r\n\r\n        if (key === \"enterKey\") {\r\n          event.preventDefault();\r\n        } // prevent slides from sliding\r\n\r\n\r\n        if (key === \"pageLeftKey\" || key === \"pageRightKey\") {\r\n          event.stopPropagation();\r\n        }\r\n      };\r\n      /**\r\n       * On key up update the view model to ensure all changes are saved\r\n       */\r\n\r\n\r\n      var onKeyUp = function onKeyUp() {\r\n        var strippedValue = stripHtml(element.innerHTML);\r\n\r\n        if (focusedValue !== strippedValue) {\r\n          lastUpdateValue = strippedValue;\r\n          viewModel.updateData(field, strippedValue);\r\n        }\r\n      };\r\n      /**\r\n       * Prevent content from being dropped inside of inline edit area\r\n       *\r\n       * @param {DragEvent} event\r\n       */\r\n\r\n\r\n      var onDrop = function onDrop(event) {\r\n        event.preventDefault();\r\n      };\r\n      /**\r\n       * Prevent content from being dragged\r\n       *\r\n       * @param {DragEvent} event\r\n       */\r\n\r\n\r\n      var onDragStart = function onDragStart(event) {\r\n        event.preventDefault();\r\n      };\r\n      /**\r\n       * Input event on element\r\n       */\r\n\r\n\r\n      var onInput = function onInput() {\r\n        handlePlaceholderClass(element);\r\n      };\r\n      /**\r\n       * On paste strip any HTML\r\n       */\r\n\r\n\r\n      var onPaste = function onPaste() {\r\n        // Record the original caret position so we can ensure we restore it at the correct position\r\n        var selection = window.getSelection();\r\n        var originalPositionStart = selection.getRangeAt(0).cloneRange().startOffset;\r\n        var originalPositionEnd = selection.getRangeAt(0).cloneRange().endOffset;\r\n        var originalContentLength = stripHtml(element.innerHTML).length; // Allow the paste action to update the content\r\n\r\n        _underscore.default.defer(function () {\r\n          var strippedValue = stripHtml(element.innerHTML);\r\n          lastUpdateValue = strippedValue;\r\n          element.textContent = strippedValue;\r\n          /**\r\n           * Calculate the position the caret should end up at, the difference in string length + the original\r\n           * end offset position\r\n           */\r\n\r\n          var restoredPosition = Math.abs(strippedValue.length - originalContentLength) + originalPositionStart; // If part of the text was selected adjust the position for the removed text\r\n\r\n          if (originalPositionStart !== originalPositionEnd) {\r\n            restoredPosition += Math.abs(originalPositionEnd - originalPositionStart);\r\n          }\r\n\r\n          var range = document.createRange();\r\n          range.setStart(element.childNodes[0], restoredPosition);\r\n          range.setEnd(element.childNodes[0], restoredPosition);\r\n          selection.removeAllRanges();\r\n          selection.addRange(range);\r\n        });\r\n      };\r\n\r\n      element.setAttribute(\"data-placeholder\", placeholder);\r\n      element.textContent = viewModel.contentType.dataStore.get(field);\r\n      element.contentEditable = \"true\";\r\n      element.addEventListener(\"focus\", onFocus);\r\n      element.addEventListener(\"blur\", onBlur);\r\n      element.addEventListener(\"mousedown\", onMouseDown);\r\n      element.addEventListener(\"keydown\", onKeyDown);\r\n      element.addEventListener(\"keyup\", onKeyUp);\r\n      element.addEventListener(\"input\", onInput);\r\n      element.addEventListener(\"drop\", onDrop);\r\n      element.addEventListener(\"paste\", onPaste);\r\n      element.addEventListener(\"dragstart\", onDragStart);\r\n      (0, _jquery.default)(element).parent().css(\"cursor\", \"text\");\r\n      handlePlaceholderClass(element); // Create a subscription onto the original data to update the internal value\r\n\r\n      viewModel.contentType.dataStore.subscribe(function (data) {\r\n        // Only update the value if it differs from the last value added within live edit\r\n        if (lastUpdateValue !== data[field]) {\r\n          lastUpdateValue = data[field];\r\n          element.textContent = data[field];\r\n          handlePlaceholderClass(element);\r\n        }\r\n      }, field); // Resolve issues of content editable being within an anchor\r\n\r\n      if ((0, _jquery.default)(element).parent().is(\"a\")) {\r\n        (0, _jquery.default)(element).parent().attr(\"draggable\", \"false\");\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Update live edit binding on an element\r\n     *\r\n     * @param {any} element\r\n     * @param {() => any} valueAccessor\r\n     * @param {KnockoutAllBindingsAccessor} allBindings\r\n     * @param {any} viewModel\r\n     * @param {KnockoutBindingContext} bindingContext\r\n     */\r\n    update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n      var _valueAccessor2 = valueAccessor(),\r\n          field = _valueAccessor2.field;\r\n\r\n      element.textContent = viewModel.contentType.dataStore.get(field);\r\n      handlePlaceholderClass(element);\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=live-edit.js.map","Magento_PageBuilder/js/binding/master-style.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/style-registry\"], function (_knockout, _mageUtils, _underscore, _config, _styleRegistry) {\r\n  \"use strict\";\r\n\r\n  _knockout = _interopRequireDefault(_knockout);\r\n  _mageUtils = _interopRequireDefault(_mageUtils);\r\n  _underscore = _interopRequireDefault(_underscore);\r\n  _config = _interopRequireDefault(_config);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var bodyId = _config.default.getConfig(\"bodyId\");\r\n\r\n  var getStyles = function getStyles(styleObject) {\r\n    var styles = {};\r\n\r\n    _knockout.default.utils.objectForEach(styleObject, function (styleName, styleValue) {\r\n      styleValue = _knockout.default.utils.unwrapObservable(styleValue);\r\n\r\n      if (styleValue === null || styleValue === undefined || styleValue === false) {\r\n        // Empty string removes the value, whereas null/undefined have no effect\r\n        styleValue = \"\";\r\n      }\r\n\r\n      if (styleValue) {\r\n        styles[styleName] = styleValue;\r\n      }\r\n    });\r\n\r\n    return styles;\r\n  };\r\n\r\n  _knockout.default.bindingHandlers.style = {\r\n    update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n      var value = _knockout.default.utils.unwrapObservable(valueAccessor() || {});\r\n\r\n      var viewportKeys = _underscore.default.keys(_config.default.getConfig(\"viewports\"));\r\n\r\n      var commonStyles = getStyles(_underscore.default.omit(value, viewportKeys));\r\n      var viewportStyles = {};\r\n\r\n      _underscore.default.each(viewportKeys, function (name) {\r\n        viewportStyles[name] = _underscore.default.extend(getStyles(value[name]), commonStyles);\r\n      });\r\n\r\n      if (_underscore.default.findKey(viewportStyles, function (styles) {\r\n        return !_underscore.default.isEmpty(styles);\r\n      })) {\r\n        var id = _mageUtils.default.uniqueid();\r\n\r\n        var selector = \"#\" + bodyId + \" [\" + _styleRegistry.pbStyleAttribute + \"=\\\"\" + id + \"\\\"]\";\r\n\r\n        _underscore.default.each(viewportKeys, function (name) {\r\n          var registry = (0, _styleRegistry.getStyleRegistry)(name + bindingContext.$root.id);\r\n          registry.setStyles(selector, viewportStyles[name]);\r\n        });\r\n\r\n        element.setAttribute(_styleRegistry.pbStyleAttribute, id);\r\n      }\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=master-style.js.map","Magento_PageBuilder/js/binding/sortable-children.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/drag-drop/move-content-type\", \"Magento_PageBuilder/js/utils/array\"], function (_jquery, _knockout, _events, _moveContentType, _array) {\r\n  \"use strict\";\r\n\r\n  _jquery = _interopRequireDefault(_jquery);\r\n  _knockout = _interopRequireDefault(_knockout);\r\n  _events = _interopRequireDefault(_events);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var draggedContentType; // Create a new sortable Knockout binding\r\n\r\n  _knockout.default.bindingHandlers.sortableChildren = {\r\n    /**\r\n     * Init the draggable binding on an element\r\n     *\r\n     * @param element\r\n     * @param valueAccessor\r\n     * @param allBindingsAccessor\r\n     * @param data\r\n     * @param context\r\n     */\r\n    init: function init(element, valueAccessor, allBindingsAccessor, data, context) {\r\n      var instance = context.$data.contentType;\r\n\r\n      var options = _knockout.default.unwrap(valueAccessor());\r\n\r\n      var originalPosition;\r\n      (0, _jquery.default)(element).sortable(options).on(\"sortstart\", function (event, ui) {\r\n        originalPosition = ui.item.index();\r\n        draggedContentType = instance.children()[originalPosition];\r\n\r\n        _events.default.trigger(\"childContentType:sortStart\", {\r\n          instance: instance,\r\n          originalPosition: originalPosition,\r\n          ui: ui\r\n        });\r\n      }).on(\"sortstop\", function (event, ui) {\r\n        _events.default.trigger(\"childContentType:sortStop\", {\r\n          instance: instance,\r\n          ui: ui,\r\n          originalPosition: originalPosition\r\n        });\r\n      }).on(\"sortupdate\", function (event, ui) {\r\n        if (this === ui.item.parent()[0]) {\r\n          var index = ui.item.index();\r\n\r\n          var targetParent = _knockout.default.dataFor(ui.item.parent()[0]).contentType;\r\n\r\n          if (targetParent && (originalPosition !== index || draggedContentType.parentContentType !== targetParent)) {\r\n            ui.item.remove();\r\n\r\n            if (draggedContentType.parentContentType === targetParent) {\r\n              (0, _array.moveArrayItem)(instance.children, originalPosition, index);\r\n            } else {\r\n              (0, _moveContentType.moveContentType)(draggedContentType, index, targetParent);\r\n            }\r\n\r\n            _events.default.trigger(\"childContentType:sortUpdate\", {\r\n              instance: instance,\r\n              newPosition: index,\r\n              originalPosition: originalPosition,\r\n              ui: ui,\r\n              event: event\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=sortable-children.js.map","Magento_PageBuilder/js/binding/sortable.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"knockout\", \"underscore\"], function (_jquery, _knockout, _underscore) {\r\n  \"use strict\";\r\n\r\n  _jquery = _interopRequireDefault(_jquery);\r\n  _knockout = _interopRequireDefault(_knockout);\r\n  _underscore = _interopRequireDefault(_underscore);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  // Create a new sortable Knockout binding\r\n  _knockout.default.bindingHandlers.sortable = {\r\n    init: function init(element, valueAccessor) {\r\n      // As we can't conditionally apply bindings we block this operation when options are null\r\n      if (valueAccessor() === null) {\r\n        return;\r\n      }\r\n\r\n      _underscore.default.defer(function () {\r\n        (0, _jquery.default)(element).sortable(valueAccessor());\r\n      });\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=sortable.js.map","Magento_PageBuilder/js/binding/style.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/style-registry\"], function (_knockout, _mageUtils, _underscore, _config, _styleRegistry) {\r\n  \"use strict\";\r\n\r\n  _knockout = _interopRequireDefault(_knockout);\r\n  _mageUtils = _interopRequireDefault(_mageUtils);\r\n  _underscore = _interopRequireDefault(_underscore);\r\n  _config = _interopRequireDefault(_config);\r\n\r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var originalStyle = _knockout.default.bindingHandlers.style;\r\n\r\n  var bodyId = _config.default.getConfig(\"bodyId\");\r\n\r\n  function isPageBuilderContext(context) {\r\n    return !!(context.stage && context.stage.pageBuilder);\r\n  }\r\n\r\n  _knockout.default.bindingHandlers.style = {\r\n    init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n      if (isPageBuilderContext(bindingContext)) {\r\n        element.setAttribute(_styleRegistry.pbStyleAttribute, _mageUtils.default.uniqueid());\r\n      }\r\n    },\r\n    update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n      if (isPageBuilderContext(bindingContext)) {\r\n        var value = _knockout.default.utils.unwrapObservable(valueAccessor() || {});\r\n\r\n        var styles = {};\r\n        var styleId = element.getAttribute(_styleRegistry.pbStyleAttribute);\r\n        var existedStyleBlock = document.querySelector(\"style[\" + _styleRegistry.styleDataAttribute + \"=\\\"\" + styleId + \"\\\"]\");\r\n\r\n        _knockout.default.utils.objectForEach(value, function (styleName, styleValue) {\r\n          styleValue = _knockout.default.utils.unwrapObservable(styleValue);\r\n\r\n          if (styleValue === null || styleValue === undefined || styleValue === false) {\r\n            styleValue = \"\";\r\n          }\r\n\r\n          if (styleValue) {\r\n            styles[styleName] = styleValue;\r\n          }\r\n        });\r\n\r\n        if (existedStyleBlock) {\r\n          existedStyleBlock.remove();\r\n        }\r\n\r\n        if (!_underscore.default.isEmpty(styles)) {\r\n          var styleElement = document.createElement(\"style\");\r\n          styleElement.setAttribute(_styleRegistry.styleDataAttribute, styleId);\r\n          styleElement.innerHTML = (0, _styleRegistry.generateCssBlock)(\"#\" + bodyId + \" [\" + _styleRegistry.pbStyleAttribute + \"=\\\"\" + styleId + \"\\\"]\", styles);\r\n          element.parentElement.append(styleElement);\r\n        }\r\n      } else {\r\n        originalStyle.update(element, valueAccessor, allBindings, viewModel, bindingContext);\r\n      }\r\n    }\r\n  };\r\n});\r\n//# sourceMappingURL=style.js.map","Magento_PageBuilder/js/content-type/appearance-config.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\"], function (_config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Get config for appearance\r\n   *\r\n   * @param {string} contentType\r\n   * @param {string} appearance\r\n   * @returns {ContentTypeConfigAppearanceInterface}\r\n   * @api\r\n   */\r\n  function getAppearanceConfig(contentType, appearance) {\r\n    var contentTypeConfig = _config.getContentTypeConfig(contentType);\r\n\r\n    var config;\r\n\r\n    if (contentTypeConfig.appearances !== undefined) {\r\n      if (!appearance) {\r\n        for (var key in contentTypeConfig.appearances) {\r\n          if (!!contentTypeConfig.appearances[key].default) {\r\n            appearance = key;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (appearance) {\r\n        config = contentTypeConfig.appearances[appearance];\r\n      }\r\n    }\r\n\r\n    return config;\r\n  }\r\n\r\n  return getAppearanceConfig;\r\n});\r\n//# sourceMappingURL=appearance-config.js.map","Magento_PageBuilder/js/content-type/converter-resolver.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Resolve converter\r\n   *\r\n   * @param {DataMappingInterface} config\r\n   * @return string\r\n   */\r\n  function resolve(config) {\r\n    return config.converter;\r\n  }\r\n\r\n  return resolve;\r\n});\r\n//# sourceMappingURL=converter-resolver.js.map","Magento_PageBuilder/js/content-type/master-collection.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type/master\"], function (_master) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var MasterCollection = /*#__PURE__*/function (_master2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(MasterCollection, _master2);\r\n\r\n    function MasterCollection() {\r\n      return _master2.apply(this, arguments) || this;\r\n    }\r\n\r\n    _createClass(MasterCollection, [{\r\n      key: \"masterTemplate\",\r\n      get:\r\n      /**\r\n       * Retrieve the child template\r\n       *\r\n       * @returns {string}\r\n       */\r\n      function get() {\r\n        return \"Magento_PageBuilder/content-type/master-collection\";\r\n      }\r\n    }]);\r\n\r\n    return MasterCollection;\r\n  }(_master);\r\n\r\n  return MasterCollection;\r\n});\r\n//# sourceMappingURL=master-collection.js.map","Magento_PageBuilder/js/content-type/master-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/content-type/converter-resolver\", \"Magento_PageBuilder/js/content-type/observable-updater-factory\"], function (_loader, _converterResolver, _observableUpdaterFactory) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create new content instance\r\n   *\r\n   * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n   * @param {ContentTypeConfigInterface} config\r\n   * @returns {Promise<ContentTypeInterface>}\r\n   */\r\n  function create(contentType, config) {\r\n    return new Promise(function (resolve, reject) {\r\n      (0, _observableUpdaterFactory)(config, _converterResolver).then(function (observableUpdater) {\r\n        (0, _loader)([config.master_component], function (masterComponent) {\r\n          try {\r\n            var master = new masterComponent(contentType, observableUpdater);\r\n            resolve(master);\r\n          } catch (error) {\r\n            reject(\"Error within master component (\" + config.master_component + \") for \" + config.name + \".\");\r\n            console.error(error);\r\n          }\r\n        }, function (error) {\r\n          reject(\"Unable to load preview component (\" + config.master_component + \") for \" + config.name + \". Please \" + \"check preview component exists and content type configuration is correct.\");\r\n          console.error(error);\r\n        });\r\n      }).catch(function (error) {\r\n        console.error(error);\r\n        return null;\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=master-factory.js.map","Magento_PageBuilder/js/content-type/master.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/content-type/appearance-config\"], function (_underscore, _object, _appearanceConfig) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Master = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} contentType\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Master(contentType, observableUpdater) {\r\n      this.data = {};\r\n      this.contentType = contentType;\r\n      this.observableUpdater = observableUpdater;\r\n      this.bindEvents();\r\n    }\r\n    /**\r\n     * Retrieve the render template\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = Master.prototype;\r\n\r\n    /**\r\n     * Get content type data\r\n     *\r\n     * @param {string} element\r\n     * @returns {DataObject}\r\n     * @deprecated\r\n     */\r\n    _proto.getData = function getData(element) {\r\n      var data = _underscore.extend({}, this.contentType.dataStore.getState());\r\n\r\n      if (undefined === element) {\r\n        return data;\r\n      }\r\n\r\n      var appearanceConfiguration = (0, _appearanceConfig)(this.contentType.config.name, data.appearance);\r\n      var config = appearanceConfiguration.elements;\r\n      data = this.observableUpdater.convertData(data, appearanceConfiguration.converters);\r\n      var result = {};\r\n\r\n      if (undefined !== config[element].tag.var) {\r\n        result[config[element].tag.var] = (0, _object.get)(data, config[element].tag.var);\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Destroys current instance\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      return;\r\n    }\r\n    /**\r\n     * Attach event to updating data in data store to update observables\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this = this;\r\n\r\n      this.contentType.dataStore.subscribe(function () {\r\n        _this.updateObservables();\r\n      });\r\n    }\r\n    /**\r\n     * After observables updated, allows to modify observables\r\n     */\r\n    ;\r\n\r\n    _proto.afterObservablesUpdated = function afterObservablesUpdated() {\r\n      return;\r\n    }\r\n    /**\r\n     * Update observables\r\n     *\r\n     * @deprecated\r\n     */\r\n    ;\r\n\r\n    _proto.updateObservables = function updateObservables() {\r\n      this.observableUpdater.update(this, _underscore.extend({\r\n        name: this.contentType.config.name\r\n      }, this.contentType.dataStore.getState()), this.contentType.getDataStoresStates());\r\n      this.afterObservablesUpdated();\r\n    };\r\n\r\n    _createClass(Master, [{\r\n      key: \"template\",\r\n      get: function get() {\r\n        return (0, _appearanceConfig)(this.contentType.config.name, this.getData().appearance).master_template;\r\n      }\r\n    }]);\r\n\r\n    return Master;\r\n  }();\r\n\r\n  return Master;\r\n});\r\n//# sourceMappingURL=master.js.map","Magento_PageBuilder/js/content-type/observable-updater-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/converter/converter-pool-factory\", \"Magento_PageBuilder/js/mass-converter/converter-pool-factory\", \"Magento_PageBuilder/js/content-type/observable-updater\"], function (_converterPoolFactory, _converterPoolFactory2, _observableUpdater) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create new observable updater instance\r\n   *\r\n   * @param {ContentTypeConfigInterface} config\r\n   * @param {Function} converterResolver\r\n   * @returns {Promise<ObservableUpdater>}\r\n   */\r\n  function create(config, converterResolver) {\r\n    var promises = [(0, _converterPoolFactory)(config.name), (0, _converterPoolFactory2)(config.name)];\r\n    return new Promise(function (resolve) {\r\n      Promise.all(promises).then(function (resolvedPromises) {\r\n        var converterPool = resolvedPromises[0],\r\n            massConverterPool = resolvedPromises[1];\r\n        resolve(new _observableUpdater(converterPool, massConverterPool, converterResolver));\r\n      }).catch(function (error) {\r\n        console.error(error);\r\n        return null;\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=observable-updater-factory.js.map","Magento_PageBuilder/js/content-type/observable-updater.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"consoleLogger\", \"knockout\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/appearance-config\", \"Magento_PageBuilder/js/content-type/observable-updater/attributes\", \"Magento_PageBuilder/js/content-type/observable-updater/css\", \"Magento_PageBuilder/js/content-type/observable-updater/html\", \"Magento_PageBuilder/js/content-type/observable-updater/style\"], function (_consoleLogger, _knockout, _underscore, _config, _appearanceConfig, _attributes, _css, _html, _style) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ObservableUpdater = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {typeof ConverterPool} converterPool\r\n     * @param {typeof MassConverterPool} massConverterPool\r\n     * @param {(config: object) => string} converterResolver\r\n     */\r\n    function ObservableUpdater(converterPool, massConverterPool, converterResolver) {\r\n      this.previousData = {};\r\n      this.bindingGenerators = {\r\n        attributes: _attributes,\r\n        css: _css,\r\n        html: _html,\r\n        style: _style\r\n      };\r\n      this.converterPool = converterPool;\r\n      this.massConverterPool = massConverterPool;\r\n      this.converterResolver = converterResolver;\r\n    }\r\n    /**\r\n     * Update the associated viewModel with the generated data\r\n     *\r\n     * We create an API for each potential binding and make it available in the master and preview templates through\r\n     * the data variable. Each data variable will have associated observables that are updated on a data change.\r\n     *\r\n     * @param {Preview} viewModel\r\n     * @param {DataObject} data\r\n     * @param {DataObject} dataStores\r\n     */\r\n\r\n\r\n    var _proto = ObservableUpdater.prototype;\r\n\r\n    _proto.update = function update(viewModel, data, dataStores) {\r\n      var appearance = data && data.appearance !== undefined ? data.appearance : undefined;\r\n      var appearanceConfiguration = (0, _appearanceConfig)(viewModel.contentType.config.name, appearance);\r\n\r\n      if (undefined === appearanceConfiguration || undefined === appearanceConfiguration.elements) {\r\n        return;\r\n      } // Generate Knockout bindings in objects for usage in preview and master templates\r\n\r\n\r\n      var generatedBindings = this.generateKnockoutBindings(appearanceConfiguration.elements, appearanceConfiguration.converters, data, dataStores);\r\n\r\n      var _loop = function _loop(element) {\r\n        if (generatedBindings.hasOwnProperty(element)) {\r\n          // Ensure every element is represented by an object\r\n          if (viewModel.data[element] === undefined) {\r\n            viewModel.data[element] = {};\r\n          }\r\n          /**\r\n           * Iterate through each elements data (css, style, attributes) and apply data updates within the\r\n           * observable. If no observable already exists create a new one.\r\n           */\r\n\r\n\r\n          Object.keys(generatedBindings[element]).forEach(function (key) {\r\n            var elementBindings = viewModel.data[element][key];\r\n\r\n            if (elementBindings !== undefined && _knockout.isObservable(elementBindings)) {\r\n              elementBindings(generatedBindings[element][key]);\r\n            } else {\r\n              viewModel.data[element][key] = _knockout.observable(generatedBindings[element][key]);\r\n            }\r\n          });\r\n        }\r\n      };\r\n\r\n      for (var element in generatedBindings) {\r\n        _loop(element);\r\n      }\r\n    }\r\n    /**\r\n     * Generate binding object to be applied to master format\r\n     *\r\n     * This function iterates through each element defined in the content types XML and generates a nested object of\r\n     * the associated Knockout binding data. We support 5 bindings attributes, style, css, html & tag.\r\n     *\r\n     * @param elements\r\n     * @param converters\r\n     * @param data\r\n     * @param dataStoreStates\r\n     */\r\n    ;\r\n\r\n    _proto.generateKnockoutBindings = function generateKnockoutBindings(elements, converters, data, dataStoreStates) {\r\n      var convertedData = this.convertData(data, converters);\r\n      var generatedData = {};\r\n\r\n      for (var _i = 0, _Object$keys = Object.keys(elements); _i < _Object$keys.length; _i++) {\r\n        var elementName = _Object$keys[_i];\r\n        var elementConfig = elements[elementName];\r\n\r\n        if (this.previousData[elementName] === undefined) {\r\n          this.previousData[elementName] = {};\r\n        }\r\n\r\n        generatedData[elementName] = {\r\n          attributes: this.generateKnockoutBinding(\"attributes\", elementName, elementConfig, data),\r\n          style: _config.getMode() === \"Preview\" ? this.generateKnockoutBinding(\"style\", elementName, elementConfig, data) : this.generateKnockoutBindingForBreakpoints(\"style\", elementName, elementConfig, data, dataStoreStates),\r\n          css: elementConfig.css.var in convertedData ? this.generateKnockoutBinding(\"css\", elementName, elementConfig, data) : {},\r\n          html: this.generateKnockoutBinding(\"html\", elementName, elementConfig, data)\r\n        };\r\n\r\n        if (elementConfig.tag !== undefined && elementConfig.tag.var !== undefined) {\r\n          if (generatedData[elementName][elementConfig.tag.var] === undefined) {\r\n            generatedData[elementName][elementConfig.tag.var] = \"\";\r\n          }\r\n\r\n          generatedData[elementName][elementConfig.tag.var] = convertedData[elementConfig.tag.var];\r\n        }\r\n      }\r\n\r\n      return generatedData;\r\n    }\r\n    /**\r\n     * Process data for elements before its converted to knockout format\r\n     *\r\n     * @param {object} data\r\n     * @param {ConverterInterface[]} convertersConfig\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.convertData = function convertData(data, convertersConfig) {\r\n      for (var _iterator = _createForOfIteratorHelperLoose(convertersConfig), _step; !(_step = _iterator()).done;) {\r\n        var converterConfig = _step.value;\r\n        this.massConverterPool.get(converterConfig.component).toDom(data, converterConfig.config);\r\n      }\r\n\r\n      return data;\r\n    }\r\n    /**\r\n     * Generate an individual knockout binding\r\n     *\r\n     * @param binding\r\n     * @param elementName\r\n     * @param config\r\n     * @param data\r\n     */\r\n    ;\r\n\r\n    _proto.generateKnockoutBinding = function generateKnockoutBinding(binding, elementName, config, data) {\r\n      if (config[binding] === undefined) {\r\n        return {};\r\n      }\r\n\r\n      var previousData = {};\r\n\r\n      if (this.previousData[elementName][binding] !== undefined) {\r\n        previousData = this.previousData[elementName][binding];\r\n      }\r\n\r\n      if (this.bindingGenerators[binding] === undefined) {\r\n        _consoleLogger.error(\"Unable to find Knockout binding generator for \" + binding);\r\n\r\n        return {};\r\n      } // Generate the associated binding using our dedicated generators\r\n\r\n\r\n      var generatedBindingData = this.bindingGenerators[binding](elementName, config, data, this.converterResolver, this.converterPool, previousData);\r\n      this.previousData[elementName][binding] = generatedBindingData;\r\n      return generatedBindingData;\r\n    }\r\n    /**\r\n     * Generate an individual knockout binding for breakpoints\r\n     *\r\n     * @param binding\r\n     * @param elementName\r\n     * @param config\r\n     * @param data\r\n     * @param dataStoreStates\r\n     */\r\n    ;\r\n\r\n    _proto.generateKnockoutBindingForBreakpoints = function generateKnockoutBindingForBreakpoints(binding, elementName, config, data, dataStoreStates) {\r\n      var _this = this;\r\n\r\n      var result = {};\r\n      Object.keys(dataStoreStates).forEach(function (name) {\r\n        result[name] = _underscore.isEmpty(dataStoreStates[name]) ? {} : _this.generateKnockoutBinding(binding, elementName, config, dataStoreStates[name]);\r\n      });\r\n      return result;\r\n    };\r\n\r\n    return ObservableUpdater;\r\n  }();\r\n\r\n  return ObservableUpdater;\r\n});\r\n//# sourceMappingURL=observable-updater.js.map","Magento_PageBuilder/js/content-type/preview-collection.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type/preview\"], function (_config, _contentTypeFactory, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var PreviewCollection = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(PreviewCollection, _preview2);\r\n\r\n    function PreviewCollection() {\r\n      return _preview2.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = PreviewCollection.prototype;\r\n\r\n    /**\r\n     * Duplicate a collection content type\r\n     *\r\n     * @param {ContentTypeCollectionInterface} contentType\r\n     * @param {boolean} autoAppend\r\n     * @param {boolean} direct\r\n     * @returns {Promise<ContentTypeCollectionInterface> | void}\r\n     */\r\n    _proto.clone = function clone(contentType, autoAppend, direct) {\r\n      var _this = this;\r\n\r\n      if (autoAppend === void 0) {\r\n        autoAppend = true;\r\n      }\r\n\r\n      if (direct === void 0) {\r\n        direct = false;\r\n      }\r\n\r\n      var defaultViewport = _config.getConfig(\"defaultViewport\");\r\n\r\n      var index = contentType.parentContentType.getChildren().indexOf(contentType) + 1 || null;\r\n      var childrenLength = contentType.children ? contentType.children().length : 0;\r\n      return new Promise(function (resolve, reject) {\r\n        (0, _contentTypeFactory)(contentType.config, contentType.parentContentType, contentType.stageId, contentType.dataStores[defaultViewport].getState(), childrenLength, contentType.getDataStoresStates()).then(function (duplicate) {\r\n          if (contentType.children && contentType.children().length > 0) {\r\n            // Duplicate the instances children into the new duplicate\r\n            contentType.children().forEach(function (subChild) {\r\n              var subChildClone = duplicate.preview.clone(subChild, false);\r\n\r\n              if (subChildClone) {\r\n                subChildClone.then(function (duplicateSubChild) {\r\n                  duplicateSubChild.parentContentType = duplicate;\r\n                  duplicate.addChild(duplicateSubChild);\r\n                });\r\n              } else {\r\n                reject(\"Unable to duplicate sub child.\");\r\n              }\r\n            });\r\n          }\r\n\r\n          if (autoAppend) {\r\n            contentType.parentContentType.addChild(duplicate, index);\r\n          }\r\n\r\n          _this.dispatchContentTypeCloneEvents(contentType, duplicate, index, direct);\r\n\r\n          resolve(duplicate);\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Tries to call specified method of a current content type,\r\n     * and delegates attempt to its' children.\r\n     * @param args\r\n     */\r\n    ;\r\n\r\n    _proto.delegate = function delegate() {\r\n      var _preview2$prototype$d;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      (_preview2$prototype$d = _preview2.prototype.delegate).call.apply(_preview2$prototype$d, [this].concat(args));\r\n\r\n      this.contentType.getChildren()().forEach(function (elem) {\r\n        elem.preview.delegate.apply(elem.preview, args);\r\n      });\r\n    }\r\n    /**\r\n     * Does the current instance have any children or values different from the default for it's type?\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.isConfigured = function isConfigured() {\r\n      if (this.contentType.children().length > 0) {\r\n        return true;\r\n      }\r\n\r\n      return _preview2.prototype.isConfigured.call(this);\r\n    };\r\n\r\n    _createClass(PreviewCollection, [{\r\n      key: \"childTemplate\",\r\n      get:\r\n      /**\r\n       * Retrieve the preview child template\r\n       *\r\n       * @returns {string}\r\n       */\r\n      function get() {\r\n        return \"Magento_PageBuilder/content-type/preview-collection\";\r\n      }\r\n    }]);\r\n\r\n    return PreviewCollection;\r\n  }(_preview);\r\n\r\n  return PreviewCollection;\r\n});\r\n//# sourceMappingURL=preview-collection.js.map","Magento_PageBuilder/js/content-type/preview-converter-resolver.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Resolve converter\r\n   *\r\n   * @param {DataMappingStyleInterface} config\r\n   * @return string\r\n   */\r\n  function resolve(config) {\r\n    return config.preview_converter ? config.preview_converter : config.converter;\r\n  }\r\n\r\n  return resolve;\r\n});\r\n//# sourceMappingURL=preview-converter-resolver.js.map","Magento_PageBuilder/js/content-type/preview-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/content-type/observable-updater-factory\", \"Magento_PageBuilder/js/content-type/preview-converter-resolver\"], function (_loader, _observableUpdaterFactory, _previewConverterResolver) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create new preview instance\r\n   *\r\n   * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n   * @param {ContentTypeConfigInterface} config\r\n   * @returns {Promise<Preview | PreviewCollection>}\r\n   */\r\n  function create(contentType, config) {\r\n    return new Promise(function (resolve, reject) {\r\n      (0, _observableUpdaterFactory)(config, _previewConverterResolver).then(function (observableUpdater) {\r\n        (0, _loader)([config.preview_component], function (previewComponent) {\r\n          try {\r\n            var preview = new previewComponent(contentType, config, observableUpdater);\r\n            resolve(preview);\r\n          } catch (error) {\r\n            reject(\"Error within preview component (\" + config.preview_component + \") for \" + config.name + \".\");\r\n            console.error(error);\r\n          }\r\n        }, function (error) {\r\n          reject(\"Unable to load preview component (\" + config.preview_component + \") for \" + config.name + \". Please \" + \"check preview component exists and content type configuration is correct.\");\r\n          console.error(error);\r\n        });\r\n      }).catch(function (error) {\r\n        console.error(error);\r\n        return null;\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=preview-factory.js.map","Magento_PageBuilder/js/content-type/preview-styles.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/content-type/style-registry\"], function (_knockout, _events, _styleRegistry) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var PreviewStyles =\r\n  /*#__PURE__*/\r\n  function () {\r\n    \"use strict\";\r\n\r\n    function PreviewStyles(stageId) {\r\n      var _this = this;\r\n\r\n      this.styleBlocks = _knockout.observableArray([]);\r\n      this.template = \"Magento_PageBuilder/content-type/preview-styles\";\r\n      this.stageId = stageId;\r\n\r\n      _events.on(\"styles:update\", function (args) {\r\n        if (args.stageId === _this.stageId) {\r\n          var css = (0, _styleRegistry.generateCssBlock)(args.className, args.styles); // Remove any existing style blocks for the current class name\r\n\r\n          var existingBlock = _this.styleBlocks().find(function (block) {\r\n            return block.className === args.className;\r\n          });\r\n\r\n          if (existingBlock) {\r\n            // Don't do an update if the CSS matches\r\n            if (existingBlock.css === css) {\r\n              return;\r\n            }\r\n\r\n            _this.styleBlocks.splice(_this.styleBlocks().indexOf(existingBlock), 1);\r\n          }\r\n\r\n          _this.styleBlocks.push({\r\n            className: args.className,\r\n            css: css\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Get template.\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = PreviewStyles.prototype;\r\n\r\n    _proto.getTemplate = function getTemplate() {\r\n      return this.template;\r\n    };\r\n\r\n    return PreviewStyles;\r\n  }();\r\n\r\n  return PreviewStyles;\r\n});\r\n//# sourceMappingURL=preview-styles.js.map","Magento_PageBuilder/js/content-type/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/modal/dismissible-confirm\", \"underscore\", \"Magento_PageBuilder/js/binding/live-edit\", \"Magento_PageBuilder/js/binding/sortable\", \"Magento_PageBuilder/js/binding/sortable-children\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-collection\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type-menu\", \"Magento_PageBuilder/js/content-type-menu/edit\", \"Magento_PageBuilder/js/content-type-menu/option\", \"Magento_PageBuilder/js/content-type-menu/title-option\", \"Magento_PageBuilder/js/drag-drop/registry\", \"Magento_PageBuilder/js/drag-drop/sortable\", \"Magento_PageBuilder/js/utils/check-stage-full-screen\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/content-type/appearance-config\"], function (_jquery, _knockout, _translate, _events, _dismissibleConfirm, _underscore, _liveEdit, _sortable, _sortableChildren, _config, _contentTypeCollection, _contentTypeFactory, _contentTypeMenu, _edit, _option, _titleOption, _registry, _sortable2, _checkStageFullScreen, _object, _appearanceConfig) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Provide preview data as an object which can be queried\r\n     *\r\n     * @deprecated please use getOptionValue directly\r\n     */\r\n\r\n    /**\r\n     * Fields that should not be considered when evaluating whether an object has been configured.\r\n     *\r\n     * @see {Preview.isConfigured}\r\n     * @type {[string]}\r\n     */\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      this.data = {};\r\n      this.displayLabel = _knockout.observable();\r\n      this.display = _knockout.observable(true);\r\n      this.appearance = _knockout.observable();\r\n      this.isPlaceholderVisible = _knockout.observable(true);\r\n      this.isEmpty = _knockout.observable(true);\r\n      this.viewport = _knockout.observable(\"\");\r\n      this.previewData = {};\r\n      this.fieldsToIgnoreOnRemove = [];\r\n      this.events = {};\r\n      this.isSnapshot = _knockout.observable(false);\r\n      this.mouseover = false;\r\n      this.contentType = contentType;\r\n      this.config = config;\r\n      this.edit = new _edit(this.contentType, this.contentType.dataStore);\r\n      this.optionsMenu = new _contentTypeMenu(this, this.retrieveOptions());\r\n      this.observableUpdater = observableUpdater;\r\n      this.displayLabel(this.config.label);\r\n      this.placeholderCss = _knockout.observable({\r\n        \"visible\": this.isEmpty,\r\n        \"empty-placeholder-background\": this.isPlaceholderVisible\r\n      });\r\n\r\n      if (_config.getConfig(\"pagebuilder_content_snapshot\")) {\r\n        this.isSnapshot(!(0, _checkStageFullScreen)(this.contentType.stageId));\r\n      }\r\n\r\n      this.viewport(_config.getConfig(\"viewport\"));\r\n      this.bindEvents();\r\n      this.populatePreviewData();\r\n    }\r\n    /**\r\n     * Retrieve the preview template\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Calls methods by event name.\r\n     *\r\n     * @param {string}  eventName\r\n     * @param {any} params\r\n     */\r\n    _proto.trigger = function trigger(eventName, params) {\r\n      var _this = this;\r\n\r\n      if (this.events[eventName]) {\r\n        var methods = this.events[eventName];\r\n\r\n        _underscore.each(methods.split(\" \"), function (methodName) {\r\n          var method = _this[methodName];\r\n\r\n          if (method) {\r\n            method.call(_this, params);\r\n          }\r\n        }, this);\r\n      }\r\n    }\r\n    /**\r\n     * Tries to call specified method of a current content type.\r\n     *\r\n     * @param args\r\n     */\r\n    ;\r\n\r\n    _proto.delegate = function delegate() {\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      var methodName = args.slice(0, 1)[0];\r\n      var method = this[methodName];\r\n\r\n      if (method) {\r\n        method.apply(this, args.slice(1, args.length));\r\n      }\r\n    }\r\n    /**\r\n     * Open the edit form for this content type\r\n     */\r\n    ;\r\n\r\n    _proto.openEdit = function openEdit() {\r\n      return this.edit.open();\r\n    }\r\n    /**\r\n     * Update data store\r\n     *\r\n     * @param {string} key\r\n     * @param {string} value\r\n     */\r\n    ;\r\n\r\n    _proto.updateData = function updateData(key, value) {\r\n      this.contentType.dataStore.set(key, value);\r\n    }\r\n    /**\r\n     * Retrieve the value for an option\r\n     *\r\n     * @param key\r\n     */\r\n    ;\r\n\r\n    _proto.getOptionValue = function getOptionValue(key) {\r\n      return this.contentType.dataStore.get(key);\r\n    }\r\n    /**\r\n     * Set state based on mouseover event for the preview\r\n     *\r\n     * @param {Preview} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onMouseOver = function onMouseOver(context, event) {\r\n      if (this.mouseover || (0, _registry.getDraggedContentTypeConfig)()) {\r\n        return;\r\n      } // Ensure no other options panel is displayed\r\n\r\n\r\n      (0, _jquery)(\".pagebuilder-options-visible\").removeClass(\"pagebuilder-options-visible\");\r\n      this.mouseover = true;\r\n      this.mouseoverContext = context;\r\n      var currentTarget = event.currentTarget;\r\n      var optionsMenu = (0, _jquery)(currentTarget).find(\".pagebuilder-options-wrapper\");\r\n\r\n      if (!(0, _jquery)(currentTarget).hasClass(\"type-nested\")) {\r\n        optionsMenu = optionsMenu.first();\r\n      }\r\n\r\n      var middleOfPreview = currentTarget.getBoundingClientRect().left + currentTarget.offsetWidth / 2; // Check for space for option menu\r\n\r\n      if (window.innerWidth - middleOfPreview > optionsMenu.width() / 2) {\r\n        optionsMenu.parent().addClass(\"pagebuilder-options-middle\");\r\n      } else {\r\n        optionsMenu.parent().removeClass(\"pagebuilder-options-middle\");\r\n      }\r\n\r\n      optionsMenu.parent().addClass(\"pagebuilder-options-visible\");\r\n      (0, _jquery)(currentTarget).addClass(\"pagebuilder-content-type-active\");\r\n    }\r\n    /**\r\n     * Set state based on mouseout event for the preview\r\n     *\r\n     * @param {Preview} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onMouseOut = function onMouseOut(context, event) {\r\n      var _this2 = this;\r\n\r\n      this.mouseover = false;\r\n\r\n      if ((0, _registry.getDraggedContentTypeConfig)()) {\r\n        return;\r\n      }\r\n\r\n      _underscore.delay(function () {\r\n        if (!_this2.mouseover && _this2.mouseoverContext === context) {\r\n          var currentTarget = event.currentTarget;\r\n          var optionsMenu = (0, _jquery)(currentTarget).find(\".pagebuilder-options-wrapper\");\r\n\r\n          if (!(0, _jquery)(currentTarget).hasClass(\"type-nested\")) {\r\n            optionsMenu = optionsMenu.first();\r\n          }\r\n\r\n          optionsMenu.parent().removeClass(\"pagebuilder-options-visible\");\r\n          (0, _jquery)(currentTarget).removeClass(\"pagebuilder-content-type-active\");\r\n        }\r\n      }, 100); // 100 ms delay to allow for users hovering over other elements\r\n\r\n    }\r\n    /**\r\n     * After children render fire an event\r\n     *\r\n     * @param {Element} element\r\n     * @deprecated\r\n     */\r\n    ;\r\n\r\n    _proto.afterChildrenRender = function afterChildrenRender(element) {\r\n      _events.trigger(\"contentType:childrenRenderAfter\", {\r\n        id: this.contentType.id,\r\n        contentType: this.contentType,\r\n        element: element\r\n      });\r\n\r\n      _events.trigger(this.contentType.config.name + \":childrenRenderAfter\", {\r\n        contentType: this.contentType,\r\n        element: element,\r\n        id: this.contentType.id\r\n      });\r\n    }\r\n    /**\r\n     * Dispatch an after render event for individual content types\r\n     *\r\n     * @param {Element[]} elements\r\n     */\r\n    ;\r\n\r\n    _proto.dispatchAfterRenderEvent = function dispatchAfterRenderEvent(elements) {\r\n      var elementNodes = elements.filter(function (renderedElement) {\r\n        return renderedElement.nodeType === Node.ELEMENT_NODE;\r\n      });\r\n\r\n      if (elementNodes.length > 0) {\r\n        var element = elementNodes[0];\r\n        this.wrapperElement = element;\r\n\r\n        _events.trigger(\"contentType:renderAfter\", {\r\n          id: this.contentType.id,\r\n          contentType: this.contentType,\r\n          element: element\r\n        });\r\n\r\n        _events.trigger(this.contentType.config.name + \":renderAfter\", {\r\n          contentType: this.contentType,\r\n          element: element,\r\n          id: this.contentType.id\r\n        });\r\n\r\n        this.disableImageUploadOnHide(element);\r\n      }\r\n    }\r\n    /**\r\n     * Get the options instance\r\n     *\r\n     * @returns {ContentTypeMenu}\r\n     */\r\n    ;\r\n\r\n    _proto.getOptions = function getOptions() {\r\n      return this.optionsMenu;\r\n    }\r\n    /**\r\n     * Handle user editing an instance\r\n     */\r\n    ;\r\n\r\n    _proto.onOptionEdit = function onOptionEdit() {\r\n      this.openEdit();\r\n    }\r\n    /**\r\n     * Reverse the display data currently in the data store\r\n     */\r\n    ;\r\n\r\n    _proto.onOptionVisibilityToggle = function onOptionVisibilityToggle() {\r\n      var display = this.contentType.dataStore.get(\"display\");\r\n      this.contentType.dataStore.set(\"display\", !display);\r\n      this.dispatchContentTypeVisibilityEvents(this.contentType, !display);\r\n    }\r\n    /**\r\n     * Handle duplicate of items\r\n     */\r\n    ;\r\n\r\n    _proto.onOptionDuplicate = function onOptionDuplicate() {\r\n      this.clone(this.contentType, true, true);\r\n    }\r\n    /**\r\n     * Duplicate content type\r\n     *\r\n     * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n     * @param {boolean} autoAppend\r\n     * @param {boolean} direct\r\n     * @returns {Promise<ContentTypeInterface> | void}\r\n     */\r\n    ;\r\n\r\n    _proto.clone = function clone(contentType, autoAppend, direct) {\r\n      var _this3 = this;\r\n\r\n      if (autoAppend === void 0) {\r\n        autoAppend = true;\r\n      }\r\n\r\n      if (direct === void 0) {\r\n        direct = false;\r\n      }\r\n\r\n      var defaultViewport = _config.getConfig(\"defaultViewport\");\r\n\r\n      var contentTypeData = contentType.dataStores[defaultViewport].getState();\r\n      var index = contentType.parentContentType.getChildren()().indexOf(contentType) + 1 || null;\r\n      return (0, _contentTypeFactory)(contentType.config, contentType.parentContentType, contentType.stageId, contentTypeData, 0, contentType.getDataStoresStates()).then(function (duplicateContentType) {\r\n        if (autoAppend) {\r\n          contentType.parentContentType.addChild(duplicateContentType, index);\r\n        }\r\n\r\n        _this3.dispatchContentTypeCloneEvents(contentType, duplicateContentType, index, direct);\r\n\r\n        return duplicateContentType;\r\n      });\r\n    }\r\n    /**\r\n     * Handle content type removal\r\n     */\r\n    ;\r\n\r\n    _proto.onOptionRemove = function onOptionRemove() {\r\n      var _this4 = this;\r\n\r\n      var removeContentType = function removeContentType() {\r\n        if (_this4.wrapperElement) {\r\n          // Fade out the content type\r\n          (0, _jquery)(_this4.wrapperElement).fadeOut(350 / 2, function () {\r\n            _this4.contentType.destroy();\r\n          });\r\n        } else {\r\n          _this4.contentType.destroy();\r\n        }\r\n      };\r\n\r\n      if (this.isConfigured()) {\r\n        (0, _dismissibleConfirm)({\r\n          actions: {\r\n            confirm: function confirm() {\r\n              // Call the parent to remove the child element\r\n              removeContentType();\r\n            }\r\n          },\r\n          content: (0, _translate)(\"Are you sure you want to remove this item? The data within this item is not recoverable once removed.\"),\r\n          // tslint:disable-line:max-line-length\r\n          dismissKey: \"pagebuilder_modal_dismissed\",\r\n          dismissible: true,\r\n          title: (0, _translate)(\"Confirm Item Removal\")\r\n        });\r\n      } else {\r\n        removeContentType();\r\n      }\r\n    }\r\n    /**\r\n     * Determine if the container can receive drop events? With the current matrix system everything can unless\r\n     * specified in an inherited preview instance.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.isContainer = function isContainer() {\r\n      return true;\r\n    }\r\n    /**\r\n     * Return the sortable options\r\n     *\r\n     * @returns {JQueryUI.SortableOptions}\r\n     */\r\n    ;\r\n\r\n    _proto.getSortableOptions = function getSortableOptions() {\r\n      return (0, _sortable2.getSortableOptions)(this);\r\n    }\r\n    /**\r\n     * Destroys current instance\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      return;\r\n    }\r\n    /**\r\n     * Get the CSS classes for the children element, as we dynamically create this class name it can't sit in the DOM\r\n     * without causing browser issues\r\n     *\r\n     * @returns {{[p: string]: boolean}}\r\n     */\r\n    ;\r\n\r\n    _proto.getChildrenCss = function getChildrenCss() {\r\n      var _ref;\r\n\r\n      return _ref = {}, _ref[this.config.name + \"-container\"] = true, _ref;\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = {\r\n        move: new _option({\r\n          preview: this,\r\n          icon: \"<i class='icon-admin-pagebuilder-handle'></i>\",\r\n          title: (0, _translate)(\"Move\"),\r\n          classes: [\"move-structural\"],\r\n          sort: 10\r\n        }),\r\n        title: new _titleOption({\r\n          preview: this,\r\n          title: this.config.label,\r\n          template: \"Magento_PageBuilder/content-type/title\",\r\n          sort: 20\r\n        }),\r\n        edit: new _option({\r\n          preview: this,\r\n          icon: \"<i class='icon-admin-pagebuilder-systems'></i>\",\r\n          title: (0, _translate)(\"Edit\"),\r\n          action: this.onOptionEdit,\r\n          classes: [\"edit-content-type\"],\r\n          sort: 30\r\n        }),\r\n        duplicate: new _option({\r\n          preview: this,\r\n          icon: \"<i class='icon-pagebuilder-copy'></i>\",\r\n          title: (0, _translate)(\"Duplicate\"),\r\n          action: this.onOptionDuplicate,\r\n          classes: [\"duplicate-structural\"],\r\n          sort: 50\r\n        }),\r\n        remove: new _option({\r\n          preview: this,\r\n          icon: \"<i class='icon-admin-pagebuilder-remove'></i>\",\r\n          title: (0, _translate)(\"Remove\"),\r\n          action: this.onOptionRemove,\r\n          classes: [\"remove-structural\"],\r\n          sort: 60\r\n        })\r\n      };\r\n      return options;\r\n    }\r\n    /**\r\n     * Dispatch content type clone events\r\n     *\r\n     * @param {ContentTypeInterface | ContentTypeCollectionInterface} originalContentType\r\n     * @param {ContentTypeInterface | ContentTypeCollectionInterface} duplicateContentType\r\n     * @param {number} index\r\n     * @param {boolean} direct\r\n     */\r\n    ;\r\n\r\n    _proto.dispatchContentTypeCloneEvents = function dispatchContentTypeCloneEvents(originalContentType, duplicateContentType, index, direct) {\r\n      var duplicateEventParams = {\r\n        originalContentType: originalContentType,\r\n        duplicateContentType: duplicateContentType,\r\n        index: index,\r\n        direct: direct\r\n      };\r\n\r\n      _events.trigger(\"contentType:duplicateAfter\", duplicateEventParams);\r\n\r\n      _events.trigger(originalContentType.config.name + \":duplicateAfter\", duplicateEventParams);\r\n    }\r\n    /**\r\n     * Dispatch content type visibility events\r\n     *\r\n     * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n     * @param {boolean} visibility\r\n     */\r\n    ;\r\n\r\n    _proto.dispatchContentTypeVisibilityEvents = function dispatchContentTypeVisibilityEvents(contentType, visibility) {\r\n      var visibilityEventParams = {\r\n        contentType: contentType,\r\n        visibility: visibility\r\n      };\r\n\r\n      _events.trigger(\"contentType:visibilityAfter\", visibilityEventParams);\r\n\r\n      _events.trigger(contentType.config.name + \":visibilityAfter\", visibilityEventParams);\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this5 = this;\r\n\r\n      var fullScreenModeChangeAfterEvent = \"stage:\" + this.contentType.stageId + \":fullScreenModeChangeAfter\";\r\n      this.contentType.dataStore.subscribe(function (data) {\r\n        _this5.updateObservables();\r\n\r\n        _this5.updatePlaceholderVisibility(data); // Keep a reference to the display state in an observable for adding classes to the wrapper\r\n\r\n\r\n        _this5.display(!!data.display);\r\n\r\n        _this5.appearance(data.appearance);\r\n      });\r\n\r\n      if (this.contentType instanceof _contentTypeCollection) {\r\n        this.contentType.children.subscribe(function (children) {\r\n          _this5.isEmpty(!children.length);\r\n        });\r\n      }\r\n\r\n      _events.on(fullScreenModeChangeAfterEvent, this.toggleSnapshot.bind(this));\r\n\r\n      _events.on(\"stage:\" + this.contentType.stageId + \":viewportChangeAfter\", function (args) {\r\n        _this5.viewport(args.viewport);\r\n      });\r\n    }\r\n    /**\r\n     * After observables updated, allows to modify observables\r\n     */\r\n    ;\r\n\r\n    _proto.afterObservablesUpdated = function afterObservablesUpdated() {\r\n      return;\r\n    }\r\n    /**\r\n     * Does the current instance have any children or values different from the default for it's type?\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.isConfigured = function isConfigured() {\r\n      var _this6 = this;\r\n\r\n      var data = this.contentType.dataStore.getState();\r\n      var fields = this.contentType.config.fields[this.appearance() + \"-appearance\"] || this.contentType.config.fields.default;\r\n      var hasDataChanges = false;\r\n\r\n      _underscore.each(fields, function (field, key) {\r\n        if (_this6.fieldsToIgnoreOnRemove && _this6.fieldsToIgnoreOnRemove.includes(key)) {\r\n          return;\r\n        }\r\n\r\n        var fieldValue = (0, _object.get)(data, key);\r\n\r\n        if (!fieldValue) {\r\n          fieldValue = \"\";\r\n        } // Default values can only ever be strings\r\n\r\n\r\n        if (_underscore.isObject(fieldValue)) {\r\n          // Empty arrays as default values appear as empty strings\r\n          if (_underscore.isArray(fieldValue) && fieldValue.length === 0) {\r\n            fieldValue = \"\";\r\n          } else {\r\n            fieldValue = JSON.stringify(fieldValue);\r\n          }\r\n        }\r\n\r\n        if (_underscore.isObject(field.default)) {\r\n          if (JSON.stringify(field.default) !== fieldValue) {\r\n            hasDataChanges = true;\r\n          }\r\n        } else if (field.default !== fieldValue) {\r\n          hasDataChanges = true;\r\n        }\r\n\r\n        return;\r\n      });\r\n\r\n      return hasDataChanges;\r\n    }\r\n    /**\r\n     * Any hidden element should block drag / drop events from uploading images from the OS. We have to block this for\r\n     * all elements as underlying elements could still receive the events if a parent is hidden.\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.disableImageUploadOnHide = function disableImageUploadOnHide(element) {\r\n      var _this7 = this;\r\n\r\n      (0, _jquery)(element).on(\"drag dragstart dragend dragover dragenter dragleave drop\", function (event) {\r\n        if (_this7.display() === false) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Update observables\r\n     */\r\n    ;\r\n\r\n    _proto.updateObservables = function updateObservables() {\r\n      this.observableUpdater.update(this, _underscore.extend({}, this.contentType.dataStore.getState()));\r\n      this.afterObservablesUpdated();\r\n    }\r\n    /**\r\n     * Update placeholder background visibility base on height and padding\r\n     *\r\n     * @param {DataObject} data\r\n     */\r\n    ;\r\n\r\n    _proto.updatePlaceholderVisibility = function updatePlaceholderVisibility(data) {\r\n      var minHeight = !_underscore.isEmpty(data.min_height) ? parseFloat(data.min_height) : 130;\r\n      var marginsAndPadding = _underscore.isString(data.margins_and_padding) && data.margins_and_padding ? JSON.parse(data.margins_and_padding) : data.margins_and_padding || {};\r\n      var padding = marginsAndPadding.padding || {};\r\n      var paddingBottom = parseFloat(padding.bottom) || 0;\r\n      var paddingTop = parseFloat(padding.top) || 0;\r\n      this.isPlaceholderVisible(paddingBottom + paddingTop + minHeight >= 130);\r\n    }\r\n    /**\r\n     * Populate the preview data with calls to the supported getOptionValue method\r\n     *\r\n     * @deprecated this function is only included to preserve backwards compatibility, use getOptionValue directly\r\n     */\r\n    ;\r\n\r\n    _proto.populatePreviewData = function populatePreviewData() {\r\n      var _this8 = this;\r\n\r\n      if (this.config.fields) {\r\n        _underscore.each(this.config.fields, function (fields) {\r\n          _underscore.keys(fields).forEach(function (key) {\r\n            _this8.previewData[key] = _knockout.observable(\"\");\r\n          });\r\n        });\r\n      } // Subscribe to this content types data in the store\r\n\r\n\r\n      this.contentType.dataStore.subscribe(function (data) {\r\n        _underscore.forEach(data, function (value, key) {\r\n          var optionValue = _this8.getOptionValue(key);\r\n\r\n          if (_knockout.isObservable(_this8.previewData[key])) {\r\n            _this8.previewData[key](optionValue);\r\n          } else {\r\n            if (_underscore.isArray(optionValue)) {\r\n              _this8.previewData[key] = _knockout.observableArray(optionValue);\r\n            } else {\r\n              _this8.previewData[key] = _knockout.observable(optionValue);\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Enable snapshot mode.\r\n     * @param args\r\n     */\r\n    ;\r\n\r\n    _proto.toggleSnapshot = function toggleSnapshot(args) {\r\n      if (_config.getConfig(\"pagebuilder_content_snapshot\")) {\r\n        this.isSnapshot(!args.fullScreen);\r\n      }\r\n    };\r\n\r\n    _createClass(Preview, [{\r\n      key: \"template\",\r\n      get: function get() {\r\n        return (0, _appearanceConfig)(this.config.name, this.appearance()).preview_template;\r\n      }\r\n    }]);\r\n\r\n    return Preview;\r\n  }();\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/style-registry.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/string\"], function (_underscore, _string) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var styleRegistries = {};\r\n  var pbStyleAttribute = \"data-pb-style\";\r\n  var styleDataAttribute = \"data-style-id\";\r\n\r\n  var StyleRegistry = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function StyleRegistry(identifier) {\r\n      this.styles = {};\r\n\r\n      if (identifier) {\r\n        styleRegistries[identifier] = this;\r\n      }\r\n    }\r\n    /**\r\n     * Update styles for selector\r\n     *\r\n     * @param selector\r\n     * @param styles\r\n     */\r\n\r\n\r\n    var _proto = StyleRegistry.prototype;\r\n\r\n    _proto.setStyles = function setStyles(selector, styles) {\r\n      this.styles[selector] = styles;\r\n    }\r\n    /**\r\n     * Retrieve styles for a selector\r\n     *\r\n     * @param selector\r\n     */\r\n    ;\r\n\r\n    _proto.getStyles = function getStyles(selector) {\r\n      if (this.styles[selector]) {\r\n        return this.styles[selector];\r\n      }\r\n\r\n      return {};\r\n    }\r\n    /**\r\n     * Retrieve all styles\r\n     */\r\n    ;\r\n\r\n    _proto.getAllStyles = function getAllStyles() {\r\n      return this.styles;\r\n    };\r\n\r\n    return StyleRegistry;\r\n  }();\r\n  /**\r\n   * Return the style registry\r\n   *\r\n   * @param id\r\n   */\r\n\r\n\r\n  function getStyleRegistry(id) {\r\n    return styleRegistries[id] !== undefined ? styleRegistries[id] : null;\r\n  }\r\n  /**\r\n   * Delete the style registry\r\n   *\r\n   * @param id\r\n   */\r\n\r\n\r\n  function deleteStyleRegistry(id) {\r\n    if (styleRegistries[id]) {\r\n      delete styleRegistries[id];\r\n    }\r\n  }\r\n  /**\r\n   * Generate CSS from styles\r\n   *\r\n   * @param styles\r\n   */\r\n\r\n\r\n  function generateCss(styles) {\r\n    var generatedCss = \"\";\r\n    Object.keys(styles).forEach(function (selector) {\r\n      if (!_underscore.isEmpty(styles[selector])) {\r\n        generatedCss += generateCssBlock(selector, styles[selector]);\r\n      }\r\n    });\r\n    return generatedCss;\r\n  }\r\n  /**\r\n   * Generate styles from an object\r\n   *\r\n   * @param selector\r\n   * @param styles\r\n   */\r\n\r\n\r\n  function generateCssBlock(selector, styles) {\r\n    var generatedStyles = \"\";\r\n    Object.keys(styles).forEach(function (key) {\r\n      if (!_underscore.isEmpty(styles[key])) {\r\n        generatedStyles += (0, _string.fromCamelCaseToDash)(key) + \": \" + styles[key] + \"; \";\r\n      }\r\n    });\r\n    return selector + \" { \" + generatedStyles + \" }\";\r\n  }\r\n\r\n  return Object.assign(StyleRegistry, {\r\n    getStyleRegistry: getStyleRegistry,\r\n    deleteStyleRegistry: deleteStyleRegistry,\r\n    generateCss: generateCss,\r\n    generateCssBlock: generateCssBlock,\r\n    pbStyleAttribute: pbStyleAttribute,\r\n    styleDataAttribute: styleDataAttribute\r\n  });\r\n});\r\n//# sourceMappingURL=style-registry.js.map","Magento_PageBuilder/js/content-type/banner/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jarallax\", \"jarallaxVideo\", \"jquery\", \"jquery/z-index\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"mageUtils\", \"underscore\", \"vimeoWrapper\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/uploader\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/nesting-link-dialog\", \"Magento_PageBuilder/js/utils/nesting-widget-dialog\", \"Magento_PageBuilder/js/wysiwyg/factory\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jarallax, _jarallaxVideo, _jquery, _zIndex, _translate, _events, _mageUtils, _underscore, _vimeoWrapper, _hideShowOption, _uploader, _delayUntil, _editor, _nestingLinkDialog, _nestingWidgetDialog, _factory, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      var _this;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      _this = _preview2.call.apply(_preview2, [this].concat(args)) || this;\r\n      _this.buttonPlaceholder = (0, _translate)(\"Edit Button Text\");\r\n      _this.wysiwygDeferred = _jquery.Deferred();\r\n      _this.handledDoubleClick = false;\r\n      _this.videoUpdateProperties = [\"background_type\", \"video_fallback_image\", \"video_lazy_load\", \"video_loop\", \"video_play_only_visible\", \"video_source\"];\r\n      _this.bannerOverlaySelector = \".pagebuilder-overlay\";\r\n      _this.defaultOverlayZIndex = 2;\r\n      _this.activeEditorOverlayZIndex = 3;\r\n      _this.buildJarallax = _underscore.debounce(function () {\r\n        // Destroy all instances of the plugin prior\r\n        try {\r\n          jarallax(_this.wrapper, \"destroy\");\r\n        } catch (e) {// Failure of destroying is acceptable\r\n        }\r\n\r\n        if (_this.wrapper && _this.wrapper.dataset.backgroundType === \"video\" && _this.wrapper.dataset.videoSrc.length) {\r\n          _underscore.defer(function () {\r\n            // Build Parallax on elements with the correct class\r\n            jarallax(_this.wrapper, {\r\n              videoSrc: _this.wrapper.dataset.videoSrc,\r\n              imgSrc: _this.wrapper.dataset.videoFallbackSrc,\r\n              videoLoop: _this.contentType.dataStore.get(\"video_loop\") === \"true\",\r\n              speed: 1,\r\n              videoPlayOnlyVisible: _this.contentType.dataStore.get(\"video_play_only_visible\") === \"true\",\r\n              videoLazyLoading: _this.contentType.dataStore.get(\"video_lazy_load\") === \"true\"\r\n            }); // @ts-ignore\r\n\r\n            if (_this.wrapper.jarallax && _this.wrapper.jarallax.video) {\r\n              // @ts-ignore\r\n              _this.wrapper.jarallax.video.on(\"started\", function () {\r\n                // @ts-ignore\r\n                if (_this.wrapper.jarallax && _this.wrapper.jarallax.$video) {\r\n                  // @ts-ignore\r\n                  _this.wrapper.jarallax.$video.style.visibility = \"visible\";\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }, 50);\r\n      return _this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Get background image url base on the viewport.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    _proto.getBackgroundImage = function getBackgroundImage() {\r\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\r\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\r\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\r\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Get registry callback reference to uploader UI component\r\n     *\r\n     * @returns {Uploader}\r\n     */\r\n    ;\r\n\r\n    _proto.getUploader = function getUploader() {\r\n      var initialImageValue = this.contentType.dataStore.get(this.config.additional_data.uploaderConfig.dataScope, \"\"); // Create uploader\r\n\r\n      return new _uploader(\"imageuploader_\" + this.contentType.id, this.config.additional_data.uploaderConfig, this.contentType.id, this.contentType.dataStore, initialImageValue);\r\n    }\r\n    /**\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.afterRenderWysiwyg = function afterRenderWysiwyg(element) {\r\n      var _this2 = this;\r\n\r\n      this.element = element;\r\n      element.id = this.contentType.id + \"-editor\"; // Set the innerHTML manually so we don't upset Knockout & TinyMCE\r\n\r\n      element.innerHTML = this.data.content.html();\r\n      this.contentType.dataStore.subscribe(function () {\r\n        // If we're not focused into TinyMCE inline, update the value when it changes in the data store\r\n        if (!_this2.wysiwyg || _this2.wysiwyg && _this2.wysiwyg.getAdapter().id !== (0, _editor.getActiveEditor)().id) {\r\n          element.innerHTML = _this2.data.content.html();\r\n        }\r\n      }, \"message\");\r\n      /**\r\n       * afterRenderWysiwyg is called whenever Knockout causes a DOM re-render. This occurs frequently within Slider\r\n       * due to Slick's inability to perform a refresh with Knockout managing the DOM. Due to this the original\r\n       * WYSIWYG instance will be detached from this slide and we need to re-initialize on click.\r\n       */\r\n\r\n      this.wysiwyg = null;\r\n    }\r\n    /**\r\n     * Stop event to prevent execution of action when editing textarea.\r\n     *\r\n     * @param {Preview} preview\r\n     * @param {JQueryEventObject} event\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.stopEvent = function stopEvent(preview, event) {\r\n      event.stopPropagation();\r\n      return true;\r\n    }\r\n    /**\r\n     * Init WYSIWYG on load\r\n     *\r\n     * @param element\r\n     * @deprecated please use activateEditor & initWysiwygFromClick\r\n     */\r\n    ;\r\n\r\n    _proto.initWysiwyg = function initWysiwyg(element) {\r\n      this.element = element;\r\n      element.id = this.contentType.id + \"-editor\";\r\n      this.wysiwyg = null;\r\n      return this.initWysiwygFromClick(false);\r\n    }\r\n    /**\r\n     * Init the WYSIWYG\r\n     *\r\n     * @param {boolean} focus Should wysiwyg focus after initialization?\r\n     * @returns Promise\r\n     */\r\n    ;\r\n\r\n    _proto.initWysiwygFromClick = function initWysiwygFromClick(focus) {\r\n      var _this3 = this;\r\n\r\n      if (focus === void 0) {\r\n        focus = false;\r\n      }\r\n\r\n      if (this.wysiwyg) {\r\n        return Promise.resolve(this.wysiwyg);\r\n      }\r\n\r\n      var wysiwygConfig = this.config.additional_data.wysiwygConfig.wysiwygConfigData;\r\n\r\n      if (focus) {\r\n        wysiwygConfig.adapter.settings.auto_focus = this.element.id;\r\n\r\n        wysiwygConfig.adapter.settings.init_instance_callback = function (editor) {\r\n          editor.on(\"focus\", function () {\r\n            (0, _jquery)(_this3.element).parents(_this3.bannerOverlaySelector).zIndex(_this3.activeEditorOverlayZIndex);\r\n          });\r\n          editor.on(\"blur\", function () {\r\n            (0, _jquery)(_this3.element).parents(_this3.bannerOverlaySelector).zIndex(_this3.defaultOverlayZIndex);\r\n            (0, _nestingLinkDialog)(_this3.contentType.dataStore, _this3.wysiwyg, \"message\", \"link_url\");\r\n            (0, _nestingWidgetDialog)(_this3.contentType.dataStore, _this3.wysiwyg, \"message\", \"link_url\");\r\n          });\r\n\r\n          _underscore.defer(function () {\r\n            _this3.element.blur();\r\n\r\n            _this3.element.focus();\r\n          });\r\n        };\r\n      }\r\n\r\n      wysiwygConfig.adapter.settings.fixed_toolbar_container = \"#\" + this.contentType.id + \" .pagebuilder-banner-text-content\";\r\n      return (0, _factory)(this.contentType.id, this.element.id, this.config.name, wysiwygConfig, this.contentType.dataStore, \"message\", this.contentType.stageId).then(function (wysiwyg) {\r\n        _this3.wysiwyg = wysiwyg;\r\n        return wysiwyg;\r\n      });\r\n    }\r\n    /**\r\n     * Makes WYSIWYG active\r\n     *\r\n     * @param {Preview} preview\r\n     * @param {JQueryEventObject} event\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.activateEditor = function activateEditor(preview, event) {\r\n      var _this4 = this;\r\n\r\n      if (this.element && !this.wysiwyg) {\r\n        var bookmark = (0, _editor.createBookmark)(event);\r\n        (0, _editor.lockImageSize)(this.element);\r\n        this.element.removeAttribute(\"contenteditable\");\r\n\r\n        _underscore.defer(function () {\r\n          _this4.initWysiwygFromClick(true).then(function () {\r\n            return (0, _delayUntil)(function () {\r\n              // We no longer need to handle double click once it's initialized\r\n              _this4.handledDoubleClick = true;\r\n\r\n              _this4.wysiwygDeferred.resolve();\r\n\r\n              (0, _editor.moveToBookmark)(bookmark);\r\n              (0, _editor.unlockImageSize)(_this4.element);\r\n            }, function () {\r\n              return _this4.element.classList.contains(\"mce-edit-focus\");\r\n            }, 10);\r\n          }).catch(function (error) {\r\n            // If there's an error with init of WYSIWYG editor push into the console to aid support\r\n            console.error(error);\r\n          });\r\n        });\r\n      } else if (this.element && this.wysiwyg) {\r\n        var element = this.element || this.textarea;\r\n\r\n        if (event.currentTarget !== event.target && event.target !== element && !element.contains(event.target)) {\r\n          return;\r\n        }\r\n\r\n        element.focus();\r\n      }\r\n    }\r\n    /**\r\n     * If a user double clicks prior to initializing TinyMCE, forward the event\r\n     *\r\n     * @param preview\r\n     * @param event\r\n     */\r\n    ;\r\n\r\n    _proto.handleDoubleClick = function handleDoubleClick(preview, event) {\r\n      var _this5 = this;\r\n\r\n      if (this.handledDoubleClick) {\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      var targetIndex = (0, _editor.findNodeIndex)(this.element, event.target.tagName, event.target);\r\n      this.handledDoubleClick = true;\r\n      this.wysiwygDeferred.then(function () {\r\n        var target = document.getElementById(event.target.id);\r\n\r\n        if (!target) {\r\n          target = (0, _editor.getNodeByIndex)(_this5.element, event.target.tagName, targetIndex);\r\n        }\r\n\r\n        if (target) {\r\n          target.dispatchEvent((0, _editor.createDoubleClickEvent)());\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Set state based on overlay mouseover event for the preview\r\n     */\r\n    ;\r\n\r\n    _proto.onMouseOverWrapper = function onMouseOverWrapper() {\r\n      if (this.data.main.attributes()[\"data-show-overlay\"] === \"hover\") {\r\n        this.data.overlay.attributes(Object.assign(this.data.overlay.attributes(), {\r\n          \"data-background-color-orig\": this.data.overlay.style().backgroundColor\r\n        }));\r\n        this.data.overlay.style(Object.assign(this.data.overlay.style(), {\r\n          backgroundColor: this.data.overlay.attributes()[\"data-overlay-color\"]\r\n        }));\r\n      }\r\n\r\n      if (this.data.main.attributes()[\"data-show-button\"] === \"hover\") {\r\n        this.data.button.style(Object.assign(this.data.button.style(), {\r\n          opacity: 1,\r\n          visibility: \"visible\"\r\n        }));\r\n      }\r\n    }\r\n    /**\r\n     * Set state based on overlay mouseout event for the preview\r\n     */\r\n    ;\r\n\r\n    _proto.onMouseOutWrapper = function onMouseOutWrapper() {\r\n      if (this.data.main.attributes()[\"data-show-overlay\"] === \"hover\") {\r\n        this.data.overlay.style(Object.assign(this.data.overlay.style(), {\r\n          backgroundColor: this.data.overlay.attributes()[\"data-background-color-orig\"]\r\n        }));\r\n      }\r\n\r\n      if (this.data.main.attributes()[\"data-show-button\"] === \"hover\") {\r\n        this.data.button.style(Object.assign(this.data.button.style(), {\r\n          opacity: 0,\r\n          visibility: \"hidden\"\r\n        }));\r\n      }\r\n    }\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.isWysiwygSupported = function isWysiwygSupported() {\r\n      return (0, _editor.isWysiwygSupported)();\r\n    }\r\n    /**\r\n     * @param {HTMLTextAreaElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.initTextarea = function initTextarea(element) {\r\n      var _this6 = this;\r\n\r\n      this.textarea = element; // set initial value of textarea based on data store\r\n\r\n      this.textarea.value = this.contentType.dataStore.get(\"message\");\r\n      this.adjustTextareaHeightBasedOnScrollHeight(); // Update content in our stage preview textarea after its slideout counterpart gets updated\r\n\r\n      _events.on(\"form:\" + this.contentType.id + \":saveAfter\", function () {\r\n        _this6.textarea.value = _this6.contentType.dataStore.get(\"message\");\r\n\r\n        _this6.adjustTextareaHeightBasedOnScrollHeight();\r\n      });\r\n    }\r\n    /**\r\n     * Save current value of textarea in data store\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaKeyUp = function onTextareaKeyUp() {\r\n      this.adjustTextareaHeightBasedOnScrollHeight();\r\n      this.contentType.dataStore.set(\"message\", this.textarea.value);\r\n    }\r\n    /**\r\n     * Start stage interaction on textarea blur\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaFocus = function onTextareaFocus() {\r\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-banner-text-content\").addClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStart\");\r\n    }\r\n    /**\r\n     * Stop stage interaction on textarea blur\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaBlur = function onTextareaBlur() {\r\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-banner-text-content\").removeClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStop\");\r\n    }\r\n    /**\r\n     * Init the parallax element\r\n     *\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.initParallax = function initParallax(element) {\r\n      var _this7 = this;\r\n\r\n      this.wrapper = element;\r\n\r\n      _underscore.defer(function () {\r\n        _this7.buildJarallax();\r\n      });\r\n    }\r\n    /**\r\n     * Destroy jarallax instance.\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      _preview2.prototype.destroy.call(this);\r\n\r\n      if (this.wrapper) {\r\n        jarallax(this.wrapper, \"destroy\");\r\n      }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this8 = this;\r\n\r\n      _preview2.prototype.bindEvents.call(this);\r\n\r\n      _events.on(\"banner:mountAfter\", function (args) {\r\n        if (args.id === _this8.contentType.id) {\r\n          _this8.buildJarallax();\r\n\r\n          _this8.isSnapshot.subscribe(function (value) {\r\n            _this8.changeUploaderControlsVisibility();\r\n          });\r\n\r\n          _this8.changeUploaderControlsVisibility();\r\n        }\r\n      });\r\n\r\n      _events.on(this.config.name + \":\" + this.contentType.id + \":updateAfter\", function () {\r\n        var dataStore = _this8.contentType.dataStore.getState();\r\n\r\n        var imageObject = dataStore[_this8.config.additional_data.uploaderConfig.dataScope][0] || {}; // Resolves issue when tinyMCE injects a non-breaking space on reinitialization and removes placeholder.\r\n\r\n        if (dataStore.message === \"<div data-bind=\\\"html: data.content.html\\\">&nbsp;</div>\") {\r\n          _this8.contentType.dataStore.set(\"message\", \"\");\r\n        }\r\n\r\n        _events.trigger(\"image:\" + _this8.contentType.id + \":assignAfter\", imageObject);\r\n      });\r\n\r\n      this.contentType.dataStore.subscribe(function (data) {\r\n        if (this.shouldUpdateVideo(data)) {\r\n          this.buildJarallax();\r\n        }\r\n      }.bind(this));\r\n\r\n      _events.on(\"image:\" + this.contentType.id + \":uploadAfter\", function () {\r\n        _this8.contentType.dataStore.set(\"background_type\", \"image\");\r\n      });\r\n\r\n      _events.on(\"stage:\" + this.contentType.stageId + \":viewportChangeAfter\", function (args) {\r\n        _this8.buildJarallax();\r\n      });\r\n    }\r\n    /**\r\n     * Change uploader controls visibility\r\n     */\r\n    ;\r\n\r\n    _proto.changeUploaderControlsVisibility = function changeUploaderControlsVisibility() {\r\n      var _this9 = this;\r\n\r\n      this.getUploader().getUiComponent()(function (uploader) {\r\n        uploader.visibleControls = !_this9.isSnapshot();\r\n      });\r\n    }\r\n    /**\r\n     * Adjust textarea's height based on scrollHeight\r\n     */\r\n    ;\r\n\r\n    _proto.adjustTextareaHeightBasedOnScrollHeight = function adjustTextareaHeightBasedOnScrollHeight() {\r\n      this.textarea.style.height = \"\";\r\n      var scrollHeight = this.textarea.scrollHeight;\r\n      var minHeight = parseInt((0, _jquery)(this.textarea).css(\"min-height\"), 10);\r\n\r\n      if (scrollHeight === minHeight) {\r\n        // leave height at 'auto'\r\n        return;\r\n      }\r\n\r\n      (0, _jquery)(this.textarea).height(scrollHeight);\r\n    }\r\n    /**\r\n     * Check if video options has been updated.\r\n     *\r\n     * @return boolean\r\n     */\r\n    ;\r\n\r\n    _proto.shouldUpdateVideo = function shouldUpdateVideo(state) {\r\n      var _this10 = this;\r\n\r\n      var previousState = this.contentType.dataStore.getPreviousState();\r\n\r\n      var diff = _mageUtils.compare(previousState, state).changes;\r\n\r\n      if (diff.length > 0) {\r\n        return _underscore.some(diff, function (element) {\r\n          if (element.name === \"video_fallback_image\") {\r\n            return (!_underscore.isEmpty(previousState.video_fallback_image) && previousState.video_fallback_image) !== (!_underscore.isEmpty(state.video_fallback_image) && state.video_fallback_image);\r\n          }\r\n\r\n          return _this10.videoUpdateProperties.indexOf(element.name) !== -1;\r\n        });\r\n      }\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/banner/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_PageBuilder/js/widget/show-on-hover',\r\n    'Magento_PageBuilder/js/widget/video-background'\r\n], function (showOnHover, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var videoElement = element[0].querySelector('[data-background-type=video]');\r\n\r\n        showOnHover(config);\r\n\r\n        if (videoElement) {\r\n            videoBackground(config, videoElement);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/banner/converter/attribute/overlay-color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var OverlayColor = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function OverlayColor() {}\r\n\r\n    var _proto = OverlayColor.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value === \"transparent\" ? \"\" : value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      if (data.overlay_color) {\r\n        return data.overlay_color.toString();\r\n      }\r\n\r\n      return \"\";\r\n    };\r\n\r\n    return OverlayColor;\r\n  }();\r\n\r\n  return OverlayColor;\r\n});\r\n//# sourceMappingURL=overlay-color.js.map","Magento_PageBuilder/js/content-type/banner/converter/style/button-opacity.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ButtonOpacity = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ButtonOpacity() {}\r\n\r\n    var _proto = ButtonOpacity.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return data.show_button === \"always\" ? \"1\" : \"0\";\r\n    };\r\n\r\n    return ButtonOpacity;\r\n  }();\r\n\r\n  return ButtonOpacity;\r\n});\r\n//# sourceMappingURL=button-opacity.js.map","Magento_PageBuilder/js/content-type/banner/converter/style/button-visibility.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ButtonVisibility = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ButtonVisibility() {}\r\n\r\n    var _proto = ButtonVisibility.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return data.show_button === \"always\" ? \"visible\" : \"hidden\";\r\n    };\r\n\r\n    return ButtonVisibility;\r\n  }();\r\n\r\n  return ButtonVisibility;\r\n});\r\n//# sourceMappingURL=button-visibility.js.map","Magento_PageBuilder/js/content-type/banner/converter/style/overlay-background-color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var OverlayBackgroundColor = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function OverlayBackgroundColor() {}\r\n\r\n    var _proto = OverlayBackgroundColor.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (data.show_overlay === \"always\" && value !== \"\" && value !== undefined) {\r\n        return value;\r\n      }\r\n\r\n      return \"transparent\";\r\n    };\r\n\r\n    return OverlayBackgroundColor;\r\n  }();\r\n\r\n  return OverlayBackgroundColor;\r\n});\r\n//# sourceMappingURL=overlay-background-color.js.map","Magento_PageBuilder/js/content-type/banner/wysiwyg/tinymce/component-initializer.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"mage/adminhtml/wysiwyg/events\"], function (_jquery, _events) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ComponentInitializer = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ComponentInitializer() {}\r\n\r\n    var _proto = ComponentInitializer.prototype;\r\n\r\n    /**\r\n     * The editor element\r\n     */\r\n\r\n    /**\r\n     * The configuration of the wysiwyg content type\r\n     */\r\n\r\n    /**\r\n     * Initialize the instance\r\n     *\r\n     * @param {Wysiwyg} wysiwyg\r\n     */\r\n    _proto.initialize = function initialize(wysiwyg) {\r\n      this.$element = (0, _jquery)(\"#\" + wysiwyg.elementId);\r\n      this.config = wysiwyg.config;\r\n      var tinymce = wysiwyg.getAdapter();\r\n      tinymce.eventBus.attachEventHandler(_events.afterFocus, this.onFocus.bind(this));\r\n      tinymce.eventBus.attachEventHandler(_events.afterBlur, this.onBlur.bind(this));\r\n    }\r\n    /**\r\n     * Called when tinymce is focused\r\n     */\r\n    ;\r\n\r\n    _proto.onFocus = function onFocus() {\r\n      var _this = this;\r\n\r\n      // If there isn't enough room for a left-aligned toolbar, right align it\r\n      if ((0, _jquery)(window).width() < this.$element.offset().left + parseInt(this.config.adapter_config.minToolbarWidth, 10)) {\r\n        this.$element.addClass(\"_right-aligned-toolbar\");\r\n      } else {\r\n        this.$element.removeClass(\"_right-aligned-toolbar\");\r\n      }\r\n\r\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\r\n        _this.$element.closest(selector).css(\"z-index\", 100);\r\n      });\r\n    }\r\n    /**\r\n     * Called when tinymce is blurred\r\n     */\r\n    ;\r\n\r\n    _proto.onBlur = function onBlur() {\r\n      var _this2 = this;\r\n\r\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\r\n        _this2.$element.closest(selector).css(\"z-index\", \"\");\r\n      });\r\n    };\r\n\r\n    return ComponentInitializer;\r\n  }();\r\n\r\n  return ComponentInitializer;\r\n});\r\n//# sourceMappingURL=component-initializer.js.map","Magento_PageBuilder/js/content-type/block/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/widget-initializer\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/style-registry\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jquery, _knockout, _translate, _widgetInitializer, _mageUtils, _underscore, _config, _hideShowOption, _styleRegistry, _object, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _preview2.call(this, contentType, config, observableUpdater) || this;\r\n      _this.displayingBlockPreview = _knockout.observable(false);\r\n      _this.loading = _knockout.observable(false);\r\n      _this.messages = {\r\n        NOT_SELECTED: (0, _translate)(\"Empty Block\"),\r\n        UNKNOWN_ERROR: (0, _translate)(\"An unknown error occurred. Please try again.\")\r\n      };\r\n      _this.placeholderText = _knockout.observable(_this.messages.NOT_SELECTED);\r\n      return _this;\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Runs the widget initializer for each configured widget\r\n     */\r\n    ;\r\n\r\n    _proto.initializeWidgets = function initializeWidgets(element) {\r\n      if (element) {\r\n        this.element = element;\r\n        (0, _widgetInitializer)({\r\n          config: _config.getConfig(\"widgets\"),\r\n          breakpoints: _config.getConfig(\"breakpoints\"),\r\n          currentViewport: _config.getConfig(\"viewport\")\r\n        }, element);\r\n      }\r\n    }\r\n    /**\r\n     * Updates the view state using the data provided\r\n     * @param {DataObject} data\r\n     */\r\n    ;\r\n\r\n    _proto.processBlockData = function processBlockData(data) {\r\n      // Only load if something changed\r\n      this.displayPreviewPlaceholder(data, \"block_id\");\r\n\r\n      if (data.block_id && data.template.length !== 0) {\r\n        this.processRequest(data, \"block_id\", \"title\");\r\n      }\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    ;\r\n\r\n    _proto.afterObservablesUpdated = function afterObservablesUpdated() {\r\n      _preview2.prototype.afterObservablesUpdated.call(this);\r\n\r\n      var data = this.contentType.dataStore.getState(); // Only load if something changed\r\n\r\n      this.processBlockData(data);\r\n    }\r\n    /**\r\n     * Display preview placeholder\r\n     *\r\n     * @param {DataObject} data\r\n     * @param {string} identifierName\r\n     */\r\n    ;\r\n\r\n    _proto.displayPreviewPlaceholder = function displayPreviewPlaceholder(data, identifierName) {\r\n      var blockId = (0, _object.get)(data, identifierName); // Only load if something changed\r\n\r\n      if (this.lastBlockId === blockId && this.lastTemplate === data.template) {\r\n        // The mass converter will have transformed the HTML property into a directive\r\n        if (this.lastRenderedHtml) {\r\n          this.data.main.html(this.lastRenderedHtml);\r\n          this.showBlockPreview(true);\r\n          this.initializeWidgets(this.element);\r\n        }\r\n      } else {\r\n        this.showBlockPreview(false);\r\n        this.placeholderText(\"\");\r\n      }\r\n\r\n      if (!blockId || blockId && blockId.toString().length === 0 || data.template.length === 0) {\r\n        this.showBlockPreview(false);\r\n        this.placeholderText(this.messages.NOT_SELECTED);\r\n        return;\r\n      }\r\n    }\r\n    /**\r\n     *\r\n     * @param {DataObject} data\r\n     * @param {string} identifierName\r\n     * @param {string} labelKey\r\n     */\r\n    ;\r\n\r\n    _proto.processRequest = function processRequest(data, identifierName, labelKey) {\r\n      var _this2 = this;\r\n\r\n      var url = _config.getConfig(\"preview_url\");\r\n\r\n      var identifier = (0, _object.get)(data, identifierName);\r\n      var requestConfig = {\r\n        // Prevent caching\r\n        method: \"POST\",\r\n        data: {\r\n          role: this.config.name,\r\n          block_id: identifier,\r\n          directive: this.data.main.html()\r\n        }\r\n      };\r\n      this.loading(true); // Retrieve a state object representing the block from the preview controller and process it on the stage\r\n\r\n      _jquery.ajax(url, requestConfig) // The state object will contain the block name and either html or a message why there isn't any.\r\n      .done(function (response) {\r\n        // Empty content means something bad happened in the controller that didn't trigger a 5xx\r\n        if (typeof response.data !== \"object\") {\r\n          _this2.showBlockPreview(false);\r\n\r\n          _this2.placeholderText(_this2.messages.UNKNOWN_ERROR);\r\n\r\n          return;\r\n        } // Update the stage content type label with the real block title if provided\r\n\r\n\r\n        _this2.displayLabel(response.data[labelKey] ? response.data[labelKey] : _this2.config.label);\r\n\r\n        var content = \"\";\r\n\r\n        if (response.data.content) {\r\n          content = _this2.processContent(response.data.content);\r\n\r\n          _this2.data.main.html(content);\r\n\r\n          _this2.showBlockPreview(true);\r\n\r\n          _this2.initializeWidgets(_this2.element);\r\n        } else if (response.data.error) {\r\n          _this2.showBlockPreview(false);\r\n\r\n          _this2.placeholderText(response.data.error);\r\n        }\r\n\r\n        _this2.lastBlockId = parseInt(identifier.toString(), 10);\r\n        _this2.lastTemplate = data.template.toString();\r\n        _this2.lastRenderedHtml = content;\r\n      }).fail(function () {\r\n        _this2.showBlockPreview(false);\r\n\r\n        _this2.placeholderText(_this2.messages.UNKNOWN_ERROR);\r\n      }).always(function () {\r\n        _this2.loading(false);\r\n      });\r\n    }\r\n    /**\r\n     * Toggle display of block preview.  If showing block preview, add hidden mode to PB preview.\r\n     * @param {boolean} isShow\r\n     */\r\n    ;\r\n\r\n    _proto.showBlockPreview = function showBlockPreview(isShow) {\r\n      this.displayingBlockPreview(isShow);\r\n    }\r\n    /**\r\n     * Adapt content to view it on stage.\r\n     *\r\n     * @param content\r\n     */\r\n    ;\r\n\r\n    _proto.processContent = function processContent(content) {\r\n      var processedContent = this.processBackgroundImages(content);\r\n      processedContent = this.processBreakpointStyles(processedContent);\r\n      return processedContent;\r\n    }\r\n    /**\r\n     * Generate styles for background images.\r\n     *\r\n     * @param {string} content\r\n     * @return string\r\n     */\r\n    ;\r\n\r\n    _proto.processBackgroundImages = function processBackgroundImages(content) {\r\n      var document = new DOMParser().parseFromString(content, \"text/html\");\r\n      var elements = document.querySelectorAll(\"[data-background-images]\");\r\n      var styleBlock = document.createElement(\"style\");\r\n\r\n      var viewports = _config.getConfig(\"viewports\");\r\n\r\n      elements.forEach(function (element) {\r\n        var rawAttrValue = element.getAttribute(\"data-background-images\").replace(/\\\\(.)/mg, \"$1\");\r\n        var attrValue = JSON.parse(rawAttrValue);\r\n\r\n        var elementClass = \"background-image-\" + _mageUtils.uniqueid(13);\r\n\r\n        var rules = \"\";\r\n        Object.keys(attrValue).forEach(function (imageName) {\r\n          var imageUrl = attrValue[imageName];\r\n          var viewportName = imageName.replace(\"_image\", \"\");\r\n\r\n          if (viewports[viewportName].stage && imageUrl) {\r\n            rules += \".\" + viewportName + \"-viewport .\" + elementClass + \" {\\n                            background-image: url(\\\"\" + imageUrl + \"\\\");\\n                        }\";\r\n          }\r\n        });\r\n\r\n        if (rules.length) {\r\n          styleBlock.append(rules);\r\n          element.classList.add(elementClass);\r\n        }\r\n      });\r\n\r\n      if (elements.length && styleBlock.innerText.length) {\r\n        document.body.append(styleBlock);\r\n        content = document.head.innerHTML + document.body.innerHTML;\r\n      }\r\n\r\n      return content;\r\n    }\r\n    /**\r\n     * Replace media queries with viewport classes.\r\n     *\r\n     * @param {string} content\r\n     * @return string\r\n     */\r\n    ;\r\n\r\n    _proto.processBreakpointStyles = function processBreakpointStyles(content) {\r\n      var document = new DOMParser().parseFromString(content, \"text/html\");\r\n      var styleBlocks = document.querySelectorAll(\"style\");\r\n      var mediaStyleBlock = document.createElement(\"style\");\r\n\r\n      var viewports = _config.getConfig(\"viewports\");\r\n\r\n      styleBlocks.forEach(function (styleBlock) {\r\n        var cssRules = styleBlock.sheet.cssRules;\r\n        Array.from(cssRules).forEach(function (rule) {\r\n          var mediaScope = rule instanceof CSSMediaRule && _underscore.findKey(viewports, function (viewport) {\r\n            return rule.conditionText === viewport.media;\r\n          });\r\n\r\n          if (mediaScope) {\r\n            Array.from(rule.cssRules).forEach(function (mediaRule, index) {\r\n              if (mediaRule.selectorText.indexOf(_styleRegistry.pbStyleAttribute) !== -1) {\r\n                var searchPattern = new RegExp(_config.getConfig(\"bodyId\") + \" \", \"g\");\r\n                var replaceValue = _config.getConfig(\"bodyId\") + \" .\" + mediaScope + \"-viewport \";\r\n                var selector = mediaRule.selectorText.replace(searchPattern, replaceValue);\r\n                mediaStyleBlock.append(selector + \" {\" + mediaRule.style.cssText + \"}\");\r\n              }\r\n            });\r\n          }\r\n        });\r\n      });\r\n\r\n      if (mediaStyleBlock.innerText.length) {\r\n        document.body.append(mediaStyleBlock);\r\n        content = document.head.innerHTML + document.body.innerHTML;\r\n      }\r\n\r\n      return content;\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/block/mass-converter/widget-directive.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/mass-converter/widget-directive-abstract\", \"Magento_PageBuilder/js/utils/object\"], function (_widgetDirectiveAbstract, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Enables the settings of the content type to be stored as a widget directive.\r\n   *\r\n   * @api\r\n   */\r\n  var WidgetDirective = /*#__PURE__*/function (_widgetDirectiveAbstr) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(WidgetDirective, _widgetDirectiveAbstr);\r\n\r\n    function WidgetDirective() {\r\n      return _widgetDirectiveAbstr.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = WidgetDirective.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {object} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      var attributes = _widgetDirectiveAbstr.prototype.fromDom.call(this, data, config);\r\n\r\n      data.template = attributes.template;\r\n      data.block_id = attributes.block_id;\r\n      return data;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {object} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      var attributes = {\r\n        type: \"Magento\\\\Cms\\\\Block\\\\Widget\\\\Block\",\r\n        template: data.template,\r\n        block_id: data.block_id,\r\n        type_name: \"CMS Static Block\"\r\n      };\r\n\r\n      if (!attributes.block_id || !attributes.template) {\r\n        return data;\r\n      }\r\n\r\n      (0, _object.set)(data, config.html_variable, this.buildDirective(attributes));\r\n      return data;\r\n    };\r\n\r\n    return WidgetDirective;\r\n  }(_widgetDirectiveAbstract);\r\n\r\n  return WidgetDirective;\r\n});\r\n//# sourceMappingURL=widget-directive.js.map","Magento_PageBuilder/js/content-type/button-item/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/content-type-menu/conditional-remove-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jquery, _knockout, _translate, _conditionalRemoveOption, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      var _this;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      _this = _preview2.call.apply(_preview2, [this].concat(args)) || this;\r\n      _this.buttonPlaceholder = (0, _translate)(\"Edit Button Text\");\r\n      return _this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Use the conditional remove to disable the option when the parent has a single child\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      delete options.title;\r\n      delete options.move;\r\n      options.remove = new _conditionalRemoveOption(_extends({}, options.remove.config, {\r\n        preview: this\r\n      }));\r\n      return options;\r\n    }\r\n    /**\r\n     * Force the focus on the clicked button\r\n     *\r\n     * @param {number} index\r\n     * @param {JQueryEventObject} event\r\n     */\r\n    ;\r\n\r\n    _proto.onClick = function onClick(index, event) {\r\n      (0, _jquery)(event.currentTarget).find(\"[contenteditable]\").focus();\r\n      event.stopPropagation();\r\n    }\r\n    /**\r\n     * Handle on focus out events, when the button item is focused out we need to set our focusedButton record on the\r\n     * buttons preview item to null. If we detect this focus out event is to focus into another button we need to ensure\r\n     * we update the record appropriately.\r\n     *\r\n     * @param {number} index\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusOut = function onFocusOut(index, event) {\r\n      if (this.contentType && this.contentType.parentContentType) {\r\n        var parentPreview = this.contentType.parentContentType.preview;\r\n\r\n        var unfocus = function unfocus() {\r\n          window.getSelection().removeAllRanges();\r\n          parentPreview.focusedButton(null);\r\n        };\r\n\r\n        if (event.relatedTarget && _jquery.contains(parentPreview.wrapperElement, event.relatedTarget)) {\r\n          // Verify the focus was not onto the options menu\r\n          if ((0, _jquery)(event.relatedTarget).closest(\".pagebuilder-options\").length > 0) {\r\n            unfocus();\r\n          } else {\r\n            // Have we moved the focus onto another button in the current group?\r\n            var buttonItem = _knockout.dataFor(event.relatedTarget);\r\n\r\n            if (buttonItem && buttonItem.contentType && buttonItem.contentType.parentContentType && buttonItem.contentType.parentContentType.id === this.contentType.parentContentType.id) {\r\n              var newIndex = buttonItem.contentType.parentContentType.children().indexOf(buttonItem.contentType);\r\n              parentPreview.focusedButton(newIndex);\r\n            } else {\r\n              unfocus();\r\n            }\r\n          }\r\n        } else if (parentPreview.focusedButton() === index) {\r\n          unfocus();\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * On focus in set the focused button\r\n     *\r\n     * @param {number} index\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusIn = function onFocusIn(index, event) {\r\n      var parentPreview = this.contentType.parentContentType.preview;\r\n\r\n      if (parentPreview.focusedButton() !== index) {\r\n        parentPreview.focusedButton(index);\r\n      }\r\n    }\r\n    /**\r\n     * If the button is displayed we need to show the options menu on hover\r\n     *\r\n     * @param {Preview} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onButtonMouseOver = function onButtonMouseOver(context, event) {\r\n      if (this.display() === false) {\r\n        this.onMouseOver(context, event);\r\n      }\r\n    }\r\n    /**\r\n     * If the button is displayed we need to hide the options menu on mouse out\r\n     *\r\n     * @param {Preview} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onButtonMouseOut = function onButtonMouseOut(context, event) {\r\n      if (this.display() === false) {\r\n        this.onMouseOut(context, event);\r\n      }\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/button-item/converter/style/display.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Display = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Display() {}\r\n\r\n    var _proto = Display.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return !(value === \"none\");\r\n    }\r\n    /**\r\n     * Convert value to knockout format, if buttons are displayed they should be inline block\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (!_underscore.isUndefined(value) && value === false) {\r\n        return \"none\";\r\n      }\r\n\r\n      return \"inline-block\";\r\n    };\r\n\r\n    return Display;\r\n  }();\r\n\r\n  return Display;\r\n});\r\n//# sourceMappingURL=display.js.map","Magento_PageBuilder/js/content-type/buttons/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type-menu/option\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jquery, _knockout, _translate, _events, _underscore, _config, _contentTypeFactory, _hideShowOption, _option, _delayUntil, _previewCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     * @param {ContentTypeCollectionInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this; // Keeps track of number of button item to disable sortable if there is only 1.\r\n\r\n      _this.focusedButton = _knockout.observable();\r\n      _this.debouncedResizeHandler = _underscore.debounce(function () {\r\n        _this.resizeChildButtons();\r\n      }, 350);\r\n\r\n      _this.contentType.children.subscribe(function () {\r\n        var sortableElement = (0, _jquery)(_this.wrapperElement).find(\".buttons-container\");\r\n\r\n        if (!sortableElement.data(\"ui-sortable\")) {\r\n          return;\r\n        }\r\n\r\n        if (_this.contentType.children().length <= 1) {\r\n          sortableElement.sortable(\"disable\");\r\n        } else {\r\n          sortableElement.sortable(\"enable\");\r\n        }\r\n      }); // Monitor focus tab to start / stop interaction on the stage, debounce to avoid duplicate calls\r\n\r\n\r\n      _this.focusedButton.subscribe(_underscore.debounce(function (index) {\r\n        if (index !== null) {\r\n          _events.trigger(\"stage:interactionStart\");\r\n\r\n          var focusedButton = _this.contentType.children()[index];\r\n\r\n          (0, _delayUntil)(function () {\r\n            return (0, _jquery)(focusedButton.preview.wrapperElement).find(\"[contenteditable]\").focus();\r\n          }, function () {\r\n            return typeof focusedButton.preview.wrapperElement !== \"undefined\";\r\n          }, 10);\r\n        } else {\r\n          // We have to force the stop as the event firing is inconsistent for certain operations\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            force: true\r\n          });\r\n        }\r\n      }, 1));\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      _previewCollection2.prototype.bindEvents.call(this);\r\n\r\n      _events.on(\"buttons:dropAfter\", function (args) {\r\n        if (args.id === _this2.contentType.id && _this2.contentType.children().length === 0) {\r\n          _this2.addButton();\r\n        }\r\n      });\r\n\r\n      _events.on(\"buttons:renderAfter\", function (args) {\r\n        if (args.contentType.id === _this2.contentType.id) {\r\n          _this2.debouncedResizeHandler();\r\n        }\r\n      });\r\n\r\n      _events.on(\"button-item:renderAfter\", function (args) {\r\n        if (args.contentType.parentContentType.id === _this2.contentType.id) {\r\n          _this2.debouncedResizeHandler();\r\n        }\r\n      });\r\n\r\n      _events.on(\"stage:updateAfter\", function () {\r\n        _this2.debouncedResizeHandler();\r\n      });\r\n\r\n      _events.on(\"contentType:redrawAfter\", function () {\r\n        _this2.debouncedResizeHandler();\r\n      }); // Capture when a content type is duplicated within the container\r\n\r\n\r\n      var duplicatedButton;\r\n      var duplicatedButtonIndex;\r\n\r\n      _events.on(\"button-item:duplicateAfter\", function (args) {\r\n        if (_this2.contentType.id === args.duplicateContentType.parentContentType.id && args.direct) {\r\n          duplicatedButton = args.duplicateContentType;\r\n          duplicatedButtonIndex = args.index;\r\n        }\r\n      });\r\n\r\n      _events.on(\"button-item:mountAfter\", function (args) {\r\n        if (duplicatedButton && args.id === duplicatedButton.id) {\r\n          _this2.focusedButton(duplicatedButtonIndex);\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      options.add = new _option({\r\n        preview: this,\r\n        icon: \"<i class='icon-pagebuilder-add'></i>\",\r\n        title: (0, _translate)(\"Add Button\"),\r\n        action: this.addButton,\r\n        classes: [\"add-child\"],\r\n        sort: 10\r\n      });\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Add button-item to buttons children array\r\n     */\r\n    ;\r\n\r\n    _proto.addButton = function addButton() {\r\n      var _this3 = this;\r\n\r\n      var createButtonItemPromise = (0, _contentTypeFactory)(_config.getContentTypeConfig(\"button-item\"), this.contentType, this.contentType.stageId, {});\r\n      createButtonItemPromise.then(function (button) {\r\n        _this3.contentType.addChild(button);\r\n\r\n        var buttonIndex = _this3.contentType.children().indexOf(button);\r\n\r\n        _this3.focusedButton(buttonIndex > -1 ? buttonIndex : null);\r\n\r\n        return button;\r\n      }).catch(function (error) {\r\n        console.error(error);\r\n      });\r\n    }\r\n    /**\r\n     * Get the sortable options for the buttons sorting\r\n     *\r\n     * @param {string} orientation\r\n     * @param {string} tolerance\r\n     * @returns {JQueryUI.Sortable}\r\n     */\r\n    ;\r\n\r\n    _proto.getSortableOptions = function getSortableOptions(orientation, tolerance) {\r\n      if (orientation === void 0) {\r\n        orientation = \"width\";\r\n      }\r\n\r\n      if (tolerance === void 0) {\r\n        tolerance = \"intersect\";\r\n      }\r\n\r\n      return {\r\n        handle: \".button-item-drag-handle\",\r\n        items: \".pagebuilder-content-type-wrapper\",\r\n        cursor: \"grabbing\",\r\n        containment: \"parent\",\r\n        tolerance: tolerance,\r\n        revert: 200,\r\n        disabled: this.contentType.children().length <= 1,\r\n\r\n        /**\r\n         * Provide custom helper element\r\n         *\r\n         * @param {Event} event\r\n         * @param {JQueryUI.Sortable} element\r\n         * @returns {Element}\r\n         */\r\n        helper: function helper(event, element) {\r\n          var helper = (0, _jquery)(element).clone().css({\r\n            opacity: \"0.7\",\r\n            width: \"auto\"\r\n          });\r\n          helper[0].querySelector(\".pagebuilder-options\").remove();\r\n          return helper[0];\r\n        },\r\n        placeholder: {\r\n          /**\r\n           * Provide custom placeholder element\r\n           *\r\n           * @param {JQuery} item\r\n           * @returns {JQuery}\r\n           */\r\n          element: function element(item) {\r\n            var placeholder = item.clone().css({\r\n              display: \"inline-block\",\r\n              opacity: \"0.3\"\r\n            }).removeClass(\"focused\").addClass(\"sortable-placeholder\");\r\n            placeholder[0].querySelector(\".pagebuilder-options\").remove();\r\n            return placeholder[0];\r\n          },\r\n          update: function update() {\r\n            return;\r\n          }\r\n        },\r\n\r\n        /**\r\n         * Trigger interaction start on sort\r\n         */\r\n        start: function start() {\r\n          _events.trigger(\"stage:interactionStart\");\r\n        },\r\n\r\n        /**\r\n         * Stop stage interaction on stop\r\n         */\r\n        stop: function stop() {\r\n          _events.trigger(\"stage:interactionStop\");\r\n        }\r\n      };\r\n    }\r\n    /**\r\n     * Resize width of all child buttons. Dependently make them the same width if configured.\r\n     */\r\n    ;\r\n\r\n    _proto.resizeChildButtons = function resizeChildButtons() {\r\n      if (this.wrapperElement) {\r\n        var buttonItems = (0, _jquery)(this.wrapperElement).find(\".pagebuilder-button-item > a\");\r\n        var buttonResizeValue = 0;\r\n\r\n        if (this.contentType.dataStore.get(\"is_same_width\") === \"true\") {\r\n          if (buttonItems.length > 0) {\r\n            var currentLargestButtonWidth = this.findLargestButtonWidth(buttonItems);\r\n            var parentWrapperWidth = (0, _jquery)(this.wrapperElement).find(\".buttons-container\").width();\r\n\r\n            if (currentLargestButtonWidth === 0) {\r\n              return;\r\n            }\r\n\r\n            buttonResizeValue = Math.min(currentLargestButtonWidth, parentWrapperWidth);\r\n          }\r\n        }\r\n\r\n        buttonItems.css(\"min-width\", buttonResizeValue);\r\n      }\r\n    }\r\n    /**\r\n     * Find the largest button width for calculating same size value.\r\n     *\r\n     * @param {JQuery} buttonItems\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.findLargestButtonWidth = function findLargestButtonWidth(buttonItems) {\r\n      var _this4 = this;\r\n\r\n      return _underscore.max(_underscore.map(buttonItems, function (buttonItem) {\r\n        return _this4.calculateButtonWidth((0, _jquery)(buttonItem));\r\n      }));\r\n    }\r\n    /**\r\n     * Manually calculate button width using content plus box widths (padding, border)\r\n     *\r\n     * @param {JQuery} buttonItem\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.calculateButtonWidth = function calculateButtonWidth(buttonItem) {\r\n      if (buttonItem.is(\":visible\") === false) {\r\n        return 0;\r\n      }\r\n\r\n      var widthProperties = [\"paddingLeft\", \"paddingRight\", \"borderLeftWidth\", \"borderRightWidth\"];\r\n      var buttonText = buttonItem.find(\"[data-element='link_text']\");\r\n      var textWidth = buttonText.css(\"display\", \"inline-block\").width();\r\n      buttonText.css(\"display\", \"\");\r\n      return widthProperties.reduce(function (accumulatedWidth, widthProperty) {\r\n        return accumulatedWidth + (parseInt(buttonItem.css(widthProperty), 10) || 0);\r\n      }, textWidth);\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/buttons/appearance/inline/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Equalize the width of a list of button-item components\r\n     *\r\n     * @param {JQuery} buttonList\r\n     */\r\n    var equalizeButtonWidth = function (buttonList) {\r\n        var buttonMinWidth = 0;\r\n\r\n        buttonList.css('min-width', buttonMinWidth);\r\n        buttonList.each(function () {\r\n            var buttonWidth = this.offsetWidth;\r\n\r\n            if (buttonWidth > buttonMinWidth) {\r\n                buttonMinWidth = buttonWidth;\r\n            }\r\n        });\r\n        buttonList.css('min-width', buttonMinWidth);\r\n    };\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            buttonSelector = '[data-element=\"link\"], [data-element=\"empty_link\"]';\r\n\r\n        if ($element.data('sameWidth')) {\r\n            equalizeButtonWidth($element.find(buttonSelector));\r\n            $(window).on('resize', function () {\r\n                equalizeButtonWidth($element.find(buttonSelector));\r\n            });\r\n            events.on('contentType:redrawAfter', function (eventData) {\r\n                if ($element.closest(eventData.element).length > 0) {\r\n                    equalizeButtonWidth($element.find(buttonSelector));\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/buttons/converter/style/display/boolean.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Boolean = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Boolean() {}\r\n\r\n    var _proto = Boolean.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return !(value === \"none\");\r\n    }\r\n    /**\r\n     * Convert value to knockout format, if buttons are displayed they should be reset to default\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (!_underscore.isUndefined(value) && value === false) {\r\n        return \"none\";\r\n      }\r\n\r\n      return \"\";\r\n    };\r\n\r\n    return Boolean;\r\n  }();\r\n\r\n  return Boolean;\r\n});\r\n//# sourceMappingURL=boolean.js.map","Magento_PageBuilder/js/content-type/buttons/converter/style/display/flex.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Flex = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Flex() {}\r\n\r\n    var _proto = Flex.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return !(value === \"none\");\r\n    }\r\n    /**\r\n     * Convert value to knockout format, if buttons are displayed they should be inline block\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (!_underscore.isUndefined(value) && value === false) {\r\n        return \"none\";\r\n      }\r\n\r\n      return \"flex\";\r\n    };\r\n\r\n    return Flex;\r\n  }();\r\n\r\n  return Flex;\r\n});\r\n//# sourceMappingURL=flex.js.map","Magento_PageBuilder/js/content-type/buttons/converter/style/preview/display/flex.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Display = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Display() {}\r\n\r\n    var _proto = Display.prototype;\r\n\r\n    /**\r\n     * Ensure the display none property doesn't persist to the preview\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return;\r\n    }\r\n    /**\r\n     * Ensure the display none property doesn't persist to the preview\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return \"flex\";\r\n    };\r\n\r\n    return Display;\r\n  }();\r\n\r\n  return Display;\r\n});\r\n//# sourceMappingURL=flex.js.map","Magento_PageBuilder/js/content-type/column/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"Magento_Ui/js/modal/alert\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type-menu/option\", \"Magento_PageBuilder/js/content-type/column-group/grid-size\", \"Magento_PageBuilder/js/content-type/column-line/preview\", \"Magento_PageBuilder/js/content-type/preview-collection\", \"Magento_PageBuilder/js/content-type/column/resize\"], function (_jquery, _knockout, _translate, _events, _alert, _config, _contentTypeFactory, _option, _gridSize, _preview, _previewCollection, _resize) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     * Fields that should not be considered when evaluating whether an object has been configured.\r\n     *\r\n     * @see {Preview.isConfigured}\r\n     * @type {[string]}\r\n     */\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this; // Update the width label for the column\r\n\r\n      _this.resizing = _knockout.observable(false);\r\n      _this.fieldsToIgnoreOnRemove = [\"width\"];\r\n\r\n      _this.contentType.dataStore.subscribe(_this.updateColumnWidthClass.bind(_assertThisInitialized(_this)), \"width\");\r\n\r\n      _this.contentType.dataStore.subscribe(_this.updateDisplayLabel.bind(_assertThisInitialized(_this)), \"width\");\r\n\r\n      _this.contentType.dataStore.subscribe(_this.triggerChildren.bind(_assertThisInitialized(_this)), \"width\");\r\n\r\n      _this.contentType.parentContentType.dataStore.subscribe(_this.updateDisplayLabel.bind(_assertThisInitialized(_this)), \"grid_size\"); // Update the column number for the column\r\n\r\n\r\n      _this.contentType.parentContentType.children.subscribe(_this.updateDisplayLabel.bind(_assertThisInitialized(_this)));\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Get background image url base on the viewport.\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.getBackgroundImage = function getBackgroundImage() {\r\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\r\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\r\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\r\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      _previewCollection2.prototype.bindEvents.call(this);\r\n\r\n      _events.on(\"column:moveAfter\", function (args) {\r\n        if (args.contentType.id === _this2.contentType.id) {\r\n          _this2.updateDisplayLabel();\r\n        }\r\n\r\n        _this2.resetRemoveOnLastColumn(args.targetParent);\r\n\r\n        _this2.resetRemoveOnLastColumn(args.sourceParent);\r\n      });\r\n\r\n      _events.on(\"column:initializeAfter\", function (args) {\r\n        _this2.resetRemoveOnLastColumn(args.columnLine);\r\n      });\r\n\r\n      _events.on(\"column:dropAfter\", function (args) {\r\n        _this2.resetRemoveOnLastColumn(_this2.contentType.parentContentType);\r\n      });\r\n\r\n      _events.on(\"column:duplicateAfter\", function (args) {\r\n        _this2.resetRemoveOnLastColumn(args.duplicateContentType.parentContentType);\r\n      });\r\n\r\n      _events.on(\"column:removeAfter\", function (args) {\r\n        if (args.contentType.id === _this2.contentType.id) {\r\n          _this2.resetRemoveOnLastColumn(args.parentContentType);\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Make a reference to the element in the column\r\n     *\r\n     * @param element\r\n     */\r\n    ;\r\n\r\n    _proto.initColumn = function initColumn(element) {\r\n      this.element = (0, _jquery)(element);\r\n      this.updateColumnWidthClass();\r\n\r\n      _events.trigger(\"column:initializeAfter\", {\r\n        column: this.contentType,\r\n        element: (0, _jquery)(element),\r\n        columnLine: this.contentType.parentContentType,\r\n        columnGroup: this.contentType.parentContentType.parentContentType\r\n      });\r\n\r\n      this.updateDisplayLabel();\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      options.move = new _option({\r\n        preview: this,\r\n        icon: \"<i class='icon-admin-pagebuilder-handle'></i>\",\r\n        title: (0, _translate)(\"Move\"),\r\n        classes: [\"move-column\"],\r\n        sort: 10\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Init the resize handle for the resizing functionality\r\n     *\r\n     * @param handle\r\n     */\r\n    ;\r\n\r\n    _proto.bindResizeHandle = function bindResizeHandle(handle) {\r\n      _events.trigger(\"column:resizeHandleBindAfter\", {\r\n        column: this.contentType,\r\n        handle: (0, _jquery)(handle),\r\n        columnLine: this.contentType.parentContentType\r\n      });\r\n    }\r\n    /**\r\n     * Wrap the current column in a group if it not in a column-group\r\n     *\r\n     * @returns {Promise<ContentTypeCollectionInterface>}\r\n     */\r\n    ;\r\n\r\n    _proto.createColumnGroup = function createColumnGroup() {\r\n      var _this3 = this;\r\n\r\n      if (this.contentType.parentContentType.config.name !== \"column-group\") {\r\n        var index = this.contentType.parentContentType.children().indexOf(this.contentType); // Remove child instantly to stop content jumping around\r\n\r\n        this.contentType.parentContentType.removeChild(this.contentType); // Create a new instance of column group to wrap our columns with\r\n\r\n        var defaultGridSize = (0, _gridSize.getDefaultGridSize)();\r\n        return (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column-group\"), this.contentType.parentContentType, this.contentType.stageId, {\r\n          grid_size: defaultGridSize\r\n        }).then(function (columnGroup) {\r\n          var col1Width = (Math.ceil(defaultGridSize / 2) * 100 / defaultGridSize).toFixed(Math.round(100 / defaultGridSize) !== 100 / defaultGridSize ? 8 : 0);\r\n          return Promise.all([(0, _contentTypeFactory)(_this3.contentType.config, columnGroup, columnGroup.stageId, {\r\n            width: col1Width + \"%\"\r\n          }), (0, _contentTypeFactory)(_this3.contentType.config, columnGroup, columnGroup.stageId, {\r\n            width: 100 - parseFloat(col1Width) + \"%\"\r\n          })]).then(function (columns) {\r\n            columnGroup.addChild(columns[0], 0);\r\n            columnGroup.addChild(columns[1], 1);\r\n\r\n            _this3.contentType.parentContentType.addChild(columnGroup, index);\r\n\r\n            _this3.fireMountEvent(columnGroup, columns[0], columns[1]);\r\n\r\n            return columnGroup;\r\n          });\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * Duplicate a child of the current instance\r\n     *\r\n     * @param {ContentTypeCollectionInterface<Preview>} contentType\r\n     * @param {boolean} autoAppend\r\n     * @returns {Promise<ContentTypeCollectionInterface> | void}\r\n     */\r\n    ;\r\n\r\n    _proto.clone = function clone(contentType, autoAppend) {\r\n      if (autoAppend === void 0) {\r\n        autoAppend = true;\r\n      }\r\n\r\n      var resizeUtils = this.contentType.parentContentType.preview.getResizeUtils(); // Are we duplicating from a container content type?\r\n\r\n      if (contentType.config.name !== \"column\" || this.contentType.parentContentType.children().length === 0 || this.contentType.parentContentType.children().length > 0 && resizeUtils.getColumnsWidth() < 100) {\r\n        return _previewCollection2.prototype.clone.call(this, contentType, autoAppend);\r\n      }\r\n\r\n      var biggestShrinkableColumn = resizeUtils.findBiggerShrinkableColumn(contentType);\r\n\r\n      if (biggestShrinkableColumn) {\r\n        var shrinkableClone = _previewCollection2.prototype.clone.call(this, contentType, autoAppend);\r\n\r\n        if (shrinkableClone) {\r\n          var newShrinkableColumnWidth = resizeUtils.getColumnWidth(biggestShrinkableColumn) - resizeUtils.getColumnWidth(contentType);\r\n          var duplicateColumnWidth = resizeUtils.getColumnWidth(contentType);\r\n          shrinkableClone.then(function (duplicateContentType) {\r\n            (0, _resize.updateColumnWidth)(biggestShrinkableColumn, resizeUtils.getAcceptedColumnWidth(newShrinkableColumnWidth.toString()));\r\n            (0, _resize.updateColumnWidth)(duplicateContentType, duplicateColumnWidth);\r\n            return duplicateContentType;\r\n          });\r\n        }\r\n\r\n        return;\r\n      } // Attempt to split the current column into parts\r\n\r\n\r\n      var splitTimes = Math.round(resizeUtils.getColumnWidth(contentType) / resizeUtils.getSmallestColumnWidth());\r\n\r\n      if (splitTimes > 1) {\r\n        var splitClone = _previewCollection2.prototype.clone.call(this, contentType, autoAppend);\r\n\r\n        if (splitClone) {\r\n          splitClone.then(function (duplicateContentType) {\r\n            /**\r\n             * Distribute the width across the original & duplicated columns, if the we have an odd number of\r\n             * split times apply it to the original.\r\n             */\r\n            var originalWidth = (Math.floor(splitTimes / 2) + splitTimes % 2) * resizeUtils.getSmallestColumnWidth();\r\n            var duplicateWidth = Math.floor(splitTimes / 2) * resizeUtils.getSmallestColumnWidth();\r\n            (0, _resize.updateColumnWidth)(contentType, resizeUtils.getAcceptedColumnWidth(originalWidth.toString()));\r\n            (0, _resize.updateColumnWidth)(duplicateContentType, resizeUtils.getAcceptedColumnWidth(duplicateWidth.toString()));\r\n            return duplicateContentType;\r\n          });\r\n        }\r\n      } else {\r\n        // Conduct an outward search on the children to locate a suitable shrinkable column\r\n        var shrinkableColumn = resizeUtils.findShrinkableColumn(contentType);\r\n\r\n        if (shrinkableColumn) {\r\n          var _shrinkableClone = _previewCollection2.prototype.clone.call(this, contentType, autoAppend);\r\n\r\n          if (_shrinkableClone) {\r\n            _shrinkableClone.then(function (duplicateContentType) {\r\n              (0, _resize.updateColumnWidth)(shrinkableColumn, resizeUtils.getAcceptedColumnWidth((resizeUtils.getColumnWidth(shrinkableColumn) - resizeUtils.getSmallestColumnWidth()).toString()));\r\n              (0, _resize.updateColumnWidth)(duplicateContentType, resizeUtils.getSmallestColumnWidth());\r\n              return duplicateContentType;\r\n            });\r\n          }\r\n        } else {\r\n          // If we aren't able to duplicate inform the user why\r\n          (0, _alert)({\r\n            content: (0, _translate)(\"There is no free space within the column group to perform this action.\"),\r\n            title: (0, _translate)(\"Unable to duplicate column\")\r\n          });\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Update the display label for the column\r\n     */\r\n    ;\r\n\r\n    _proto.updateDisplayLabel = function updateDisplayLabel() {\r\n      if (this.contentType.parentContentType.preview instanceof _preview) {\r\n        var newWidth = parseFloat(this.contentType.dataStore.get(\"width\").toString());\r\n        var grandParent = this.contentType.parentContentType.parentContentType;\r\n        var columnGroupPreview = grandParent.preview;\r\n        var gridSize = columnGroupPreview.gridSize();\r\n        var newLabel = Math.round(newWidth / (100 / gridSize)) + \"/\" + gridSize;\r\n        var columnIndex = this.contentType.parentContentType.children().indexOf(this.contentType);\r\n        var columnNumber = columnIndex !== -1 ? columnIndex + 1 + \" \" : \"\";\r\n        this.displayLabel((0, _translate)(\"Column\") + \" \" + columnNumber + \"(\" + newLabel + \")\");\r\n      }\r\n    }\r\n    /**\r\n     * Reset remove option on all columns within a column-group depending on the number of remaining child columns\r\n     * @param parentContentType\r\n     */\r\n    ;\r\n\r\n    _proto.resetRemoveOnLastColumn = function resetRemoveOnLastColumn(parentContentType) {\r\n      if (!parentContentType) {\r\n        // can happen if the column is moved within the same column group\r\n        return;\r\n      }\r\n\r\n      if (parentContentType.config.name !== \"column-line\") {\r\n        // for legacy content in preview mode before stage is initialized, the parent may not be a column line\r\n        return;\r\n      }\r\n\r\n      var siblings = parentContentType.children();\r\n      var siblingColumnLines = parentContentType.parentContentType.children();\r\n      var totalColumnCount = 0;\r\n      siblingColumnLines.forEach(function (columnLine) {\r\n        var columns = columnLine.children();\r\n        columns.forEach(function (column) {\r\n          totalColumnCount++;\r\n        });\r\n      });\r\n      var isRemoveDisabled = totalColumnCount <= 1;\r\n      siblingColumnLines.forEach(function (columnLine) {\r\n        var columns = columnLine.children();\r\n        columns.forEach(function (column) {\r\n          var removeOption = column.preview.getOptions().getOption(\"remove\");\r\n          removeOption.isDisabled(isRemoveDisabled);\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Syncs the column-width-* class on the children-wrapper with the current width to the nearest tenth rounded up\r\n     */\r\n    ;\r\n\r\n    _proto.updateColumnWidthClass = function updateColumnWidthClass() {\r\n      // Only update once instantiated\r\n      if (!this.element) {\r\n        return;\r\n      }\r\n\r\n      var currentClass = this.element.attr(\"class\").match(/(?:^|\\s)(column-width-\\d{1,3})(?:$|\\s)/);\r\n\r\n      if (currentClass !== null) {\r\n        this.element.removeClass(currentClass[1]);\r\n      }\r\n\r\n      var roundedWidth = Math.ceil(parseFloat(this.contentType.dataStore.get(\"width\").toString()) / 10) * 10;\r\n      this.element.addClass(\"column-width-\" + roundedWidth);\r\n    }\r\n    /**\r\n     * Return selected element styles\r\n     *\r\n     * @param element\r\n     * @param styleProperties\r\n     */\r\n    ;\r\n\r\n    _proto.getStyle = function getStyle(element, styleProperties) {\r\n      var stylesObject = element.style();\r\n      return styleProperties.reduce(function (obj, key) {\r\n        var _extends2;\r\n\r\n        return _extends({}, obj, (_extends2 = {}, _extends2[key] = stylesObject[key], _extends2));\r\n      }, {});\r\n    }\r\n    /**\r\n     * Return element styles without selected\r\n     *\r\n     * @param element\r\n     * @param styleProperties\r\n     */\r\n    ;\r\n\r\n    _proto.getStyleWithout = function getStyleWithout(element, styleProperties) {\r\n      var stylesObject = element.style();\r\n      return Object.keys(stylesObject).filter(function (key) {\r\n        return !styleProperties.includes(key);\r\n      }).reduce(function (obj, key) {\r\n        var _extends3;\r\n\r\n        return _extends({}, obj, (_extends3 = {}, _extends3[key] = stylesObject[key], _extends3));\r\n      }, {});\r\n    }\r\n    /**\r\n     * Fire the mount event for content types\r\n     *\r\n     * @param {ContentTypeInterface[]} contentTypes\r\n     */\r\n    ;\r\n\r\n    _proto.fireMountEvent = function fireMountEvent() {\r\n      for (var _len = arguments.length, contentTypes = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        contentTypes[_key] = arguments[_key];\r\n      }\r\n\r\n      contentTypes.forEach(function (contentType) {\r\n        _events.trigger(\"contentType:mountAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n\r\n        _events.trigger(contentType.config.name + \":mountAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Delegate trigger call on children elements.\r\n     */\r\n    ;\r\n\r\n    _proto.triggerChildren = function triggerChildren() {\r\n      if (this.contentType.parentContentType.preview instanceof _preview) {\r\n        var newWidth = parseFloat(this.contentType.dataStore.get(\"width\").toString());\r\n        this.delegate(\"trigger\", \"columnWidthChangeAfter\", {\r\n          width: newWidth\r\n        });\r\n      }\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/column/resize.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/array\"], function (_array) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Resize = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Resize(columnGroup, columnLine) {\r\n      this.columnGroup = columnGroup;\r\n      this.columnLine = columnLine;\r\n    }\r\n    /**\r\n     * Get the grid size for this columnGroup\r\n     *\r\n     * @returns {number}\r\n     */\r\n\r\n\r\n    var _proto = Resize.prototype;\r\n\r\n    _proto.getGridSize = function getGridSize() {\r\n      return parseInt(this.columnGroup.dataStore.get(\"grid_size\").toString(), 10);\r\n    }\r\n    /**\r\n     * Get the initial grid size for this columnGroup before it was updated\r\n     *\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.getInitialGridSize = function getInitialGridSize() {\r\n      return parseInt(this.columnGroup.dataStore.get(\"initial_grid_size\", 0).toString(), 10);\r\n    }\r\n    /**\r\n     * Get the smallest column width possible\r\n     *\r\n     * @param {number} gridSize\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.getSmallestColumnWidth = function getSmallestColumnWidth(gridSize) {\r\n      gridSize = gridSize || this.getInitialGridSize() || this.getGridSize();\r\n      return this.getAcceptedColumnWidth(parseFloat((100 / gridSize).toString()).toFixed(Math.round(100 / gridSize) !== 100 / gridSize ? 8 : 0));\r\n    }\r\n    /**\r\n     * Get an accepted column width to resolve rounding issues, e.g. turn 49.995% into 50%\r\n     *\r\n     * @param {string} width\r\n     * @param {number} gridSize\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.getAcceptedColumnWidth = function getAcceptedColumnWidth(width, gridSize) {\r\n      gridSize = gridSize || this.getInitialGridSize() || this.getGridSize();\r\n      var newWidth = 0;\r\n\r\n      for (var i = gridSize; i > 0; i--) {\r\n        var percentage = parseFloat((100 / gridSize * i).toFixed(Math.round(100 / gridSize * i) !== 100 / gridSize * i ? 8 : 0)); // Allow for rounding issues\r\n\r\n        if (parseFloat(width) > percentage - 0.1 && parseFloat(width) < percentage + 0.1) {\r\n          newWidth = percentage;\r\n          break;\r\n        }\r\n      }\r\n\r\n      return newWidth;\r\n    }\r\n    /**\r\n     * Return the width of the column\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.getColumnWidth = function getColumnWidth(column) {\r\n      return this.getAcceptedColumnWidth(column.dataStore.get(\"width\").toString());\r\n    }\r\n    /**\r\n     * Get the total width of all columns in the column line\r\n     *\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.getColumnsWidth = function getColumnsWidth() {\r\n      var _this = this;\r\n\r\n      return this.getAcceptedColumnWidth(this.columnLine.children().map(function (column) {\r\n        return _this.getColumnWidth(column);\r\n      }).reduce(function (widthA, widthB) {\r\n        return widthA + (widthB ? widthB : 0);\r\n      }).toString());\r\n    }\r\n    /**\r\n     * Determine the pixel position of every column that can be created within the group\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {GroupPositionCache} groupPosition\r\n     * @returns {ColumnWidth[]}\r\n     */\r\n    ;\r\n\r\n    _proto.determineColumnWidths = function determineColumnWidths(column, groupPosition) {\r\n      var gridSize = this.getGridSize();\r\n      var singleColumnWidth = groupPosition.outerWidth / gridSize;\r\n      var adjacentColumn = getAdjacentColumn(column, \"+1\");\r\n      var columnWidths = [];\r\n      var columnLeft = column.preview.element.offset().left - parseInt(column.preview.element.css(\"margin-left\"), 10);\r\n      var adjacentRightPosition = adjacentColumn.preview.element.offset().left + adjacentColumn.preview.element.outerWidth(true); // Determine the maximum size (in pixels) that this column can be dragged to\r\n\r\n      var columnsToRight = column.parentContentType.children().length - (getColumnIndexInGroup(column) + 1);\r\n      var leftMaxWidthFromChildren = groupPosition.left + groupPosition.outerWidth - columnsToRight * singleColumnWidth + 10;\r\n      var rightMaxWidthFromChildren = groupPosition.left + (column.parentContentType.children().length - columnsToRight) * singleColumnWidth - 10; // Due to rounding we add a threshold of 10\r\n      // Iterate through the amount of columns generating the position for both left & right interactions\r\n\r\n      for (var i = gridSize; i > 0; i--) {\r\n        var position = Math.round(columnLeft + singleColumnWidth * i);\r\n\r\n        if (position > Math.round(leftMaxWidthFromChildren)) {\r\n          continue;\r\n        }\r\n\r\n        columnWidths.push({\r\n          forColumn: \"left\",\r\n          // These positions are for the left column in the pair\r\n          name: i + \"/\" + gridSize,\r\n          position: position,\r\n          width: getRoundedColumnWidth(100 / gridSize * i)\r\n        });\r\n      }\r\n\r\n      for (var _i = 1; _i < gridSize; _i++) {\r\n        var _position = Math.floor(adjacentRightPosition - _i * singleColumnWidth);\r\n\r\n        if (_position < Math.floor(rightMaxWidthFromChildren)) {\r\n          continue;\r\n        } // The right interaction is only used when we're crushing a column that isn't adjacent\r\n\r\n\r\n        columnWidths.push({\r\n          forColumn: \"right\",\r\n          // These positions are for the left column in the pair\r\n          name: _i + \"/\" + gridSize,\r\n          position: _position,\r\n          width: getRoundedColumnWidth(100 / gridSize * _i)\r\n        });\r\n      }\r\n\r\n      return columnWidths;\r\n    }\r\n    /**\r\n     * Find a column which can be shrunk for the current resize action\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {\"left\" | \"right\"} direction\r\n     * @returns {ContentTypeCollectionInterface<ColumnPreview>}\r\n     */\r\n    ;\r\n\r\n    _proto.findShrinkableColumnForResize = function findShrinkableColumnForResize(column, direction) {\r\n      var _this2 = this;\r\n\r\n      var currentIndex = getColumnIndexInGroup(column);\r\n      var columnItemsArray = column.parentContentType.children();\r\n      var searchArray;\r\n\r\n      switch (direction) {\r\n        case \"right\":\r\n          searchArray = columnItemsArray.slice(currentIndex + 1);\r\n          break;\r\n\r\n        case \"left\":\r\n          searchArray = columnItemsArray.slice(0).reverse().slice(columnItemsArray.length - currentIndex);\r\n          break;\r\n      }\r\n\r\n      return searchArray.find(function (groupColumn) {\r\n        return _this2.getColumnWidth(groupColumn) > _this2.getSmallestColumnWidth();\r\n      });\r\n    }\r\n    /**\r\n     * Find a shrinkable column outwards from the current column\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @returns {ContentTypeCollectionInterface<ColumnPreview>}\r\n     */\r\n    ;\r\n\r\n    _proto.findShrinkableColumn = function findShrinkableColumn(column) {\r\n      var _this3 = this;\r\n\r\n      return (0, _array.outwardSearch)(column.parentContentType.children(), getColumnIndexInGroup(column), function (neighbourColumn) {\r\n        return _this3.getColumnWidth(neighbourColumn) > _this3.getSmallestColumnWidth();\r\n      });\r\n    }\r\n    /**\r\n     * Find a shrinkable column of a greater size outwards from the current column\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @returns {ContentTypeCollectionInterface<ColumnPreview>}\r\n     */\r\n    ;\r\n\r\n    _proto.findBiggerShrinkableColumn = function findBiggerShrinkableColumn(column) {\r\n      var _this4 = this;\r\n\r\n      return (0, _array.outwardSearch)(column.parentContentType.children(), getColumnIndexInGroup(column), function (neighbourColumn) {\r\n        return _this4.getColumnWidth(neighbourColumn) > _this4.getColumnWidth(column);\r\n      });\r\n    }\r\n    /**\r\n     * Calculate the ghost size for the resizing action\r\n     *\r\n     * @param {GroupPositionCache} groupPosition\r\n     * @param {number} currentPos\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {string} modifyColumnInPair\r\n     * @param {MaxGhostWidth} maxGhostWidth\r\n     * @returns {number}\r\n     */\r\n    ;\r\n\r\n    _proto.calculateGhostWidth = function calculateGhostWidth(groupPosition, currentPos, column, modifyColumnInPair, maxGhostWidth) {\r\n      var ghostWidth = currentPos - groupPosition.left;\r\n\r\n      switch (modifyColumnInPair) {\r\n        case \"left\":\r\n          var singleColumnWidth = column.preview.element.position().left + groupPosition.outerWidth / this.getGridSize(); // Don't allow the ghost widths be less than the smallest column\r\n\r\n          if (ghostWidth <= singleColumnWidth) {\r\n            ghostWidth = singleColumnWidth;\r\n          }\r\n\r\n          if (currentPos >= maxGhostWidth.left) {\r\n            ghostWidth = maxGhostWidth.left - groupPosition.left;\r\n          }\r\n\r\n          break;\r\n\r\n        case \"right\":\r\n          if (currentPos <= maxGhostWidth.right) {\r\n            ghostWidth = maxGhostWidth.right - groupPosition.left;\r\n          }\r\n\r\n          break;\r\n      }\r\n\r\n      return ghostWidth;\r\n    }\r\n    /**\r\n     * Determine which column in the group should be adjusted for the current resize action\r\n     *\r\n     * @param {number} currentPos\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {ResizeHistory} history\r\n     * @returns {[ContentTypeCollectionInterface<ColumnPreview>, string, string]}\r\n     */\r\n    ;\r\n\r\n    _proto.determineAdjustedColumn = function determineAdjustedColumn(currentPos, column, history) {\r\n      var modifyColumnInPair = \"left\";\r\n      var usedHistory;\r\n      var resizeColumnLeft = column.preview.element.offset().left - parseInt(column.preview.element.css(\"margin-left\"), 10);\r\n      var resizeColumnWidth = column.preview.element.outerWidth(true);\r\n      var resizeHandlePosition = resizeColumnLeft + resizeColumnWidth;\r\n      var adjustedColumn;\r\n\r\n      if (currentPos >= resizeHandlePosition) {\r\n        // Get the history for the opposite direction of resizing\r\n        if (history.left.length > 0) {\r\n          usedHistory = \"left\";\r\n          adjustedColumn = history.left.reverse()[0].adjustedColumn;\r\n          modifyColumnInPair = history.left.reverse()[0].modifyColumnInPair;\r\n        } else {\r\n          // If we're increasing the width of our column we need to locate a column that can shrink to the\r\n          // right\r\n          adjustedColumn = this.findShrinkableColumnForResize(column, \"right\");\r\n        }\r\n      } else {\r\n        if (this.getColumnWidth(column) <= this.getSmallestColumnWidth()) {\r\n          adjustedColumn = this.findShrinkableColumnForResize(column, \"left\");\r\n\r\n          if (adjustedColumn) {\r\n            modifyColumnInPair = \"right\";\r\n          }\r\n        } else if (history.right.length > 0) {\r\n          usedHistory = \"right\";\r\n          adjustedColumn = history.right.reverse()[0].adjustedColumn;\r\n          modifyColumnInPair = history.right.reverse()[0].modifyColumnInPair;\r\n        } else {\r\n          // If we're shrinking our column we can just increase the adjacent column\r\n          adjustedColumn = getAdjacentColumn(column, \"+1\");\r\n        }\r\n      }\r\n\r\n      return [adjustedColumn, modifyColumnInPair, usedHistory];\r\n    }\r\n    /**\r\n     * Resize a column to a specific width\r\n     *\r\n     * @param {ContentTypeCollectionInterface<Preview>} column\r\n     * @param {number} width\r\n     * @param {ContentTypeCollectionInterface<Preview>} shrinkableColumn\r\n     */\r\n    ;\r\n\r\n    _proto.resizeColumn = function resizeColumn(column, width, shrinkableColumn) {\r\n      var current = this.getColumnWidth(column);\r\n      var difference = (parseFloat(width.toString()) - current).toFixed(8); // Don't run the update if we've already modified the column\r\n\r\n      if (current === parseFloat(width.toString()) || parseFloat(width.toString()) < this.getSmallestColumnWidth()) {\r\n        return;\r\n      } // Also shrink the closest shrinkable column\r\n\r\n\r\n      var allowedToShrink = true;\r\n\r\n      if (difference && shrinkableColumn) {\r\n        var currentShrinkable = this.getColumnWidth(shrinkableColumn);\r\n        var shrinkableSize = this.getAcceptedColumnWidth((currentShrinkable + -difference).toString()); // Ensure the column we're crushing is not becoming the same size, and it's not less than the smallest width\r\n\r\n        if (currentShrinkable === parseFloat(shrinkableSize.toString()) || parseFloat(shrinkableSize.toString()) < this.getSmallestColumnWidth()) {\r\n          allowedToShrink = false;\r\n        } else {\r\n          // Ensure we're not creating more columns width than the grid can support\r\n          if (this.gridSupportsResize(column, width, shrinkableColumn, shrinkableSize)) {\r\n            updateColumnWidth(shrinkableColumn, shrinkableSize);\r\n          } else {\r\n            allowedToShrink = false;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (allowedToShrink) {\r\n        updateColumnWidth(column, width);\r\n      }\r\n    }\r\n    /**\r\n     * Determine if the grid supports the new proposed grid size\r\n     *\r\n     * @param {ContentTypeCollectionInterface<Preview>} column\r\n     * @param {number} newWidth\r\n     * @param {ContentTypeCollectionInterface<Preview>} shrinkableColumn\r\n     * @param {number} shrinkableColumnNewWidth\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.gridSupportsResize = function gridSupportsResize(column, newWidth, shrinkableColumn, shrinkableColumnNewWidth) {\r\n      var _this5 = this;\r\n\r\n      // Determine the total width of all other columns in the grid, excluding the ones we plan to resize\r\n      var otherColumnsWidth = column.parentContentType.getChildren()().filter(function (gridColumn) {\r\n        return gridColumn !== column && shrinkableColumn && gridColumn !== shrinkableColumn;\r\n      }).map(function (otherColumn) {\r\n        return _this5.getColumnWidth(otherColumn);\r\n      }).reduce(function (a, b) {\r\n        return a + b;\r\n      }, 0); // Determine if the new total grid size will be 100%, with 1 for margin of error with rounding\r\n\r\n      return comparator(otherColumnsWidth + newWidth + (shrinkableColumnNewWidth ? shrinkableColumnNewWidth : 0), 100, 0.1);\r\n    };\r\n\r\n    return Resize;\r\n  }();\r\n  /**\r\n   * Retrieve the index of the column within it's group\r\n   * @deprecated use getColumnIndexInLine\r\n   * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n   * @returns {number}\r\n   */\r\n\r\n\r\n  function getColumnIndexInGroup(column) {\r\n    return column.parentContentType.children().indexOf(column);\r\n  }\r\n  /**\r\n   * Retrieve the index of the column within it's column line\r\n   *\r\n   * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n   * @returns {number}\r\n   */\r\n\r\n\r\n  function getColumnIndexInLine(column) {\r\n    return column.parentContentType.children().indexOf(column);\r\n  }\r\n  /**\r\n   * Retrieve the adjacent column based on a direction of +1 or -1\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} column\r\n   * @param {\"+1\" | \"-1\"} direction\r\n   * @returns {ContentTypeCollectionInterface<Preview>}\r\n   */\r\n\r\n\r\n  function getAdjacentColumn(column, direction) {\r\n    var currentIndex = getColumnIndexInGroup(column);\r\n\r\n    if (typeof column.parentContentType.children()[currentIndex + parseInt(direction, 10)] !== \"undefined\") {\r\n      return column.parentContentType.children()[currentIndex + parseInt(direction, 10)];\r\n    }\r\n\r\n    return null;\r\n  }\r\n  /**\r\n   * Determine the max ghost width based on the calculated columns\r\n   *\r\n   * @param {ColumnWidth[]} columnWidths\r\n   * @returns {MaxGhostWidth}\r\n   */\r\n\r\n\r\n  function determineMaxGhostWidth(columnWidths) {\r\n    var leftColumns = columnWidths.filter(function (width) {\r\n      return width.forColumn === \"left\";\r\n    });\r\n    var rightColumns = columnWidths.filter(function (width) {\r\n      return width.forColumn === \"right\";\r\n    });\r\n    return {\r\n      left: leftColumns[0].position,\r\n      right: rightColumns[rightColumns.length - 1].position\r\n    };\r\n  }\r\n  /**\r\n   * Return the column width to 8 decimal places if it's not a whole number\r\n   *\r\n   * @param {number} width\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function getRoundedColumnWidth(width) {\r\n    return Number(width.toFixed(Math.round(width) !== width ? 8 : 0));\r\n  }\r\n  /**\r\n   * Compare if two numbers are within a certain threshold of each other\r\n   *\r\n   * comparator(10,11,2) => true\r\n   * comparator(1.1,1.11,0.5) => true\r\n   *\r\n   * @param {number} num1\r\n   * @param {number} num2\r\n   * @param {number} threshold\r\n   * @returns {boolean}\r\n   */\r\n\r\n\r\n  function comparator(num1, num2, threshold) {\r\n    return num1 > num2 - threshold / 2 && num1 < num2 + threshold / 2;\r\n  }\r\n  /**\r\n   * Update the width of a column\r\n   *\r\n   * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n   * @param {number} width\r\n   */\r\n\r\n\r\n  function updateColumnWidth(column, width) {\r\n    column.dataStore.set(\"width\", parseFloat(width.toString()) + \"%\");\r\n  }\r\n\r\n  return Object.assign(Resize, {\r\n    getColumnIndexInGroup: getColumnIndexInGroup,\r\n    getColumnIndexInLine: getColumnIndexInLine,\r\n    getAdjacentColumn: getAdjacentColumn,\r\n    determineMaxGhostWidth: determineMaxGhostWidth,\r\n    getRoundedColumnWidth: getRoundedColumnWidth,\r\n    comparator: comparator,\r\n    updateColumnWidth: updateColumnWidth\r\n  });\r\n});\r\n//# sourceMappingURL=resize.js.map","Magento_PageBuilder/js/content-type/column/converter/style/margins.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Margins = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Margins() {}\r\n\r\n    var _proto = Margins.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (undefined !== value.margin) {\r\n        return {\r\n          margin: {\r\n            top: value.margin.top.replace(\"px\", \"\"),\r\n            left: value.margin.left.replace(\"px\", \"\"),\r\n            right: value.margin.right.replace(\"px\", \"\"),\r\n            bottom: value.margin.bottom.replace(\"px\", \"\")\r\n          }\r\n        };\r\n      }\r\n\r\n      return {};\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.margin) {\r\n        result.marginLeft = value.margin.left ? value.margin.left + \"px\" : \"\";\r\n        result.marginTop = value.margin.top ? value.margin.top + \"px\" : \"\";\r\n        result.marginRight = (value.margin.right && parseInt(value.margin.right, 10) !== 0 ? value.margin.right : 1) + \"px\";\r\n        result.marginBottom = value.margin.bottom ? value.margin.bottom + \"px\" : \"\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Margins;\r\n  }();\r\n\r\n  return Margins;\r\n});\r\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/content-type/column-group/drag-and-drop.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Calculate the drop positions of a column group\r\n   *\r\n   * @param {ContentTypeCollectionInterface} group\r\n   * @returns {any[]}\r\n   */\r\n  function calculateDropPositions(group) {\r\n    var resizeUtils = group.preview.getResizeUtils();\r\n    var dropPositions = [];\r\n    group.children().forEach(function (column, index) {\r\n      var left = column.preview.element.position().left;\r\n      var width = column.preview.element.outerWidth(true);\r\n      var canShrink = resizeUtils.getAcceptedColumnWidth(resizeUtils.getColumnWidth(column).toString()) > resizeUtils.getSmallestColumnWidth();\r\n      dropPositions.push({\r\n        affectedColumn: column,\r\n        canShrink: canShrink,\r\n        insertIndex: index,\r\n        left: left,\r\n        placement: \"left\",\r\n        right: left + width / 2\r\n      }, {\r\n        affectedColumn: column,\r\n        canShrink: canShrink,\r\n        insertIndex: index + 1,\r\n        left: left + width / 2,\r\n        placement: \"right\",\r\n        right: left + width\r\n      });\r\n    });\r\n    return dropPositions;\r\n  }\r\n\r\n  return {\r\n    calculateDropPositions: calculateDropPositions\r\n  };\r\n});\r\n//# sourceMappingURL=drag-and-drop.js.map","Magento_PageBuilder/js/content-type/column-group/factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\"], function (_config, _contentTypeFactory) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create a column and add it to it's column group\r\n   *\r\n   * @param {ContentTypeCollectionInterface} columnGroup\r\n   * @param {number} width\r\n   * @param {number} index\r\n   * @returns {Promise<ContentTypeCollectionInterface>}\r\n   */\r\n  function createColumn(columnGroup, width, index) {\r\n    return (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column\"), columnGroup, columnGroup.stageId, {\r\n      width: parseFloat(width.toString()) + \"%\"\r\n    }).then(function (column) {\r\n      columnGroup.addChild(column, index);\r\n      return column;\r\n    }).catch(function (error) {\r\n      console.error(error);\r\n      return null;\r\n    });\r\n  }\r\n  /**\r\n   * Create a column and add it to it's column group\r\n   *\r\n   * @param {ContentTypeCollectionInterface} columnGroup\r\n   * @param {number} width\r\n   * @param {number} index\r\n   * @returns {Promise<ContentTypeCollectionInterface>}\r\n   */\r\n\r\n\r\n  function createColumnLine(columnGroup, width, index) {\r\n    return (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column-line\"), columnGroup, columnGroup.stageId, {\r\n      width: parseFloat(width.toString()) + \"%\"\r\n    }).then(function (columnLine) {\r\n      columnGroup.addChild(columnLine, index);\r\n      return columnLine;\r\n    }).catch(function (error) {\r\n      console.error(error);\r\n      return null;\r\n    });\r\n  }\r\n\r\n  return {\r\n    createColumn: createColumn,\r\n    createColumnLine: createColumnLine\r\n  };\r\n});\r\n//# sourceMappingURL=factory.js.map","Magento_PageBuilder/js/content-type/column-group/grid-size.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\r\n\r\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\r\n\r\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"mage/translate\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/column/resize\"], function (_translate, _config, _resize) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Retrieve default  grid size\r\n   *\r\n   * @returns {number}\r\n   */\r\n  function getDefaultGridSize() {\r\n    return parseInt(_config.getConfig(\"column_grid_default\"), 10);\r\n  }\r\n  /**\r\n   * Retrieve the max grid size\r\n   *\r\n   * @returns {number}\r\n   */\r\n\r\n\r\n  function getMaxGridSize() {\r\n    return parseInt(_config.getConfig(\"column_grid_max\"), 10);\r\n  }\r\n  /**\r\n   * Apply the new grid size, adjusting the existing columns as needed.\r\n   *\r\n   * Rules for resizing the grid:\r\n   *  - The grid size can be increased up to the configured maximum value.\r\n   *  - The grid size can be decreased only if the number of non-empty columns is less than or equal to the new size.\r\n   *  - If the new grid size is less than the number of columns currently in the grid, empty columns will be deleted\r\n   *    to accommodate the new size.\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} columnGroup\r\n   * @param {number} newGridSize\r\n   * @param {Map<number, number[]>} gridSizeHistory\r\n   */\r\n\r\n\r\n  function resizeGrid(columnGroup, newGridSize, gridSizeHistory) {\r\n    if (newGridSize === columnGroup.preview.getResizeUtils().getInitialGridSize()) {\r\n      return;\r\n    }\r\n\r\n    validateNewGridSize(columnGroup, newGridSize);\r\n    columnGroup.getChildren()().forEach(function (columnLine, index) {\r\n      // if we have more columns than the new grid size allows, remove empty columns till the correct size\r\n      console.log(columnLine.getChildren()().length);\r\n\r\n      if (newGridSize < columnLine.getChildren()().length) {\r\n        removeEmptyColumnsToFit(columnLine, newGridSize);\r\n      }\r\n    }); // update column widths\r\n\r\n    redistributeColumnWidths(columnGroup, newGridSize, gridSizeHistory);\r\n  }\r\n  /**\r\n   * Validate that the new grid size is within the configured limits and can be achieved.\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} columnGroup\r\n   * @param {number} newGridSize\r\n   */\r\n\r\n\r\n  function validateNewGridSize(columnGroup, newGridSize) {\r\n    // Validate against the max grid size\r\n    if (newGridSize > getMaxGridSize()) {\r\n      throw new GridSizeError((0, _translate)(\"The maximum grid size supported is \" + getMaxGridSize() + \".\"));\r\n    } else if (newGridSize < 2) {\r\n      throw new GridSizeError((0, _translate)(\"The minimum grid size supported is 2.\"));\r\n    } // Validate that the operation will be successful\r\n\r\n\r\n    var doThrowException = false;\r\n    columnGroup.getChildren()().forEach(function (columnLine, index) {\r\n      var numEmptyColumns = 0;\r\n      var numCols = columnLine.getChildren()().length;\r\n      var currentGridSize = columnLine.preview.getResizeUtils().getInitialGridSize();\r\n\r\n      if (newGridSize < currentGridSize && numCols > newGridSize) {\r\n        columnLine.getChildren()().forEach(function (column) {\r\n          if (column.getChildren()().length === 0) {\r\n            numEmptyColumns++;\r\n          }\r\n        });\r\n\r\n        if (newGridSize < numCols - numEmptyColumns) {\r\n          doThrowException = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (doThrowException) {\r\n      throw new Error((0, _translate)(\"Grid size cannot be smaller than the current total amount of columns, minus any empty columns.\"));\r\n    }\r\n  }\r\n  /**\r\n   * Remove empty columns so we can accommodate the new grid size\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} columnGroup\r\n   * @param {number} newGridSize\r\n   */\r\n\r\n\r\n  function removeEmptyColumnsToFit(columnLine, newGridSize) {\r\n    var columns = columnLine.getChildren()();\r\n    var numColumns = columns.length;\r\n    var i;\r\n\r\n    for (i = numColumns - 1; i >= 0; i--) {\r\n      var column = columns[i];\r\n\r\n      if (newGridSize < numColumns && column.getChildren()().length === 0) {\r\n        columnLine.removeChild(column);\r\n        numColumns--;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Adjust columns widths across the new grid size, making sure each column is at least one grid size in width\r\n   * and the entire grid size is distributed.\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} columnGroup\r\n   * @param {number} newGridSize\r\n   * @param {Map<number, number[]>} gridSizeHistory\r\n   */\r\n\r\n\r\n  function redistributeColumnWidths(columnGroup, newGridSize, gridSizeHistory) {\r\n    // apply known column widths if we have resized before\r\n    if (gridSizeHistory.has(newGridSize) && gridSizeHistory.get(newGridSize).length === columnGroup.getChildren()().length) {\r\n      var columnWidths = gridSizeHistory.get(newGridSize);\r\n      columnGroup.getChildren()().forEach(function (column, index) {\r\n        (0, _resize.updateColumnWidth)(column, columnWidths[index]);\r\n      });\r\n      columnGroup.dataStore.set(\"grid_size\", newGridSize);\r\n      columnGroup.dataStore.unset(\"initial_grid_size\");\r\n      return;\r\n    }\r\n\r\n    var columnGroupResizeUtil = columnGroup.preview.getResizeUtils();\r\n    var existingGridSize = columnGroupResizeUtil.getInitialGridSize();\r\n    var minColWidth = parseFloat((100 / newGridSize).toString()).toFixed(Math.round(100 / newGridSize) !== 100 / newGridSize ? 8 : 0);\r\n    columnGroup.getChildren()().forEach(function (columnLine, columnLineIndex) {\r\n      var totalNewWidths = 0;\r\n      var remainingWidth = 0;\r\n      var numColumns = columnLine.getChildren()().length;\r\n      var resizeUtils = columnLine.preview.getResizeUtils();\r\n      columnLine.getChildren()().forEach(function (column, index) {\r\n        var existingWidth = resizeUtils.getColumnWidth(column);\r\n        var fractionColumnWidth = Math.round(existingWidth / (100 / existingGridSize));\r\n        /**\r\n         * Determine if the grid & column are directly compatible with the new defined grid size, this will\r\n         * directly convert fractions to their equivalent of the new grid size.\r\n         *\r\n         * For instance changing a 12 column grid with 2 x 6 / 12 columns to a 6 grid is fully compatible.\r\n         *\r\n         * Check the existing grid size and new grid size are divisible, verify the amount of columns will fit\r\n         * in the new grid size and finally check the calculation to convert the existing column width results\r\n         * in a positive integer.\r\n         */\r\n\r\n        if ((existingGridSize > newGridSize && existingGridSize % newGridSize === 0 || existingGridSize < newGridSize && newGridSize % existingGridSize === 0) && newGridSize % numColumns === 0 && newGridSize / existingGridSize * fractionColumnWidth % 1 === 0) {\r\n          // We don't need to modify the columns width as it's compatible, we will however increment the\r\n          // width counter as some other columns may not be compatible.\r\n          totalNewWidths += existingWidth;\r\n        } else {\r\n          var newWidth = (100 * Math.floor(existingWidth / 100 * newGridSize) / newGridSize).toFixed(Math.round(100 / newGridSize) !== 100 / newGridSize ? 8 : 0); // make sure the column is at least one grid size wide\r\n\r\n          if (parseFloat(newWidth) < parseFloat(minColWidth)) {\r\n            newWidth = minColWidth;\r\n          } // make sure we leave enough space for other columns\r\n\r\n\r\n          var widthTaken = totalNewWidths + (numColumns - index - 1) * parseFloat(minColWidth);\r\n          var maxAvailableWidth = 100 - totalNewWidths;\r\n\r\n          if (parseFloat(newWidth) > maxAvailableWidth) {\r\n            var gridWidth = Math.round(100 / newGridSize) !== 100 / newGridSize ? 8 : 0;\r\n            newWidth = maxAvailableWidth.toFixed(gridWidth);\r\n          } // Calculate any width lost from the column, if a 5 / 12 is becoming a 2 / 6 then it's lost 1 / 12\r\n\r\n\r\n          remainingWidth += existingWidth - parseFloat(newWidth);\r\n          /**\r\n           * Determine if we have enough remaining width, and apply it to the current column, this results in\r\n           * a subsequent column always receiving any additional width from the previous column\r\n           */\r\n\r\n          if (resizeUtils.getSmallestColumnWidth(newGridSize) === resizeUtils.getAcceptedColumnWidth(remainingWidth.toString(), newGridSize)) {\r\n            var widthWithRemaining = resizeUtils.getAcceptedColumnWidth((parseFloat(newWidth) + remainingWidth).toString(), newGridSize);\r\n\r\n            if (widthWithRemaining > 0) {\r\n              newWidth = widthWithRemaining.toFixed(Math.round(100 / widthWithRemaining) !== 100 / widthWithRemaining ? 8 : 0);\r\n              remainingWidth = 0;\r\n            }\r\n          }\r\n\r\n          totalNewWidths += parseFloat(newWidth);\r\n          (0, _resize.updateColumnWidth)(column, parseFloat(newWidth));\r\n        }\r\n\r\n        column.preview.updateDisplayLabel();\r\n      });\r\n    });\r\n    columnGroup.dataStore.set(\"grid_size\", newGridSize);\r\n    columnGroup.dataStore.unset(\"initial_grid_size\");\r\n    columnGroup.getChildren()().forEach(function (columnLine, index) {\r\n      var resizeUtils = columnLine.preview.getResizeUtils();\r\n\r\n      if (Math.round(resizeUtils.getColumnsWidth()) < 100) {\r\n        applyLeftoverColumnsInColumnLine(columnLine, newGridSize);\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Make sure the full grid size is distributed across the columns\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} columnGroup\r\n   * @param {number} newGridSize\r\n   */\r\n\r\n\r\n  function applyLeftoverColumns(columnGroup, newGridSize) {\r\n    var resizeUtils = columnGroup.preview.getResizeUtils();\r\n    var minColWidth = parseFloat((100 / newGridSize).toString()).toFixed(Math.round(100 / newGridSize) !== 100 / newGridSize ? 8 : 0);\r\n    var column;\r\n\r\n    for (var _iterator = _createForOfIteratorHelperLoose(columnGroup.getChildren()()), _step; !(_step = _iterator()).done;) {\r\n      column = _step.value;\r\n\r\n      if (Math.round(resizeUtils.getColumnsWidth()) < 100) {\r\n        (0, _resize.updateColumnWidth)(column, parseFloat(resizeUtils.getColumnWidth(column).toString()) + parseFloat(minColWidth));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Make sure the full grid size is distributed across the columns\r\n   *\r\n   * @param {ContentTypeCollectionInterface<Preview>} columnGroup\r\n   * @param {number} newGridSize\r\n   */\r\n\r\n\r\n  function applyLeftoverColumnsInColumnLine(columnLine, newGridSize) {\r\n    var resizeUtils = columnLine.preview.getResizeUtils();\r\n    var minColWidth = parseFloat((100 / newGridSize).toString()).toFixed(Math.round(100 / newGridSize) !== 100 / newGridSize ? 8 : 0);\r\n    var column;\r\n\r\n    for (var _iterator2 = _createForOfIteratorHelperLoose(columnLine.getChildren()()), _step2; !(_step2 = _iterator2()).done;) {\r\n      column = _step2.value;\r\n\r\n      if (Math.round(resizeUtils.getColumnsWidth()) < 100) {\r\n        (0, _resize.updateColumnWidth)(column, parseFloat(resizeUtils.getColumnWidth(column).toString()) + parseFloat(minColWidth));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  var GridSizeError = /*#__PURE__*/function (_Error) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(GridSizeError, _Error);\r\n\r\n    function GridSizeError(m) {\r\n      var _this;\r\n\r\n      _this = _Error.call(this, m) || this;\r\n      Object.setPrototypeOf(_assertThisInitialized(_this), GridSizeError.prototype);\r\n      return _this;\r\n    }\r\n\r\n    return GridSizeError;\r\n  }( /*#__PURE__*/_wrapNativeSuper(Error));\r\n\r\n  return {\r\n    getDefaultGridSize: getDefaultGridSize,\r\n    getMaxGridSize: getMaxGridSize,\r\n    resizeGrid: resizeGrid,\r\n    GridSizeError: GridSizeError\r\n  };\r\n});\r\n//# sourceMappingURL=grid-size.js.map","Magento_PageBuilder/js/content-type/column-group/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/drag-drop/move-content-type\", \"Magento_PageBuilder/js/drag-drop/registry\", \"Magento_PageBuilder/js/drag-drop/sortable\", \"Magento_PageBuilder/js/utils/create-stylesheet\", \"Magento_PageBuilder/js/content-type/column/resize\", \"Magento_PageBuilder/js/content-type/preview-collection\", \"Magento_PageBuilder/js/content-type/column-group/drag-and-drop\", \"Magento_PageBuilder/js/content-type/column-group/factory\", \"Magento_PageBuilder/js/content-type/column-group/grid-size\", \"Magento_PageBuilder/js/content-type/column-group/registry\"], function (_jquery, _knockout, _translate, _hideShowOption, _events, _underscore, _config, _contentTypeFactory, _moveContentType, _registry, _sortable, _createStylesheet, _resize, _previewCollection, _dragAndDrop, _factory, _gridSize, _registry2) {\r\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     *\r\n     * @param {ContentTypeCollection} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this;\r\n      _this.resizing = _knockout.observable(false);\r\n      _this.hasEmptyChild = _knockout.computed(function () {\r\n        var empty = false;\r\n\r\n        _this.contentType.getChildren()().forEach(function (column) {\r\n          if (column.getChildren()().length === 0) {\r\n            empty = true;\r\n          }\r\n        });\r\n\r\n        return empty;\r\n      });\r\n      _this.gridSize = _knockout.observable();\r\n      _this.gridSizeInput = _knockout.observable();\r\n      _this.gridSizeArray = _knockout.observableArray([]);\r\n      _this.gridSizeError = _knockout.observable();\r\n      _this.gridSizeMax = _knockout.observable((0, _gridSize.getMaxGridSize)());\r\n      _this.gridFormOpen = _knockout.observable(false);\r\n      _this.gridChange = _knockout.observable(false);\r\n      _this.gridToolTipOverFlow = _knockout.observable(false);\r\n      _this.resizeColumnWidths = [];\r\n      _this.resizeHistory = {\r\n        left: [],\r\n        right: []\r\n      };\r\n      _this.dropPositions = [];\r\n      _this.gridSizeHistory = new Map();\r\n      _this.interactionLevel = 0;\r\n      _this.resizeUtils = new _resize(_this.contentType); // Keep track of the grid size in an observable\r\n\r\n      _this.contentType.dataStore.subscribe(function (state) {\r\n        var gridSize = parseInt(state.grid_size.toString(), 10);\r\n\r\n        _this.gridSize(gridSize);\r\n\r\n        _this.gridSizeInput(gridSize);\r\n\r\n        if (gridSize) {\r\n          _this.gridSizeArray(new Array(gridSize));\r\n        }\r\n      }, \"grid_size\");\r\n\r\n      _events.on(\"contentType:removeAfter\", function (args) {\r\n        if (args.parentContentType && args.parentContentType.id === _this.contentType.id) {\r\n          _underscore.defer(function () {\r\n            _this.spreadWidth(args.index);\r\n          });\r\n        }\r\n      });\r\n\r\n      _events.on(\"column:initializeAfter\", function (args) {\r\n        // Does the events parent match the previews column group?\r\n        if (args.columnGroup.id === _this.contentType.id) {\r\n          _this.bindDraggable(args.column);\r\n        }\r\n      });\r\n\r\n      _events.on(\"stage:\" + _this.contentType.stageId + \":fullScreenModeChangeAfter\", _this.moveContentsToNewColumnGroup.bind(_assertThisInitialized(_this)));\r\n\r\n      _events.on(\"column-group:renderAfter\", function (args) {\r\n        if (args.contentType.id === _this.contentType.id) {\r\n          if (!_this.hasColumnLine(args.contentType)) {\r\n            args.element.classList.add(\"no-column-line\");\r\n          } else {\r\n            args.element.classList.remove(\"no-column-line\");\r\n            args.element.classList.add(\"with-column-line\");\r\n          }\r\n        }\r\n      });\r\n\r\n      _this.contentType.children.subscribe(_underscore.debounce(_this.removeIfEmpty.bind(_assertThisInitialized(_this)), 50));\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Handle user editing an instance\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.onOptionEdit = function onOptionEdit() {\r\n      var numCols = this.contentType.getChildren()().length; // count the number of non empty columns\r\n\r\n      var numEmptyColumns = 0;\r\n      this.contentType.getChildren()().forEach(function (column) {\r\n        if (column.getChildren()().length === 0) {\r\n          numEmptyColumns++;\r\n        }\r\n      });\r\n      var appearance = this.contentType.dataStore.get(\"appearance\") ? this.contentType.dataStore.get(\"appearance\") : \"default\";\r\n      this.contentType.dataStore.set(\"appearance\", appearance);\r\n      this.contentType.dataStore.set(\"non_empty_column_count\", this.getNonEmptyColumnCount());\r\n      this.contentType.dataStore.set(\"max_grid_size\", (0, _gridSize.getMaxGridSize)());\r\n      this.contentType.dataStore.set(\"initial_grid_size\", this.contentType.dataStore.get(\"grid_size\"));\r\n\r\n      _previewCollection2.prototype.openEdit.call(this);\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      _previewCollection2.prototype.bindEvents.call(this);\r\n\r\n      if (_config.getContentTypeConfig(\"column\")) {\r\n        _events.on(\"column-group:dropAfter\", function (args) {\r\n          if (args.id === _this2.contentType.id) {\r\n            _this2.setDefaultGridSizeOnColumnGroup();\r\n\r\n            _this2.addDefaultColumnLine(args);\r\n          }\r\n        });\r\n      }\r\n\r\n      _events.on(\"form:\" + this.contentType.id + \":saveAfter\", function () {\r\n        if (_this2.contentType.dataStore.get(\"grid_size\") !== _this2.contentType.dataStore.get(\"initial_grid_size\")) {\r\n          _this2.updateGridSize();\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Set default grid size on current column group\r\n     */\r\n    ;\r\n\r\n    _proto.setDefaultGridSizeOnColumnGroup = function setDefaultGridSizeOnColumnGroup() {\r\n      this.contentType.dataStore.set(\"grid_size\", (0, _gridSize.getDefaultGridSize)());\r\n    }\r\n    /**\r\n     * Add Columns to the current Column Group\r\n     *\r\n     * @returns {Promise<ContentTypeCollectionInterface>}\r\n     */\r\n    ;\r\n\r\n    _proto.createColumns = function createColumns() {\r\n      var _this3 = this;\r\n\r\n      var defaultGridSize = (0, _gridSize.getDefaultGridSize)();\r\n      var col1Width = (Math.ceil(defaultGridSize / 2) * 100 / defaultGridSize).toFixed(Math.round(100 / defaultGridSize) !== 100 / defaultGridSize ? 8 : 0);\r\n      Promise.all([(0, _contentTypeFactory)(_config.getContentTypeConfig(\"column\"), this.contentType, this.contentType.stageId, {\r\n        width: col1Width + \"%\"\r\n      }), (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column\"), this.contentType, this.contentType.stageId, {\r\n        width: 100 - parseFloat(col1Width) + \"%\"\r\n      })]).then(function (columns) {\r\n        _this3.contentType.addChild(columns[0], 0);\r\n\r\n        _this3.contentType.addChild(columns[1], 1);\r\n\r\n        _this3.fireMountEvent(_this3.contentType, columns[0], columns[1]);\r\n      });\r\n    };\r\n\r\n    _proto.addDefaultColumnLine = function addDefaultColumnLine(args) {\r\n      var _this4 = this;\r\n\r\n      (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column-line\"), this.contentType, this.contentType.stageId).then(function (columnLine) {\r\n        _this4.contentType.addChild(columnLine, 0);\r\n\r\n        if (args.columnGroupWithoutColumnLine === undefined) {\r\n          _events.trigger(columnLine.config.name + \":dropAfter\", {\r\n            id: columnLine.id,\r\n            columnLine: columnLine\r\n          });\r\n        } else {\r\n          // Move children of this column group without column line as descendant of new\r\n          // column group that has a column line\r\n          var children = args.columnGroupWithoutColumnLine.getChildren()();\r\n          var index = 0;\r\n          children.forEach(function (child) {\r\n            setTimeout(function () {\r\n              (0, _moveContentType.moveContentType)(child, index++, columnLine);\r\n            }, 250);\r\n          });\r\n        }\r\n\r\n        _this4.fireMountEvent(_this4.contentType, columnLine);\r\n      });\r\n    }\r\n    /**\r\n     * Use the conditional remove to disable the option when the content type has a single child\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Return selected element styles\r\n     *\r\n     * @param element\r\n     * @param styleProperties\r\n     */\r\n    ;\r\n\r\n    _proto.getStyle = function getStyle(element, styleProperties) {\r\n      var stylesObject = element.style();\r\n      return styleProperties.reduce(function (obj, key) {\r\n        var _extends2;\r\n\r\n        return _extends({}, obj, (_extends2 = {}, _extends2[key] = stylesObject[key], _extends2));\r\n      }, {});\r\n    }\r\n    /**\r\n     * Return element styles without selected\r\n     *\r\n     * @param element\r\n     * @param styleProperties\r\n     */\r\n    ;\r\n\r\n    _proto.getStyleWithout = function getStyleWithout(element, styleProperties) {\r\n      var stylesObject = element.style();\r\n      return Object.keys(stylesObject).filter(function (key) {\r\n        return !styleProperties.includes(key);\r\n      }).reduce(function (obj, key) {\r\n        var _extends3;\r\n\r\n        return _extends({}, obj, (_extends3 = {}, _extends3[key] = stylesObject[key], _extends3));\r\n      }, {});\r\n    }\r\n    /**\r\n     * Get background image url base on the viewport.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getBackgroundImage = function getBackgroundImage() {\r\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\r\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\r\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\r\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\r\n    }\r\n    /**\r\n     * Retrieve the resize utils\r\n     *\r\n     * @returns {Resize}\r\n     */\r\n    ;\r\n\r\n    _proto.getResizeUtils = function getResizeUtils() {\r\n      return this.resizeUtils;\r\n    }\r\n    /**\r\n     * Handle a new column being dropped into the group\r\n     *\r\n     * @param {DropPosition} dropPosition\r\n     */\r\n    ;\r\n\r\n    _proto.onNewColumnDrop = function onNewColumnDrop(dropPosition) {\r\n      var _this5 = this;\r\n\r\n      // Create our new column\r\n      (0, _factory.createColumn)(this.contentType, this.resizeUtils.getSmallestColumnWidth(), dropPosition.insertIndex).then(function () {\r\n        var newWidth = _this5.resizeUtils.getAcceptedColumnWidth((_this5.resizeUtils.getColumnWidth(dropPosition.affectedColumn) - _this5.resizeUtils.getSmallestColumnWidth()).toString()); // Reduce the affected columns width by the smallest column width\r\n\r\n\r\n        (0, _resize.updateColumnWidth)(dropPosition.affectedColumn, newWidth);\r\n      });\r\n    }\r\n    /**\r\n     * Handle an existing column being dropped into a new column group\r\n     *\r\n     * @param {DropPosition} movePosition\r\n     */\r\n    ;\r\n\r\n    _proto.onExistingColumnDrop = function onExistingColumnDrop(movePosition) {\r\n      var column = (0, _registry2.getDragColumn)();\r\n      var sourceGroupPreview = column.parentContentType.preview;\r\n      var modifyOldNeighbour; // Determine which old neighbour we should modify\r\n\r\n      var oldWidth = sourceGroupPreview.getResizeUtils().getColumnWidth(column); // Retrieve the adjacent column either +1 or -1\r\n\r\n      if ((0, _resize.getAdjacentColumn)(column, \"+1\")) {\r\n        modifyOldNeighbour = (0, _resize.getAdjacentColumn)(column, \"+1\");\r\n      } else if ((0, _resize.getAdjacentColumn)(column, \"-1\")) {\r\n        modifyOldNeighbour = (0, _resize.getAdjacentColumn)(column, \"-1\");\r\n      } // Set the column to it's smallest column width\r\n\r\n\r\n      (0, _resize.updateColumnWidth)(column, this.resizeUtils.getSmallestColumnWidth()); // Move the content type\r\n\r\n      (0, _moveContentType.moveContentType)(column, movePosition.insertIndex, this.contentType); // Modify the old neighbour\r\n\r\n      if (modifyOldNeighbour) {\r\n        var oldNeighbourWidth = sourceGroupPreview.getResizeUtils().getAcceptedColumnWidth((oldWidth + sourceGroupPreview.getResizeUtils().getColumnWidth(modifyOldNeighbour)).toString());\r\n        (0, _resize.updateColumnWidth)(modifyOldNeighbour, oldNeighbourWidth);\r\n      } // Modify the columns new neighbour\r\n\r\n\r\n      var newNeighbourWidth = this.resizeUtils.getAcceptedColumnWidth((this.resizeUtils.getColumnWidth(movePosition.affectedColumn) - this.resizeUtils.getSmallestColumnWidth()).toString()); // Reduce the affected columns width by the smallest column width\r\n\r\n      (0, _resize.updateColumnWidth)(movePosition.affectedColumn, newNeighbourWidth);\r\n    }\r\n    /**\r\n     * Handle a column being sorted into a new position in the group\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {number} newIndex\r\n     */\r\n    ;\r\n\r\n    _proto.onColumnSort = function onColumnSort(column, newIndex) {\r\n      var currentIndex = (0, _resize.getColumnIndexInGroup)(column);\r\n\r\n      if (currentIndex !== newIndex) {\r\n        if (currentIndex < newIndex) {\r\n          // As we're moving an array item the keys all reduce by 1\r\n          --newIndex;\r\n        } // Move the content type\r\n\r\n\r\n        (0, _moveContentType.moveContentType)(column, newIndex);\r\n      }\r\n    }\r\n    /**\r\n     * Handle a column being resized\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {number} width\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} adjustedColumn\r\n     */\r\n    ;\r\n\r\n    _proto.onColumnResize = function onColumnResize(column, width, adjustedColumn) {\r\n      this.resizeUtils.resizeColumn(column, width, adjustedColumn);\r\n    }\r\n    /**\r\n     * Init the droppable & resizing interactions\r\n     *\r\n     * @param group\r\n     */\r\n    ;\r\n\r\n    _proto.bindInteractions = function bindInteractions(group) {\r\n      this.groupElement = (0, _jquery)(group);\r\n      this.initDroppable(this.groupElement);\r\n      this.initMouseMove(this.groupElement); // Handle the mouse leaving the window\r\n\r\n      (0, _jquery)(\"body\").mouseleave(this.endAllInteractions.bind(this));\r\n    }\r\n    /**\r\n     * Init the drop placeholder\r\n     * @deprecated - dropPlaceholder functionality moved to column-line\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.bindDropPlaceholder = function bindDropPlaceholder(element) {\r\n      this.dropPlaceholder = (0, _jquery)(element);\r\n    }\r\n    /**\r\n     * Init the move placeholder\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.bindMovePlaceholder = function bindMovePlaceholder(element) {\r\n      this.movePlaceholder = (0, _jquery)(element);\r\n    }\r\n    /**\r\n     * Retrieve the ghost element from the template\r\n     *\r\n     * @param {Element} ghost\r\n     */\r\n    ;\r\n\r\n    _proto.bindGhost = function bindGhost(ghost) {\r\n      this.resizeGhost = (0, _jquery)(ghost);\r\n    }\r\n    /**\r\n     * Register a resize handle within a child column\r\n     * @deprecated\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {JQuery} handle\r\n     */\r\n    ;\r\n\r\n    _proto.registerResizeHandle = function registerResizeHandle(column, handle) {\r\n      var _this6 = this;\r\n\r\n      handle.off(\"mousedown touchstart\");\r\n      handle.on(\"mousedown touchstart\", function (event) {\r\n        event.preventDefault();\r\n\r\n        var groupPosition = _this6.getGroupPosition(_this6.groupElement);\r\n\r\n        _this6.resizing(true);\r\n\r\n        _this6.resizeColumnInstance = column;\r\n        _this6.resizeColumnWidths = _this6.resizeUtils.determineColumnWidths(_this6.resizeColumnInstance, groupPosition);\r\n        _this6.resizeMaxGhostWidth = (0, _resize.determineMaxGhostWidth)(_this6.resizeColumnWidths); // Force the cursor to resizing\r\n\r\n        (0, _jquery)(\"body\").css(\"cursor\", \"col-resize\"); // Reset the resize history\r\n\r\n        _this6.resizeHistory = {\r\n          left: [],\r\n          right: []\r\n        };\r\n        _this6.resizeLastPosition = null;\r\n        _this6.resizeMouseDown = true;\r\n        ++_this6.interactionLevel;\r\n\r\n        _events.trigger(\"stage:interactionStart\", {\r\n          stageId: _this6.contentType.stageId\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Bind draggable instances to the child columns\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     */\r\n    ;\r\n\r\n    _proto.bindDraggable = function bindDraggable(column) {\r\n      var _this7 = this;\r\n\r\n      column.preview.element.draggable({\r\n        appendTo: \"body\",\r\n        containment: \"body\",\r\n        cursor: \"-webkit-grabbing\",\r\n        handle: \".move-column\",\r\n        revertDuration: 250,\r\n        helper: function helper() {\r\n          var helper = (0, _jquery)(this).clone();\r\n          helper.css({\r\n            height: (0, _jquery)(this).outerHeight() + \"px\",\r\n            minHeight: 0,\r\n            opacity: 0.5,\r\n            pointerEvents: \"none\",\r\n            width: (0, _jquery)(this).outerWidth() + \"px\",\r\n            zIndex: 5000\r\n          });\r\n          return helper;\r\n        },\r\n        start: function start(event) {\r\n          var columnInstance = _knockout.dataFor((0, _jquery)(event.target)[0]); // Use the global state as columns can be dragged between groups\r\n\r\n\r\n          (0, _registry2.setDragColumn)(columnInstance.contentType);\r\n          _this7.dropPositions = (0, _dragAndDrop.calculateDropPositions)(_this7.contentType);\r\n          _this7.startDragEvent = event;\r\n\r\n          _events.trigger(\"column:dragStart\", {\r\n            column: columnInstance,\r\n            stageId: _this7.contentType.stageId\r\n          });\r\n\r\n          _events.trigger(\"stage:interactionStart\", {\r\n            stageId: _this7.contentType.stageId\r\n          });\r\n        },\r\n        stop: function stop() {\r\n          var draggedColumn = (0, _registry2.getDragColumn)();\r\n\r\n          if (_this7.movePosition && draggedColumn) {\r\n            // Check if we're moving within the same group, even though this function will\r\n            // only ever run on the group that bound the draggable event\r\n            if (draggedColumn.parentContentType === _this7.contentType) {\r\n              _this7.onColumnSort(draggedColumn, _this7.movePosition.insertIndex);\r\n\r\n              _this7.movePosition = null;\r\n            }\r\n          }\r\n\r\n          (0, _registry2.removeDragColumn)();\r\n\r\n          _this7.movePlaceholder.removeClass(\"active\");\r\n\r\n          _this7.startDragEvent = null;\r\n\r\n          _events.trigger(\"column:dragStop\", {\r\n            column: draggedColumn,\r\n            stageId: _this7.contentType.stageId\r\n          });\r\n\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            stageId: _this7.contentType.stageId\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Update the grid size on enter or blur of the input\r\n     */\r\n    ;\r\n\r\n    _proto.updateGridSize = function updateGridSize() {\r\n      var _this8 = this;\r\n\r\n      if (!_jquery.isNumeric(this.gridSizeInput())) {\r\n        this.gridSizeError((0, _translate)(\"Please enter a valid number.\"));\r\n      }\r\n\r\n      var newGridSize = parseInt(this.gridSizeInput().toString(), 10);\r\n\r\n      if (newGridSize || newGridSize === 0) {\r\n        if (newGridSize !== this.resizeUtils.getGridSize() || true) {\r\n          try {\r\n            (0, _gridSize.resizeGrid)(this.contentType, newGridSize, this.gridSizeHistory);\r\n            this.recordGridResize(newGridSize);\r\n            this.gridSizeError(null); // Make the grid \"flash\" on successful change\r\n\r\n            this.gridChange(true);\r\n\r\n            _underscore.delay(function () {\r\n              _this8.gridChange(false);\r\n            }, 1000);\r\n          } catch (e) {\r\n            if (e instanceof _gridSize.GridSizeError) {\r\n              this.gridSizeError(e.message);\r\n            } else {\r\n              throw e;\r\n            }\r\n          }\r\n        } else {\r\n          this.gridSizeError(null);\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.hasColumnLine = function hasColumnLine(contentType) {\r\n      var children = this.contentType.getChildren()();\r\n      var hasColumnLine = false;\r\n\r\n      if (children.length === 0) {\r\n        // new column group, so it has a column line\r\n        hasColumnLine = true;\r\n      }\r\n\r\n      children.forEach(function (child) {\r\n        if (child.config.name === \"column-line\") {\r\n          hasColumnLine = true;\r\n        }\r\n      });\r\n      return hasColumnLine;\r\n    }\r\n    /**\r\n     * If the column group does not have a column line, move contents to a new column group with a column line\r\n     */\r\n    ;\r\n\r\n    _proto.moveContentsToNewColumnGroup = function moveContentsToNewColumnGroup() {\r\n      var _this9 = this;\r\n\r\n      if (this.hasColumnLine(this.contentType)) {\r\n        // This column-group already has a column line. Don't need to add one.\r\n        return;\r\n      }\r\n\r\n      var indexToInsertNewColumnGroupAt = this.getCurrentIndexInParent();\r\n      (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column-group\"), this.contentType.parentContentType, this.contentType.stageId).then(function (columnGroup) {\r\n        _this9.contentType.parentContentType.addChild(columnGroup, indexToInsertNewColumnGroupAt);\r\n\r\n        _events.trigger(columnGroup.config.name + \":dropAfter\", {\r\n          id: columnGroup.id,\r\n          columnGroup: columnGroup,\r\n          columnGroupWithoutColumnLine: _this9.contentType\r\n        });\r\n\r\n        _this9.fireMountEvent(_this9.contentType, columnGroup);\r\n      });\r\n    }\r\n    /**\r\n     * @private return index of current content type in parent\r\n     */\r\n    ;\r\n\r\n    _proto.getCurrentIndexInParent = function getCurrentIndexInParent() {\r\n      var parentContentType = this.contentType.parentContentType;\r\n      var currentIndex = 0;\r\n\r\n      for (var _iterator = _createForOfIteratorHelperLoose(this.contentType.parentContentType.getChildren()()), _step; !(_step = _iterator()).done;) {\r\n        var sibling = _step.value;\r\n\r\n        if (sibling.id !== this.contentType.id) {\r\n          currentIndex++;\r\n          continue;\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      return currentIndex;\r\n    }\r\n    /**\r\n     * Fire the mount event for content types\r\n     *\r\n     * @param {ContentTypeInterface[]} contentTypes\r\n     */\r\n    ;\r\n\r\n    _proto.fireMountEvent = function fireMountEvent() {\r\n      for (var _len = arguments.length, contentTypes = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        contentTypes[_key] = arguments[_key];\r\n      }\r\n\r\n      contentTypes.forEach(function (contentType) {\r\n        _events.trigger(\"contentType:mountAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n\r\n        _events.trigger(contentType.config.name + \":mountAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Set columns in the group as resizing\r\n     *\r\n     * @param {Array<ContentTypeCollectionInterface<ColumnPreview>>} columns\r\n     */\r\n    ;\r\n\r\n    _proto.setColumnsAsResizing = function setColumnsAsResizing() {\r\n      for (var _len2 = arguments.length, columns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n        columns[_key2] = arguments[_key2];\r\n      }\r\n\r\n      columns.forEach(function (column) {\r\n        column.preview.resizing(true);\r\n        column.preview.element.css({\r\n          transition: \"width 350ms ease-in-out\"\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Unset resizing flag on all child columns\r\n     */\r\n    ;\r\n\r\n    _proto.unsetResizingColumns = function unsetResizingColumns() {\r\n      this.contentType.children().forEach(function (column) {\r\n        column.preview.resizing(false);\r\n\r\n        if (column.preview.element) {\r\n          column.preview.element.css({\r\n            transition: \"\"\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * End all current interactions\r\n     */\r\n    ;\r\n\r\n    _proto.endAllInteractions = function endAllInteractions() {\r\n      if (this.resizing() === true) {\r\n        for (; this.interactionLevel > 0; this.interactionLevel--) {\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            stageId: this.contentType.stageId\r\n          });\r\n        }\r\n      }\r\n\r\n      this.resizing(false);\r\n      this.resizeMouseDown = null;\r\n      this.resizeLeftLastColumnShrunk = this.resizeRightLastColumnShrunk = null;\r\n      this.dropPositions = []; // this.unsetResizingColumns();\r\n      // Change the cursor back\r\n\r\n      (0, _jquery)(\"body\").css(\"cursor\", \"\");\r\n      this.movePlaceholder.css(\"left\", \"\").removeClass(\"active\");\r\n      this.resizeGhost.removeClass(\"active\"); // Reset the group positions cache\r\n\r\n      this.groupPositionCache = null;\r\n    }\r\n    /**\r\n     * Init the resizing events on the group\r\n     *\r\n     * @param {JQuery} group\r\n     */\r\n    ;\r\n\r\n    _proto.initMouseMove = function initMouseMove(group) {\r\n      var _this10 = this;\r\n\r\n      var intersects = false;\r\n      (0, _jquery)(document).on(\"mousemove touchmove\", function (event) {\r\n        if (group.parents(_sortable.hiddenClass).length > 0) {\r\n          return;\r\n        }\r\n\r\n        var groupPosition = _this10.getGroupPosition(group); // If we're handling a touch event we need to pass through the page X & Y\r\n\r\n\r\n        if (event.type === \"touchmove\") {\r\n          event.pageX = event.originalEvent.pageX;\r\n          event.pageY = event.originalEvent.pageY;\r\n        }\r\n\r\n        if (_this10.eventIntersectsGroup(event, groupPosition)) {\r\n          intersects = true; // @todo make column re-sizing work\r\n\r\n          _this10.onResizingMouseMove(event, group, groupPosition);\r\n        } else {\r\n          intersects = false;\r\n          _this10.groupPositionCache = null;\r\n          _this10.dropPosition = null;\r\n\r\n          _this10.movePlaceholder.css(\"left\", \"\").removeClass(\"active\");\r\n        }\r\n      }).on(\"mouseup touchend\", function () {\r\n        intersects = false;\r\n        _this10.dropPosition = null;\r\n\r\n        _this10.endAllInteractions();\r\n\r\n        _underscore.defer(function () {\r\n          // Re-enable any disabled sortable areas\r\n          group.find(\".ui-sortable\").each(function () {\r\n            if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n              (0, _jquery)(this).sortable(\"option\", \"disabled\", false);\r\n            }\r\n          });\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Handle the mouse up action, either adding a new column or moving an existing\r\n     * @deprecated\r\n     */\r\n    ;\r\n\r\n    _proto.handleMouseUp = function handleMouseUp() {\r\n      if (this.dropOverElement && this.dropPosition) {\r\n        this.onNewColumnDrop(this.dropPosition);\r\n        this.dropOverElement = null; // Re-enable the parent disabled sortable instance\r\n\r\n        _underscore.defer(function () {\r\n          (0, _jquery)(\".element-children.ui-sortable-disabled\").each(function () {\r\n            (0, _jquery)(this).sortable(\"option\", \"disabled\", false);\r\n          });\r\n        });\r\n      }\r\n\r\n      var column = (0, _registry2.getDragColumn)();\r\n\r\n      if (this.movePosition && column && column.parentContentType !== this.contentType) {\r\n        this.onExistingColumnDrop(this.movePosition);\r\n      }\r\n    }\r\n    /**\r\n     * Does the current event intersect with the group?\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {GroupPositionCache} groupPosition\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.eventIntersectsGroup = function eventIntersectsGroup(event, groupPosition) {\r\n      return event.pageY > groupPosition.top && event.pageY < groupPosition.top + groupPosition.outerHeight && event.pageX > groupPosition.left && event.pageX < groupPosition.left + groupPosition.outerWidth;\r\n    }\r\n    /**\r\n     * Cache the groups positions\r\n     *\r\n     * @param {JQuery} group\r\n     * @returns {GroupPositionCache}\r\n     */\r\n    ;\r\n\r\n    _proto.getGroupPosition = function getGroupPosition(group) {\r\n      if (!this.groupPositionCache) {\r\n        this.groupPositionCache = {\r\n          top: group.offset().top,\r\n          left: group.offset().left,\r\n          width: group.width(),\r\n          height: group.height(),\r\n          outerWidth: group.outerWidth(),\r\n          outerHeight: group.outerHeight()\r\n        };\r\n      }\r\n\r\n      return this.groupPositionCache;\r\n    }\r\n    /**\r\n     * Record the resizing history for this action\r\n     *\r\n     * @param {string} usedHistory\r\n     * @param {string} direction\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} adjustedColumn\r\n     * @param {string} modifyColumnInPair\r\n     */\r\n    ;\r\n\r\n    _proto.recordResizeHistory = function recordResizeHistory(usedHistory, direction, adjustedColumn, modifyColumnInPair) {\r\n      if (usedHistory) {\r\n        this.resizeHistory[usedHistory].pop();\r\n      }\r\n\r\n      this.resizeHistory[direction].push({\r\n        adjustedColumn: adjustedColumn,\r\n        modifyColumnInPair: modifyColumnInPair\r\n      });\r\n    }\r\n    /**\r\n     * Handle the resizing on mouse move, we always resize a pair of columns at once\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {JQuery} group\r\n     * @param {GroupPositionCache} groupPosition\r\n     */\r\n    ;\r\n\r\n    _proto.onResizingMouseMove = function onResizingMouseMove(event, group, groupPosition) {\r\n      var _this11 = this;\r\n\r\n      var newColumnWidth;\r\n\r\n      if (this.resizeMouseDown) {\r\n        event.preventDefault();\r\n        var currentPos = event.pageX;\r\n        var resizeColumnLeft = this.resizeColumnInstance.preview.element.offset().left;\r\n        var resizeColumnWidth = this.resizeColumnInstance.preview.element.outerWidth();\r\n        var resizeHandlePosition = resizeColumnLeft + resizeColumnWidth;\r\n        var direction = currentPos >= resizeHandlePosition ? \"right\" : \"left\";\r\n        var adjustedColumn;\r\n        var modifyColumnInPair; // We need to know if we're modifying the left or right column in the pair\r\n\r\n        var usedHistory; // Was the adjusted column pulled from history?\r\n        // Determine which column in the group should be adjusted for this action\r\n\r\n        var _this$resizeUtils$det = this.resizeUtils.determineAdjustedColumn(currentPos, this.resizeColumnInstance, this.resizeHistory);\r\n\r\n        adjustedColumn = _this$resizeUtils$det[0];\r\n        modifyColumnInPair = _this$resizeUtils$det[1];\r\n        usedHistory = _this$resizeUtils$det[2];\r\n        // Calculate the ghost width based on mouse position and bounds of allowed sizes\r\n        var ghostWidth = this.resizeUtils.calculateGhostWidth(groupPosition, currentPos, this.resizeColumnInstance, modifyColumnInPair, this.resizeMaxGhostWidth);\r\n        this.resizeGhost.width(ghostWidth - 15 + \"px\").addClass(\"active\");\r\n\r\n        if (adjustedColumn && this.resizeColumnWidths) {\r\n          newColumnWidth = this.resizeColumnWidths.find(function (val) {\r\n            return (0, _resize.comparator)(currentPos, val.position, 35) && val.forColumn === modifyColumnInPair;\r\n          });\r\n\r\n          if (newColumnWidth) {\r\n            var mainColumn = this.resizeColumnInstance; // If we're using the left data set, we're actually resizing the right column of the group\r\n\r\n            if (modifyColumnInPair === \"right\") {\r\n              mainColumn = (0, _resize.getAdjacentColumn)(this.resizeColumnInstance, \"+1\");\r\n            } // Ensure we aren't resizing multiple times, also validate the last resize isn't the same as the\r\n            // one being performed now. This occurs as we re-calculate the column positions on resize, we have\r\n            // to use the comparator as the calculation may result in slightly different numbers due to rounding\r\n\r\n\r\n            if (this.resizeUtils.getColumnWidth(mainColumn) !== newColumnWidth.width && !(0, _resize.comparator)(this.resizeLastPosition, newColumnWidth.position, 10)) {\r\n              // If our previous action was to resize the right column in pair, and we're now dragging back\r\n              // to the right, but have matched a column for the left we need to fix the columns being\r\n              // affected\r\n              if (usedHistory && this.resizeLastColumnInPair === \"right\" && direction === \"right\" && newColumnWidth.forColumn === \"left\") {\r\n                var originalMainColumn = mainColumn;\r\n                mainColumn = adjustedColumn;\r\n                adjustedColumn = (0, _resize.getAdjacentColumn)(originalMainColumn, \"+1\");\r\n              }\r\n\r\n              this.recordResizeHistory(usedHistory, direction, adjustedColumn, modifyColumnInPair);\r\n              this.resizeLastPosition = newColumnWidth.position;\r\n              this.resizeLastColumnInPair = modifyColumnInPair; // Ensure the adjusted column is marked as resizing to animate correctly\r\n\r\n              this.setColumnsAsResizing(mainColumn, adjustedColumn);\r\n              this.onColumnResize(mainColumn, newColumnWidth.width, adjustedColumn); // Wait for the render cycle to finish from the above resize before re-calculating\r\n\r\n              _underscore.defer(function () {\r\n                // If we do a resize, re-calculate the column widths\r\n                _this11.resizeColumnWidths = _this11.resizeUtils.determineColumnWidths(_this11.resizeColumnInstance, groupPosition);\r\n                _this11.resizeMaxGhostWidth = (0, _resize.determineMaxGhostWidth)(_this11.resizeColumnWidths);\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Handle a column being dragged around the group\r\n     * @deprecated - this is now handled in column-line/preview onDraggingMouseMove\r\n     * @param {JQueryEventObject} event\r\n     * @param {JQuery} group\r\n     * @param {GroupPositionCache} groupPosition\r\n     */\r\n    ;\r\n\r\n    _proto.onDraggingMouseMove = function onDraggingMouseMove(event, group, groupPosition) {\r\n      var dragColumn = (0, _registry2.getDragColumn)();\r\n\r\n      if (dragColumn) {\r\n        // If the drop positions haven't been calculated for this group do so now\r\n        if (this.dropPositions.length === 0) {\r\n          this.dropPositions = (0, _dragAndDrop.calculateDropPositions)(this.contentType);\r\n        }\r\n\r\n        var columnInstance = dragColumn;\r\n        var currentX = event.pageX - groupPosition.left; // Are we within the same column group or have we ended up over another?\r\n\r\n        if (columnInstance.parentContentType === this.contentType && this.startDragEvent) {\r\n          var dragDirection = event.pageX <= this.startDragEvent.pageX ? \"left\" : \"right\";\r\n          var adjacentLeftColumn = (0, _resize.getAdjacentColumn)(dragColumn, \"-1\"); // Determine the current move position based on the cursors position and direction of drag\r\n\r\n          this.movePosition = this.dropPositions.find(function (position) {\r\n            return currentX > position.left && currentX < position.right && position.placement === dragDirection && position.affectedColumn !== dragColumn;\r\n          }); // Differences in the element & event positions cause a right movement to activate on the left column\r\n\r\n          if (this.movePosition && dragDirection === \"right\" && this.movePosition.affectedColumn === adjacentLeftColumn) {\r\n            this.movePosition = null;\r\n          }\r\n\r\n          if (this.movePosition) {\r\n            this.movePlaceholder.css({\r\n              left: this.movePosition.placement === \"left\" ? this.movePosition.left : \"\",\r\n              right: this.movePosition.placement === \"right\" ? groupPosition.width - this.movePosition.right : \"\",\r\n              width: dragColumn.preview.element.outerWidth() + \"px\"\r\n            }).addClass(\"active\");\r\n          } else {\r\n            this.movePlaceholder.removeClass(\"active\");\r\n          }\r\n        } else {\r\n          // If we're moving to another column group we utilise the existing drop placeholder\r\n          this.movePosition = this.dropPositions.find(function (position) {\r\n            return currentX > position.left && currentX <= position.right && position.canShrink;\r\n          });\r\n\r\n          if (this.movePosition) {\r\n            var classToRemove = this.movePosition.placement === \"left\" ? \"right\" : \"left\";\r\n            this.movePlaceholder.removeClass(\"active\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Handle mouse move events on when dropping elements\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {JQuery} group\r\n     * @param {GroupPositionCache} groupPosition\r\n     * @deprecated now handled in column-line/preview\r\n     */\r\n    ;\r\n\r\n    _proto.onDroppingMouseMove = function onDroppingMouseMove(event, group, groupPosition) {\r\n      var elementChildrenParent = group.parents(\".element-children\"); // Only initiate this process if we're within the group by a buffer to allow for sortable to function correctly\r\n\r\n      if (this.dropOverElement && event.pageY > groupPosition.top + 20 && event.pageY < groupPosition.top + groupPosition.outerHeight - 20) {\r\n        // Disable the column group sortable instance\r\n        if (elementChildrenParent.data(\"ui-sortable\")) {\r\n          elementChildrenParent.sortable(\"option\", \"disabled\", true);\r\n        }\r\n\r\n        var currentX = event.pageX - groupPosition.left;\r\n        this.dropPosition = this.dropPositions.find(function (position) {\r\n          return currentX > position.left && currentX <= position.right && position.canShrink;\r\n        });\r\n      } else if (this.dropOverElement) {\r\n        // Re-enable the column group sortable instance\r\n        if (elementChildrenParent.data(\"ui-sortable\")) {\r\n          elementChildrenParent.sortable(\"option\", \"disabled\", false);\r\n        }\r\n\r\n        this.dropPosition = null;\r\n      }\r\n    }\r\n    /**\r\n     * Init the droppable functionality for new columns\r\n     *\r\n     * @param {JQuery} group\r\n     */\r\n    ;\r\n\r\n    _proto.initDroppable = function initDroppable(group) {\r\n      var self = this;\r\n      var headStyles;\r\n      group.droppable({\r\n        deactivate: function deactivate() {\r\n          self.dropOverElement = null;\r\n\r\n          _underscore.defer(function () {\r\n            // Re-enable the column group sortable instance & all children sortable instances\r\n            group.parents(\".element-children\").each(function () {\r\n              if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n                (0, _jquery)(this).sortable(\"option\", \"disabled\", false);\r\n              }\r\n            });\r\n          });\r\n        },\r\n        activate: function activate() {\r\n          if ((0, _registry.getDraggedContentTypeConfig)() === _config.getContentTypeConfig(\"column-group\")) {\r\n            var _ref;\r\n\r\n            group.find(\".ui-sortable\").each(function () {\r\n              if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n                (0, _jquery)(this).sortable(\"option\", \"disabled\", true);\r\n              }\r\n            });\r\n            var classes = [\".pagebuilder-content-type.pagebuilder-column .pagebuilder-drop-indicator\", \".pagebuilder-content-type.pagebuilder-column .empty-container .content-type-container:before\"]; // Ensure we don't display any drop indicators inside the column\r\n\r\n            headStyles = (0, _createStylesheet.createStyleSheet)((_ref = {}, _ref[classes.join(\", \")] = {\r\n              display: \"none!important\"\r\n            }, _ref));\r\n            document.head.appendChild(headStyles);\r\n          } else if (headStyles) {\r\n            headStyles.remove();\r\n            headStyles = null;\r\n          }\r\n        },\r\n        drop: function drop() {\r\n          self.dropPositions = [];\r\n        },\r\n        out: function out() {\r\n          self.dropOverElement = null;\r\n        },\r\n        over: function over() {\r\n          // Is the element currently being dragged a column group?\r\n          if ((0, _registry.getDraggedContentTypeConfig)() === _config.getContentTypeConfig(\"column-group\")) {\r\n            // Always calculate drop positions when an element is dragged over\r\n            self.dropOverElement = true;\r\n          } else {\r\n            self.dropOverElement = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Spread any empty space across the other columns when a column is removed\r\n     *\r\n     * @param {number} removedIndex\r\n     */\r\n    ;\r\n\r\n    _proto.spreadWidth = function spreadWidth(removedIndex) {\r\n      if (this.contentType.children().length === 0) {\r\n        return;\r\n      }\r\n\r\n      var availableWidth = 100 - this.resizeUtils.getColumnsWidth();\r\n      var formattedAvailableWidth = (0, _resize.getRoundedColumnWidth)(availableWidth);\r\n      var totalChildColumns = this.contentType.children().length;\r\n      var allowedColumnWidths = [];\r\n      var spreadAcross = 1;\r\n      var spreadAmount;\r\n\r\n      for (var i = this.resizeUtils.getGridSize(); i > 0; i--) {\r\n        allowedColumnWidths.push((0, _resize.getRoundedColumnWidth)(100 / this.resizeUtils.getGridSize() * i));\r\n      } // Determine how we can spread the empty space across the columns\r\n\r\n\r\n      for (var _i = totalChildColumns; _i > 0; _i--) {\r\n        var potentialWidth = Math.floor(formattedAvailableWidth / _i);\r\n\r\n        for (var _iterator2 = _createForOfIteratorHelperLoose(allowedColumnWidths), _step2; !(_step2 = _iterator2()).done;) {\r\n          var width = _step2.value;\r\n\r\n          if (potentialWidth === Math.floor(width)) {\r\n            spreadAcross = _i;\r\n            spreadAmount = formattedAvailableWidth / _i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (spreadAmount) {\r\n          break;\r\n        }\r\n      } // Let's spread the width across the columns\r\n\r\n\r\n      for (var _i2 = 1; _i2 <= spreadAcross; _i2++) {\r\n        var columnToModify = void 0; // As the original column has been removed from the array, check the new index for a column\r\n\r\n        if (removedIndex <= this.contentType.children().length && typeof this.contentType.children()[removedIndex] !== \"undefined\") {\r\n          columnToModify = this.contentType.children()[removedIndex];\r\n        }\r\n\r\n        if (!columnToModify && removedIndex - _i2 >= 0 && typeof this.contentType.children()[removedIndex - _i2] !== \"undefined\") {\r\n          columnToModify = this.contentType.children()[removedIndex - _i2];\r\n        }\r\n\r\n        if (columnToModify) {\r\n          (0, _resize.updateColumnWidth)(columnToModify, this.resizeUtils.getColumnWidth(columnToModify) + spreadAmount);\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Remove self if we contain no children\r\n     */\r\n    ;\r\n\r\n    _proto.removeIfEmpty = function removeIfEmpty() {\r\n      if (this.contentType.children().length === 0) {\r\n        this.contentType.parentContentType.removeChild(this.contentType);\r\n        return;\r\n      }\r\n    }\r\n    /**\r\n     * Record the grid resize operation into a history for later restoration\r\n     *\r\n     * @param {number} newGridSize\r\n     */\r\n    ;\r\n\r\n    _proto.recordGridResize = function recordGridResize(newGridSize) {\r\n      var _this12 = this;\r\n\r\n      // @todo evaluate utility of having a grid size history\r\n      return;\r\n\r\n      if (!this.gridSizeHistory.has(newGridSize)) {\r\n        var columnWidths = [];\r\n        this.contentType.getChildren()().forEach(function (column) {\r\n          columnWidths.push(_this12.resizeUtils.getColumnWidth(column));\r\n        });\r\n        this.gridSizeHistory.set(newGridSize, columnWidths);\r\n      }\r\n    }\r\n    /**\r\n     * Figure out the maximum number of non-empty columns in various column lines\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.getNonEmptyColumnCount = function getNonEmptyColumnCount() {\r\n      var nonEmptyColumnCount = 0;\r\n      this.contentType.getChildren()().forEach(function (columnLine, index) {\r\n        var numEmptyColumns = 0;\r\n        var numCols = columnLine.getChildren()().length;\r\n        columnLine.getChildren()().forEach(function (column) {\r\n          if (column.getChildren()().length === 0) {\r\n            numEmptyColumns++;\r\n          }\r\n        });\r\n\r\n        if (numCols - numEmptyColumns > nonEmptyColumnCount) {\r\n          nonEmptyColumnCount = numCols - numEmptyColumns;\r\n        }\r\n      });\r\n      return nonEmptyColumnCount;\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/column-group/registry.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var dragColumn;\r\n  /**\r\n   * Retrieve the drag column from the registry\r\n   *\r\n   * @returns {ContentTypeCollectionInterface}\r\n   */\r\n\r\n  function getDragColumn() {\r\n    return dragColumn;\r\n  }\r\n  /**\r\n   * Remove the drag column reference\r\n   */\r\n\r\n\r\n  function removeDragColumn() {\r\n    dragColumn = null;\r\n  }\r\n  /**\r\n   * Set the drag column in the registry\r\n   *\r\n   * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n   */\r\n\r\n\r\n  function setDragColumn(column) {\r\n    dragColumn = column;\r\n  }\r\n\r\n  return {\r\n    getDragColumn: getDragColumn,\r\n    removeDragColumn: removeDragColumn,\r\n    setDragColumn: setDragColumn\r\n  };\r\n});\r\n//# sourceMappingURL=registry.js.map","Magento_PageBuilder/js/content-type/column-line/drag-and-drop.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Calculate the drop positions of a column group\r\n   *\r\n   * @param {ContentTypeCollectionInterface} group\r\n   * @returns {any[]}\r\n   */\r\n  function calculateDropPositions(line) {\r\n    var resizeUtils = line.preview.getResizeUtils();\r\n    var dropPositions = [];\r\n    line.children().forEach(function (column, index) {\r\n      var left = column.preview.element.position().left;\r\n      var width = column.preview.element.outerWidth(true);\r\n      var canShrink = resizeUtils.getAcceptedColumnWidth(resizeUtils.getColumnWidth(column).toString()) > resizeUtils.getSmallestColumnWidth();\r\n      dropPositions.push({\r\n        affectedColumn: column,\r\n        canShrink: canShrink,\r\n        insertIndex: index,\r\n        left: left,\r\n        placement: \"left\",\r\n        right: left + width / 2\r\n      }, {\r\n        affectedColumn: column,\r\n        canShrink: canShrink,\r\n        insertIndex: index + 1,\r\n        left: left + width / 2,\r\n        placement: \"right\",\r\n        right: left + width\r\n      });\r\n    });\r\n    return dropPositions;\r\n  }\r\n\r\n  return {\r\n    calculateDropPositions: calculateDropPositions\r\n  };\r\n});\r\n//# sourceMappingURL=drag-and-drop.js.map","Magento_PageBuilder/js/content-type/column-line/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type/column-group/factory\", \"Magento_PageBuilder/js/content-type/column-group/registry\", \"Magento_PageBuilder/js/drag-drop/move-content-type\", \"Magento_PageBuilder/js/drag-drop/registry\", \"Magento_PageBuilder/js/drag-drop/sortable\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/utils/create-stylesheet\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/column-group/grid-size\", \"Magento_PageBuilder/js/content-type/column/resize\", \"Magento_PageBuilder/js/content-type/preview-collection\", \"Magento_PageBuilder/js/content-type/column-line/drag-and-drop\"], function (_jquery, _knockout, _contentTypeFactory, _factory, _registry, _moveContentType, _registry2, _sortable, _events, _createStylesheet, _underscore, _config, _gridSize, _resize, _previewCollection, _dragAndDrop) {\r\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     *\r\n     * @param {ContentTypeCollection} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this;\r\n      _this.resizing = _knockout.observable(false);\r\n      _this.gridSizeArray = _knockout.observableArray([]);\r\n      _this.dropPositions = [];\r\n      _this.resizeHistory = {\r\n        left: [],\r\n        right: []\r\n      };\r\n      _this.interactionLevel = 0;\r\n      _this.lineDropperHeight = 50;\r\n      _this.resizeUtils = new _resize(_this.contentType.parentContentType, _this.contentType);\r\n\r\n      _events.on(\"contentType:removeAfter\", function (args) {\r\n        if (args.parentContentType && args.parentContentType.id === _this.contentType.id) {\r\n          _underscore.defer(function () {\r\n            _this.spreadWidth(args.index);\r\n          });\r\n        }\r\n      }); // Listen for resizing events from child columns\r\n\r\n\r\n      _events.on(\"column:resizeHandleBindAfter\", function (args) {\r\n        // Does the events content type match the previews column group?\r\n        if (args.columnLine.id === _this.contentType.id) {\r\n          _this.registerResizeHandle(args.column, args.handle);\r\n        }\r\n      });\r\n\r\n      _events.on(\"column:initializeAfter\", function (args) {\r\n        // Does the events parent match the previews column group?\r\n        if (args.columnGroup.id === _this.contentType.id) {\r\n          _this.bindDraggable(args.column);\r\n        }\r\n      });\r\n\r\n      var parentPreview = _this.contentType.parentContentType.preview;\r\n\r\n      _this.gridSizeArray(parentPreview.gridSizeArray());\r\n\r\n      parentPreview.gridSizeArray.subscribe(function (gridSize) {\r\n        _this.gridSizeArray(gridSize);\r\n      });\r\n\r\n      _this.contentType.children.subscribe(_underscore.debounce(_this.removeIfEmpty.bind(_assertThisInitialized(_this)), 50));\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      _previewCollection2.prototype.bindEvents.call(this);\r\n\r\n      if (_config.getContentTypeConfig(\"column\")) {\r\n        _events.on(\"column-line:dropAfter\", function (args) {\r\n          if (args.id === _this2.contentType.id) {\r\n            _this2.createColumns();\r\n          }\r\n        });\r\n      }\r\n\r\n      _events.on(\"column:initializeAfter\", function (args) {\r\n        // Does the events parent match the previews column group?\r\n        if (args.columnLine.id === _this2.contentType.id) {\r\n          _this2.bindDraggable(args.column);\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Init the droppable & resizing interactions\r\n     *\r\n     * @param line\r\n     */\r\n    ;\r\n\r\n    _proto.bindInteractions = function bindInteractions(line) {\r\n      this.element = (0, _jquery)(line);\r\n      this.initDroppable(this.element);\r\n      this.initMouseMove(this.element); // Handle the mouse leaving the window\r\n      //  $(\"body\").mouseleave(this.endAllInteractions.bind(this));\r\n    }\r\n    /**\r\n     * Init the drop placeholder\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.bindDropPlaceholder = function bindDropPlaceholder(element) {\r\n      this.dropPlaceholder = (0, _jquery)(element);\r\n    }\r\n    /**\r\n     * Init the drop placeholder\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.bindColumnLineBottomDropPlaceholder = function bindColumnLineBottomDropPlaceholder(element) {\r\n      this.columnLineBottomDropPlaceholder = (0, _jquery)(element);\r\n    }\r\n    /**\r\n     * Init the drop placeholder\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.bindColumnLineDropPlaceholder = function bindColumnLineDropPlaceholder(element) {\r\n      this.columnLineDropPlaceholder = (0, _jquery)(element);\r\n    }\r\n    /**\r\n     * Init the move placeholder\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.bindMovePlaceholder = function bindMovePlaceholder(element) {\r\n      this.movePlaceholder = (0, _jquery)(element);\r\n    }\r\n    /**\r\n     * Retrieve the ghost element from the template\r\n     *\r\n     * @param {Element} ghost\r\n     */\r\n    ;\r\n\r\n    _proto.bindGhost = function bindGhost(ghost) {\r\n      this.resizeGhost = (0, _jquery)(ghost);\r\n    }\r\n    /**\r\n     * Retrieve the resize utils\r\n     *\r\n     * @returns {Resize}\r\n     */\r\n    ;\r\n\r\n    _proto.getResizeUtils = function getResizeUtils() {\r\n      return this.resizeUtils;\r\n    }\r\n    /**\r\n     * Bind draggable instances to the child columns\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     */\r\n    ;\r\n\r\n    _proto.bindDraggable = function bindDraggable(column) {\r\n      var _this3 = this;\r\n\r\n      column.preview.element.draggable({\r\n        appendTo: \"body\",\r\n        containment: \"body\",\r\n        cursor: \"-webkit-grabbing\",\r\n        handle: \".move-column\",\r\n        revertDuration: 250,\r\n        helper: function helper() {\r\n          var helper = (0, _jquery)(this).clone();\r\n          helper.css({\r\n            height: (0, _jquery)(this).outerHeight() + \"px\",\r\n            minHeight: 0,\r\n            opacity: 0.5,\r\n            pointerEvents: \"none\",\r\n            width: (0, _jquery)(this).outerWidth() + \"px\",\r\n            zIndex: 5000\r\n          });\r\n          return helper;\r\n        },\r\n        start: function start(event) {\r\n          var columnInstance = _knockout.dataFor((0, _jquery)(event.target)[0]); // Use the global state as columns can be dragged between groups\r\n\r\n\r\n          (0, _registry.setDragColumn)(columnInstance.contentType);\r\n          _this3.dropPositions = (0, _dragAndDrop.calculateDropPositions)(_this3.contentType);\r\n          _this3.startDragEvent = event;\r\n\r\n          _events.trigger(\"column:dragStart\", {\r\n            column: columnInstance,\r\n            stageId: _this3.contentType.stageId\r\n          });\r\n\r\n          _events.trigger(\"stage:interactionStart\", {\r\n            stageId: _this3.contentType.stageId\r\n          });\r\n        },\r\n        stop: function stop() {\r\n          var draggedColumn = (0, _registry.getDragColumn)();\r\n\r\n          if (_this3.movePosition && draggedColumn) {\r\n            // Check if we're moving within the same group, even though this function will\r\n            // only ever run on the group that bound the draggable event\r\n            if (draggedColumn.parentContentType === _this3.contentType) {\r\n              _this3.onColumnSort(draggedColumn, _this3.movePosition.insertIndex);\r\n\r\n              _this3.movePosition = null; // todo see from column group\r\n            }\r\n          }\r\n\r\n          (0, _registry.removeDragColumn)();\r\n\r\n          _this3.dropPlaceholder.removeClass(\"left right\");\r\n\r\n          _this3.movePlaceholder.removeClass(\"active\");\r\n\r\n          _this3.movePosition = null;\r\n          _this3.startDragEvent = null;\r\n\r\n          _events.trigger(\"column:dragStop\", {\r\n            column: draggedColumn,\r\n            stageId: _this3.contentType.stageId\r\n          });\r\n\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            stageId: _this3.contentType.stageId\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Handle a column being sorted into a new position in the column line\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {number} newIndex\r\n     */\r\n    ;\r\n\r\n    _proto.onColumnSort = function onColumnSort(column, newIndex) {\r\n      var currentIndex = (0, _resize.getColumnIndexInLine)(column);\r\n\r\n      if (currentIndex !== newIndex) {\r\n        if (currentIndex < newIndex) {\r\n          // As we're moving an array item the keys all reduce by 1\r\n          --newIndex;\r\n        } // Move the content type\r\n\r\n\r\n        (0, _moveContentType.moveContentType)(column, newIndex);\r\n      }\r\n    }\r\n    /**\r\n     * Handle a new column being dropped into the group\r\n     *\r\n     * @param {DropPosition} dropPosition\r\n     */\r\n    ;\r\n\r\n    _proto.onNewColumnDrop = function onNewColumnDrop(dropPosition) {\r\n      var _this4 = this;\r\n\r\n      // Create our new column\r\n      (0, _factory.createColumn)(this.contentType, this.resizeUtils.getSmallestColumnWidth(), dropPosition.insertIndex).then(function () {\r\n        var newWidth = _this4.resizeUtils.getAcceptedColumnWidth((_this4.resizeUtils.getColumnWidth(dropPosition.affectedColumn) - _this4.resizeUtils.getSmallestColumnWidth()).toString()); // Reduce the affected columns width by the smallest column width\r\n\r\n\r\n        (0, _resize.updateColumnWidth)(dropPosition.affectedColumn, newWidth);\r\n      });\r\n    }\r\n    /**\r\n     * Handle an existing column being dropped into a different column line\r\n     *\r\n     * @param {DropPosition} movePosition\r\n     */\r\n    ;\r\n\r\n    _proto.onExistingColumnDrop = function onExistingColumnDrop(movePosition) {\r\n      var _this5 = this;\r\n\r\n      var column = (0, _registry.getDragColumn)();\r\n      var sourceLinePreview = column.parentContentType.preview;\r\n      var modifyOldNeighbour; // Determine which old neighbour we should modify\r\n\r\n      var oldWidth = sourceLinePreview.getResizeUtils().getColumnWidth(column);\r\n      var direction = \"+1\"; // Retrieve the adjacent column either +1 or -1\r\n\r\n      if ((0, _resize.getAdjacentColumn)(column, \"+1\")) {\r\n        modifyOldNeighbour = (0, _resize.getAdjacentColumn)(column, \"+1\");\r\n      } else if ((0, _resize.getAdjacentColumn)(column, \"-1\")) {\r\n        direction = \"-1\";\r\n        modifyOldNeighbour = (0, _resize.getAdjacentColumn)(column, \"-1\");\r\n      } // Modify the old neighbour\r\n\r\n\r\n      var oldNeighbourWidth = 100;\r\n\r\n      if (modifyOldNeighbour) {\r\n        oldNeighbourWidth = sourceLinePreview.getResizeUtils().getAcceptedColumnWidth((oldWidth + sourceLinePreview.getResizeUtils().getColumnWidth(modifyOldNeighbour)).toString());\r\n      } // Move the content type\r\n\r\n\r\n      if (this.columnLineDropPlaceholder.hasClass(\"active\")) {\r\n        // if new column line placeholders are visible, add new column line and move column there\r\n        (0, _factory.createColumnLine)(this.contentType.parentContentType, this.resizeUtils.getSmallestColumnWidth(), this.getNewColumnLineIndex()).then(function (columnLine) {\r\n          (0, _moveContentType.moveContentType)(column, 0, columnLine);\r\n          (0, _resize.updateColumnWidth)(column, 100);\r\n\r\n          if (modifyOldNeighbour) {\r\n            (0, _resize.updateColumnWidth)(modifyOldNeighbour, oldNeighbourWidth);\r\n          }\r\n\r\n          _this5.fireMountEvent(_this5.contentType, column);\r\n        });\r\n      } else if (this.columnLineBottomDropPlaceholder.hasClass(\"active\")) {\r\n        // if new column line placeholders are visible, add new column line and move column there\r\n        (0, _factory.createColumnLine)(this.contentType.parentContentType, this.resizeUtils.getSmallestColumnWidth(), this.getNewColumnLineIndex()).then(function (columnLine) {\r\n          (0, _moveContentType.moveContentType)(column, 0, columnLine);\r\n          (0, _resize.updateColumnWidth)(column, 100);\r\n\r\n          if (modifyOldNeighbour) {\r\n            (0, _resize.updateColumnWidth)(modifyOldNeighbour, oldNeighbourWidth);\r\n          }\r\n\r\n          _this5.fireMountEvent(_this5.contentType, column);\r\n        });\r\n      } else {\r\n        (0, _moveContentType.moveContentType)(column, movePosition.insertIndex, this.contentType);\r\n\r\n        if (modifyOldNeighbour) {\r\n          (0, _resize.updateColumnWidth)(modifyOldNeighbour, oldNeighbourWidth);\r\n        }\r\n\r\n        var newNeighbourWidth = this.resizeUtils.getAcceptedColumnWidth((this.resizeUtils.getColumnWidth(movePosition.affectedColumn) - oldWidth).toString());\r\n        var newNeighbour = movePosition.affectedColumn;\r\n        var totalWidthAdjusted = 0;\r\n        (0, _resize.updateColumnWidth)(column, oldWidth);\r\n\r\n        while (true) {\r\n          // take width from all neighbours in one direction till the entire width is obtained\r\n          if (newNeighbourWidth <= 0) {\r\n            newNeighbourWidth = this.resizeUtils.getSmallestColumnWidth();\r\n            var originalWidthOfNeighbour = this.resizeUtils.getColumnWidth(newNeighbour);\r\n            (0, _resize.updateColumnWidth)(newNeighbour, newNeighbourWidth);\r\n            totalWidthAdjusted += originalWidthOfNeighbour - newNeighbourWidth;\r\n          } else {\r\n            (0, _resize.updateColumnWidth)(newNeighbour, newNeighbourWidth);\r\n            break;\r\n          }\r\n\r\n          if (direction === \"+1\") {\r\n            newNeighbour = (0, _resize.getAdjacentColumn)(newNeighbour, \"+1\");\r\n          } else {\r\n            newNeighbour = (0, _resize.getAdjacentColumn)(newNeighbour, \"-1\");\r\n          }\r\n\r\n          if (!newNeighbour) {\r\n            (0, _resize.updateColumnWidth)(column, totalWidthAdjusted);\r\n            break;\r\n          }\r\n\r\n          var neighbourExistingWidth = this.resizeUtils.getColumnWidth(newNeighbour);\r\n          newNeighbourWidth = neighbourExistingWidth - (oldWidth - totalWidthAdjusted);\r\n\r\n          if (newNeighbourWidth < 0.001) {\r\n            newNeighbourWidth = 0;\r\n          }\r\n        }\r\n\r\n        var totalWidth = 0;\r\n        this.contentType.children().forEach(function (columnChild) {\r\n          totalWidth += _this5.resizeUtils.getColumnWidth(columnChild);\r\n        });\r\n\r\n        if (totalWidth > 100) {\r\n          // take extra width from newly moved column\r\n          (0, _resize.updateColumnWidth)(column, this.resizeUtils.getColumnWidth(column) - (totalWidth - 100));\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Init the resizing events on the group\r\n     *\r\n     * @param {JQuery} line\r\n     */\r\n    ;\r\n\r\n    _proto.initMouseMove = function initMouseMove(line) {\r\n      var _this6 = this;\r\n\r\n      var intersects = false;\r\n      (0, _jquery)(document).on(\"mousemove touchmove\", function (event) {\r\n        if (line.parents(_sortable.hiddenClass).length > 0) {\r\n          return;\r\n        }\r\n\r\n        var linePosition = _this6.getLinePosition(line); // If we're handling a touch event we need to pass through the page X & Y\r\n\r\n\r\n        if (event.type === \"touchmove\") {\r\n          event.pageX = event.originalEvent.pageX;\r\n          event.pageY = event.originalEvent.pageY;\r\n        }\r\n\r\n        if (_this6.eventIntersectsLine(event, linePosition)) {\r\n          intersects = true; // @todo re-instate onResizingMouseMove\r\n\r\n          _this6.onResizingMouseMove(event, line, linePosition);\r\n\r\n          _this6.onDraggingMouseMove(event, line, linePosition);\r\n\r\n          _this6.onDroppingMouseMove(event, line, linePosition);\r\n        } else {\r\n          intersects = false;\r\n          _this6.linePositionCache = null;\r\n          _this6.dropPosition = null;\r\n\r\n          _this6.dropPlaceholder.removeClass(\"left right\");\r\n\r\n          _this6.columnLineDropPlaceholder.removeClass(\"active\");\r\n\r\n          _this6.columnLineBottomDropPlaceholder.removeClass(\"active\");\r\n\r\n          _this6.columnLineBottomDropPlaceholder.hide();\r\n\r\n          _this6.columnLineDropPlaceholder.hide(); // @todo combine active and show/hide functionality for columnLineDropPlaceholder\r\n          //  this.movePlaceholder.css(\"left\", \"\").removeClass(\"active\");\r\n\r\n        }\r\n      }).on(\"mouseup touchend\", function () {\r\n        if (intersects) {\r\n          _this6.handleMouseUp();\r\n        }\r\n\r\n        intersects = false;\r\n        _this6.dropPosition = null;\r\n\r\n        _this6.endAllInteractions();\r\n\r\n        _underscore.defer(function () {\r\n          // Re-enable any disabled sortable areas\r\n          line.find(\".ui-sortable\").each(function () {\r\n            if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n              (0, _jquery)(this).sortable(\"option\", \"disabled\", false);\r\n            }\r\n          });\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * End all current interactions\r\n     */\r\n    ;\r\n\r\n    _proto.endAllInteractions = function endAllInteractions() {\r\n      if (this.resizing() === true) {\r\n        for (; this.interactionLevel > 0; this.interactionLevel--) {\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            stageId: this.contentType.stageId\r\n          });\r\n        }\r\n      }\r\n\r\n      this.linePositionCache = null;\r\n      this.dropPosition = null;\r\n      this.dropPlaceholder.removeClass(\"left right\");\r\n      this.columnLineDropPlaceholder.removeClass(\"active\");\r\n      this.columnLineBottomDropPlaceholder.removeClass(\"active\");\r\n      this.columnLineBottomDropPlaceholder.hide();\r\n      this.columnLineDropPlaceholder.hide();\r\n      this.resizing(false);\r\n      this.resizeMouseDown = null;\r\n      this.resizeLeftLastColumnShrunk = this.resizeRightLastColumnShrunk = null;\r\n      this.dropPositions = [];\r\n      this.unsetResizingColumns(); // Change the cursor back\r\n\r\n      (0, _jquery)(\"body\").css(\"cursor\", \"\");\r\n      this.movePlaceholder.css(\"left\", \"\").removeClass(\"active\");\r\n      this.resizeGhost.removeClass(\"active\"); // Reset the line positions cache\r\n\r\n      this.linePositionCache = null;\r\n    }\r\n    /**\r\n     * Handle the mouse up action, either adding a new column or moving an existing\r\n     */\r\n    ;\r\n\r\n    _proto.handleMouseUp = function handleMouseUp() {\r\n      var self = this;\r\n      var dragColumn = (0, _registry.getDragColumn)();\r\n\r\n      if ((this.columnLineDropPlaceholder.hasClass(\"active\") || this.columnLineBottomDropPlaceholder.hasClass(\"active\")) && !dragColumn) {\r\n        (0, _factory.createColumnLine)(this.contentType.parentContentType, this.resizeUtils.getSmallestColumnWidth(), this.getNewColumnLineIndex()).then(function (columnLine) {\r\n          _events.trigger(columnLine.config.name + \":dropAfter\", {\r\n            id: columnLine.id,\r\n            columnLine: columnLine\r\n          });\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (this.dropOverElement && this.dropPosition) {\r\n        this.onNewColumnDrop(this.dropPosition);\r\n        this.dropOverElement = null; // Re-enable the parent disabled sortable instance\r\n\r\n        _underscore.defer(function () {\r\n          (0, _jquery)(\".element-children.ui-sortable-disabled\").each(function () {\r\n            (0, _jquery)(this).sortable(\"option\", \"disabled\", false);\r\n          });\r\n        });\r\n      }\r\n\r\n      var column = (0, _registry.getDragColumn)();\r\n\r\n      if (this.isColumnBeingMovedToAnotherColumnLine()) {\r\n        this.onExistingColumnDrop(this.movePosition);\r\n      }\r\n    }\r\n    /**\r\n     * Does the current event intersect with the line?\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {LinePositionCache} groupPosition\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.eventIntersectsLine = function eventIntersectsLine(event, groupPosition) {\r\n      return event.pageY > groupPosition.top && event.pageY < groupPosition.top + groupPosition.outerHeight && event.pageX > groupPosition.left && event.pageX < groupPosition.left + groupPosition.outerWidth;\r\n    }\r\n    /**\r\n     * Handle a column being dragged around the group\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {JQuery} line\r\n     * @param {LinePositionCache} linePosition\r\n     */\r\n    ;\r\n\r\n    _proto.onDraggingMouseMove = function onDraggingMouseMove(event, line, linePosition) {\r\n      var dragColumn = (0, _registry.getDragColumn)();\r\n\r\n      if (dragColumn) {\r\n        // If the drop positions haven't been calculated for this line do so now\r\n        if (this.dropPositions.length === 0) {\r\n          this.dropPositions = (0, _dragAndDrop.calculateDropPositions)(this.contentType);\r\n        }\r\n\r\n        var columnInstance = dragColumn;\r\n        var currentX = event.pageX - linePosition.left; // Are we within the same column line or have we ended up over another?\r\n\r\n        if (columnInstance.parentContentType === this.contentType && this.startDragEvent) {\r\n          var dragDirection = event.pageX <= this.startDragEvent.pageX ? \"left\" : \"right\";\r\n          var adjacentLeftColumn = (0, _resize.getAdjacentColumn)(dragColumn, \"-1\"); // Determine the current move position based on the cursors position and direction of drag\r\n\r\n          this.movePosition = this.dropPositions.find(function (position) {\r\n            return currentX > position.left && currentX < position.right && position.placement === dragDirection && position.affectedColumn !== dragColumn;\r\n          }); // Differences in the element & event positions cause a right movement to activate on the left column\r\n\r\n          if (this.movePosition && dragDirection === \"right\" && this.movePosition.affectedColumn === adjacentLeftColumn) {\r\n            this.movePosition = null;\r\n          }\r\n\r\n          if (this.movePosition && !this.isNewLinePlaceDropPlaceholderVisible(event, linePosition) && !this.isNewLineBottomPlaceDropPlaceholderVisible(event, linePosition)) {\r\n            this.dropPlaceholder.removeClass(\"left right\");\r\n            this.movePlaceholder.css({\r\n              left: this.movePosition.placement === \"left\" ? this.movePosition.left : \"\",\r\n              right: this.movePosition.placement === \"right\" ? linePosition.width - this.movePosition.right : \"\",\r\n              width: dragColumn.preview.element.outerWidth() + \"px\"\r\n            }).addClass(\"active\");\r\n          } else {\r\n            this.movePlaceholder.removeClass(\"active\");\r\n          }\r\n        } else {\r\n          // If we're moving to another column line we utilise the existing drop placeholder\r\n          this.movePosition = this.dropPositions.find(function (position) {\r\n            return currentX > position.left && currentX <= position.right && position.canShrink;\r\n          });\r\n\r\n          if (this.movePosition && !this.isNewLinePlaceDropPlaceholderVisible(event, linePosition)) {\r\n            var classToRemove = this.movePosition.placement === \"left\" ? \"right\" : \"left\";\r\n            this.movePlaceholder.removeClass(\"active\");\r\n            this.dropPlaceholder.removeClass(classToRemove).css({\r\n              left: this.movePosition.placement === \"left\" ? this.movePosition.left : \"\",\r\n              right: this.movePosition.placement === \"right\" ? linePosition.width - this.movePosition.right : \"\",\r\n              width: linePosition.width / this.resizeUtils.getGridSize() + \"px\"\r\n            }).addClass(this.movePosition.placement);\r\n          } else {\r\n            this.dropPlaceholder.removeClass(\"left right\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Handle the resizing on mouse move, we always resize a pair of columns at once\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {JQuery} group\r\n     * @param {GroupPositionCache} groupPosition\r\n     */\r\n    ;\r\n\r\n    _proto.onResizingMouseMove = function onResizingMouseMove(event, group, groupPosition) {\r\n      var _this7 = this;\r\n\r\n      var newColumnWidth;\r\n\r\n      if (this.resizeMouseDown) {\r\n        event.preventDefault();\r\n        var currentPos = event.pageX;\r\n        var resizeColumnLeft = this.resizeColumnInstance.preview.element.offset().left;\r\n        var resizeColumnWidth = this.resizeColumnInstance.preview.element.outerWidth();\r\n        var resizeHandlePosition = resizeColumnLeft + resizeColumnWidth;\r\n        var direction = currentPos >= resizeHandlePosition ? \"right\" : \"left\";\r\n        var adjustedColumn;\r\n        var modifyColumnInPair; // We need to know if we're modifying the left or right column in the pair\r\n\r\n        var usedHistory; // Was the adjusted column pulled from history?\r\n        // Determine which column in the group should be adjusted for this action\r\n\r\n        var _this$resizeUtils$det = this.resizeUtils.determineAdjustedColumn(currentPos, this.resizeColumnInstance, this.resizeHistory);\r\n\r\n        adjustedColumn = _this$resizeUtils$det[0];\r\n        modifyColumnInPair = _this$resizeUtils$det[1];\r\n        usedHistory = _this$resizeUtils$det[2];\r\n        // Calculate the ghost width based on mouse position and bounds of allowed sizes\r\n        var ghostWidth = this.resizeUtils.calculateGhostWidth(groupPosition, currentPos, this.resizeColumnInstance, modifyColumnInPair, this.resizeMaxGhostWidth);\r\n        this.resizeGhost.width(ghostWidth - 15 + \"px\").addClass(\"active\");\r\n\r\n        if (adjustedColumn && this.resizeColumnWidths) {\r\n          newColumnWidth = this.resizeColumnWidths.find(function (val) {\r\n            return (0, _resize.comparator)(currentPos, val.position, 35) && val.forColumn === modifyColumnInPair;\r\n          });\r\n\r\n          if (newColumnWidth) {\r\n            var mainColumn = this.resizeColumnInstance; // If we're using the left data set, we're actually resizing the right column of the group\r\n\r\n            if (modifyColumnInPair === \"right\") {\r\n              mainColumn = (0, _resize.getAdjacentColumn)(this.resizeColumnInstance, \"+1\");\r\n            } // Ensure we aren't resizing multiple times, also validate the last resize isn't the same as the\r\n            // one being performed now. This occurs as we re-calculate the column positions on resize, we have\r\n            // to use the comparator as the calculation may result in slightly different numbers due to rounding\r\n\r\n\r\n            if (this.resizeUtils.getColumnWidth(mainColumn) !== newColumnWidth.width && !(0, _resize.comparator)(this.resizeLastPosition, newColumnWidth.position, 10)) {\r\n              // If our previous action was to resize the right column in pair, and we're now dragging back\r\n              // to the right, but have matched a column for the left we need to fix the columns being\r\n              // affected\r\n              if (usedHistory && this.resizeLastColumnInPair === \"right\" && direction === \"right\" && newColumnWidth.forColumn === \"left\") {\r\n                var originalMainColumn = mainColumn;\r\n                mainColumn = adjustedColumn;\r\n                adjustedColumn = (0, _resize.getAdjacentColumn)(originalMainColumn, \"+1\");\r\n              }\r\n\r\n              this.recordResizeHistory(usedHistory, direction, adjustedColumn, modifyColumnInPair);\r\n              this.resizeLastPosition = newColumnWidth.position;\r\n              this.resizeLastColumnInPair = modifyColumnInPair; // Ensure the adjusted column is marked as resizing to animate correctly\r\n\r\n              this.setColumnsAsResizing(mainColumn, adjustedColumn);\r\n              this.onColumnResize(mainColumn, newColumnWidth.width, adjustedColumn); // Wait for the render cycle to finish from the above resize before re-calculating\r\n\r\n              _underscore.defer(function () {\r\n                // If we do a resize, re-calculate the column widths\r\n                _this7.resizeColumnWidths = _this7.resizeUtils.determineColumnWidths(_this7.resizeColumnInstance, groupPosition);\r\n                _this7.resizeMaxGhostWidth = (0, _resize.determineMaxGhostWidth)(_this7.resizeColumnWidths);\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Unset resizing flag on all child columns\r\n     */\r\n    ;\r\n\r\n    _proto.unsetResizingColumns = function unsetResizingColumns() {\r\n      this.contentType.children().forEach(function (column) {\r\n        column.preview.resizing(false);\r\n\r\n        if (column.preview.element) {\r\n          column.preview.element.css({\r\n            transition: \"\"\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param linePosition\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.isNewLinePlaceDropPlaceholderVisible = function isNewLinePlaceDropPlaceholderVisible(event, linePosition) {\r\n      var siblings = this.contentType.parentContentType.children();\r\n      var id = this.contentType.id;\r\n      var index = 0;\r\n      siblings.forEach(function (columnLine) {\r\n        if (columnLine.id === id) {\r\n          return false;\r\n        }\r\n\r\n        index++;\r\n      });\r\n      var draggedColumn = (0, _registry.getDragColumn)(); // show column line drop placeholder only for top column line in a group\r\n\r\n      return (this.dropOverElement || draggedColumn) && event.pageY > linePosition.top + 15 && event.pageY < linePosition.top + 15 + this.lineDropperHeight;\r\n    }\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param linePosition\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.isNewLineBottomPlaceDropPlaceholderVisible = function isNewLineBottomPlaceDropPlaceholderVisible(event, linePosition) {\r\n      var draggedColumn = (0, _registry.getDragColumn)();\r\n      return (this.dropOverElement || draggedColumn) && event.pageY < linePosition.top + 15 + this.element.outerHeight() && event.pageY > linePosition.top + 15 + this.element.outerHeight() - this.lineDropperHeight;\r\n    }\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param linePosition\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.isNewColumnDropPlaceholderVisible = function isNewColumnDropPlaceholderVisible(event, linePosition) {\r\n      var draggedColumn = (0, _registry.getDragColumn)();\r\n      return (this.dropOverElement || draggedColumn) && event.pageY > linePosition.top + 15 + this.lineDropperHeight && event.pageY < linePosition.top + 15 + linePosition.outerHeight - this.lineDropperHeight;\r\n    }\r\n    /**\r\n     * Handle mouse move events on when dropping elements\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {JQuery} line\r\n     * @param {LinePositionCache} linePosition\r\n     */\r\n    ;\r\n\r\n    _proto.onDroppingMouseMove = function onDroppingMouseMove(event, line, linePosition) {\r\n      var elementChildrenParent = line.parents(\".element-children\"); // Only initiate this process if we're within the group by a buffer to allow for sortable to function correctly\r\n\r\n      if (this.isNewLinePlaceDropPlaceholderVisible(event, linePosition)) {\r\n        this.dropPosition = null;\r\n        this.dropPlaceholder.removeClass(\"left right\");\r\n        this.columnLineDropPlaceholder.addClass(\"active\");\r\n        this.columnLineDropPlaceholder.show();\r\n        return this.handleLineDropMouseMove(event, line, linePosition);\r\n      } else if (this.isNewLineBottomPlaceDropPlaceholderVisible(event, linePosition)) {\r\n        this.dropPosition = null;\r\n        this.dropPlaceholder.removeClass(\"left right\");\r\n        this.columnLineBottomDropPlaceholder.addClass(\"active\");\r\n        this.columnLineBottomDropPlaceholder.show();\r\n        return this.handleLineDropMouseMove(event, line, linePosition);\r\n      } else if (this.dropOverElement) {\r\n        this.columnLineDropPlaceholder.hide();\r\n        this.columnLineBottomDropPlaceholder.hide();\r\n        this.columnLineBottomDropPlaceholder.removeClass(\"active\");\r\n        this.columnLineDropPlaceholder.removeClass(\"active\");\r\n      }\r\n\r\n      if (this.isNewColumnDropPlaceholderVisible(event, linePosition)) {\r\n        this.columnLineDropPlaceholder.hide();\r\n        this.columnLineDropPlaceholder.removeClass(\"active\");\r\n        this.columnLineBottomDropPlaceholder.hide();\r\n        this.columnLineBottomDropPlaceholder.removeClass(\"active\");\r\n        return this.handleColumnDropMouseMove(event, line, linePosition);\r\n      }\r\n    }\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param line\r\n     * @param linePosition\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.handleLineDropMouseMove = function handleLineDropMouseMove(event, line, linePosition) {\r\n      var elementChildrenParent = line.parents(\".element-children\"); // Disable the column line sortable instance\r\n      // Disable the column group sortable instance\r\n\r\n      if (elementChildrenParent.data(\"ui-sortable\")) {\r\n        elementChildrenParent.sortable(\"option\", \"disabled\", true);\r\n      }\r\n    }\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param line\r\n     * @param linePosition\r\n     * @private\r\n     */\r\n    ;\r\n\r\n    _proto.handleColumnDropMouseMove = function handleColumnDropMouseMove(event, line, linePosition) {\r\n      var elementChildrenParent = line.parents(\".element-children\"); // Only initiate this process if we're within the group by a buffer to allow for sortable to function correctly\r\n\r\n      if (this.dropOverElement && event.pageY > linePosition.top + 50 && event.pageY < linePosition.top + linePosition.outerHeight - 50) {\r\n        // Disable the column line sortable instance\r\n        if (elementChildrenParent.data(\"ui-sortable\")) {\r\n          elementChildrenParent.sortable(\"option\", \"disabled\", true);\r\n        }\r\n\r\n        var currentX = event.pageX - linePosition.left;\r\n        this.dropPosition = this.dropPositions.find(function (position) {\r\n          return currentX > position.left && currentX <= position.right && position.canShrink;\r\n        });\r\n\r\n        if (this.dropPosition) {\r\n          this.dropPlaceholder.removeClass(\"left right\").css({\r\n            left: this.dropPosition.placement === \"left\" ? this.dropPosition.left : \"\",\r\n            right: this.dropPosition.placement === \"right\" ? linePosition.width - this.dropPosition.right : \"\",\r\n            width: linePosition.width / this.resizeUtils.getGridSize() + \"px\"\r\n          }).addClass(this.dropPosition.placement);\r\n        }\r\n      } else if (this.dropOverElement) {\r\n        // Re-enable the column group sortable instance\r\n        if (elementChildrenParent.data(\"ui-sortable\")) {\r\n          elementChildrenParent.sortable(\"option\", \"disabled\", false);\r\n        }\r\n\r\n        this.dropPosition = null;\r\n        this.dropPlaceholder.removeClass(\"left right\");\r\n      }\r\n    }\r\n    /**\r\n     * Cache the groups positions\r\n     *\r\n     * @param {JQuery} line\r\n     * @returns {}\r\n     */\r\n    ;\r\n\r\n    _proto.getLinePosition = function getLinePosition(line) {\r\n      if (!this.linePositionCache) {\r\n        this.linePositionCache = {\r\n          top: line.offset().top,\r\n          left: line.offset().left,\r\n          width: line.width(),\r\n          height: line.height(),\r\n          outerWidth: line.outerWidth(),\r\n          outerHeight: line.outerHeight()\r\n        };\r\n      }\r\n\r\n      return this.linePositionCache;\r\n    }\r\n    /**\r\n     * Init the droppable functionality for new columns\r\n     *\r\n     * @param {JQuery} line\r\n     */\r\n    ;\r\n\r\n    _proto.initDroppable = function initDroppable(line) {\r\n      var self = this;\r\n      var headStyles;\r\n      line.droppable({\r\n        deactivate: function deactivate() {\r\n          self.dropOverElement = null;\r\n          self.dropPlaceholder.removeClass(\"left right\");\r\n\r\n          _underscore.defer(function () {\r\n            // Re-enable the column group sortable instance & all children sortable instances\r\n            line.parents(\".element-children\").each(function () {\r\n              if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n                (0, _jquery)(this).sortable(\"option\", \"disabled\", false);\r\n              }\r\n            });\r\n          });\r\n        },\r\n        activate: function activate() {\r\n          if ((0, _registry2.getDraggedContentTypeConfig)() === _config.getContentTypeConfig(\"column-group\")) {\r\n            var _ref;\r\n\r\n            line.find(\".ui-sortable\").each(function () {\r\n              if ((0, _jquery)(this).data(\"ui-sortable\")) {\r\n                (0, _jquery)(this).sortable(\"option\", \"disabled\", true);\r\n              }\r\n            });\r\n            var classes = [\".pagebuilder-content-type.pagebuilder-column .pagebuilder-drop-indicator\", \".pagebuilder-content-type.pagebuilder-column .empty-container .content-type-container:before\"]; // Ensure we don't display any drop indicators inside the column\r\n\r\n            headStyles = (0, _createStylesheet.createStyleSheet)((_ref = {}, _ref[classes.join(\", \")] = {\r\n              display: \"none!important\"\r\n            }, _ref));\r\n            document.head.appendChild(headStyles);\r\n          } else if (headStyles) {\r\n            headStyles.remove();\r\n            headStyles = null;\r\n          }\r\n        },\r\n        drop: function drop() {\r\n          self.dropPositions = [];\r\n          self.dropPlaceholder.removeClass(\"left right\");\r\n        },\r\n        out: function out() {\r\n          self.dropOverElement = null;\r\n          self.dropPlaceholder.removeClass(\"left right\");\r\n        },\r\n        over: function over() {\r\n          // Is the element currently being dragged a column group?\r\n          if ((0, _registry2.getDraggedContentTypeConfig)() === _config.getContentTypeConfig(\"column-group\") || (0, _registry2.getDraggedContentTypeConfig)() === _config.getContentTypeConfig(\"column\")) {\r\n            // Always calculate drop positions when an element is dragged over\r\n            var ownContentType = self.contentType;\r\n            self.dropPositions = (0, _dragAndDrop.calculateDropPositions)(ownContentType);\r\n            self.dropOverElement = true;\r\n          } else {\r\n            self.dropOverElement = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Spread any empty space across the other columns when a column is removed\r\n     *\r\n     * @param {number} removedIndex\r\n     */\r\n    ;\r\n\r\n    _proto.spreadWidth = function spreadWidth(removedIndex) {\r\n      if (this.contentType.children().length === 0) {\r\n        return;\r\n      }\r\n\r\n      var availableWidth = 100 - this.resizeUtils.getColumnsWidth();\r\n      var formattedAvailableWidth = (0, _resize.getRoundedColumnWidth)(availableWidth);\r\n      var totalChildColumns = this.contentType.children().length;\r\n      var allowedColumnWidths = [];\r\n      var spreadAcross = 1;\r\n      var spreadAmount;\r\n\r\n      for (var i = this.resizeUtils.getGridSize(); i > 0; i--) {\r\n        allowedColumnWidths.push((0, _resize.getRoundedColumnWidth)(100 / this.resizeUtils.getGridSize() * i));\r\n      } // Determine how we can spread the empty space across the columns\r\n\r\n\r\n      for (var _i = totalChildColumns; _i > 0; _i--) {\r\n        var potentialWidth = Math.floor(formattedAvailableWidth / _i);\r\n\r\n        for (var _iterator = _createForOfIteratorHelperLoose(allowedColumnWidths), _step; !(_step = _iterator()).done;) {\r\n          var width = _step.value;\r\n\r\n          if (potentialWidth === Math.floor(width)) {\r\n            spreadAcross = _i;\r\n            spreadAmount = formattedAvailableWidth / _i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (spreadAmount) {\r\n          break;\r\n        }\r\n      } // Let's spread the width across the columns\r\n\r\n\r\n      for (var _i2 = 1; _i2 <= spreadAcross; _i2++) {\r\n        var columnToModify = void 0; // As the original column has been removed from the array, check the new index for a column\r\n\r\n        if (removedIndex <= this.contentType.children().length && typeof this.contentType.children()[removedIndex] !== \"undefined\") {\r\n          columnToModify = this.contentType.children()[removedIndex];\r\n        }\r\n\r\n        if (!columnToModify && removedIndex - _i2 >= 0 && typeof this.contentType.children()[removedIndex - _i2] !== \"undefined\") {\r\n          columnToModify = this.contentType.children()[removedIndex - _i2];\r\n        }\r\n\r\n        if (columnToModify) {\r\n          (0, _resize.updateColumnWidth)(columnToModify, this.resizeUtils.getColumnWidth(columnToModify) + spreadAmount);\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Register a resize handle within a child column\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {JQuery} handle\r\n     */\r\n    ;\r\n\r\n    _proto.registerResizeHandle = function registerResizeHandle(column, handle) {\r\n      var _this8 = this;\r\n\r\n      handle.off(\"mousedown touchstart\");\r\n      handle.on(\"mousedown touchstart\", function (event) {\r\n        event.preventDefault();\r\n\r\n        var groupPosition = _this8.getLinePosition(_this8.element);\r\n\r\n        _this8.resizing(true); // @ts-ignore\r\n\r\n\r\n        _this8.resizeColumnInstance = column;\r\n        _this8.resizeColumnWidths = _this8.resizeUtils.determineColumnWidths(_this8.resizeColumnInstance, groupPosition);\r\n        _this8.resizeMaxGhostWidth = (0, _resize.determineMaxGhostWidth)(_this8.resizeColumnWidths); // Force the cursor to resizing\r\n\r\n        (0, _jquery)(\"body\").css(\"cursor\", \"col-resize\"); // Reset the resize history\r\n\r\n        _this8.resizeHistory = {\r\n          left: [],\r\n          right: []\r\n        };\r\n        _this8.resizeLastPosition = null;\r\n        _this8.resizeMouseDown = true;\r\n        ++_this8.interactionLevel;\r\n\r\n        _events.trigger(\"stage:interactionStart\", {\r\n          stageId: _this8.contentType.stageId\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Add Columns to the current Column Line\r\n     *\r\n     * @returns {Promise<ContentTypeCollectionInterface>}\r\n     */\r\n    ;\r\n\r\n    _proto.createColumns = function createColumns() {\r\n      var _this9 = this;\r\n\r\n      var defaultGridSize = (0, _gridSize.getDefaultGridSize)();\r\n      var col1Width = (Math.ceil(defaultGridSize / 2) * 100 / defaultGridSize).toFixed(Math.round(100 / defaultGridSize) !== 100 / defaultGridSize ? 8 : 0);\r\n      Promise.all([(0, _contentTypeFactory)(_config.getContentTypeConfig(\"column\"), this.contentType, this.contentType.stageId, {\r\n        width: col1Width + \"%\"\r\n      }), (0, _contentTypeFactory)(_config.getContentTypeConfig(\"column\"), this.contentType, this.contentType.stageId, {\r\n        width: 100 - parseFloat(col1Width) + \"%\"\r\n      })]).then(function (columns) {\r\n        _this9.contentType.addChild(columns[0], 0);\r\n\r\n        _this9.contentType.addChild(columns[1], 1);\r\n\r\n        _this9.fireMountEvent(_this9.contentType, columns[0], columns[1]);\r\n      });\r\n    }\r\n    /**\r\n     * Record the resizing history for this action\r\n     *\r\n     * @param {string} usedHistory\r\n     * @param {string} direction\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} adjustedColumn\r\n     * @param {string} modifyColumnInPair\r\n     */\r\n    ;\r\n\r\n    _proto.recordResizeHistory = function recordResizeHistory(usedHistory, direction, adjustedColumn, modifyColumnInPair) {\r\n      if (usedHistory) {\r\n        this.resizeHistory[usedHistory].pop();\r\n      }\r\n\r\n      this.resizeHistory[direction].push({\r\n        adjustedColumn: adjustedColumn,\r\n        modifyColumnInPair: modifyColumnInPair\r\n      });\r\n    }\r\n    /**\r\n     * Set columns in the group as resizing\r\n     *\r\n     * @param {Array<ContentTypeCollectionInterface<ColumnPreview>>} columns\r\n     */\r\n    ;\r\n\r\n    _proto.setColumnsAsResizing = function setColumnsAsResizing() {\r\n      for (var _len = arguments.length, columns = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        columns[_key] = arguments[_key];\r\n      }\r\n\r\n      columns.forEach(function (column) {\r\n        column.preview.resizing(true);\r\n        column.preview.element.css({\r\n          transition: \"width 350ms ease-in-out\"\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Handle a column being resized\r\n     *\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} column\r\n     * @param {number} width\r\n     * @param {ContentTypeCollectionInterface<ColumnPreview>} adjustedColumn\r\n     */\r\n    ;\r\n\r\n    _proto.onColumnResize = function onColumnResize(column, width, adjustedColumn) {\r\n      this.resizeUtils.resizeColumn(column, width, adjustedColumn);\r\n    }\r\n    /**\r\n     * Fire the mount event for content types\r\n     *\r\n     * @param {ContentTypeInterface[]} contentTypes\r\n     */\r\n    ;\r\n\r\n    _proto.fireMountEvent = function fireMountEvent() {\r\n      for (var _len2 = arguments.length, contentTypes = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n        contentTypes[_key2] = arguments[_key2];\r\n      }\r\n\r\n      contentTypes.forEach(function (contentType) {\r\n        _events.trigger(\"contentType:mountAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n\r\n        _events.trigger(contentType.config.name + \":mountAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Remove self if we contain no children\r\n     */\r\n    ;\r\n\r\n    _proto.removeIfEmpty = function removeIfEmpty() {\r\n      if (this.contentType.children().length === 0) {\r\n        this.contentType.parentContentType.removeChild(this.contentType);\r\n        return;\r\n      }\r\n    };\r\n\r\n    _proto.getNewColumnLineIndex = function getNewColumnLineIndex() {\r\n      var index = -1;\r\n      var self = this;\r\n\r\n      for (var _iterator2 = _createForOfIteratorHelperLoose(this.contentType.parentContentType.children()), _step2; !(_step2 = _iterator2()).done;) {\r\n        var child = _step2.value;\r\n        index++;\r\n\r\n        if (child.id === self.contentType.id) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (this.columnLineBottomDropPlaceholder.hasClass(\"active\")) {\r\n        // show the bottom drop placeholder\r\n        index++;\r\n      }\r\n\r\n      return index;\r\n    };\r\n\r\n    _proto.isColumnBeingMovedToAnotherColumnLine = function isColumnBeingMovedToAnotherColumnLine() {\r\n      var column = (0, _registry.getDragColumn)();\r\n\r\n      if (!column) {\r\n        // if no move position, column is not being moved.\r\n        return false;\r\n      }\r\n\r\n      if (column.parentContentType !== this.contentType) {\r\n        // if the parent content type is not same as this column line, column is being moved to new column line\r\n        return true;\r\n      }\r\n\r\n      if (column.parentContentType === this.contentType && (this.columnLineDropPlaceholder.hasClass(\"active\") || this.columnLineBottomDropPlaceholder.hasClass(\"active\"))) {\r\n        // since new column line drop placeholder is visible, column move should introduce a new column line\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/divider/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_hideShowOption, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      return _preview2.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/heading/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type-toolbar\", \"Magento_PageBuilder/js/utils/promise-deferred\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jquery, _events, _underscore, _hideShowOption, _contentTypeToolbar, _promiseDeferred, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _preview2.call(this, contentType, config, observableUpdater) || this;\r\n      _this.afterRenderDeferred = (0, _promiseDeferred)();\r\n      _this.toolbar = new _contentTypeToolbar(_assertThisInitialized(_this), _this.getToolbarOptions());\r\n      return _this;\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * On render init the heading\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.afterRender = function afterRender(element) {\r\n      this.element = element;\r\n      this.afterRenderDeferred.resolve(element);\r\n    };\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      _preview2.prototype.bindEvents.call(this); // When a heading is dropped for the first time show heading toolbar\r\n\r\n\r\n      _events.on(\"heading:dropAfter\", function (args) {\r\n        if (args.id === _this2.contentType.id) {\r\n          Promise.all([_this2.afterRenderDeferred.promise, _this2.toolbar.afterRenderDeferred.promise]).then(function (_ref) {\r\n            var element = _ref[0];\r\n\r\n            _underscore.defer(function () {\r\n              (0, _jquery)(element).focus();\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Get option value from observable data.\r\n     *\r\n     * @param {string} key\r\n     * @return {*}\r\n     */\r\n    ;\r\n\r\n    _proto.getOptionValue = function getOptionValue(key) {\r\n      if (key === \"heading_type\") {\r\n        return this.data.main.heading_type();\r\n      } else if (key === \"text_align\") {\r\n        return this.data.main.style().textAlign;\r\n      }\r\n\r\n      return;\r\n    }\r\n    /**\r\n     * Build and return the tool bar options for heading\r\n     *\r\n     * @returns {OptionInterface[]}\r\n     */\r\n    ;\r\n\r\n    _proto.getToolbarOptions = function getToolbarOptions() {\r\n      return [{\r\n        key: \"heading_type\",\r\n        type: \"select\",\r\n        values: [{\r\n          value: \"h1\",\r\n          label: \"H1\",\r\n          icon: \"\"\r\n        }, {\r\n          value: \"h2\",\r\n          label: \"H2\",\r\n          icon: \"\"\r\n        }, {\r\n          value: \"h3\",\r\n          label: \"H3\",\r\n          icon: \"\"\r\n        }, {\r\n          value: \"h4\",\r\n          label: \"H4\",\r\n          icon: \"\"\r\n        }, {\r\n          value: \"h5\",\r\n          label: \"H5\",\r\n          icon: \"\"\r\n        }, {\r\n          value: \"h6\",\r\n          label: \"H6\",\r\n          icon: \"\"\r\n        }]\r\n      }, {\r\n        key: \"text_align\",\r\n        type: \"select\",\r\n        values: [{\r\n          value: \"left\",\r\n          label: \"Left\",\r\n          icon: \"icon-pagebuilder-align-left\"\r\n        }, {\r\n          value: \"center\",\r\n          label: \"Center\",\r\n          icon: \"icon-pagebuilder-align-center\"\r\n        }, {\r\n          value: \"right\",\r\n          label: \"Right\",\r\n          icon: \"icon-pagebuilder-align-right\"\r\n        }]\r\n      }];\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/html/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_hideShowOption, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      return _preview2.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/image/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/uploader\", \"Magento_PageBuilder/js/content-type/preview\"], function (_events, _hideShowOption, _uploader, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      return _preview2.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Get registry callback reference to uploader UI component\r\n     *\r\n     * @returns {Uploader}\r\n     */\r\n    ;\r\n\r\n    _proto.getUploader = function getUploader() {\r\n      var initialImageValue = this.contentType.dataStore.get(this.config.additional_data.uploaderConfig.dataScope, \"\");\r\n      return new _uploader(\"imageuploader_\" + this.contentType.id, this.config.additional_data.uploaderConfig, this.contentType.id, this.contentType.dataStore, initialImageValue);\r\n    }\r\n    /**\r\n     * Get viewport image data\r\n     */\r\n    ;\r\n\r\n    _proto.getViewportImageData = function getViewportImageData() {\r\n      var desktopImageData = this.data.desktop_image;\r\n      var mobileImageData = this.data.mobile_image;\r\n      return this.viewport() === \"mobile\" && typeof mobileImageData !== \"undefined\" ? mobileImageData : desktopImageData;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this = this;\r\n\r\n      _preview2.prototype.bindEvents.call(this);\r\n\r\n      _events.on(\"image:mountAfter\", function (args) {\r\n        if (args.id === _this.contentType.id) {\r\n          _this.isSnapshot.subscribe(function (value) {\r\n            _this.changeUploaderControlsVisibility();\r\n          });\r\n\r\n          _this.changeUploaderControlsVisibility();\r\n        }\r\n      });\r\n\r\n      _events.on(this.config.name + \":\" + this.contentType.id + \":updateAfter\", function () {\r\n        var files = _this.contentType.dataStore.get(_this.config.additional_data.uploaderConfig.dataScope);\r\n\r\n        var imageObject = files ? files[0] : {};\r\n\r\n        _events.trigger(\"image:\" + _this.contentType.id + \":assignAfter\", imageObject);\r\n      });\r\n    }\r\n    /**\r\n     * Change uploader controls visibility\r\n     */\r\n    ;\r\n\r\n    _proto.changeUploaderControlsVisibility = function changeUploaderControlsVisibility() {\r\n      var _this2 = this;\r\n\r\n      this.getUploader().getUiComponent()(function (uploader) {\r\n        uploader.visibleControls = !_this2.isSnapshot();\r\n      });\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/map/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/utils/map\", \"module\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_knockout, _events, _map, _module, _hideShowOption, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      var _this;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      _this = _preview2.call.apply(_preview2, [this].concat(args)) || this;\r\n      _this.apiKeyValid = _knockout.observable(!!_module.config().apiKey);\r\n      _this.apiKeyErrorMessage = _module.config().apiKeyErrorMessage;\r\n      return _this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Open edit menu on map content type drop with a delay of 300ms\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this2 = this;\r\n\r\n      _preview2.prototype.bindEvents.call(this); // When the map api key fails, empties out the content type and adds the placeholder\r\n\r\n\r\n      _events.on(\"googleMaps:authFailure\", function () {\r\n        _this2.apiKeyValid(false);\r\n      });\r\n    }\r\n    /**\r\n     * Renders the map and subscribe to position for updates\r\n     *\r\n     * @param {Element} element\r\n     * @returns {void}\r\n     */\r\n    ;\r\n\r\n    _proto.renderMap = function renderMap(element) {\r\n      var _this3 = this;\r\n\r\n      if (!this.apiKeyValid()) {\r\n        return;\r\n      }\r\n\r\n      this.generateMap(element);\r\n      this.element = element;\r\n\r\n      if (this.mapElement && this.mapElement.map) {\r\n        this.data.main.attributes.subscribe(function () {\r\n          _this3.updateMap();\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * Generate maps\r\n     *\r\n     * @param {Element} element\r\n     * @returns {void}\r\n     */\r\n    ;\r\n\r\n    _proto.generateMap = function generateMap(element) {\r\n      var currentLocations = this.data.main.attributes()[\"data-locations\"] || \"[]\";\r\n      var controls = this.data.main.attributes()[\"data-show-controls\"] || \"true\";\r\n      var locations = [];\r\n      var options = {\r\n        disableDefaultUI: controls !== \"true\",\r\n        mapTypeControl: controls === \"true\"\r\n      };\r\n\r\n      if (currentLocations !== \"[]\") {\r\n        var mapData = this.getMapData();\r\n        locations = mapData.locations;\r\n        options = mapData.options;\r\n      }\r\n\r\n      this.mapElement = new _map(element, locations, options);\r\n    }\r\n    /**\r\n     * Updates map\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ;\r\n\r\n    _proto.updateMap = function updateMap() {\r\n      var mapData = this.getMapData();\r\n      this.mapElement.onUpdate(mapData.locations, mapData.options);\r\n    }\r\n    /**\r\n     * Get locations, center coordinates, and zoom from data.position\r\n     *\r\n     * @returns {Object}\r\n     */\r\n    ;\r\n\r\n    _proto.getMapData = function getMapData() {\r\n      var attributes = this.data.main.attributes();\r\n      var controls = attributes[\"data-show-controls\"];\r\n      var options = {\r\n        disableDefaultUI: controls !== \"true\",\r\n        mapTypeControl: controls === \"true\"\r\n      };\r\n      var locations = attributes[\"data-locations\"];\r\n\r\n      if (locations !== \"\" && typeof locations === \"string\") {\r\n        locations = JSON.parse(locations);\r\n      }\r\n\r\n      locations.forEach(function (location) {\r\n        location.position.latitude = parseFloat(location.position.latitude);\r\n        location.position.longitude = parseFloat(location.position.longitude);\r\n      });\r\n      return {\r\n        locations: locations,\r\n        options: options\r\n      };\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/map/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/utils/map'\r\n], function ($, GoogleMap) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var locations,\r\n            controls,\r\n            mapOptions = {};\r\n\r\n        element = element[0];\r\n\r\n        if (element !== undefined && element.hasAttribute('data-locations')) {\r\n\r\n            /**\r\n             * Set map display to none if no locations\r\n             */\r\n            if (element.getAttribute('data-locations') === '[]') {\r\n                $(element).hide();\r\n\r\n                return;\r\n            }\r\n            locations = JSON.parse(element.getAttribute('data-locations'));\r\n            locations.forEach(function (location) {\r\n                location.position.latitude = parseFloat(location.position.latitude);\r\n                location.position.longitude = parseFloat(location.position.longitude);\r\n            });\r\n            controls = element.getAttribute('data-show-controls');\r\n            mapOptions.disableDefaultUI = controls !== 'true';\r\n            mapOptions.mapTypeControl = controls === 'true';\r\n            new GoogleMap(element, locations, mapOptions);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/map/converter/attribute/locations.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Locations = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Locations() {}\r\n\r\n    var _proto = Locations.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (value && value !== \"\") {\r\n        return JSON.parse(value);\r\n      }\r\n\r\n      return [];\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var content = (0, _object.get)(data, name);\r\n\r\n      if (_underscore.isString(content) && content !== \"\") {\r\n        content = JSON.parse(content);\r\n      }\r\n\r\n      if (content && Object.keys(content).length) {\r\n        content.forEach(function (marker) {\r\n          if (marker.position) {\r\n            marker.position.latitude = parseFloat(marker.position.latitude);\r\n            marker.position.longitude = parseFloat(marker.position.longitude);\r\n          }\r\n        });\r\n        return JSON.stringify(content);\r\n      }\r\n\r\n      return JSON.stringify([]);\r\n    };\r\n\r\n    return Locations;\r\n  }();\r\n\r\n  return Locations;\r\n});\r\n//# sourceMappingURL=locations.js.map","Magento_PageBuilder/js/content-type/observable-updater/attributes.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _config, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Generate Knockout compatible bindings for the elements attribute binding\r\n   *\r\n   * @param elementName\r\n   * @param config\r\n   * @param data\r\n   * @param converterResolver\r\n   * @param converterPool\r\n   */\r\n  function generate(elementName, config, data, converterResolver, converterPool) {\r\n    var attributeData = {};\r\n\r\n    var _loop = function _loop() {\r\n      var attributeConfig = _step.value;\r\n\r\n      if (\"read\" === attributeConfig.persistence_mode) {\r\n        return \"continue\";\r\n      } // @ts-ignore\r\n\r\n\r\n      var value = void 0;\r\n\r\n      if (!!attributeConfig.static) {\r\n        value = attributeConfig.value;\r\n      } else {\r\n        value = (0, _object.get)(data, attributeConfig.var);\r\n      }\r\n\r\n      var converter = converterResolver(attributeConfig);\r\n\r\n      if (converterPool.get(converter)) {\r\n        value = converterPool.get(converter).toDom(attributeConfig.var, data);\r\n      } // Replacing src attribute with data-tmp-src to prevent img requests in iframe during master format rendering\r\n\r\n\r\n      if (_config.getMode() !== \"Preview\" && attributeConfig.name === \"src\" && _underscore.isString(value) && !value.indexOf(\"{{media url=\")) {\r\n        attributeData[\"data-tmp-\" + attributeConfig.name] = value; // @ts-ignore\r\n\r\n        Object.defineProperty(attributeData, attributeConfig.name, {\r\n          get: function get() {\r\n            return value;\r\n          }\r\n        });\r\n      } else {\r\n        attributeData[attributeConfig.name] = value;\r\n      }\r\n    };\r\n\r\n    for (var _iterator = _createForOfIteratorHelperLoose(config.attributes), _step; !(_step = _iterator()).done;) {\r\n      var _ret = _loop();\r\n\r\n      if (_ret === \"continue\") continue;\r\n    }\r\n\r\n    attributeData[\"data-element\"] = elementName;\r\n    return attributeData;\r\n  }\r\n\r\n  return generate;\r\n});\r\n//# sourceMappingURL=attributes.js.map","Magento_PageBuilder/js/content-type/observable-updater/css.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Generate Knockout compatible bindings for the elements css binding\r\n   *\r\n   * @param elementName\r\n   * @param config\r\n   * @param data\r\n   * @param converterResolver\r\n   * @param converterPool\r\n   * @param previousData\r\n   */\r\n  function generate(elementName, config, data, converterResolver, converterPool, previousData) {\r\n    var css = (0, _object.get)(data, config.css.var);\r\n    var newClasses = {};\r\n\r\n    if (css && css.length > 0) {\r\n      css.toString().split(\" \").map(function (value) {\r\n        return newClasses[value] = true;\r\n      });\r\n    }\r\n\r\n    for (var _i = 0, _Object$keys = Object.keys(previousData); _i < _Object$keys.length; _i++) {\r\n      var className = _Object$keys[_i];\r\n\r\n      if (!(className in newClasses)) {\r\n        newClasses[className] = false;\r\n      }\r\n    }\r\n\r\n    return newClasses;\r\n  }\r\n\r\n  return generate;\r\n});\r\n//# sourceMappingURL=css.js.map","Magento_PageBuilder/js/content-type/observable-updater/html.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/object\"], function (_config, _directives, _editor, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Generate Knockout compatible bindings for the elements html binding\r\n   *\r\n   * @param elementName\r\n   * @param config\r\n   * @param data\r\n   * @param converterResolver\r\n   * @param converterPool\r\n   */\r\n  function generate(elementName, config, data, converterResolver, converterPool) {\r\n    var value = config.html.var ? (0, _object.get)(data, config.html.var, config.html.placeholder) : config.html.placeholder;\r\n    var converter = converterResolver(config.html);\r\n\r\n    if (converterPool.get(converter)) {\r\n      value = converterPool.get(converter).toDom(config.html.var, data);\r\n    } // if value is empty, use placeholder\r\n\r\n\r\n    if (typeof value === \"string\" && !value.length && config.html.placeholder) {\r\n      value = config.html.placeholder;\r\n    } // Replacing src attribute with data-tmp-src to prevent img requests in iframe during master format rendering\r\n\r\n\r\n    if (_config.getMode() !== \"Preview\" && typeof value === \"string\" && value.indexOf(\"{{media url=\") !== -1) {\r\n      value = (0, _directives.replaceWithDataSrc)(value);\r\n    } // Process all desktop styles that left unprocessed after migrating from inline styles.\r\n\r\n\r\n    if (typeof value === \"string\") {\r\n      value = (0, _editor.processInlineStyles)(value);\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  return generate;\r\n});\r\n//# sourceMappingURL=html.js.map","Magento_PageBuilder/js/content-type/observable-updater/style.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/utils/string\"], function (_underscore, _object, _string) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Generate Knockout compatible bindings for the elements style binding\r\n   *\r\n   * @param elementName\r\n   * @param config\r\n   * @param data\r\n   * @param converterResolver\r\n   * @param converterPool\r\n   * @param previousData\r\n   */\r\n  function generate(elementName, config, data, converterResolver, converterPool, previousData) {\r\n    var newStyles = {};\r\n\r\n    if (config.style) {\r\n      for (var _iterator = _createForOfIteratorHelperLoose(config.style), _step; !(_step = _iterator()).done;) {\r\n        var propertyConfig = _step.value;\r\n\r\n        if (\"read\" === propertyConfig.persistence_mode) {\r\n          continue;\r\n        }\r\n\r\n        var value = void 0;\r\n\r\n        if (!!propertyConfig.static) {\r\n          value = propertyConfig.value;\r\n        } else {\r\n          value = (0, _object.get)(data, propertyConfig.var);\r\n          var converter = converterResolver(propertyConfig);\r\n\r\n          if (converterPool.get(converter)) {\r\n            value = converterPool.get(converter).toDom(propertyConfig.var, data);\r\n          }\r\n        }\r\n\r\n        if (typeof value === \"object\") {\r\n          _underscore.extend(newStyles, value);\r\n        } else if (value !== undefined) {\r\n          newStyles[(0, _string.fromSnakeToCamelCase)(propertyConfig.name)] = value;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (previousData) {\r\n      /**\r\n       * If so we need to retrieve the previous styles applied to this element and create a new object\r\n       * which forces all of these styles to be \"false\". Knockout doesn't clean existing styles when\r\n       * applying new styles to an element. This resolves styles sticking around when they should be\r\n       * removed.\r\n       */\r\n      var removeCurrentStyles = Object.keys(previousData).reduce(function (object, styleName) {\r\n        var _Object$assign;\r\n\r\n        return Object.assign(object, (_Object$assign = {}, _Object$assign[styleName] = \"\", _Object$assign));\r\n      }, {});\r\n\r\n      if (!_underscore.isEmpty(removeCurrentStyles)) {\r\n        newStyles = _underscore.extend(removeCurrentStyles, newStyles);\r\n      }\r\n    }\r\n\r\n    return newStyles;\r\n  }\r\n\r\n  return generate;\r\n});\r\n//# sourceMappingURL=style.js.map","Magento_PageBuilder/js/content-type/products/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"slick\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jquery, _knockout, _translate, _events, _slick, _underscore, _config, _hideShowOption, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    /**\r\n     * Define keys which when changed should not trigger the slider to be rebuilt\r\n     *\r\n     * @type {string[]}\r\n     */\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _preview2.call(this, contentType, config, observableUpdater) || this;\r\n      _this.displayPreview = _knockout.observable(false);\r\n      _this.previewElement = _jquery.Deferred();\r\n      _this.widgetUnsanitizedHtml = _knockout.observable();\r\n      _this.slidesToShow = 5;\r\n      _this.productItemSelector = \".product-item\";\r\n      _this.centerModeClass = \"center-mode\";\r\n      _this.messages = {\r\n        EMPTY: (0, _translate)(\"Empty Products\"),\r\n        NO_RESULTS: (0, _translate)(\"No products were found matching your condition\"),\r\n        LOADING: (0, _translate)(\"Loading...\"),\r\n        UNKNOWN_ERROR: (0, _translate)(\"An unknown error occurred. Please try again.\")\r\n      };\r\n      _this.ignoredKeysForBuild = [\"margins_and_padding\", \"border\", \"border_color\", \"border_radius\", \"border_width\", \"css_classes\", \"text_align\"];\r\n      _this.placeholderText = _knockout.observable(_this.messages.EMPTY); // Redraw slider after content type gets redrawn\r\n\r\n      _events.on(\"contentType:redrawAfter\", function (args) {\r\n        if (_this.element && _this.element.children) {\r\n          var $element = (0, _jquery)(_this.element.children);\r\n\r\n          if (args.element && $element.closest(args.element).length) {\r\n            $element.slick(\"setPosition\");\r\n          }\r\n        }\r\n      });\r\n\r\n      _events.on(\"stage:\" + _this.contentType.stageId + \":viewportChangeAfter\", function (args) {\r\n        var viewports = _config.getConfig(\"viewports\");\r\n\r\n        if (_this.element && _this.appearance() === \"carousel\") {\r\n          _this.slidesToShow = parseFloat(viewports[args.viewport].options.products.default.slidesToShow);\r\n\r\n          _this.destroySlider();\r\n\r\n          _this.initSlider();\r\n        }\r\n      });\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * On afterRender callback.\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.onAfterRender = function onAfterRender(element) {\r\n      this.element = element;\r\n      this.previewElement.resolve(element);\r\n      this.initSlider();\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    ;\r\n\r\n    _proto.afterObservablesUpdated = function afterObservablesUpdated() {\r\n      var _this2 = this;\r\n\r\n      _preview2.prototype.afterObservablesUpdated.call(this);\r\n\r\n      var data = this.contentType.dataStore.getState();\r\n\r\n      if (this.hasDataChanged(this.previousData, data)) {\r\n        this.displayPreview(false);\r\n\r\n        if (typeof data.conditions_encoded !== \"string\" || data.conditions_encoded.length === 0) {\r\n          this.placeholderText(this.messages.EMPTY);\r\n          return;\r\n        }\r\n\r\n        var url = _config.getConfig(\"preview_url\");\r\n\r\n        var requestConfig = {\r\n          // Prevent caching\r\n          method: \"POST\",\r\n          data: {\r\n            role: this.config.name,\r\n            directive: this.data.main.html()\r\n          }\r\n        };\r\n        this.placeholderText(this.messages.LOADING);\r\n\r\n        _jquery.ajax(url, requestConfig).done(function (response) {\r\n          if (typeof response.data !== \"object\" || !Boolean(response.data.content)) {\r\n            _this2.placeholderText(_this2.messages.NO_RESULTS);\r\n\r\n            return;\r\n          }\r\n\r\n          if (response.data.error) {\r\n            _this2.widgetUnsanitizedHtml(response.data.error);\r\n          } else {\r\n            _this2.widgetUnsanitizedHtml(response.data.content);\r\n\r\n            _this2.displayPreview(true);\r\n          }\r\n\r\n          _this2.previewElement.done(function () {\r\n            (0, _jquery)(_this2.element).trigger(\"contentUpdated\");\r\n          });\r\n        }).fail(function () {\r\n          _this2.placeholderText(_this2.messages.UNKNOWN_ERROR);\r\n        });\r\n      }\r\n\r\n      this.previousData = Object.assign({}, data);\r\n    };\r\n\r\n    _proto.initSlider = function initSlider() {\r\n      if (this.element && this.appearance() === \"carousel\") {\r\n        (0, _jquery)(this.element.children).slick(this.buildSlickConfig());\r\n      }\r\n    };\r\n\r\n    _proto.destroySlider = function destroySlider() {\r\n      (0, _jquery)(this.element.children).slick(\"unslick\");\r\n    }\r\n    /**\r\n     * Build the slick config object\r\n     *\r\n     * @returns {{autoplay: boolean; autoplay: number; infinite: boolean; arrows: boolean; dots: boolean;\r\n     * centerMode: boolean; slidesToScroll: number; slidesToShow: number;}}\r\n     */\r\n    ;\r\n\r\n    _proto.buildSlickConfig = function buildSlickConfig() {\r\n      var attributes = this.data.main.attributes();\r\n      var productCount = (0, _jquery)(this.widgetUnsanitizedHtml()).find(this.productItemSelector).length;\r\n\r\n      var viewports = _config.getConfig(\"viewports\");\r\n\r\n      var currentViewport = this.viewport();\r\n      var carouselMode = attributes[\"data-carousel-mode\"];\r\n      var config = {\r\n        slidesToShow: this.slidesToShow,\r\n        slidesToScroll: this.slidesToShow,\r\n        dots: attributes[\"data-show-dots\"] === \"true\",\r\n        arrows: attributes[\"data-show-arrows\"] === \"true\",\r\n        autoplay: attributes[\"data-autoplay\"] === \"true\",\r\n        autoplaySpeed: parseFloat(attributes[\"data-autoplay-speed\"])\r\n      };\r\n      var slidesToShow = viewports[currentViewport].options.products[carouselMode] ? viewports[currentViewport].options.products[carouselMode].slidesToShow : viewports[currentViewport].options.products.default.slidesToShow;\r\n      config.slidesToShow = parseFloat(slidesToShow);\r\n\r\n      if (attributes[\"data-carousel-mode\"] === \"continuous\" && productCount > config.slidesToShow) {\r\n        config.centerPadding = attributes[\"data-center-padding\"];\r\n        config.centerMode = true;\r\n        (0, _jquery)(this.element).addClass(this.centerModeClass);\r\n      } else {\r\n        config.infinite = attributes[\"data-infinite-loop\"] === \"true\";\r\n        (0, _jquery)(this.element).removeClass(this.centerModeClass);\r\n      }\r\n\r\n      return config;\r\n    }\r\n    /**\r\n     * Determine if the data has changed, whilst ignoring certain keys which don't require a rebuild\r\n     *\r\n     * @param {DataObject} previousData\r\n     * @param {DataObject} newData\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.hasDataChanged = function hasDataChanged(previousData, newData) {\r\n      previousData = _underscore.omit(previousData, this.ignoredKeysForBuild);\r\n      newData = _underscore.omit(newData, this.ignoredKeysForBuild);\r\n      return !_underscore.isEqual(previousData, newData);\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/products/appearance/carousel/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'matchMedia',\r\n    'Magento_PageBuilder/js/utils/breakpoints',\r\n    'Magento_PageBuilder/js/events',\r\n    'slick'\r\n], function ($, _, mediaCheck, breakpointsUtils, events) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Build slick\r\n     *\r\n     * @param {jQuery} $carouselElement\r\n     * @param {Object} config\r\n     */\r\n    function buildSlick($carouselElement, config) {\r\n        /**\r\n         * Prevent each slick slider from being initialized more than once which could throw an error.\r\n         */\r\n        if ($carouselElement.hasClass('slick-initialized')) {\r\n            $carouselElement.slick('unslick');\r\n        }\r\n\r\n        config.slidesToScroll = config.slidesToShow;\r\n        $carouselElement.slick(config);\r\n    }\r\n\r\n    /**\r\n     * Initialize slider.\r\n     *\r\n     * @param {jQuery} $element\r\n     * @param {Object} slickConfig\r\n     * @param {Object} breakpoint\r\n     */\r\n    function initSlider($element, slickConfig, breakpoint) {\r\n        var productCount = $element.find('.product-item').length,\r\n            $carouselElement = $($element.children()),\r\n            centerModeClass = 'center-mode',\r\n            carouselMode = $element.data('carousel-mode'),\r\n            slidesToShow = breakpoint.options.products[carouselMode] ?\r\n                breakpoint.options.products[carouselMode].slidesToShow :\r\n                breakpoint.options.products.default.slidesToShow;\r\n\r\n        slickConfig.slidesToShow = parseFloat(slidesToShow);\r\n\r\n        if (carouselMode === 'continuous' && productCount > slickConfig.slidesToShow) {\r\n            $element.addClass(centerModeClass);\r\n            slickConfig.centerPadding = $element.data('center-padding');\r\n            slickConfig.centerMode = true;\r\n        } else {\r\n            $element.removeClass(centerModeClass);\r\n            slickConfig.infinite = $element.data('infinite-loop');\r\n        }\r\n\r\n        buildSlick($carouselElement, slickConfig);\r\n    }\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            $carouselElement = $($element.children()),\r\n            currentViewport = config.currentViewport,\r\n            currentBreakpoint = config.breakpoints[currentViewport],\r\n            slickConfig = {\r\n                autoplay: $element.data('autoplay'),\r\n                autoplaySpeed: $element.data('autoplay-speed') || 0,\r\n                arrows: $element.data('show-arrows'),\r\n                dots: $element.data('show-dots')\r\n            };\r\n\r\n        _.each(config.breakpoints, function (breakpoint) {\r\n            mediaCheck({\r\n                media: breakpointsUtils.buildMedia(breakpoint.conditions),\r\n\r\n                /** @inheritdoc */\r\n                entry: function () {\r\n                    initSlider($element, slickConfig, breakpoint);\r\n                }\r\n            });\r\n        });\r\n\r\n        //initialize slider when content type is added in mobile viewport\r\n        if (currentViewport === 'mobile') {\r\n            initSlider($element, slickConfig, currentBreakpoint);\r\n        }\r\n\r\n        // Redraw slide after content type gets redrawn\r\n        events.on('contentType:redrawAfter', function (args) {\r\n            if ($carouselElement.closest(args.element).length) {\r\n                $carouselElement.slick('setPosition');\r\n            }\r\n        });\r\n\r\n        events.on('stage:viewportChangeAfter', function (args) {\r\n            var breakpoint = config.breakpoints[args.viewport];\r\n\r\n            initSlider($element, slickConfig, breakpoint);\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/products/form/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PageBuilder/js/form/provider',\r\n    'Magento_PageBuilder/js/form/provider/conditions-data-processor'\r\n], function (Provider, conditionsDataProcessor) {\r\n    'use strict';\r\n\r\n    return Provider.extend({\r\n        /** @inheritdoc **/\r\n        save: function () {\r\n            var data = this.get('data');\r\n\r\n            conditionsDataProcessor(data, data['condition_option'] + '_source');\r\n\r\n            return this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/content-type/products/mass-converter/carousel-widget-directive.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/mass-converter/widget-directive-abstract\", \"Magento_PageBuilder/js/utils/object\"], function (_widgetDirectiveAbstract, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var WidgetDirective = /*#__PURE__*/function (_widgetDirectiveAbstr) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(WidgetDirective, _widgetDirectiveAbstr);\r\n\r\n    function WidgetDirective() {\r\n      return _widgetDirectiveAbstr.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = WidgetDirective.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {object} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      var attributes = _widgetDirectiveAbstr.prototype.fromDom.call(this, data, config);\r\n\r\n      data.carousel_products_count = attributes.products_count;\r\n      data.sort_order = attributes.sort_order;\r\n      data.condition_option = attributes.condition_option || \"condition\";\r\n      data[data.condition_option] = this.decodeWysiwygCharacters(attributes.condition_option_value || \"\");\r\n      data.conditions_encoded = this.decodeWysiwygCharacters(attributes.conditions_encoded || \"\");\r\n      data[data.condition_option + \"_source\"] = data.conditions_encoded;\r\n      return data;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {object} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      var attributes = {\r\n        type: \"Magento\\\\CatalogWidget\\\\Block\\\\Product\\\\ProductsList\",\r\n        template: \"Magento_PageBuilder::catalog/product/widget/content/carousel.phtml\",\r\n        anchor_text: \"\",\r\n        id_path: \"\",\r\n        show_pager: 0,\r\n        products_count: data.carousel_products_count,\r\n        condition_option: data.condition_option,\r\n        condition_option_value: \"\",\r\n        type_name: \"Catalog Products Carousel\",\r\n        conditions_encoded: this.encodeWysiwygCharacters(data.conditions_encoded || \"\")\r\n      };\r\n\r\n      if (data.sort_order) {\r\n        attributes.sort_order = data.sort_order;\r\n      }\r\n\r\n      if (typeof data[data.condition_option] === \"string\") {\r\n        attributes.condition_option_value = this.encodeWysiwygCharacters(data[data.condition_option]);\r\n      }\r\n\r\n      if (attributes.conditions_encoded.length === 0) {\r\n        return data;\r\n      }\r\n\r\n      (0, _object.set)(data, config.html_variable, this.buildDirective(attributes));\r\n      return data;\r\n    }\r\n    /**\r\n     * @param {string} content\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.encodeWysiwygCharacters = function encodeWysiwygCharacters(content) {\r\n      return content.replace(/\\{/g, \"^[\").replace(/\\}/g, \"^]\").replace(/\"/g, \"`\").replace(/\\\\/g, \"|\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n    }\r\n    /**\r\n     * @param {string} content\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.decodeWysiwygCharacters = function decodeWysiwygCharacters(content) {\r\n      return content.replace(/\\^\\[/g, \"{\").replace(/\\^\\]/g, \"}\").replace(/`/g, \"\\\"\").replace(/\\|/g, \"\\\\\").replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\r\n    };\r\n\r\n    return WidgetDirective;\r\n  }(_widgetDirectiveAbstract);\r\n\r\n  return WidgetDirective;\r\n});\r\n//# sourceMappingURL=carousel-widget-directive.js.map","Magento_PageBuilder/js/content-type/products/mass-converter/widget-directive.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/mass-converter/widget-directive-abstract\", \"Magento_PageBuilder/js/utils/object\"], function (_widgetDirectiveAbstract, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var WidgetDirective = /*#__PURE__*/function (_widgetDirectiveAbstr) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(WidgetDirective, _widgetDirectiveAbstr);\r\n\r\n    function WidgetDirective() {\r\n      return _widgetDirectiveAbstr.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = WidgetDirective.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {object} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      var attributes = _widgetDirectiveAbstr.prototype.fromDom.call(this, data, config);\r\n\r\n      data.products_count = attributes.products_count;\r\n      data.sort_order = attributes.sort_order;\r\n      data.condition_option = attributes.condition_option || \"condition\";\r\n      data[data.condition_option] = this.decodeWysiwygCharacters(attributes.condition_option_value || \"\");\r\n      data.conditions_encoded = this.decodeWysiwygCharacters(attributes.conditions_encoded || \"\");\r\n      data[data.condition_option + \"_source\"] = data.conditions_encoded;\r\n      return data;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {object} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      var attributes = {\r\n        type: \"Magento\\\\CatalogWidget\\\\Block\\\\Product\\\\ProductsList\",\r\n        template: \"Magento_CatalogWidget::product/widget/content/grid.phtml\",\r\n        anchor_text: \"\",\r\n        id_path: \"\",\r\n        show_pager: 0,\r\n        products_count: data.products_count,\r\n        condition_option: data.condition_option,\r\n        condition_option_value: \"\",\r\n        type_name: \"Catalog Products List\",\r\n        conditions_encoded: this.encodeWysiwygCharacters(data.conditions_encoded || \"\")\r\n      };\r\n\r\n      if (data.sort_order) {\r\n        attributes.sort_order = data.sort_order;\r\n      }\r\n\r\n      if (typeof data[data.condition_option] === \"string\") {\r\n        attributes.condition_option_value = this.encodeWysiwygCharacters(data[data.condition_option]);\r\n      }\r\n\r\n      if (attributes.conditions_encoded.length === 0) {\r\n        return data;\r\n      }\r\n\r\n      (0, _object.set)(data, config.html_variable, this.buildDirective(attributes));\r\n      return data;\r\n    }\r\n    /**\r\n     * @param {string} content\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.encodeWysiwygCharacters = function encodeWysiwygCharacters(content) {\r\n      return content.replace(/\\{/g, \"^[\").replace(/\\}/g, \"^]\").replace(/\"/g, \"`\").replace(/\\\\/g, \"|\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n    }\r\n    /**\r\n     * @param {string} content\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.decodeWysiwygCharacters = function decodeWysiwygCharacters(content) {\r\n      return content.replace(/\\^\\[/g, \"{\").replace(/\\^\\]/g, \"}\").replace(/`/g, \"\\\"\").replace(/\\|/g, \"\\\\\").replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\r\n    };\r\n\r\n    return WidgetDirective;\r\n  }(_widgetDirectiveAbstract);\r\n\r\n  return WidgetDirective;\r\n});\r\n//# sourceMappingURL=widget-directive.js.map","Magento_PageBuilder/js/content-type/root-container/content-type-collection.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_Ui/js/modal/alert\", \"Magento_PageBuilder/js/content-type-collection\"], function (_alert, _contentTypeCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var RootContainer = /*#__PURE__*/function (_contentTypeCollectio) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(RootContainer, _contentTypeCollectio);\r\n\r\n    function RootContainer() {\r\n      return _contentTypeCollectio.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = RootContainer.prototype;\r\n\r\n    /**\r\n     * Remove a child from the observable array\r\n     *\r\n     * @param child\r\n     */\r\n    _proto.removeChild = function removeChild(child) {\r\n      if (this.getChildren().length === 1) {\r\n        (0, _alert)({\r\n          content: $t(\"You are not able to remove the final row from the content.\"),\r\n          title: $t(\"Unable to Remove\")\r\n        });\r\n        return;\r\n      }\r\n\r\n      _contentTypeCollectio.prototype.removeChild.call(this, child);\r\n    };\r\n\r\n    return RootContainer;\r\n  }(_contentTypeCollection);\r\n\r\n  return RootContainer;\r\n});\r\n//# sourceMappingURL=content-type-collection.js.map","Magento_PageBuilder/js/content-type/row/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jarallax\", \"jarallaxVideo\", \"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/resource/resize-observer/ResizeObserver\", \"underscore\", \"vimeoWrapper\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jarallax, _jarallaxVideo, _jquery, _knockout, _events, _ResizeObserver, _underscore, _vimeoWrapper, _hideShowOption, _previewCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     * Debounce and defer the init of Jarallax\r\n     *\r\n     * @type {(() => void) & _.Cancelable}\r\n     */\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this;\r\n      _this.wrapClass = _knockout.observable(false);\r\n      _this.buildJarallax = _underscore.debounce(function () {\r\n        // Destroy all instances of the plugin prior\r\n        try {\r\n          jarallax(_this.element, \"destroy\");\r\n        } catch (e) {// Failure of destroying is acceptable\r\n        }\r\n\r\n        if (_this.element && (0, _jquery)(_this.element).hasClass(\"jarallax\") && _this.contentType.dataStore.get(\"background_type\") !== \"video\" && _this.contentType.dataStore.get(\"background_image\").length) {\r\n          _underscore.defer(function () {\r\n            // Build Parallax on elements with the correct class\r\n            var parallaxSpeed = Number.parseFloat(_this.contentType.dataStore.get(\"parallax_speed\"));\r\n            jarallax(_this.element, {\r\n              imgPosition: _this.contentType.dataStore.get(\"background_position\") || \"50% 50%\",\r\n              imgRepeat: _this.contentType.dataStore.get(\"background_repeat\") || \"no-repeat\",\r\n              imgSize: _this.contentType.dataStore.get(\"background_size\") || \"cover\",\r\n              speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5\r\n            });\r\n            jarallax(_this.element, \"onResize\");\r\n          });\r\n        }\r\n\r\n        if (_this.element && _this.element.dataset.backgroundType === \"video\" && _this.element.dataset.videoSrc.length) {\r\n          var parallaxSpeed = _this.contentType.dataStore.get(\"enable_parallax\") === \"1\" ? Number.parseFloat(_this.contentType.dataStore.get(\"parallax_speed\")) : 1;\r\n\r\n          _underscore.defer(function () {\r\n            // Build Parallax on elements with the correct class\r\n            jarallax(_this.element, {\r\n              videoSrc: _this.element.dataset.videoSrc,\r\n              imgSrc: _this.element.dataset.videoFallbackSrc,\r\n              videoLoop: _this.contentType.dataStore.get(\"video_loop\") === \"true\",\r\n              speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5,\r\n              videoPlayOnlyVisible: _this.contentType.dataStore.get(\"video_play_only_visible\") === \"true\",\r\n              videoLazyLoading: _this.contentType.dataStore.get(\"video_lazy_load\") === \"true\"\r\n            }); // @ts-ignore\r\n\r\n            if (_this.element.jarallax && _this.element.jarallax.video) {\r\n              // @ts-ignore\r\n              _this.element.jarallax.video.on(\"started\", function () {\r\n                // @ts-ignore\r\n                if (_this.element.jarallax.$video) {\r\n                  // @ts-ignore\r\n                  _this.element.jarallax.$video.style.visibility = \"visible\";\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }, 50);\r\n\r\n      _this.contentType.dataStore.subscribe(_this.buildJarallax);\r\n\r\n      _events.on(\"row:mountAfter\", function (args) {\r\n        if (args.id === _this.contentType.id) {\r\n          _this.buildJarallax();\r\n        }\r\n      });\r\n\r\n      _events.on(\"contentType:mountAfter\", function (args) {\r\n        if (args.contentType.parentContentType && args.contentType.parentContentType.id === _this.contentType.id) {\r\n          _this.buildJarallax();\r\n        }\r\n      });\r\n\r\n      _events.on(\"stage:\" + _this.contentType.stageId + \":fullScreenModeChangeAfter\", _this.toggleFullScreen.bind(_assertThisInitialized(_this)));\r\n\r\n      _events.on(\"stage:\" + _this.contentType.stageId + \":viewportChangeAfter\", function (args) {\r\n        _this.buildJarallax();\r\n      });\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Get background image url base on the viewport.\r\n     *\r\n     * @returns {string}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.getBackgroundImage = function getBackgroundImage() {\r\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\r\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\r\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\r\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\r\n    }\r\n    /**\r\n     * Toggle fullscreen\r\n     */\r\n    ;\r\n\r\n    _proto.toggleFullScreen = function toggleFullScreen() {\r\n      if ((0, _jquery)(this.element).hasClass(\"jarallax\")) {\r\n        this.buildJarallax();\r\n      }\r\n    }\r\n    /**\r\n     * Use the conditional remove to disable the option when the content type has a single child\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Init the parallax element\r\n     *\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.initParallax = function initParallax(element) {\r\n      var _this2 = this;\r\n\r\n      this.element = element;\r\n\r\n      _underscore.defer(function () {\r\n        _this2.buildJarallax();\r\n      });\r\n\r\n      new _ResizeObserver(function () {\r\n        // Observe for resizes of the element and force jarallax to display correctly\r\n        if ((0, _jquery)(_this2.element).hasClass(\"jarallax\") && _this2.contentType.dataStore.get(\"background_image\").length) {\r\n          jarallax(_this2.element, \"onResize\");\r\n          jarallax(_this2.element, \"onScroll\");\r\n        }\r\n      }).observe(this.element);\r\n    }\r\n    /**\r\n     * Destroy jarallax instance.\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      _previewCollection2.prototype.destroy.call(this);\r\n\r\n      if (this.element) {\r\n        jarallax(this.element, \"destroy\");\r\n      }\r\n    }\r\n    /**\r\n     * Return selected element styles\r\n     *\r\n     * @param element\r\n     * @param styleProperties\r\n     */\r\n    ;\r\n\r\n    _proto.getStyle = function getStyle(element, styleProperties) {\r\n      var stylesObject = element.style();\r\n      return styleProperties.reduce(function (obj, key) {\r\n        var _extends2;\r\n\r\n        return _extends({}, obj, (_extends2 = {}, _extends2[key] = stylesObject[key], _extends2));\r\n      }, {});\r\n    }\r\n    /**\r\n     * Return element styles without selected\r\n     *\r\n     * @param element\r\n     * @param styleProperties\r\n     */\r\n    ;\r\n\r\n    _proto.getStyleWithout = function getStyleWithout(element, styleProperties) {\r\n      var stylesObject = element.style();\r\n      return Object.keys(stylesObject).filter(function (key) {\r\n        return !styleProperties.includes(key);\r\n      }).reduce(function (obj, key) {\r\n        var _extends3;\r\n\r\n        return _extends({}, obj, (_extends3 = {}, _extends3[key] = stylesObject[key], _extends3));\r\n      }, {});\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/row/appearance/default/widget-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(['underscore', 'jquery', 'Magento_PageBuilder/js/events'], function (_, $, events) {\r\n    'use strict';\r\n\r\n    return function (target) {\r\n        return function (config, element) {\r\n            var result = target(config, element),\r\n                stageId = $(element).parents('[data-role=\"pagebuilder-stage\"]').attr('id'),\r\n                $element = $(element);\r\n\r\n            if ($element.data('appearance') === 'contained') {\r\n                $element = $(element).find('[data-element=\"inner\"]');\r\n            }\r\n\r\n            // If Parallax isn't enabled, let's not attach the event\r\n            if ($element.data('enableParallax') !== 1) {\r\n                return result;\r\n            }\r\n\r\n            // Listen for full screen events and destroy and rebuild jarallax\r\n            events.on('stage:' + stageId + ':fullScreenModeChangeAfter', function () {\r\n                _.delay(function () {\r\n                    $element.jarallax('destroy');\r\n                    target(config, element);\r\n                }, 350);\r\n            });\r\n\r\n            return result;\r\n        };\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/row/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/widget/video-background',\r\n    'jarallax'\r\n], function ($, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            parallaxSpeed = null,\r\n            elementStyle = null;\r\n\r\n        if ($element.data('appearance') === 'contained') {\r\n            $element = $(element).find('[data-element=\"inner\"]');\r\n        }\r\n\r\n        if ($element.data('background-type') === 'video') {\r\n            videoBackground(config, $element[0]);\r\n\r\n            return;\r\n        }\r\n\r\n        if ($element.data('enableParallax') !== 1) {\r\n            return;\r\n        }\r\n\r\n        $element.addClass('jarallax');\r\n        $element.attr('data-jarallax', '');\r\n\r\n        parallaxSpeed = parseFloat($element.data('parallaxSpeed'));\r\n        elementStyle = window.getComputedStyle($element[0]);\r\n\r\n        window.jarallax($element[0], {\r\n            imgPosition: elementStyle.backgroundPosition || '50% 50%',\r\n            imgRepeat: elementStyle.backgroundRepeat || 'no-repeat',\r\n            imgSize: elementStyle.backgroundSize || 'cover',\r\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/row/converter/style/margins.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Margins = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Margins() {}\r\n\r\n    var _proto = Margins.prototype;\r\n\r\n    /**\r\n     * @param {string} value\r\n     * @returns {Object | string}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.margin) {\r\n        result.marginLeft = value.margin.left ? value.margin.left + \"px\" : \"\";\r\n        result.marginTop = value.margin.top ? value.margin.top + \"px\" : \"\";\r\n        result.marginRight = value.margin.right ? value.margin.right + \"px\" : \"\";\r\n        result.marginBottom = (parseInt(value.margin.bottom, 10) > 0 ? value.margin.bottom : 1) + \"px\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Margins;\r\n  }();\r\n\r\n  return Margins;\r\n});\r\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/content-type/row/converter/style/paddings.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Paddings = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Paddings() {}\r\n\r\n    var _proto = Paddings.prototype;\r\n\r\n    /**\r\n     * @param {string} value\r\n     * @returns {Object | string}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.padding) {\r\n        result.paddingLeft = value.padding.left ? value.padding.left + \"px\" : \"\";\r\n        result.paddingTop = value.padding.top ? value.padding.top + \"px\" : \"\";\r\n        result.paddingRight = value.padding.right ? value.padding.right + \"px\" : \"\";\r\n        result.paddingBottom = value.padding.bottom ? value.padding.bottom + \"px\" : \"\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Paddings;\r\n  }();\r\n\r\n  return Paddings;\r\n});\r\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/content-type/slide/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jarallax\", \"jarallaxVideo\", \"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"mageUtils\", \"underscore\", \"vimeoWrapper\", \"Magento_PageBuilder/js/content-type-menu/conditional-remove-option\", \"Magento_PageBuilder/js/uploader\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/nesting-link-dialog\", \"Magento_PageBuilder/js/utils/nesting-widget-dialog\", \"Magento_PageBuilder/js/wysiwyg/factory\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jarallax, _jarallaxVideo, _jquery, _knockout, _translate, _events, _mageUtils, _underscore, _vimeoWrapper, _conditionalRemoveOption, _uploader, _delayUntil, _editor, _nestingLinkDialog, _nestingWidgetDialog, _factory, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      var _this;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      _this = _preview2.call.apply(_preview2, [this].concat(args)) || this;\r\n      _this.buttonPlaceholder = (0, _translate)(\"Edit Button Text\");\r\n      _this.slideName = _knockout.observable();\r\n      _this.wysiwygDeferred = _jquery.Deferred();\r\n      _this.slideChanged = true;\r\n      _this.handledDoubleClick = false;\r\n      _this.videoUpdateProperties = [\"background_type\", \"video_fallback_image\", \"video_lazy_load\", \"video_loop\", \"video_play_only_visible\", \"video_source\"];\r\n      _this.buildJarallax = _underscore.debounce(function () {\r\n        // Destroy all instances of the plugin prior\r\n        try {\r\n          jarallax(_this.wrapper, \"destroy\");\r\n        } catch (e) {// Failure of destroying is acceptable\r\n        }\r\n\r\n        if (_this.wrapper && _this.wrapper.dataset.backgroundType === \"video\" && _this.wrapper.dataset.videoSrc.length) {\r\n          _underscore.defer(function () {\r\n            // Build Parallax on elements with the correct class\r\n            var viewportElement = (0, _jquery)(\"<div/>\").addClass(\"jarallax-viewport-element\");\r\n            (0, _jquery)(_this.wrapper).append((0, _jquery)(\".jarallax-viewport-element\", _this.wrapper).length ? \"\" : viewportElement);\r\n            jarallax(_this.wrapper, {\r\n              videoSrc: _this.wrapper.dataset.videoSrc,\r\n              imgSrc: _this.wrapper.dataset.videoFallbackSrc,\r\n              videoLoop: _this.contentType.dataStore.get(\"video_loop\") === \"true\",\r\n              speed: 1,\r\n              videoPlayOnlyVisible: _this.contentType.dataStore.get(\"video_play_only_visible\") === \"true\",\r\n              elementInViewport: (0, _jquery)(\".jarallax-viewport-element\", _this.wrapper),\r\n              videoLazyLoading: _this.contentType.dataStore.get(\"video_lazy_load\") === \"true\"\r\n            }); // @ts-ignore\r\n\r\n            if (_this.wrapper.jarallax && _this.wrapper.jarallax.video) {\r\n              // @ts-ignore\r\n              _this.wrapper.jarallax.video.on(\"started\", function () {\r\n                // @ts-ignore\r\n                if (_this.wrapper.jarallax && _this.wrapper.jarallax.$video) {\r\n                  // @ts-ignore\r\n                  _this.wrapper.jarallax.$video.style.visibility = \"visible\";\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }, 50);\r\n      return _this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Get background image url base on the viewport.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    _proto.getBackgroundImage = function getBackgroundImage() {\r\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\r\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\r\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\r\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\r\n    }\r\n    /**\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.afterRenderWysiwyg = function afterRenderWysiwyg(element) {\r\n      var _this2 = this;\r\n\r\n      this.element = element;\r\n      element.id = this.contentType.id + \"-editor\"; // Set the innerHTML manually so we don't upset Knockout & TinyMCE\r\n\r\n      element.innerHTML = this.data.content.html();\r\n      this.contentType.dataStore.subscribe(function () {\r\n        // If we're not focused into TinyMCE inline, update the value when it changes in the data store\r\n        if (!_this2.wysiwyg || _this2.wysiwyg && _this2.wysiwyg.getAdapter().id !== (0, _editor.getActiveEditor)().id) {\r\n          element.innerHTML = _this2.data.content.html();\r\n        }\r\n      }, \"content\");\r\n      /**\r\n       * afterRenderWysiwyg is called whenever Knockout causes a DOM re-render. This occurs frequently within Slider\r\n       * due to Slick's inability to perform a refresh with Knockout managing the DOM. Due to this the original\r\n       * WYSIWYG instance will be detached from this slide and we need to re-initialize on click.\r\n       */\r\n\r\n      this.wysiwyg = null;\r\n    }\r\n    /**\r\n     * Set state based on overlay mouseover event for the preview\r\n     */\r\n    ;\r\n\r\n    _proto.onMouseOverWrapper = function onMouseOverWrapper() {\r\n      // Triggers the visibility of the overlay content to show\r\n      if (this.data.main.attributes()[\"data-show-overlay\"] === \"hover\") {\r\n        this.data.overlay.attributes(Object.assign(this.data.overlay.attributes(), {\r\n          \"data-background-color-orig\": this.data.overlay.style().backgroundColor\r\n        }));\r\n        this.data.overlay.style(Object.assign(this.data.overlay.style(), {\r\n          backgroundColor: this.data.overlay.attributes()[\"data-overlay-color\"]\r\n        }));\r\n      }\r\n\r\n      if (this.data.main.attributes()[\"data-show-button\"] === \"hover\") {\r\n        this.data.button.style(Object.assign(this.data.button.style(), {\r\n          opacity: 1,\r\n          visibility: \"visible\"\r\n        }));\r\n      }\r\n    }\r\n    /**\r\n     * Set state based on overlay mouseout event for the preview\r\n     */\r\n    ;\r\n\r\n    _proto.onMouseOutWrapper = function onMouseOutWrapper() {\r\n      // Triggers the visibility of the overlay content to hide\r\n      if (this.data.main.attributes()[\"data-show-overlay\"] === \"hover\") {\r\n        this.data.overlay.style(Object.assign(this.data.overlay.style(), {\r\n          backgroundColor: this.data.overlay.attributes()[\"data-background-color-orig\"]\r\n        }));\r\n      }\r\n\r\n      if (this.data.main.attributes()[\"data-show-button\"] === \"hover\") {\r\n        this.data.button.style(Object.assign(this.data.button.style(), {\r\n          opacity: 0,\r\n          visibility: \"hidden\"\r\n        }));\r\n      }\r\n    }\r\n    /**\r\n     * Get the options instance\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      delete options.move;\r\n      options.remove = new _conditionalRemoveOption(_extends({}, options.remove.config, {\r\n        preview: this\r\n      }));\r\n      return options;\r\n    }\r\n    /**\r\n     * Get registry callback reference to uploader UI component\r\n     *\r\n     * @returns {Uploader}\r\n     */\r\n    ;\r\n\r\n    _proto.getUploader = function getUploader() {\r\n      var initialImageValue = this.contentType.dataStore.get(this.config.additional_data.uploaderConfig.dataScope, \"\"); // Create uploader\r\n\r\n      return new _uploader(\"imageuploader_\" + this.contentType.id, this.config.additional_data.uploaderConfig, this.contentType.id, this.contentType.dataStore, initialImageValue);\r\n    }\r\n    /**\r\n     * Makes WYSIWYG active\r\n     *\r\n     * @param {Preview} preview\r\n     * @param {JQueryEventObject} event\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.activateEditor = function activateEditor(preview, event) {\r\n      var _this3 = this;\r\n\r\n      if (this.element && !this.wysiwyg) {\r\n        var bookmark = (0, _editor.createBookmark)(event);\r\n        (0, _editor.lockImageSize)(this.element);\r\n        this.element.removeAttribute(\"contenteditable\");\r\n\r\n        _underscore.defer(function () {\r\n          _this3.initWysiwygFromClick(true).then(function () {\r\n            return (0, _delayUntil)(function () {\r\n              // We no longer need to handle double click once it's initialized\r\n              _this3.handledDoubleClick = true;\r\n\r\n              _this3.wysiwygDeferred.resolve();\r\n\r\n              (0, _editor.moveToBookmark)(bookmark);\r\n              (0, _editor.unlockImageSize)(_this3.element);\r\n            }, function () {\r\n              return _this3.element.classList.contains(\"mce-edit-focus\");\r\n            }, 10);\r\n          }).catch(function (error) {\r\n            // If there's an error with init of WYSIWYG editor push into the console to aid support\r\n            console.error(error);\r\n          });\r\n        });\r\n      } else if (this.element && this.wysiwyg) {\r\n        var element = this.element || this.textarea;\r\n\r\n        if (event.currentTarget !== event.target && event.target !== element && !element.contains(event.target)) {\r\n          return;\r\n        }\r\n\r\n        element.focus();\r\n      }\r\n    }\r\n    /**\r\n     * If a user double clicks prior to initializing TinyMCE, forward the event\r\n     *\r\n     * @param preview\r\n     * @param event\r\n     */\r\n    ;\r\n\r\n    _proto.handleDoubleClick = function handleDoubleClick(preview, event) {\r\n      var _this4 = this;\r\n\r\n      if (this.handledDoubleClick) {\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      var targetIndex = (0, _editor.findNodeIndex)(this.element, event.target.tagName, event.target);\r\n      this.handledDoubleClick = true;\r\n      this.wysiwygDeferred.then(function () {\r\n        var target = document.getElementById(event.target.id);\r\n\r\n        if (!target) {\r\n          target = (0, _editor.getNodeByIndex)(_this4.element, event.target.tagName, targetIndex);\r\n        }\r\n\r\n        if (target) {\r\n          target.dispatchEvent((0, _editor.createDoubleClickEvent)());\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Stop event to prevent execution of action when editing textarea.\r\n     *\r\n     * @param {Preview} preview\r\n     * @param {JQueryEventObject} event\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.stopEvent = function stopEvent(preview, event) {\r\n      event.stopPropagation();\r\n      return true;\r\n    }\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.isWysiwygSupported = function isWysiwygSupported() {\r\n      return (0, _editor.isWysiwygSupported)();\r\n    }\r\n    /**\r\n     * @param {HTMLTextAreaElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.initTextarea = function initTextarea(element) {\r\n      var _this5 = this;\r\n\r\n      this.textarea = element; // set initial value of textarea based on data store\r\n\r\n      this.textarea.value = this.contentType.dataStore.get(\"content\");\r\n      this.adjustTextareaHeightBasedOnScrollHeight(); // Update content in our stage preview textarea after its slideout counterpart gets updated\r\n\r\n      _events.on(\"form:\" + this.contentType.id + \":saveAfter\", function () {\r\n        _this5.textarea.value = _this5.contentType.dataStore.get(\"content\");\r\n\r\n        _this5.adjustTextareaHeightBasedOnScrollHeight();\r\n      });\r\n    }\r\n    /**\r\n     * Save current value of textarea in data store\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaKeyUp = function onTextareaKeyUp() {\r\n      this.adjustTextareaHeightBasedOnScrollHeight();\r\n      this.contentType.dataStore.set(\"content\", this.textarea.value);\r\n    }\r\n    /**\r\n     * Start stage interaction on textarea blur\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaFocus = function onTextareaFocus() {\r\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-content-type\").addClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStart\");\r\n    }\r\n    /**\r\n     * Stop stage interaction on textarea blur\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaBlur = function onTextareaBlur() {\r\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-content-type\").removeClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStop\");\r\n    }\r\n    /**\r\n     * Init WYSIWYG on load\r\n     *\r\n     * @param element\r\n     * @deprecated please use activateEditor & initWysiwygFromClick\r\n     */\r\n    ;\r\n\r\n    _proto.initWysiwyg = function initWysiwyg(element) {\r\n      this.element = element;\r\n      element.id = this.contentType.id + \"-editor\";\r\n      this.wysiwyg = null;\r\n      return this.initWysiwygFromClick(true);\r\n    }\r\n    /**\r\n     * Init the WYSIWYG\r\n     *\r\n     * @param {boolean} focus Should wysiwyg focus after initialization?\r\n     * @returns Promise\r\n     */\r\n    ;\r\n\r\n    _proto.initWysiwygFromClick = function initWysiwygFromClick(focus) {\r\n      var _this6 = this;\r\n\r\n      if (focus === void 0) {\r\n        focus = false;\r\n      }\r\n\r\n      if (this.wysiwyg) {\r\n        return Promise.resolve(this.wysiwyg);\r\n      }\r\n\r\n      var wysiwygConfig = this.config.additional_data.wysiwygConfig.wysiwygConfigData;\r\n\r\n      if (focus) {\r\n        wysiwygConfig.adapter.settings.auto_focus = this.element.id;\r\n\r\n        wysiwygConfig.adapter.settings.init_instance_callback = function (editor) {\r\n          editor.on(\"blur\", function () {\r\n            (0, _nestingLinkDialog)(_this6.contentType.dataStore, _this6.wysiwyg, \"content\", \"link_url\");\r\n            (0, _nestingWidgetDialog)(_this6.contentType.dataStore, _this6.wysiwyg, \"content\", \"link_url\");\r\n          });\r\n\r\n          _underscore.defer(function () {\r\n            _this6.element.blur();\r\n\r\n            _this6.element.focus();\r\n          });\r\n        };\r\n      }\r\n\r\n      return (0, _factory)(this.contentType.id, this.element.id, this.config.name, wysiwygConfig, this.contentType.dataStore, \"content\", this.contentType.stageId).then(function (wysiwyg) {\r\n        _this6.wysiwyg = wysiwyg;\r\n        return wysiwyg;\r\n      });\r\n    }\r\n    /**\r\n     * Init the parallax element\r\n     *\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.initParallax = function initParallax(element) {\r\n      var _this7 = this;\r\n\r\n      this.wrapper = element;\r\n\r\n      _underscore.defer(function () {\r\n        _this7.buildJarallax();\r\n      });\r\n    }\r\n    /**\r\n     * Destroy jarallax instance.\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      _preview2.prototype.destroy.call(this);\r\n\r\n      if (this.wrapper) {\r\n        jarallax(this.wrapper, \"destroy\");\r\n      }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this8 = this;\r\n\r\n      _preview2.prototype.bindEvents.call(this);\r\n\r\n      _events.on(\"slide:mountAfter\", function (args) {\r\n        if (args.id === _this8.contentType.id) {\r\n          _this8.buildJarallax();\r\n\r\n          _this8.isSnapshot.subscribe(function (value) {\r\n            _this8.changeUploaderControlsVisibility();\r\n          });\r\n\r\n          _this8.changeUploaderControlsVisibility();\r\n        }\r\n      });\r\n\r\n      _events.on(this.config.name + \":\" + this.contentType.id + \":updateAfter\", function () {\r\n        var dataStore = _this8.contentType.dataStore.getState();\r\n\r\n        var imageObject = dataStore[_this8.config.additional_data.uploaderConfig.dataScope][0] || {};\r\n\r\n        _events.trigger(\"image:\" + _this8.contentType.id + \":assignAfter\", imageObject);\r\n      }); // Remove wysiwyg before assign new instance.\r\n\r\n\r\n      _events.on(\"childContentType:sortUpdate\", function (args) {\r\n        if (args.instance.id === _this8.contentType.parentContentType.id) {\r\n          _this8.wysiwyg = null;\r\n        }\r\n      });\r\n\r\n      _events.on(this.config.name + \":mountAfter\", function (args) {\r\n        if (args.id === _this8.contentType.id) {\r\n          // Update the display label for the slide\r\n          var slider = _this8.contentType.parentContentType;\r\n\r\n          _this8.displayLabel((0, _translate)(\"Slide \" + (slider.children().indexOf(_this8.contentType) + 1)));\r\n\r\n          slider.children.subscribe(function (children) {\r\n            var index = children.indexOf(_this8.contentType);\r\n\r\n            _this8.displayLabel((0, _translate)(\"Slide \" + (slider.children().indexOf(_this8.contentType) + 1)));\r\n          });\r\n        }\r\n      });\r\n\r\n      _events.on(this.config.name + \":renderAfter\", function (args) {\r\n        if (args.id === _this8.contentType.id) {\r\n          var slider = _this8.contentType.parentContentType;\r\n          (0, _jquery)(slider.preview.element).on(\"beforeChange\", function () {\r\n            _this8.slideChanged = false;\r\n          });\r\n          (0, _jquery)(slider.preview.element).on(\"afterChange\", function (event, slick) {\r\n            (0, _jquery)(slick.$slides).each(function (index, slide) {\r\n              var videoSlide = slide.querySelector(\".jarallax\");\r\n\r\n              if (videoSlide) {\r\n                jarallax(videoSlide, \"onScroll\");\r\n              }\r\n            });\r\n            _this8.slideChanged = true;\r\n          });\r\n        }\r\n      });\r\n\r\n      this.contentType.dataStore.subscribe(function (data) {\r\n        _this8.slideName(data.slide_name);\r\n\r\n        if (_this8.shouldUpdateVideo(data)) {\r\n          _this8.buildJarallax();\r\n        }\r\n      });\r\n\r\n      _events.on(\"image:\" + this.contentType.id + \":uploadAfter\", function () {\r\n        _this8.contentType.dataStore.set(\"background_type\", \"image\");\r\n      });\r\n\r\n      _events.on(\"stage:\" + this.contentType.stageId + \":viewportChangeAfter\", function (args) {\r\n        if (_this8.contentType.dataStore.get(\"background_type\") === \"video\") {\r\n          _this8.buildJarallax();\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Change uploader controls visibility\r\n     */\r\n    ;\r\n\r\n    _proto.changeUploaderControlsVisibility = function changeUploaderControlsVisibility() {\r\n      var _this9 = this;\r\n\r\n      this.getUploader().getUiComponent()(function (uploader) {\r\n        uploader.visibleControls = !_this9.isSnapshot();\r\n      });\r\n    }\r\n    /**\r\n     * Update image data inside data store\r\n     *\r\n     * @param {Array} data - list of each files' data\r\n     */\r\n    ;\r\n\r\n    _proto.onImageUploaded = function onImageUploaded(data) {\r\n      this.contentType.dataStore.set(this.config.additional_data.uploaderConfig.dataScope, data);\r\n    }\r\n    /**\r\n     * Adjust textarea's height based on scrollHeight\r\n     */\r\n    ;\r\n\r\n    _proto.adjustTextareaHeightBasedOnScrollHeight = function adjustTextareaHeightBasedOnScrollHeight() {\r\n      this.textarea.style.height = \"\";\r\n      var scrollHeight = this.textarea.scrollHeight;\r\n      var minHeight = parseInt((0, _jquery)(this.textarea).css(\"min-height\"), 10);\r\n\r\n      if (scrollHeight === minHeight) {\r\n        // leave height at 'auto'\r\n        return;\r\n      }\r\n\r\n      (0, _jquery)(this.textarea).height(scrollHeight);\r\n    }\r\n    /**\r\n     * Check if video options has been updated.\r\n     *\r\n     * @return boolean\r\n     */\r\n    ;\r\n\r\n    _proto.shouldUpdateVideo = function shouldUpdateVideo(state) {\r\n      var _this10 = this;\r\n\r\n      var previousState = this.contentType.dataStore.getPreviousState();\r\n\r\n      var diff = _mageUtils.compare(previousState, state).changes;\r\n\r\n      if (diff.length > 0) {\r\n        return _underscore.some(diff, function (element) {\r\n          if (element.name === \"video_fallback_image\") {\r\n            return (!_underscore.isEmpty(previousState.video_fallback_image) && previousState.video_fallback_image) !== (!_underscore.isEmpty(state.video_fallback_image) && state.video_fallback_image);\r\n          }\r\n\r\n          return _this10.videoUpdateProperties.indexOf(element.name) !== -1;\r\n        });\r\n      }\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/slide/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_PageBuilder/js/widget/show-on-hover',\r\n    'Magento_PageBuilder/js/widget/video-background'\r\n], function ($, _, showOnHover, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var videoElement = element[0].querySelector('[data-background-type=video]'),\r\n            viewportElement = document.createElement('div'),\r\n            $slider = null;\r\n\r\n        showOnHover(config);\r\n\r\n        if (videoElement) {\r\n            $slider = $(element).closest('[data-content-type=slider]');\r\n            viewportElement.classList.add('jarallax-viewport-element');\r\n            videoElement.setAttribute('data-element-in-viewport', '.jarallax-viewport-element');\r\n            videoElement.appendChild(viewportElement);\r\n            videoBackground(config, videoElement);\r\n\r\n            if ($slider.data('afterChangeIsSet')) {\r\n                return;\r\n            }\r\n\r\n            $slider.on('afterChange init', function () {\r\n                var videoSlides = $slider[0].querySelectorAll('.jarallax');\r\n\r\n                _.each(videoSlides, function (videoSlide) {\r\n                    videoSlide.jarallax && videoSlide.jarallax.onScroll();\r\n                });\r\n            });\r\n            $slider.data('afterChangeIsSet', true);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/slide/converter/attribute/overlay-color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var OverlayColor = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function OverlayColor() {}\r\n\r\n    var _proto = OverlayColor.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value === \"transparent\" ? \"\" : value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      if (data.overlay_color) {\r\n        return data.overlay_color.toString();\r\n      }\r\n\r\n      return \"\";\r\n    };\r\n\r\n    return OverlayColor;\r\n  }();\r\n\r\n  return OverlayColor;\r\n});\r\n//# sourceMappingURL=overlay-color.js.map","Magento_PageBuilder/js/content-type/slide/converter/style/button-opacity.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ButtonOpacity = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ButtonOpacity() {}\r\n\r\n    var _proto = ButtonOpacity.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return data.show_button === \"always\" ? \"1\" : \"0\";\r\n    };\r\n\r\n    return ButtonOpacity;\r\n  }();\r\n\r\n  return ButtonOpacity;\r\n});\r\n//# sourceMappingURL=button-opacity.js.map","Magento_PageBuilder/js/content-type/slide/converter/style/button-visibility.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ButtonVisibility = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ButtonVisibility() {}\r\n\r\n    var _proto = ButtonVisibility.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return data.show_button === \"always\" ? \"visible\" : \"hidden\";\r\n    };\r\n\r\n    return ButtonVisibility;\r\n  }();\r\n\r\n  return ButtonVisibility;\r\n});\r\n//# sourceMappingURL=button-visibility.js.map","Magento_PageBuilder/js/content-type/slide/converter/style/margins.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Margins = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Margins() {}\r\n\r\n    var _proto = Margins.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (undefined !== value.margin) {\r\n        return {\r\n          margin: {\r\n            top: value.margin.top.replace(\"px\", \"\"),\r\n            left: value.margin.left.replace(\"px\", \"\"),\r\n            right: value.margin.right.replace(\"px\", \"\"),\r\n            bottom: value.margin.bottom.replace(\"px\", \"\")\r\n          }\r\n        };\r\n      }\r\n\r\n      return {};\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.margin) {\r\n        result.marginLeft = value.margin.left ? value.margin.left + \"px\" : \"\";\r\n        result.marginTop = value.margin.top ? value.margin.top + \"px\" : \"\";\r\n        result.marginRight = value.margin.right ? value.margin.right + \"px\" : \"\";\r\n        result.marginBottom = value.margin.bottom ? value.margin.bottom + \"px\" : \"\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Margins;\r\n  }();\r\n\r\n  return Margins;\r\n});\r\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/content-type/slide/converter/style/overlay-background-color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var OverlayBackgroundColor = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function OverlayBackgroundColor() {}\r\n\r\n    var _proto = OverlayBackgroundColor.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (data.show_overlay === \"always\" && value !== \"\" && value !== undefined) {\r\n        return value;\r\n      }\r\n\r\n      return \"transparent\";\r\n    };\r\n\r\n    return OverlayBackgroundColor;\r\n  }();\r\n\r\n  return OverlayBackgroundColor;\r\n});\r\n//# sourceMappingURL=overlay-background-color.js.map","Magento_PageBuilder/js/content-type/slide/converter/style/paddings.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Paddings = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Paddings() {}\r\n\r\n    var _proto = Paddings.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      var result = {};\r\n\r\n      if (undefined !== value.padding) {\r\n        result.padding = {\r\n          bottom: value.padding.bottom.replace(\"px\", \"\"),\r\n          left: value.padding.left.replace(\"px\", \"\"),\r\n          right: value.padding.right.replace(\"px\", \"\"),\r\n          top: value.padding.top.replace(\"px\", \"\")\r\n        };\r\n      }\r\n\r\n      if (result.padding.right[0] === \"c\") {\r\n        result.padding.right = parseInt(result.padding.right.split(\"+\")[1].trim(), 10);\r\n      }\r\n\r\n      if (result.padding.left[0] === \"c\") {\r\n        result.padding.left = parseInt(result.padding.left.split(\"+\")[1].trim(), 10);\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.padding) {\r\n        result.paddingLeft = value.padding.left ? value.padding.left + \"px\" : \"\";\r\n        result.paddingTop = value.padding.top ? value.padding.top + \"px\" : \"\";\r\n        result.paddingRight = value.padding.right ? value.padding.right + \"px\" : \"\";\r\n        result.paddingBottom = value.padding.bottom ? value.padding.bottom + \"px\" : \"\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Paddings;\r\n  }();\r\n\r\n  return Paddings;\r\n});\r\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/content-type/slide/wysiwyg/tinymce/component-initializer.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"mage/adminhtml/wysiwyg/events\", \"Magento_PageBuilder/js/utils/delay-until\"], function (_jquery, _events, _delayUntil) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ComponentInitializer = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ComponentInitializer() {\r\n      this.sliderSelector = \".slick-list\";\r\n      this.sliderContentSelector = \".slick-track\";\r\n      this.slideSelector = \".slick-slide\";\r\n      this.activeSlideSelector = \".slick-current\";\r\n      this.slideChanging = false;\r\n    }\r\n\r\n    var _proto = ComponentInitializer.prototype;\r\n\r\n    /**\r\n     * Initialize the instance\r\n     *\r\n     * @param {Wysiwyg} wysiwyg\r\n     */\r\n    _proto.initialize = function initialize(wysiwyg) {\r\n      var _this = this;\r\n\r\n      this.$element = (0, _jquery)(\"#\" + wysiwyg.elementId);\r\n      this.config = wysiwyg.config;\r\n      var tinymce = wysiwyg.getAdapter();\r\n      tinymce.eventBus.attachEventHandler(_events.afterFocus, this.onFocus.bind(this));\r\n      tinymce.eventBus.attachEventHandler(_events.afterBlur, this.onBlur.bind(this)); // Update our KO pointer to the active slide on change\r\n\r\n      (0, _jquery)(this.$element.parents(this.sliderSelector)).parent().on(\"beforeChange\", function () {\r\n        _this.slideChanging = true;\r\n      }).on(\"afterChange\", function () {\r\n        _this.slideChanging = false;\r\n      });\r\n    }\r\n    /**\r\n     * Event handler for wysiwyg focus\r\n     * Fixes z-index issues for tabs and column\r\n     * Fixes slider\r\n     */\r\n    ;\r\n\r\n    _proto.onFocus = function onFocus() {\r\n      var _this2 = this;\r\n\r\n      var $slider = (0, _jquery)(this.$element.parents(this.sliderSelector));\r\n      var sliderContent = this.$element.parents(this.sliderContentSelector)[0];\r\n      var $notActiveSlides = $slider.find(this.slideSelector).not(this.activeSlideSelector); // If there isn't enough room for a left-aligned toolbar, right align it\r\n\r\n      if ((0, _jquery)(window).width() < this.$element.offset().left + parseInt(this.config.adapter_config.minToolbarWidth, 10)) {\r\n        this.$element.addClass(\"_right-aligned-toolbar\");\r\n      } else {\r\n        this.$element.removeClass(\"_right-aligned-toolbar\");\r\n      }\r\n\r\n      (0, _delayUntil)(function () {\r\n        _jquery.each(_this2.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\r\n          _this2.$element.closest(selector).css(\"z-index\", 100);\r\n        }); // Disable slider keyboard events and fix problem with overflow hidden issue\r\n\r\n\r\n        $slider.parent().slick(\"slickSetOption\", \"accessibility\", false);\r\n        _this2.autoplay = $slider.parent().slick(\"slickGetOption\", \"autoplay\");\r\n        _this2.fade = $slider.parent().slick(\"slickGetOption\", \"fade\");\r\n\r\n        if (_this2.autoplay) {\r\n          $slider.parent().slick(\"slickPause\");\r\n        }\r\n\r\n        if (!_this2.fade) {\r\n          $notActiveSlides.css(\"display\", \"none\");\r\n        }\r\n\r\n        _this2.sliderTransform = sliderContent.style.transform;\r\n        sliderContent.style.transform = \"\";\r\n        $slider.css(\"overflow\", \"visible\");\r\n      }, function () {\r\n        return !_this2.slideChanging;\r\n      }, 10);\r\n    }\r\n    /**\r\n     * Event handler for wysiwyg blur\r\n     * Fixes z-index issues for tabs and column\r\n     * Fixes slider\r\n     */\r\n    ;\r\n\r\n    _proto.onBlur = function onBlur() {\r\n      var _this3 = this;\r\n\r\n      var $slider = (0, _jquery)(this.$element.parents(this.sliderSelector));\r\n      var sliderContent = this.$element.parents(this.sliderContentSelector)[0];\r\n      var $notActiveSlides = $slider.find(this.slideSelector).not(this.activeSlideSelector);\r\n\r\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\r\n        _this3.$element.closest(selector).css(\"z-index\", \"\");\r\n      }); // Enable slider keyboard events and revert changes made in onFocus\r\n\r\n\r\n      $slider.css(\"overflow\", \"hidden\");\r\n      sliderContent.style.transform = this.sliderTransform;\r\n      $notActiveSlides.css(\"display\", \"block\");\r\n      $slider.parent().slick(\"slickSetOption\", \"accessibility\", true);\r\n\r\n      if (this.autoplay) {\r\n        $slider.parent().slick(\"slickPlay\");\r\n      }\r\n    };\r\n\r\n    return ComponentInitializer;\r\n  }();\r\n\r\n  return ComponentInitializer;\r\n});\r\n//# sourceMappingURL=component-initializer.js.map","Magento_PageBuilder/js/content-type/slide/wysiwyg/tinymce/config-modifier.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ConfigModifier = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ConfigModifier() {}\r\n\r\n    var _proto = ConfigModifier.prototype;\r\n\r\n    /**\r\n     * Initialize the config\r\n     *\r\n     * @param {String} contentTypeId\r\n     * @param {Object} config\r\n     */\r\n    _proto.modify = function modify(contentTypeId, config) {\r\n      if (config.adapter_config.mode === \"inline\") {\r\n        config.adapter.settings.fixed_toolbar_container = \"#\" + contentTypeId + \" .wysiwyg-container\";\r\n      }\r\n    };\r\n\r\n    return ConfigModifier;\r\n  }();\r\n\r\n  return ConfigModifier;\r\n});\r\n//# sourceMappingURL=config-modifier.js.map","Magento_PageBuilder/js/content-type/slider/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"slick\", \"underscore\", \"Magento_PageBuilder/js/binding/focus\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type-menu/option\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/promise-deferred\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jquery, _knockout, _translate, _events, _slick, _underscore, _focus, _config, _contentTypeFactory, _hideShowOption, _option, _delayUntil, _promiseDeferred, _previewCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     * Define keys which when changed should not trigger the slider to be rebuilt\r\n     *\r\n     * @type {string[]}\r\n     */\r\n\r\n    /**\r\n     * @param {ContentTypeCollectionInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this; // Wait for the tabs instance to mount and the container to be ready\r\n\r\n      _this.focusedSlide = _knockout.observable();\r\n      _this.activeSlide = _knockout.observable(0);\r\n      _this.events = {\r\n        columnWidthChangeAfter: \"onColumnResize\"\r\n      };\r\n      _this.ready = false;\r\n      _this.mountAfterDeferred = (0, _promiseDeferred)();\r\n      _this.afterChildrenRenderDeferred = (0, _promiseDeferred)();\r\n      _this.buildSlickDebounce = _underscore.debounce(_this.buildSlick.bind(_assertThisInitialized(_this)), 10);\r\n      _this.ignoredKeysForBuild = [\"display\", \"margins_and_padding\", \"border\", \"border_color\", \"border_radius\", \"border_width\", \"css_classes\", \"name\", \"text_align\"];\r\n      Promise.all([_this.afterChildrenRenderDeferred.promise, _this.mountAfterDeferred.promise]).then(function (_ref) {\r\n        var element = _ref[0],\r\n            expectedChildren = _ref[1];\r\n        // We always create 1 tab when dropping tabs into the instance\r\n        expectedChildren = expectedChildren || 1; // Wait until all children's DOM elements are present before building the tabs instance\r\n\r\n        (0, _delayUntil)(function () {\r\n          _this.element = element;\r\n          _this.childSubscribe = _this.contentType.children.subscribe(_this.buildSlickDebounce);\r\n          _this.previousData = _this.contentType.dataStore.getState();\r\n\r\n          _this.contentType.dataStore.subscribe(function (data) {\r\n            if (_this.hasDataChanged(_this.previousData, data)) {\r\n              _this.buildSlickDebounce();\r\n            }\r\n\r\n            _this.previousData = data;\r\n          });\r\n\r\n          _this.buildSlick(); // Redraw slide after content type gets redrawn\r\n\r\n\r\n          _events.on(\"contentType:redrawAfter\", function (args) {\r\n            var $element = (0, _jquery)(_this.element);\r\n\r\n            if (args.element && _this.element && $element.closest(args.element).length) {\r\n              $element.slick(\"setPosition\");\r\n            }\r\n          }); // Set the stage to interacting when a slide is focused\r\n\r\n\r\n          _this.focusedSlideSubscriber = _this.focusedSlide.subscribe(function (value) {\r\n            if (value !== null) {\r\n              _events.trigger(\"stage:interactionStart\");\r\n            } else {\r\n              _events.trigger(\"stage:interactionStop\");\r\n            }\r\n          });\r\n\r\n          _events.on(\"stage:\" + _this.contentType.stageId + \":fullScreenModeChangeAfter\", _this.onColumnResize.bind(_assertThisInitialized(_this), [true]));\r\n\r\n          _events.on(\"stage:\" + _this.contentType.stageId + \":viewportChangeAfter\", function () {\r\n            if (_this.element) {\r\n              (0, _jquery)(_this.element).slick(\"setPosition\");\r\n\r\n              _this.checkWidth();\r\n            }\r\n          });\r\n        }, function () {\r\n          return (0, _jquery)(element).find(\".pagebuilder-slide\").length === expectedChildren;\r\n        });\r\n      });\r\n      return _this;\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      options.add = new _option({\r\n        preview: this,\r\n        icon: \"<i class='icon-pagebuilder-add'></i>\",\r\n        title: (0, _translate)(\"Add\"),\r\n        action: this.addSlide,\r\n        classes: [\"add-child\"],\r\n        sort: 10\r\n      });\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Set an active slide for navigation dot\r\n     *\r\n     * @param slideIndex\r\n     */\r\n    ;\r\n\r\n    _proto.setActiveSlide = function setActiveSlide(slideIndex) {\r\n      this.activeSlide(slideIndex);\r\n    }\r\n    /**\r\n     * Set the focused slide\r\n     *\r\n     * @param {number} slideIndex\r\n     * @param {boolean} force\r\n     */\r\n    ;\r\n\r\n    _proto.setFocusedSlide = function setFocusedSlide(slideIndex, force) {\r\n      if (force === void 0) {\r\n        force = false;\r\n      }\r\n\r\n      if (force) {\r\n        this.focusedSlide(null);\r\n      }\r\n\r\n      this.focusedSlide(slideIndex);\r\n    }\r\n    /**\r\n     * Unset focused slide on focusout event.\r\n     *\r\n     * @param {PreviewCollection} data\r\n     * @param {JQueryEventObject} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusOut = function onFocusOut(data, event) {\r\n      var relatedTarget = event.relatedTarget;\r\n\r\n      if (!relatedTarget && document.activeElement && !(document.activeElement instanceof HTMLBodyElement)) {\r\n        relatedTarget = document.activeElement;\r\n      }\r\n\r\n      if (!relatedTarget) {\r\n        this.setFocusedSlide(null);\r\n        return;\r\n      }\r\n\r\n      var $relatedTarget = (0, _jquery)(relatedTarget);\r\n      var isRelatedTargetDescendantOfNavigation = $relatedTarget.closest(this.navigationElement).length;\r\n      var isFocusedOnAnotherSlideInThisSlider = $relatedTarget.hasClass(\"navigation-dot-anchor\") && isRelatedTargetDescendantOfNavigation;\r\n\r\n      if (isFocusedOnAnotherSlideInThisSlider) {\r\n        _events.trigger(\"stage:interactionStop\");\r\n      } else if (!isRelatedTargetDescendantOfNavigation) {\r\n        this.setFocusedSlide(null);\r\n      }\r\n    }\r\n    /**\r\n     * Set reference to navigation element in template\r\n     *\r\n     * @param {HTMLElement} navigationElement\r\n     */\r\n    ;\r\n\r\n    _proto.afterNavigationRender = function afterNavigationRender(navigationElement) {\r\n      this.navigationElement = navigationElement;\r\n    }\r\n    /**\r\n     * Navigate to a slide\r\n     *\r\n     * @param {number} slideIndex\r\n     * @param {boolean} dontAnimate\r\n     * @param {boolean} force\r\n     */\r\n    ;\r\n\r\n    _proto.navigateToSlide = function navigateToSlide(slideIndex, dontAnimate, force) {\r\n      if (dontAnimate === void 0) {\r\n        dontAnimate = false;\r\n      }\r\n\r\n      if (force === void 0) {\r\n        force = false;\r\n      }\r\n\r\n      if ((0, _jquery)(this.element).hasClass(\"slick-initialized\")) {\r\n        (0, _jquery)(this.element).slick(\"slickGoTo\", slideIndex, dontAnimate);\r\n        this.setActiveSlide(slideIndex);\r\n        this.setFocusedSlide(slideIndex, force);\r\n      }\r\n    }\r\n    /**\r\n     * After child render record element\r\n     *\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.afterChildrenRender = function afterChildrenRender(element) {\r\n      this.element = element; // if slider has been re-rendered previously on this element, re-build\r\n\r\n      if (this.ready) {\r\n        this.buildSlick();\r\n      }\r\n\r\n      _previewCollection2.prototype.afterChildrenRender.call(this, element);\r\n\r\n      this.afterChildrenRenderDeferred.resolve(element);\r\n    }\r\n    /**\r\n     * On sort start force the container height, also focus to that slide\r\n     *\r\n     * @param {Event} event\r\n     * @param {JQueryUI.SortableUIParams} params\r\n     */\r\n    ;\r\n\r\n    _proto.onSortStart = function onSortStart(event, params) {\r\n      this.forceContainerHeight();\r\n\r\n      if (this.activeSlide() !== params.item.index() || this.focusedSlide() !== params.item.index()) {\r\n        this.navigateToSlide(params.item.index(), false, true); // As we've completed a navigation request we need to ensure we don't remove the forced height\r\n\r\n        this.contentTypeHeightReset = true;\r\n      }\r\n    }\r\n    /**\r\n     * On sort stop ensure the focused slide and the active slide are in sync, as the focus can be lost in this\r\n     * operation\r\n     */\r\n    ;\r\n\r\n    _proto.onSortStop = function onSortStop(event, params) {\r\n      var _this2 = this;\r\n\r\n      if (this.activeSlide() !== this.focusedSlide()) {\r\n        this.setFocusedSlide(this.activeSlide(), true);\r\n      }\r\n\r\n      if (params.item.index() !== -1) {\r\n        _underscore.defer(this.focusElement.bind(this, event, params.item.index()));\r\n      }\r\n\r\n      _underscore.defer(function () {\r\n        (0, _jquery)(_this2.element).css({\r\n          height: \"\",\r\n          overflow: \"\"\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Add a slide into the slider\r\n     */\r\n    ;\r\n\r\n    _proto.addSlide = function addSlide() {\r\n      var _this3 = this;\r\n\r\n      (0, _contentTypeFactory)(_config.getConfig(\"content_types\").slide, this.contentType, this.contentType.stageId).then(function (slide) {\r\n        _events.on(\"slide:mountAfter\", function (args) {\r\n          if (args.id === slide.id) {\r\n            _underscore.defer(function () {\r\n              // Wait until slick is initialized before trying to navigate\r\n              (0, _delayUntil)(function () {\r\n                return _this3.navigateToSlide(_this3.contentType.children().length - 1);\r\n              }, function () {\r\n                return (0, _jquery)(_this3.element).hasClass(\"slick-initialized\");\r\n              }, 10);\r\n            });\r\n\r\n            _events.off(\"slide:\" + slide.id + \":mountAfter\");\r\n          }\r\n        }, \"slide:\" + slide.id + \":mountAfter\");\r\n\r\n        _this3.contentType.addChild(slide, _this3.contentType.children().length);\r\n      });\r\n    }\r\n    /**\r\n     * Slider can not receive drops by default\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.isContainer = function isContainer() {\r\n      return false;\r\n    }\r\n    /**\r\n     * Slider navigation click handler.\r\n     *\r\n     * @param {number} index\r\n     * @param {Preview} context\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onControlClick = function onControlClick(index, context, event) {\r\n      (0, _jquery)(event.target).focus();\r\n      this.navigateToSlide(index);\r\n      this.setFocusedSlide(index);\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    ;\r\n\r\n    _proto.destroy = function destroy() {\r\n      _previewCollection2.prototype.destroy.call(this);\r\n\r\n      if (this.focusedSlideSubscriber) {\r\n        this.focusedSlideSubscriber.dispose();\r\n      }\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this4 = this;\r\n\r\n      _previewCollection2.prototype.bindEvents.call(this);\r\n\r\n      _events.on(\"slider:mountAfter\", function (args) {\r\n        if (args.id === _this4.contentType.id) {\r\n          if (args.expectChildren !== undefined) {\r\n            _this4.mountAfterDeferred.resolve(args.expectChildren);\r\n          }\r\n        }\r\n      }); // Set the active slide to the new position of the sorted slide\r\n\r\n\r\n      _events.on(\"childContentType:sortUpdate\", function (args) {\r\n        if (args.instance.id === _this4.contentType.id) {\r\n          (0, _jquery)(args.ui.item).remove(); // Remove the item as the container's children is controlled by knockout\r\n\r\n          _this4.setActiveSlide(args.newPosition);\r\n\r\n          _underscore.defer(_this4.focusElement.bind(_this4, args.event, args.newPosition));\r\n        }\r\n      }); // When a slide content type is removed\r\n      // we need to force update the content of the slider due to KO rendering issues\r\n\r\n\r\n      var newItemIndex;\r\n\r\n      _events.on(\"slide:removeAfter\", function (args) {\r\n        if (args.parentContentType && args.parentContentType.id === _this4.contentType.id) {\r\n          // Mark the previous slide as active\r\n          newItemIndex = args.index - 1 >= 0 ? args.index - 1 : 0;\r\n\r\n          _this4.forceContainerHeight();\r\n\r\n          var data = _this4.contentType.children().slice(0);\r\n\r\n          _this4.contentType.children([]);\r\n\r\n          _this4.contentType.children(data);\r\n\r\n          _underscore.defer(function () {\r\n            _this4.buildSlick();\r\n          });\r\n        }\r\n      });\r\n\r\n      _events.on(\"slide:renderAfter\", function (args) {\r\n        var itemIndex = args.contentType.parentContentType.getChildren()().indexOf(args.contentType);\r\n\r\n        if (args.contentType.parentContentType.id === _this4.contentType.id && newItemIndex !== null && newItemIndex === itemIndex) {\r\n          _underscore.defer(function () {\r\n            if (newItemIndex !== null) {\r\n              newItemIndex = null;\r\n\r\n              _this4.navigateToSlide(itemIndex, true, true);\r\n\r\n              _underscore.defer(function () {\r\n                _this4.focusedSlide(null);\r\n\r\n                _this4.focusedSlide(itemIndex);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }); // On a slide content types creation we need to lock the height of the slider to ensure a smooth transition\r\n\r\n\r\n      _events.on(\"slide:createAfter\", function (args) {\r\n        if (_this4.element && _this4.ready && args.contentType.parentContentType.id === _this4.contentType.id) {\r\n          _this4.forceContainerHeight();\r\n\r\n          _underscore.defer(function () {\r\n            (0, _jquery)(_this4.element).css({\r\n              height: \"\",\r\n              overflow: \"\"\r\n            });\r\n          });\r\n        }\r\n      }); // ContentType being mounted onto container\r\n\r\n\r\n      _events.on(\"slider:dropAfter\", function (args) {\r\n        if (args.id === _this4.contentType.id && _this4.contentType.children().length === 0) {\r\n          _this4.addSlide();\r\n        }\r\n      }); // Capture when a content type is duplicated within the container\r\n\r\n\r\n      var duplicatedSlide;\r\n      var duplicatedSlideIndex;\r\n\r\n      _events.on(\"slide:duplicateAfter\", function (args) {\r\n        if (args.duplicateContentType.parentContentType.id === _this4.contentType.id && args.direct) {\r\n          duplicatedSlide = args.duplicateContentType;\r\n          duplicatedSlideIndex = args.index;\r\n        }\r\n      });\r\n\r\n      _events.on(\"slide:mountAfter\", function (args) {\r\n        if (duplicatedSlide && args.id === duplicatedSlide.id) {\r\n          _underscore.defer(function () {\r\n            // Mark the new duplicate slide as active\r\n            _this4.navigateToSlide(duplicatedSlideIndex, true, true);\r\n\r\n            duplicatedSlide = duplicatedSlideIndex = null;\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Determine if the data has changed, whilst ignoring certain keys which don't require a rebuild\r\n     *\r\n     * @param {DataObject} previousData\r\n     * @param {DataObject} newData\r\n     * @returns {boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.hasDataChanged = function hasDataChanged(previousData, newData) {\r\n      previousData = _underscore.omit(previousData, this.ignoredKeysForBuild);\r\n      newData = _underscore.omit(newData, this.ignoredKeysForBuild);\r\n      return !_underscore.isEqual(previousData, newData);\r\n    }\r\n    /**\r\n     * Build our instance of slick\r\n     */\r\n    ;\r\n\r\n    _proto.buildSlick = function buildSlick() {\r\n      var _this5 = this;\r\n\r\n      if (this.element && this.element.children.length > 0) {\r\n        try {\r\n          (0, _jquery)(this.element).slick(\"unslick\");\r\n        } catch (e) {// We aren't concerned if this fails, slick throws an Exception when we cannot unslick\r\n        } // Dispose current subscription in order to prevent infinite loop\r\n\r\n\r\n        if (this.childSubscribe) {\r\n          this.childSubscribe.dispose();\r\n        } // Force an update on all children, ko tries to intelligently re-render but fails\r\n\r\n\r\n        var data = this.contentType.children().slice(0);\r\n        this.contentType.children([]);\r\n        (0, _jquery)(this.element).empty();\r\n        this.contentType.children(data); // Re-subscribe original event\r\n\r\n        this.childSubscribe = this.contentType.children.subscribe(this.buildSlickDebounce); // Bind our init event for slick\r\n\r\n        (0, _jquery)(this.element).on(\"init\", function () {\r\n          _this5.ready = true;\r\n        }); // Build slick\r\n\r\n        (0, _jquery)(this.element).slick(Object.assign({\r\n          initialSlide: this.activeSlide() || 0\r\n        }, this.buildSlickConfig())); // Update our KO pointer to the active slide on change\r\n\r\n        (0, _jquery)(this.element).on(\"beforeChange\", function (event, slick, currentSlide, nextSlide) {\r\n          (0, _jquery)(_this5.element).css(\"pointer-events\", \"none\");\r\n\r\n          _this5.setActiveSlide(nextSlide);\r\n        }).on(\"afterChange\", function () {\r\n          if (!_this5.contentTypeHeightReset) {\r\n            (0, _jquery)(_this5.element).css({\r\n              height: \"\",\r\n              overflow: \"\"\r\n            });\r\n            _this5.contentTypeHeightReset = null;\r\n          }\r\n\r\n          (0, _jquery)(_this5.element).css(\"pointer-events\", \"\");\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * Take dropped element on focus.\r\n     *\r\n     * @param {JQueryEventObject} event\r\n     * @param {number} index\r\n     */\r\n    ;\r\n\r\n    _proto.focusElement = function focusElement(event, index) {\r\n      var handleClassName = (0, _jquery)(event.target).data(\"ui-sortable\").options.handle;\r\n      (0, _jquery)((0, _jquery)(event.target).find(handleClassName)[index]).focus();\r\n    }\r\n    /**\r\n     * To ensure smooth animations we need to lock the container height\r\n     */\r\n    ;\r\n\r\n    _proto.forceContainerHeight = function forceContainerHeight() {\r\n      (0, _jquery)(this.element).css({\r\n        height: (0, _jquery)(this.element).outerHeight(),\r\n        overflow: \"hidden\"\r\n      });\r\n    }\r\n    /**\r\n     * Build the slick config object\r\n     *\r\n     * @returns {{autoplay: boolean; autoplaySpeed: (any | number);\r\n     * fade: boolean; infinite: boolean; arrows: boolean; dots: boolean}}\r\n     */\r\n    ;\r\n\r\n    _proto.buildSlickConfig = function buildSlickConfig() {\r\n      var data = this.contentType.dataStore.getState();\r\n      return {\r\n        arrows: data.show_arrows === \"true\",\r\n        autoplay: data.autoplay === \"true\",\r\n        autoplaySpeed: data.autoplay_speed,\r\n        dots: false,\r\n        // We have our own dots implemented\r\n        fade: data.fade === \"true\",\r\n        infinite: data.is_infinite === \"true\",\r\n        waitForAnimate: false,\r\n        swipe: false\r\n      };\r\n    }\r\n    /**\r\n     * Fit slider in column container\r\n     *\r\n     * @param params\r\n     */\r\n    ;\r\n\r\n    _proto.onColumnResize = function onColumnResize(params) {\r\n      var _this6 = this;\r\n\r\n      setTimeout(function () {\r\n        if (_this6.element) {\r\n          (0, _jquery)(_this6.element).slick(\"setPosition\");\r\n\r\n          _this6.checkWidth();\r\n        }\r\n      }, 450);\r\n    }\r\n    /**\r\n     * Check width and add class that marks element as small\r\n     */\r\n    ;\r\n\r\n    _proto.checkWidth = function checkWidth() {\r\n      if (this.element.offsetWidth < 410) {\r\n        this.element.classList.add(\"slider-small-width\");\r\n      } else {\r\n        this.element.classList.remove(\"slider-small-width\");\r\n      }\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/slider/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'slick'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    return function (config, sliderElement) {\r\n        var $element = $(sliderElement);\r\n\r\n        /**\r\n         * Prevent each slick slider from being initialized more than once which could throw an error.\r\n         */\r\n        if ($element.hasClass('slick-initialized')) {\r\n            $element.slick('unslick');\r\n        }\r\n\r\n        $element.slick({\r\n            autoplay: $element.data('autoplay'),\r\n            autoplaySpeed: $element.data('autoplay-speed') || 0,\r\n            fade: $element.data('fade'),\r\n            infinite: $element.data('infinite-loop'),\r\n            arrows: $element.data('show-arrows'),\r\n            dots: $element.data('show-dots')\r\n        });\r\n\r\n        // Redraw slide after content type gets redrawn\r\n        events.on('contentType:redrawAfter', function (args) {\r\n            if ($element.closest(args.element).length) {\r\n                $element.slick('setPosition');\r\n            }\r\n        });\r\n        // eslint-disable-next-line jquery-no-bind-unbind\r\n        events.on('stage:viewportChangeAfter', $element.slick.bind($element, 'setPosition'));\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/tab-item/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/content-type-menu/conditional-remove-option\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jquery, _knockout, _conditionalRemoveOption, _previewCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    function Preview() {\r\n      var _this;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      _this = _previewCollection2.call.apply(_previewCollection2, [this].concat(args)) || this;\r\n      _this.fieldsToIgnoreOnRemove = [\"tab_name\"];\r\n      return _this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Get background image url base on the viewport.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    _proto.getBackgroundImage = function getBackgroundImage() {\r\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\r\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\r\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\r\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\r\n    }\r\n    /**\r\n     * Force the focus on the clicked tab header\r\n     *\r\n     * @param {number} index\r\n     * @param {JQueryEventObject} event\r\n     */\r\n    ;\r\n\r\n    _proto.onClick = function onClick(index, event) {\r\n      (0, _jquery)(event.currentTarget).find(\"[contenteditable]\").focus();\r\n      event.stopPropagation();\r\n    }\r\n    /**\r\n     * On focus in set the focused button\r\n     *\r\n     * @param {number} index\r\n     * @param {Event} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusIn = function onFocusIn(index, event) {\r\n      var parentPreview = this.contentType.parentContentType.preview;\r\n\r\n      if (parentPreview.focusedTab() !== index) {\r\n        parentPreview.setFocusedTab(index, true);\r\n      }\r\n    }\r\n    /**\r\n     * On focus out set the focused tab to null\r\n     *\r\n     * @param {number} index\r\n     * @param {JQueryEventObject} event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocusOut = function onFocusOut(index, event) {\r\n      if (this.contentType && this.contentType.parentContentType) {\r\n        var parentPreview = this.contentType.parentContentType.preview;\r\n\r\n        var unfocus = function unfocus() {\r\n          window.getSelection().removeAllRanges();\r\n          parentPreview.focusedTab(null);\r\n        };\r\n\r\n        if (event.relatedTarget && _jquery.contains(parentPreview.wrapperElement, event.relatedTarget)) {\r\n          // Verify the focus was not onto the options menu\r\n          if ((0, _jquery)(event.relatedTarget).closest(\".pagebuilder-options\").length > 0) {\r\n            unfocus();\r\n          } else {\r\n            // Have we moved the focus onto another button in the current group?\r\n            var tabItem = _knockout.dataFor(event.relatedTarget);\r\n\r\n            if (tabItem && tabItem.contentType && tabItem.contentType.parentContentType && tabItem.contentType.parentContentType.id === this.contentType.parentContentType.id) {\r\n              var newIndex = tabItem.contentType.parentContentType.children().indexOf(tabItem.contentType);\r\n              parentPreview.setFocusedTab(newIndex, true);\r\n            } else {\r\n              unfocus();\r\n            }\r\n          }\r\n        } else if (parentPreview.focusedTab() === index) {\r\n          unfocus();\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Get the options instance\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      delete options.move;\r\n      delete options.title;\r\n      options.remove = new _conditionalRemoveOption(_extends({}, options.remove.config, {\r\n        preview: this\r\n      }));\r\n      return options;\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/tabs/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"tabs\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type-menu/option\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/promise-deferred\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jquery, _knockout, _translate, _events, _tabs, _underscore, _config, _contentTypeFactory, _hideShowOption, _option, _delayUntil, _promiseDeferred, _previewCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _previewCollection2);\r\n\r\n    /**\r\n     * @param {ContentTypeCollectionInterface} contentType\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {ObservableUpdater} observableUpdater\r\n     */\r\n    function Preview(contentType, config, observableUpdater) {\r\n      var _this;\r\n\r\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this; // Wait for the tabs instance to mount and the container to be ready\r\n\r\n      _this.focusedTab = _knockout.observable(null);\r\n      _this.activeTab = _knockout.observable(0);\r\n      _this.onContainerRenderDeferred = (0, _promiseDeferred)();\r\n      _this.mountAfterDeferred = (0, _promiseDeferred)();\r\n      Promise.all([_this.onContainerRenderDeferred.promise, _this.mountAfterDeferred.promise]).then(function (_ref) {\r\n        var element = _ref[0],\r\n            expectedChildren = _ref[1];\r\n        // We always create 1 tab when dropping tabs into the instance\r\n        expectedChildren = expectedChildren || 1; // Wait until all children's DOM elements are present before building the tabs instance\r\n\r\n        (0, _delayUntil)(function () {\r\n          _this.element = element;\r\n\r\n          _this.buildTabs();\r\n        }, function () {\r\n          return (0, _jquery)(element).find(\".pagebuilder-tab-item\").length === expectedChildren;\r\n        });\r\n      }); // Resolve our deferred when the tabs item mounts with expect children\r\n\r\n      _events.on(\"tabs:mountAfter\", function (args) {\r\n        if (args.contentType.id === _this.contentType.id && args.expectChildren !== undefined) {\r\n          _this.mountAfterDeferred.resolve(args.expectChildren);\r\n        }\r\n      });\r\n\r\n      _events.on(\"tab-item:mountAfter\", function (args) {\r\n        if (_this.element && args.contentType.parentContentType.id === _this.contentType.id) {\r\n          _this.refreshTabs();\r\n        }\r\n      });\r\n\r\n      _events.on(\"tab-item:renderAfter\", function (args) {\r\n        if (_this.element && args.contentType.parentContentType.id === _this.contentType.id) {\r\n          _underscore.defer(function () {\r\n            _this.refreshTabs();\r\n          });\r\n        }\r\n      }); // Set the active tab to the new position of the sorted tab\r\n\r\n\r\n      _events.on(\"tab-item:removeAfter\", function (args) {\r\n        if (args.parentContentType && args.parentContentType.id === _this.contentType.id) {\r\n          _this.refreshTabs(); // We need to wait for the tabs to refresh before executing the focus\r\n\r\n\r\n          _underscore.defer(function () {\r\n            var newPosition = args.index > 0 ? args.index - 1 : 0;\r\n\r\n            _this.setFocusedTab(newPosition, true);\r\n          });\r\n        }\r\n      }); // Refresh tab contents and set the focus to the new position of the sorted tab\r\n\r\n\r\n      _events.on(\"childContentType:sortUpdate\", function (args) {\r\n        if (args.instance.id === _this.contentType.id) {\r\n          _this.refreshTabs(args.newPosition, true);\r\n          /**\r\n           * Update the default active tab if its position was affected by the sorting\r\n           */\r\n\r\n\r\n          var defaultActiveTab = +_this.activeTab();\r\n          var newDefaultActiveTab = defaultActiveTab;\r\n\r\n          if (args.originalPosition === defaultActiveTab) {\r\n            newDefaultActiveTab = args.newPosition;\r\n          } else if (args.originalPosition < defaultActiveTab && args.newPosition >= defaultActiveTab) {\r\n            // a tab was moved from the left of the default active tab the right of it, changing its index\r\n            newDefaultActiveTab--;\r\n          } else if (args.originalPosition > defaultActiveTab && args.newPosition <= defaultActiveTab) {\r\n            // a tab was moved from the right of the default active tab the left of it, changing its index\r\n            newDefaultActiveTab++;\r\n          }\r\n\r\n          _this.updateData(\"default_active\", newDefaultActiveTab.toString());\r\n        }\r\n      }); // Monitor focus tab to start / stop interaction on the stage, debounce to avoid duplicate calls\r\n\r\n\r\n      _this.focusedTab.subscribe(_underscore.debounce(function (index) {\r\n        if (index !== null) {\r\n          _events.trigger(\"stage:interactionStart\");\r\n\r\n          (0, _delayUntil)(function () {\r\n            return (0, _jquery)((0, _jquery)(_this.wrapperElement).find(\".tab-header\")[index]).find(\"[contenteditable]\").focus();\r\n          }, function () {\r\n            return (0, _jquery)((0, _jquery)(_this.wrapperElement).find(\".tab-header\")[index]).find(\"[contenteditable]\").length > 0;\r\n          }, 10);\r\n        } else {\r\n          // We have to force the stop as the event firing is inconsistent for certain operations\r\n          _events.trigger(\"stage:interactionStop\", {\r\n            force: true\r\n          });\r\n        }\r\n      }, 1));\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Remove focused tab\r\n     */\r\n\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    _proto.destroy = function destroy() {\r\n      var _this2 = this;\r\n\r\n      _previewCollection2.prototype.destroy.call(this);\r\n\r\n      _underscore.defer(function () {\r\n        return _this2.setFocusedTab(null);\r\n      });\r\n    }\r\n    /**\r\n     * Refresh the tabs instance when new content appears\r\n     *\r\n     * @param {number} focusIndex\r\n     * @param {boolean} forceFocus\r\n     * @param {number} activeIndex\r\n     */\r\n    ;\r\n\r\n    _proto.refreshTabs = function refreshTabs(focusIndex, forceFocus, activeIndex) {\r\n      try {\r\n        (0, _jquery)(this.element).tabs(\"refresh\");\r\n\r\n        if (focusIndex >= 0) {\r\n          this.setFocusedTab(focusIndex, forceFocus);\r\n        } else if (activeIndex) {\r\n          this.setActiveTab(activeIndex);\r\n        } // update sortability of tabs\r\n\r\n\r\n        var sortableElement = (0, _jquery)(this.element).find(\".tabs-navigation\");\r\n\r\n        if (sortableElement.hasClass(\"ui-sortable\")) {\r\n          if (this.contentType.children().length <= 1) {\r\n            sortableElement.sortable(\"disable\");\r\n          } else {\r\n            sortableElement.sortable(\"enable\");\r\n          }\r\n        }\r\n      } catch (e) {\r\n        this.buildTabs();\r\n      }\r\n    }\r\n    /**\r\n     * Set the active tab, we maintain a reference to it in an observable for when we rebuild the tab instance\r\n     *\r\n     * @param {number} index\r\n     */\r\n    ;\r\n\r\n    _proto.setActiveTab = function setActiveTab(index) {\r\n      var _this3 = this;\r\n\r\n      if (index !== null) {\r\n        // Added to prevent mismatched fragment error caused by not yet rendered tab-item\r\n        index = parseInt(index.toString(), 10);\r\n        (0, _delayUntil)(function () {\r\n          (0, _jquery)(_this3.element).tabs(\"option\", \"active\", index);\r\n\r\n          _this3.activeTab(index);\r\n\r\n          _events.trigger(\"contentType:redrawAfter\", {\r\n            id: _this3.contentType.id,\r\n            contentType: _this3\r\n          });\r\n        }, function () {\r\n          return (0, _jquery)(_this3.element).find(\".pagebuilder-tab-item\").length >= index + 1;\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * Set the focused tab\r\n     *\r\n     * @param {number} index\r\n     * @param {boolean} force\r\n     */\r\n    ;\r\n\r\n    _proto.setFocusedTab = function setFocusedTab(index, force) {\r\n      if (force === void 0) {\r\n        force = false;\r\n      }\r\n\r\n      this.setActiveTab(index);\r\n\r\n      if (force) {\r\n        this.focusedTab(null);\r\n      }\r\n\r\n      this.focusedTab(index);\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\r\n\r\n      options.add = new _option({\r\n        preview: this,\r\n        icon: \"<i class='icon-pagebuilder-add'></i>\",\r\n        title: (0, _translate)(\"Add\"),\r\n        action: this.addTab,\r\n        classes: [\"add-child\"],\r\n        sort: 10\r\n      });\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * Add a tab\r\n     */\r\n    ;\r\n\r\n    _proto.addTab = function addTab() {\r\n      var _this4 = this;\r\n\r\n      (0, _contentTypeFactory)(_config.getContentTypeConfig(\"tab-item\"), this.contentType, this.contentType.stageId).then(function (tab) {\r\n        _events.on(\"tab-item:mountAfter\", function (args) {\r\n          if (args.id === tab.id) {\r\n            _this4.setFocusedTab(_this4.contentType.children().length - 1);\r\n\r\n            _events.off(\"tab-item:\" + tab.id + \":mountAfter\");\r\n          }\r\n        }, \"tab-item:\" + tab.id + \":mountAfter\");\r\n\r\n        _this4.contentType.addChild(tab, _this4.contentType.children().length); // Update the default tab title when adding a new tab\r\n\r\n\r\n        tab.dataStore.set(\"tab_name\", (0, _translate)(\"Tab\") + \" \" + (_this4.contentType.children.indexOf(tab) + 1));\r\n      });\r\n    }\r\n    /**\r\n     * On render init the tabs widget\r\n     *\r\n     * @param {Element} element\r\n     */\r\n    ;\r\n\r\n    _proto.onContainerRender = function onContainerRender(element) {\r\n      this.element = element;\r\n      this.onContainerRenderDeferred.resolve(element);\r\n    }\r\n    /**\r\n     * Copy over border styles to the tab headers\r\n     *\r\n     * @returns {any}\r\n     */\r\n    ;\r\n\r\n    _proto.getTabHeaderStyles = function getTabHeaderStyles() {\r\n      var headerStyles = this.data.headers.style();\r\n      return _extends({}, headerStyles, {\r\n        marginBottom: \"-\" + headerStyles.borderWidth,\r\n        marginLeft: \"-\" + headerStyles.borderWidth\r\n      });\r\n    }\r\n    /**\r\n     * Get the sortable options for the tab heading sorting\r\n     *\r\n     * @returns {JQueryUI.SortableOptions}\r\n     */\r\n    ;\r\n\r\n    _proto.getSortableOptions = function getSortableOptions() {\r\n      var self = this;\r\n      var borderWidth;\r\n      return {\r\n        handle: \".tab-drag-handle\",\r\n        tolerance: \"pointer\",\r\n        cursor: \"grabbing\",\r\n        cursorAt: {\r\n          left: 8,\r\n          top: 25\r\n        },\r\n\r\n        /**\r\n         * Provide custom helper element\r\n         *\r\n         * @param {Event} event\r\n         * @param {JQueryUI.Sortable} element\r\n         * @returns {Element}\r\n         */\r\n        helper: function helper(event, element) {\r\n          var helper = (0, _jquery)(element).clone().css(\"opacity\", \"0.7\");\r\n          helper[0].querySelector(\".pagebuilder-options\").remove();\r\n          return helper[0];\r\n        },\r\n\r\n        /**\r\n         * Add a padding to the navigation UL to resolve issues of negative margins when sorting\r\n         *\r\n         * @param {Event} event\r\n         * @param {JQueryUI.SortableUIParams} ui\r\n         */\r\n        start: function start(event, ui) {\r\n          /**\r\n           * Due to the way we use negative margins to overlap the borders we need to apply a padding to the\r\n           * container when we're moving the first item to ensure the tabs remain in the same place.\r\n           */\r\n          if (ui.item.index() === 0) {\r\n            borderWidth = parseInt(ui.item.css(\"borderWidth\"), 10) || 1;\r\n            (0, _jquery)(this).css(\"paddingLeft\", borderWidth);\r\n          }\r\n\r\n          ui.helper.css(\"width\", \"\");\r\n\r\n          _events.trigger(\"stage:interactionStart\");\r\n\r\n          self.disableInteracting = true;\r\n        },\r\n\r\n        /**\r\n         * Remove the padding once the operation is completed\r\n         *\r\n         * @param {Event} event\r\n         * @param {JQueryUI.SortableUIParams} ui\r\n         */\r\n        stop: function stop(event, ui) {\r\n          (0, _jquery)(this).css(\"paddingLeft\", \"\");\r\n\r\n          _events.trigger(\"stage:interactionStop\");\r\n\r\n          self.disableInteracting = false;\r\n        },\r\n        placeholder: {\r\n          /**\r\n           * Provide custom placeholder element\r\n           *\r\n           * @param {JQuery} item\r\n           * @returns {JQuery}\r\n           */\r\n          element: function element(item) {\r\n            var placeholder = item.clone().css({\r\n              display: \"inline-block\",\r\n              opacity: \"0.3\"\r\n            }).removeClass(\"focused\").addClass(\"sortable-placeholder\");\r\n            placeholder[0].querySelector(\".pagebuilder-options\").remove();\r\n            return placeholder[0];\r\n          },\r\n          update: function update() {\r\n            return;\r\n          }\r\n        }\r\n      };\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this5 = this;\r\n\r\n      _previewCollection2.prototype.bindEvents.call(this); // ContentType being mounted onto container\r\n\r\n\r\n      _events.on(\"tabs:dropAfter\", function (args) {\r\n        if (args.id === _this5.contentType.id && _this5.contentType.children().length === 0) {\r\n          _this5.addTab();\r\n        }\r\n      }); // ContentType being removed from container\r\n\r\n\r\n      _events.on(\"tab-item:removeAfter\", function (args) {\r\n        if (args.parentContentType && args.parentContentType.id === _this5.contentType.id) {\r\n          // Mark the previous tab as active\r\n          var newIndex = args.index - 1 >= 0 ? args.index - 1 : 0;\r\n\r\n          _this5.refreshTabs(newIndex, true);\r\n        }\r\n      }); // Capture when a content type is duplicated within the container\r\n\r\n\r\n      var duplicatedTab;\r\n      var duplicatedTabIndex;\r\n\r\n      _events.on(\"tab-item:duplicateAfter\", function (args) {\r\n        if (_this5.contentType.id === args.duplicateContentType.parentContentType.id && args.direct) {\r\n          var tabData = args.duplicateContentType.dataStore.getState();\r\n          args.duplicateContentType.dataStore.set(\"tab_name\", tabData.tab_name.toString() + \" copy\");\r\n          duplicatedTab = args.duplicateContentType;\r\n          duplicatedTabIndex = args.index;\r\n        }\r\n      });\r\n\r\n      _events.on(\"tab-item:mountAfter\", function (args) {\r\n        if (duplicatedTab && args.id === duplicatedTab.id) {\r\n          _this5.refreshTabs(duplicatedTabIndex, true);\r\n\r\n          duplicatedTab = duplicatedTabIndex = null;\r\n        }\r\n\r\n        if (_this5.contentType.id === args.contentType.parentContentType.id) {\r\n          _this5.updateTabNamesInDataStore();\r\n\r\n          args.contentType.dataStore.subscribe(function () {\r\n            _this5.updateTabNamesInDataStore();\r\n          });\r\n        }\r\n      });\r\n\r\n      this.contentType.dataStore.subscribe(function (data) {\r\n        _this5.activeTab(data.default_active);\r\n      });\r\n    }\r\n    /**\r\n     * Update data store with active options\r\n     */\r\n    ;\r\n\r\n    _proto.updateTabNamesInDataStore = function updateTabNamesInDataStore() {\r\n      var activeOptions = [];\r\n      this.contentType.children().forEach(function (tab, index) {\r\n        var tabData = tab.dataStore.getState();\r\n        activeOptions.push({\r\n          label: tabData.tab_name.toString(),\r\n          labeltitle: tabData.tab_name.toString(),\r\n          value: index\r\n        });\r\n      });\r\n      this.contentType.dataStore.set(\"_default_active_options\", activeOptions);\r\n    }\r\n    /**\r\n     * Assign a debounce and delay to the init of tabs to ensure the DOM has updated\r\n     *\r\n     * @type {(() => void) & _.Cancelable}\r\n     */\r\n    ;\r\n\r\n    _proto.buildTabs = function buildTabs(activeTabIndex) {\r\n      var _this6 = this;\r\n\r\n      if (activeTabIndex === void 0) {\r\n        activeTabIndex = this.activeTab() || 0;\r\n      }\r\n\r\n      this.ready = false;\r\n\r\n      if (this.element && this.element.children.length > 0) {\r\n        var focusedTab = this.focusedTab();\r\n\r\n        try {\r\n          (0, _jquery)(this.element).tabs(\"destroy\");\r\n        } catch (e) {// We aren't concerned if this fails, tabs throws an Exception when we cannot destroy\r\n        }\r\n\r\n        (0, _jquery)(this.element).tabs({\r\n          create: function create() {\r\n            _this6.ready = true; // Ensure focus tab is restored after a rebuild cycle\r\n\r\n            if (focusedTab !== null) {\r\n              _this6.setFocusedTab(focusedTab, true);\r\n            } else {\r\n              _this6.setFocusedTab(null);\r\n\r\n              if (activeTabIndex) {\r\n                _this6.setActiveTab(activeTabIndex);\r\n              }\r\n            }\r\n          },\r\n\r\n          /**\r\n           * Trigger redraw event since new content is being displayed\r\n           */\r\n          activate: function activate() {\r\n            _events.trigger(\"contentType:redrawAfter\", {\r\n              element: _this6.element\r\n            });\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    return Preview;\r\n  }(_previewCollection); // Resolve issue with jQuery UI tabs content typing events on content editable areas\r\n\r\n\r\n  var originalTabKeyDown = _jquery.ui.tabs.prototype._tabKeydown;\r\n\r\n  _jquery.ui.tabs.prototype._tabKeydown = function (event) {\r\n    // If the target is content editable don't handle any events\r\n    if ((0, _jquery)(event.target).attr(\"contenteditable\")) {\r\n      return;\r\n    }\r\n\r\n    originalTabKeyDown.call(this, event);\r\n  };\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/tabs/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'jquery-ui-modules/tabs'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element);\r\n\r\n        // Ignore stage builder preview tabs\r\n        if ($element.is('.pagebuilder-tabs')) {\r\n            return;\r\n        }\r\n\r\n        // Disambiguate between the mage/tabs component which is loaded randomly depending on requirejs order.\r\n        $.ui.tabs({\r\n            active: $element.data('activeTab') || 0,\r\n            create:\r\n\r\n                /**\r\n                 * Adjust the margin bottom of the navigation to correctly display the active tab\r\n                 */\r\n                function () {\r\n                    var borderWidth = parseInt($element.find('.tabs-content').css('borderWidth').toString(), 10);\r\n\r\n                    $element.find('.tabs-navigation').css('marginBottom', -borderWidth);\r\n                    $element.find('.tabs-navigation li:not(:first-child)').css('marginLeft', -borderWidth);\r\n                },\r\n            activate:\r\n\r\n                /**\r\n                 * Trigger redraw event since new content is being displayed\r\n                 */\r\n                function () {\r\n                    events.trigger('contentType:redrawAfter', {\r\n                        element: element\r\n                    });\r\n                }\r\n        }, element);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/tabs/mass-converter/header-alignment.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var HeaderAlignment = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function HeaderAlignment() {}\r\n\r\n    var _proto = HeaderAlignment.prototype;\r\n\r\n    /**\r\n     * Process data after it's read and converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      return data;\r\n    }\r\n    /**\r\n     * Add our tab alignment class into the data for the tabs\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      data.css_classes += \" tab-align-\" + (0, _object.get)(data, config.navigation_alignment_variable, \"left\");\r\n      return data;\r\n    };\r\n\r\n    return HeaderAlignment;\r\n  }();\r\n\r\n  return HeaderAlignment;\r\n});\r\n//# sourceMappingURL=header-alignment.js.map","Magento_PageBuilder/js/content-type/text/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"jquery\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/wysiwyg/factory\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jquery, _events, _underscore, _hideShowOption, _delayUntil, _editor, _factory, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      var _this;\r\n\r\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      _this = _preview2.call.apply(_preview2, [this].concat(args)) || this;\r\n      _this.wysiwygDeferred = _jquery.Deferred();\r\n      _this.afterRenderDeferred = _jquery.Deferred();\r\n      _this.handledDoubleClick = false;\r\n      return _this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    _proto.isWysiwygSupported = function isWysiwygSupported() {\r\n      return (0, _editor.isWysiwygSupported)();\r\n    }\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    }\r\n    /**\r\n     * @param {HTMLElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.afterRenderWysiwyg = function afterRenderWysiwyg(element) {\r\n      var _this2 = this;\r\n\r\n      this.element = element;\r\n      element.id = this.contentType.id + \"-editor\"; // Set the innerHTML manually so we don't upset Knockout & TinyMCE\r\n\r\n      element.innerHTML = this.data.main.html();\r\n      this.contentType.dataStore.subscribe(function () {\r\n        // If we're not focused into TinyMCE inline, update the value when it changes in the data store\r\n        if (!_this2.wysiwyg || _this2.wysiwyg && _this2.wysiwyg.getAdapter().id !== (0, _editor.getActiveEditor)().id) {\r\n          element.innerHTML = _this2.data.main.html();\r\n        }\r\n      }, \"content\");\r\n      this.afterRenderDeferred.resolve(element);\r\n      /**\r\n       * afterRenderWysiwyg is called whenever Knockout causes a DOM re-render. This occurs frequently within Slider\r\n       * due to Slick's inability to perform a refresh with Knockout managing the DOM. Due to this the original\r\n       * WYSIWYG instance will be detached from this slide and we need to re-initialize on click.\r\n       */\r\n\r\n      this.wysiwyg = null;\r\n    }\r\n    /**\r\n     * Stop event to prevent execution of action when editing textarea.\r\n     *\r\n     * @param {Preview} preview\r\n     * @param {JQueryEventObject} event\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.stopEvent = function stopEvent(preview, event) {\r\n      event.stopPropagation();\r\n      return true;\r\n    }\r\n    /**\r\n     * Init WYSIWYG on load\r\n     *\r\n     * @param element\r\n     * @deprecated please use activateEditor & initWysiwygFromClick\r\n     */\r\n    ;\r\n\r\n    _proto.initWysiwyg = function initWysiwyg(element) {\r\n      this.element = element;\r\n      element.id = this.contentType.id + \"-editor\";\r\n      this.wysiwyg = null;\r\n      return this.initWysiwygFromClick(true);\r\n    }\r\n    /**\r\n     * Init the WYSIWYG\r\n     *\r\n     * @param {boolean} focus Should wysiwyg focus after initialization?\r\n     * @returns Promise\r\n     */\r\n    ;\r\n\r\n    _proto.initWysiwygFromClick = function initWysiwygFromClick(focus) {\r\n      var _this3 = this;\r\n\r\n      if (focus === void 0) {\r\n        focus = false;\r\n      }\r\n\r\n      if (this.wysiwyg) {\r\n        return Promise.resolve(this.wysiwyg);\r\n      }\r\n\r\n      var wysiwygConfig = this.config.additional_data.wysiwygConfig.wysiwygConfigData;\r\n      wysiwygConfig.adapter.settings.paste_as_text = true;\r\n\r\n      if (focus) {\r\n        wysiwygConfig.adapter.settings.auto_focus = this.element.id;\r\n\r\n        wysiwygConfig.adapter.settings.init_instance_callback = function () {\r\n          _underscore.defer(function () {\r\n            _this3.element.blur();\r\n\r\n            _this3.element.focus();\r\n          });\r\n        };\r\n      }\r\n\r\n      return (0, _factory)(this.contentType.id, this.element.id, this.config.name, wysiwygConfig, this.contentType.dataStore, \"content\", this.contentType.stageId).then(function (wysiwyg) {\r\n        _this3.wysiwyg = wysiwyg;\r\n        return wysiwyg;\r\n      });\r\n    }\r\n    /**\r\n     * Makes WYSIWYG active\r\n     *\r\n     * @param {Preview} preview\r\n     * @param {JQueryEventObject} event\r\n     * @returns {Boolean}\r\n     */\r\n    ;\r\n\r\n    _proto.activateEditor = function activateEditor(preview, event) {\r\n      var _this4 = this;\r\n\r\n      if (this.element && !this.wysiwyg) {\r\n        var bookmark = (0, _editor.createBookmark)(event);\r\n        (0, _editor.lockImageSize)(this.element);\r\n        this.element.removeAttribute(\"contenteditable\");\r\n\r\n        _underscore.defer(function () {\r\n          _this4.initWysiwygFromClick(true).then(function () {\r\n            return (0, _delayUntil)(function () {\r\n              // We no longer need to handle double click once it's initialized\r\n              _this4.handledDoubleClick = true;\r\n\r\n              _this4.wysiwygDeferred.resolve();\r\n\r\n              (0, _editor.moveToBookmark)(bookmark);\r\n              (0, _editor.unlockImageSize)(_this4.element);\r\n            }, function () {\r\n              return _this4.element.classList.contains(\"mce-edit-focus\");\r\n            }, 10);\r\n          }).catch(function (error) {\r\n            // If there's an error with init of WYSIWYG editor push into the console to aid support\r\n            console.error(error);\r\n          });\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * If a user double clicks prior to initializing TinyMCE, forward the event\r\n     *\r\n     * @param preview\r\n     * @param event\r\n     */\r\n    ;\r\n\r\n    _proto.handleDoubleClick = function handleDoubleClick(preview, event) {\r\n      var _this5 = this;\r\n\r\n      if (this.handledDoubleClick) {\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      var targetIndex = (0, _editor.findNodeIndex)(this.element, event.target.tagName, event.target);\r\n      this.handledDoubleClick = true;\r\n      this.wysiwygDeferred.then(function () {\r\n        var target = document.getElementById(event.target.id);\r\n\r\n        if (!target) {\r\n          target = (0, _editor.getNodeByIndex)(_this5.element, event.target.tagName, targetIndex);\r\n        }\r\n\r\n        if (target) {\r\n          target.dispatchEvent((0, _editor.createDoubleClickEvent)());\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * @param {HTMLTextAreaElement} element\r\n     */\r\n    ;\r\n\r\n    _proto.initTextarea = function initTextarea(element) {\r\n      var _this6 = this;\r\n\r\n      this.textarea = element; // set initial value of textarea based on data store\r\n\r\n      this.textarea.value = this.contentType.dataStore.get(\"content\");\r\n      this.adjustTextareaHeightBasedOnScrollHeight(); // Update content in our stage preview textarea after its slideout counterpart gets updated\r\n\r\n      _events.on(\"form:\" + this.contentType.id + \":saveAfter\", function () {\r\n        _this6.textarea.value = _this6.contentType.dataStore.get(\"content\");\r\n\r\n        _this6.adjustTextareaHeightBasedOnScrollHeight();\r\n      });\r\n    }\r\n    /**\r\n     * Save current value of textarea in data store\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaKeyUp = function onTextareaKeyUp() {\r\n      this.adjustTextareaHeightBasedOnScrollHeight();\r\n      this.contentType.dataStore.set(\"content\", this.textarea.value);\r\n    }\r\n    /**\r\n     * Start stage interaction on textarea blur\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaFocus = function onTextareaFocus() {\r\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-content-type\").addClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStart\");\r\n    }\r\n    /**\r\n     * Stop stage interaction on textarea blur\r\n     */\r\n    ;\r\n\r\n    _proto.onTextareaBlur = function onTextareaBlur() {\r\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-content-type\").removeClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events.trigger(\"stage:interactionStop\");\r\n    }\r\n    /**\r\n     * Retrieve the margin & padding & alignment styles for the placeholder\r\n     *\r\n     * @returns {any}\r\n     */\r\n    ;\r\n\r\n    _proto.getPlaceholderStyle = function getPlaceholderStyle() {\r\n      var keys = [\"marginBottom\", \"marginLeft\", \"marginRight\", \"marginTop\", \"paddingBottom\", \"paddingLeft\", \"paddingRight\", \"paddingTop\", \"textAlign\"];\r\n      return _underscore.pick(this.data.main.style(), function (style, key) {\r\n        return keys.indexOf(key) !== -1;\r\n      });\r\n    }\r\n    /**\r\n     * Bind events\r\n     */\r\n    ;\r\n\r\n    _proto.bindEvents = function bindEvents() {\r\n      var _this7 = this;\r\n\r\n      _preview2.prototype.bindEvents.call(this);\r\n\r\n      this.contentType.dataStore.subscribe(function (state) {\r\n        var sanitizedContent = (0, _editor.replaceDoubleQuoteWithSingleQuoteWithinVariableDirective)((0, _editor.escapeDoubleQuoteWithinWidgetDirective)(state.content));\r\n\r\n        if (sanitizedContent !== state.content) {\r\n          state.content = sanitizedContent;\r\n        }\r\n      }); // After drop of new content type open TinyMCE and focus\r\n\r\n      _events.on(\"text:dropAfter\", function (args) {\r\n        if (args.id === _this7.contentType.id) {\r\n          _this7.afterRenderDeferred.then(function () {\r\n            if (_this7.isWysiwygSupported()) {\r\n              _this7.initWysiwygFromClick(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Adjust textarea's height based on scrollHeight\r\n     */\r\n    ;\r\n\r\n    _proto.adjustTextareaHeightBasedOnScrollHeight = function adjustTextareaHeightBasedOnScrollHeight() {\r\n      this.textarea.style.height = \"\";\r\n      var scrollHeight = this.textarea.scrollHeight;\r\n      var minHeight = parseInt((0, _jquery)(this.textarea).css(\"min-height\"), 10);\r\n\r\n      if (scrollHeight === minHeight) {\r\n        // leave height at 'auto'\r\n        return;\r\n      }\r\n\r\n      (0, _jquery)(this.textarea).height(scrollHeight);\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/text/wysiwyg/tinymce/component-initializer.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"mage/adminhtml/wysiwyg/events\"], function (_jquery, _events) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ComponentInitializer = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ComponentInitializer() {}\r\n\r\n    var _proto = ComponentInitializer.prototype;\r\n\r\n    /**\r\n     * The editor element\r\n     */\r\n\r\n    /**\r\n     * The configuration of the wysiwyg content type\r\n     */\r\n\r\n    /**\r\n     * Initialize the instance\r\n     *\r\n     * @param {Wysiwyg} wysiwyg\r\n     */\r\n    _proto.initialize = function initialize(wysiwyg) {\r\n      this.$element = (0, _jquery)(\"#\" + wysiwyg.elementId);\r\n      this.config = wysiwyg.config;\r\n      var tinymce = wysiwyg.getAdapter();\r\n      tinymce.eventBus.attachEventHandler(_events.afterFocus, this.onFocus.bind(this));\r\n      tinymce.eventBus.attachEventHandler(_events.afterBlur, this.onBlur.bind(this));\r\n    }\r\n    /**\r\n     * Called when tinymce is focused\r\n     */\r\n    ;\r\n\r\n    _proto.onFocus = function onFocus() {\r\n      var _this = this;\r\n\r\n      // If there isn't enough room for a left-aligned toolbar, right align it\r\n      if ((0, _jquery)(window).width() < this.$element.offset().left + parseInt(this.config.adapter_config.minToolbarWidth, 10)) {\r\n        this.$element.addClass(\"_right-aligned-toolbar\");\r\n      } else {\r\n        this.$element.removeClass(\"_right-aligned-toolbar\");\r\n      }\r\n\r\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\r\n        _this.$element.closest(selector).css(\"z-index\", 100);\r\n      });\r\n    }\r\n    /**\r\n     * Called when tinymce is blurred\r\n     */\r\n    ;\r\n\r\n    _proto.onBlur = function onBlur() {\r\n      var _this2 = this;\r\n\r\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\r\n        _this2.$element.closest(selector).css(\"z-index\", \"\");\r\n      });\r\n    };\r\n\r\n    return ComponentInitializer;\r\n  }();\r\n\r\n  return ComponentInitializer;\r\n});\r\n//# sourceMappingURL=component-initializer.js.map","Magento_PageBuilder/js/content-type/text/wysiwyg/tinymce/config-modifier.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ConfigModifier = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ConfigModifier() {}\r\n\r\n    var _proto = ConfigModifier.prototype;\r\n\r\n    /**\r\n     * Initialize the config\r\n     *\r\n     * @param {String} contentTypeId\r\n     * @param {Object} config\r\n     */\r\n    _proto.modify = function modify(contentTypeId, config) {\r\n      if (config.adapter_config.mode === \"inline\") {\r\n        config.adapter.settings.fixed_toolbar_container = \"#\" + contentTypeId + \" \" + config.adapter.settings.fixed_toolbar_container;\r\n      }\r\n    };\r\n\r\n    return ConfigModifier;\r\n  }();\r\n\r\n  return ConfigModifier;\r\n});\r\n//# sourceMappingURL=config-modifier.js.map","Magento_PageBuilder/js/content-type/video/master.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type/master\"], function (_master) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Master = /*#__PURE__*/function (_master2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Master, _master2);\r\n\r\n    function Master() {\r\n      return _master2.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = Master.prototype;\r\n\r\n    _proto.isHosted = function isHosted(src) {\r\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\r\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\r\n      return vimeoRegExp.test(src) || youtubeRegExp.test(src);\r\n    };\r\n\r\n    return Master;\r\n  }(_master);\r\n\r\n  return Master;\r\n});\r\n//# sourceMappingURL=master.js.map","Magento_PageBuilder/js/content-type/video/preview.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_hideShowOption, _preview) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Preview = /*#__PURE__*/function (_preview2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(Preview, _preview2);\r\n\r\n    function Preview() {\r\n      return _preview2.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = Preview.prototype;\r\n\r\n    /**\r\n     * Return an array of options\r\n     *\r\n     * @returns {OptionsInterface}\r\n     */\r\n    _proto.retrieveOptions = function retrieveOptions() {\r\n      var options = _preview2.prototype.retrieveOptions.call(this);\r\n\r\n      options.hideShow = new _hideShowOption({\r\n        preview: this,\r\n        icon: _hideShowOption.showIcon,\r\n        title: _hideShowOption.showText,\r\n        action: this.onOptionVisibilityToggle,\r\n        classes: [\"hide-show-content-type\"],\r\n        sort: 40\r\n      });\r\n      return options;\r\n    };\r\n\r\n    _proto.isHosted = function isHosted(src) {\r\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\r\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\r\n      return vimeoRegExp.test(src) || youtubeRegExp.test(src);\r\n    }\r\n    /**\r\n     * After render callback\r\n     *\r\n     * @param {HTMLVideoElement} videoElement\r\n     * @param {Preview} self\r\n     */\r\n    ;\r\n\r\n    _proto.onAfterRender = function onAfterRender(videoElement, self) {\r\n      // Assign muted attribute explicitly due to API issues\r\n      videoElement.muted = self.data.video.attributes().autoplay;\r\n    };\r\n\r\n    return Preview;\r\n  }(_preview);\r\n\r\n  return Preview;\r\n});\r\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/video/converter/attribute/autoplay.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var VideoSrc = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function VideoSrc() {}\r\n\r\n    var _proto = VideoSrc.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value === \"true\" ? value : \"false\";\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {boolean|string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n      return value === \"true\" ? true : null;\r\n    };\r\n\r\n    return VideoSrc;\r\n  }();\r\n\r\n  return VideoSrc;\r\n});\r\n//# sourceMappingURL=autoplay.js.map","Magento_PageBuilder/js/content-type/video/converter/attribute/src.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Src = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Src() {}\r\n\r\n    var _proto = Src.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      var fileRegExp = new RegExp(\"^(webm:|mp4:|ogv:)\");\r\n\r\n      if (fileRegExp.test(value)) {\r\n        return value.substr(fileRegExp.exec(value)[0].length);\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value === undefined) {\r\n        return \"\";\r\n      }\r\n\r\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\r\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\r\n      var fileRegExp = new RegExp(\"^(?:https:|http:)?\\\\/\\\\/.*[\\\\\\\\\\\\/].+\\\\.(webm|mp4|ogv)(?!\\w)\");\r\n\r\n      if (youtubeRegExp.test(value)) {\r\n        return \"https://www.youtube.com/embed/\" + youtubeRegExp.exec(value)[1];\r\n      } else if (vimeoRegExp.test(value)) {\r\n        return \"https://player.vimeo.com/video/\" + vimeoRegExp.exec(value)[3] + \"?title=0&byline=0&portrait=0\";\r\n      } else if (fileRegExp.test(value)) {\r\n        var result = fileRegExp.exec(value);\r\n        return result[1] + \":\" + value;\r\n      }\r\n\r\n      return value;\r\n    };\r\n\r\n    return Src;\r\n  }();\r\n\r\n  return Src;\r\n});\r\n//# sourceMappingURL=src.js.map","Magento_PageBuilder/js/content-type/video/converter/attribute/videosrc.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var VideoSrc = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function VideoSrc() {}\r\n\r\n    /**\r\n     * Parse YouTube parameters from given URL and Autoplay setting from UI\r\n     *\r\n     * @param url string\r\n     * @param data DataObject\r\n     * @returns string\r\n     * @private\r\n     */\r\n    VideoSrc.parseYoutubeGetParams = function parseYoutubeGetParams(url, data) {\r\n      var acceptableYouTubeParams = [\"rel\", \"controls\", \"autoplay\", \"mute\", \"loop\", \"playlist\", \"cc_lang_pref\", \"cc_load_policy\", \"color\", \"disablekb\", \"end\", \"fs\", \"hl\", \"iv_load_policy\", \"modestbranding\", \"start\"];\r\n      var a = document.createElement(\"a\");\r\n      a.href = url;\r\n      var urlGetParams = {};\r\n      a.search.slice(a.search.indexOf(\"?\") + 1).split(\"&\").map(function (hash) {\r\n        var _hash$split = hash.split(\"=\"),\r\n            key = _hash$split[0],\r\n            val = _hash$split[1];\r\n\r\n        urlGetParams[key] = decodeURIComponent(val);\r\n      });\r\n      var filteredGetParams = {};\r\n\r\n      for (var _i = 0, _acceptableYouTubePar = acceptableYouTubeParams; _i < _acceptableYouTubePar.length; _i++) {\r\n        var param = _acceptableYouTubePar[_i];\r\n\r\n        if (urlGetParams.hasOwnProperty(param)) {\r\n          filteredGetParams[param] = urlGetParams[param];\r\n        }\r\n      }\r\n\r\n      if (data.autoplay === \"true\") {\r\n        filteredGetParams.autoplay = \"1\";\r\n        filteredGetParams.mute = \"1\";\r\n      } else {\r\n        delete filteredGetParams.autoplay;\r\n        delete filteredGetParams.mute;\r\n      }\r\n\r\n      var processedGetParams = [];\r\n\r\n      for (var _param in filteredGetParams) {\r\n        if (filteredGetParams.hasOwnProperty(_param)) {\r\n          processedGetParams.push(encodeURI(_param + \"=\" + filteredGetParams[_param]));\r\n        }\r\n      }\r\n\r\n      return processedGetParams.length > 0 ? \"?\" + processedGetParams.join(\"&\") : \"\";\r\n    }\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    var _proto = VideoSrc.prototype;\r\n\r\n    _proto.fromDom = function fromDom(value) {\r\n      value = value.replace(/\\?autoplay=1&mute=1/g, \"\");\r\n      value = value.replace(/&autoplay=1&mute=1/g, \"\");\r\n      value = value.replace(/\\?title=0&byline=0&portrait=0/g, \"\");\r\n      value = value.replace(/&autoplay=1&autopause=0&muted=1/g, \"\");\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value === undefined) {\r\n        return \"\";\r\n      }\r\n\r\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\r\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\r\n\r\n      if (youtubeRegExp.test(value)) {\r\n        return \"https://www.youtube.com/embed/\" + youtubeRegExp.exec(value)[1] + VideoSrc.parseYoutubeGetParams(value, data);\r\n      } else if (vimeoRegExp.test(value)) {\r\n        return \"https://player.vimeo.com/video/\" + vimeoRegExp.exec(value)[3] + \"?title=0&byline=0&portrait=0\" + (data.autoplay === \"true\" ? \"&autoplay=1&autopause=0&muted=1\" : \"\");\r\n      }\r\n\r\n      return value;\r\n    };\r\n\r\n    return VideoSrc;\r\n  }();\r\n\r\n  return VideoSrc;\r\n});\r\n//# sourceMappingURL=videosrc.js.map","Magento_PageBuilder/js/content-type-menu/conditional-remove-option.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type-menu/option\"], function (_option) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ConditionalRemoveOption = /*#__PURE__*/function (_option2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(ConditionalRemoveOption, _option2);\r\n\r\n    /**\r\n     * @param {OptionConfigInterface} config\r\n     */\r\n    function ConditionalRemoveOption(config) {\r\n      var _this;\r\n\r\n      _this = _option2.call(this, config) || this;\r\n      var parentContentType = _this.preview.contentType.parentContentType;\r\n\r\n      if (parentContentType.children().length < 2) {\r\n        _this.isDisabled(true);\r\n      }\r\n\r\n      parentContentType.children.subscribe(function (children) {\r\n        _this.isDisabled(children.length < 2);\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    return ConditionalRemoveOption;\r\n  }(_option);\r\n\r\n  return ConditionalRemoveOption;\r\n});\r\n//# sourceMappingURL=conditional-remove-option.js.map","Magento_PageBuilder/js/content-type-menu/edit.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/events\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\"], function (_events, _mageUtils, _underscore, _config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Edit = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {ContentTypeInterface} instance\r\n     * @param {DataStore} dataStore\r\n     */\r\n    function Edit(instance, dataStore) {\r\n      var _this = this;\r\n\r\n      this.instance = instance;\r\n      this.dataStore = dataStore;\r\n\r\n      _events.on(\"form:\" + this.instance.id + \":saveAfter\", function (data) {\r\n        var viewport = _config.getConfig(\"viewport\");\r\n\r\n        var defaultViewport = _config.getConfig(\"defaultViewport\"); // set value to dataStore from default viewport if it is empty\r\n\r\n\r\n        if (defaultViewport !== viewport) {\r\n          _underscore.each(_this.instance.getViewportFields(viewport, data), function (value, key) {\r\n            var isEmpty = !_underscore.find(_mageUtils.compare(data[key], _this.instance.dataStores[defaultViewport].get(key)).changes, function (change) {\r\n              return !_underscore.isEmpty(change.oldValue);\r\n            });\r\n\r\n            if (isEmpty) {\r\n              _this.instance.dataStores[viewport].set(key, data[key]);\r\n\r\n              data[key] = _this.instance.dataStores[defaultViewport].get(key);\r\n            }\r\n          });\r\n        }\r\n\r\n        _this.dataStore.setState(_this.filterData(data));\r\n      });\r\n    }\r\n    /**\r\n     * Open the modal\r\n     */\r\n\r\n\r\n    var _proto = Edit.prototype;\r\n\r\n    _proto.open = function open() {\r\n      var _this2 = this;\r\n\r\n      var contentTypeData = this.dataStore.getState();\r\n\r\n      var viewport = _config.getConfig(\"viewport\");\r\n\r\n      var defaultViewport = _config.getConfig(\"defaultViewport\"); // set empty value if it the same in default viewport\r\n\r\n\r\n      if (defaultViewport !== viewport) {\r\n        _underscore.each(this.instance.getViewportFields(viewport, contentTypeData), function (value, key) {\r\n          if (_mageUtils.compare(contentTypeData[key], _this2.instance.dataStores.desktop.get(key)).equal) {\r\n            contentTypeData[key] = undefined;\r\n          }\r\n        });\r\n      }\r\n\r\n      _events.trigger(\"contentType:editBefore\", {\r\n        contentType: this.instance\r\n      });\r\n\r\n      _events.trigger(\"form:renderAfter\", {\r\n        data: contentTypeData,\r\n        appearances: this.instance.config.appearances,\r\n        defaultNamespace: this.getDefaultNamespaceForm(),\r\n        id: this.instance.id,\r\n        namespace: this.getFormNamespace(contentTypeData),\r\n        title: this.instance.config.label\r\n      });\r\n    }\r\n    /**\r\n     * Flip flop to JSON and back again to ensure all data received from the form is serializable. Magento by default\r\n     * adds functions into some basic types which cannot be serialized when calling PostMessage.\r\n     *\r\n     * @param {DataObject} data\r\n     * @returns {DataObject}\r\n     */\r\n    ;\r\n\r\n    _proto.filterData = function filterData(data) {\r\n      return JSON.parse(JSON.stringify(data));\r\n    }\r\n    /**\r\n     * Determine the form namespace based on the currently set appearance\r\n     *\r\n     * @param {DataObject} contentTypeData\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getFormNamespace = function getFormNamespace(contentTypeData) {\r\n      var viewport = this.instance.preview.viewport();\r\n      var currentAppearance = this.dataStore.get(\"appearance\");\r\n      var appearance = this.instance.config.appearances[currentAppearance];\r\n      var breakpoints = appearance.breakpoints;\r\n      var formNamespace = this.getDefaultNamespaceForm(); // Use the default form unless a custom one is defined\r\n\r\n      if (breakpoints && breakpoints[viewport] && breakpoints[viewport].form) {\r\n        formNamespace = breakpoints[viewport].form;\r\n      } else if (!_underscore.isUndefined(appearance.form)) {\r\n        formNamespace = appearance.form;\r\n      }\r\n\r\n      return formNamespace;\r\n    }\r\n    /**\r\n     * Determine the form default namespace based on the currently set appearance and breakpoint\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getDefaultNamespaceForm = function getDefaultNamespaceForm() {\r\n      var viewport = this.instance.preview.viewport();\r\n      var breakpoints = this.instance.config.breakpoints;\r\n      var formNamespace = this.instance.config.form;\r\n\r\n      if (breakpoints && breakpoints[viewport] && breakpoints[viewport].form) {\r\n        formNamespace = breakpoints[viewport].form;\r\n      }\r\n\r\n      return formNamespace;\r\n    };\r\n\r\n    return Edit;\r\n  }();\r\n\r\n  return Edit;\r\n});\r\n//# sourceMappingURL=edit.js.map","Magento_PageBuilder/js/content-type-menu/hide-show-option.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"mage/translate\", \"Magento_PageBuilder/js/content-type-menu/option\"], function (_translate, _option) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var HideShowOption = /*#__PURE__*/function (_option2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(HideShowOption, _option2);\r\n\r\n    /**\r\n     * @param {OptionConfigInterface} options\r\n     */\r\n    function HideShowOption(options) {\r\n      var _this;\r\n\r\n      _this = _option2.call(this, options) || this; // Modify the icon when changes are made to display in the data store\r\n\r\n      _this.preview.contentType.dataStore.subscribe(_this.onDisplayChange.bind(_assertThisInitialized(_this)), \"display\");\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * On display change update the title and icon\r\n     *\r\n     * @param {DataObject} state\r\n     */\r\n\r\n\r\n    var _proto = HideShowOption.prototype;\r\n\r\n    _proto.onDisplayChange = function onDisplayChange(state) {\r\n      var display = !!state.display;\r\n\r\n      if (display) {\r\n        this.icon(HideShowOption.hideIcon);\r\n        this.title(HideShowOption.hideText);\r\n      } else {\r\n        this.icon(HideShowOption.showIcon);\r\n        this.title(HideShowOption.showText);\r\n      }\r\n    };\r\n\r\n    return HideShowOption;\r\n  }(_option);\r\n\r\n  HideShowOption.showText = (0, _translate)(\"Show\");\r\n  HideShowOption.showIcon = \"<i class='icon-pagebuilder-show'></i>\";\r\n  HideShowOption.hideText = (0, _translate)(\"Hide\");\r\n  HideShowOption.hideIcon = \"<i class='icon-pagebuilder-hide'></i>\";\r\n  return HideShowOption;\r\n});\r\n//# sourceMappingURL=hide-show-option.js.map","Magento_PageBuilder/js/content-type-menu/option.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\ndefine([\"knockout\"], function (_knockout) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Option = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {OptionConfigInterface} config\r\n     */\r\n    function Option(config) {\r\n      var _this = this;\r\n\r\n      this.icon = _knockout.observable(\"\");\r\n      this.title = _knockout.observable(\"\");\r\n      this.classes = _knockout.observable({});\r\n      this.isDisabled = _knockout.observable(false);\r\n      this.config = config;\r\n      this.preview = config.preview;\r\n      this.icon(config.icon);\r\n      this.title(config.title);\r\n      this.code = config.code;\r\n      this.sort = config.sort || 0;\r\n      this.customTemplate = config.template; // Generate an array of classes for KO to consume\r\n\r\n      var koClasses = {};\r\n\r\n      if (config.classes && config.classes.length > 0) {\r\n        config.classes.forEach(function (cssClass) {\r\n          koClasses[cssClass] = true;\r\n        });\r\n      } // Always add a disabled class which tracks whether this option is disabled\r\n\r\n\r\n      koClasses.disabled = this.isDisabled;\r\n      this.classes(koClasses); // If no action is supplied pass an empty function, this is called within the context of the preview\r\n\r\n      var action = config.action ? config.action : function () {\r\n        return;\r\n      };\r\n\r\n      this.action = function () {\r\n        if (!_this.isDisabled()) {\r\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n            args[_key] = arguments[_key];\r\n          }\r\n\r\n          action.apply(_this.preview, args);\r\n        }\r\n      };\r\n    }\r\n\r\n    _createClass(Option, [{\r\n      key: \"template\",\r\n      get: function get() {\r\n        return this.customTemplate || null;\r\n      }\r\n    }]);\r\n\r\n    return Option;\r\n  }();\r\n\r\n  return Option;\r\n});\r\n//# sourceMappingURL=option.js.map","Magento_PageBuilder/js/content-type-menu/title-option.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\ndefine([\"Magento_PageBuilder/js/content-type-menu/option\"], function (_option) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var TitleOption = /*#__PURE__*/function (_option2) {\r\n    \"use strict\";\r\n\r\n    _inheritsLoose(TitleOption, _option2);\r\n\r\n    /**\r\n     * @param {OptionConfigInterface} options\r\n     */\r\n    function TitleOption(options) {\r\n      var _this;\r\n\r\n      _this = _option2.call(this, options) || this; // Modify the icon when changes are made to display in the data store\r\n\r\n      _this.preview.displayLabel.subscribe(function (label) {\r\n        _this.title(label);\r\n      });\r\n\r\n      return _this;\r\n    }\r\n\r\n    return TitleOption;\r\n  }(_option);\r\n\r\n  return TitleOption;\r\n});\r\n//# sourceMappingURL=title-option.js.map","Magento_PageBuilder/js/converter/converter-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=converter-interface.js.map","Magento_PageBuilder/js/converter/converter-pool-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/converter/converter-pool\"], function (_config, _loader, _converterPool) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create a new instance of converter pool\r\n   */\r\n  function create(contentType) {\r\n    var config = _config.getContentTypeConfig(contentType);\r\n\r\n    var converters = [];\r\n    var appearanceName;\r\n\r\n    for (var _i = 0, _Object$keys = Object.keys(config.appearances); _i < _Object$keys.length; _i++) {\r\n      appearanceName = _Object$keys[_i];\r\n      var appearance = config.appearances[appearanceName];\r\n\r\n      if (appearance !== undefined && appearance.elements !== undefined) {\r\n        var elementName = void 0;\r\n\r\n        for (var _i2 = 0, _Object$keys2 = Object.keys(appearance.elements); _i2 < _Object$keys2.length; _i2++) {\r\n          elementName = _Object$keys2[_i2];\r\n\r\n          if (appearance.elements[elementName].style !== undefined) {\r\n            for (var _iterator = _createForOfIteratorHelperLoose(appearance.elements[elementName].style), _step; !(_step = _iterator()).done;) {\r\n              var propertyConfig = _step.value;\r\n\r\n              if (!!propertyConfig.converter && converters.indexOf(propertyConfig.converter) === -1 && !_converterPool.get(propertyConfig.converter)) {\r\n                converters.push(propertyConfig.converter);\r\n              }\r\n\r\n              if (!!propertyConfig.preview_converter && converters.indexOf(propertyConfig.preview_converter) === -1 && !_converterPool.get(propertyConfig.preview_converter)) {\r\n                converters.push(propertyConfig.preview_converter);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (appearance.elements[elementName].attributes !== undefined) {\r\n            for (var _iterator2 = _createForOfIteratorHelperLoose(appearance.elements[elementName].attributes), _step2; !(_step2 = _iterator2()).done;) {\r\n              var attributeConfig = _step2.value;\r\n\r\n              if (!!attributeConfig.converter && converters.indexOf(attributeConfig.converter) === -1 && !_converterPool.get(attributeConfig.converter)) {\r\n                converters.push(attributeConfig.converter);\r\n              }\r\n\r\n              if (!!attributeConfig.preview_converter && converters.indexOf(attributeConfig.preview_converter) === -1 && !_converterPool.get(attributeConfig.preview_converter)) {\r\n                converters.push(attributeConfig.preview_converter);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (appearance.elements[elementName].html !== undefined) {\r\n            var htmlConfig = appearance.elements[elementName].html;\r\n\r\n            if (!!htmlConfig.converter && converters.indexOf(htmlConfig.converter) === -1 && !_converterPool.get(htmlConfig.converter)) {\r\n              converters.push(htmlConfig.converter);\r\n            }\r\n\r\n            if (!!htmlConfig.preview_converter && converters.indexOf(htmlConfig.preview_converter) === -1 && !_converterPool.get(htmlConfig.preview_converter)) {\r\n              converters.push(htmlConfig.preview_converter);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      (0, _loader)(converters, function () {\r\n        for (var _len = arguments.length, loadedConverters = new Array(_len), _key = 0; _key < _len; _key++) {\r\n          loadedConverters[_key] = arguments[_key];\r\n        }\r\n\r\n        for (var i = 0; i < converters.length; i++) {\r\n          _converterPool.register(converters[i], new loadedConverters[i]());\r\n        }\r\n\r\n        resolve(_converterPool);\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=converter-pool-factory.js.map","Magento_PageBuilder/js/converter/converter-pool.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ConverterPool = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function ConverterPool() {\r\n      this.converters = {};\r\n    }\r\n\r\n    var _proto = ConverterPool.prototype;\r\n\r\n    /**\r\n     * Retrieve a converter from the pool\r\n     *\r\n     * @param {string} name\r\n     * @returns {ConverterInterface}\r\n     */\r\n    _proto.get = function get(name) {\r\n      return this.converters[name] !== undefined ? this.converters[name] : null;\r\n    }\r\n    /**\r\n     * Register a new converter into the pool\r\n     *\r\n     * @param {string} name\r\n     * @param {ConverterInterface} converter\r\n     */\r\n    ;\r\n\r\n    _proto.register = function register(name, converter) {\r\n      this.converters[name] = converter;\r\n    };\r\n\r\n    return ConverterPool;\r\n  }();\r\n\r\n  var _default = new ConverterPool();\r\n\r\n  return _default;\r\n});\r\n//# sourceMappingURL=converter-pool.js.map","Magento_PageBuilder/js/converter/attribute/link-href.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var CreateValueForHref = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function CreateValueForHref() {\r\n      this.widgetParamsByLinkType = {\r\n        category: {\r\n          type: \"Magento\\\\Catalog\\\\Block\\\\Category\\\\Widget\\\\Link\",\r\n          id_path: \"category/:href\",\r\n          template: \"Magento_PageBuilder::widget/link_href.phtml\",\r\n          type_name: \"Catalog Category Link\"\r\n        },\r\n        product: {\r\n          type: \"Magento\\\\Catalog\\\\Block\\\\Product\\\\Widget\\\\Link\",\r\n          id_path: \"product/:href\",\r\n          template: \"Magento_PageBuilder::widget/link_href.phtml\",\r\n          type_name: \"Catalog Product Link\"\r\n        },\r\n        page: {\r\n          type: \"Magento\\\\Cms\\\\Block\\\\Widget\\\\Page\\\\Link\",\r\n          page_id: \":href\",\r\n          template: \"Magento_PageBuilder::widget/link_href.phtml\",\r\n          type_name: \"CMS Page Link\"\r\n        }\r\n      };\r\n    }\r\n\r\n    var _proto = CreateValueForHref.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var link = (0, _object.get)(data, name);\r\n      var href = \"\";\r\n\r\n      if (!link) {\r\n        return href;\r\n      }\r\n\r\n      var linkType = link.type;\r\n      var isHrefId = !isNaN(parseInt(link[linkType], 10));\r\n\r\n      if (isHrefId && link) {\r\n        href = this.convertToWidget(link[linkType], linkType);\r\n      } else if (typeof link[linkType] === \"string\") {\r\n        href = link[linkType];\r\n      }\r\n\r\n      return href;\r\n    }\r\n    /**\r\n     * @param {string} href\r\n     * @param {string} linkType\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.convertToWidget = function convertToWidget(href, linkType) {\r\n      if (!href || !this.widgetParamsByLinkType[linkType]) {\r\n        return href;\r\n      }\r\n\r\n      var attributesString = _underscore.map(this.widgetParamsByLinkType[linkType], function (val, key) {\r\n        return key + \"='\" + val.replace(\":href\", href) + \"'\";\r\n      }).join(\" \");\r\n\r\n      return \"{{widget \" + attributesString + \" }}\";\r\n    };\r\n\r\n    return CreateValueForHref;\r\n  }();\r\n\r\n  return CreateValueForHref;\r\n});\r\n//# sourceMappingURL=link-href.js.map","Magento_PageBuilder/js/converter/attribute/link-target.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var CreateValueForTarget = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function CreateValueForTarget() {}\r\n\r\n    var _proto = CreateValueForTarget.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (!value) {\r\n        return \"\";\r\n      }\r\n\r\n      return value.setting ? \"_blank\" : \"\";\r\n    };\r\n\r\n    return CreateValueForTarget;\r\n  }();\r\n\r\n  return CreateValueForTarget;\r\n});\r\n//# sourceMappingURL=link-target.js.map","Magento_PageBuilder/js/converter/attribute/link-type.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var CreateValueForLinkType = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function CreateValueForLinkType() {}\r\n\r\n    var _proto = CreateValueForLinkType.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n      return value && value.type ? value.type : \"default\";\r\n    };\r\n\r\n    return CreateValueForLinkType;\r\n  }();\r\n\r\n  return CreateValueForLinkType;\r\n});\r\n//# sourceMappingURL=link-type.js.map","Magento_PageBuilder/js/converter/attribute/src.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/image\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/utils/url\"], function (_config, _image, _object, _url) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Src = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Src() {}\r\n\r\n    var _proto = Src.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (!value) {\r\n        return \"\";\r\n      }\r\n\r\n      return (0, _image.decodeUrl)(value);\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value[0] === undefined || value[0].url === undefined) {\r\n        return \"\";\r\n      }\r\n\r\n      var imageUrl = value[0].url;\r\n      var mediaUrl = (0, _url.convertUrlToPathIfOtherUrlIsOnlyAPath)(_config.getConfig(\"media_url\"), imageUrl);\r\n      var mediaPath = imageUrl.split(mediaUrl);\r\n      return \"{{media url=\" + mediaPath[1] + \"}}\";\r\n    };\r\n\r\n    return Src;\r\n  }();\r\n\r\n  return Src;\r\n});\r\n//# sourceMappingURL=src.js.map","Magento_PageBuilder/js/converter/attribute/video-overlay-color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var OverlayColor = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function OverlayColor() {}\r\n\r\n    var _proto = OverlayColor.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value === \"transparent\" ? \"\" : value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      if (data.video_overlay_color) {\r\n        return data.video_overlay_color.toString();\r\n      }\r\n\r\n      return \"\";\r\n    };\r\n\r\n    return OverlayColor;\r\n  }();\r\n\r\n  return OverlayColor;\r\n});\r\n//# sourceMappingURL=video-overlay-color.js.map","Magento_PageBuilder/js/converter/attribute/preview/src.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Src = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Src() {}\r\n\r\n    var _proto = Src.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && typeof value[0] === \"object\") {\r\n        return value[0].url;\r\n      }\r\n\r\n      return \"\";\r\n    };\r\n\r\n    return Src;\r\n  }();\r\n\r\n  return Src;\r\n});\r\n//# sourceMappingURL=src.js.map","Magento_PageBuilder/js/converter/attribute/preview/store-id.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\"], function (_jquery) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var StoreId = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function StoreId() {}\r\n\r\n    var _proto = StoreId.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      if (typeof data[name] !== \"string\") {\r\n        return \"\";\r\n      }\r\n\r\n      var storeId = (0, _jquery)('[data-role=\"store-view-id\"]').val() || \"0\";\r\n      return data[name].replace(/}}$/, \" store_id=\\\"\" + storeId + \"\\\"}}\");\r\n    };\r\n\r\n    return StoreId;\r\n  }();\r\n\r\n  return StoreId;\r\n});\r\n//# sourceMappingURL=store-id.js.map","Magento_PageBuilder/js/converter/html/decode.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/object\"], function (_directives, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Decode = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Decode() {}\r\n\r\n    var _proto = Decode.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {string} value\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      // Convert the encoded string back to HTML without executing\r\n      var html = new DOMParser().parseFromString(value, \"text/html\");\r\n      return html.body.textContent;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {Object} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return (0, _directives.removeQuotesInMediaDirectives)((0, _object.get)(data, name));\r\n    };\r\n\r\n    return Decode;\r\n  }();\r\n\r\n  return Decode;\r\n});\r\n//# sourceMappingURL=decode.js.map","Magento_PageBuilder/js/converter/html/directive.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/object\"], function (_directives, _editor, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Directives = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Directives() {}\r\n\r\n    var _proto = Directives.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {string} value\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {Object} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return (0, _editor.encodeContent)((0, _directives.convertMediaDirectivesToUrls)((0, _directives.removeQuotesInMediaDirectives)((0, _object.get)(data, name))));\r\n    };\r\n\r\n    return Directives;\r\n  }();\r\n\r\n  return Directives;\r\n});\r\n//# sourceMappingURL=directive.js.map","Magento_PageBuilder/js/converter/html/tag-escaper.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var TagEscaper = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function TagEscaper() {}\r\n\r\n    var _proto = TagEscaper.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {string} value\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      var result = (0, _underscore.unescape)(value); // Have to do a manual &nbsp; replace since underscore un-escape does not un-escape &nbsp;\r\n\r\n      return result.replace(/&nbsp;/g, String.fromCharCode(160));\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {Object} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return (0, _underscore.escape)((0, _object.get)(data, name));\r\n    };\r\n\r\n    return TagEscaper;\r\n  }();\r\n\r\n  return TagEscaper;\r\n});\r\n//# sourceMappingURL=tag-escaper.js.map","Magento_PageBuilder/js/converter/style/background-image.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var BackgroundImage = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function BackgroundImage() {}\r\n\r\n    var _proto = BackgroundImage.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return null;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return null;\r\n    };\r\n\r\n    return BackgroundImage;\r\n  }();\r\n\r\n  return BackgroundImage;\r\n});\r\n//# sourceMappingURL=background-image.js.map","Magento_PageBuilder/js/converter/style/border-style.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var BorderStyleDefault = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function BorderStyleDefault() {}\r\n\r\n    var _proto = BorderStyleDefault.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (!value) {\r\n        return \"_default\";\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && value !== \"_default\") {\r\n        return value;\r\n      }\r\n    };\r\n\r\n    return BorderStyleDefault;\r\n  }();\r\n\r\n  return BorderStyleDefault;\r\n});\r\n//# sourceMappingURL=border-style.js.map","Magento_PageBuilder/js/converter/style/border-width.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var BorderWidth = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function BorderWidth() {}\r\n\r\n    var _proto = BorderWidth.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value === \"initial\" ? \"\" : value.replace(\"px\", \"\");\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value) {\r\n        return value + \"px\";\r\n      }\r\n    };\r\n\r\n    return BorderWidth;\r\n  }();\r\n\r\n  return BorderWidth;\r\n});\r\n//# sourceMappingURL=border-width.js.map","Magento_PageBuilder/js/converter/style/color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Color = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Color() {}\r\n\r\n    var _proto = Color.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (value === \"default\" || value === \"initial\" || value === \"\") {\r\n        value = \"\";\r\n      } else {\r\n        var regexp = /(\\d{0,3}),\\s(\\d{0,3}),\\s(\\d{0,3})/;\r\n        var matches = regexp.exec(value);\r\n\r\n        if (matches) {\r\n          value = \"#\" + this.fromIntToHex(parseInt(matches[1], 10)) + this.fromIntToHex(parseInt(matches[2], 10)) + this.fromIntToHex(parseInt(matches[3], 10));\r\n        }\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return (0, _object.get)(data, name, \"\");\r\n    }\r\n    /**\r\n     * Convert from int to hex\r\n     *\r\n     * @param {number} value\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.fromIntToHex = function fromIntToHex(value) {\r\n      var hex = value.toString(16);\r\n      return hex.length === 1 ? \"0\" + hex : hex;\r\n    };\r\n\r\n    return Color;\r\n  }();\r\n\r\n  return Color;\r\n});\r\n//# sourceMappingURL=color.js.map","Magento_PageBuilder/js/converter/style/display.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Display = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Display() {}\r\n\r\n    var _proto = Display.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return !(value === \"none\");\r\n    }\r\n    /**\r\n     * Convert value to knockout format, we only provide a none property if we intend for the content type to be hidden,\r\n     * otherwise we let the original display property handle the display of the content type.\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (!_underscore.isUndefined(value) && value === false) {\r\n        return \"none\";\r\n      }\r\n\r\n      return;\r\n    };\r\n\r\n    return Display;\r\n  }();\r\n\r\n  return Display;\r\n});\r\n//# sourceMappingURL=display.js.map","Magento_PageBuilder/js/converter/style/margins.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Margins = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Margins() {}\r\n\r\n    var _proto = Margins.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (undefined !== value.margin) {\r\n        return {\r\n          margin: {\r\n            top: value.margin.top.replace(\"px\", \"\"),\r\n            left: value.margin.left.replace(\"px\", \"\"),\r\n            right: value.margin.right.replace(\"px\", \"\"),\r\n            bottom: value.margin.bottom.replace(\"px\", \"\")\r\n          }\r\n        };\r\n      }\r\n\r\n      return {};\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.margin) {\r\n        result.marginLeft = value.margin.left ? value.margin.left + \"px\" : \"\";\r\n        result.marginTop = value.margin.top ? value.margin.top + \"px\" : \"\";\r\n        result.marginRight = value.margin.right ? value.margin.right + \"px\" : \"\";\r\n        result.marginBottom = value.margin.bottom ? value.margin.bottom + \"px\" : \"\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Margins;\r\n  }();\r\n\r\n  return Margins;\r\n});\r\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/converter/style/min-height.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var MinHeight = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function MinHeight() {}\r\n\r\n    var _proto = MinHeight.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value.indexOf(\"calc\") !== -1 ? value.substring(5, value.length - 1) : value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n      return value.split(/\\+|\\-|\\*|\\//).length > 1 ? \"calc(\" + (0, _object.get)(data, name) + \")\" : value;\r\n    };\r\n\r\n    return MinHeight;\r\n  }();\r\n\r\n  return MinHeight;\r\n});\r\n//# sourceMappingURL=min-height.js.map","Magento_PageBuilder/js/converter/style/overlay-border-radius.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Takes difference of border width from border radius to conform snugly to edges of wrapper border\r\n   *\r\n   * @api\r\n   */\r\n  var OverlayBorderRadius = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function OverlayBorderRadius() {}\r\n\r\n    var _proto = OverlayBorderRadius.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var borderRadius = data.border_radius ? parseInt(data.border_radius, 10) : 0;\r\n      var borderWidth = data.border_width ? parseInt(data.border_width, 10) : 0;\r\n\r\n      if (borderRadius <= borderWidth) {\r\n        return \"0\";\r\n      }\r\n\r\n      return borderRadius - borderWidth + \"px\";\r\n    };\r\n\r\n    return OverlayBorderRadius;\r\n  }();\r\n\r\n  return OverlayBorderRadius;\r\n});\r\n//# sourceMappingURL=overlay-border-radius.js.map","Magento_PageBuilder/js/converter/style/paddings.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Paddings = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Paddings() {}\r\n\r\n    var _proto = Paddings.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (undefined !== value.padding) {\r\n        return {\r\n          padding: {\r\n            top: value.padding.top.replace(\"px\", \"\"),\r\n            left: value.padding.left.replace(\"px\", \"\"),\r\n            right: value.padding.right.replace(\"px\", \"\"),\r\n            bottom: value.padding.bottom.replace(\"px\", \"\")\r\n          }\r\n        };\r\n      }\r\n\r\n      return {};\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {string} name\r\n     * @param {DataObject} data\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var result = {};\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && _underscore.isString(value)) {\r\n        value = JSON.parse(value);\r\n      }\r\n\r\n      if (value && undefined !== value.padding) {\r\n        result.paddingLeft = value.padding.left ? value.padding.left + \"px\" : \"\";\r\n        result.paddingTop = value.padding.top ? value.padding.top + \"px\" : \"\";\r\n        result.paddingRight = value.padding.right ? value.padding.right + \"px\" : \"\";\r\n        result.paddingBottom = value.padding.bottom ? value.padding.bottom + \"px\" : \"\";\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return Paddings;\r\n  }();\r\n\r\n  return Paddings;\r\n});\r\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/converter/style/remove-px.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var RemovePx = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function RemovePx() {}\r\n\r\n    var _proto = RemovePx.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value.replace(\"px\", \"\");\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value) {\r\n        return value + \"px\";\r\n      }\r\n    };\r\n\r\n    return RemovePx;\r\n  }();\r\n\r\n  return RemovePx;\r\n});\r\n//# sourceMappingURL=remove-px.js.map","Magento_PageBuilder/js/converter/style/video-overlay-color.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var VideoOverlayColor = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function VideoOverlayColor() {}\r\n\r\n    var _proto = VideoOverlayColor.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value !== \"\" && value !== undefined) {\r\n        return value;\r\n      }\r\n\r\n      return \"transparent\";\r\n    };\r\n\r\n    return VideoOverlayColor;\r\n  }();\r\n\r\n  return VideoOverlayColor;\r\n});\r\n//# sourceMappingURL=video-overlay-color.js.map","Magento_PageBuilder/js/converter/style/width.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Subtract margin from width to ensure adjacent elements do not\r\n   * move or resize when positive or negative margins are present\r\n   *\r\n   * @api\r\n   */\r\n  var Width = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Width() {}\r\n\r\n    var _proto = Width.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      if (value.indexOf(\"calc\") !== -1) {\r\n        return value.split(\"%\")[0].split(\"(\")[1] + \"%\";\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string | object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      if (data[name] && data[name] !== \"\") {\r\n        var marginsAndPadding = data.margins_and_padding || {};\r\n        var margins = marginsAndPadding.margin || \"\";\r\n        var marginLeft = margins.left ? parseInt(margins.left, 10) : 0;\r\n        var marginRight = margins.right ? parseInt(margins.right, 10) : 0;\r\n\r\n        if (marginLeft === 0 && marginRight === 0) {\r\n          return data[name].toString();\r\n        }\r\n\r\n        return \"calc(\" + data[name].toString() + \" - \" + (marginLeft + marginRight) + \"px)\";\r\n      }\r\n    };\r\n\r\n    return Width;\r\n  }();\r\n\r\n  return Width;\r\n});\r\n//# sourceMappingURL=width.js.map","Magento_PageBuilder/js/converter/style/preview/background-image.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var BackgroundImage = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function BackgroundImage() {}\r\n\r\n    var _proto = BackgroundImage.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return value;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      var value = (0, _object.get)(data, name);\r\n\r\n      if (value && typeof value[0] === \"object\") {\r\n        return \"url(\" + value[0].url + \")\";\r\n      }\r\n\r\n      return \"\";\r\n    };\r\n\r\n    return BackgroundImage;\r\n  }();\r\n\r\n  return BackgroundImage;\r\n});\r\n//# sourceMappingURL=background-image.js.map","Magento_PageBuilder/js/converter/style/preview/display.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Display = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Display() {}\r\n\r\n    var _proto = Display.prototype;\r\n\r\n    /**\r\n     * Ensure the display none property doesn't persist to the preview\r\n     *\r\n     * @param value string\r\n     * @returns {string | object}\r\n     */\r\n    _proto.fromDom = function fromDom(value) {\r\n      return;\r\n    }\r\n    /**\r\n     * Ensure the display none property doesn't persist to the preview\r\n     *\r\n     * @param name string\r\n     * @param data Object\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(name, data) {\r\n      return;\r\n    };\r\n\r\n    return Display;\r\n  }();\r\n\r\n  return Display;\r\n});\r\n//# sourceMappingURL=display.js.map","Magento_PageBuilder/js/drag-drop/drop-indicators.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/create-stylesheet\", \"Magento_PageBuilder/js/drag-drop/matrix\"], function (_createStylesheet, _matrix) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var headDropIndicatorStyles;\r\n  /**\r\n   * Show the drop indicators for a specific content type\r\n   *\r\n   * We do this by creating a style sheet and injecting it into the head. It's dramatically quicker to allow the browsers\r\n   * CSS engine to display these for us than manually iterating through the DOM and applying a class to the elements.\r\n   *\r\n   * @param {string} contentType\r\n   * @param {string} stageId\r\n   * @returns {HTMLStyleElement}\r\n   */\r\n\r\n  function showDropIndicators(contentType, stageId) {\r\n    var acceptedContainers = (0, _matrix.getContainersFor)(contentType);\r\n\r\n    if (acceptedContainers.length > 0) {\r\n      var _ref;\r\n\r\n      var classNames = acceptedContainers.map(function (container) {\r\n        return \"#\" + stageId + \" .content-type-container.\" + container + \"-container > .pagebuilder-drop-indicator, \" + (\"#\" + stageId + \" .pagebuilder-content-type.type-container.empty-container > .content-type-container.\") + (container + \"-container:before\");\r\n      });\r\n      var styles = (0, _createStylesheet.createStyleSheet)((_ref = {}, _ref[classNames.join(\", \")] = {\r\n        opacity: 1,\r\n        visibility: \"visible\"\r\n      }, _ref));\r\n      document.head.appendChild(styles);\r\n      headDropIndicatorStyles = styles;\r\n      return styles;\r\n    }\r\n  }\r\n  /**\r\n   * Hide the drop indicators\r\n   */\r\n\r\n\r\n  function hideDropIndicators() {\r\n    if (headDropIndicatorStyles) {\r\n      headDropIndicatorStyles.remove();\r\n      headDropIndicatorStyles = null;\r\n    }\r\n  }\r\n\r\n  return {\r\n    showDropIndicators: showDropIndicators,\r\n    hideDropIndicators: hideDropIndicators\r\n  };\r\n});\r\n//# sourceMappingURL=drop-indicators.js.map","Magento_PageBuilder/js/drag-drop/matrix.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/config\"], function (_underscore, _config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var allowedParents = {};\r\n  /**\r\n   * Build a matrix of which containers each content type can go into, these are determined by the allowed_parents\r\n   * node within the content types configuration\r\n   */\r\n\r\n  function generateAllowedParents() {\r\n    _underscore.values(_config.getConfig(\"content_types\")).forEach(function (contentType) {\r\n      allowedParents[contentType.name] = contentType.allowed_parents.slice();\r\n    });\r\n  }\r\n  /**\r\n   * Retrieve the containers a specific content type can be contained in\r\n   *\r\n   * @param {string} contentType\r\n   * @returns {any}\r\n   */\r\n\r\n\r\n  function getContainersFor(contentType) {\r\n    if (allowedParents[contentType]) {\r\n      return allowedParents[contentType];\r\n    }\r\n\r\n    return [];\r\n  }\r\n  /**\r\n   * Generate classes of containers the content type is allowed within\r\n   *\r\n   * @param {string} contentType\r\n   * @param {string} stageId\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function getAllowedContainersClasses(contentType, stageId) {\r\n    return getContainersFor(contentType).map(function (value) {\r\n      return \"#\" + stageId + \" .content-type-container.\" + value + \"-container\";\r\n    }).join(\", \");\r\n  }\r\n  /**\r\n   * @api\r\n   */\r\n\r\n\r\n  return {\r\n    generateAllowedParents: generateAllowedParents,\r\n    getContainersFor: getContainersFor,\r\n    getAllowedContainersClasses: getAllowedContainersClasses\r\n  };\r\n});\r\n//# sourceMappingURL=matrix.js.map","Magento_PageBuilder/js/drag-drop/move-content-type.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\", \"Magento_PageBuilder/js/events\"], function (_knockout, _events) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Move a content type to a new index, with the option to move to a new container\r\n   *\r\n   * @param {ContentTypeInterface | ContentTypeCollectionInterface} contentType\r\n   * @param {number} targetIndex\r\n   * @param {ContentTypeCollectionInterface} targetParent\r\n   */\r\n  function moveContentType(contentType, targetIndex, targetParent) {\r\n    if (targetParent === void 0) {\r\n      targetParent = null;\r\n    }\r\n\r\n    var sourceParent = contentType.parentContentType;\r\n    var sourceIndex = contentType.parentContentType.children().indexOf(contentType);\r\n    var sourceParentChildren = sourceParent.getChildren(); // Trigger our block move event\r\n\r\n    _events.trigger(\"contentType:moveBefore\", {\r\n      contentType: contentType,\r\n      sourceParent: sourceParent,\r\n      targetParent: targetParent,\r\n      targetIndex: targetIndex,\r\n      stageId: contentType.stageId\r\n    });\r\n\r\n    _events.trigger(contentType.config.name + \":moveBefore\", {\r\n      contentType: contentType,\r\n      sourceParent: sourceParent,\r\n      targetParent: targetParent,\r\n      targetIndex: targetIndex,\r\n      stageId: contentType.stageId\r\n    });\r\n\r\n    if (targetParent && sourceParent !== targetParent) {\r\n      contentType.parentContentType = targetParent; // Handle dragging between sortable elements\r\n\r\n      sourceParentChildren.splice(sourceIndex, 1);\r\n      targetParent.getChildren().splice(targetIndex, 0, contentType);\r\n    } else {\r\n      // Retrieve the children from the source parent\r\n      var children = _knockout.utils.unwrapObservable(sourceParentChildren); // Inform KO that this value is about to mutate\r\n\r\n\r\n      if (sourceParentChildren.valueWillMutate) {\r\n        sourceParentChildren.valueWillMutate();\r\n      } // Perform the mutation\r\n\r\n\r\n      children.splice(sourceIndex, 1);\r\n      children.splice(targetIndex, 0, contentType); // Inform KO that the mutation is complete\r\n\r\n      if (sourceParentChildren.valueHasMutated) {\r\n        sourceParentChildren.valueHasMutated();\r\n      }\r\n    } // Process any deferred bindings\r\n\r\n\r\n    if (_knockout.processAllDeferredBindingUpdates) {\r\n      _knockout.processAllDeferredBindingUpdates();\r\n    } // Trigger our content type move event\r\n\r\n\r\n    _events.trigger(\"contentType:moveAfter\", {\r\n      contentType: contentType,\r\n      sourceParent: sourceParent,\r\n      targetParent: targetParent,\r\n      targetIndex: targetIndex,\r\n      stageId: contentType.stageId\r\n    });\r\n\r\n    _events.trigger(contentType.config.name + \":moveAfter\", {\r\n      contentType: contentType,\r\n      sourceParent: sourceParent,\r\n      targetParent: targetParent,\r\n      targetIndex: targetIndex,\r\n      stageId: contentType.stageId\r\n    });\r\n  }\r\n\r\n  return {\r\n    moveContentType: moveContentType\r\n  };\r\n});\r\n//# sourceMappingURL=move-content-type.js.map","Magento_PageBuilder/js/drag-drop/registry.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var draggedContentTypeConfig;\r\n  /**\r\n   * Set the current dragged blocks config into the registry\r\n   *\r\n   * @param {ContentTypeConfigInterface} config\r\n   */\r\n\r\n  function setDraggedContentTypeConfig(config) {\r\n    draggedContentTypeConfig = config;\r\n  }\r\n  /**\r\n   * Retrieve the dragged blocks config\r\n   *\r\n   * @returns {ContentTypeConfigInterface}\r\n   */\r\n\r\n\r\n  function getDraggedContentTypeConfig() {\r\n    return draggedContentTypeConfig;\r\n  }\r\n\r\n  return {\r\n    setDraggedContentTypeConfig: setDraggedContentTypeConfig,\r\n    getDraggedContentTypeConfig: getDraggedContentTypeConfig\r\n  };\r\n});\r\n//# sourceMappingURL=registry.js.map","Magento_PageBuilder/js/drag-drop/sortable.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/drag-drop/drop-indicators\", \"Magento_PageBuilder/js/drag-drop/matrix\", \"Magento_PageBuilder/js/drag-drop/move-content-type\", \"Magento_PageBuilder/js/drag-drop/registry\"], function (_jquery, _knockout, _events, _contentTypeFactory, _dropIndicators, _matrix, _moveContentType, _registry) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * The class used when hiding a content type\r\n   * @type {string}\r\n   */\r\n  var hiddenClass = \".pagebuilder-content-type-hidden\";\r\n  /**\r\n   * Return the sortable options for an instance which requires sorting / dropping functionality\r\n   *\r\n   * @param {Preview} preview\r\n   * @returns {JQueryUI.SortableOptions | any}\r\n   */\r\n\r\n  function getSortableOptions(preview) {\r\n    return {\r\n      cursor: \"-webkit-grabbing\",\r\n      tolerance: \"pointer\",\r\n      helper: function helper(event, item) {\r\n        var helper = (0, _jquery)(item).clone();\r\n        helper.css({\r\n          pointerEvents: \"none\"\r\n        });\r\n        return helper[0];\r\n      },\r\n      appendTo: document.body,\r\n      placeholder: {\r\n        element: function element() {\r\n          return (0, _jquery)(\"<div />\").addClass(\"pagebuilder-sortable-placeholder\")[0];\r\n        },\r\n        update: function update() {\r\n          return;\r\n        }\r\n      },\r\n      handle: \".move-structural\",\r\n      items: \"> .pagebuilder-content-type-wrapper\",\r\n      start: function start() {\r\n        onSortStart.apply(this, [preview].concat(Array.prototype.slice.call(arguments)));\r\n      },\r\n      sort: function sort() {\r\n        onSort.apply(this, [preview].concat(Array.prototype.slice.call(arguments)));\r\n      },\r\n      receive: function receive() {\r\n        onSortReceive.apply(this, [preview].concat(Array.prototype.slice.call(arguments)));\r\n      },\r\n      update: function update() {\r\n        onSortUpdate.apply(this, [preview].concat(Array.prototype.slice.call(arguments)));\r\n      },\r\n      stop: function stop() {\r\n        onSortStop.apply(this, [preview].concat(Array.prototype.slice.call(arguments)));\r\n      }\r\n    };\r\n  }\r\n  /**\r\n   * Get the stage ID from the preview\r\n   *\r\n   * @param {Preview | Stage} preview\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function getPreviewStageIdProxy(preview) {\r\n    return preview.contentType.stageId;\r\n  }\r\n  /**\r\n   * Retrieve the contentType from the preview\r\n   *\r\n   * @param {Preview | Stage} instance\r\n   * @returns {any}\r\n   */\r\n\r\n\r\n  function getcontentTypeProxy(instance) {\r\n    return instance.contentType;\r\n  }\r\n\r\n  var sortedContentType;\r\n  /**\r\n   * On sort start record the item being sorted\r\n   *\r\n   * @param {Preview} preview\r\n   * @param {Event} event\r\n   * @param {JQueryUI.SortableUIParams} ui\r\n   */\r\n\r\n  function onSortStart(preview, event, ui) {\r\n    // Verify we're sorting an already created item\r\n    if (ui.item.hasClass(\"pagebuilder-content-type-wrapper\")) {\r\n      _events.trigger(\"stage:interactionStart\");\r\n\r\n      var contentTypeInstance = _knockout.dataFor(ui.item[0]);\r\n\r\n      if (contentTypeInstance) {\r\n        // Ensure the original item is displayed but with reduced opacity\r\n        ui.item.css(\"display\", \"block\").addClass(\"pagebuilder-sorting-original\");\r\n        (0, _jquery)(\".pagebuilder-drop-indicator.hidden-drop-indicator\").css(\"display\", \"block\").removeClass(\"hidden-drop-indicator\"); // If we're the first item in the container we need to hide the first drop indicator\r\n\r\n        if (contentTypeInstance.parentContentType.getChildren().indexOf(contentTypeInstance) === 0) {\r\n          ui.item.prev(\".pagebuilder-drop-indicator\").css(\"display\", \"none\").addClass(\"hidden-drop-indicator\");\r\n        }\r\n\r\n        (0, _dropIndicators.showDropIndicators)(contentTypeInstance.config.name, preview.contentType.stageId);\r\n        sortedContentType = contentTypeInstance; // Dynamically change the connect with option to restrict content types\r\n\r\n        (0, _jquery)(this).sortable(\"option\", \"connectWith\", (0, _matrix.getAllowedContainersClasses)(contentTypeInstance.config.name, preview.contentType.stageId));\r\n        (0, _jquery)(this).sortable(\"refresh\");\r\n      }\r\n    }\r\n  }\r\n\r\n  var placeholderContainer;\r\n  /**\r\n   * On a sort action hide the placeholder if disabled\r\n   *\r\n   * @param {Preview} preview\r\n   * @param {Event} event\r\n   * @param {JQueryUI.SortableUIParams} ui\r\n   */\r\n\r\n  function onSort(preview, event, ui) {\r\n    if ((0, _jquery)(this).sortable(\"option\", \"disabled\") || ui.placeholder.parents(hiddenClass).length > 0) {\r\n      ui.placeholder.css(\"display\", \"none\");\r\n    } else {\r\n      ui.placeholder.css(\"display\", \"block\");\r\n    }\r\n    /**\r\n     * We record the position of the placeholder on sort so we can ensure we place the content type in the correct place\r\n     * as jQuery UI's events aren't reliable.\r\n     */\r\n\r\n\r\n    placeholderContainer = ui.placeholder.parents(\".content-type-container\")[0];\r\n  }\r\n  /**\r\n   * On sort stop hide any indicators\r\n   */\r\n\r\n\r\n  function onSortStop(preview, event, ui) {\r\n    ui.item.removeClass(\"pagebuilder-sorting-original\");\r\n    (0, _dropIndicators.hideDropIndicators)();\r\n    (0, _registry.setDraggedContentTypeConfig)(null); // Only trigger stop if we triggered start\r\n\r\n    if (ui.item.hasClass(\"pagebuilder-content-type-wrapper\")) {\r\n      _events.trigger(\"stage:interactionStop\");\r\n    }\r\n\r\n    if (ui.item && !sortedContentType) {\r\n      ui.item.remove();\r\n    }\r\n\r\n    sortedContentType = null;\r\n  }\r\n  /**\r\n   * Handle receiving a content type from the left panel\r\n   *\r\n   * @param {Preview} preview\r\n   * @param {Event} event\r\n   * @param {JQueryUI.SortableUIParams} ui\r\n   */\r\n\r\n\r\n  function onSortReceive(preview, event, ui) {\r\n    var contentTypeConfig = (0, _registry.getDraggedContentTypeConfig)();\r\n    (0, _registry.setDraggedContentTypeConfig)(null);\r\n\r\n    if ((0, _jquery)(event.target)[0] !== this) {\r\n      return;\r\n    } // If the container content type can't receive drops we need to cancel the operation\r\n\r\n\r\n    if (!preview.isContainer()) {\r\n      (0, _jquery)(this).sortable(\"cancel\");\r\n      return;\r\n    }\r\n\r\n    if (contentTypeConfig) {\r\n      // If the sortable instance is disabled don't complete this operation\r\n      if ((0, _jquery)(this).sortable(\"option\", \"disabled\") || (0, _jquery)(this).parents(hiddenClass).length > 0) {\r\n        return;\r\n      } // jQuery's index method doesn't work correctly here, so use Array.findIndex instead\r\n\r\n\r\n      var index = (0, _jquery)(event.target).children(\".pagebuilder-content-type-wrapper, .pagebuilder-draggable-content-type\").toArray().findIndex(function (element) {\r\n        return element.classList.contains(\"pagebuilder-draggable-content-type\");\r\n      }); // Create the new content type and insert it into the parent\r\n\r\n      (0, _contentTypeFactory)(contentTypeConfig, getcontentTypeProxy(preview), getPreviewStageIdProxy(preview)).then(function (contentType) {\r\n        // Set the content type instance as \"dropped\", as it was dropped from the left panel\r\n        contentType.dropped = true;\r\n        getcontentTypeProxy(preview).addChild(contentType, index);\r\n\r\n        _events.trigger(\"contentType:dropAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n\r\n        _events.trigger(contentTypeConfig.name + \":dropAfter\", {\r\n          id: contentType.id,\r\n          contentType: contentType\r\n        });\r\n\r\n        return contentType;\r\n      }); // Remove the DOM element, as this is a drop event we can't just remove the ui.item\r\n\r\n      (0, _jquery)(event.target).find(\".pagebuilder-draggable-content-type\").remove();\r\n    }\r\n  }\r\n  /**\r\n   * On sort update handle sorting the underlying children knockout list\r\n   *\r\n   * @param {Preview} preview\r\n   * @param {Event} event\r\n   * @param {JQueryUI.SortableUIParams} ui\r\n   */\r\n\r\n\r\n  function onSortUpdate(preview, event, ui) {\r\n    // If the sortable instance is disabled don't complete this operation\r\n    if ((0, _jquery)(this).hasClass(\"ui-sortable\") && (0, _jquery)(this).sortable(\"option\", \"disabled\") || ui.item.parents(hiddenClass).length > 0) {\r\n      ui.item.remove();\r\n      (0, _jquery)(this).sortable(\"cancel\"); // jQuery tries to reset the state but kills KO's bindings, so we'll force a re-render on the content type\r\n\r\n      if (ui.item.length > 0 && typeof _knockout.dataFor(ui.item[0]) !== \"undefined\") {\r\n        var data = _knockout.dataFor(ui.item[0]);\r\n\r\n        var contentType = data.contentType && data.contentType.getChildren ? data.contentType : data.parentContentType;\r\n        var children = contentType.getChildren()().splice(0);\r\n        contentType.getChildren()([]);\r\n        contentType.getChildren()(children);\r\n      }\r\n\r\n      return;\r\n    }\r\n    /**\r\n     * Validate the event is coming from the exact instance or a child instance, we validate on the child instance\r\n     * as the event is sometimes annoyingly caught by the parent rather than the child it's dropped into. Combining this\r\n     * with placeholderContainer logic we can ensure we always do the right operation.\r\n     */\r\n\r\n\r\n    if (sortedContentType && (this === ui.item.parent()[0] || placeholderContainer && (0, _jquery)(this).find(ui.item.parent()).length > 0)) {\r\n      var el = ui.item[0];\r\n\r\n      var contentTypeInstance = _knockout.dataFor(el);\r\n\r\n      var target = _knockout.dataFor(placeholderContainer);\r\n\r\n      if (target && contentTypeInstance) {\r\n        // Calculate the source and target index\r\n        var sourceParent = contentTypeInstance.parentContentType;\r\n        var targetParent = getcontentTypeProxy(target);\r\n        var targetIndex = (0, _jquery)(placeholderContainer).children(\".pagebuilder-content-type-wrapper, .pagebuilder-draggable-content-type\").toArray().findIndex(function (element) {\r\n          return element === el;\r\n        });\r\n\r\n        if (sourceParent) {\r\n          (0, _jquery)(sourceParent === targetParent ? this : ui.sender || this).sortable(\"cancel\");\r\n        } else {\r\n          (0, _jquery)(el).remove();\r\n        }\r\n\r\n        (0, _moveContentType.moveContentType)(contentTypeInstance, targetIndex, targetParent);\r\n\r\n        if (contentTypeInstance.parentContentType !== targetParent) {\r\n          ui.item.remove();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    getSortableOptions: getSortableOptions,\r\n    hiddenClass: hiddenClass\r\n  };\r\n});\r\n//# sourceMappingURL=sortable.js.map","Magento_PageBuilder/js/form/form-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'consoleLogger'\r\n], function (_, $, events, consoleLogger) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n        defaults: {\r\n            pageBuilderInstances: []\r\n        },\r\n\r\n        /**\r\n         * Record instances of Page Builder initialized in the forms namespace\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            events.on('pagebuilder:register', function (data) {\r\n                if (data.ns === self.ns) {\r\n                    self.pageBuilderInstances.push(data.instance);\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Intercept save call to ensure any Page Builder rendering is completed before submitting form\r\n         *\r\n         * @param {String} redirect\r\n         * @param {Object} data\r\n         */\r\n        save: function (redirect, data) {\r\n            var submit = this._super.bind(this, redirect, data),\r\n                timeout,\r\n                locks;\r\n\r\n            if (_.isEmpty(this.pageBuilderInstances)) {\r\n                submit();\r\n            } else {\r\n                timeout = setTimeout(function () {\r\n                    consoleLogger.error('Page Builder was rendering for 5 seconds without releasing locks.');\r\n                }, 5000);\r\n\r\n                $('body').trigger('processStart');\r\n\r\n                // Wait for all rendering locks within Page Builder stages to resolve\r\n                $.when.apply(\r\n                    null,\r\n                    this.pageBuilderInstances.map(function (instance) {\r\n                        locks = instance.stage.renderingLocks;\r\n\r\n                        return locks[locks.length - 1];\r\n                    })\r\n                ).then(function () {\r\n                    $('body').trigger('processStop');\r\n                    clearTimeout(timeout);\r\n                    submit();\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    return function (target) {\r\n        return target.extend(mixin);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/form/map-location-provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/provider',\r\n    'Magento_PageBuilder/js/events'\r\n], function (Provider, events) {\r\n    'use strict';\r\n\r\n    return Provider.extend({\r\n        /** @inheritdoc **/\r\n        initClient: function () {\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc **/\r\n        save: function () {\r\n            events.trigger('mapLocation:saveAfter', this.get('data'));\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/provider',\r\n    'Magento_PageBuilder/js/events'\r\n], function (Provider, events) {\r\n    'use strict';\r\n\r\n    return Provider.extend({\r\n        /** @inheritdoc **/\r\n        initClient: function () {\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc **/\r\n        save: function () {\r\n            events.trigger('form:' + this.id + ':saveAfter', this.get('data'));\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/components/action-button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/button'\r\n], function (Button) {\r\n    'use strict';\r\n\r\n    return Button.extend({\r\n        defaults: {\r\n            modules: {\r\n                parent: '${ $.parentName }',\r\n                insertForm: '${ $.insertFormProvider }',\r\n                modal: '${ $.modalProvider }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Edit form with data assigning.\r\n         */\r\n        edit: function () {\r\n            this.modal().openModal();\r\n            this.insertForm().edit(this.parent().data());\r\n        },\r\n\r\n        /**\r\n         * Delete record from dynamic row.\r\n         */\r\n        deleteRecord: function () {\r\n            var record = this.parent(),\r\n                dynamicRow = record.parentComponent(),\r\n                prop = dynamicRow.identificationProperty,\r\n                id = record.data()[prop];\r\n\r\n            dynamicRow.deleteRecord(record.index, id);\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/components/insert-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/insert-form',\r\n    'Magento_PageBuilder/js/events',\r\n    'jquery'\r\n], function (Insert, events, $) {\r\n    'use strict';\r\n\r\n    return Insert.extend({\r\n        defaults: {\r\n            appearanceIndex: '',\r\n            configs: {},\r\n            tracks: {\r\n                id: true\r\n            },\r\n            listens: {\r\n                appearance: 'onAppearanceChange'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            events.on('form:renderAfter', function (params) {\r\n                this.render(params);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        render: function (params) {\r\n            this.availableAppearances = params.appearances;\r\n            this.title = params.title;\r\n            this.defaultNamespace = params.defaultNamespace;\r\n            this.destroyInserted();\r\n            this.setData(params);\r\n\r\n            return this._super({\r\n                namespace: params.namespace,\r\n                handle: params.namespace\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set data for new form.\r\n         *\r\n         * @param {Object} params\r\n         */\r\n        setData: function (params) {\r\n            var formQuery = 'index=' + params.namespace,\r\n                dataProviderQuery = 'index=' + params.namespace + '_data_source';\r\n\r\n            this.providerData = params.data;\r\n            this.id = params.id;\r\n            this.externalForm = this.requestModule(formQuery);\r\n            this.externalSource = this.requestModule(dataProviderQuery);\r\n            this.setLinks({\r\n                appearance: 'ns = ' + params.namespace + ', index = ' + this.appearanceIndex + ':value'\r\n            }, 'imports');\r\n            this.setLinks({\r\n                providerData: dataProviderQuery + ':data',\r\n                prefix: formQuery + ':selectorPrefix',\r\n                id: dataProviderQuery + ':id'\r\n            }, 'exports');\r\n        },\r\n\r\n        /** @inheritdoc **/\r\n        requestData: function (params) {\r\n            var deffer = $.Deferred(),\r\n                formConfig = this.configs[params.namespace];\r\n\r\n            if (formConfig) {\r\n                return deffer.resolve(formConfig);\r\n            }\r\n\r\n            return this._super().done(function (data) {\r\n                this.configs[params.namespace] = data;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Re-render after appearance change\r\n         *\r\n         * @param {String} value\r\n         */\r\n        onAppearanceChange: function (value) {\r\n            var namespace = this.availableAppearances[value] && this.availableAppearances[value].form ||\r\n                this.defaultNamespace;\r\n\r\n            if (namespace !== this.previousParams.namespace) {\r\n                this.render({\r\n                    namespace: namespace,\r\n                    id: this.id,\r\n                    data: this.externalSource().get('data'),\r\n                    appearances: this.availableAppearances,\r\n                    title: this.title,\r\n                    defaultNamespace: this.defaultNamespace\r\n                });\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/components/map-location-dynamic-rows.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/dynamic-rows/dynamic-rows',\r\n    'Magento_PageBuilder/js/events',\r\n    'underscore',\r\n    'jquery'\r\n], function (dynamicRows, Events, _, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns sortable values\r\n     *\r\n     * @param {String | Number | Object | Array} value\r\n     * @return {String | Number}\r\n     */\r\n    var sortValueValidator = function (value) {\r\n        if (typeof value === 'string') {\r\n            return value.toLowerCase();\r\n        }\r\n\r\n        if (typeof value === 'number') {\r\n            return value;\r\n        }\r\n\r\n        return '';\r\n    };\r\n\r\n    return dynamicRows.extend({\r\n        defaults: {\r\n            modules: {\r\n                insertForm: '${ $.insertFormProvider }',\r\n                modal: '${$.modalProvider}'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initLinks: function () {\r\n            this._super();\r\n            Events.on('mapLocation:saveAfter', function (data) {\r\n                this.modal().closeModal();\r\n                this.reInitData(data);\r\n            }.bind(this), this.name);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Open the location modal and insert form with the data from selected record\r\n         *\r\n         * @param {Object} record\r\n         */\r\n        edit: function (record) {\r\n            this.modal().openModal();\r\n            this.insertForm().edit(record.data());\r\n        },\r\n\r\n        /**\r\n         * Reinitializing of dynamic row records.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        reInitData: function (data) {\r\n            var recordData = this.recordData().slice(),\r\n                prop = this.identificationProperty,\r\n                isExists = false;\r\n\r\n            _.each(recordData, function (elem, index) {\r\n                if (elem[prop] === data[prop]) {\r\n                    recordData[index] = data;\r\n                    isExists = true;\r\n                }\r\n            }, this);\r\n\r\n            if (!isExists) {\r\n                recordData.push(data);\r\n            }\r\n\r\n            this.recordData(recordData);\r\n\r\n            _.each(this.labels(), function (label) {\r\n                if (label.columnsHeaderClasses) {\r\n                    this.sortRecord(label.name, label.columnsHeaderClasses === '_ascend');\r\n                }\r\n            }.bind(this));\r\n\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Logic to toggle ascend and descend sorting for headers\r\n         *\r\n         * @param {KnockoutObservableArray} property\r\n         */\r\n        sortByHeader: function (property) {\r\n            var ascend,\r\n                activeLabel,\r\n                allLabels,\r\n                placeholder;\r\n\r\n            if (property().name === 'actions') {\r\n                return;\r\n            }\r\n\r\n            if (property().columnsHeaderClasses) {\r\n                activeLabel = $.extend({}, property());\r\n                activeLabel.columnsHeaderClasses =\r\n                    property().columnsHeaderClasses === '_ascend' ? '_descend' : '_ascend';\r\n                ascend = activeLabel.columnsHeaderClasses === '_ascend';\r\n                property(activeLabel);\r\n            } else {\r\n                allLabels = this.labels().slice();\r\n                allLabels.forEach(function (label) {\r\n\r\n                    if (label.name === property().name) {\r\n                        label.columnsHeaderClasses = '_ascend';\r\n                    } else {\r\n                        label.columnsHeaderClasses = '';\r\n                    }\r\n                });\r\n                ascend = true;\r\n                this.labels(allLabels);\r\n            }\r\n\r\n            if (this.recordData().length) {\r\n                placeholder = this.emptyContentPlaceholder;\r\n\r\n                this.emptyContentPlaceholder = false;\r\n                this.sortRecord(property().name, ascend);\r\n                this.reload();\r\n                this.emptyContentPlaceholder = placeholder;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sorting of dynamic row records.\r\n         *\r\n         * @param {String} sortBy\r\n         * @param {Boolean} ascend\r\n         */\r\n        sortRecord: function (sortBy, ascend) {\r\n            this.recordData.sort(function (left, right) {\r\n                var record1 = ascend ? left : right,\r\n                    record2 = ascend ? right : left;\r\n\r\n                record1 = sortValueValidator(record1[sortBy]);\r\n                record2 = sortValueValidator(record2[sortBy]);\r\n\r\n                return record1 === record2 ? 0 : record1 < record2 ? -1 : 1;\r\n            });\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            this._super();\r\n            Events.off(this.name);\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/components/map-location-insert-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/insert-form'\r\n], function (Insert) {\r\n    'use strict';\r\n\r\n    return Insert.extend({\r\n        /**\r\n         * Clear form content and reinsert data in argument\r\n         * @param {Object} data\r\n         */\r\n        edit: function (data) {\r\n            this.destroyInserted();\r\n            this.render();\r\n            this.setData(data);\r\n        },\r\n\r\n        /**\r\n         * Set data for new form\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setData: function (data) {\r\n            var formQuery = 'index=' + this.ns,\r\n                dataProviderQuery = 'index=' + this.ns + '_data_source';\r\n\r\n            this.providerData = data;\r\n            this.externalForm = this.requestModule(formQuery);\r\n            this.externalSource = this.requestModule(dataProviderQuery);\r\n            this.setLinks({\r\n                providerData: dataProviderQuery + ':data'\r\n            }, 'exports');\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/block-chooser.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiLayout',\r\n    'uiElement',\r\n    'Magento_PageBuilder/js/config',\r\n    'mage/translate',\r\n    'mage/utils/objects'\r\n], function ($, layout, Element, Config, $t, objectUtils) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        id: null,\r\n        meta: {},\r\n        errorMessage: null,\r\n        displayMetadata: true,\r\n        messages: {\r\n            UNKOWN_ERROR: $t('Sorry, there was an error getting requested content. ' +\r\n                'Please contact the store owner.'),\r\n            UNKNOWN_SELECTION: $t('The currently selected block does not exist.')\r\n        },\r\n        defaults: {\r\n            template: 'Magento_PageBuilder/form/element/block-chooser',\r\n            requestParameter: null,\r\n            dataUrlConfigPath: null,\r\n            modalName: null,\r\n            buttonComponentConfig: {\r\n                title: '${ $.buttonTitle }',\r\n                component: 'Magento_Ui/js/form/components/button',\r\n                actions: [{\r\n                    targetName: '${ $.modalName }',\r\n                    actionName: 'openModal'\r\n                }]\r\n            },\r\n            requestData: {\r\n                method: 'POST',\r\n                data: {\r\n                    'form_key': window.FORM_KEY\r\n                }\r\n            },\r\n            listens: {\r\n                id: 'updateFromServer'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe('id meta errorMessage displayMetadata');\r\n        },\r\n\r\n        /**\r\n         * Updates the block data from the server\r\n         *\r\n         * @returns void\r\n         */\r\n        updateFromServer: function () {\r\n            var requestData = $.extend(true, {}, this.requestData);\r\n\r\n            // The component hasn't be configured yet. Nothing to do.\r\n            if (!this.id().length || !this.requestParameter || !this.dataUrlConfigPath) {\r\n                this.meta({});\r\n\r\n                return;\r\n            }\r\n\r\n            requestData.data[this.requestParameter] = this.id();\r\n            $('body').trigger('processStart');\r\n\r\n            $.ajax(objectUtils.nested(Config.getConfig(), this.dataUrlConfigPath), requestData)\r\n                .always(function () {\r\n                    $('body').trigger('processStop');\r\n                    this.errorMessage(null);\r\n                }.bind(this))\r\n                .done(function (response) {\r\n                    if (typeof response !== 'object' || response.error) {\r\n                        this.meta({});\r\n                        this.errorMessage(this.messages.UNKOWN_ERROR);\r\n\r\n                        return;\r\n                    } else if (Array.isArray(response)) {\r\n                        this.meta({});\r\n                        this.errorMessage(this.messages.UNKNOWN_SELECTION);\r\n\r\n                        return;\r\n                    }\r\n\r\n                    this.meta(response);\r\n                }.bind(this))\r\n                .fail(function () {\r\n                    this.meta({});\r\n                    this.errorMessage(this.messages.UNKOWN_ERROR);\r\n                }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Creates the button component for rendering\r\n         *\r\n         * @returns {Object} The button component\r\n         */\r\n        getButton: function () {\r\n            var elementConfig = this.buttonComponentConfig;\r\n\r\n            elementConfig.name = this.name + '_button';\r\n            layout([elementConfig]);\r\n\r\n            return this.requestModule(elementConfig.name);\r\n        },\r\n\r\n        /**\r\n         * Determines the status label for the currently loaded block\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getStatusLabel: function () {\r\n            return this.meta()['is_active'] === '1' ? $t('Active') : $t('Inactive');\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/condition-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PageBuilder/js/form/element/visual-select'\r\n], function (Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.showRelatedElement(this.value());\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super();\r\n\r\n            this.options().forEach(function (option) {\r\n                this.observe(option.value + 'Visible');\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onUpdate: function (value) {\r\n            this.showRelatedElement(value);\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Sets exported property, linked with visibility of the element, defined as option\r\n         *\r\n         * @param {String} value\r\n         * @returns {Object} Chainable\r\n         */\r\n        showRelatedElement: function (value) {\r\n            this[value + 'Visible'](true);\r\n            this.options().forEach(function (option) {\r\n                if (value !== option.value) {\r\n                    this[option.value + 'Visible'](false);\r\n                }\r\n            }.bind(this));\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/conditional-disable-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    var setDisabledSetting = {\r\n        defaults: {\r\n            disabledValues: []\r\n        },\r\n\r\n        /**\r\n         * Set the field as disabled when it's empty or is equal to a value within disabledValues\r\n         *\r\n         * @param {Array} value\r\n         */\r\n        setDisabled: function (value) {\r\n            if (_.indexOf(_.values(this.disabledValues), value) !== -1) {\r\n                this.disable();\r\n            } else {\r\n                this.enable();\r\n            }\r\n        }\r\n    };\r\n\r\n    return function (target) {\r\n        return target.extend(setDisabledSetting);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/form/element/conditions-loader.js":"define([\r\n    'jquery',\r\n    'Magento_Rule/rules',\r\n    'uiRegistry',\r\n    'mage/utils/objects'\r\n], function ($, RulesForm, uiRegistry, objectUtils) {\r\n    'use strict';\r\n\r\n    return function (config, conditionsFormPlaceholder) {\r\n        var $conditionsFormPlaceholder = $(conditionsFormPlaceholder),\r\n            attributeData = uiRegistry.get(config.formNamespace + '.' + config.formNamespace).source.data,\r\n            conditions = objectUtils.nested(attributeData, config.attribute) || '[]';\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax(config.componentUrl, {\r\n            method: 'POST',\r\n            data: {\r\n                conditions: conditions\r\n            }\r\n        })\r\n        .done(function (response) {\r\n            $conditionsFormPlaceholder.html(response);\r\n            window[config.jsObjectName] = new RulesForm(config.jsObjectName, config.childComponentUrl);\r\n            $('body').trigger('processStop');\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/form/element/dependent-fieldset.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/fieldset'\r\n], function (Fieldset) {\r\n    'use strict';\r\n\r\n    return Fieldset.extend({\r\n        defaults: {\r\n            originalLabelValue: ''\r\n        },\r\n\r\n        /**\r\n         * Observe label\r\n         * {@inheritDoc}\r\n         */\r\n        initObservable: function () {\r\n            this._super().observe('label');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Store original label value\r\n         * {@inheritDoc}\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.originalLabelValue = this.label;\r\n        },\r\n\r\n        /**\r\n         * Hide fieldset if number of field options is <= 1 and it is the only element in the group\r\n         *\r\n         * @param {Array} options\r\n         */\r\n        hideFieldset: function (options) {\r\n            this.visible(options.length > 1 || this.elems().length > 1);\r\n        },\r\n\r\n        /**\r\n         * Hide label if number of field options is <= 1\r\n         *\r\n         * @param {Array} options\r\n         */\r\n        hideLabel: function (options) {\r\n            this.label(options.length > 1 ? this.originalLabelValue : '');\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/dependent-select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/select'\r\n], function (Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            visible: false\r\n        },\r\n\r\n        /**\r\n         * Dependently display dropdown component if it contains more than one option\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        setOptions: function () {\r\n            this._super();\r\n\r\n            if (this.options().length > 1) {\r\n                this.setVisible(true);\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/dependent-value-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var setDependentValuesSetting = {\r\n        defaults: {\r\n            dependentValues: {}\r\n        },\r\n\r\n        /**\r\n         * Change value of component if it present in dependentValues\r\n         */\r\n        setDependentValues: function (value) {\r\n            if (this.dependentValues.hasOwnProperty(value)) {\r\n                this.previousValue = this.value();\r\n                this.value(this.dependentValues[value]);\r\n            } else if (this.hasOwnProperty('previousValue')) {\r\n                this.value(this.previousValue);\r\n            }\r\n        }\r\n    };\r\n\r\n    return function (target) {\r\n        return target.extend(setDependentValuesSetting);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/form/element/dependent-visual-select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_PageBuilder/js/form/element/visual-select'\r\n], function (_, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            visible: false\r\n        },\r\n\r\n        /**\r\n         * Dependently display dropdown component if it contains more than one option\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        setOptions: function () {\r\n            this._super();\r\n\r\n            if (this.options().length > 1) {\r\n                this.setVisible(true);\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/grid-size.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        validate: function () {\r\n            var externalFormSourceData = this.requestModule('index=' + this.ns)().source.data;\r\n\r\n            this.validationParams = {\r\n                'non_empty_column_count': externalFormSourceData.non_empty_column_count,\r\n                'max_grid_size': externalFormSourceData.max_grid_size\r\n            };\r\n\r\n            return this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/html-code.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global MediabrowserUtility, widgetTools, MagentovariablePlugin */\r\ndefine([\r\n    'Magento_Ui/js/form/element/textarea',\r\n    'mage/adminhtml/wysiwyg/widget'\r\n], function (Textarea) {\r\n    'use strict';\r\n\r\n    var HTML_ID_PLACEHOLDER = 'HTML_ID_PLACEHOLDER';\r\n\r\n    return Textarea.extend({\r\n        defaults: {\r\n            elementTmpl: 'Magento_PageBuilder/form/element/html-code'\r\n        },\r\n\r\n        /**\r\n         * Click event for Insert Widget Button\r\n         */\r\n        clickInsertWidget: function () {\r\n            return widgetTools.openDialog(\r\n                this.widgetUrl.replace(HTML_ID_PLACEHOLDER, this.uid)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Click event for Insert Image Button\r\n         */\r\n        clickInsertImage: function () {\r\n            return MediabrowserUtility.openDialog(\r\n                this.imageUrl.replace(HTML_ID_PLACEHOLDER, this.uid)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Click event for Insert Variable Button\r\n         */\r\n        clickInsertVariable: function () {\r\n            return MagentovariablePlugin.loadChooser(\r\n                this.variableUrl,\r\n                this.uid\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/html.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/html',\r\n    'jquery',\r\n    'underscore'\r\n], function (Html, $, _) {\r\n    'use strict';\r\n\r\n    return Html.extend({\r\n        defaults: {\r\n            inputSelector: '[data-form-part=${ $.ns }]',\r\n            elements: [],\r\n            value: {}\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.initInputListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe('value');\r\n        },\r\n\r\n        /**\r\n         * Listen for value change on each field that has been added.\r\n         */\r\n        initInputListener: function () {\r\n            $.async({\r\n                component: this,\r\n                selector: this.inputSelector\r\n            }, function (el) {\r\n                this.elements.push(el);\r\n                $(el).on('change', this.updateValue.bind(this));\r\n                $(el).nextAll('.rule-param-apply').on('click', function () {\r\n                    $(el).trigger('change');\r\n                });\r\n                $(el).closest('li').find('.rule-param-remove').on('click', function () {\r\n                    $(el).val('').trigger('change');\r\n                });\r\n                this.updateValue(this);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Collect data and update value.\r\n         */\r\n        updateValue: function () {\r\n            var result = {},\r\n                name;\r\n\r\n            this.elements.forEach(function (item) {\r\n                switch (item.type) {\r\n                    case 'checkbox':\r\n                        result[item.name] = +!!item.checked;\r\n                        break;\r\n\r\n                    case 'radio':\r\n                        if (item.checked) {\r\n                            result[item.name] = item.value;\r\n                        }\r\n                        break;\r\n\r\n                    case 'select-multiple':\r\n                        name = item.name.substring(0, item.name.length - 2); //remove [] from the name ending\r\n                        result[name] = _.pluck(item.selectedOptions, 'value');\r\n                        break;\r\n\r\n                    default:\r\n                        result[item.name] = item.value;\r\n                }\r\n            });\r\n\r\n            this.value(result);\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/image-uploader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/element/image-uploader',\r\n    'Magento_PageBuilder/js/resource/resize-observer/ResizeObserver',\r\n    'Magento_PageBuilder/js/events',\r\n    'mage/translate'\r\n], function ($, _, uiRegistry, Uploader, ResizeObserver, events, $t) {\r\n    'use strict';\r\n\r\n    var initializedOnce = false;\r\n\r\n    return Uploader.extend({\r\n        defaults: {\r\n            $uploadArea: null,\r\n            isShowImageUploadInstructions: true,\r\n            isShowImageUploadOptions: false,\r\n            visibleControls: true,\r\n            classes: {\r\n                dragging: 'dragging',\r\n                draggingInside: 'dragging-inside',\r\n                draggingOutside: 'dragging-outside'\r\n            },\r\n            // listed in ascending order\r\n            elementWidthModifierClasses: {\r\n                '_micro-ui': {\r\n                    maxWidth: 130\r\n                },\r\n                '_compact-ui': {\r\n                    minWidth: 131,\r\n                    maxWidth: 440\r\n                }\r\n            },\r\n            translations: {\r\n                allowedFileTypes: $t('Allowed file types'),\r\n                dragImageHere: $t('Drag image here'),\r\n                dropHere: $t('Drop here'),\r\n                maximumFileSize: $t('Maximum file size'),\r\n                selectFromGallery: $t('Select from Gallery'),\r\n                or: $t('or'),\r\n                uploadImage: $t('Upload Image'),\r\n                uploadNewImage: $t('Upload New Image')\r\n            },\r\n            tracks: {\r\n                visibleControls: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Bind drag events to highlight/unhighlight dropzones\r\n         * {@inheritDoc}\r\n         */\r\n        initialize: function () {\r\n            var $document = $(document);\r\n\r\n            this._super();\r\n\r\n            events.on('image:' + this.id + ':assignAfter', this.onAssignedFile.bind(this));\r\n\r\n            // bind dropzone highlighting using event delegation only once\r\n            if (!initializedOnce) {\r\n                // dropzone highlighting\r\n                $document.on('dragover', this.highlightDropzone.bind(this));\r\n\r\n                // dropzone unhighlighting\r\n                $document.on('dragend dragleave mouseup', this.unhighlightDropzone.bind(this));\r\n\r\n                initializedOnce = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        initUploader: function (fileInput) {\r\n            this._super(fileInput);\r\n            this.$uploadArea = $(this.$fileInput).closest('.pagebuilder-image-empty-preview');\r\n            new ResizeObserver(this.updateResponsiveClasses.bind(this)).observe(this.$uploadArea.get(0));\r\n        },\r\n\r\n        /**\r\n         * Checks if provided file is allowed to be uploaded.\r\n         * {@inheritDoc}\r\n         */\r\n        isFileAllowed: function () {\r\n            var result = this._super(),\r\n                allowedExtensions = this.getAllowedFileExtensionsInCommaDelimitedFormat();\r\n\r\n            if (!result.passed && result.rule === 'validate-file-type') {\r\n                result.message += ' ' + this.translations.allowedFileTypes + ': ' + allowedExtensions + '.';\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Remove draggable classes from dropzones\r\n         * {@inheritDoc}\r\n         */\r\n        onBeforeFileUpload: function () {\r\n            this.removeDraggableClassesFromDropzones();\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Add/remove CSS classes to $dropzone element to provide UI feedback\r\n         *\r\n         * @param {jQuery.event} e\r\n         */\r\n        highlightDropzone: function (e) {\r\n            var $dropzone = $(e.target).closest(this.dropZone),\r\n                $otherDropzones = $(this.dropZone).not($dropzone),\r\n                isInsideDropzone = !!$dropzone.length;\r\n\r\n            if (isInsideDropzone) {\r\n                $dropzone\r\n                  .removeClass(this.classes.draggingOutside)\r\n                  .addClass([this.classes.dragging, this.classes.draggingInside].join(' '));\r\n            }\r\n\r\n            $otherDropzones\r\n              .removeClass(this.classes.draggingInside)\r\n              .addClass([this.classes.dragging, this.classes.draggingOutside].join(' '));\r\n        },\r\n\r\n        /**\r\n         * Remove all UI styling from dropzone\r\n         *\r\n         * @param {jQuery.event} e\r\n         */\r\n        unhighlightDropzone: function (e) {\r\n            var isMouseReleased = e.type === 'mouseup' || e.type === 'dragend',\r\n                isActuallyLeavingThePage = e.type === 'dragleave' && (e.clientX === 0 || e.clientY === 0);\r\n\r\n            if (!isMouseReleased && !isActuallyLeavingThePage) {\r\n                return;\r\n            }\r\n\r\n            this.removeDraggableClassesFromDropzones();\r\n        },\r\n\r\n        /**\r\n         * Remove draggable CSS classes from dropzone elements\r\n         */\r\n        removeDraggableClassesFromDropzones: function () {\r\n            var $dropzones = $(this.dropZone);\r\n\r\n            $dropzones\r\n                .removeClass([\r\n                    this.classes.dragging,\r\n                    this.classes.draggingInside,\r\n                    this.classes.draggingOutside\r\n                ].join(' '));\r\n        },\r\n\r\n        /**\r\n         * Trigger image:uploadAfter event to be handled by PageBuilder image component\r\n         * {@inheritDoc}\r\n         */\r\n        addFile: function (file) {\r\n            this._super();\r\n\r\n            events.trigger('image:' + this.id + ':uploadAfter', [file]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Trigger image:deleteFileAfter event to be handled by PageBuilder image component\r\n         * {inheritDoc}\r\n         */\r\n        clear: function () {\r\n            this._super();\r\n\r\n            events.trigger('image:' + this.id + ':deleteFileAfter');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Propagate file changes through all image uploaders sharing the same id\r\n         *\r\n         * @param {Object} file\r\n         */\r\n        onAssignedFile: function (file) {\r\n            this.value([file]);\r\n        },\r\n\r\n        /**\r\n         * Adds the appropriate ui state class to the upload control area based on the current rendered size\r\n         */\r\n        updateResponsiveClasses: function () {\r\n            var classesToAdd = [],\r\n                classConfig,\r\n                elementWidth = this.$uploadArea.width(),\r\n                modifierClass;\r\n\r\n            if (!this.$uploadArea.is(':visible')) {\r\n                return;\r\n            }\r\n\r\n            this.$uploadArea.removeClass(Object.keys(this.elementWidthModifierClasses).join(' '));\r\n\r\n            for (modifierClass in this.elementWidthModifierClasses) {\r\n                if (!this.elementWidthModifierClasses.hasOwnProperty(modifierClass)) {\r\n                    // jscs:disable disallowKeywords\r\n                    continue;\r\n                    // jscs:enable disallowKeywords\r\n                }\r\n\r\n                classConfig = this.elementWidthModifierClasses[modifierClass];\r\n\r\n                if (classConfig.minWidth && classConfig.maxWidth &&\r\n                    (classConfig.minWidth <= elementWidth && elementWidth <= classConfig.maxWidth) ||\r\n                    classConfig.minWidth && !classConfig.maxWidth && classConfig.minWidth <= elementWidth ||\r\n                    classConfig.maxWidth && !classConfig.minWidth && elementWidth <= classConfig.maxWidth\r\n                ) {\r\n                    classesToAdd.push(modifierClass);\r\n                }\r\n            }\r\n\r\n            if (classesToAdd.length) {\r\n                this.$uploadArea.addClass(classesToAdd.join(' '));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        hasData: function () {\r\n            // Some of the components automatically add an empty object if the value is unset.\r\n            return this._super() && !$.isEmptyObject(this.value()[0]);\r\n        },\r\n\r\n        /**\r\n         * Stop event to prevent it from reaching any objects other than the current object.\r\n         *\r\n         * @param {Object} uploader\r\n         * @param {Event} event\r\n         * @returns {Boolean}\r\n         */\r\n        stopEvent: function (uploader, event) {\r\n            event.stopPropagation();\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/map.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/*eslint-disable vars-on-top, strict */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract',\r\n    'Magento_PageBuilder/js/utils/map',\r\n    'module',\r\n    'Magento_PageBuilder/js/events'\r\n], function (AbstractField, GoogleMap, module, events) {\r\n    'use strict';\r\n\r\n    var google = window.google || {};\r\n\r\n    return AbstractField.extend({\r\n        defaults: {\r\n            elementTmpl: 'Magento_PageBuilder/form/element/map',\r\n            map: false,\r\n            marker: false,\r\n            apiKeyValid: !!module.config().apiKey,\r\n            apiKeyErrorMessage: module.config().apiKeyErrorMessage\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n\r\n            this.observe('apiKeyValid');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Render the map into the field\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        renderMap: function (element) {\r\n            // Get the start value and convert the value into an array\r\n            var startValue = this.value(),\r\n                mapOptions,\r\n                latitudeLongitude;\r\n\r\n            if (!this.apiKeyValid()) {\r\n                return;\r\n            }\r\n\r\n            if (typeof startValue === 'string' && startValue !== '') {\r\n                startValue = JSON.parse(startValue);\r\n            }\r\n\r\n            mapOptions = {\r\n                navigationControl: true,\r\n                navigationControlOptions: {\r\n                    style: google.maps.NavigationControlStyle.DEFAULT\r\n                }\r\n            };\r\n\r\n            events.on('googleMaps:authFailure', function () {\r\n                this.apiKeyValid(false);\r\n            }.bind(this));\r\n\r\n            // Create the map\r\n            this.mapElement = new GoogleMap(element, [], mapOptions);\r\n\r\n            if (!this.mapElement || !this.mapElement.map) {\r\n                return;\r\n            }\r\n\r\n            // Add marker if there is a start value\r\n            if (startValue.latitude !== '' && startValue.longitude !== '') {\r\n                latitudeLongitude = new google.maps.LatLng(\r\n                    parseFloat(startValue.latitude),\r\n                    parseFloat(startValue.longitude)\r\n                );\r\n\r\n                this.mapElement.map.setCenter(latitudeLongitude);\r\n                this.addMarker(startValue.latitude, startValue.longitude);\r\n            }\r\n\r\n            // After click, add and update both Latitude and Longitude.\r\n            google.maps.event.addListener(this.mapElement.map, 'click', this.onClick.bind(this));\r\n            google.maps.event.addListener(this.mapElement.map, 'dblclick', this.onDblClick.bind(this));\r\n            google.maps.event.trigger(this.marker, 'click');\r\n        },\r\n\r\n        /**\r\n         * Adds a map marker\r\n         *\r\n         * @param {String} latitude\r\n         * @param {String} longitude\r\n         */\r\n        addMarker: function (latitude, longitude) {\r\n            this.marker = new google.maps.Marker({\r\n                draggable: true,\r\n                map: this.mapElement.map,\r\n                position: new google.maps.LatLng(latitude, longitude)\r\n            });\r\n            google.maps.event.addListener(this.marker, 'dragend', this.onDragEnd.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Event for drag end to update value\r\n         */\r\n        onDragEnd: function () {\r\n            this.value(this.exportValue());\r\n        },\r\n\r\n        /**\r\n         * Event for click to update marker, delayed by 300ms in case of double click\r\n         *\r\n         * @param {Event} event\r\n         */\r\n        onClick: function (event) {\r\n            this.clickTimer = setTimeout(function () {\r\n                if (!this.marker) {\r\n                    this.addMarker(event.latLng.lat(), event.latLng.lng());\r\n                }\r\n                this.value(this.exportValue(event.latLng));\r\n            }.bind(this), 300);\r\n        },\r\n\r\n        /**\r\n         * Event for double click to prevent call from single click\r\n         */\r\n        onDblClick: function () {\r\n            clearTimeout(this.clickTimer);\r\n        },\r\n\r\n        /**\r\n         * Callback after an update to map\r\n         */\r\n        onUpdate: function () {\r\n            if (!this.mapElement) {\r\n                return;\r\n            }\r\n\r\n            this._super();\r\n            var content = this.value(),\r\n                latitudeLongitude;\r\n\r\n            if (this.marker && content.latitude === '' && content.longitude === '') {\r\n                this.marker.setMap(null);\r\n                delete this.marker;\r\n\r\n                return;\r\n            }\r\n\r\n            if (!this.validateCoordinate(content) ||\r\n                this.mapElement &&\r\n                !this.mapElement.map ||\r\n                this.value() === '' ||\r\n                this.value() === this.exportValue()) {\r\n                return;\r\n            }\r\n\r\n            if (typeof this.value() === 'string' && this.value() !== '') {\r\n                content = JSON.parse(this.value());\r\n            }\r\n            latitudeLongitude = new google.maps.LatLng(parseFloat(content.latitude), parseFloat(content.longitude));\r\n\r\n            if (!this.marker) {\r\n                this.addMarker(latitudeLongitude.lat(), latitudeLongitude.lng());\r\n            }\r\n\r\n            this.marker.setPosition(latitudeLongitude);\r\n            this.mapElement.map.setCenter(latitudeLongitude);\r\n        },\r\n\r\n        /**\r\n         * Coordinate validation\r\n         *\r\n         * @param {Object} coordinates\r\n         * @return {Boolean}\r\n         */\r\n        validateCoordinate: function (coordinates) {\r\n            var valid = true;\r\n\r\n            if (coordinates.longitude === '' ||\r\n                coordinates.latitude === '' ||\r\n                isNaN(coordinates.longitude) ||\r\n                isNaN(coordinates.latitude) ||\r\n                parseFloat(coordinates.longitude) < -180 ||\r\n                parseFloat(coordinates.longitude) > 180 ||\r\n                parseFloat(coordinates.latitude) < -90 ||\r\n                parseFloat(coordinates.latitude) > 90\r\n            ) {\r\n                valid = false;\r\n            }\r\n\r\n            return valid;\r\n        },\r\n\r\n        /**\r\n         * Returns current latitude and longitude as an object\r\n         *\r\n         * @param {Object} coordinate\r\n         * @return {Object}\r\n         */\r\n        exportValue: function (coordinate) {\r\n            var position = this.marker ?\r\n                this.marker.getPosition() :\r\n                new google.maps.LatLng(this.mapElement.map.center.lat(), this.mapElement.map.center.lng()),\r\n                currentCoordinate = coordinate ? coordinate : position;\r\n\r\n            return {\r\n                latitude: currentCoordinate.lat(),\r\n                longitude: currentCoordinate.lng()\r\n            };\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/margins-and-padding.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/*eslint-disable vars-on-top, strict */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (_, ko, Abstract) {\r\n    'use strict';\r\n\r\n    var defaultValue = '';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            elementTmpl: 'Magento_PageBuilder/form/element/margins-and-padding',\r\n            marginTop: defaultValue,\r\n            marginRight: defaultValue,\r\n            marginBottom: defaultValue,\r\n            marginLeft: defaultValue,\r\n            paddingTop: defaultValue,\r\n            paddingRight: defaultValue,\r\n            paddingBottom: defaultValue,\r\n            paddingLeft: defaultValue,\r\n            listens: {\r\n                marginTop: 'updateValue',\r\n                marginRight: 'updateValue',\r\n                marginBottom: 'updateValue',\r\n                marginLeft: 'updateValue',\r\n                paddingTop: 'updateValue',\r\n                paddingRight: 'updateValue',\r\n                paddingBottom: 'updateValue',\r\n                paddingLeft: 'updateValue'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init observable on our margin & padding properties\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.observe('marginTop marginRight marginBottom marginLeft ' +\r\n                'paddingTop paddingRight paddingBottom paddingLeft');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update the value on individual property changes\r\n         */\r\n        updateValue: function () {\r\n            this.value({\r\n                margin: {\r\n                    top: this.marginTop(),\r\n                    right: this.marginRight(),\r\n                    bottom: this.marginBottom(),\r\n                    left: this.marginLeft()\r\n                },\r\n                padding: {\r\n                    top: this.paddingTop(),\r\n                    right: this.paddingRight(),\r\n                    bottom: this.paddingBottom(),\r\n                    left: this.paddingLeft()\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * On set of the initial value update our individual observables\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        setInitialValue: function () {\r\n            this._super();\r\n            this._updateObservables(this.initialValue);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * On update of the value property update our individual observables, the data provider can have data\r\n         * set on it after the initial construction, this ensures we translate our values\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        onUpdate: function () {\r\n            this._super();\r\n            this._updateObservables(this.value());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update the observable properties\r\n         *\r\n         * @param {Number} value\r\n         * @private\r\n         */\r\n        _updateObservables: function (value) {\r\n            if (value && _.isString(value)) {\r\n                value = JSON.parse(value);\r\n            }\r\n\r\n            if (value && _.isObject(value)) {\r\n                _.each(value, function (attributeData, attributeType) {\r\n                    _.each(attributeData, function (attributeValue, attributeDirection) {\r\n                        if (attributeValue !== defaultValue) {\r\n                            this[attributeType + attributeDirection.capitalize()](attributeValue);\r\n                        }\r\n                    }, this);\r\n                }, this);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/page-ui-select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/ui-select'\r\n], function (Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n\r\n        /**\r\n         * Get path to current option\r\n         *\r\n         * @param {Object} data - option data\r\n         * @returns {String} path\r\n         */\r\n        getPath: function (data) {\r\n            var path = '';\r\n\r\n            if (this.renderPath) {\r\n                path = data.identifier || path;\r\n            }\r\n\r\n            return path;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/product-totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_PageBuilder/js/form/provider/conditions-data-processor',\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (_, $, $t, conditionsDataProcessor, Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            conditionOption: '',\r\n            conditionValue: '',\r\n            formData: {},\r\n            totalProductCount: 0,\r\n            totalDisabledProducts: 0,\r\n            totalNotVisibleProducts: 0,\r\n            previousConditions: false,\r\n            listens: {\r\n                conditionOption: 'updateProductTotals',\r\n                conditionValue: 'updateProductTotals',\r\n                '${ $.provider }:data.modalClosed': 'abortRunningRequest'\r\n            },\r\n            imports: {\r\n                formData: '${ $.provider }:data'\r\n            },\r\n            links: {\r\n                value: false\r\n            },\r\n            url: null,\r\n            valuePlaceholder: $t('of %1 total'),\r\n            disabledPlaceholder: $t('%1 disabled'),\r\n            notVisiblePlaceholder: $t('%1 not visible'),\r\n            showSpinner: true,\r\n            loading: false,\r\n            jqXHR: null\r\n        },\r\n\r\n        /**\r\n         * Abort running Ajax request\r\n         */\r\n        abortRunningRequest: function () {\r\n            if (this.jqXHR && this.jqXHR.readyState !== 4) {\r\n                this.jqXHR.abort();\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe('value totalProductCount totalDisabledProducts totalNotVisibleProducts loading');\r\n        },\r\n\r\n        /**\r\n         * If we haven't aborted the request, continue and display the error\r\n         *\r\n         * @param {Object} jqXHR\r\n         */\r\n        callSuperError: function (jqXHR) {\r\n            // eslint-disable-next-line jquery-no-bind-unbind\r\n            var superError = $.ajaxSettings.error.bind(window, jqXHR);\r\n\r\n            superError();\r\n        },\r\n\r\n        /**\r\n         * Update product count.\r\n         */\r\n        updateProductTotals: _.debounce(function () {\r\n            var totalText,\r\n                negativeTotals = [];\r\n\r\n            if (!this.conditionOption || _.isEmpty(this.formData)) {\r\n                return;\r\n            }\r\n\r\n            if (this.conditionOption === 'category_ids' && typeof this.formData['category_ids'] !== 'string') {\r\n                this.formData['category_ids'] = '';\r\n            }\r\n\r\n            _.extend(this.formData, this.conditionValue);\r\n            conditionsDataProcessor(this.formData, this.conditionOption + '_source');\r\n\r\n            // Store the previous conditions so we don't update the totals when nothing has changed\r\n            if (this.previousConditions === this.formData['conditions_encoded']) {\r\n                return;\r\n            }\r\n            this.previousConditions = this.formData['conditions_encoded'];\r\n\r\n            this.loading(true);\r\n            this.abortRunningRequest();\r\n            this.jqXHR = $.ajax({\r\n                url: this.url,\r\n                method: 'POST',\r\n                data: {\r\n                    conditionValue: this.formData['conditions_encoded']\r\n                },\r\n                error: function (jqXHR) {\r\n                    if (jqXHR.statusText !== 'abort') {\r\n                        this.callSuperError(jqXHR);\r\n                    }\r\n                }.bind(this)\r\n            }).done(function (response) {\r\n                this.totalProductCount(parseInt(response.total, 10));\r\n                this.totalDisabledProducts(parseInt(response.disabled, 10));\r\n                this.totalNotVisibleProducts(parseInt(response.notVisible, 10));\r\n                totalText = this.valuePlaceholder\r\n                    .replace('%1', parseInt(response.total, 10));\r\n\r\n                if (parseInt(response.disabled, 10) > 0) {\r\n                    negativeTotals.push(this.disabledPlaceholder.replace('%1', parseInt(response.disabled, 10)));\r\n                }\r\n\r\n                if (parseInt(response.notVisible, 10) > 0) {\r\n                    negativeTotals.push(this.notVisiblePlaceholder.replace('%1', parseInt(response.notVisible, 10)));\r\n                }\r\n\r\n                if (negativeTotals.length > 0) {\r\n                    totalText += ' (' + negativeTotals.join(', ') + ')';\r\n                }\r\n\r\n                this.value(totalText);\r\n                this.loading(false);\r\n            }.bind(this)).fail(function () {\r\n                if (this.jqXHR.statusText !== 'abort') {\r\n                    this.value($t('An unknown error occurred. Please try again.'));\r\n                }\r\n                this.loading(false);\r\n            }.bind(this));\r\n        }, 10)\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/select-filtered-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n\r\n        defaults: {\r\n            excludeOptions: []\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onUpdate: function () {\r\n            if (!this.updatedByFilter) {\r\n                this.transferredValue = null;\r\n            } else {\r\n                this.updatedByFilter = false;\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Excluding options according excludeOptions configuration based on the passed value\r\n         *\r\n         * @param {String} value\r\n         */\r\n        filter: function (value) {\r\n            var source = this.initialOptions,\r\n                initialValue = this.value(),\r\n                result,\r\n                excludeOptions =  this.excludeOptions[value],\r\n                excludedOptionsArray = excludeOptions ? excludeOptions.split(',') : [];\r\n\r\n            result = _.filter(source, function (item) {\r\n                return !excludeOptions || excludedOptionsArray.indexOf(item.value) === -1;\r\n            });\r\n\r\n            this.updatedByFilter = true;\r\n            this.setOptions(result);\r\n\r\n            this.value(this.transferredValue ? this.transferredValue : initialValue);\r\n\r\n            if (excludedOptionsArray.indexOf(initialValue) !== -1) {\r\n                this.transferredValue = initialValue;\r\n            } else {\r\n                this.transferredValue = null;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/validator-rules-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/lib/validation/utils'\r\n], function ($, _, utils) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Validate the number is between the min and max provided\r\n     *\r\n     * @param {Number} value\r\n     * @param {Number} min\r\n     * @param {Number} max\r\n     * @return {Boolean}\r\n     */\r\n    function validateNumberBetween(value, min, max) {\r\n        var numValue;\r\n\r\n        if ($.mage.isEmptyNoTrim(value)) {\r\n            return true;\r\n        }\r\n\r\n        numValue = $.mage.parseNumber(value);\r\n\r\n        if (isNaN(numValue)) {\r\n            return false;\r\n        }\r\n\r\n        return $.mage.isBetween(numValue, min, max);\r\n    }\r\n\r\n    /**\r\n     * Validate that string is url\r\n     * @param {String} href\r\n     * @return {Boolean}\r\n     */\r\n    function validateIsUrl(href) {\r\n        return (/^(http|https|ftp):\\/\\/(([A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))(\\.[A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))*)(:(\\d+))?(\\/[A-Z0-9~](([A-Z0-9_~-]|\\.)*[A-Z0-9~]|))*\\/?(.*)?$/i).test(href);//eslint-disable-line max-len\r\n    }\r\n\r\n    /**\r\n     * Validate that string has an anchor tag\r\n     * @param {String} str\r\n     * @return {Boolean}\r\n     */\r\n    function validateWysiwygHasAnchorTags(str) {\r\n        return (/<a[\\s]+([^>]+)>|<a>|<\\/a>/igm).test(str);\r\n    }\r\n\r\n    /**\r\n     * Validate that string has a widget\r\n     * @param {String} str\r\n     * @return {Boolean}\r\n     */\r\n    function validateWysiwygHasWidget(str) {\r\n        return (/\\{\\{widget(.*?)\\}\\}/ig).test(str);\r\n    }\r\n\r\n    /**\r\n     * Validate that string is a proper css-class\r\n     * @param {String} str\r\n     * @return {Boolean}\r\n     */\r\n    function validateCssClass(str) {\r\n        return (/^[a-zA-Z _\\-\\d]+$/i).test(str);\r\n    }\r\n\r\n    /**\r\n     * Validate message field and url field anchor tag is used exclusively by one field\r\n     * @param {String} message\r\n     * @param {Object} url\r\n     * @return {Boolean}\r\n     */\r\n    function validateOneAnchorTagField(message, url) {\r\n        return !(validateWysiwygHasAnchorTags(message) &&\r\n            ['page', 'product', 'category', 'default'].indexOf(url.type) !== -1 &&\r\n            url[url.type] &&\r\n            url[url.type].length > 0);\r\n    }\r\n\r\n    /**\r\n     * Validate message field and url field html standards, nested widget\r\n     * @param {String} message\r\n     * @param {Object} url\r\n     * @return {Boolean}\r\n     */\r\n    function validateNestedWidgetElement(message, url) {\r\n        return !(validateWysiwygHasWidget(message) &&\r\n            ['page', 'product', 'category', 'default'].indexOf(url.type) !== -1 &&\r\n            url[url.type] &&\r\n            url[url.type].length > 0);\r\n    }\r\n\r\n    /**\r\n     * Validate a field with an expected data value of type object, like margins_and_padding field\r\n     * @param {Function} validator\r\n     * @param {String} ruleName\r\n     */\r\n    function validateObjectField(validator, ruleName) {\r\n        var rule = validator.getRule(ruleName);\r\n\r\n        validator.addRule(\r\n            ruleName,\r\n            function (value, params) {\r\n                var allNumbers = true,\r\n                    handler = rule.handler.bind(this);\r\n\r\n                if (typeof value !== 'object') {\r\n                    return handler(value, params);\r\n                }\r\n\r\n                _.flatten(_.map(value, _.values)).forEach(function (val) {\r\n                    if (!handler(val, params)) {\r\n                        allNumbers = false;\r\n\r\n                        return allNumbers;\r\n                    }\r\n                });\r\n\r\n                return allNumbers;\r\n            },\r\n            $.mage.__(rule.message)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Validate calc value.\r\n     *\r\n     * @param {String} value\r\n     * @returns {Boolean}\r\n     */\r\n    function validateCalc(value) {\r\n        var el = document.createElement('div'),\r\n            style = el.style;\r\n\r\n        if (!value.trim().length) {\r\n            return true;\r\n        }\r\n\r\n        style.width = 'calc(' + value + ')';\r\n\r\n        return !!style.width.length;\r\n    }\r\n\r\n    return function (validator) {\r\n        var requiredInputRule = validator.getRule('required-entry');\r\n\r\n        validator.addRule(\r\n            'required-entry-location-name',\r\n            requiredInputRule.handler,\r\n            $.mage.__('Please enter the location name.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'required-entry-latitude',\r\n            requiredInputRule.handler,\r\n            $.mage.__('Enter latitude')\r\n        );\r\n\r\n        validator.addRule(\r\n            'required-entry-longitude',\r\n            requiredInputRule.handler,\r\n            $.mage.__('Enter longitude')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-latitude',\r\n            function (value) {\r\n                return validateNumberBetween(value, -85, 85);\r\n            },\r\n            $.mage.__('Please enter a number between -85 and 85')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-longitude',\r\n            function (value) {\r\n                return validateNumberBetween(value, -180, 180);\r\n            },\r\n            $.mage.__('Please enter a number between -180 and 180')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-video-url',\r\n            function (href) {\r\n                if (utils.isEmptyNoTrim(href)) {\r\n                    return true;\r\n                }\r\n\r\n                href = (href || '').replace(/^\\s+/, '').replace(/\\s+$/, '');\r\n\r\n                return validateIsUrl(href) && (href.match(/youtube\\.com|youtu\\.be/) || href.match(/vimeo\\.com/));\r\n            },\r\n            $.mage.__('Please enter a valid video URL.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-video-source',\r\n            function (href) {\r\n                if (utils.isEmptyNoTrim(href)) {\r\n                    return true;\r\n                }\r\n\r\n                href = (href || '').replace(/^\\s+/, '').replace(/\\s+$/, '');\r\n\r\n                return validateIsUrl(href) && (\r\n                    href.match(/youtube\\.com|youtu\\.be/) ||\r\n                    href.match(/vimeo\\.com/) ||\r\n                    href.match(/\\.(mp4|ogv|webm)(?!\\w)/)\r\n                );\r\n            },\r\n            $.mage.__('Please enter a valid video URL. Valid URLs have a video file extension (.mp4, .webm, .ogv) or links to videos on YouTube or Vimeo.')//eslint-disable-line max-len\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-css-class',\r\n            function (value) {\r\n                if (utils.isEmptyNoTrim(value)) {\r\n                    return true;\r\n                }\r\n\r\n                return validateCssClass(value);\r\n            },\r\n            $.mage.__('Please enter a valid CSS class.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'required-entry',\r\n            function (value) {\r\n                var allFilled;\r\n\r\n                // Validation only for margins and paddings\r\n                if (typeof value === 'object' && !!(value.padding || value.margin)) {\r\n                    allFilled = true;\r\n\r\n                    _.flatten(_.map(value, _.values)).forEach(function (val) {\r\n                        if (utils.isEmpty(val)) {\r\n                            allFilled = false;\r\n\r\n                            return allFilled;\r\n                        }\r\n                    });\r\n\r\n                    return allFilled;\r\n                }\r\n\r\n                return requiredInputRule.handler(value);\r\n            },\r\n            $.mage.__(requiredInputRule.message)\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-message-no-link',\r\n            function (url, message) {\r\n                return validateOneAnchorTagField(message, url);\r\n            },\r\n            $.mage.__('Adding link in both content and outer element is not allowed.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-no-url',\r\n            function (message, url) {\r\n                return validateOneAnchorTagField(message, url);\r\n            },\r\n            $.mage.__('Adding link in both content and outer element is not allowed.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-message-no-widget',\r\n            function (url, message) {\r\n                return validateNestedWidgetElement(message, url);\r\n            },\r\n            $.mage.__('Adding link in outer element and widget in content is not allowed.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-no-widget',\r\n            function (message, url) {\r\n                return validateNestedWidgetElement(message, url);\r\n            },\r\n            $.mage.__('Adding widget in content and link in outer element is not allowed.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-calc',\r\n            function (value) {\r\n                return validateCalc(value);\r\n            },\r\n            $.mage.__('Please enter a valid number or calculation: Valid numbers must have an extension (px, %, pt, vh). Calculations must have white space around the + and - operators and cannot divide by zero.')//eslint-disable-line max-len\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-grid-size',\r\n            function (value, params, additionalParams) {\r\n                if (value < additionalParams.non_empty_column_count) {\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            },\r\n            $.mage.__('Grid size cannot be smaller than the current total amount of columns, minus any empty columns.')\r\n        );\r\n\r\n        validator.addRule(\r\n            'validate-max-grid-size',\r\n            function (value, params, additionalParams) {\r\n                if (value > additionalParams.max_grid_size) {\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            },\r\n            $.mage.__('Please enter a value less than or equal to the Maximum Column Grid Size configuration.')\r\n        );\r\n\r\n        validateObjectField(validator, 'validate-number');\r\n        validateObjectField(validator, 'less-than-equals-to');\r\n        validateObjectField(validator, 'greater-than-equals-to');\r\n\r\n        return validator;\r\n    };\r\n});\r\n","Magento_PageBuilder/js/form/element/visual-select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            noticeMessage: '',\r\n            listens: {\r\n                value: 'setNoticeMessage'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.observe('noticeMessage');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Parses incoming options, considers options with undefined value property\r\n         *     as caption\r\n         *\r\n         * @param  {Array} nodes\r\n         * @param {Object} captionValue\r\n         * @return {Object} captionValue\r\n         */\r\n        parseOptions: function (nodes, captionValue) {\r\n            var caption,\r\n                value;\r\n\r\n            nodes = _.map(nodes, function (node) {\r\n                value = node.value;\r\n\r\n                if ((value === null || value === captionValue) && _.isUndefined(caption)) {\r\n                    caption = node.label;\r\n                }\r\n\r\n                return node;\r\n            });\r\n\r\n            return {\r\n                options: _.compact(nodes),\r\n                caption: _.isString(caption) ? caption : false\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Recursively set to object item like value and item.value like key.\r\n         *\r\n         * @param {Array} data\r\n         * @param {Object} result\r\n         * @returns {Object}\r\n         */\r\n        indexOptions: function (data, result) {\r\n            var value;\r\n\r\n            result = result || {};\r\n\r\n            data.forEach(function (item) {\r\n                value = item.value;\r\n\r\n                if (Array.isArray(value)) {\r\n                    this.indexOptions(value, result);\r\n                } else {\r\n                    result[value] = item;\r\n                }\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Sets 'data' to 'options' observable array, if instance has\r\n         * 'customEntry' property set to true, calls 'setHidden' method\r\n         *  passing !options.length as a parameter\r\n         *\r\n         * @param {Array} data\r\n         * @returns {Object} Chainable\r\n         */\r\n        setOptions: function (data) {\r\n            var captionValue = this.captionValue || '',\r\n                result = this.parseOptions(data, captionValue),\r\n                isVisible;\r\n\r\n            this.indexedOptions = this.indexOptions(result.options);\r\n\r\n            this.options(result.options);\r\n\r\n            if (!this.caption()) {\r\n                this.caption(result.caption);\r\n            }\r\n\r\n            if (this.customEntry) {\r\n                isVisible = !!result.options.length;\r\n\r\n                this.setVisible(isVisible);\r\n                this.toggleInput(!isVisible);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set the notice message on value change\r\n         *\r\n         * @param {any} value\r\n         * @returns {exports}\r\n         */\r\n        setNoticeMessage: function (value) {\r\n            var noticeMessage = '',\r\n                selectedOption = _.find(this.options(), function (option) {\r\n                    return option.value === value;\r\n                });\r\n\r\n            if (selectedOption && typeof selectedOption.noticeMessage !== 'undefined') {\r\n                noticeMessage = selectedOption.noticeMessage;\r\n            }\r\n\r\n            this.noticeMessage(noticeMessage);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/element/wysiwyg.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/element/wysiwyg',\r\n    'mage/translate',\r\n    'Magento_PageBuilder/js/events',\r\n    'Magento_Ui/js/lib/view/utils/dom-observer',\r\n    'Magento_PageBuilder/js/page-builder',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function ($, _, Wysiwyg, $t, events, domObserver, PageBuilder) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Extend the original WYSIWYG with added PageBuilder functionality\r\n     */\r\n    return Wysiwyg.extend({\r\n        defaults: {\r\n            transition: false,\r\n            transitionOut: false,\r\n            elementSelector: '> textarea',\r\n            stageSelector: '.pagebuilder-stage-wrapper',\r\n            fieldsetSelector: 'fieldset.admin__fieldset',\r\n            overlaySelector: '.pagebuilder-wysiwyg-overlay',\r\n            overlayMouseover: false,\r\n            pageBuilder: false,\r\n            visiblePageBuilder: false,\r\n            isComponentInitialized: false,\r\n            wysiwygConfigData: {\r\n                isFullScreen: false\r\n            },\r\n            pageBuilderEditButtonText: $t('Edit with Page Builder'),\r\n            isWithinModal: false,\r\n            modal: false\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            if (!this.wysiwygConfigData()['pagebuilder_button'] ||\r\n                this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\r\n                this.initPageBuilder();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('isComponentInitialized visiblePageBuilder wysiwygConfigData loading transition ' +\r\n                    'transitionOut overlayMouseover');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handle button click, init the Page Builder application\r\n         */\r\n        pageBuilderEditButtonClick: function (context, event) {\r\n            this.determineIfWithinModal(event.currentTarget);\r\n            this.transition(false);\r\n\r\n            if (!this.isComponentInitialized()) {\r\n                this.disableDomObserver($(event.currentTarget).parent()[0]);\r\n            }\r\n\r\n            this.initPageBuilder();\r\n            this.toggleFullScreen();\r\n        },\r\n\r\n        /**\r\n         * Init Page Builder\r\n         */\r\n        initPageBuilder: function () {\r\n            if (!this.isComponentInitialized()) {\r\n                this.loading(true);\r\n                this.pageBuilder = new PageBuilder(\r\n                  this.wysiwygConfigData(),\r\n                  this.initialValue\r\n                );\r\n                events.trigger('pagebuilder:register', {\r\n                    ns: this.ns,\r\n                    instance: this.pageBuilder\r\n                });\r\n                this.initPageBuilderListeners();\r\n                this.isComponentInitialized(true);\r\n\r\n                // Disable the domObserver for the entire stage\r\n                $.async({\r\n                    component: this,\r\n                    selector: this.stageSelector\r\n                }, this.disableDomObserver.bind(this));\r\n\r\n                if (!this.wysiwygConfigData()['pagebuilder_button'] ||\r\n                    this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\r\n                    this.visiblePageBuilder(true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable the domObserver on the PageBuilder stage to improve performance\r\n         *\r\n         * @param {HTMLElement} node\r\n         */\r\n        disableDomObserver: function (node) {\r\n            this.determineIfWithinModal(node);\r\n            domObserver.disableNode(node);\r\n            domObserver.disableNode($(node).parents(this.fieldsetSelector)[0]);\r\n        },\r\n\r\n        /**\r\n         * Changes tabindex and content editable on stage elements\r\n         */\r\n        toggleFocusableElements: function () {\r\n            var pageBuilderSelector = '#' + this.pageBuilder.id,\r\n                editable = $(pageBuilderSelector).find('[contenteditable]:not(.mceNonEditable)'),\r\n                focusableSelector = ' :focusable:not(' + this.overlaySelector + ')',\r\n                mediaSelector = pageBuilderSelector + ' iframe,' + pageBuilderSelector + ' video',\r\n                tabIndexValue = this.pageBuilder.isFullScreen() ? '0' : '-1',\r\n                editableValue = this.pageBuilder.isFullScreen();\r\n\r\n            editable.attr('contenteditable', editableValue);\r\n            $(pageBuilderSelector + focusableSelector).attr('tabindex', tabIndexValue);\r\n            $(mediaSelector).attr('tabindex', tabIndexValue);\r\n        },\r\n\r\n        /**\r\n         * Determine if the current instance is within a modal\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        determineIfWithinModal: function (element) {\r\n            var modalInnerWrap = $(element).parents('.modal-inner-wrap');\r\n\r\n            // Determine if the Page Builder instance is within a modal\r\n            this.isWithinModal = modalInnerWrap.length === 1;\r\n\r\n            if (this.isWithinModal) {\r\n                this.modal = modalInnerWrap;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Press Enter key on Overlay\r\n         */\r\n        onOverlayKeyDown: function (context, event) {\r\n            if (event.which === 13 || event.keyCode === 13) {\r\n                this.pageBuilderEditButtonClick(context, event);\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Toggle Page Builder full screen mode\r\n         */\r\n        toggleFullScreen: function () {\r\n            events.trigger('stage:' + this.pageBuilder.id + ':toggleFullscreen', {\r\n                animate: !!this.wysiwygConfigData()['pagebuilder_content_snapshot']\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Init various listeners on the stage\r\n         */\r\n        initPageBuilderListeners: function () {\r\n            var id = this.pageBuilder.id,\r\n                renderDeferred = $.Deferred(),\r\n                fullScreenDeferred = $.Deferred(),\r\n                rendered = false;\r\n\r\n            events.on('stage:' + id + ':readyAfter', function () {\r\n                this.loading(false);\r\n            }.bind(this));\r\n\r\n            events.on('stage:' + id + ':renderAfter', function () {\r\n                renderDeferred.resolve();\r\n                rendered = true;\r\n            });\r\n\r\n            events.on('stage:' + id + ':masterFormatRenderAfter', function (args) {\r\n                this.value(args.value);\r\n\r\n                if (this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\r\n                    this.toggleFocusableElements();\r\n                }\r\n            }.bind(this));\r\n\r\n            events.on('stage:' + id + ':fullScreenModeChangeAfter', function (args) {\r\n                if (!args.fullScreen) {\r\n                    if (this.isWithinModal && this.modal) {\r\n                        _.delay(function () {\r\n                            this.modal.css({\r\n                                transform: '',\r\n                                transition: ''\r\n                            });\r\n                        }.bind(this), 350);\r\n                    }\r\n\r\n                    if (this.wysiwygConfigData()['pagebuilder_button'] &&\r\n                        !this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\r\n                        // Force full screen mode whilst the animation occurs\r\n                        this.transitionOut(true);\r\n                        // Trigger animation out\r\n                        this.transition(false);\r\n\r\n                        // Reset the transition out class and hide the stage\r\n                        _.delay(function () {\r\n                            this.transitionOut(false);\r\n                            this.visiblePageBuilder(false);\r\n                        }.bind(this), 185);\r\n                    }\r\n                } else if (args.fullScreen) {\r\n                    if (this.isWithinModal && this.modal) {\r\n                        this.modal.css({\r\n                            transform: 'none',\r\n                            transition: 'none'\r\n                        });\r\n                    }\r\n\r\n                    if (this.wysiwygConfigData()['pagebuilder_button'] &&\r\n                        !this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\r\n                        this.visiblePageBuilder(true);\r\n\r\n                        fullScreenDeferred.resolve();\r\n\r\n                        /* eslint-disable max-depth */\r\n                        // If the stage has already rendered once we don't need to wait until animating the stage in\r\n                        if (rendered) {\r\n                            _.defer(function () {\r\n                                this.transition(true);\r\n                            }.bind(this));\r\n                        }\r\n                        /* eslint-enable max-depth */\r\n                    }\r\n                }\r\n\r\n                if (this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\r\n                    this.toggleFocusableElements();\r\n                }\r\n            }.bind(this));\r\n\r\n            // Wait until the stage is rendered and full screen mode is activated\r\n            $.when(renderDeferred, fullScreenDeferred).done(function () {\r\n                _.defer(function () {\r\n                    this.transition(true);\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            this.pageBuilder && this.pageBuilder.destroy();\r\n            this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/form/provider/conditions-data-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'mage/utils/objects',\r\n    'Magento_Rule/conditions-data-normalizer'\r\n], function (_, objectUtils, ConditionsDataNormalizer) {\r\n    'use strict';\r\n\r\n    var serializer = new ConditionsDataNormalizer();\r\n\r\n    return function (data, attribute) {\r\n        var pairs = {},\r\n            conditions = '';\r\n\r\n        /*\r\n         * The Condition Rule Tree is not a UI component and doesn't provide good data.\r\n         * The best solution is to implement the tree as a UI component that can provide good data but\r\n         * that is outside of the scope of the feature for now.\r\n         */\r\n        _.each(data, function (element, key) {\r\n            // parameters is hardcoded in the Magento\\Rule model that creates the HTML forms.\r\n            if (key.indexOf('parameters[' + attribute + ']') === 0) {\r\n                // Remove the bad, un-normalized data.\r\n                delete data[key];\r\n                pairs[key] = element;\r\n            }\r\n        });\r\n\r\n        /*\r\n         * The Combine Condition rule needs to have children,\r\n         * if does not have, we cannot parse the rule in the backend.\r\n         */\r\n        _.each(pairs, function (element, key) {\r\n            var keyIds = key.match(/[\\d?-]+/g),\r\n              combineElement = 'Magento\\\\CatalogWidget\\\\Model\\\\Rule\\\\Condition\\\\Combine',\r\n              nextPairsFirstKey = 'parameters[condition_source][NEXT_ITEM--1][type]',\r\n              nextPairsSecondKey = 'parameters[condition_source][NEXT_ITEM--2][type]';\r\n\r\n            if (keyIds !== null && element === combineElement) {\r\n                if (pairs[nextPairsFirstKey.replace('NEXT_ITEM', keyIds[0])] === undefined ||\r\n                    pairs[nextPairsFirstKey.replace('NEXT_ITEM', keyIds[0])] === combineElement &&\r\n                    pairs[nextPairsSecondKey.replace('NEXT_ITEM', keyIds[0])] === undefined) {\r\n                    pairs[key] = '';\r\n                }\r\n            }\r\n        });\r\n\r\n        /*\r\n         * Add pairs in case conditions source is not rules configurator\r\n         */\r\n        if (data['condition_option'] !== 'condition') {\r\n            pairs['parameters[' + attribute + '][1--1][operator]'] =\r\n                data[data['condition_option'] + '-condition_operator'] ?\r\n                data[data['condition_option'] + '-condition_operator'] :\r\n                '==';\r\n            pairs['parameters[' + attribute + '][1--1][type]'] =\r\n                'Magento\\\\CatalogWidget\\\\Model\\\\Rule\\\\Condition\\\\Product';\r\n            pairs['parameters[' + attribute + '][1][aggregator]'] = 'all';\r\n            pairs['parameters[' + attribute + '][1][new_child]'] = '';\r\n            pairs['parameters[' + attribute + '][1][type]'] = 'Magento\\\\CatalogWidget\\\\Model\\\\Rule\\\\Condition\\\\Combine';\r\n            pairs['parameters[' + attribute + '][1][value]'] = '1';\r\n            pairs['parameters[' + attribute + '][1--1][attribute]'] = data['condition_option'];\r\n            pairs['parameters[' + attribute + '][1--1][value]'] = _.isString(data[data['condition_option']]) ?\r\n                data[data['condition_option']].trim() :\r\n                '';\r\n        }\r\n\r\n        if (!_.isEmpty(pairs)) {\r\n            conditions = JSON.stringify(serializer.normalize(pairs).parameters[attribute]);\r\n            data['conditions_encoded'] = conditions;\r\n            objectUtils.nested(data, attribute, conditions);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/grid/cells/single-select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/multiselect',\r\n    'underscore'\r\n], function (Select, _) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            headerTmpl: 'ui/grid/columns/text',\r\n            bodyTmpl: 'Magento_PageBuilder/grid/cells/single-select',\r\n            label: '',\r\n            extendedSelections: [],\r\n            lastSelected: null,\r\n            listens: {\r\n                selected: 'onSelectedChange setExtendedSelections'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('extendedSelections lastSelected');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Getter for extended selections.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getExtendedSelections: function () {\r\n            return this.extendedSelections();\r\n        },\r\n\r\n        /**\r\n         * Setter for extended selections.\r\n         *\r\n         * @param {Array} selected\r\n         */\r\n        setExtendedSelections: function (selected) {\r\n            var item = {},\r\n                extended = [];\r\n\r\n            _.each(selected, function (id) {\r\n                item[this.indexField] = id;\r\n                extended.push(_.findWhere(this.rows(), item));\r\n            }, this);\r\n\r\n            this.set('extendedSelections', extended);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        isSelected: function (id, isIndex) {\r\n            id = this.getId(id, isIndex);\r\n\r\n            return this.selected()[0] === id;\r\n        },\r\n\r\n        /** @inheritdoc **/\r\n        select: function (id) {\r\n            this._super();\r\n            this.lastSelected(id);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _setSelection: function (id, isIndex, select) {\r\n            var selected = this.selected;\r\n\r\n            id = this.getId(id, isIndex);\r\n\r\n            if (!select && this.isSelected(id)) {\r\n                selected([]);\r\n            } else if (select) {\r\n                selected([id]);\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/grid/cells/template-apply.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/multiselect',\r\n    'Magento_PageBuilder/js/modal/dismissible-confirm',\r\n    'mage/translate'\r\n], function (Select, confirm, $t) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            headerTmpl: 'ui/grid/columns/text',\r\n            bodyTmpl: 'Magento_PageBuilder/grid/cells/template-apply',\r\n            label: '',\r\n            lastSelected: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('lastSelected');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        isSelected: function () {\r\n            return false;\r\n        },\r\n\r\n        /** @inheritdoc **/\r\n        select: function (id) {\r\n            var self = this,\r\n                superCall = this._super.bind(this);\r\n\r\n            self.lastSelected(null);\r\n\r\n            confirm({\r\n                title: $t('Apply Template'),\r\n                content: $t('Are you sure you want to apply this template? This will overwrite any existing content.'),\r\n                dismissKey: 'pagebuilder_template_apply_confirm',\r\n                dismissible: true,\r\n                actions: {\r\n                    /**\r\n                     * Confirm action\r\n                     */\r\n                    confirm: function () {\r\n                        superCall();\r\n                        self.lastSelected(id);\r\n                    }\r\n                },\r\n                buttons: [{\r\n                    text: $t('Cancel'),\r\n                    class: 'action-secondary action-dismiss action-pagebuilder-cancel',\r\n\r\n                    /**\r\n                     * Close modal and trigger 'cancel' action on click\r\n                     */\r\n                    click: function (event) {\r\n                        this.closeModal(event);\r\n                    }\r\n                }, {\r\n                    text: $t('Apply'),\r\n                    class: 'action-primary action-accept',\r\n\r\n                    /**\r\n                     * Close modal and trigger 'confirm' action on click\r\n                     */\r\n                    click: function (event) {\r\n                        superCall();\r\n                        self.lastSelected(id);\r\n                        this.closeModal(event);\r\n                    }\r\n                }]\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _setSelection: function () {\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/grid/columns/actions.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/actions'\r\n], function (Actions) {\r\n    'use strict';\r\n\r\n    return Actions.extend({\r\n        defaults: {\r\n        },\r\n\r\n        /**\r\n         * Callback after click on element.\r\n         *\r\n         * @public\r\n         */\r\n        applyAction: function () {\r\n            switch (this.type) {\r\n                case 'edit-user':\r\n                    $(this).userEdit(this.options)\r\n                        .trigger('editUser');\r\n                    break;\r\n\r\n                case 'delete-user':\r\n                    $(this).userDelete(this.options)\r\n                        .trigger('deleteUser');\r\n                    break;\r\n\r\n                case 'delete-role':\r\n                    $(this).roleDelete(this.options)\r\n                        .trigger('deleteRole');\r\n                    break;\r\n\r\n                default:\r\n                    return true;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/grid/columns/preview-image.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'jquery',\r\n    'mage/template',\r\n    'text!Magento_PageBuilder/template/grid/cells/preview-image/preview.html',\r\n    'underscore',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function (Column, $, mageTemplate, thumbnailPreviewTemplate, _) {\r\n    'use strict';\r\n\r\n    return Column.extend({\r\n        defaults: {\r\n            bodyTmpl: 'ui/grid/cells/thumbnail',\r\n            fieldClass: {\r\n                'data-grid-preview-image-cell': true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get image source data per row.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getSrc: function (row) {\r\n            return row[this.index + '_src'];\r\n        },\r\n\r\n        /**\r\n         * Retrieve the original images src to be displayed at full size in the modal\r\n         *\r\n         * @param {Object} row\r\n         * @returns {*}\r\n         */\r\n        getOrigSrc: function (row) {\r\n            return row[this.index + '_orig_src'];\r\n        },\r\n\r\n        /**\r\n         * Get alternative text data per row.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getAlt: function (row) {\r\n            return _.escape(row[this.index + '_alt']);\r\n        },\r\n\r\n        /**\r\n         * Check if preview available.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isPreviewAvailable: function () {\r\n            return this['has_preview'] || false;\r\n        },\r\n\r\n        /**\r\n         * Build preview.\r\n         *\r\n         * @param {Object} row\r\n         */\r\n        preview: function (row) {\r\n            var modalHtml = mageTemplate(\r\n                thumbnailPreviewTemplate,\r\n                {\r\n                    src: this.getOrigSrc(row),\r\n                    alt: this.getAlt(row)\r\n                }\r\n            ),\r\n                previewPopup = $('<div/>').html(modalHtml);\r\n\r\n            previewPopup.modal({\r\n                title: this.getAlt(row),\r\n                innerScroll: true,\r\n                modalClass: '_image-box',\r\n                buttons: []\r\n            }).trigger('openModal');\r\n        },\r\n\r\n        /**\r\n         * Get field handler per row.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Function}\r\n         */\r\n        getFieldHandler: function (row) {\r\n            if (this.isPreviewAvailable()) {\r\n                return this.preview.bind(this, row);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/mass-converter/background-images.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/image\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _image, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var BackgroundImages = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function BackgroundImages() {}\r\n\r\n    var _proto = BackgroundImages.prototype;\r\n\r\n    /**\r\n     * Process data after it's read and converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      var directive = (0, _object.get)(data, config.attribute_name);\r\n\r\n      if (directive) {\r\n        var images = JSON.parse(directive.replace(/\\\\(.)/mg, \"$1\")) || {};\r\n\r\n        if (!_underscore.isUndefined(images.desktop_image)) {\r\n          (0, _object.set)(data, config.desktop_image_variable, (0, _image.decodeUrl)(images.desktop_image));\r\n        }\r\n\r\n        if (!_underscore.isUndefined(images.mobile_image)) {\r\n          (0, _object.set)(data, config.mobile_image_variable, (0, _image.decodeUrl)(images.mobile_image));\r\n        }\r\n\r\n        delete data[config.attribute_name];\r\n      }\r\n\r\n      return data;\r\n    }\r\n    /**\r\n     * Process data before it's converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      var desktopImage = (0, _object.get)(data, config.desktop_image_variable);\r\n      var mobileImage = (0, _object.get)(data, config.mobile_image_variable);\r\n      var directiveData = {};\r\n\r\n      if (!_underscore.isUndefined(desktopImage) && desktopImage && !_underscore.isUndefined(desktopImage[0])) {\r\n        directiveData.desktop_image = (0, _image.urlToDirective)(desktopImage[0].url);\r\n      }\r\n\r\n      if (!_underscore.isUndefined(mobileImage) && mobileImage && !_underscore.isUndefined(mobileImage[0])) {\r\n        directiveData.mobile_image = (0, _image.urlToDirective)(mobileImage[0].url);\r\n      } // Add the directive data, ensuring we escape double quotes\r\n\r\n\r\n      (0, _object.set)(data, config.attribute_name, JSON.stringify(directiveData).replace(/[\\\\\"']/g, \"\\\\$&\").replace(/\\u0000/g, \"\\\\0\"));\r\n      return data;\r\n    };\r\n\r\n    return BackgroundImages;\r\n  }();\r\n\r\n  return BackgroundImages;\r\n});\r\n//# sourceMappingURL=background-images.js.map","Magento_PageBuilder/js/mass-converter/background-type.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var BackgroundType = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function BackgroundType() {}\r\n\r\n    var _proto = BackgroundType.prototype;\r\n\r\n    /**\r\n     * Process data after it's read and converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      return data;\r\n    }\r\n    /**\r\n     * Process data before it's converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      var backgroundType = (0, _object.get)(data, config.attribute_name);\r\n\r\n      if (backgroundType === \"video\") {\r\n        (0, _object.set)(data, config.desktop_image_variable, []);\r\n        (0, _object.set)(data, config.mobile_image_variable, []);\r\n      } else if (backgroundType === \"image\") {\r\n        (0, _object.set)(data, config.video_source_variable, null);\r\n        (0, _object.set)(data, config.video_fallback_image_variable, []);\r\n        (0, _object.set)(data, config.video_overlay_color_variable, \"\");\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    return BackgroundType;\r\n  }();\r\n\r\n  return BackgroundType;\r\n});\r\n//# sourceMappingURL=background-type.js.map","Magento_PageBuilder/js/mass-converter/converter-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=converter-interface.js.map","Magento_PageBuilder/js/mass-converter/converter-pool-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/mass-converter/converter-pool\"], function (_config, _loader, _converterPool) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create a new instance of converter pool\r\n   */\r\n  function create(contentType) {\r\n    var config = _config.getContentTypeConfig(contentType);\r\n\r\n    var converters = [];\r\n    var appearanceName;\r\n\r\n    for (var _i = 0, _Object$keys = Object.keys(config.appearances); _i < _Object$keys.length; _i++) {\r\n      appearanceName = _Object$keys[_i];\r\n      var appearance = config.appearances[appearanceName];\r\n\r\n      if (undefined !== appearance && undefined !== appearance.converters) {\r\n        for (var _iterator = _createForOfIteratorHelperLoose(appearance.converters), _step; !(_step = _iterator()).done;) {\r\n          var converterConfig = _step.value;\r\n\r\n          if (!!converterConfig.component && !_converterPool.get(converterConfig.component)) {\r\n            converters.push(converterConfig.component);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      (0, _loader)(converters, function () {\r\n        for (var _len = arguments.length, loadedConverters = new Array(_len), _key = 0; _key < _len; _key++) {\r\n          loadedConverters[_key] = arguments[_key];\r\n        }\r\n\r\n        for (var i = 0; i < converters.length; i++) {\r\n          _converterPool.register(converters[i], new loadedConverters[i]());\r\n        }\r\n\r\n        resolve(_converterPool);\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=converter-pool-factory.js.map","Magento_PageBuilder/js/mass-converter/converter-pool.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var DataConverterPool = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function DataConverterPool() {\r\n      this.converters = {};\r\n    }\r\n\r\n    var _proto = DataConverterPool.prototype;\r\n\r\n    /**\r\n     * Retrieve a data converter instance from the pool\r\n     *\r\n     * @param {string} name\r\n     * @returns {ConverterInterface}\r\n     */\r\n    _proto.get = function get(name) {\r\n      return this.converters[name] !== undefined ? this.converters[name] : null;\r\n    }\r\n    /**\r\n     * Register a new data converter into the pool\r\n     *\r\n     * @param {string} name\r\n     * @param {ConverterInterface} converter\r\n     */\r\n    ;\r\n\r\n    _proto.register = function register(name, converter) {\r\n      this.converters[name] = converter;\r\n    };\r\n\r\n    return DataConverterPool;\r\n  }();\r\n\r\n  var _default = new DataConverterPool();\r\n\r\n  return _default;\r\n});\r\n//# sourceMappingURL=converter-pool.js.map","Magento_PageBuilder/js/mass-converter/empty-mobile-image.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var EmptyMobileImage = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function EmptyMobileImage() {}\r\n\r\n    var _proto = EmptyMobileImage.prototype;\r\n\r\n    /**\r\n     * Process data after it's read and converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      var desktopImage = (0, _object.get)(data, config.desktop_image_variable);\r\n      var mobileImage = (0, _object.get)(data, config.mobile_image_variable);\r\n\r\n      if (mobileImage && desktopImage && mobileImage[0] !== undefined && desktopImage[0] !== undefined && mobileImage[0].url === desktopImage[0].url) {\r\n        delete data[config.mobile_image_variable];\r\n      }\r\n\r\n      return data;\r\n    }\r\n    /**\r\n     * Process data before it's converted by element converters\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {object} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      var mobileImage = (0, _object.get)(data, config.mobile_image_variable);\r\n\r\n      if (mobileImage === undefined || mobileImage[0] === undefined) {\r\n        (0, _object.set)(data, config.mobile_image_variable, (0, _object.get)(data, config.desktop_image_variable));\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    return EmptyMobileImage;\r\n  }();\r\n\r\n  return EmptyMobileImage;\r\n});\r\n//# sourceMappingURL=empty-mobile-image.js.map","Magento_PageBuilder/js/mass-converter/widget-directive-abstract.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var WidgetDirectiveAbstract = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function WidgetDirectiveAbstract() {}\r\n\r\n    var _proto = WidgetDirectiveAbstract.prototype;\r\n\r\n    /**\r\n     * Convert value to internal format\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {WidgetDirectiveAttributes}\r\n     */\r\n    _proto.fromDom = function fromDom(data, config) {\r\n      var _this = this;\r\n\r\n      var attributes = {};\r\n      (0, _object.get)(data, config.html_variable).replace(/\\{\\{widget([\\S\\s]*?)\\}\\}/i, function (match, attributeString) {\r\n        attributes = _this.parseAttributesString(attributeString);\r\n      }.bind(this));\r\n      return attributes;\r\n    }\r\n    /**\r\n     * Convert value to knockout format\r\n     *\r\n     * @param {ConverterDataInterface} data\r\n     * @param {ConverterConfigInterface} config\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.toDom = function toDom(data, config) {\r\n      (0, _object.set)(data, config.html_variable, this.buildDirective(data));\r\n      return data;\r\n    }\r\n    /**\r\n     * Build the directive string using the supplies attributes\r\n     *\r\n     * @param {object} attributes\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.buildDirective = function buildDirective(attributes) {\r\n      return \"{{widget \" + this.createAttributesString(attributes) + \"}}\";\r\n    }\r\n    /**\r\n     * @param {string} attributes\r\n     * @return {Object}\r\n     */\r\n    ;\r\n\r\n    _proto.parseAttributesString = function parseAttributesString(attributes) {\r\n      var result = {};\r\n      attributes.replace(/(\\w+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g, function (match, key, value) {\r\n        result[key] = value.replace(/&quote;/g, \"\\\"\");\r\n        return \"\";\r\n      });\r\n      return result;\r\n    }\r\n    /**\r\n     * @param {Object} attributes\r\n     * @return {string}\r\n     */\r\n    ;\r\n\r\n    _proto.createAttributesString = function createAttributesString(attributes) {\r\n      var result = \"\";\r\n\r\n      _underscore.each(attributes, function (value, name) {\r\n        result += name + \"=\\\"\" + String(value).replace(/\"/g, \"&quote;\") + \"\\\" \";\r\n      });\r\n\r\n      return result.substr(0, result.length - 1);\r\n    };\r\n\r\n    return WidgetDirectiveAbstract;\r\n  }();\r\n\r\n  return WidgetDirectiveAbstract;\r\n});\r\n//# sourceMappingURL=widget-directive-abstract.js.map","Magento_PageBuilder/js/master-format/filter-html.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\"], function (_jquery) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Filter the HTML output to only include necessary attributes & nodes\r\n   *\r\n   * @param {JQuery} element\r\n   * @returns {JQuery}\r\n   */\r\n  function filterHtml(element) {\r\n    var isWhiteSpaceOrComment = function isWhiteSpaceOrComment() {\r\n      return this.nodeType === Node.COMMENT_NODE || this.nodeType === Node.TEXT_NODE && this.data.match(/^\\s+$/);\r\n    };\r\n\r\n    element.find(\"[data-bind]\").each(function (index, value) {\r\n      (0, _jquery)(value).removeAttr(\"data-bind\");\r\n    });\r\n    element.contents().filter(isWhiteSpaceOrComment).remove();\r\n    element.find(\"*\").filter(function (index, descendentEl) {\r\n      // filter out elements that are iframes or have .bypass-html-filter ancestor\r\n      var isIframe = descendentEl.tagName === \"IFRAME\";\r\n      var isBeingBypassedByThisFilter = !!(0, _jquery)(descendentEl).closest(\".bypass-html-filter\").length;\r\n      return !isIframe && !isBeingBypassedByThisFilter;\r\n    }).each(function (index, descendentEl) {\r\n      (0, _jquery)(descendentEl).contents().filter(isWhiteSpaceOrComment).remove();\r\n    });\r\n    element.find(\"[data-wrapper]\").each(function (index, value) {\r\n      (0, _jquery)(value).parent().append((0, _jquery)(value).children());\r\n      (0, _jquery)(value).remove();\r\n    });\r\n    element.find(\".bypass-html-filter\").each(function (index, value) {\r\n      (0, _jquery)(value).removeClass(\"bypass-html-filter\").filter('[class=\"\"]').removeAttr(\"class\");\r\n    });\r\n    return element;\r\n  }\r\n\r\n  return filterHtml;\r\n});\r\n//# sourceMappingURL=filter-html.js.map","Magento_PageBuilder/js/master-format/read-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=read-interface.js.map","Magento_PageBuilder/js/master-format/render.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/master-format/render/serialize\"], function (_jquery, _config, _serialize) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var MasterFormatRenderer = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param stageId\r\n     */\r\n    function MasterFormatRenderer(stageId) {\r\n      this.ready = false;\r\n      this.readyDeferred = _jquery.Deferred();\r\n      this.stageId = stageId;\r\n    }\r\n    /**\r\n     * Render the root container into a string utilising our sandboxed iframe\r\n     *\r\n     * @param {ContentTypeCollection} rootContainer\r\n     * @returns {Promise<string>}\r\n     */\r\n\r\n\r\n    var _proto = MasterFormatRenderer.prototype;\r\n\r\n    _proto.applyBindings = function applyBindings(rootContainer) {\r\n      var _this = this;\r\n\r\n      return new Promise(function (resolve, reject) {\r\n        if (!_this.getRenderFrame()) {\r\n          // If the stage exists we should also have a frame\r\n          if (document.getElementById(_this.stageId)) {\r\n            return reject(\"No render frame present for Page Builder instance.\");\r\n          } // Otherwise the instance of Page Builder has been removed from the DOM and this is an old instance.\r\n\r\n\r\n          return reject();\r\n        }\r\n\r\n        if (_this.ready) {\r\n          _this.channel.port1.postMessage({\r\n            type: \"render\",\r\n            message: {\r\n              stageId: _this.stageId,\r\n              tree: (0, _serialize.getSerializedTree)(rootContainer)\r\n            }\r\n          });\r\n\r\n          _this.channel.port1.onmessage = function (event) {\r\n            if (event.isTrusted) {\r\n              if (event.data.type === \"render\") {\r\n                resolve(event.data.message);\r\n              }\r\n\r\n              if (event.data.type === \"template\") {\r\n                _this.loadTemplate(event.data.message);\r\n              }\r\n            } else {\r\n              reject(\"Render event was not trusted.\");\r\n            }\r\n          };\r\n        } else {\r\n          _this.readyDeferred.then(function () {\r\n            _this.applyBindings(rootContainer).then(function (rendered) {\r\n              resolve(rendered);\r\n            }).catch(function (error) {\r\n              reject(error);\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * Create a channel to communicate with our sandboxed iframe. Firstly add a listener to the current window and then\r\n     * set the src of the iframe. Listening for a specific message event with a predefined term and then hand over the\r\n     * MessageChannel port to allow communication between the main window and iframe.\r\n     */\r\n    ;\r\n\r\n    _proto.setupChannel = function setupChannel() {\r\n      var _this2 = this;\r\n\r\n      this.channel = new MessageChannel();\r\n      var frame = this.getRenderFrame();\r\n      window.addEventListener(\"message\", function (event) {\r\n        if (!_this2.ready && event.data.name === \"PB_RENDER_READY\" && _this2.stageId === event.data.stageId) {\r\n          frame.contentWindow.postMessage(\"PB_RENDER_PORT\", \"*\", [_this2.channel.port2]);\r\n          _this2.ready = true;\r\n\r\n          _this2.readyDeferred.resolve();\r\n        }\r\n      });\r\n      frame.src = _config.getConfig(\"render_url\") + \"?stageId=\" + this.stageId;\r\n    }\r\n    /**\r\n     * Use the text! RequireJS plugin to load a template and send it back to the child render iframe\r\n     *\r\n     * @param name\r\n     */\r\n    ;\r\n\r\n    _proto.loadTemplate = function loadTemplate(name) {\r\n      var _this3 = this;\r\n\r\n      require([\"text!\" + name], function (template) {\r\n        _this3.channel.port1.postMessage({\r\n          type: \"template\",\r\n          message: {\r\n            name: name,\r\n            template: template\r\n          }\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Retrieve the render frame\r\n     *\r\n     * @returns {HTMLIFrameElement}\r\n     */\r\n    ;\r\n\r\n    _proto.getRenderFrame = function getRenderFrame() {\r\n      return document.getElementById(\"render_frame_\" + this.stageId);\r\n    };\r\n\r\n    return MasterFormatRenderer;\r\n  }();\r\n\r\n  return MasterFormatRenderer;\r\n});\r\n//# sourceMappingURL=render.js.map","Magento_PageBuilder/js/master-format/validator.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\"], function (_config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Validate if content has page builder format by checking for any data-content-type attributes\r\n   *\r\n   * @param {string} content\r\n   * @returns {boolean}\r\n   */\r\n  function validate(content) {\r\n    var stageDocument = new DOMParser().parseFromString(content, \"text/html\");\r\n    return !!stageDocument.querySelector(\"[\" + _config.getConfig(\"dataContentTypeAttributeName\") + \"]\");\r\n  }\r\n\r\n  return validate;\r\n});\r\n//# sourceMappingURL=validator.js.map","Magento_PageBuilder/js/master-format/read/configurable.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"jquery\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/appearance-config\", \"Magento_PageBuilder/js/converter/converter-pool-factory\", \"Magento_PageBuilder/js/mass-converter/converter-pool-factory\", \"Magento_PageBuilder/js/property/property-reader-pool-factory\"], function (_jquery, _mageUtils, _underscore, _config, _appearanceConfig, _converterPoolFactory, _converterPoolFactory2, _propertyReaderPoolFactory) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Configurable = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Configurable() {}\r\n\r\n    var _proto = Configurable.prototype;\r\n\r\n    /**\r\n     * Read data from the dom based on configuration\r\n     *\r\n     * @param element HTMLElement\r\n     * @returns {Promise<any>}\r\n     */\r\n    _proto.read = function read(element) {\r\n      var _this = this;\r\n\r\n      var role = element.getAttribute(_config.getConfig(\"dataContentTypeAttributeName\"));\r\n      var config = (0, _appearanceConfig)(role, element.getAttribute(\"data-appearance\"));\r\n      var componentsPromise = [(0, _propertyReaderPoolFactory)(role), (0, _converterPoolFactory)(role), (0, _converterPoolFactory2)(role)];\r\n      return new Promise(function (resolve) {\r\n        Promise.all(componentsPromise).then(function (loadedComponents) {\r\n          var propertyReaderPool = loadedComponents[0],\r\n              converterPool = loadedComponents[1],\r\n              massConverterPool = loadedComponents[2];\r\n\r\n          var viewports = _config.getConfig(\"viewports\");\r\n\r\n          var data = {};\r\n\r\n          _underscore.each(viewports, function (viewport, name) {\r\n            return data[name] = {};\r\n          });\r\n\r\n          var _loop = function _loop() {\r\n            var elementName = _Object$keys[_i];\r\n            var elementConfig = config.elements[elementName];\r\n\r\n            var currentElement = _this.findElementByName(element, elementName); // If we cannot locate the current element skip trying to read any attributes from it\r\n\r\n\r\n            if (currentElement === null || currentElement === undefined) {\r\n              return \"continue\";\r\n            }\r\n\r\n            _underscore.each(viewports, function (viewportObj, viewport) {\r\n              currentElement.setAttribute(\"style\", currentElement.getAttribute(\"data-\" + viewport + \"-style\"));\r\n\r\n              if (elementConfig.style.length) {\r\n                data[viewport] = _this.readStyle(elementConfig.style, currentElement, data[viewport], propertyReaderPool, converterPool);\r\n              }\r\n\r\n              if (elementConfig.attributes.length) {\r\n                data[viewport] = _this.readAttributes(elementConfig.attributes, currentElement, data[viewport], propertyReaderPool, converterPool);\r\n              }\r\n\r\n              if (undefined !== elementConfig.html.var) {\r\n                data[viewport] = _this.readHtml(elementConfig, currentElement, data[viewport], converterPool);\r\n              }\r\n\r\n              if (undefined !== elementConfig.tag.var) {\r\n                data[viewport] = _this.readHtmlTag(elementConfig, currentElement, data[viewport]);\r\n              }\r\n\r\n              if (undefined !== elementConfig.css.var) {\r\n                data[viewport] = _this.readCss(elementConfig, currentElement, data[viewport]);\r\n              }\r\n            });\r\n          };\r\n\r\n          for (var _i = 0, _Object$keys = Object.keys(config.elements); _i < _Object$keys.length; _i++) {\r\n            var _ret = _loop();\r\n\r\n            if (_ret === \"continue\") continue;\r\n          }\r\n\r\n          _underscore.each(viewports, function (viewportObj, viewport) {\r\n            data[viewport] = _this.convertData(config, data[viewport], massConverterPool);\r\n          });\r\n\r\n          resolve(data);\r\n        }).catch(function (error) {\r\n          console.error(error);\r\n        });\r\n      });\r\n    }\r\n    /**\r\n     * Find the element for the current content type by it's name, avoiding searching in other content types by\r\n     * removing any other element which contains it's own data-content-type.\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @param {string} name\r\n     * @returns {HTMLElement}\r\n     */\r\n    ;\r\n\r\n    _proto.findElementByName = function findElementByName(element, name) {\r\n      // Create a clone of the element to avoid modifying the source\r\n      var currentElement = (0, _jquery)(element).clone();\r\n\r\n      if (currentElement.attr(\"data-element\") === name) {\r\n        return currentElement[0];\r\n      } // Attempt to find the element in the children of the data-content-type\r\n\r\n\r\n      var searchInChildren = currentElement.find(\"[data-element=\\\"\" + name + \"\\\"]\"); // Ensure the element is within the current content type\r\n\r\n      if (searchInChildren.length > 0 && searchInChildren.closest(\"[data-content-type]\")[0] === currentElement[0]) {\r\n        return searchInChildren[0];\r\n      }\r\n\r\n      return null;\r\n    }\r\n    /**\r\n     * Read attributes for element\r\n     *\r\n     * @param {DataMappingAttributesInterface[]} config\r\n     * @param {HTMLElement} element\r\n     * @param {object} data\r\n     * @param {typeof PropertyReaderPool} propertyReaderPool\r\n     * @param {typeof ConverterPool} converterPool\r\n     * @returns {any}\r\n     */\r\n    ;\r\n\r\n    _proto.readAttributes = function readAttributes(config, element, data, propertyReaderPool, converterPool) {\r\n      var result = {};\r\n\r\n      for (var _iterator = _createForOfIteratorHelperLoose(config), _step; !(_step = _iterator()).done;) {\r\n        var attributeConfig = _step.value;\r\n\r\n        if (\"write\" === attributeConfig.persistence_mode) {\r\n          continue;\r\n        }\r\n\r\n        var value = !!attributeConfig.static ? attributeConfig.value : propertyReaderPool.get(attributeConfig.reader).read(element, attributeConfig.name);\r\n\r\n        if (converterPool.get(attributeConfig.converter)) {\r\n          value = converterPool.get(attributeConfig.converter).fromDom(value);\r\n        }\r\n\r\n        if (_jquery.type(result[attributeConfig.var]) === \"object\") {\r\n          var _mageUtils$extend;\r\n\r\n          value = _mageUtils.extend((_mageUtils$extend = {}, _mageUtils$extend[attributeConfig.name] = value, _mageUtils$extend), result[attributeConfig.var]);\r\n        }\r\n\r\n        result[attributeConfig.var] = value;\r\n      }\r\n\r\n      return _underscore.extend(data, result);\r\n    }\r\n    /**\r\n     * Read style properties for element\r\n     *\r\n     * @param {DataMappingStyleInterface[]} config\r\n     * @param {HTMLElement} element\r\n     * @param {object} data\r\n     * @param {typeof PropertyReaderPool} propertyReaderPool\r\n     * @param {typeof ConverterPool} converterPool\r\n     * @returns {{[p: string]: string}}\r\n     */\r\n    ;\r\n\r\n    _proto.readStyle = function readStyle(config, element, data, propertyReaderPool, converterPool) {\r\n      var result = _underscore.extend({}, data);\r\n\r\n      for (var _iterator2 = _createForOfIteratorHelperLoose(config), _step2; !(_step2 = _iterator2()).done;) {\r\n        var propertyConfig = _step2.value;\r\n\r\n        if (\"write\" === propertyConfig.persistence_mode) {\r\n          continue;\r\n        }\r\n\r\n        var value = !!propertyConfig.static ? propertyConfig.value : propertyReaderPool.get(propertyConfig.reader).read(element, propertyConfig.name);\r\n\r\n        if (converterPool.get(propertyConfig.converter)) {\r\n          value = converterPool.get(propertyConfig.converter).fromDom(value);\r\n        }\r\n\r\n        if (_jquery.type(result[propertyConfig.var]) === \"object\") {\r\n          value = _mageUtils.extend(result[propertyConfig.var], value);\r\n        }\r\n\r\n        result[propertyConfig.var] = value;\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Read element's tag\r\n     *\r\n     * @param {object} config\r\n     * @param {HTMLElement} element\r\n     * @param {object} data\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.readHtmlTag = function readHtmlTag(config, element, data) {\r\n      var result = {};\r\n      result[config.tag.var] = element.nodeName.toLowerCase();\r\n      return _underscore.extend(data, result);\r\n    }\r\n    /**\r\n     * Read element's css\r\n     *\r\n     * @param {ContentTypeConfigAppearanceElementInterface} config\r\n     * @param {HTMLElement} element\r\n     * @param {object} data\r\n     * @returns {any}\r\n     */\r\n    ;\r\n\r\n    _proto.readCss = function readCss(config, element, data) {\r\n      var result = {};\r\n      var css = element.getAttribute(\"class\") !== null ? element.getAttribute(\"class\") : \"\";\r\n\r\n      if (config.css !== undefined && config.css.filter !== undefined && config.css.filter.length) {\r\n        for (var _iterator3 = _createForOfIteratorHelperLoose(config.css.filter), _step3; !(_step3 = _iterator3()).done;) {\r\n          var filterClass = _step3.value;\r\n          css = css.replace(filterClass, \"\");\r\n        }\r\n      }\r\n\r\n      result[config.css.var] = css.replace(/\\s{2,}/g, \" \").trim();\r\n      return _underscore.extend(data, result);\r\n    }\r\n    /**\r\n     * Read element's content\r\n     *\r\n     * @param {ContentTypeConfigAppearanceElementInterface} config\r\n     * @param {HTMLElement} element\r\n     * @param {object} data\r\n     * @param {typeof ConverterPool} converterPool\r\n     * @returns {any}\r\n     */\r\n    ;\r\n\r\n    _proto.readHtml = function readHtml(config, element, data, converterPool) {\r\n      var result = {};\r\n      var value = element.innerHTML;\r\n\r\n      if (converterPool.get(config.html.converter)) {\r\n        value = converterPool.get(config.html.converter).fromDom(value);\r\n      }\r\n\r\n      result[config.html.var] = value;\r\n      return _underscore.extend(data, result);\r\n    }\r\n    /**\r\n     * Convert data after it's read for all elements\r\n     *\r\n     * @param config\r\n     * @param {object} data\r\n     * @param {typeof MassConverterPool} massConverterPool\r\n     * @returns {object}\r\n     */\r\n    ;\r\n\r\n    _proto.convertData = function convertData(config, data, massConverterPool) {\r\n      for (var _iterator4 = _createForOfIteratorHelperLoose(config.converters), _step4; !(_step4 = _iterator4()).done;) {\r\n        var converterConfig = _step4.value;\r\n\r\n        if (massConverterPool.get(converterConfig.component)) {\r\n          data = massConverterPool.get(converterConfig.component).fromDom(data, converterConfig.config);\r\n        }\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    return Configurable;\r\n  }();\r\n\r\n  return Configurable;\r\n});\r\n//# sourceMappingURL=configurable.js.map","Magento_PageBuilder/js/master-format/render/events.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * The frame does not need to create or observe events, however the app will naturally attempt to. So let's stop that!\r\n   */\r\n  var _default = {\r\n    on: function on() {\r\n      return this;\r\n    },\r\n    off: function off() {\r\n      return this;\r\n    },\r\n    trigger: function trigger() {\r\n      return this;\r\n    }\r\n  };\r\n  return _default;\r\n});\r\n//# sourceMappingURL=events.js.map","Magento_PageBuilder/js/master-format/render/frame.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"csso\", \"jquery\", \"knockout\", \"Magento_Ui/js/lib/knockout/template/engine\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/binding/master-style\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type/style-registry\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/master-format/filter-html\"], function (_csso, _jquery, _knockout, _engine, _mageUtils, _underscore, _masterStyle, _config, _contentTypeFactory, _styleRegistry, _directives, _filterHtml) {\r\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\r\n\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var port = null;\r\n\r\n  var portDeferred = _jquery.Deferred();\r\n\r\n  var deferredTemplates = {};\r\n  var lastRenderId;\r\n  /**\r\n   * Debounce the render call, so we don't render until the final request\r\n   */\r\n\r\n  var debounceRender = _underscore.debounce(function (message, renderId) {\r\n    render(message, renderId).then(function (output) {\r\n      // Only post the most recent render back to the parent\r\n      if (lastRenderId === renderId) {\r\n        port.postMessage({\r\n          type: \"render\",\r\n          message: output\r\n        });\r\n      }\r\n    });\r\n  }, 50);\r\n  /**\r\n   * Listen for requests from the parent window for a render\r\n   */\r\n\r\n\r\n  function listen(config) {\r\n    var stageId = window.location.href.split(\"?\")[1].split(\"=\")[1];\r\n\r\n    _config.setConfig(config);\r\n\r\n    _config.setMode(\"Master\"); // Override assign with extend to prevent deep object overriding.\r\n\r\n\r\n    Object.assign = _mageUtils.extend;\r\n    /**\r\n     * Create a listener within our iframe so we can observe messages from the parent, once we receive a port on the\r\n     * MessageChannel we utilise that for all communication.\r\n     */\r\n\r\n    window.addEventListener(\"message\", function (event) {\r\n      if (event.ports && event.ports.length) {\r\n        port = event.ports[0];\r\n        portDeferred.resolve(port);\r\n\r\n        port.onmessage = function (messageEvent) {\r\n          if (messageEvent.data.type === \"render\") {\r\n            var renderId = _mageUtils.uniqueid();\r\n\r\n            lastRenderId = renderId;\r\n            debounceRender(messageEvent.data.message, renderId);\r\n          }\r\n\r\n          if (messageEvent.data.type === \"template\") {\r\n            var message = messageEvent.data.message;\r\n\r\n            if (message.name in deferredTemplates) {\r\n              deferredTemplates[message.name].resolve(message.template);\r\n              delete deferredTemplates[message.name];\r\n            }\r\n          }\r\n        };\r\n      }\r\n    }, false); // Inform the parent iframe that we're ready to receive the port\r\n\r\n    window.parent.postMessage({\r\n      name: \"PB_RENDER_READY\",\r\n      stageId: stageId\r\n    }, \"*\");\r\n  }\r\n  /**\r\n   * Use our MessageChannel to load a template from the parent window, this is required as the iframe isn't allowed to\r\n   * make same origin XHR requests.\r\n   *\r\n   * @param name\r\n   */\r\n\r\n\r\n  function loadTemplate(name) {\r\n    return new Promise(function (resolve) {\r\n      if (!(name in deferredTemplates)) {\r\n        deferredTemplates[name] = _jquery.Deferred();\r\n      }\r\n\r\n      deferredTemplates[name].then(function (template) {\r\n        resolve(template);\r\n      });\r\n\r\n      if (port) {\r\n        port.postMessage({\r\n          type: \"template\",\r\n          message: name\r\n        });\r\n      } else {\r\n        portDeferred.then(function (messagePort) {\r\n          messagePort.postMessage({\r\n            type: \"template\",\r\n            message: name\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Assert if the render has finished\r\n   */\r\n\r\n\r\n  var assertRenderFinished = _underscore.debounce(function (element, expectedCount, callback) {\r\n    if (element.querySelectorAll(\"[data-content-type]\").length === expectedCount) {\r\n      callback();\r\n    }\r\n  }, 50);\r\n  /**\r\n   * Iterate over the root container and count all content types\r\n   *\r\n   * @param rootContainer\r\n   * @param count\r\n   */\r\n\r\n\r\n  function countContentTypes(rootContainer, count) {\r\n    count = count || 0;\r\n    rootContainer.getChildren()().forEach(function (child) {\r\n      ++count;\r\n\r\n      if (typeof child.getChildren !== \"undefined\" && child.getChildren()().length > 0) {\r\n        count = countContentTypes(child, count);\r\n      }\r\n    });\r\n    return count;\r\n  }\r\n  /**\r\n   * Perform a render of the provided data\r\n   *\r\n   * @param message\r\n   * @param renderId\r\n   */\r\n\r\n\r\n  function render(message, renderId) {\r\n    var styleRegistries = {};\r\n\r\n    _underscore.each(_config.getConfig(\"viewports\"), function (viewport, name) {\r\n      styleRegistries[name] = new _styleRegistry(name + renderId);\r\n    });\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      createRenderTree(message.stageId, message.tree).then(function (rootContainer) {\r\n        var element = document.createElement(\"div\");\r\n        /**\r\n         * Setup an event on the element to observe changes and count the expected amount of content types are\r\n         * present within the content.\r\n         */\r\n\r\n        var renderFinished = _jquery.Deferred();\r\n\r\n        var observer = new MutationObserver(function () {\r\n          assertRenderFinished(element, countContentTypes(rootContainer), renderFinished.resolve);\r\n        });\r\n        observer.observe(element, {\r\n          attributes: true,\r\n          childList: true,\r\n          subtree: true\r\n        }); // Combine this event with our engine waitForRenderFinish to ensure rendering is completed\r\n\r\n        _jquery.when(_engine.waitForFinishRender(), renderFinished).then(function () {\r\n          observer.disconnect();\r\n\r\n          _knockout.cleanNode(element);\r\n\r\n          var styles = generateMasterCssForViewports(styleRegistries);\r\n\r\n          if (styles) {\r\n            (0, _jquery)(element).append((0, _jquery)(\"<style/>\").html(styles));\r\n          }\r\n\r\n          _underscore.each(styleRegistries, function (value, name) {\r\n            return (0, _styleRegistry.deleteStyleRegistry)(name + renderId);\r\n          });\r\n\r\n          var filtered = (0, _filterHtml)((0, _jquery)(element));\r\n          var output = (0, _directives.replaceWithSrc)((0, _directives)(filtered.html()));\r\n          resolve(output);\r\n        });\r\n\r\n        _knockout.applyBindingsToNode(element, {\r\n          template: {\r\n            data: rootContainer.content,\r\n            name: rootContainer.content.template\r\n          }\r\n        }, {\r\n          id: renderId\r\n        });\r\n      }).catch(function (error) {\r\n        reject(error);\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * Rebuild the content type tree using their original data and configuration\r\n   *\r\n   * @param stageId\r\n   * @param tree\r\n   * @param parent\r\n   */\r\n\r\n\r\n  function createRenderTree(stageId, tree, parent) {\r\n    if (parent === void 0) {\r\n      parent = null;\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      (0, _contentTypeFactory)(_config.getContentTypeConfig(tree.name), parent, stageId, tree.data, parent !== null ? tree.children.length : 0, tree.viewportsData).then(function (contentType) {\r\n        // Ensure  we retain the original tree ID's\r\n        contentType.id = tree.id;\r\n\r\n        if (tree.children.length > 0) {\r\n          var childPromises = [];\r\n          tree.children.forEach(function (child) {\r\n            childPromises.push(createRenderTree(stageId, child, contentType));\r\n          });\r\n          Promise.all(childPromises).then(function (children) {\r\n            children.forEach(function (child) {\r\n              contentType.addChild(child);\r\n            });\r\n            resolve(contentType);\r\n          });\r\n        } else {\r\n          resolve(contentType);\r\n        }\r\n      }).catch(function (error) {\r\n        reject(error);\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * Generate the master format CSS\r\n   *\r\n   * @param registry\r\n   */\r\n\r\n\r\n  function generateMasterCss(registry) {\r\n    var scopes = Object.keys(registry.getAllStyles()).map(function (selector) {\r\n      return [selector];\r\n    });\r\n    return _csso.minify((0, _styleRegistry.generateCss)(registry.getAllStyles()), {\r\n      usage: {\r\n        scopes: scopes\r\n      }\r\n    }).css;\r\n  }\r\n\r\n  function generateMasterCssForViewports(registries) {\r\n    var result = \"\";\r\n\r\n    _underscore.each(registries, function (registry, name) {\r\n      var css = generateMasterCss(registry);\r\n\r\n      var media = _config.getConfig(\"viewports\")[name].media;\r\n\r\n      if (media && css) {\r\n        result += \"@media \" + media + \" { \" + css + \" }\";\r\n      } else {\r\n        result += css;\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  return Object.assign(listen, {\r\n    loadTemplate: loadTemplate\r\n  });\r\n});\r\n//# sourceMappingURL=frame.js.map","Magento_PageBuilder/js/master-format/render/serialize.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-collection\"], function (_config, _contentTypeCollection) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Serialize the tree as a simplified object for rendering\r\n   *\r\n   * @param contentType\r\n   */\r\n  function buildTree(contentType) {\r\n    var data = getData(contentType);\r\n    var viewportsData = getViewportsData(contentType);\r\n    var tree = {\r\n      name: contentType.config.name,\r\n      id: contentType.id,\r\n      data: data,\r\n      children: [],\r\n      viewportsData: viewportsData\r\n    };\r\n\r\n    if (contentType instanceof _contentTypeCollection && contentType.getChildren()().length > 0) {\r\n      contentType.getChildren()().forEach(function (child) {\r\n        tree.children.push(buildTree(child));\r\n      });\r\n    }\r\n\r\n    return tree;\r\n  }\r\n  /**\r\n   * Get a serialized version of the tree\r\n   *\r\n   * @param contentType\r\n   */\r\n\r\n\r\n  function getSerializedTree(contentType) {\r\n    return buildTree(contentType);\r\n  }\r\n  /**\r\n   * Retrieve the master data from the content types instance\r\n   *\r\n   * @param contentType\r\n   */\r\n\r\n\r\n  function getData(contentType) {\r\n    /**\r\n     * Flip flop to JSON and back again to ensure all data is serializable. Magento by default adds functions into\r\n     * some basic types which cannot be serialized when calling PostMessage.\r\n     */\r\n    return JSON.parse(JSON.stringify(contentType.dataStores[_config.getConfig(\"defaultViewport\")].getState())) || {};\r\n  }\r\n  /**\r\n   * Retrieve the master data from the content types instance\r\n   *\r\n   * @param contentType\r\n   */\r\n\r\n\r\n  function getViewportsData(contentType) {\r\n    /**\r\n     * Flip flop to JSON and back again to ensure all data is serializable. Magento by default adds functions into\r\n     * some basic types which cannot be serialized when calling PostMessage.\r\n     */\r\n    var result = {};\r\n    Object.keys(contentType.dataStores).forEach(function (name) {\r\n      result[name] = JSON.parse(JSON.stringify(contentType.dataStores[name].getState())) || {};\r\n    });\r\n    return result;\r\n  }\r\n\r\n  return {\r\n    buildTree: buildTree,\r\n    getSerializedTree: getSerializedTree\r\n  };\r\n});\r\n//# sourceMappingURL=serialize.js.map","Magento_PageBuilder/js/master-format/render/requirejs/text.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"mage/requirejs/text\", \"Magento_PageBuilder/js/master-format/render/frame\"], function (_text, _frame) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Within our render frame we override the RequireJS text! plugin, this is originally implemented within\r\n   * lib/web/mage/requirejs/text.js. The override uses the MessageChannel to communicate with the parent frame to\r\n   * retrieve any requested HTML knockout template. We do this due to the sandbox restrictions on the iframe disallow\r\n   * XHR requests to the same origin domain.\r\n   */\r\n\r\n  /**\r\n   * Load a template\r\n   *\r\n   * @param name\r\n   * @param req\r\n   * @param onLoad\r\n   */\r\n  function load(name, req, onLoad) {\r\n    (0, _frame.loadTemplate)(name).then(function (template) {\r\n      onLoad(template);\r\n    }).catch(function (error) {\r\n      onLoad.error(error);\r\n    });\r\n  }\r\n  /**\r\n   * Retrieve a template\r\n   *\r\n   * @param url\r\n   * @param callback\r\n   * @param fail\r\n   * @param headers\r\n   */\r\n\r\n\r\n  function get(url, callback, fail, headers) {\r\n    _text.get.apply(_text, arguments);\r\n  }\r\n\r\n  return {\r\n    load: load,\r\n    get: get\r\n  };\r\n});\r\n//# sourceMappingURL=text.js.map","Magento_PageBuilder/js/modal/confirm-alert.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery/z-index'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.confirmAlert', $.mage.alert, {\r\n        /**\r\n         * Fix issue with zIndex when removing the alert from the screen\r\n         * @private\r\n         */\r\n        _unsetActive: function () {\r\n            this._super();\r\n\r\n            if (this.overlay) {\r\n                this.overlay.zIndex('');\r\n            }\r\n        }\r\n    });\r\n\r\n    return function (config) {\r\n        return $('<div></div>').html(config.content).confirmAlert(config);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/modal/dismissible-confirm.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Extend the confirmation prompt to allow for an additional checkbox to be displayed. The checkbox enables the user to\r\n * dismiss subsequent prompts of the same type based on their dismissKey.\r\n *\r\n * Once a type is dismissed a cookie is set and all future instances of that prompt are bypassed. This cookie is\r\n * cleared once the user logs out and back in via an observer.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'text!Magento_PageBuilder/template/modal/dismissible-modal-content.html',\r\n    'mage/translate',\r\n    'Magento_Ui/js/modal/prompt',\r\n    'mage/cookies'\r\n], function ($, _, promptContentTmpl, $t) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Create buttons array for modal options\r\n     *\r\n     * @param {Boolean} haveCancelButton\r\n     * @return {Object}\r\n     */\r\n    function buttonsConfig(haveCancelButton) {\r\n        var cancelButton = {\r\n            text: $.mage.__('Cancel'),\r\n            class: 'action-secondary action-dismiss',\r\n\r\n            /**\r\n             * Click handler.\r\n             */\r\n            click: function () {\r\n                this.closeModal(false);\r\n            }\r\n        },\r\n            confirmButton = {\r\n            text: $.mage.__('OK'),\r\n            class: 'action-primary action-accept',\r\n\r\n            /**\r\n             * Click handler.\r\n             */\r\n            click: function () {\r\n                this.closeModal(true);\r\n            }\r\n        },\r\n            buttons = [];\r\n\r\n        if (haveCancelButton !== false) {\r\n            buttons.push(cancelButton);\r\n        }\r\n        buttons.push(confirmButton);\r\n\r\n        return buttons;\r\n    }\r\n\r\n    $.widget('mage.dismissibleConfirm', $.mage.prompt, {\r\n        options: {\r\n            promptContentTmpl: promptContentTmpl,\r\n            dismissible: false, // Can the modal be dismissed?\r\n            dismissKey: 'default', // The key we'll check to see if the modal has already been dismissed\r\n            dismissMessage: $t('Do not show this again'), // Message to display next to the dismiss checkbox\r\n            dismissCheckbox: '[name=\"modal-dnsa\"]' // Selector to retrieve dismiss checkbox\r\n        },\r\n\r\n        /**\r\n         * Open the modal window, if the modal has been dismissed, then run the confirm & always actions and don't\r\n         * don't open the modal\r\n         *\r\n         * @returns {*}\r\n         */\r\n        openModal: function () {\r\n            if ($.mage.cookies.get(this.options.dismissKey) === 'true') {\r\n                this.options.actions.confirm();\r\n\r\n                return this.options.actions.always(); // Always runs after confirm in confirm.js\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Close modal window.\r\n         *\r\n         * @param {Boolean} result\r\n         */\r\n        closeModal: function (result) {\r\n            this._super(result);\r\n\r\n            if (result && this._isDismissed()) {\r\n                $.mage.cookies.set(this.options.dismissKey, 'true', {});\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Is the dismissed checkbox checked?\r\n         *\r\n         * @private\r\n         */\r\n        _isDismissed: function () {\r\n            return this.modal.find(this.options.dismissCheckbox).is(':checked');\r\n        }\r\n    });\r\n\r\n    return function (config) {\r\n        config.buttons = buttonsConfig(config.haveCancelButton);\r\n        delete config.haveCancelButton;\r\n\r\n        return $('<div></div>').html(config.content).dismissibleConfirm(config);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/modal/modal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/modal/modal-component',\r\n    'Magento_PageBuilder/js/events'\r\n], function (ModalComponent, events) {\r\n    'use strict';\r\n\r\n    return ModalComponent.extend({\r\n        defaults: {\r\n            titlePrefix: '${ $.options.title }',\r\n            modules: {\r\n                insertForm: '${ $.insertFormProvider }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            events.on('form:renderAfter', function (params) {\r\n                this.openModal();\r\n                this.setTitle(this.titlePrefix + ' ' + params.title);\r\n                this.startListen(params.id);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Listen for from save.\r\n         *\r\n         * @param {String} id\r\n         */\r\n        startListen: function (id) {\r\n            events.on('form:' + id + ':saveAfter', function () {\r\n                this.closeModal();\r\n            }.bind(this));\r\n\r\n        },\r\n\r\n        /**\r\n         * Trigger modalClosed event on external provider\r\n         *\r\n         * @returns {any}\r\n         */\r\n        closeModal: function () {\r\n            this.insertForm() &&\r\n            this.insertForm().externalSource() &&\r\n            this.insertForm().externalSource().trigger('data.modalClosed');\r\n\r\n            return this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/modal/template-manager-modal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal-component',\r\n    'Magento_PageBuilder/js/events',\r\n    'underscore',\r\n    'Magento_PageBuilder/js/stage-builder'\r\n], function ($, ModalComponent, events, _, stageBuilder) {\r\n    'use strict';\r\n\r\n    return ModalComponent.extend({\r\n        defaults: {\r\n            stage: null,\r\n            modules: {\r\n                messageContainer: '${ $.messageContainerProvider }',\r\n                listing: '${ $.listingProvider }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            _.bindAll(this, 'closeModal');\r\n\r\n            events.on('stage:templateManager:open', function (params) {\r\n                this.openModal();\r\n                this.stage = params.stage;\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Apply selected template\r\n         *\r\n         * @param {String} template\r\n         */\r\n        applySelected: function (template) {\r\n            if (template) {\r\n                // Destroy the old content in the stage\r\n                this.stage.pageBuilder.destroy();\r\n                $('body').trigger('processStart');\r\n\r\n                stageBuilder(this.stage, template).then(function () {\r\n                    $('body').trigger('processStop');\r\n                    this.closeModal();\r\n                }.bind(this));\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PageBuilder/js/modal/template-manager-save.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/translate',\r\n    'Magento_Ui/js/modal/prompt'\r\n], function ($, _, $t) {\r\n    'use strict';\r\n\r\n    $.widget('mage.templateManagerSave', $.mage.prompt, {\r\n        options: {\r\n            createdForField: '[data-role=\"createdForField\"]',\r\n            previewImage: '[data-role=\"preview-image\"]',\r\n            previewImageSpinner: '[data-role=\"preview-image-spinner\"]',\r\n            saveButton: '[data-role=\"action\"].action-save',\r\n            form: 'form',\r\n            buttons: [{\r\n                text: $.mage.__('Cancel'),\r\n                class: 'action-secondary action-dismiss',\r\n\r\n                /**\r\n                 * Click handler.\r\n                 */\r\n                click: function () {\r\n                    this.closeModal();\r\n                }\r\n            }, {\r\n                text: $.mage.__('Save'),\r\n                class: 'action-primary action-save',\r\n\r\n                /**\r\n                 * Click handler.\r\n                 */\r\n                click: function () {\r\n                    this.submit();\r\n                }\r\n            }]\r\n        },\r\n\r\n        /**\r\n         * Create widget\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._super();\r\n\r\n            this.modal.find(this.options.saveButton).prop('disabled', 'disabled');\r\n            // Ensure if the form is submitted through hitting enter we handle it correctly\r\n            this.modal.find(this.options.form).on('submit', function (event) {\r\n                event.preventDefault();\r\n                this.submit();\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Validate prompt contains a template name\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            return this.modal.find(this.options.promptField) &&\r\n                !_.isEmpty(this.modal.find(this.options.promptField).val());\r\n        },\r\n\r\n        /**\r\n         * Save the values within the prompt\r\n         */\r\n        submit: function () {\r\n            var name,\r\n                createdFor;\r\n\r\n            if (this.options.validation && !this.validate()) {\r\n                return false;\r\n            }\r\n\r\n            $('body').trigger('processStart');\r\n\r\n            name = this.modal.find(this.options.promptField).val();\r\n            createdFor = this.modal.find(this.options.createdForField).val();\r\n\r\n            this.options.actions.confirm.call(this, name, createdFor).then(function () {\r\n                this.closeModal(true);\r\n                $('body').trigger('processStop');\r\n            }.bind(this)).catch(function () {\r\n                $('body').trigger('processStop');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set the preview image\r\n         *\r\n         * @param {String} image\r\n         */\r\n        setPreviewImage: function (image) {\r\n            var previewImage = this.modal.find(this.options.previewImage),\r\n                previewImageSpinner = this.modal.find(this.options.previewImageSpinner);\r\n\r\n            // Update the preview image within the modal\r\n            previewImageSpinner.hide();\r\n            previewImage.append(\r\n                $('<img />').prop('src', image).prop('alt', $t('Template Preview'))\r\n            ).show();\r\n\r\n            // Enable the button so the user can save\r\n            this.modal.find(this.options.saveButton).prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Close modal window\r\n         */\r\n        closeModal: function (saved) {\r\n            if (!saved) {\r\n                this.options.actions.cancel.call(this, saved);\r\n            }\r\n\r\n            this.options.actions.always();\r\n            this.element.on('promptclosed', _.bind(this._remove, this));\r\n\r\n            return this._super();\r\n        }\r\n    });\r\n\r\n    return function (config) {\r\n        return $('<div class=\"prompt-message\"></div>').html(config.content).templateManagerSave(config);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/panel/menu.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\"], function (_knockout) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var Menu = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Menu constructor\r\n     *\r\n     * @param id\r\n     * @param menu\r\n     * @param contentTypes\r\n     * @param stageId\r\n     */\r\n    function Menu(id, menu, contentTypes, stageId) {\r\n      if (contentTypes === void 0) {\r\n        contentTypes = [];\r\n      }\r\n\r\n      this.hidden = _knockout.observable(false);\r\n      this.id = _knockout.observable();\r\n      this.code = _knockout.observable(\"\");\r\n      this.label = _knockout.observable(\"\");\r\n      this.icon = _knockout.observable(\"\");\r\n      this.sort = _knockout.observable();\r\n      this.contentTypes = _knockout.observableArray([]);\r\n      this.active = _knockout.observable(false);\r\n      this.id(id);\r\n      this.code(menu.code);\r\n      this.label(menu.label);\r\n      this.icon(menu.icon);\r\n      this.sort(menu.sort);\r\n      this.contentTypes(contentTypes);\r\n      this.stageId = stageId;\r\n    }\r\n    /**\r\n     * Toggle the menu\r\n     */\r\n\r\n\r\n    var _proto = Menu.prototype;\r\n\r\n    _proto.toggle = function toggle() {\r\n      this.active(!this.active());\r\n    };\r\n\r\n    return Menu;\r\n  }();\r\n\r\n  return {\r\n    Menu: Menu\r\n  };\r\n});\r\n//# sourceMappingURL=menu.js.map","Magento_PageBuilder/js/panel/menu/content-type.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"knockout\", \"Magento_PageBuilder/js/drag-drop/matrix\"], function (_knockout, _matrix) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var ContentType = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {string} identifier\r\n     * @param {ContentTypeConfigInterface} config\r\n     * @param {string} stageId\r\n     */\r\n    function ContentType(identifier, config, stageId) {\r\n      this.droppable = true;\r\n      this.icon = _knockout.observable(\"\");\r\n      this.identifier = _knockout.observable(\"\");\r\n      this.label = _knockout.observable(\"\");\r\n      this.config = config;\r\n      this.identifier(identifier);\r\n      this.label(config.label);\r\n      this.icon(config.icon);\r\n      this.stageId = stageId;\r\n    }\r\n    /**\r\n     * Retrieve the config object\r\n     *\r\n     * @returns {ContentTypeConfigInterface}\r\n     */\r\n\r\n\r\n    var _proto = ContentType.prototype;\r\n\r\n    _proto.getConfig = function getConfig() {\r\n      return this.config;\r\n    }\r\n    /**\r\n     * Only connect to container sortable instances that the current content type is accepted into\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getDraggableOptions = function getDraggableOptions() {\r\n      return {\r\n        connectToSortable: (0, _matrix.getAllowedContainersClasses)(this.config.name, this.stageId)\r\n      };\r\n    };\r\n\r\n    return ContentType;\r\n  }();\r\n\r\n  return {\r\n    ContentType: ContentType\r\n  };\r\n});\r\n//# sourceMappingURL=content-type.js.map","Magento_PageBuilder/js/property/attribute-reader.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var AttributeReader = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function AttributeReader() {}\r\n\r\n    var _proto = AttributeReader.prototype;\r\n\r\n    /**\r\n     * Read attribute from element\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @param {string} source\r\n     * @returns {string | object}\r\n     */\r\n    _proto.read = function read(element, source) {\r\n      return element.getAttribute(source);\r\n    };\r\n\r\n    return AttributeReader;\r\n  }();\r\n\r\n  return AttributeReader;\r\n});\r\n//# sourceMappingURL=attribute-reader.js.map","Magento_PageBuilder/js/property/link.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Link = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Link() {\r\n      this.regexpByLinkType = {\r\n        category: new RegExp(/id_path=['\"]category\\/(\\d+)/),\r\n        product: new RegExp(/id_path=['\"]product\\/(\\d+)/),\r\n        page: new RegExp(/page_id=['\"](\\d+)/)\r\n      };\r\n    }\r\n\r\n    var _proto = Link.prototype;\r\n\r\n    /**\r\n     * Read link from element\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @returns {string | object}\r\n     */\r\n    _proto.read = function read(element) {\r\n      var _ref;\r\n\r\n      var href = element.getAttribute(\"href\");\r\n      var attributeLinkType = element.getAttribute(\"data-link-type\");\r\n\r\n      if (typeof href === \"string\" && attributeLinkType !== \"default\") {\r\n        href = this.getIdFromWidgetSyntax(href, this.regexpByLinkType[attributeLinkType]);\r\n      }\r\n\r\n      return _ref = {}, _ref[attributeLinkType] = href, _ref.setting = element.getAttribute(\"target\") === \"_blank\", _ref.type = attributeLinkType, _ref;\r\n    }\r\n    /**\r\n     * Returns link value from widget string\r\n     *\r\n     * @param {string} href\r\n     * @param {RegExp} regexp\r\n     * @return {string}\r\n     */\r\n    ;\r\n\r\n    _proto.getIdFromWidgetSyntax = function getIdFromWidgetSyntax(href, regexp) {\r\n      var attributeIdMatches = href.match(regexp);\r\n\r\n      if (!attributeIdMatches) {\r\n        return href;\r\n      }\r\n\r\n      return attributeIdMatches[1];\r\n    };\r\n\r\n    return Link;\r\n  }();\r\n\r\n  return Link;\r\n});\r\n//# sourceMappingURL=link.js.map","Magento_PageBuilder/js/property/margins.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Margins = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Margins() {}\r\n\r\n    var _proto = Margins.prototype;\r\n\r\n    /**\r\n     * Read margins from element\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @returns {string | object}\r\n     */\r\n    _proto.read = function read(element) {\r\n      return {\r\n        margin: {\r\n          left: element.style.marginLeft,\r\n          top: element.style.marginTop,\r\n          right: element.style.marginRight,\r\n          bottom: element.style.marginBottom\r\n        }\r\n      };\r\n    };\r\n\r\n    return Margins;\r\n  }();\r\n\r\n  return Margins;\r\n});\r\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/property/paddings.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var Paddings = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function Paddings() {}\r\n\r\n    var _proto = Paddings.prototype;\r\n\r\n    /**\r\n     * Read paddings from element\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @returns {string | object}\r\n     */\r\n    _proto.read = function read(element) {\r\n      return {\r\n        padding: {\r\n          left: element.style.paddingLeft,\r\n          top: element.style.paddingTop,\r\n          right: element.style.paddingRight,\r\n          bottom: element.style.paddingBottom\r\n        }\r\n      };\r\n    };\r\n\r\n    return Paddings;\r\n  }();\r\n\r\n  return Paddings;\r\n});\r\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/property/property-reader-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=property-reader-interface.js.map","Magento_PageBuilder/js/property/property-reader-pool-factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/property/property-reader-pool\"], function (_config, _loader, _propertyReaderPool) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create a new instance of property reader pool\r\n   */\r\n  function create(contentType) {\r\n    var config = _config.getContentTypeConfig(contentType);\r\n\r\n    var propertyReaders = [];\r\n    var appearanceName;\r\n\r\n    for (var _i = 0, _Object$keys = Object.keys(config.appearances); _i < _Object$keys.length; _i++) {\r\n      appearanceName = _Object$keys[_i];\r\n      var appearance = config.appearances[appearanceName];\r\n\r\n      if (appearance !== undefined && appearance.elements !== undefined) {\r\n        var elementName = void 0;\r\n\r\n        for (var _i2 = 0, _Object$keys2 = Object.keys(appearance.elements); _i2 < _Object$keys2.length; _i2++) {\r\n          elementName = _Object$keys2[_i2];\r\n          var element = appearance.elements[elementName];\r\n\r\n          if (element.style !== undefined) {\r\n            for (var _iterator = _createForOfIteratorHelperLoose(element.style), _step; !(_step = _iterator()).done;) {\r\n              var propertyConfig = _step.value;\r\n\r\n              if (propertyConfig.reader && propertyReaders.indexOf(propertyConfig.reader) === -1 && !_propertyReaderPool.get(propertyConfig.reader)) {\r\n                propertyReaders.push(propertyConfig.reader);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (element.attributes !== undefined) {\r\n            for (var _iterator2 = _createForOfIteratorHelperLoose(element.attributes), _step2; !(_step2 = _iterator2()).done;) {\r\n              var attributeConfig = _step2.value;\r\n\r\n              if (attributeConfig.reader && propertyReaders.indexOf(attributeConfig.reader) === -1 && !_propertyReaderPool.get(attributeConfig.reader)) {\r\n                propertyReaders.push(attributeConfig.reader);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      (0, _loader)(propertyReaders, function () {\r\n        for (var _len = arguments.length, loadedPropertyReaders = new Array(_len), _key = 0; _key < _len; _key++) {\r\n          loadedPropertyReaders[_key] = arguments[_key];\r\n        }\r\n\r\n        for (var i = 0; i < propertyReaders.length; i++) {\r\n          _propertyReaderPool.register(propertyReaders[i], new loadedPropertyReaders[i]());\r\n        }\r\n\r\n        resolve(_propertyReaderPool);\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=property-reader-pool-factory.js.map","Magento_PageBuilder/js/property/property-reader-pool.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  var PropertyReaderPool = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function PropertyReaderPool() {\r\n      this.propertyReaders = {};\r\n    }\r\n\r\n    var _proto = PropertyReaderPool.prototype;\r\n\r\n    /**\r\n     * Retrieve a property reader from the pool\r\n     *\r\n     * @param {string} name\r\n     * @returns {PropertyReaderInterface}\r\n     */\r\n    _proto.get = function get(name) {\r\n      return this.propertyReaders[name] !== undefined ? this.propertyReaders[name] : null;\r\n    }\r\n    /**\r\n     * Register a new property reader into the pool\r\n     *\r\n     * @param {string} name\r\n     * @param {PropertyReaderInterface} property\r\n     */\r\n    ;\r\n\r\n    _proto.register = function register(name, property) {\r\n      this.propertyReaders[name] = property;\r\n    };\r\n\r\n    return PropertyReaderPool;\r\n  }();\r\n\r\n  var _default = new PropertyReaderPool();\r\n\r\n  return Object.assign(_default, {\r\n    PropertyReaderPool: PropertyReaderPool\r\n  });\r\n});\r\n//# sourceMappingURL=property-reader-pool.js.map","Magento_PageBuilder/js/property/style-property-reader.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/utils/string\"], function (_string) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @api\r\n   */\r\n  var StylePropertyReader = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    function StylePropertyReader() {}\r\n\r\n    var _proto = StylePropertyReader.prototype;\r\n\r\n    /**\r\n     * Read style property from element\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @param {string} source\r\n     * @returns {string | object}\r\n     */\r\n    _proto.read = function read(element, source) {\r\n      var camelCasedSource = (0, _string.fromSnakeToCamelCase)(source);\r\n      return element.style[camelCasedSource];\r\n    };\r\n\r\n    return StylePropertyReader;\r\n  }();\r\n\r\n  return StylePropertyReader;\r\n});\r\n//# sourceMappingURL=style-property-reader.js.map","Magento_PageBuilder/js/resource/object-path.js":"(function (root, factory){\r\n    'use strict';\r\n\r\n    /*istanbul ignore next:cant test*/\r\n    if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define([], factory);\r\n    } else {\r\n        // Browser globals\r\n        root.objectPath = factory();\r\n    }\r\n})(this, function(){\r\n    'use strict';\r\n\r\n    var toStr = Object.prototype.toString;\r\n    function hasOwnProperty(obj, prop) {\r\n        if(obj == null) {\r\n            return false\r\n        }\r\n        //to handle objects with null prototypes (too edge case?)\r\n        return Object.prototype.hasOwnProperty.call(obj, prop)\r\n    }\r\n\r\n    function isEmpty(value){\r\n        if (!value) {\r\n            return true;\r\n        }\r\n        if (isArray(value) && value.length === 0) {\r\n            return true;\r\n        } else if (typeof value !== 'string') {\r\n            for (var i in value) {\r\n                if (hasOwnProperty(value, i)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function toString(type){\r\n        return toStr.call(type);\r\n    }\r\n\r\n    function isObject(obj){\r\n        return typeof obj === 'object' && toString(obj) === \"[object Object]\";\r\n    }\r\n\r\n    var isArray = Array.isArray || function(obj){\r\n        /*istanbul ignore next:cant test*/\r\n        return toStr.call(obj) === '[object Array]';\r\n    }\r\n\r\n    function isBoolean(obj){\r\n        return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\r\n    }\r\n\r\n    function getKey(key){\r\n        var intKey = parseInt(key);\r\n        if (intKey.toString() === key) {\r\n            return intKey;\r\n        }\r\n        return key;\r\n    }\r\n\r\n    function factory(options) {\r\n        options = options || {}\r\n\r\n        var objectPath = function(obj) {\r\n            return Object.keys(objectPath).reduce(function(proxy, prop) {\r\n                if(prop === 'create') {\r\n                    return proxy;\r\n                }\r\n\r\n                /*istanbul ignore else*/\r\n                if (typeof objectPath[prop] === 'function') {\r\n                    proxy[prop] = objectPath[prop].bind(objectPath, obj);\r\n                }\r\n\r\n                return proxy;\r\n            }, {});\r\n        };\r\n\r\n        var hasShallowProperty\r\n        if (options.includeInheritedProps) {\r\n            hasShallowProperty = function () {\r\n                return true\r\n            }\r\n        } else {\r\n            hasShallowProperty = function (obj, prop) {\r\n                return (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop)\r\n            }\r\n        }\r\n\r\n        function getShallowProperty(obj, prop) {\r\n            if (hasShallowProperty(obj, prop)) {\r\n                return obj[prop];\r\n            }\r\n        }\r\n\r\n        function set(obj, path, value, doNotReplace){\r\n            if (typeof path === 'number') {\r\n                path = [path];\r\n            }\r\n            if (!path || path.length === 0) {\r\n                return obj;\r\n            }\r\n            if (typeof path === 'string') {\r\n                return set(obj, path.split('.').map(getKey), value, doNotReplace);\r\n            }\r\n            var currentPath = path[0];\r\n            var currentValue = getShallowProperty(obj, currentPath);\r\n            if (options.includeInheritedProps && (currentPath === '__proto__' ||\r\n                (currentPath === 'constructor' && typeof currentValue === 'function'))) {\r\n                throw new Error('For security reasons, object\\'s magic properties cannot be set')\r\n            }\r\n            if (path.length === 1) {\r\n                if (currentValue === void 0 || !doNotReplace) {\r\n                    obj[currentPath] = value;\r\n                }\r\n                return currentValue;\r\n            }\r\n\r\n            if (currentValue === void 0) {\r\n                //check if we assume an array\r\n                if(typeof path[1] === 'number') {\r\n                    obj[currentPath] = [];\r\n                } else {\r\n                    obj[currentPath] = {};\r\n                }\r\n            }\r\n\r\n            return set(obj[currentPath], path.slice(1), value, doNotReplace);\r\n        }\r\n\r\n        objectPath.has = function (obj, path) {\r\n            if (typeof path === 'number') {\r\n                path = [path];\r\n            } else if (typeof path === 'string') {\r\n                path = path.split('.');\r\n            }\r\n\r\n            if (!path || path.length === 0) {\r\n                return !!obj;\r\n            }\r\n\r\n            for (var i = 0; i < path.length; i++) {\r\n                var j = getKey(path[i]);\r\n\r\n                if((typeof j === 'number' && isArray(obj) && j < obj.length) ||\r\n                    (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\r\n                    obj = obj[j];\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        };\r\n\r\n        objectPath.ensureExists = function (obj, path, value){\r\n            return set(obj, path, value, true);\r\n        };\r\n\r\n        objectPath.set = function (obj, path, value, doNotReplace){\r\n            return set(obj, path, value, doNotReplace);\r\n        };\r\n\r\n        objectPath.insert = function (obj, path, value, at){\r\n            var arr = objectPath.get(obj, path);\r\n            at = ~~at;\r\n            if (!isArray(arr)) {\r\n                arr = [];\r\n                objectPath.set(obj, path, arr);\r\n            }\r\n            arr.splice(at, 0, value);\r\n        };\r\n\r\n        objectPath.empty = function(obj, path) {\r\n            if (isEmpty(path)) {\r\n                return void 0;\r\n            }\r\n            if (obj == null) {\r\n                return void 0;\r\n            }\r\n\r\n            var value, i;\r\n            if (!(value = objectPath.get(obj, path))) {\r\n                return void 0;\r\n            }\r\n\r\n            if (typeof value === 'string') {\r\n                return objectPath.set(obj, path, '');\r\n            } else if (isBoolean(value)) {\r\n                return objectPath.set(obj, path, false);\r\n            } else if (typeof value === 'number') {\r\n                return objectPath.set(obj, path, 0);\r\n            } else if (isArray(value)) {\r\n                value.length = 0;\r\n            } else if (isObject(value)) {\r\n                for (i in value) {\r\n                    if (hasShallowProperty(value, i)) {\r\n                        delete value[i];\r\n                    }\r\n                }\r\n            } else {\r\n                return objectPath.set(obj, path, null);\r\n            }\r\n        };\r\n\r\n        objectPath.push = function (obj, path /*, values */){\r\n            var arr = objectPath.get(obj, path);\r\n            if (!isArray(arr)) {\r\n                arr = [];\r\n                objectPath.set(obj, path, arr);\r\n            }\r\n\r\n            arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\r\n        };\r\n\r\n        objectPath.coalesce = function (obj, paths, defaultValue) {\r\n            var value;\r\n\r\n            for (var i = 0, len = paths.length; i < len; i++) {\r\n                if ((value = objectPath.get(obj, paths[i])) !== void 0) {\r\n                    return value;\r\n                }\r\n            }\r\n\r\n            return defaultValue;\r\n        };\r\n\r\n        objectPath.get = function (obj, path, defaultValue){\r\n            if (typeof path === 'number') {\r\n                path = [path];\r\n            }\r\n            if (!path || path.length === 0) {\r\n                return obj;\r\n            }\r\n            if (obj == null) {\r\n                return defaultValue;\r\n            }\r\n            if (typeof path === 'string') {\r\n                return objectPath.get(obj, path.split('.'), defaultValue);\r\n            }\r\n\r\n            var currentPath = getKey(path[0]);\r\n            var nextObj = getShallowProperty(obj, currentPath)\r\n            if (nextObj === void 0) {\r\n                return defaultValue;\r\n            }\r\n\r\n            if (path.length === 1) {\r\n                return nextObj;\r\n            }\r\n\r\n            return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\r\n        };\r\n\r\n        objectPath.del = function del(obj, path) {\r\n            if (typeof path === 'number') {\r\n                path = [path];\r\n            }\r\n\r\n            if (obj == null) {\r\n                return obj;\r\n            }\r\n\r\n            if (isEmpty(path)) {\r\n                return obj;\r\n            }\r\n            if(typeof path === 'string') {\r\n                return objectPath.del(obj, path.split('.'));\r\n            }\r\n\r\n            var currentPath = getKey(path[0]);\r\n            if (!hasShallowProperty(obj, currentPath)) {\r\n                return obj;\r\n            }\r\n\r\n            if(path.length === 1) {\r\n                if (isArray(obj)) {\r\n                    obj.splice(currentPath, 1);\r\n                } else {\r\n                    delete obj[currentPath];\r\n                }\r\n            } else {\r\n                return objectPath.del(obj[currentPath], path.slice(1));\r\n            }\r\n\r\n            return obj;\r\n        }\r\n\r\n        return objectPath;\r\n    }\r\n\r\n    var mod = factory();\r\n    mod.create = factory;\r\n    mod.withInheritedProps = factory({includeInheritedProps: true})\r\n    return mod;\r\n});"}
}});
