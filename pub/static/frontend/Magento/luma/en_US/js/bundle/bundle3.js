require.config({"config": {
        "jsbuild":{"Magento_Catalog/js/price-option-date.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'priceUtils',\r\n    'priceOptions',\r\n    'jquery-ui-modules/widget'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    var globalOptions = {\r\n            fromSelector: 'form',\r\n            dropdownsSelector: '[data-role=calendar-dropdown]'\r\n        },\r\n        optionHandler = {};\r\n\r\n    optionHandler.optionHandlers = {};\r\n\r\n    /**\r\n     * Custom handler for Date-with-Dropdowns option type.\r\n     * @param  {jQuery} siblings\r\n     * @return {Function} function that return object { optionHash : optionAdditionalPrice }\r\n     */\r\n    function onCalendarDropdownChange(siblings) {\r\n        return function (element, optionConfig) {\r\n            var changes = {},\r\n                optionId = utils.findOptionId(element),\r\n                overhead = optionConfig[optionId].prices,\r\n                isNeedToUpdate = true,\r\n                optionHash = 'price-option-calendar-' + optionId;\r\n\r\n            siblings.each(function (index, el) {\r\n                isNeedToUpdate = isNeedToUpdate && !!$(el).val();\r\n            });\r\n\r\n            overhead = isNeedToUpdate ? overhead : {};\r\n            changes[optionHash] = overhead;\r\n\r\n            return changes;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Returns number of days for special month and year\r\n     * @param  {Number} month\r\n     * @param  {Number} year\r\n     * @return {Number}\r\n     */\r\n    function getDaysInMonth(month, year) {\r\n        return new Date(year, month, 0).getDate();\r\n    }\r\n\r\n    /**\r\n     * Adjusts the number of days in the day option element based on which month or year\r\n     * is selected (changed). Adjusts the days to 28, 29, 30, or 31 typically.\r\n     * @param {jQuery} dropdowns\r\n     */\r\n    function onDateChange(dropdowns) {\r\n        var daysNodes,\r\n            curMonth, curYear, expectedDays,\r\n            options, needed,\r\n            month = dropdowns.filter('[data-calendar-role=month]'),\r\n            year = dropdowns.filter('[data-calendar-role=year]');\r\n\r\n        if (month.length && year.length) {\r\n            daysNodes = dropdowns.filter('[data-calendar-role=day]').find('option');\r\n\r\n            curMonth = month.val() || '01';\r\n            curYear = year.val() || '2000';\r\n            expectedDays = getDaysInMonth(curMonth, curYear);\r\n\r\n            if (daysNodes.length - 1 > expectedDays) { // remove unnecessary option nodes\r\n                daysNodes.each(function (i, e) {\r\n                    if (e.value > expectedDays) {\r\n                        $(e).remove();\r\n                    }\r\n                });\r\n            } else if (daysNodes.length - 1 < expectedDays) { // add missing option nodes\r\n                options = [];\r\n                needed = expectedDays - daysNodes.length + 1;\r\n\r\n                while (needed--) { //eslint-disable-line max-depth\r\n                    options.push(\r\n                        '<option value=\"' + (expectedDays - needed) + '\">' + (expectedDays - needed) + '</option>'\r\n                    );\r\n                }\r\n                $(options.join('')).insertAfter(daysNodes.last());\r\n            }\r\n        }\r\n    }\r\n\r\n    $.widget('mage.priceOptionDate', {\r\n        options: globalOptions,\r\n\r\n        /**\r\n         * Function-initializer of priceOptionDate widget\r\n         * @private\r\n         */\r\n        _create: function initOptionDate() {\r\n            var field = this.element,\r\n                form = field.closest(this.options.fromSelector),\r\n                dropdowns = $(this.options.dropdownsSelector, field),\r\n                dateOptionId;\r\n\r\n            if (dropdowns.length) {\r\n                dateOptionId = this.options.dropdownsSelector + dropdowns.attr('name');\r\n\r\n                optionHandler.optionHandlers[dateOptionId] = onCalendarDropdownChange(dropdowns);\r\n\r\n                form.priceOptions(optionHandler);\r\n\r\n                dropdowns.data('role', dateOptionId);\r\n                dropdowns.on('change', onDateChange.bind(this, dropdowns));\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.priceOptionDate;\r\n});\r\n","Magento_Catalog/js/price-option-file.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.priceOptionFile', {\r\n        options: {\r\n            fileName: '',\r\n            fileNamed: '',\r\n            fieldNameAction: '',\r\n            changeFileSelector: '',\r\n            deleteFileSelector: ''\r\n        },\r\n\r\n        /**\r\n         * Creates instance of widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.fileDeleteFlag = this.fileChangeFlag = false;\r\n            this.inputField = this.element.find('input[name=' + this.options.fileName + ']')[0];\r\n            this.inputFieldAction = this.element.find('input[name=' + this.options.fieldNameAction + ']')[0];\r\n            this.fileNameSpan = this.element.parent('dd').find('.' + this.options.fileNamed);\r\n\r\n            $(this.options.changeFileSelector).on('click', $.proxy(function () {\r\n                this._toggleFileChange();\r\n            }, this));\r\n            $(this.options.deleteFileSelector).on('click', $.proxy(function () {\r\n                this._toggleFileDelete();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Toggles whether the current file is being changed or not. If the file is being deleted\r\n         * then the option to change the file is disabled.\r\n         * @private\r\n         */\r\n        _toggleFileChange: function () {\r\n            this.element.toggle();\r\n            this.fileChangeFlag = !this.fileChangeFlag;\r\n\r\n            if (!this.fileDeleteFlag) {\r\n                $(this.inputFieldAction).attr('value', this.fileChangeFlag ? 'save_new' : 'save_old');\r\n                this.inputField.disabled = !this.fileChangeFlag;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggles whether the file is to be deleted. When the file is being deleted, the name of\r\n         * the file is decorated with strike-through text and the option to change the file is\r\n         * disabled.\r\n         * @private\r\n         */\r\n        _toggleFileDelete: function () {\r\n            this.fileDeleteFlag = $(this.options.deleteFileSelector + ':checked').val();\r\n            $(this.inputFieldAction).attr('value',\r\n                this.fileDeleteFlag ? '' : this.fileChangeFlag ? 'save_new' : 'save_old');\r\n            this.inputField.disabled = this.fileDeleteFlag || !this.fileChangeFlag;\r\n            this.fileNameSpan.css('text-decoration', this.fileDeleteFlag ? 'line-through' : 'none');\r\n        }\r\n    });\r\n\r\n    return $.mage.priceOptionFile;\r\n});\r\n","Magento_Catalog/js/price-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'priceUtils',\r\n    'priceBox',\r\n    'jquery-ui-modules/widget'\r\n], function ($, _, mageTemplate, utils) {\r\n    'use strict';\r\n\r\n    var globalOptions = {\r\n        productId: null,\r\n        priceHolderSelector: '.price-box', //data-role=\"priceBox\"\r\n        optionsSelector: '.product-custom-option',\r\n        optionConfig: {},\r\n        optionHandlers: {},\r\n        optionTemplate: '<%= data.label %>' +\r\n        '<% if (data.finalPrice.value > 0) { %>' +\r\n        ' +<%- data.finalPrice.formatted %>' +\r\n        '<% } else if (data.finalPrice.value < 0) { %>' +\r\n        ' <%- data.finalPrice.formatted %>' +\r\n        '<% } %>',\r\n        controlContainer: 'dd'\r\n    };\r\n\r\n    /**\r\n     * Custom option preprocessor\r\n     * @param  {jQuery} element\r\n     * @param  {Object} optionsConfig - part of config\r\n     * @return {Object}\r\n     */\r\n    function defaultGetOptionValue(element, optionsConfig) {\r\n        var changes = {},\r\n            optionValue = element.val(),\r\n            optionId = utils.findOptionId(element[0]),\r\n            optionName = element.prop('name'),\r\n            optionType = element.prop('type'),\r\n            optionConfig = optionsConfig[optionId],\r\n            optionHash = optionName;\r\n\r\n        switch (optionType) {\r\n            case 'text':\r\n            case 'textarea':\r\n                changes[optionHash] = optionValue ? optionConfig.prices : {};\r\n                break;\r\n\r\n            case 'radio':\r\n                if (element.is(':checked')) {\r\n                    changes[optionHash] = optionConfig[optionValue] && optionConfig[optionValue].prices || {};\r\n                }\r\n                break;\r\n\r\n            case 'select-one':\r\n                changes[optionHash] = optionConfig[optionValue] && optionConfig[optionValue].prices || {};\r\n                break;\r\n\r\n            case 'select-multiple':\r\n                _.each(optionConfig, function (row, optionValueCode) {\r\n                    optionHash = optionName + '##' + optionValueCode;\r\n                    changes[optionHash] = _.contains(optionValue, optionValueCode) ? row.prices : {};\r\n                });\r\n                break;\r\n\r\n            case 'checkbox':\r\n                optionHash = optionName + '##' + optionValue;\r\n                changes[optionHash] = element.is(':checked') ? optionConfig[optionValue].prices : {};\r\n                break;\r\n\r\n            case 'file':\r\n                // Checking for 'disable' property equal to checking DOMNode with id*=\"change-\"\r\n                changes[optionHash] = optionValue || element.prop('disabled') ? optionConfig.prices : {};\r\n                break;\r\n        }\r\n\r\n        return changes;\r\n    }\r\n\r\n    $.widget('mage.priceOptions', {\r\n        options: globalOptions,\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function initPriceBundle() {\r\n            $(this.options.optionsSelector, this.element).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Widget creating method.\r\n         * Triggered once.\r\n         * @private\r\n         */\r\n        _create: function createPriceOptions() {\r\n            var form = this.element,\r\n                options = $(this.options.optionsSelector, form),\r\n                priceBox = $(this.options.priceHolderSelector, $(this.options.optionsSelector).element);\r\n\r\n            if (priceBox.data('magePriceBox') &&\r\n                priceBox.priceBox('option') &&\r\n                priceBox.priceBox('option').priceConfig\r\n            ) {\r\n                if (priceBox.priceBox('option').priceConfig.optionTemplate) {\r\n                    this._setOption('optionTemplate', priceBox.priceBox('option').priceConfig.optionTemplate);\r\n                }\r\n                this._setOption('priceFormat', priceBox.priceBox('option').priceConfig.priceFormat);\r\n            }\r\n\r\n            this._applyOptionNodeFix(options);\r\n\r\n            options.on('change', this._onOptionChanged.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Custom option change-event handler\r\n         * @param {Event} event\r\n         * @private\r\n         */\r\n        _onOptionChanged: function onOptionChanged(event) {\r\n            var changes,\r\n                option = $(event.target),\r\n                handler = this.options.optionHandlers[option.data('role')];\r\n\r\n            option.data('optionContainer', option.closest(this.options.controlContainer));\r\n\r\n            if (handler && handler instanceof Function) {\r\n                changes = handler(option, this.options.optionConfig, this);\r\n            } else {\r\n                changes = defaultGetOptionValue(option, this.options.optionConfig);\r\n            }\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', changes);\r\n        },\r\n\r\n        /**\r\n         * Helper to fix issue with option nodes:\r\n         *  - you can't place any html in option ->\r\n         *    so you can't style it via CSS\r\n         * @param {jQuery} options\r\n         * @private\r\n         */\r\n        _applyOptionNodeFix: function applyOptionNodeFix(options) {\r\n            var config = this.options,\r\n                format = config.priceFormat,\r\n                template = config.optionTemplate;\r\n\r\n            template = mageTemplate(template);\r\n            options.filter('select').each(function (index, element) {\r\n                var $element = $(element),\r\n                    optionId = utils.findOptionId($element),\r\n                    optionConfig = config.optionConfig && config.optionConfig[optionId];\r\n\r\n                $element.find('option').each(function (idx, option) {\r\n                    var $option,\r\n                        optionValue,\r\n                        toTemplate,\r\n                        prices;\r\n\r\n                    $option = $(option);\r\n                    optionValue = $option.val();\r\n\r\n                    if (!optionValue && optionValue !== 0) {\r\n                        return;\r\n                    }\r\n\r\n                    toTemplate = {\r\n                        data: {\r\n                            label: optionConfig[optionValue] && optionConfig[optionValue].name\r\n                        }\r\n                    };\r\n                    prices = optionConfig[optionValue] ? optionConfig[optionValue].prices : null;\r\n\r\n                    if (prices) {\r\n                        _.each(prices, function (price, type) {\r\n                            var value = +price.amount;\r\n\r\n                            value += _.reduce(price.adjustments, function (sum, x) { //eslint-disable-line\r\n                                return sum + x;\r\n                            }, 0);\r\n                            toTemplate.data[type] = {\r\n                                value: value,\r\n                                formatted: utils.formatPriceLocale(value, format)\r\n                            };\r\n                        });\r\n\r\n                        $option.text(template(toTemplate));\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Custom behavior on getting options:\r\n         * now widget able to deep merge accepted configuration with instance options.\r\n         * @param  {Object}  options\r\n         * @return {$.Widget}\r\n         * @private\r\n         */\r\n        _setOptions: function setOptions(options) {\r\n            $.extend(true, this.options, options);\r\n            this._super(options);\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n    return $.mage.priceOptions;\r\n});\r\n","Magento_Catalog/js/price-utils.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore'\r\n], function ($, _) {\r\n    'use strict';\r\n\r\n    var globalPriceFormat = {\r\n        requiredPrecision: 2,\r\n        integerRequired: 1,\r\n        decimalSymbol: ',',\r\n        groupSymbol: ',',\r\n        groupLength: ','\r\n    };\r\n\r\n    /**\r\n     * Repeats {string} {times} times\r\n     * @param  {String} string\r\n     * @param  {Number} times\r\n     * @return {String}\r\n     */\r\n    function stringPad(string, times) {\r\n        return new Array(times + 1).join(string);\r\n    }\r\n\r\n    /**\r\n     * Format the price with the compliance to the specified locale\r\n     *\r\n     * @param {Number} amount\r\n     * @param {Object} format\r\n     * @param  {Boolean} isShowSign\r\n     */\r\n    function formatPriceLocale(amount, format, isShowSign)\r\n    {\r\n        var s = '',\r\n            precision, pattern, locale, r;\r\n\r\n        format = _.extend(globalPriceFormat, format);\r\n        precision = isNaN(format.requiredPrecision = Math.abs(format.requiredPrecision)) ? 2 : format.requiredPrecision;\r\n        pattern = format.pattern || '%s';\r\n        locale = window.LOCALE || 'en-US';\r\n        if (isShowSign === undefined || isShowSign === true) {\r\n            s = amount < 0 ? '-' : isShowSign ? '+' : '';\r\n        } else if (isShowSign === false) {\r\n            s = '';\r\n        }\r\n        pattern = pattern.indexOf('{sign}') < 0 ? s + pattern : pattern.replace('{sign}', s);\r\n        amount = Number(Math.round(Math.abs(+amount || 0) + 'e+' + precision) + ('e-' + precision));\r\n        r = amount.toLocaleString(locale, {minimumFractionDigits: precision});\r\n\r\n        return pattern.replace('%s', r).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n    }\r\n\r\n    /**\r\n     * Formatter for price amount\r\n     * @param  {Number}  amount\r\n     * @param  {Object}  format\r\n     * @param  {Boolean} isShowSign\r\n     * @return {String}              Formatted value\r\n     * @deprecated\r\n     */\r\n    function formatPrice(amount, format, isShowSign) {\r\n        var s = '',\r\n            precision, integerRequired, decimalSymbol, groupSymbol, groupLength, pattern, i, pad, j, re, r, am;\r\n\r\n        format = _.extend(globalPriceFormat, format);\r\n\r\n        // copied from price-option.js | Could be refactored with varien/js.js\r\n\r\n        precision = isNaN(format.requiredPrecision = Math.abs(format.requiredPrecision)) ? 2 : format.requiredPrecision;\r\n        integerRequired = isNaN(format.integerRequired = Math.abs(format.integerRequired)) ? 1 : format.integerRequired;\r\n        decimalSymbol = format.decimalSymbol === undefined ? ',' : format.decimalSymbol;\r\n        groupSymbol = format.groupSymbol === undefined ? '.' : format.groupSymbol;\r\n        groupLength = format.groupLength === undefined ? 3 : format.groupLength;\r\n        pattern = format.pattern || '%s';\r\n\r\n        if (isShowSign === undefined || isShowSign === true) {\r\n            s = amount < 0 ? '-' : isShowSign ? '+' : '';\r\n        } else if (isShowSign === false) {\r\n            s = '';\r\n        }\r\n        pattern = pattern.indexOf('{sign}') < 0 ? s + pattern : pattern.replace('{sign}', s);\r\n\r\n        // we're avoiding the usage of to fixed, and using round instead with the e representation to address\r\n        // numbers like 1.005 = 1.01. Using ToFixed to only provide trailing zeroes in case we have a whole number\r\n        i = parseInt(\r\n                amount = Number(Math.round(Math.abs(+amount || 0) + 'e+' + precision) + ('e-' + precision)),\r\n                10\r\n            ) + '';\r\n        pad = i.length < integerRequired ? integerRequired - i.length : 0;\r\n\r\n        i = stringPad('0', pad) + i;\r\n\r\n        j = i.length > groupLength ? i.length % groupLength : 0;\r\n        re = new RegExp('(\\\\d{' + groupLength + '})(?=\\\\d)', 'g');\r\n\r\n        // replace(/-/, 0) is only for fixing Safari bug which appears\r\n        // when Math.abs(0).toFixed() executed on '0' number.\r\n        // Result is '0.-0' :(\r\n\r\n        am = Number(Math.round(Math.abs(amount - i) + 'e+' + precision) + ('e-' + precision));\r\n        r = (j ? i.substr(0, j) + groupSymbol : '') +\r\n            i.substr(j).replace(re, '$1' + groupSymbol) +\r\n            (precision ? decimalSymbol + am.toFixed(precision).replace(/-/, 0).slice(2) : '');\r\n\r\n        return pattern.replace('%s', r).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n    }\r\n\r\n    /**\r\n     * Deep clone of Object. Doesn't support functions\r\n     * @param {Object} obj\r\n     * @return {Object}\r\n     */\r\n    function objectDeepClone(obj) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    /**\r\n     * Helper to find ID in name attribute\r\n     * @param   {jQuery} element\r\n     * @returns {undefined|String}\r\n     */\r\n    function findOptionId(element) {\r\n        var re, id, name;\r\n\r\n        if (!element) {\r\n            return id;\r\n        }\r\n        name = $(element).attr('name');\r\n\r\n        if (name.indexOf('[') !== -1) {\r\n            re = /\\[([^\\]]+)?\\]/;\r\n        } else {\r\n            re = /_([^\\]]+)?_/; // just to support file-type-option\r\n        }\r\n        id = re.exec(name) && re.exec(name)[1];\r\n\r\n        if (id) {\r\n            return id;\r\n        }\r\n    }\r\n\r\n    return {\r\n        formatPriceLocale: formatPriceLocale,\r\n        formatPrice: formatPrice,\r\n        deepClone: objectDeepClone,\r\n        strPad: stringPad,\r\n        findOptionId: findOptionId\r\n    };\r\n});\r\n","Magento_Catalog/js/related-products.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.relatedProducts', {\r\n        options: {\r\n            relatedCheckbox: '.related-checkbox', // Class name for a related product's input checkbox.\r\n            relatedProductsCheckFlag: false, // Related products checkboxes are initially unchecked.\r\n            relatedProductsField: '#related-products-field', // Hidden input field that stores related products.\r\n            selectAllMessage: $.mage.__('select all'),\r\n            unselectAllMessage: $.mage.__('unselect all'),\r\n            selectAllLink: '[data-role=\"select-all\"]',\r\n            elementsSelector: '.item.product'\r\n        },\r\n\r\n        /**\r\n         * Bind events to the appropriate handlers.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            $(this.options.selectAllLink, this.element).on('click', $.proxy(this._selectAllRelated, this));\r\n            $(this.options.relatedCheckbox, this.element).on('click', $.proxy(this._addRelatedToProduct, this));\r\n\r\n            if (this.element.data('shuffle')) {\r\n                this._shuffle(this.element.find(this.options.elementsSelector));\r\n            }\r\n            this._showRelatedProducts(\r\n                this.element.find(this.options.elementsSelector),\r\n                this.element.data('limit'),\r\n                this.element.data('shuffle-weighted')\r\n            );\r\n        },\r\n\r\n        /**\r\n         * This method either checks all checkboxes for a product's set of related products (select all)\r\n         * or unchecks them (unselect all).\r\n         * @private\r\n         * @param {jQuery.Event} e - Click event on either the \"select all\" link or the \"unselect all\" link.\r\n         * @return {Boolean} - Prevent default event action and event propagation.\r\n         */\r\n        _selectAllRelated: function (e) {\r\n            var innerHTML = this.options.relatedProductsCheckFlag ?\r\n                this.options.selectAllMessage : this.options.unselectAllMessage;\r\n\r\n            $(e.target).html(innerHTML);\r\n            $(this.options.relatedCheckbox + ':visible').attr(\r\n                'checked',\r\n                this.options.relatedProductsCheckFlag = !this.options.relatedProductsCheckFlag\r\n            );\r\n            this._addRelatedToProduct();\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * This method iterates through each checkbox for all related products and collects only those products\r\n         * whose checkbox has been checked. The selected related products are stored in a hidden input field.\r\n         * @private\r\n         */\r\n        _addRelatedToProduct: function () {\r\n            $(this.options.relatedProductsField).val(\r\n                $(this.options.relatedCheckbox + ':checked').map(function () {\r\n                    return this.value;\r\n                }).get().join(',')\r\n            );\r\n        },\r\n\r\n        /* jscs:disable */\r\n        /* eslint-disable */\r\n        /**\r\n         * Show related products according to limit. Shuffle if needed.\r\n         * @param {*} elements\r\n         * @param {*} limit\r\n         * @param weightedRandom\r\n         * @private\r\n         */\r\n        _showRelatedProducts: function (elements, limit, weightedRandom) {\r\n            var index, weights = [], random = [], weight = 2, shown = 0, $element, currentGroup, prevGroup;\r\n\r\n            if (limit === 0) {\r\n                limit = elements.length;\r\n            }\r\n\r\n            if (weightedRandom && limit > 0 && limit < elements.length) {\r\n                for (index = 0; index < limit; index++) {\r\n                    $element = $(elements[index]);\r\n                    if ($element.data('shuffle-group') !== '') {\r\n                        break;\r\n                    }\r\n                    $element.show();\r\n                    shown++;\r\n                }\r\n                limit -= shown;\r\n                for (index = elements.length - 1; index >= 0; index--) {\r\n                    $element = $(elements[index]);\r\n                    currentGroup = $element.data('shuffle-group');\r\n                    if (currentGroup !== '') {\r\n                        weights.push([index, Math.log(weight)]);\r\n                        if (typeof prevGroup !== 'undefined' && prevGroup !== currentGroup) {\r\n                            weight += 2;\r\n                        }\r\n                        prevGroup = currentGroup;\r\n                    }\r\n                }\r\n\r\n                if (weights.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                for (index = 0; index < weights.length; index++) {\r\n                    random.push([weights[index][0], Math.pow(Math.random(), 1 / weights[index][1])]);\r\n                }\r\n\r\n                random.sort(function(a, b) {\r\n                    a = a[1];\r\n                    b = b[1];\r\n                    return a < b ? 1 : (a > b ? -1 : 0);\r\n                });\r\n                index = 0;\r\n                while (limit) {\r\n                    $(elements[random[index][0]]).show();\r\n                    limit--;\r\n                    index++\r\n                }\r\n                return;\r\n            }\r\n\r\n            for (index = 0; index < limit; index++) {\r\n                $(elements[index]).show();\r\n            }\r\n        },\r\n\r\n        /* jscs:disable */\r\n        /* eslint-disable */\r\n        /**\r\n         * Shuffle an array\r\n         * @param {Array} elements\r\n         * @returns {*}\r\n         */\r\n        _shuffle: function shuffle(elements) {\r\n            var parent, child, lastSibling;\r\n            if (elements.length) {\r\n                parent = $(elements[0]).parent();\r\n            }\r\n            while (elements.length) {\r\n                child = elements.splice(Math.floor(Math.random() *  elements.length), 1)[0];\r\n                lastSibling = parent.find('[data-shuffle-group=\"' + $(child).data('shuffle-group') + '\"]').last();\r\n                lastSibling.after(child);\r\n            }\r\n        }\r\n\r\n        /* jscs:disable */\r\n        /* eslint:disable */\r\n    });\r\n\r\n    return $.mage.relatedProducts;\r\n});\r\n","Magento_Catalog/js/storage-manager.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    'mageUtils',\r\n    'Magento_Catalog/js/product/storage/storage-service',\r\n    'Magento_Customer/js/section-config',\r\n    'jquery'\r\n], function (_, Element, utils, storage, sectionConfig, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Flush events, that are clones of the same customer data sections\r\n     * Events listener\r\n     */\r\n    $(document).on('submit', function (event) {\r\n        var sections;\r\n\r\n        if (event.target.method.match(/post|put|delete/i)) {\r\n            sections = sectionConfig.getAffectedSections(event.target.action);\r\n\r\n            if (sections && window.localStorage) {\r\n                _.each(sections, function (section) {\r\n                    window.localStorage.removeItem(section);\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            defaultNamespace: {\r\n                lifetime: 1000\r\n            },\r\n            storagesConfiguration: {\r\n                'recently_viewed_product': {\r\n                    namespace: 'recently_viewed_product',\r\n                    className: 'IdsStorage',\r\n                    lifetime: '${ $.defaultNamespace.lifetime }',\r\n                    requestConfig: {\r\n                        typeId: '${ $.storagesConfiguration.recently_viewed_product.namespace }'\r\n                    },\r\n                    savePrevious: {\r\n                        namespace: '${ $.storagesConfiguration.recently_viewed_product.namespace }' + '_previous',\r\n                        className: '${ $.storagesConfiguration.recently_viewed_product.className }'\r\n                    },\r\n                    allowToSendRequest: 0\r\n                },\r\n                'recently_compared_product': {\r\n                    namespace: 'recently_compared_product',\r\n                    className: 'IdsStorageCompare',\r\n                    provider: 'compare-products',\r\n                    lifetime: '${ $.defaultNamespace.lifetime }',\r\n                    requestConfig: {\r\n                        typeId: '${ $.storagesConfiguration.recently_compared_product.namespace }'\r\n                    },\r\n                    savePrevious: {\r\n                        namespace: '${ $.storagesConfiguration.recently_compared_product.namespace }' + '_previous',\r\n                        className: '${ $.storagesConfiguration.recently_compared_product.className }'\r\n                    },\r\n                    allowToSendRequest: 0\r\n                },\r\n                'product_data_storage': {\r\n                    namespace: 'product_data_storage',\r\n                    className: 'DataStorage',\r\n                    allowToSendRequest: 0,\r\n                    updateRequestConfig: {\r\n                        url: '',\r\n                        method: 'GET',\r\n                        dataType: 'json'\r\n                    }\r\n                }\r\n            },\r\n            requestConfig: {\r\n                method: 'POST',\r\n                dataType: 'json',\r\n                ajaxSaveType: 'default',\r\n                ignoreProcessEvents: true\r\n            },\r\n            requestSent: 0\r\n        },\r\n\r\n        /**\r\n         * Initializes provider component.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .prepareStoragesConfig()\r\n                .initStorages()\r\n                .initStartData()\r\n                .initUpdateStorageDataListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes storages.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initStorages: function () {\r\n            _.each(this.storagesNamespace, function (name) {\r\n                this[name] = storage.createStorage(this.storagesConfiguration[name]);\r\n\r\n                if (this.storagesConfiguration[name].savePrevious) {\r\n                    this[name].previous = storage.createStorage(this.storagesConfiguration[name].savePrevious);\r\n                }\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes start data.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initStartData: function () {\r\n            _.each(this.storagesNamespace, function (name) {\r\n                this.updateDataHandler(name, this[name].get());\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Prepare storages congfig.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        prepareStoragesConfig: function () {\r\n            this.storagesNamespace = _.keys(this.storagesConfiguration);\r\n\r\n            _.each(this.storagesNamespace, function (name) {\r\n                this.storagesConfiguration[name].requestConfig = _.extend(\r\n                    utils.copy(this.requestConfig),\r\n                    this.storagesConfiguration[name].requestConfig\r\n                );\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Prepare date in UTC format (in GMT), and calculate unix timestamp based in seconds\r\n         *\r\n         * @returns {Number}\r\n         * @private\r\n         */\r\n        getUtcTime: function () {\r\n            return new Date().getTime() / 1000;\r\n        },\r\n\r\n        /**\r\n         * Initializes listeners to storages \"data\" property.\r\n         */\r\n        initUpdateStorageDataListener: function () {\r\n            _.each(this.storagesNamespace, function (name) {\r\n                if (this[name].data) {\r\n                    this[name].data.subscribe(this.updateDataHandler.bind(this, name));\r\n                }\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Handlers for storages \"data\" property\r\n         */\r\n        updateDataHandler: function (name, data) {\r\n            var previousData = this[name].previous ? this[name].previous.get() : false;\r\n\r\n            if (!_.isEmpty(previousData) &&\r\n                !_.isEmpty(data) &&\r\n                !utils.compare(data, previousData).equal) {\r\n                this[name].set(data);\r\n                this[name].previous.set(data);\r\n                this.sendRequest(name, data);\r\n            } else if (\r\n                _.isEmpty(previousData) &&\r\n                !_.isEmpty(data)\r\n            ) {\r\n                this[name].set(data);\r\n                this.sendRequest(name, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gets last updated time\r\n         *\r\n         * @param {String} name - storage name\r\n         */\r\n        getLastUpdate: function (name) {\r\n            return window.localStorage.getItem(this[name].namespace + '_last_update');\r\n        },\r\n\r\n        /**\r\n         * Sets last updated time\r\n         *\r\n         * @param {String} name - storage name\r\n         */\r\n        setLastUpdate: function (name) {\r\n            window.localStorage.setItem(this[name].namespace + '_last_update', this.getUtcTime());\r\n        },\r\n\r\n        /**\r\n         * Request handler\r\n         *\r\n         * @param {String} name - storage name\r\n         */\r\n        requestHandler: function (name) {\r\n            this.setLastUpdate(name);\r\n            this.requestSent = 1;\r\n        },\r\n\r\n        /**\r\n         * Sends request to server to gets data\r\n         *\r\n         * @param {String} name - storage name\r\n         * @param {Object} data - ids\r\n         */\r\n        sendRequest: function (name, data) {\r\n            var params  = utils.copy(this.storagesConfiguration[name].requestConfig),\r\n                url = params.syncUrl,\r\n                typeId = params.typeId;\r\n\r\n            if (this.requestSent || !~~this.storagesConfiguration[name].allowToSendRequest) {\r\n                return;\r\n            }\r\n\r\n            delete params.typeId;\r\n            delete params.url;\r\n            this.requestSent = 1;\r\n\r\n            return utils.ajaxSubmit({\r\n                url: url,\r\n                data: {\r\n                    ids: data,\r\n                    'type_id': typeId\r\n                }\r\n            }, params).done(this.requestHandler.bind(this, name));\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/upsell-products.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.upsellProducts', {\r\n        options: {\r\n            elementsSelector: '.item.product'\r\n        },\r\n\r\n        /**\r\n         * Bind events to the appropriate handlers.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if (this.element.data('shuffle')) {\r\n                this._shuffle(this.element.find(this.options.elementsSelector));\r\n            }\r\n            this._showUpsellProducts(\r\n                this.element.find(this.options.elementsSelector),\r\n                this.element.data('limit'),\r\n                this.element.data('shuffle-weighted')\r\n            );\r\n        },\r\n\r\n        /* jscs:disable */\r\n        /* eslint-disable */\r\n        /**\r\n         * Show upsell products according to limit. Shuffle if needed.\r\n         * @param {*} elements\r\n         * @param {Number} limit\r\n         * @param {Boolean} weightedRandom\r\n         * @private\r\n         */\r\n        _showUpsellProducts: function (elements, limit, weightedRandom) {\r\n            var index, weights = [], random = [], weight = 2, shown = 0, $element, currentGroup, prevGroup;\r\n\r\n            if (limit === 0) {\r\n                limit = elements.length;\r\n            }\r\n\r\n            if (weightedRandom && limit > 0 && limit < elements.length) {\r\n                for (index = 0; index < limit; index++) {\r\n                    $element = $(elements[index]);\r\n                    if ($element.data('shuffle-group') !== '') {\r\n                        break;\r\n                    }\r\n                    $element.show();\r\n                    shown++;\r\n                }\r\n                limit -= shown;\r\n                for (index = elements.length - 1; index >= 0; index--) {\r\n                    $element = $(elements[index]);\r\n                    currentGroup = $element.data('shuffle-group');\r\n                    if (currentGroup !== '') {\r\n                        weights.push([index, Math.log(weight)]);\r\n                        if (typeof prevGroup !== 'undefined' && prevGroup !== currentGroup) {\r\n                            weight += 2;\r\n                        }\r\n                        prevGroup = currentGroup;\r\n                    }\r\n                }\r\n\r\n                if (weights.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                for (index = 0; index < weights.length; index++) {\r\n                    random.push([weights[index][0], Math.pow(Math.random(), 1 / weights[index][1])]);\r\n                }\r\n\r\n                random.sort(function(a, b) {\r\n                    a = a[1];\r\n                    b = b[1];\r\n                    return a < b ? 1 : (a > b ? -1 : 0);\r\n                });\r\n                index = 0;\r\n                while (limit) {\r\n                    $(elements[random[index][0]]).show();\r\n                    limit--;\r\n                    index++\r\n                }\r\n                return;\r\n            }\r\n\r\n            for (index = 0; index < limit; index++) {\r\n                $(elements[index]).show();\r\n            }\r\n        },\r\n\r\n        /* jscs:disable */\r\n        /* eslint-disable */\r\n        /**\r\n         * Shuffle an array\r\n         * @param elements\r\n         * @returns {*}\r\n         */\r\n        _shuffle: function shuffle(elements){ //v1.0\r\n            var parent, child, lastSibling;\r\n            if (elements.length) {\r\n                parent = $(elements[0]).parent();\r\n            }\r\n            while (elements.length) {\r\n                child = elements.splice(Math.floor(Math.random() *  elements.length), 1)[0];\r\n                lastSibling = parent.find('[data-shuffle-group=\"' + $(child).data('shuffle-group') + '\"]').last();\r\n                lastSibling.after(child);\r\n            }\r\n        }\r\n\r\n        /* jscs:disable */\r\n        /* eslint:disable */\r\n    });\r\n\r\n    return $.mage.upsellProducts;\r\n});\r\n","Magento_Catalog/js/validate-product.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/mage',\r\n    'Magento_Catalog/product/view/validation',\r\n    'catalogAddToCart'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.productValidate', {\r\n        options: {\r\n            bindSubmit: false,\r\n            radioCheckboxClosest: '.nested',\r\n            addToCartButtonSelector: '.action.tocart'\r\n        },\r\n\r\n        /**\r\n         * Uses Magento's validation widget for the form object.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var bindSubmit = this.options.bindSubmit;\r\n\r\n            this.element.validation({\r\n                radioCheckboxClosest: this.options.radioCheckboxClosest,\r\n\r\n                /**\r\n                 * Uses catalogAddToCart widget as submit handler.\r\n                 * @param {Object} form\r\n                 * @returns {Boolean}\r\n                 */\r\n                submitHandler: function (form) {\r\n                    var jqForm = $(form).catalogAddToCart({\r\n                        bindSubmit: bindSubmit\r\n                    });\r\n\r\n                    jqForm.catalogAddToCart('submitForm', jqForm);\r\n\r\n                    return false;\r\n                }\r\n            });\r\n            $(this.options.addToCartButtonSelector).attr('disabled', false);\r\n        }\r\n    });\r\n\r\n    return $.mage.productValidate;\r\n});\r\n","Magento_Catalog/js/product/addtocart-button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'Magento_Catalog/js/product/uenc-processor',\r\n    'Magento_Catalog/js/product/list/column-status-validator'\r\n], function (Element, uencProcessor, columnStatusValidator) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            label: ''\r\n        },\r\n\r\n        /**\r\n         * Prepare data, that will be inserted as data-mage-init attribute into button. With help of this attribute\r\n         * Add To * buttons can understand post data and urls\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getDataMageInit: function (row) {\r\n            return '{\"redirectUrl\": { \"url\" : \"'  + uencProcessor(row['add_to_cart_button'].url) + '\"}}';\r\n        },\r\n\r\n        /**\r\n         * Prepare Data-Post data that will be used in data-mage-init\r\n         *\r\n         * @param {Object} row\r\n         * @return {String}\r\n         */\r\n        getDataPost: function (row) {\r\n            return uencProcessor(row['add_to_cart_button']['post_data']);\r\n        },\r\n\r\n        /**\r\n         * Check if product has required options.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        hasRequiredOptions: function (row) {\r\n            return row['add_to_cart_button']['required_options'];\r\n        },\r\n\r\n        /**\r\n         * Depends on this option, \"Add to cart\" button can be shown or hide\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Boolean}\r\n         */\r\n        isSalable: function (row) {\r\n            return row['is_salable'];\r\n        },\r\n\r\n        /**\r\n         * Depends on this option, stock status text can be \"In stock\" or \"Out Of Stock\"\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Boolean}\r\n         */\r\n        isAvailable: function (row) {\r\n            return row['is_available'];\r\n        },\r\n\r\n        /**\r\n         * Depends on this option, \"Add to cart\" button can be shown or hide. Depends on  backend configuration\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'add_to_cart', 'show_buttons');\r\n        },\r\n\r\n        /**\r\n         * Get button label.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getLabel: function () {\r\n            return this.label;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/addtocompare-button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'Magento_Catalog/js/product/uenc-processor',\r\n    'Magento_Catalog/js/product/list/column-status-validator'\r\n], function (Column, uencProcessor, columnStatusValidator) {\r\n    'use strict';\r\n\r\n    return Column.extend({\r\n        defaults: {\r\n            label: ''\r\n        },\r\n\r\n        /**\r\n         * Prepare Data-Post data that will be used in data-mage-init\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Array}\r\n         */\r\n        getDataPost: function (row) {\r\n            return uencProcessor(row['add_to_compare_button'].url ||\r\n                    row['add_to_compare_button']['post_data']);\r\n        },\r\n\r\n        /**\r\n         * Depends on this option, \"Add to compare\" button can be shown or hide. Depends on  backend configuration\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'add_to_compare', 'show_buttons');\r\n        },\r\n\r\n        /**\r\n         * Get button label.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getLabel: function () {\r\n            return this.label;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/breadcrumbs.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Theme/js/model/breadcrumb-list'\r\n], function ($, breadcrumbList) {\r\n    'use strict';\r\n\r\n    return function (widget) {\r\n\r\n        $.widget('mage.breadcrumbs', widget, {\r\n            options: {\r\n                categoryUrlSuffix: '',\r\n                useCategoryPathInUrl: false,\r\n                product: '',\r\n                categoryItemSelector: '.category-item',\r\n                menuContainer: '[data-action=\"navigation\"] > ul'\r\n            },\r\n\r\n            /** @inheritdoc */\r\n            _render: function () {\r\n                this._appendCatalogCrumbs();\r\n                this._super();\r\n            },\r\n\r\n            /**\r\n             * Append category and product crumbs.\r\n             *\r\n             * @private\r\n             */\r\n            _appendCatalogCrumbs: function () {\r\n                var categoryCrumbs = this._resolveCategoryCrumbs();\r\n\r\n                categoryCrumbs.forEach(function (crumbInfo) {\r\n                    breadcrumbList.push(crumbInfo);\r\n                });\r\n\r\n                if (this.options.product) {\r\n                    breadcrumbList.push(this._getProductCrumb());\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Resolve categories crumbs.\r\n             *\r\n             * @return Array\r\n             * @private\r\n             */\r\n            _resolveCategoryCrumbs: function () {\r\n                var menuItem = this._resolveCategoryMenuItem(),\r\n                    categoryCrumbs = [];\r\n\r\n                if (menuItem !== null && menuItem.length) {\r\n                    categoryCrumbs.unshift(this._getCategoryCrumb(menuItem));\r\n\r\n                    while ((menuItem = this._getParentMenuItem(menuItem)) !== null) {\r\n                        categoryCrumbs.unshift(this._getCategoryCrumb(menuItem));\r\n                    }\r\n                }\r\n\r\n                return categoryCrumbs;\r\n            },\r\n\r\n            /**\r\n             * Returns crumb data.\r\n             *\r\n             * @param {Object} menuItem\r\n             * @return {Object}\r\n             * @private\r\n             */\r\n            _getCategoryCrumb: function (menuItem) {\r\n                return {\r\n                    'name': 'category',\r\n                    'label': menuItem.text(),\r\n                    'link': menuItem.attr('href'),\r\n                    'title': ''\r\n                };\r\n            },\r\n\r\n            /**\r\n             * Returns product crumb.\r\n             *\r\n             * @return {Object}\r\n             * @private\r\n             */\r\n            _getProductCrumb: function () {\r\n                return {\r\n                    'name': 'product',\r\n                    'label': this.options.product,\r\n                    'link': '',\r\n                    'title': ''\r\n                };\r\n            },\r\n\r\n            /**\r\n             * Find parent menu item for current.\r\n             *\r\n             * @param {Object} menuItem\r\n             * @return {Object|null}\r\n             * @private\r\n             */\r\n            _getParentMenuItem: function (menuItem) {\r\n                var classes,\r\n                    classNav,\r\n                    parentClass,\r\n                    parentMenuItem = null;\r\n\r\n                if (!menuItem) {\r\n                    return null;\r\n                }\r\n\r\n                classes = menuItem.parent().attr('class');\r\n                classNav = classes.match(/(nav\\-)[0-9]+(\\-[0-9]+)+/gi);\r\n\r\n                if (classNav) {\r\n                    classNav = classNav[0];\r\n                    parentClass = classNav.substr(0, classNav.lastIndexOf('-'));\r\n\r\n                    if (parentClass.lastIndexOf('-') !== -1) {\r\n                        parentMenuItem = $(this.options.menuContainer).find('.' + parentClass + ' > a');\r\n                        parentMenuItem = parentMenuItem.length ? parentMenuItem : null;\r\n                    }\r\n                }\r\n\r\n                return parentMenuItem;\r\n            },\r\n\r\n            /**\r\n             * Returns category menu item.\r\n             *\r\n             * Tries to resolve category from url or from referrer as fallback and\r\n             * find menu item from navigation menu by category url.\r\n             *\r\n             * @return {Object|null}\r\n             * @private\r\n             */\r\n            _resolveCategoryMenuItem: function () {\r\n                var categoryUrl = this._resolveCategoryUrl(),\r\n                    menu = $(this.options.menuContainer),\r\n                    categoryMenuItem = null;\r\n\r\n                if (categoryUrl && menu.length) {\r\n                    categoryMenuItem = menu.find(\r\n                        this.options.categoryItemSelector +\r\n                        ' > a[href=\"' + categoryUrl + '\"]'\r\n                    );\r\n                }\r\n\r\n                return categoryMenuItem;\r\n            },\r\n\r\n            /**\r\n             * Returns category url.\r\n             *\r\n             * @return {String}\r\n             * @private\r\n             */\r\n            _resolveCategoryUrl: function () {\r\n                var categoryUrl;\r\n\r\n                if (this.options.useCategoryPathInUrl) {\r\n                    // In case category path is used in product url - resolve category url from current url.\r\n                    categoryUrl = window.location.href.split('?')[0];\r\n                    categoryUrl = categoryUrl.substring(0, categoryUrl.lastIndexOf('/')) +\r\n                        this.options.categoryUrlSuffix;\r\n                } else {\r\n                    // In other case - try to resolve it from referrer (without parameters).\r\n                    categoryUrl = document.referrer;\r\n\r\n                    if (categoryUrl.indexOf('?') > 0) {\r\n                        categoryUrl = categoryUrl.substr(0, categoryUrl.indexOf('?'));\r\n                    }\r\n                }\r\n\r\n                return categoryUrl;\r\n            }\r\n        });\r\n\r\n        return $.mage.breadcrumbs;\r\n    };\r\n});\r\n","Magento_Catalog/js/product/learn-more.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'Magento_Catalog/js/product/list/column-status-validator'\r\n], function (Column, columnStatusValidator) {\r\n    'use strict';\r\n\r\n    return Column.extend({\r\n        /**\r\n         * Depends on this option, \"Learn More\" link can be shown or hide. Depends on  backend configuration\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'learn_more', 'show_attributes');\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/name.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'Magento_Catalog/js/product/list/column-status-validator',\r\n    'escaper'\r\n], function (Column, columnStatusValidator, escaper) {\r\n    'use strict';\r\n\r\n    return Column.extend({\r\n        defaults: {\r\n            allowedTags: ['div', 'span', 'b', 'strong', 'i', 'em', 'u', 'a']\r\n        },\r\n\r\n        /**\r\n         * Depends on this option, product name can be shown or hide. Depends on  backend configuration\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'name', 'show_attributes');\r\n        },\r\n\r\n        /**\r\n         * Name column.\r\n         *\r\n         * @param {String} label\r\n         * @returns {String}\r\n         */\r\n        getNameUnsanitizedHtml: function (label) {\r\n            return escaper.escapeHtml(label, this.allowedTags);\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/provider-compared.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    './provider',\r\n    'Magento_Catalog/js/product/storage/storage-service',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, Provider, storage, customerData) {\r\n    'use strict';\r\n\r\n    return Provider.extend({\r\n\r\n        /**\r\n         * Ids update handler\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        idsHandler: function (data) {\r\n            this.productStorage.setIds(this.data.currency, this.data.store, this.dataFilter(data));\r\n        },\r\n\r\n        /**\r\n         * Filters data by provider\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        dataFilter: function (data) {\r\n            var providerData = this.idsStorage.prepareData(customerData.get(this.identifiersConfig.provider)().items),\r\n                result = {},\r\n                productCurrentScope,\r\n                scopeId;\r\n\r\n            if (typeof this.data.productCurrentScope !== 'undefined' && window.checkout && window.checkout.baseUrl) {\r\n                productCurrentScope = this.data.productCurrentScope;\r\n                scopeId = productCurrentScope === 'store' ? window.checkout.storeId :\r\n                    productCurrentScope === 'group' ? window.checkout.storeGroupId :\r\n                        window.checkout.websiteId;\r\n                _.each(data, function (value, key) {\r\n                    if (!providerData[productCurrentScope + '-' + scopeId + '-' + key]) {\r\n                        result[key] = value;\r\n                    }\r\n                });\r\n            } else {\r\n                _.each(data, function (value, key) {\r\n                    if (!providerData[key]) {\r\n                        result[key] = value;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Filters data from product storage by ids\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        filterData: function (data) {\r\n            var result = {},\r\n                i = 0,\r\n                ids = _.keys(this.dataFilter(this.ids())),\r\n                length = ids.length;\r\n\r\n            for (i; i < length; i++) {\r\n                if (ids[i] && data[ids[i]]) {\r\n                    result[ids[i]] = data[ids[i]];\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mageUtils',\r\n    'uiElement',\r\n    'Magento_Catalog/js/product/storage/storage-service',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Catalog/js/product/view/product-ids-resolver'\r\n], function (_, $, utils, Element, storage, customerData, productResolver) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            identifiersConfig: {\r\n                namespace: ''\r\n            },\r\n            productStorageConfig: {\r\n                namespace: 'product_data_storage',\r\n                customerDataProvider: 'product_data_storage',\r\n                updateRequestConfig: {\r\n                    url: '',\r\n                    method: 'GET',\r\n                    dataType: 'json'\r\n                },\r\n                className: 'DataStorage'\r\n            },\r\n            ids: {},\r\n            listens: {\r\n                ids: 'idsHandler'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes provider component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initIdsStorage();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.observe('ids');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes ids storage.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initIdsStorage: function () {\r\n            storage.onStorageInit(this.identifiersConfig.namespace, this.idsStorageHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes ids storage handler.\r\n         *\r\n         * @param {Object} idsStorage\r\n         */\r\n        idsStorageHandler: function (idsStorage) {\r\n            this.idsStorage = idsStorage;\r\n            this.productStorage = storage.createStorage(this.productStorageConfig);\r\n            this.productStorage.data.subscribe(this.dataCollectionHandler.bind(this));\r\n\r\n            if (~~this.idsStorage.allowToSendRequest) {\r\n                customerData.reload([idsStorage.namespace]).done(this._resolveDataByIds.bind(this));\r\n            } else {\r\n                this._resolveDataByIds();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback, which load by ids from ids-storage product data\r\n         *\r\n         * @private\r\n         */\r\n        _resolveDataByIds: function () {\r\n            if (!window.checkout || !window.checkout.baseUrl) {\r\n                // We need data that the minicart provdes to determine storeId/websiteId\r\n                return;\r\n            }\r\n\r\n            this.initIdsListener();\r\n            this.idsMerger(\r\n                this.idsStorage.get(),\r\n                this.prepareDataFromCustomerData(customerData.get(this.identifiersConfig.namespace)())\r\n            );\r\n\r\n            if (!_.isEmpty(this.productStorage.data())) {\r\n                this.dataCollectionHandler(this.productStorage.data());\r\n            } else {\r\n                this.productStorage.setIds(this.data.currency, this.data.store, this.ids());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init ids storage listener.\r\n         */\r\n        initIdsListener: function () {\r\n            customerData.get(this.identifiersConfig.namespace).subscribe(function (data) {\r\n                this.idsMerger(this.prepareDataFromCustomerData(data));\r\n            }.bind(this));\r\n            this.idsStorage.data.subscribe(this.idsMerger.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Prepare data from customerData.\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        prepareDataFromCustomerData: function (data) {\r\n            data = data.items ? data.items : data;\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Filter ids by their lifetime in order to show only hot ids :)\r\n         *\r\n         * @param {Object} ids\r\n         * @returns {Array}\r\n         */\r\n        filterIds: function (ids) {\r\n            var _ids = {},\r\n                currentTime = new Date().getTime() / 1000,\r\n                currentProductIds = productResolver($('#product_addtocart_form')),\r\n                productCurrentScope = this.data.productCurrentScope,\r\n                scopeId = productCurrentScope === 'store' ? window.checkout.storeId :\r\n                productCurrentScope === 'group' ? window.checkout.storeGroupId :\r\n                    window.checkout.websiteId;\r\n\r\n            _.each(ids, function (id, key) {\r\n                if (\r\n                    currentTime - ids[key]['added_at'] < ~~this.idsStorage.lifetime &&\r\n                    !_.contains(currentProductIds, ids[key]['product_id']) &&\r\n                    (!id.hasOwnProperty('scope_id') || ids[key]['scope_id'] === scopeId)\r\n                ) {\r\n                    _ids[id['product_id']] = id;\r\n\r\n                }\r\n            }, this);\r\n\r\n            return _ids;\r\n        },\r\n\r\n        /**\r\n         * Merges id from storage and customer data\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} optionalData\r\n         */\r\n        idsMerger: function (data, optionalData) {\r\n            if (data && optionalData) {\r\n                data = _.extend(data, optionalData);\r\n            }\r\n\r\n            if (!_.isEmpty(data)) {\r\n                this.ids(\r\n                    this.filterIds(_.extend(this.ids(), data))\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Ids update handler\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        idsHandler: function (data) {\r\n            this.productStorage.setIds(this.data.currency, this.data.store, data);\r\n        },\r\n\r\n        /**\r\n         * Process data\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        processData: function (data) {\r\n            var curData = utils.copy(this.data),\r\n                ids = this.ids();\r\n\r\n            delete data['data_id'];\r\n            data = _.values(data);\r\n\r\n            _.each(data, function (record, index) {\r\n                record._rowIndex = index;\r\n                record['added_at'] = ids[record.id]['added_at'];\r\n            }, this);\r\n\r\n            curData.items = data;\r\n            this.set('data', curData);\r\n        },\r\n\r\n        /**\r\n         * Product storage data handler\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        dataCollectionHandler: function (data) {\r\n            data = this.filterData(data);\r\n            this.processData(data);\r\n        },\r\n\r\n        /**\r\n         * Filters data from product storage by ids\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        filterData: function (data) {\r\n            var result = {},\r\n                i = 0,\r\n                ids = _.keys(this.ids()),\r\n                length = ids.length;\r\n\r\n            for (i; i < length; i++) {\r\n                if (ids[i] && data[ids[i]]) {\r\n                    result[ids[i]] = data[ids[i]];\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/query-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'underscore'\r\n    ], function (_) {\r\n        'use strict';\r\n\r\n        return {\r\n\r\n            /**\r\n             * Build query to get id\r\n             *\r\n             * @param {Object} data\r\n             */\r\n            buildQuery: function (data) {\r\n                var filters = [];\r\n\r\n                _.each(data, function (value, key) {\r\n                    filters.push({\r\n                        field: key,\r\n                        value: value,\r\n                        'condition_type': 'in'\r\n                    });\r\n                });\r\n\r\n                return {\r\n                    searchCriteria: {\r\n                        filterGroups: [\r\n                            {\r\n                                filters: filters\r\n                            }\r\n                        ]\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Catalog/js/product/remaining-characters.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'jquery-ui-modules/widget'\r\n], function ($, $t) {\r\n    'use strict';\r\n\r\n    $.widget('mage.remainingCharacters', {\r\n        options: {\r\n            remainingText: $t('remaining'),\r\n            tooManyText: $t('too many'),\r\n            errorClass: 'mage-error',\r\n            noDisplayClass: 'no-display'\r\n        },\r\n\r\n        /**\r\n         * Initializes custom option component\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.note = $(this.options.noteSelector);\r\n            this.counter = $(this.options.counterSelector);\r\n\r\n            this.updateCharacterCount();\r\n            this.element.on('change keyup paste', this.updateCharacterCount.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Updates counter message\r\n         */\r\n        updateCharacterCount: function () {\r\n            var length = this.element.val().length,\r\n                diff = this.options.maxLength - length;\r\n\r\n            this.counter.text(this._formatMessage(diff));\r\n            this.counter.toggleClass(this.options.noDisplayClass, length === 0);\r\n            this.note.toggleClass(this.options.errorClass, diff < 0);\r\n        },\r\n\r\n        /**\r\n         * Format remaining characters message\r\n         *\r\n         * @param {int} diff\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _formatMessage: function (diff) {\r\n            var count = Math.abs(diff),\r\n                qualifier = diff < 0 ? this.options.tooManyText : this.options.remainingText;\r\n\r\n            return '(' + count + ' ' + qualifier + ')';\r\n        }\r\n    });\r\n\r\n    return $.mage.remainingCharacters;\r\n});\r\n","Magento_Catalog/js/product/uenc-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([], function () {\r\n        'use strict';\r\n\r\n        /**\r\n         * Check data to JSON.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        function _isJSON(data) {\r\n            try {\r\n                JSON.parse(data);\r\n            } catch (e) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Processes data.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String} placeholder\r\n         * @param {String} uenc\r\n         *\r\n         * @returns {String}\r\n         */\r\n        function _stringProcessor(data, placeholder, uenc) {\r\n            if (data && ~data.indexOf(placeholder)) {\r\n                return data.replace(placeholder, uenc);\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        /**\r\n         * Processes data.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String} placeholder\r\n         * @param {String} uenc\r\n         *\r\n         * @returns {String}\r\n         */\r\n        function _objectProcessor(data, placeholder, uenc) {\r\n            data = JSON.parse(data);\r\n\r\n            if (data.hasOwnProperty('action')) {\r\n                data.action = _stringProcessor(data.action, placeholder, uenc);\r\n            }\r\n\r\n            if (data.hasOwnProperty('data') && data.data.hasOwnProperty('uenc')) {\r\n                data.data.uenc = uenc;\r\n            }\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        /**\r\n         * Processes data.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String} placeholder\r\n         *\r\n         * @returns {String}\r\n         */\r\n        return function (data, placeholder) {\r\n            var uenc = btoa(window.location.href).replace('+/=', '-_,');\r\n\r\n            placeholder = placeholder || encodeURI('%uenc%');\r\n\r\n            return _isJSON(data) ?\r\n                _objectProcessor(data, placeholder, uenc) :\r\n                _stringProcessor(data, placeholder, uenc);\r\n\r\n        };\r\n    }\r\n);\r\n","Magento_Catalog/js/product/list/column-status-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return _.extend({\r\n        /**\r\n         * Check whether we can show column depends on server settings or not\r\n         *\r\n         * @param {Object} source\r\n         * @param {String} attributeCode\r\n         * @param {String} type\r\n         * @returns {Boolean}\r\n         */\r\n        isValid: function (source, attributeCode, type) {\r\n            var attributes;\r\n\r\n            if (!source[type]) {\r\n                return false;\r\n            }\r\n\r\n            attributes = source[type].split(',');\r\n\r\n            return _.contains(attributes, attributeCode);\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/listing.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/grid/listing'\r\n], function (ko, _, Listing) {\r\n    'use strict';\r\n\r\n    return Listing.extend({\r\n        defaults: {\r\n            additionalClasses: '',\r\n            filteredRows: {},\r\n            limit: 5,\r\n            listens: {\r\n                elems: 'filterRowsFromCache',\r\n                '${ $.provider }:data.items': 'filterRowsFromServer'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.filteredRows = ko.observable();\r\n            this.initProductsLimit();\r\n            this.hideLoader();\r\n        },\r\n\r\n        /**\r\n         * Initialize product limit\r\n         * Product limit can be configured through Ui component.\r\n         * Product limit are present in widget form\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        initProductsLimit: function () {\r\n            if (this.source['page_size']) {\r\n                this.limit = this.source['page_size'];\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track({\r\n                    rows: []\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sort and filter rows, that are already in magento storage cache\r\n         *\r\n         * @return void\r\n         */\r\n        filterRowsFromCache: function () {\r\n            this._filterRows(this.rows);\r\n        },\r\n\r\n        /**\r\n         * Sort and filter rows, that are come from backend\r\n         *\r\n         * @param {Object} rows\r\n         */\r\n        filterRowsFromServer: function (rows) {\r\n            this._filterRows(rows);\r\n        },\r\n\r\n        /**\r\n         * Filter rows by limit and sort them\r\n         *\r\n         * @param {Array} rows\r\n         * @private\r\n         */\r\n        _filterRows: function (rows) {\r\n            this.filteredRows(_.sortBy(rows, 'added_at').reverse().slice(0, this.limit));\r\n        },\r\n\r\n        /**\r\n         * Can retrieve product url\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getUrl: function (row) {\r\n            return row.url;\r\n        },\r\n\r\n        /**\r\n         * Get product attribute by code.\r\n         *\r\n         * @param {String} code\r\n         * @return {Object}\r\n         */\r\n        getComponentByCode: function (code) {\r\n            var elems = this.elems() ? this.elems() : ko.getObservable(this, 'elems'),\r\n                component;\r\n\r\n            component = _.filter(elems, function (elem) {\r\n                return elem.index === code;\r\n            }, this).pop();\r\n\r\n            return component;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/toolbar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * ProductListToolbarForm Widget - this widget is setting cookie and submitting form according to toolbar controls\r\n     */\r\n    $.widget('mage.productListToolbarForm', {\r\n\r\n        options: {\r\n            modeControl: '[data-role=\"mode-switcher\"]',\r\n            directionControl: '[data-role=\"direction-switcher\"]',\r\n            orderControl: '[data-role=\"sorter\"]',\r\n            limitControl: '[data-role=\"limiter\"]',\r\n            mode: 'product_list_mode',\r\n            direction: 'product_list_dir',\r\n            order: 'product_list_order',\r\n            limit: 'product_list_limit',\r\n            page: 'p',\r\n            modeDefault: 'grid',\r\n            directionDefault: 'asc',\r\n            orderDefault: 'position',\r\n            limitDefault: '9',\r\n            url: '',\r\n            formKey: '',\r\n            post: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this._bind(\r\n                $(this.options.modeControl, this.element),\r\n                this.options.mode,\r\n                this.options.modeDefault\r\n            );\r\n            this._bind(\r\n                $(this.options.directionControl, this.element),\r\n                this.options.direction,\r\n                this.options.directionDefault\r\n            );\r\n            this._bind(\r\n                $(this.options.orderControl, this.element),\r\n                this.options.order,\r\n                this.options.orderDefault\r\n            );\r\n            this._bind(\r\n                $(this.options.limitControl, this.element),\r\n                this.options.limit,\r\n                this.options.limitDefault\r\n            );\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _bind: function (element, paramName, defaultValue) {\r\n            if (element.is('select')) {\r\n                element.on('change', {\r\n                    paramName: paramName,\r\n                    'default': defaultValue\r\n                }, $.proxy(this._processSelect, this));\r\n            } else {\r\n                element.on('click', {\r\n                    paramName: paramName,\r\n                    'default': defaultValue\r\n                }, $.proxy(this._processLink, this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _processLink: function (event) {\r\n            event.preventDefault();\r\n            this.changeUrl(\r\n                event.data.paramName,\r\n                $(event.currentTarget).data('value'),\r\n                event.data.default\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _processSelect: function (event) {\r\n            this.changeUrl(\r\n                event.data.paramName,\r\n                event.currentTarget.options[event.currentTarget.selectedIndex].value,\r\n                event.data.default\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        getUrlParams: function () {\r\n            var decode = window.decodeURIComponent,\r\n                urlPaths = this.options.url.split('?'),\r\n                urlParams = urlPaths[1] ? urlPaths[1].split('&') : [],\r\n                params = {},\r\n                parameters, i;\r\n\r\n            for (i = 0; i < urlParams.length; i++) {\r\n                parameters = urlParams[i].split('=');\r\n                params[decode(parameters[0])] = parameters[1] !== undefined ?\r\n                    decode(parameters[1].replace(/\\+/g, '%20')) :\r\n                    '';\r\n            }\r\n\r\n            return params;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        getCurrentLimit: function () {\r\n            return this.getUrlParams()[this.options.limit] || this.options.limitDefault;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        getCurrentPage: function () {\r\n            return this.getUrlParams()[this.options.page] || 1;\r\n        },\r\n\r\n        /**\r\n         * @param {String} paramName\r\n         * @param {*} paramValue\r\n         * @param {*} defaultValue\r\n         */\r\n        changeUrl: function (paramName, paramValue, defaultValue) {\r\n            var urlPaths = this.options.url.split('?'),\r\n                baseUrl = urlPaths[0],\r\n                paramData = this.getUrlParams(),\r\n                currentPage = this.getCurrentPage(),\r\n                form, params, key, input, formKey, newPage;\r\n\r\n            if (currentPage > 1 && paramName === this.options.mode) {\r\n                delete paramData[this.options.page];\r\n            }\r\n\r\n            if (currentPage > 1 && paramName === this.options.limit) {\r\n                newPage = Math.floor(this.getCurrentLimit() * (currentPage - 1) / paramValue) + 1;\r\n\r\n                if (newPage > 1) {\r\n                    paramData[this.options.page] = newPage;\r\n                } else {\r\n                    delete paramData[this.options.page];\r\n                }\r\n            }\r\n\r\n            paramData[paramName] = paramValue;\r\n\r\n            if (this.options.post) {\r\n                form = document.createElement('form');\r\n                params = [this.options.mode, this.options.direction, this.options.order, this.options.limit];\r\n\r\n                for (key in paramData) {\r\n                    if (params.indexOf(key) !== -1) { //eslint-disable-line max-depth\r\n                        input = document.createElement('input');\r\n                        input.name = key;\r\n                        input.value = paramData[key];\r\n                        form.appendChild(input);\r\n                        delete paramData[key];\r\n                    }\r\n                }\r\n                formKey = document.createElement('input');\r\n                formKey.name = 'form_key';\r\n                formKey.value = this.options.formKey;\r\n                form.appendChild(formKey);\r\n\r\n                paramData = $.param(paramData);\r\n                baseUrl += paramData.length ? '?' + paramData : '';\r\n\r\n                form.action = baseUrl;\r\n                form.method = 'POST';\r\n                document.body.appendChild(form);\r\n                form.submit();\r\n            } else {\r\n                if (paramValue == defaultValue) { //eslint-disable-line eqeqeq\r\n                    delete paramData[paramName];\r\n                }\r\n\r\n                paramData = $.param(paramData);\r\n                location.href = baseUrl + (paramData.length ? '?' + paramData : '');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.productListToolbarForm;\r\n});\r\n","Magento_Catalog/js/product/list/columns/final-price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'mageUtils',\r\n    'uiCollection'\r\n], function (_, registry, utils, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            label: false,\r\n            headerTmpl: 'ui/grid/columns/text',\r\n            showMinimalPrice: false,\r\n            showMaximumPrice: false,\r\n            useLinkForAsLowAs: false,\r\n            bodyTmpl: 'Magento_Catalog/product/final_price',\r\n            priceWrapperCssClasses: '',\r\n            priceWrapperAttr: {}\r\n        },\r\n\r\n        /**\r\n         * Get product final price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['final_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get product regular price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} regular price html\r\n         */\r\n        getRegularPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['regular_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getRegularPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} regular price html\r\n         */\r\n        getRegularPriceUnsanitizedHtml: function (row) {\r\n            return this.getRegularPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Check if product has a price range.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        hasPriceRange: function (row) {\r\n            return row['price_info']['max_regular_price'] !== row['price_info']['min_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * Check if product has special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} special price html\r\n         */\r\n        hasSpecialPrice: function (row) {\r\n            return row['price_info']['regular_price'] > row['price_info']['final_price'];\r\n        },\r\n\r\n        /**\r\n         * Check if product has minimal price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal price html\r\n         */\r\n        isMinimalPrice: function (row) {\r\n            return row['price_info']['minimal_price'] < row['price_info']['final_price'];\r\n        },\r\n\r\n        /**\r\n         * Get product minimal price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal price html\r\n         */\r\n        getMinimalPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['minimal_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMinimalPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal price html\r\n         */\r\n        getMinimalPriceUnsanitizedHtml: function (row) {\r\n            return this.getMinimalPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Check if product is salable.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        isSalable: function (row) {\r\n            return row['is_salable'];\r\n        },\r\n\r\n        /**\r\n         * Get product maximum price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum price html\r\n         */\r\n        getMaxPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['max_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMaxPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum price html\r\n         */\r\n        getMaxPriceUnsanitizedHtml: function (row) {\r\n            return this.getMaxPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get product maximum regular price in case of price range and special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum regular price html\r\n         */\r\n        getMaxRegularPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['max_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMaxRegularPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum regular price html\r\n         */\r\n        getMaxRegularPriceUnsanitizedHtml: function (row) {\r\n            return this.getMaxRegularPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get product minimal regular price in case of price range and special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal regular price html\r\n         */\r\n        getMinRegularPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['min_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMinRegularPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal regular price html\r\n         */\r\n        getMinRegularPriceUnsanitizedHtml: function (row) {\r\n            return this.getMinRegularPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get adjustments names and return as string.\r\n         *\r\n         * @return {String} adjustments classes\r\n         */\r\n        getAdjustmentCssClasses: function () {\r\n            return _.pluck(this.getAdjustments(), 'index').join(' ');\r\n        },\r\n\r\n        /**\r\n         * Get product minimal price as number.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} minimal price amount\r\n         */\r\n        getMinimalPriceAmount: function (row) {\r\n            return row['price_info']['minimal_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMinimalPriceAmount\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} minimal price amount\r\n         */\r\n        getMinimalPriceAmountUnsanitizedHtml: function (row) {\r\n            return this.getMinimalPriceAmount(row);\r\n        },\r\n\r\n        /**\r\n         * Get product minimal regular price as number in case of special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} minimal regular price amount\r\n         */\r\n        getMinimalRegularPriceAmount: function (row) {\r\n            return row['price_info']['min_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * Get product maximum price as number.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} maximum price amount\r\n         */\r\n        getMaximumPriceAmount: function (row) {\r\n            return row['price_info']['max_price'];\r\n        },\r\n\r\n        /**\r\n         * Get product maximum regular price as number in case of special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} maximum regular price amount\r\n         */\r\n        getMaximumRegularPriceAmount: function (row) {\r\n            return row['price_info']['max_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * Check if minimal regular price exist for product.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        showMinRegularPrice: function (row) {\r\n            return this.getMinimalPriceAmount(row) < this.getMinimalRegularPriceAmount(row);\r\n        },\r\n\r\n        /**\r\n         * Check if maximum regular price exist for product.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        showMaxRegularPrice: function (row) {\r\n            return this.getMaximumPriceAmount(row) < this.getMaximumRegularPriceAmount(row);\r\n        },\r\n\r\n        /**\r\n         * Get path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Get all price adjustments.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getAdjustments: function () {\r\n            var adjustments = this.elems();\r\n\r\n            _.each(adjustments, function (adjustment) {\r\n                adjustment.setPriceType(this.priceType);\r\n                adjustment.source = this.source;\r\n            }, this);\r\n\r\n            return adjustments;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/columns/image.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'Magento_Catalog/js/product/list/column-status-validator'\r\n], function (_, Element, columnStatusValidator) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            bodyTmpl: 'Magento_Catalog/product/list/columns/image',\r\n            imageCode: 'default',\r\n            image: {}\r\n        },\r\n\r\n        /**\r\n         * Find image by code in scope of images\r\n         *\r\n         * @param {Object} images\r\n         * @returns {*|T}\r\n         */\r\n        getImage: function (images) {\r\n            return _.filter(images, function (image) {\r\n                return this.imageCode === image.code;\r\n            }, this).pop();\r\n        },\r\n\r\n        /**\r\n         * Get image path.\r\n         *\r\n         * @param {Object} row\r\n         * @return {String}\r\n         */\r\n        getImageUrl: function (row) {\r\n            return this.getImage(row.images).url;\r\n        },\r\n\r\n        /**\r\n         * Get image box width.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getWidth: function (row) {\r\n            return this.getImage(row.images).width;\r\n        },\r\n\r\n        /**\r\n         * Get image box height.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getHeight: function (row) {\r\n            return this.getImage(row.images).height;\r\n        },\r\n\r\n        /**\r\n         * Get resized image width.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getResizedImageWidth: function (row) {\r\n            return this.getImage(row.images)['resized_width'];\r\n        },\r\n\r\n        /**\r\n         * Get resized image height.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getResizedImageHeight: function (row) {\r\n            return this.getImage(row.images)['resized_height'];\r\n        },\r\n\r\n        /**\r\n         * Get image alt text.\r\n         *\r\n         * @param {Object} row\r\n         * @return {String}\r\n         */\r\n        getLabel: function (row) {\r\n            if (!this.imageExists(row)) {\r\n                return this._super();\r\n            }\r\n\r\n            return this.getImage(row.images).label;\r\n        },\r\n\r\n        /**\r\n         * Check if image exist.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        imageExists: function (row) {\r\n            return this.getImage(row.images) !== 'undefined';\r\n        },\r\n\r\n        /**\r\n         * Check if component must be shown.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'image', 'show_attributes');\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/columns/price-box.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiRegistry',\r\n    'mageUtils',\r\n    'uiCollection',\r\n    'Magento_Catalog/js/product/list/column-status-validator',\r\n    'uiLayout'\r\n], function (ko, _, registry, utils, Collection, columnStatusValidator, layout) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            label: '',\r\n            hasSpecialPrice: false,\r\n            showMinimalPrice: false,\r\n            useLinkForAsLowAs: false,\r\n            visible: true,\r\n            headerTmpl: 'ui/grid/columns/text',\r\n            bodyTmpl: 'Magento_Catalog/product/price/price_box',\r\n            disableAction: false,\r\n            controlVisibility: true,\r\n            sortable: false,\r\n            sorting: false,\r\n            draggable: true,\r\n            fieldClass: {},\r\n            renders: {\r\n                default: {}\r\n            },\r\n            ignoreTmpls: {\r\n                fieldAction: true\r\n            },\r\n            statefull: {\r\n                visible: true,\r\n                sorting: true\r\n            },\r\n            imports: {\r\n                exportSorting: 'sorting'\r\n            },\r\n            listens: {\r\n                elems: ''\r\n            },\r\n            modules: {\r\n                source: '${ $.provider }'\r\n            },\r\n            pricesInit: {}\r\n        },\r\n\r\n        /**\r\n         * Sort prices api\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        sort: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check whether is allowed to render price or not\r\n         *\r\n         * @returns {*}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'price', 'show_attributes');\r\n        },\r\n\r\n        /**\r\n         * Retrieve array of prices, that should be rendered for specific product\r\n         *\r\n         * @param {Array} row\r\n         * @return {Array}\r\n         */\r\n        getPrices: function (row) {\r\n            var elems = this.elems() ? this.elems() : ko.getObservable(this, 'elems'),\r\n                result;\r\n\r\n            //we cant take type of product from row\r\n            this.initPrices(row);\r\n            result = _.filter(elems, function (elem) {\r\n                return elem.productType === row.type;\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Recursive Merging of objects\r\n         *\r\n         * @param {Array} target\r\n         * @param {Array} source\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _deepObjectExtend: function (target, source) {\r\n            var _target = utils.copy(target);\r\n\r\n            _.each(source, function (value, key) {\r\n                if (_.keys(value).length && typeof _target[key] !== 'undefined') {\r\n                    _target[key] = this._deepObjectExtend(_target[key], value);\r\n                } else {\r\n                    _target[key] = value;\r\n                }\r\n            }, this);\r\n\r\n            return _target;\r\n        },\r\n\r\n        /**\r\n         * Init price type box, in cases when product type has custom component or bodyTmpl\r\n         *\r\n         * @param {String} productType\r\n         * @private\r\n         */\r\n        _initPriceWithCustomMetaData: function (productType) {\r\n            var price = this._deepObjectExtend(\r\n                this.renders.prices['default'],\r\n                this.renders.prices[productType]\r\n            );\r\n\r\n            price.name = productType + '.default';\r\n            price.parent = this.name;\r\n            price.source = this.source;\r\n            price.productType = productType;\r\n            layout([price]);\r\n        },\r\n\r\n        /**\r\n         * Init Prices by product type and add them to layout\r\n         *\r\n         * @param {Array} _priceData\r\n         * @param {String} productType\r\n         * @private\r\n         */\r\n        _initPricesForProductType: function (_priceData, productType) {\r\n            var prices = [];\r\n\r\n            this._setPriceNamesToPrices(_priceData, productType);\r\n            _.sortBy(_priceData, this._comparePrices);\r\n\r\n            _.each(_priceData, function (priceData) {\r\n                if (!priceData.component) {\r\n                    return;\r\n                }\r\n\r\n                priceData.parent = this.name;\r\n                priceData.provider = this.provider;\r\n                priceData.productType = productType;\r\n                priceData = utils.template(priceData, this);\r\n                prices.push(priceData);\r\n            }, this);\r\n\r\n            layout(prices);\r\n        },\r\n\r\n        /**\r\n         * Init dynamic price components\r\n         *\r\n         * @param {Array} row\r\n         * @returns {void}\r\n         */\r\n        initPrices: function (row) {\r\n            var _priceData = [],\r\n                productType = row.type,\r\n                defaultPrice = this.renders.prices['default'];\r\n\r\n            if (this.pricesInit[productType]) {\r\n                return true;\r\n            }\r\n\r\n            this.pricesInit[productType] = true;\r\n\r\n            if (this.renders.prices[productType] && this._needToApplyCustomTemplate(this.renders.prices[productType])) {\r\n                return this._initPriceWithCustomMetaData(productType);\r\n            }\r\n\r\n            if (this.renders.prices[productType] && this.renders.prices[productType].children) {\r\n                _priceData = this._deepObjectExtend(defaultPrice.children, this.renders.prices[productType].children);\r\n            } else {\r\n                _priceData = defaultPrice.children;\r\n            }\r\n\r\n            return this._initPricesForProductType(_priceData, productType);\r\n        },\r\n\r\n        /**\r\n         * Set name to all price components\r\n         *\r\n         * @param {Array} prices\r\n         * @param {String} productType\r\n         * @private\r\n         */\r\n        _setPriceNamesToPrices: function (prices, productType) {\r\n            _.each(prices, function (price, name) {\r\n                price.priceType = name;\r\n                price.name = name + '.' + productType;\r\n            });\r\n\r\n            return prices;\r\n        },\r\n\r\n        /**\r\n         * Sort callback to compare prices by sort order\r\n         *\r\n         * @param {Number} firstPrice\r\n         * @param {Number} secondPrice\r\n         * @returns {Number}\r\n         * @private\r\n         */\r\n        _comparePrices: function (firstPrice, secondPrice) {\r\n            if (firstPrice.sortOrder < secondPrice.sortOrder) {\r\n                return -1;\r\n            }\r\n\r\n            if (firstPrice.sortOrder > secondPrice.sortOrder) {\r\n                return 1;\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Check whether metadata of product type prices was changed, and we should\r\n         * to apply custom template or custom component\r\n         *\r\n         * @param {Array} productData\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _needToApplyCustomTemplate: function (productData) {\r\n            return productData.bodyTmpl || productData.component;\r\n        },\r\n\r\n        /**\r\n         * Returns path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Get price label.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getLabel: function () {\r\n            return this.label;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/columns/pricetype-box.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiCollection'\r\n], function (ko, _, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        /**\r\n         * Find from all price ui components, price with specific code, init source on it and set priceType\r\n         *\r\n         * @param {String} code\r\n         * @returns {*|T}\r\n         */\r\n        getPriceByCode: function (code) {\r\n            var elems = this.elems() ? this.elems() : ko.getObservable(this, 'elems'),\r\n                price;\r\n\r\n            price = _.filter(elems, function (elem) {\r\n                return elem.index.split('.').shift() === code;\r\n            }, this).pop();\r\n\r\n            price.source = this.source();\r\n            price.priceType = code;\r\n\r\n            return price;\r\n        },\r\n\r\n        /**\r\n         * Retrieve body template\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Check whether price has price range, depends on different options, that can be choose\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Boolean}\r\n         */\r\n        hasPriceRange: function (row) {\r\n            return row['price_info']['max_regular_price'] !== row['price_info']['min_regular_price'];\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/storage/data-storage.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'Magento_Catalog/js/product/query-builder',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, utils, queryBuilder, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Process data from API request\r\n     *\r\n     * @param {Object} data\r\n     * @returns {Object}\r\n     */\r\n    function getParsedDataFromServer(data) {\r\n        var result = {};\r\n\r\n        _.each(data.items, function (item) {\r\n                if (item.id) {\r\n                    result[item.id] = item;\r\n                }\r\n            }\r\n        );\r\n\r\n        return {\r\n            items: result\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Set data to localStorage with support check.\r\n     *\r\n     * @param {String} namespace\r\n     * @param {Object} data\r\n     */\r\n    function setLocalStorageItem(namespace, data) {\r\n        try {\r\n            window.localStorage.setItem(namespace, JSON.stringify(data));\r\n        } catch (e) {\r\n            console.warn('localStorage is unavailable - skipping local caching of product data');\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Class name\r\n         */\r\n        name: 'DataStorage',\r\n        request: {},\r\n        customerDataProvider: 'product_data_storage',\r\n\r\n        /**\r\n         * Initialize class\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initialize: function () {\r\n            if (!this.data) {\r\n                this.data = ko.observable({});\r\n            }\r\n\r\n            this.initLocalStorage()\r\n                .initCustomerDataReloadListener()\r\n                .cachesDataFromLocalStorage()\r\n                .initDataListener()\r\n                .initProvideStorage()\r\n                .initProviderListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize listener to customer data reload\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initCustomerDataReloadListener: function () {\r\n            $(document).on('customer-data-invalidate', this._flushProductStorage.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Flush product storage\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _flushProductStorage: function (event, sections) {\r\n            if (_.isEmpty(sections) || _.contains(sections, 'product_data_storage')) {\r\n                this.localStorage.removeAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize listener to data property\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initDataListener: function () {\r\n            this.data.subscribe(this.dataHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize provider storage\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initProvideStorage: function () {\r\n            this.providerHandler(customerData.get(this.customerDataProvider)());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler to update \"data\" property.\r\n         * Sets data to localStorage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        dataHandler: function (data) {\r\n            if (_.isEmpty(data)) {\r\n                this.localStorage.removeAll();\r\n            } else {\r\n                setLocalStorageItem(this.namespace, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler to update data in provider.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        providerHandler: function (data) {\r\n            var currentData = utils.copy(this.data()),\r\n                ids = _.keys(data.items);\r\n\r\n            if (data.items && ids.length) {\r\n                //we can extend only items\r\n                data = data.items;\r\n                this.data(_.extend(data, currentData));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets data ids\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} ids\r\n         */\r\n        setIds: function (currency, store, ids) {\r\n            if (!this.hasInCache(currency, store, ids)) {\r\n                this.loadDataFromServer(currency, store, ids);\r\n            } else {\r\n                this.data.valueHasMutated();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gets data from \"data\" property by identifiers\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} productIdentifiers\r\n         *\r\n         * @return {Object} data.\r\n         */\r\n        getDataByIdentifiers: function (currency, store, productIdentifiers) {\r\n            var data = {},\r\n                dataCollection = this.data(),\r\n                id;\r\n\r\n            for (id in productIdentifiers) {\r\n                if (productIdentifiers.hasOwnProperty(id)) {\r\n                    data[id] = dataCollection[id];\r\n                }\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Checks has cached data or not\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} ids\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        hasInCache: function (currency, store, ids) {\r\n            var data = this.data(),\r\n                id;\r\n\r\n            for (id in ids) {\r\n                if (!data.hasOwnProperty(id) ||\r\n                    data[id]['currency_code'] !== currency ||\r\n                    ~~data[id]['store_id'] !== ~~store\r\n                ) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Load data from server by ids\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} ids\r\n         *\r\n         * @return void\r\n         */\r\n        loadDataFromServer: function (currency, store, ids) {\r\n            var idsArray = _.keys(ids),\r\n                prepareAjaxParams = {\r\n                    'entity_id': idsArray.join(',')\r\n                };\r\n\r\n            if (this.request.sent && this.hasIdsInSentRequest(ids)) {\r\n                return;\r\n            }\r\n\r\n            this.request = {\r\n                sent: true,\r\n                data: ids\r\n            };\r\n\r\n            this.updateRequestConfig.data = queryBuilder.buildQuery(prepareAjaxParams);\r\n            this.updateRequestConfig.data['store_id'] = store;\r\n            this.updateRequestConfig.data['currency_code'] = currency;\r\n            $.ajax(this.updateRequestConfig).done(function (data) {\r\n                this.request = {};\r\n                this.providerHandler(getParsedDataFromServer(data));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Each product page consist product cache data,\r\n         * this function prepare those data to appropriate view, and save it\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        addDataFromPageCache: function (data) {\r\n            this.providerHandler(getParsedDataFromServer(data));\r\n        },\r\n\r\n        /**\r\n         * @param {Object} ids\r\n         * @returns {Boolean}\r\n         */\r\n        hasIdsInSentRequest: function (ids) {\r\n            var sentDataIds,\r\n                currentDataIds;\r\n\r\n            if (this.request.data) {\r\n                sentDataIds = _.keys(this.request.data);\r\n                currentDataIds = _.keys(ids);\r\n\r\n                _.each(currentDataIds, function (id) {\r\n                    if (_.lastIndexOf(sentDataIds, id) === -1) {\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Initialize provider listener\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initProviderListener: function () {\r\n            customerData.get(this.customerDataProvider).subscribe(this.providerHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Caches data from local storage to local scope\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        cachesDataFromLocalStorage: function () {\r\n            this.data(this.getDataFromLocalStorage());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Gets data from local storage by current namespace\r\n         *\r\n         * @return {Object}.\r\n         */\r\n        getDataFromLocalStorage: function () {\r\n            return this.localStorage.get();\r\n        },\r\n\r\n        /**\r\n         * Initialize localStorage\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initLocalStorage: function () {\r\n            this.localStorage = $.initNamespaceStorage(this.namespace).localStorage;\r\n\r\n            return this;\r\n        }\r\n    };\r\n});\r\n","Magento_Catalog/js/product/storage/ids-storage-compare.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Catalog/js/product/storage/ids-storage'\r\n], function (_, ko, utils, customerData, idsStorage) {\r\n    'use strict';\r\n\r\n    return _.extend(utils.copy(idsStorage), {\r\n\r\n        /**\r\n         * Class name\r\n         */\r\n        name: 'IdsStorageCompare',\r\n\r\n        /**\r\n         * Initializes class\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initialize: function () {\r\n            if (!this.data) {\r\n                this.data = ko.observable({});\r\n            }\r\n\r\n            if (this.provider && window.checkout && window.checkout.baseUrl) {\r\n                this.providerDataHandler(customerData.get(this.provider)());\r\n                this.initProviderListener();\r\n            }\r\n\r\n            this.initLocalStorage()\r\n                .cachesDataFromLocalStorage()\r\n                .initDataListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes listener for external data provider\r\n         */\r\n        initProviderListener: function () {\r\n            customerData.get(this.provider).subscribe(this.providerDataHandler.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Initializes handler for external data provider update\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        providerDataHandler: function (data) {\r\n            data = data.items || data;\r\n            data = this.prepareData(data);\r\n\r\n            this.add(data);\r\n        },\r\n\r\n        /**\r\n         * Prepares data to correct interface\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object} data\r\n         */\r\n        prepareData: function (data) {\r\n            var result = {},\r\n                scopeId;\r\n\r\n            _.each(data, function (item) {\r\n                if (typeof item.productScope !== 'undefined') {\r\n                    scopeId = item.productScope === 'store' ? window.checkout.storeId :\r\n                        item.productScope === 'group' ? window.checkout.storeGroupId :\r\n                            window.checkout.websiteId;\r\n\r\n                    result[item.productScope + '-' + scopeId + '-' + item.id] = {\r\n                        'added_at': new Date().getTime() / 1000,\r\n                        'product_id': item.id,\r\n                        'scope_id': scopeId\r\n                    };\r\n                } else {\r\n                    result[item.id] = {\r\n                        'added_at': new Date().getTime() / 1000,\r\n                        'product_id': item.id\r\n                    };\r\n                }\r\n            });\r\n\r\n            return result;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/storage/ids-storage.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, utils) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Set data to localStorage with support check.\r\n     *\r\n     * @param {String} namespace\r\n     * @param {Object} data\r\n     */\r\n    function setLocalStorageItem(namespace, data) {\r\n        try {\r\n            window.localStorage.setItem(namespace, JSON.stringify(data));\r\n        } catch (e) {\r\n            console.warn('localStorage is unavailable - skipping local caching of product data');\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Class name\r\n         */\r\n        name: 'IdsStorage',\r\n\r\n        /**\r\n         * Initializes class\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initialize: function () {\r\n            if (!this.data) {\r\n                this.data = ko.observable({});\r\n            }\r\n\r\n            this.initCustomerDataReloadListener()\r\n                .initLocalStorage()\r\n                .cachesDataFromLocalStorage()\r\n                .initDataListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Gets data from local storage by current namespace\r\n         *\r\n         * @return {Object}.\r\n         */\r\n        getDataFromLocalStorage: function () {\r\n            return this.localStorage.get();\r\n        },\r\n\r\n        /**\r\n         * Caches data from local storage to local scope\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        cachesDataFromLocalStorage: function () {\r\n            this.data(this.getDataFromLocalStorage());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize localStorage\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initLocalStorage: function () {\r\n            this.localStorage = $.initNamespaceStorage(this.namespace).localStorage;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes listener to \"data\" property\r\n         */\r\n        initDataListener: function () {\r\n            this.data.subscribe(this.internalDataHandler.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Initialize listener to customer data reload\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initCustomerDataReloadListener: function () {\r\n            $(document).on('customer-data-reload', function (event, sections) {\r\n                if ((_.isEmpty(sections) || _.contains(sections, this.namespace)) && ~~this.allowToSendRequest) {\r\n                    this.localStorage.removeAll();\r\n                    this.data();\r\n                }\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes handler to \"data\" property update\r\n         */\r\n        internalDataHandler: function (data) {\r\n            setLocalStorageItem(this.namespace, data);\r\n        },\r\n\r\n        /**\r\n         * Initializes handler to storage update\r\n         */\r\n        externalDataHandler: function (data) {\r\n            data = data.items ? data.items : data;\r\n\r\n            this.set(_.extend(utils.copy(this.data()), data));\r\n        }\r\n    };\r\n});\r\n\r\n","Magento_Catalog/js/product/storage/storage-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'mage/translate',\r\n    'Magento_Catalog/js/product/storage/ids-storage',\r\n    'Magento_Catalog/js/product/storage/data-storage',\r\n    'Magento_Catalog/js/product/storage/ids-storage-compare'\r\n], function ($, _, utils, $t, IdsStorage, DataStore, IdsStorageCompare) {\r\n    'use strict';\r\n\r\n    return (function () {\r\n\r\n        var /**\r\n             * {Object} storages - list of storages\r\n             */\r\n            storages = {},\r\n\r\n            /**\r\n             * {Object} classes - list of classes\r\n             */\r\n            classes = {},\r\n\r\n            /**\r\n             * {Object} prototype - methods that will be added to all storage classes to prototype property.\r\n             */\r\n            prototype = {\r\n\r\n                /**\r\n                 * Sets data to storage\r\n                 *\r\n                 * @param {*} data\r\n                 */\r\n                set: function (data) {\r\n                    if (!utils.compare(data, this.data()).equal) {\r\n                        this.data(data);\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Adds some data to current storage data\r\n                 *\r\n                 * @param {*} data\r\n                 */\r\n                add: function (data) {\r\n                    if (!_.isEmpty(data)) {\r\n                        this.data(_.extend(utils.copy(this.data()), data));\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Gets current storage data\r\n                 *\r\n                 * @returns {*} data\r\n                 */\r\n                get: function () {\r\n                    return this.data();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Required properties to storage\r\n             */\r\n            storagesInterface =  {\r\n                data: 'function',\r\n                initialize: 'function',\r\n                namespace: 'string'\r\n            },\r\n\r\n            /**\r\n             * Private service methods\r\n             */\r\n            _private = {\r\n\r\n                /**\r\n                 * Overrides class method and add ability use _super to call parent method\r\n                 *\r\n                 * @param {Object} extensionMethods\r\n                 * @param {Object} originInstance\r\n                 */\r\n                overrideClassMethods: function (extensionMethods, originInstance) {\r\n                    var methodsName = _.keys(extensionMethods),\r\n                        i = 0,\r\n                        length = methodsName.length;\r\n\r\n                    for (i; i < length; i++) {\r\n                        if (_.isFunction(originInstance[methodsName[i]])) {\r\n                            originInstance[methodsName[i]] = extensionMethods[methodsName[i]];\r\n                        }\r\n                    }\r\n\r\n                    return originInstance;\r\n                },\r\n\r\n                /**\r\n                 * Checks is storage implement interface\r\n                 *\r\n                 * @param {Object} classInstance\r\n                 *\r\n                 * @returns {Boolean}\r\n                 */\r\n                isImplementInterface: function (classInstance) {\r\n                    _.each(storagesInterface, function (key, value) {\r\n                        if (typeof classInstance[key] !== value) {\r\n                            return false;\r\n                        }\r\n                    });\r\n\r\n                    return true;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Subscribers list\r\n             */\r\n            subsctibers = {};\r\n\r\n        (function () {\r\n            /**\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            classes[IdsStorage.name] = function (config) {\r\n                _.extend(this, IdsStorage, config);\r\n            };\r\n\r\n            /**\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            classes[IdsStorageCompare.name] = function (config) {\r\n                _.extend(this, IdsStorageCompare, config);\r\n            };\r\n\r\n            /**\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            classes[DataStore.name] = function (config) {\r\n                _.extend(this, DataStore, config);\r\n            };\r\n\r\n            _.each(classes, function (classItem) {\r\n                classItem.prototype = prototype;\r\n            });\r\n        })();\r\n\r\n        return {\r\n\r\n            /**\r\n             * Creates new storage or returns if storage with declared namespace exist\r\n             *\r\n             * @param {Object} config - storage config\r\n             * @throws {Error}\r\n             * @returns {Object} storage instance\r\n             */\r\n            createStorage: function (config) {\r\n                var instance,\r\n                    initialized;\r\n\r\n                if (storages[config.namespace]) {\r\n                    return storages[config.namespace];\r\n                }\r\n\r\n                instance = new classes[config.className](config);\r\n\r\n                if (_private.isImplementInterface(instance)) {\r\n                    initialized = storages[config.namespace] = instance.initialize();\r\n                    this.processSubscribers(initialized, config);\r\n\r\n                    return initialized;\r\n                }\r\n\r\n                throw new Error('Class ' + config.className + $t('does not implement Storage Interface'));\r\n            },\r\n\r\n            /**\r\n             * Process subscribers\r\n             *\r\n             * Differentiate subscribers by their namespaces: recently_viewed or recently_compared\r\n             * and process callbacks. Callbacks can be add through onStorageInit function\r\n             *\r\n             * @param {Object} initialized\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            processSubscribers: function (initialized, config) {\r\n                if (subsctibers[config.namespace]) {\r\n                    _.each(subsctibers[config.namespace], function (callback) {\r\n                        callback(initialized);\r\n                    });\r\n\r\n                    delete subsctibers[config.namespace];\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Listens storage creating by namespace\r\n             *\r\n             * @param {String} namespace\r\n             * @param {Function} callback\r\n             * @return void\r\n             */\r\n            onStorageInit: function (namespace, callback) {\r\n                if (storages[namespace]) {\r\n                    callback(storages[namespace]);\r\n                } else {\r\n                    subsctibers[namespace] ?\r\n                        subsctibers[namespace].push(callback) :\r\n                        subsctibers[namespace] = [callback];\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Gets storage by namespace\r\n             *\r\n             * @param {String} namespace\r\n             *\r\n             * @returns {Object} storage insance\r\n             */\r\n            getStorage: function (namespace) {\r\n                return storages[namespace];\r\n            }\r\n        };\r\n    })();\r\n});\r\n\r\n","Magento_Catalog/js/product/view/product-ids-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-ids'\r\n], function (_, productIds) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns id's of products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var idSet = productIds(),\r\n            product = _.findWhere($form.serializeArray(), {\r\n            name: 'product'\r\n        });\r\n\r\n        if (!_.isUndefined(product)) {\r\n            idSet.push(product.value);\r\n        }\r\n\r\n        return _.uniq(idSet);\r\n    };\r\n});\r\n","Magento_Catalog/js/product/view/product-ids.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Catalog/js/product/view/product-info-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function (_, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns info about products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var product = _.findWhere($form.serializeArray(), {\r\n                name: 'product'\r\n            });\r\n\r\n        if (!_.isUndefined(product)) {\r\n            productInfo().push(\r\n                {\r\n                    'id': product.value\r\n                }\r\n            );\r\n        }\r\n\r\n        return _.uniq(productInfo(), function (item) {\r\n            return item.id;\r\n        });\r\n    };\r\n});\r\n\r\n","Magento_Catalog/js/product/view/product-info.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Catalog/js/product/view/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Catalog/js/product/storage/storage-service'\r\n], function (_, Element, storage) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            identifiersConfig: {\r\n                namespace: 'recently_viewed_product'\r\n            },\r\n            productStorageConfig: {\r\n                namespace: 'product_data_storage',\r\n                updateRequestConfig: {\r\n                    method: 'GET',\r\n                    dataType: 'json'\r\n                },\r\n                className: 'DataStorage'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            if (window.checkout && window.checkout.baseUrl) {\r\n                this.initIdsStorage();\r\n            }\r\n\r\n            this.initDataStorage();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init ids storage\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initIdsStorage: function () {\r\n            storage.onStorageInit(this.identifiersConfig.namespace, this.idsStorageHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init data storage\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initDataStorage: function () {\r\n            storage.onStorageInit(this.productStorageConfig.namespace, this.dataStorageHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init data storage handler\r\n         *\r\n         * @param {Object} dataStorage - storage instance\r\n         */\r\n        dataStorageHandler: function (dataStorage) {\r\n            this.productStorage = dataStorage;\r\n            this.productStorage.add(this.data.items);\r\n        },\r\n\r\n        /**\r\n         * Init ids storage handler\r\n         *\r\n         * @param {Object} idsStorage - storage instance\r\n         */\r\n        idsStorageHandler: function (idsStorage) {\r\n            this.idsStorage = idsStorage;\r\n            this.idsStorage.add(this.getIdentifiers());\r\n        },\r\n\r\n        /**\r\n         * Gets ids from items\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getIdentifiers: function () {\r\n            var result = {},\r\n                productCurrentScope = this.data.productCurrentScope,\r\n                scopeId = productCurrentScope === 'store' ? window.checkout.storeId :\r\n                    productCurrentScope === 'group' ? window.checkout.storeGroupId :\r\n                        window.checkout.websiteId;\r\n\r\n            _.each(this.data.items, function (item, key) {\r\n                result[productCurrentScope + '-' + scopeId + '-' + key] = {\r\n                    'added_at': new Date().getTime() / 1000,\r\n                    'product_id': key,\r\n                    'scope_id': scopeId\r\n                };\r\n            }, this);\r\n\r\n            return result;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/view/compare-products.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery',\r\n    'underscore',\r\n    'mage/mage',\r\n    'mage/decorate'\r\n], function (Component, customerData, $, _) {\r\n    'use strict';\r\n\r\n    var sidebarInitialized = false,\r\n        compareProductsReloaded = false;\r\n\r\n    /**\r\n     * Initialize sidebar\r\n     */\r\n    function initSidebar() {\r\n        if (sidebarInitialized) {\r\n            return;\r\n        }\r\n\r\n        sidebarInitialized = true;\r\n        $('[data-role=compare-products-sidebar]').decorate('list', true);\r\n    }\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.compareProducts = customerData.get('compare-products');\r\n            if (!compareProductsReloaded\r\n                && !_.isEmpty(this.compareProducts())\r\n                //Expired section names are reloaded on page load\r\n                && _.indexOf(customerData.getExpiredSectionNames(), 'compare-products') === -1\r\n                && window.checkout\r\n                && window.checkout.websiteId\r\n                && window.checkout.websiteId !== this.compareProducts().websiteId\r\n            ) {\r\n                //set count to 0 to prevent \"compared products\" blocks and count to show with wrong count and items\r\n                this.compareProducts().count = 0;\r\n                customerData.reload(['compare-products'], false);\r\n                compareProductsReloaded = true;\r\n            }\r\n            initSidebar();\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/view/image.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.template = window.checkout.imageTemplate || this.template;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/product/view/validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation/validation'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.validation', $.mage.validation, {\r\n        options: {\r\n            radioCheckboxClosest: 'ul, ol',\r\n\r\n            /**\r\n             * @param {*} error\r\n             * @param {HTMLElement} element\r\n             */\r\n            errorPlacement: function (error, element) {\r\n                var messageBox,\r\n                    dataValidate;\r\n\r\n                if ($(element).hasClass('datetime-picker')) {\r\n                    element = $(element).parent();\r\n\r\n                    if (element.parent().find('.mage-error').length) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (element.attr('data-errors-message-box')) {\r\n                    messageBox = $(element.attr('data-errors-message-box'));\r\n                    messageBox.html(error);\r\n\r\n                    return;\r\n                }\r\n\r\n                dataValidate = element.attr('data-validate');\r\n\r\n                if (dataValidate && dataValidate.indexOf('validate-one-checkbox-required-by-name') > 0) {\r\n                    error.appendTo('#links-advice-container');\r\n                } else if (element.is(':radio, :checkbox')) {\r\n                    element.closest(this.radioCheckboxClosest).after(error);\r\n                } else {\r\n                    element.after(error);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {HTMLElement} element\r\n             * @param {String} errorClass\r\n             */\r\n            highlight: function (element, errorClass) {\r\n                var dataValidate = $(element).attr('data-validate');\r\n\r\n                if (dataValidate && dataValidate.indexOf('validate-required-datetime') > 0) {\r\n                    $(element).parent().find('.datetime-picker').each(function () {\r\n                        $(this).removeClass(errorClass);\r\n\r\n                        if ($(this).val().length === 0) {\r\n                            $(this).addClass(errorClass);\r\n                        }\r\n                    });\r\n                } else if ($(element).is(':radio, :checkbox')) {\r\n                    $(element).closest(this.radioCheckboxClosest).addClass(errorClass);\r\n                } else {\r\n                    $(element).addClass(errorClass);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {HTMLElement} element\r\n             * @param {String} errorClass\r\n             */\r\n            unhighlight: function (element, errorClass) {\r\n                var dataValidate = $(element).attr('data-validate');\r\n\r\n                if (dataValidate && dataValidate.indexOf('validate-required-datetime') > 0) {\r\n                    $(element).parent().find('.datetime-picker').removeClass(errorClass);\r\n                } else if ($(element).is(':radio, :checkbox')) {\r\n                    $(element).closest(this.radioCheckboxClosest).removeClass(errorClass);\r\n                } else {\r\n                    $(element).removeClass(errorClass);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.validation;\r\n});\r\n","Magento_CatalogSearch/js/search-terms-log.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    return function (data) {\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: data.url,\r\n            data: {\r\n                'q': utils.getUrlParameters(window.location.href).q\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/checkout-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Checkout adapter for customer data storage\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'mageUtils',\r\n    'jquery/jquery-storageapi'\r\n], function ($, storage, utils) {\r\n    'use strict';\r\n\r\n    var cacheKey = 'checkout-data',\r\n\r\n        /**\r\n         * @param {Object} data\r\n         */\r\n        saveData = function (data) {\r\n            storage.set(cacheKey, data);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        initData = function () {\r\n            return {\r\n                'selectedShippingAddress': null, //Selected shipping address pulled from persistence storage\r\n                'shippingAddressFromData': null, //Shipping address pulled from persistence storage\r\n                'newCustomerShippingAddress': null, //Shipping address pulled from persistence storage for customer\r\n                'selectedShippingRate': null, //Shipping rate pulled from persistence storage\r\n                'selectedPaymentMethod': null, //Payment method pulled from persistence storage\r\n                'selectedBillingAddress': null, //Selected billing address pulled from persistence storage\r\n                'billingAddressFromData': null, //Billing address pulled from persistence storage\r\n                'newCustomerBillingAddress': null //Billing address pulled from persistence storage for new customer\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getData = function () {\r\n            var data = storage.get(cacheKey)();\r\n\r\n            if ($.isEmptyObject(data)) {\r\n                data = $.initNamespaceStorage('mage-cache-storage').localStorage.get(cacheKey);\r\n\r\n                if ($.isEmptyObject(data)) {\r\n                    data = initData();\r\n                    saveData(data);\r\n                }\r\n            }\r\n\r\n            return data;\r\n        };\r\n\r\n    return {\r\n        /**\r\n         * Setting the selected shipping address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedShippingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedShippingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the selected shipping address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedShippingAddress: function () {\r\n            return getData().selectedShippingAddress;\r\n        },\r\n\r\n        /**\r\n         * Setting the shipping address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setShippingAddressFromData: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.shippingAddressFromData = utils.filterFormData(data);\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the shipping address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getShippingAddressFromData: function () {\r\n            return getData().shippingAddressFromData;\r\n        },\r\n\r\n        /**\r\n         * Setting the shipping address pulled from persistence storage for new customer\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setNewCustomerShippingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.newCustomerShippingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the shipping address from persistence storage for new customer\r\n         *\r\n         * @return {*}\r\n         */\r\n        getNewCustomerShippingAddress: function () {\r\n            return getData().newCustomerShippingAddress;\r\n        },\r\n\r\n        /**\r\n         * Setting the selected shipping rate pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedShippingRate: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedShippingRate = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the selected shipping rate from local storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedShippingRate: function () {\r\n            return getData().selectedShippingRate;\r\n        },\r\n\r\n        /**\r\n         * Setting the selected payment method pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedPaymentMethod: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedPaymentMethod = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the payment method from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedPaymentMethod: function () {\r\n            return getData().selectedPaymentMethod;\r\n        },\r\n\r\n        /**\r\n         * Setting the selected billing address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedBillingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedBillingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the selected billing address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedBillingAddress: function () {\r\n            return getData().selectedBillingAddress;\r\n        },\r\n\r\n        /**\r\n         * Setting the billing address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setBillingAddressFromData: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.billingAddressFromData = utils.filterFormData(data);\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the billing address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getBillingAddressFromData: function () {\r\n            return getData().billingAddressFromData;\r\n        },\r\n\r\n        /**\r\n         * Setting the billing address pulled from persistence storage for new customer\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setNewCustomerBillingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.newCustomerBillingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the billing address from persistence storage for new customer\r\n         *\r\n         * @return {*}\r\n         */\r\n        getNewCustomerBillingAddress: function () {\r\n            return getData().newCustomerBillingAddress;\r\n        },\r\n\r\n        /**\r\n         * Pulling the email address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getValidatedEmailValue: function () {\r\n            var obj = getData();\r\n\r\n            return obj.validatedEmailValue ? obj.validatedEmailValue : '';\r\n        },\r\n\r\n        /**\r\n         * Setting the email address pulled from persistence storage\r\n         *\r\n         * @param {String} email\r\n         */\r\n        setValidatedEmailValue: function (email) {\r\n            var obj = getData();\r\n\r\n            obj.validatedEmailValue = email;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the email input field value from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getInputFieldEmailValue: function () {\r\n            var obj = getData();\r\n\r\n            return obj.inputFieldEmailValue ? obj.inputFieldEmailValue : '';\r\n        },\r\n\r\n        /**\r\n         * Setting the email input field value pulled from persistence storage\r\n         *\r\n         * @param {String} email\r\n         */\r\n        setInputFieldEmailValue: function (email) {\r\n            var obj = getData();\r\n\r\n            obj.inputFieldEmailValue = email;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the checked email value from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getCheckedEmailValue: function () {\r\n            var obj = getData();\r\n\r\n            return obj.checkedEmailValue ? obj.checkedEmailValue : '';\r\n        },\r\n\r\n        /**\r\n         * Setting the checked email value pulled from persistence storage\r\n         *\r\n         * @param {String} email\r\n         */\r\n        setCheckedEmailValue: function (email) {\r\n            var obj = getData();\r\n\r\n            obj.checkedEmailValue = email;\r\n            saveData(obj);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/checkout-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'rjsResolver'\r\n], function (resolver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Removes provided loader element from DOM.\r\n     *\r\n     * @param {HTMLElement} $loader - Loader DOM element.\r\n     */\r\n    function hideLoader($loader) {\r\n        $loader.parentNode.removeChild($loader);\r\n    }\r\n\r\n    /**\r\n     * Initializes assets loading process listener.\r\n     *\r\n     * @param {Object} config - Optional configuration\r\n     * @param {HTMLElement} $loader - Loader DOM element.\r\n     */\r\n    function init(config, $loader) {\r\n        resolver(hideLoader.bind(null, $loader));\r\n    }\r\n\r\n    return init;\r\n});\r\n","Magento_Checkout/js/discount-codes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.discountCode', {\r\n        options: {\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.couponCode = $(this.options.couponCodeSelector);\r\n            this.removeCoupon = $(this.options.removeCouponSelector);\r\n\r\n            $(this.options.applyButton).on('click', $.proxy(function () {\r\n                this.couponCode.attr('data-validate', '{required:true}');\r\n                this.removeCoupon.attr('value', '0');\r\n                $(this.element).validation().trigger('submit');\r\n            }, this));\r\n\r\n            $(this.options.cancelButton).on('click', $.proxy(function () {\r\n                this.couponCode.removeAttr('data-validate');\r\n                this.removeCoupon.attr('value', '1');\r\n                this.element.trigger('submit');\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.discountCode;\r\n});\r\n","Magento_Checkout/js/empty-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['Magento_Customer/js/customer-data'], function (customerData) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var cartData = customerData.get('cart');\r\n\r\n        customerData.getInitCustomerData().done(function () {\r\n            if (cartData().items && cartData().items.length !== 0) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/proceed-to-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, authenticationPopup, customerData) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('click', function (event) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer');\r\n\r\n            event.preventDefault();\r\n\r\n            if (!customer().firstname && cart().isGuestCheckoutAllowed === false) {\r\n                authenticationPopup.showModal();\r\n\r\n                return false;\r\n            }\r\n            $(element).attr('disabled', true);\r\n            location.href = config.checkoutUrl;\r\n        });\r\n\r\n    };\r\n});\r\n","Magento_Checkout/js/region-updater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function ($, mageTemplate, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.regionUpdater', {\r\n        options: {\r\n            regionTemplate:\r\n                '<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>' +\r\n                    '<%- data.title %>' +\r\n                '</option>',\r\n            isRegionRequired: true,\r\n            isZipRequired: true,\r\n            isCountryRequired: true,\r\n            currentRegion: null,\r\n            isMultipleCountriesAllowed: true\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initCountryElement();\r\n\r\n            this.currentRegionOption = this.options.currentRegion;\r\n            this.regionTmpl = mageTemplate(this.options.regionTemplate);\r\n\r\n            this._updateRegion(this.element.find('option:selected').val());\r\n\r\n            $(this.options.regionListId).on('change', $.proxy(function (e) {\r\n                this.setOption = false;\r\n                this.currentRegionOption = $(e.target).val();\r\n            }, this));\r\n\r\n            $(this.options.regionInputId).on('focusout', $.proxy(function () {\r\n                this.setOption = true;\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initCountryElement: function () {\r\n\r\n            if (this.options.isMultipleCountriesAllowed) {\r\n                this.element.parents('div.field').show();\r\n                this.element.on('change', $.proxy(function (e) {\r\n                    // clear region inputs on country change\r\n                    $(this.options.regionListId).val('');\r\n                    $(this.options.regionInputId).val('');\r\n                    this._updateRegion($(e.target).val());\r\n                }, this));\r\n\r\n                if (this.options.isCountryRequired) {\r\n                    this.element.addClass('required-entry');\r\n                    this.element.parents('div.field').addClass('required');\r\n                }\r\n            } else {\r\n                this.element.parents('div.field').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove options from dropdown list\r\n         *\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @private\r\n         */\r\n        _removeSelectOptions: function (selectElement) {\r\n            selectElement.find('option').each(function (index) {\r\n                if (index) {\r\n                    $(this).remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render dropdown list\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @param {String} key - region code\r\n         * @param {Object} value - region object\r\n         * @private\r\n         */\r\n        _renderSelectOption: function (selectElement, key, value) {\r\n            selectElement.append($.proxy(function () {\r\n                var name = value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&'),\r\n                    tmplData,\r\n                    tmpl;\r\n\r\n                if (value.code && $(name).is('span')) {\r\n                    key = value.code;\r\n                    value.name = $(name).text();\r\n                }\r\n\r\n                tmplData = {\r\n                    value: key,\r\n                    title: value.name,\r\n                    isSelected: false\r\n                };\r\n\r\n                if (this.options.defaultRegion === key) {\r\n                    tmplData.isSelected = true;\r\n                }\r\n\r\n                tmpl = this.regionTmpl({\r\n                    data: tmplData\r\n                });\r\n\r\n                return $(tmpl);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Takes clearError callback function as first option\r\n         * If no form is passed as option, look up the closest form and call clearError method.\r\n         * @private\r\n         */\r\n        _clearError: function () {\r\n            var args = ['clearError', this.options.regionListId, this.options.regionInputId, this.options.postcodeId];\r\n\r\n            if (this.options.clearError && typeof this.options.clearError === 'function') {\r\n                this.options.clearError.call(this);\r\n            } else {\r\n                if (!this.options.form) {\r\n                    this.options.form = this.element.closest('form').length ? $(this.element.closest('form')[0]) : null;\r\n                }\r\n\r\n                this.options.form = $(this.options.form);\r\n\r\n                this.options.form && this.options.form.data('validator') &&\r\n                    this.options.form.validation.apply(this.options.form, _.compact(args));\r\n\r\n                // Clean up errors on region & zip fix\r\n                $(this.options.regionInputId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n                $(this.options.regionListId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n                $(this.options.postcodeId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update dropdown list based on the country selected\r\n         *\r\n         * @param {String} country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _updateRegion: function (country) {\r\n            // Clear validation error messages\r\n            var regionList = $(this.options.regionListId),\r\n                regionInput = $(this.options.regionInputId),\r\n                postcode = $(this.options.postcodeId),\r\n                label = regionList.parent().siblings('label'),\r\n                container = regionList.parents('div.field'),\r\n                regionsEntries,\r\n                regionId,\r\n                regionData;\r\n\r\n            this._clearError();\r\n            this._checkRegionRequired(country);\r\n\r\n            // Populate state/province dropdown list if available or use input box\r\n            if (this.options.regionJson[country]) {\r\n                this._removeSelectOptions(regionList);\r\n                regionsEntries = _.pairs(this.options.regionJson[country]);\r\n                regionsEntries.sort(function (a, b) {\r\n                    return a[1].name > b[1].name ? 1 : -1;\r\n                });\r\n                $.each(regionsEntries, $.proxy(function (key, value) {\r\n                    regionId = value[0];\r\n                    regionData = value[1];\r\n                    this._renderSelectOption(regionList, regionId, regionData);\r\n                }, this));\r\n\r\n                if (this.currentRegionOption) {\r\n                    regionList.val(this.currentRegionOption);\r\n                }\r\n\r\n                if (this.setOption) {\r\n                    regionList.find('option').filter(function () {\r\n                        return this.text === regionInput.val();\r\n                    }).attr('selected', true);\r\n                }\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionList.addClass('required-entry').prop('disabled', false);\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    regionList.removeClass('required-entry validate-select').removeAttr('data-validate');\r\n                    container.removeClass('required');\r\n\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionList.hide();\r\n                        container.hide();\r\n                    } else {\r\n                        regionList.prop('disabled', false).show();\r\n                    }\r\n                }\r\n\r\n                regionList.show();\r\n                regionInput.hide();\r\n                label.attr('for', regionList.attr('id'));\r\n            } else {\r\n                this._removeSelectOptions(regionList);\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionInput.addClass('required-entry').prop('disabled', false);\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionInput.attr('disabled', 'disabled');\r\n                        container.hide();\r\n                    }\r\n                    container.removeClass('required');\r\n                    regionInput.removeClass('required-entry');\r\n                }\r\n\r\n                regionList.removeClass('required-entry').prop('disabled', 'disabled').hide();\r\n                regionInput.show();\r\n                label.attr('for', regionInput.attr('id'));\r\n            }\r\n\r\n            // If country is in optionalzip list, make postcode input not required\r\n            if (this.options.isZipRequired) {\r\n                $.inArray(country, this.options.countriesWithOptionalZip) >= 0 ?\r\n                    postcode.removeClass('required-entry').closest('.field').removeClass('required') :\r\n                    postcode.addClass('required-entry').closest('.field').addClass('required');\r\n            }\r\n\r\n            // Add defaultvalue attribute to state/province select element\r\n            regionList.attr('defaultvalue', this.options.defaultRegion);\r\n            this.options.form.find('[type=\"submit\"]').prop('disabled', false).show();\r\n        },\r\n\r\n        /**\r\n         * Check if the selected country has a mandatory region selection\r\n         *\r\n         * @param {String} country - Code of the country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _checkRegionRequired: function (country) {\r\n            var self = this;\r\n\r\n            this.options.isRegionRequired = false;\r\n            $.each(this.options.regionJson.config['regions_required'], function (index, elem) {\r\n                if (elem === country) {\r\n                    self.options.isRegionRequired = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.regionUpdater;\r\n});\r\n","Magento_Checkout/js/shopping-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    $.widget('mage.shoppingCart', {\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            var items, i, reload;\r\n\r\n            $(this.options.emptyCartButton).on('click', $.proxy(function () {\r\n                this._confirmClearCart();\r\n            }, this));\r\n            items = $.find('[data-role=\"cart-item-qty\"]');\r\n\r\n            for (i = 0; i < items.length; i++) {\r\n                $(items[i]).on('keypress', $.proxy(function (event) { //eslint-disable-line no-loop-func\r\n                    var keyCode = event.keyCode ? event.keyCode : event.which;\r\n\r\n                    if (keyCode == 13) { //eslint-disable-line eqeqeq\r\n                        $(this.options.emptyCartButton).attr('name', 'update_cart_action_temp');\r\n                        $(this.options.updateCartActionContainer)\r\n                            .attr('name', 'update_cart_action').attr('value', 'update_qty');\r\n\r\n                    }\r\n                }, this));\r\n            }\r\n            $(this.options.continueShoppingButton).on('click', $.proxy(function () {\r\n                location.href = this.options.continueShoppingUrl;\r\n            }, this));\r\n\r\n            $(document).on('ajax:removeFromCart', $.proxy(function () {\r\n                reload = true;\r\n                $('div.block.block-minicart').on('dropdowndialogclose', $.proxy(function () {\r\n                    if (reload === true) {\r\n                        location.reload();\r\n                        reload = false;\r\n                    }\r\n                    $('div.block.block-minicart').off('dropdowndialogclose');\r\n                }));\r\n            }, this));\r\n            $(document).on('ajax:updateItemQty', $.proxy(function () {\r\n                reload = true;\r\n                $('div.block.block-minicart').on('dropdowndialogclose', $.proxy(function () {\r\n                    if (reload === true) {\r\n                        location.reload();\r\n                        reload = false;\r\n                    }\r\n                    $('div.block.block-minicart').off('dropdowndialogclose');\r\n                }));\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Display confirmation modal for clearing the cart\r\n         * @private\r\n         */\r\n        _confirmClearCart: function () {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: $.mage.__('Are you sure you want to remove all items from your shopping cart?'),\r\n                actions: {\r\n                    /**\r\n                     * Confirmation modal handler to execute clear cart action\r\n                     */\r\n                    confirm: function () {\r\n                        self.clearCart();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prepares the form and submit to clear the cart\r\n         * @public\r\n         */\r\n        clearCart: function () {\r\n            $(this.options.emptyCartButton).attr('name', 'update_cart_action_temp');\r\n            $(this.options.updateCartActionContainer)\r\n                .attr('name', 'update_cart_action').attr('value', 'empty_cart');\r\n\r\n            if ($(this.options.emptyCartButton).parents('form').length > 0) {\r\n                $(this.options.emptyCartButton).parents('form').trigger('submit');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.shoppingCart;\r\n});\r\n","Magento_Checkout/js/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/decorate',\r\n    'mage/collapsible',\r\n    'mage/cookies',\r\n    'jquery-ui-modules/effect-fade'\r\n], function ($, authenticationPopup, customerData, alert, confirm, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.sidebar', {\r\n        options: {\r\n            isRecursive: true,\r\n            minicart: {\r\n                maxItemsVisible: 3\r\n            }\r\n        },\r\n        scrollHeight: 0,\r\n        shoppingCartUrl: window.checkout.shoppingCartUrl,\r\n\r\n        /**\r\n         * Create sidebar.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initContent();\r\n        },\r\n\r\n        /**\r\n         * Update sidebar block.\r\n         */\r\n        update: function () {\r\n            $(this.options.targetElement).trigger('contentUpdated');\r\n            this._calcHeight();\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _initContent: function () {\r\n            var self = this,\r\n                events = {};\r\n\r\n            this.element.decorate('list', this.options.isRecursive);\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['click ' + this.options.button.close] = function (event) {\r\n                event.stopPropagation();\r\n                $(self.options.targetElement).dropdownDialog('close');\r\n            };\r\n            events['click ' + this.options.button.checkout] = $.proxy(function () {\r\n                var cart = customerData.get('cart'),\r\n                    customer = customerData.get('customer'),\r\n                    element = $(this.options.button.checkout);\r\n\r\n                if (!customer().firstname && cart().isGuestCheckoutAllowed === false) {\r\n                    // set URL for redirect on successful login/registration. It's postprocessed on backend.\r\n                    $.cookie('login_redirect', this.options.url.checkout);\r\n\r\n                    if (this.options.url.isRedirectRequired) {\r\n                        element.prop('disabled', true);\r\n                        location.href = this.options.url.loginUrl;\r\n                    } else {\r\n                        authenticationPopup.showModal();\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n                element.prop('disabled', true);\r\n                location.href = this.options.url.checkout;\r\n            }, this);\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['click ' + this.options.button.remove] =  function (event) {\r\n                event.stopPropagation();\r\n                confirm({\r\n                    content: self.options.confirmMessage,\r\n                    actions: {\r\n                        /** @inheritdoc */\r\n                        confirm: function () {\r\n                            self._removeItem($(event.currentTarget));\r\n                        },\r\n\r\n                        /** @inheritdoc */\r\n                        always: function (e) {\r\n                            e.stopImmediatePropagation();\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['keyup ' + this.options.item.qty] = function (event) {\r\n                self._showItemButton($(event.target));\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['change ' + this.options.item.qty] = function (event) {\r\n                self._showItemButton($(event.target));\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['click ' + this.options.item.button] = function (event) {\r\n                event.stopPropagation();\r\n                self._updateItemQty($(event.currentTarget));\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['focusout ' + this.options.item.qty] = function (event) {\r\n                self._validateQty($(event.currentTarget));\r\n            };\r\n\r\n            this._on(this.element, events);\r\n            this._calcHeight();\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _showItemButton: function (elem) {\r\n            var itemId = elem.data('cart-item'),\r\n                itemQty = elem.data('item-qty');\r\n\r\n            if (this._isValidQty(itemQty, elem.val())) {\r\n                $('#update-cart-item-' + itemId).show('fade', 300);\r\n            } else if (elem.val() == 0) { //eslint-disable-line eqeqeq\r\n                this._hideItemButton(elem);\r\n            } else {\r\n                this._hideItemButton(elem);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} origin - origin qty. 'data-item-qty' attribute.\r\n         * @param {*} changed - new qty.\r\n         * @returns {Boolean}\r\n         * @private\r\n         */\r\n        _isValidQty: function (origin, changed) {\r\n            return origin != changed && //eslint-disable-line eqeqeq\r\n                changed.length > 0 &&\r\n                changed - 0 == changed && //eslint-disable-line eqeqeq\r\n                changed - 0 > 0;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} elem\r\n         * @private\r\n         */\r\n        _validateQty: function (elem) {\r\n            var itemQty = elem.data('item-qty');\r\n\r\n            if (!this._isValidQty(itemQty, elem.val())) {\r\n                elem.val(itemQty);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _hideItemButton: function (elem) {\r\n            var itemId = elem.data('cart-item');\r\n\r\n            $('#update-cart-item-' + itemId).hide('fade', 300);\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _updateItemQty: function (elem) {\r\n            var itemId = elem.data('cart-item');\r\n\r\n            this._ajax(this.options.url.update, {\r\n                'item_id': itemId,\r\n                'item_qty': $('#cart-item-' + itemId + '-qty').val()\r\n            }, elem, this._updateItemQtyAfter);\r\n        },\r\n\r\n        /**\r\n         * Update content after update qty\r\n         *\r\n         * @param {HTMLElement} elem\r\n         */\r\n        _updateItemQtyAfter: function (elem) {\r\n            var productData = this._getProductById(Number(elem.data('cart-item')));\r\n\r\n            if (!_.isUndefined(productData)) {\r\n                $(document).trigger('ajax:updateCartItemQty');\r\n\r\n                if (window.location.href === this.shoppingCartUrl) {\r\n                    window.location.reload(false);\r\n                }\r\n            }\r\n            this._hideItemButton(elem);\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _removeItem: function (elem) {\r\n            var itemId = elem.data('cart-item');\r\n\r\n            this._ajax(this.options.url.remove, {\r\n                'item_id': itemId\r\n            }, elem, this._removeItemAfter);\r\n        },\r\n\r\n        /**\r\n         * Update content after item remove\r\n         *\r\n         * @param {Object} elem\r\n         * @private\r\n         */\r\n        _removeItemAfter: function (elem) {\r\n            var productData = this._getProductById(Number(elem.data('cart-item')));\r\n\r\n            if (!_.isUndefined(productData)) {\r\n                $(document).trigger('ajax:removeFromCart', {\r\n                    productIds: [productData['product_id']],\r\n                    productInfo: [\r\n                        {\r\n                            'id': productData['product_id']\r\n                        }\r\n                    ]\r\n                });\r\n\r\n                if (window.location.href.indexOf(this.shoppingCartUrl) === 0) {\r\n                    window.location.reload();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Retrieves product data by Id.\r\n         *\r\n         * @param {Number} productId - product Id\r\n         * @returns {Object|undefined}\r\n         * @private\r\n         */\r\n        _getProductById: function (productId) {\r\n            return _.find(customerData.get('cart')().items, function (item) {\r\n                return productId === Number(item['item_id']);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {String} url - ajax url\r\n         * @param {Object} data - post data for ajax call\r\n         * @param {Object} elem - element that initiated the event\r\n         * @param {Function} callback - callback method to execute after AJAX success\r\n         */\r\n        _ajax: function (url, data, elem, callback) {\r\n            $.extend(data, {\r\n                'form_key': $.mage.cookies.get('form_key')\r\n            });\r\n\r\n            $.ajax({\r\n                url: url,\r\n                data: data,\r\n                type: 'post',\r\n                dataType: 'json',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                beforeSend: function () {\r\n                    elem.attr('disabled', 'disabled');\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                complete: function () {\r\n                    elem.attr('disabled', null);\r\n                }\r\n            })\r\n                .done(function (response) {\r\n                    var msg;\r\n\r\n                    if (response.success) {\r\n                        callback.call(this, elem, response);\r\n                    } else {\r\n                        msg = response['error_message'];\r\n\r\n                        if (msg) {\r\n                            alert({\r\n                                content: msg\r\n                            });\r\n                        }\r\n                    }\r\n                })\r\n                .fail(function (error) {\r\n                    console.log(JSON.stringify(error));\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Calculate height of minicart list\r\n         *\r\n         * @private\r\n         */\r\n        _calcHeight: function () {\r\n            var self = this,\r\n                height = 0,\r\n                counter = this.options.minicart.maxItemsVisible,\r\n                target = $(this.options.minicart.list),\r\n                outerHeight;\r\n\r\n            self.scrollHeight = 0;\r\n            target.children().each(function () {\r\n\r\n                if ($(this).find('.options').length > 0) {\r\n                    $(this).collapsible();\r\n                }\r\n                outerHeight = $(this).outerHeight(true);\r\n\r\n                if (counter-- > 0) {\r\n                    height += outerHeight;\r\n                }\r\n                self.scrollHeight += outerHeight;\r\n            });\r\n\r\n            target.parent().height(height);\r\n        }\r\n    });\r\n\r\n    return $.mage.sidebar;\r\n});\r\n","Magento_Checkout/js/action/create-billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/address-converter'\r\n], function (addressConverter) {\r\n    'use strict';\r\n\r\n    return function (addressData) {\r\n        var address = addressConverter.formAddressDataToQuoteAddress(addressData);\r\n\r\n        /**\r\n         * Returns new customer billing address type.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        address.getType = function () {\r\n            return 'new-customer-billing-address';\r\n        };\r\n\r\n        return address;\r\n    };\r\n});\r\n","Magento_Checkout/js/action/create-shipping-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/address-converter'\r\n], function (addressList, addressConverter) {\r\n    'use strict';\r\n\r\n    return function (addressData) {\r\n        var address = addressConverter.formAddressDataToQuoteAddress(addressData),\r\n            isAddressUpdated = addressList().some(function (currentAddress, index, addresses) {\r\n                if (currentAddress.getKey() == address.getKey()) { //eslint-disable-line eqeqeq\r\n                    addresses[index] = address;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n        if (!isAddressUpdated) {\r\n            addressList.push(address);\r\n        } else {\r\n            addressList.valueHasMutated();\r\n        }\r\n\r\n        return address;\r\n    };\r\n});\r\n","Magento_Checkout/js/action/get-payment-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/model/payment-service'\r\n], function ($, quote, urlBuilder, storage, errorProcessor, customer, methodConverter, paymentService) {\r\n    'use strict';\r\n\r\n    return function (deferred, messageContainer) {\r\n        var serviceUrl;\r\n\r\n        deferred = deferred || $.Deferred();\r\n\r\n        /**\r\n         * Checkout for guest and registered customer.\r\n         */\r\n        if (!customer.isLoggedIn()) {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/payment-information', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/payment-information', {});\r\n        }\r\n\r\n        return storage.get(\r\n            serviceUrl, false\r\n        ).done(function (response) {\r\n            quote.setTotals(response.totals);\r\n            paymentService.setPaymentMethods(methodConverter(response['payment_methods']));\r\n            deferred.resolve();\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response, messageContainer);\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/action/get-totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    '../model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/totals'\r\n], function ($, quote, resourceUrlManager, errorProcessor, storage, totals) {\r\n    'use strict';\r\n\r\n    return function (callbacks, deferred) {\r\n        deferred = deferred || $.Deferred();\r\n        totals.isLoading(true);\r\n\r\n        return storage.get(\r\n            resourceUrlManager.getUrlForCartTotals(quote),\r\n            false\r\n        ).done(function (response) {\r\n            var proceed = true;\r\n\r\n            totals.isLoading(false);\r\n\r\n            if (callbacks.length > 0) {\r\n                $.each(callbacks, function (index, callback) {\r\n                    proceed = proceed && callback();\r\n                });\r\n            }\r\n\r\n            if (proceed) {\r\n                quote.setTotals(response);\r\n                deferred.resolve();\r\n            }\r\n        }).fail(function (response) {\r\n            totals.isLoading(false);\r\n            deferred.reject();\r\n            errorProcessor.process(response);\r\n        }).always(function () {\r\n            totals.isLoading(false);\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/action/place-order.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/place-order'\r\n], function (quote, urlBuilder, customer, placeOrderService) {\r\n    'use strict';\r\n\r\n    return function (paymentData, messageContainer) {\r\n        var serviceUrl, payload;\r\n\r\n        payload = {\r\n            cartId: quote.getQuoteId(),\r\n            billingAddress: quote.billingAddress(),\r\n            paymentMethod: paymentData\r\n        };\r\n\r\n        if (customer.isLoggedIn()) {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/payment-information', {});\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:quoteId/payment-information', {\r\n                quoteId: quote.getQuoteId()\r\n            });\r\n            payload.email = quote.guestEmail;\r\n        }\r\n\r\n        return placeOrderService(serviceUrl, payload, messageContainer);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/recollect-shipping-rates.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/shipping-rate-registry'\r\n], function (quote, selectShippingAddress, rateRegistry) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var shippingAddress = null;\r\n\r\n        if (!quote.isVirtual()) {\r\n            shippingAddress = quote.shippingAddress();\r\n\r\n            rateRegistry.set(shippingAddress.getCacheKey(), null);\r\n            selectShippingAddress(shippingAddress);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/action/redirect-on-success.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'mage/url',\r\n        'Magento_Checkout/js/model/full-screen-loader'\r\n    ],\r\n    function (url, fullScreenLoader) {\r\n        'use strict';\r\n\r\n        return {\r\n            redirectUrl: window.checkoutConfig.defaultSuccessPageUrl,\r\n\r\n            /**\r\n             * Provide redirect to page\r\n             */\r\n            execute: function () {\r\n                fullScreenLoader.startLoader();\r\n                this.redirectToSuccessPage();\r\n            },\r\n\r\n            /**\r\n             * Redirect to success page.\r\n             */\r\n            redirectToSuccessPage: function () {\r\n                window.location.replace(url.build(this.redirectUrl));\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/action/select-billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    '../model/quote'\r\n], function ($, quote) {\r\n    'use strict';\r\n\r\n    return function (billingAddress) {\r\n        var address = null;\r\n\r\n        if (quote.shippingAddress() && billingAddress.getCacheKey() == //eslint-disable-line eqeqeq\r\n            quote.shippingAddress().getCacheKey()\r\n        ) {\r\n            address = $.extend(true, {}, billingAddress);\r\n            address.saveInAddressBook = null;\r\n        } else {\r\n            address = billingAddress;\r\n        }\r\n        quote.billingAddress(address);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/select-payment-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    return function (paymentMethod) {\r\n        if (paymentMethod) {\r\n            paymentMethod.__disableTmpl = {\r\n                title: true\r\n            };\r\n        }\r\n        quote.paymentMethod(paymentMethod);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/select-shipping-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    return function (shippingAddress) {\r\n        quote.shippingAddress(shippingAddress);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/select-shipping-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    '../model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    return function (shippingMethod) {\r\n        quote.shippingMethod(shippingMethod);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/set-billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/url-builder',\r\n        'mage/storage',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'Magento_Customer/js/model/customer',\r\n        'Magento_Checkout/js/model/full-screen-loader',\r\n        'Magento_Checkout/js/action/get-payment-information'\r\n    ],\r\n    function ($,\r\n              quote,\r\n              urlBuilder,\r\n              storage,\r\n              errorProcessor,\r\n              customer,\r\n              fullScreenLoader,\r\n              getPaymentInformationAction\r\n    ) {\r\n        'use strict';\r\n\r\n        return function (messageContainer) {\r\n            var serviceUrl,\r\n                payload;\r\n\r\n            /**\r\n             * Checkout for guest and registered customer.\r\n             */\r\n            if (!customer.isLoggedIn()) {\r\n                serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/billing-address', {\r\n                    cartId: quote.getQuoteId()\r\n                });\r\n                payload = {\r\n                    cartId: quote.getQuoteId(),\r\n                    address: quote.billingAddress()\r\n                };\r\n            } else {\r\n                serviceUrl = urlBuilder.createUrl('/carts/mine/billing-address', {});\r\n                payload = {\r\n                    cartId: quote.getQuoteId(),\r\n                    address: quote.billingAddress()\r\n                };\r\n            }\r\n\r\n            fullScreenLoader.startLoader();\r\n\r\n            return storage.post(\r\n                serviceUrl, JSON.stringify(payload)\r\n            ).done(\r\n                function () {\r\n                    var deferred = $.Deferred();\r\n\r\n                    getPaymentInformationAction(deferred);\r\n                    $.when(deferred).done(function () {\r\n                        fullScreenLoader.stopLoader();\r\n                    });\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response, messageContainer);\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/action/set-payment-information-extended.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/action/get-totals',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'underscore',\r\n    'Magento_Checkout/js/model/payment/place-order-hooks'\r\n], function (quote, urlBuilder, storage, errorProcessor, customer, getTotalsAction, fullScreenLoader, _, hooks) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Filter template data.\r\n     *\r\n     * @param {Object|Array} data\r\n     */\r\n    var filterTemplateData = function (data) {\r\n        return _.each(data, function (value, key, list) {\r\n            if (_.isArray(value) || _.isObject(value)) {\r\n                list[key] = filterTemplateData(value);\r\n            }\r\n\r\n            if (key === '__disableTmpl' || key === 'title') {\r\n                delete list[key];\r\n            }\r\n        });\r\n    };\r\n\r\n    return function (messageContainer, paymentData, skipBilling) {\r\n        var serviceUrl,\r\n            payload,\r\n            headers = {};\r\n\r\n        paymentData = filterTemplateData(paymentData);\r\n        skipBilling = skipBilling || false;\r\n        payload = {\r\n            cartId: quote.getQuoteId(),\r\n            paymentMethod: paymentData\r\n        };\r\n\r\n        /**\r\n         * Checkout for guest and registered customer.\r\n         */\r\n        if (!customer.isLoggedIn()) {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/set-payment-information', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n            payload.email = quote.guestEmail;\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/set-payment-information', {});\r\n        }\r\n\r\n        if (skipBilling === false) {\r\n            payload.billingAddress = quote.billingAddress();\r\n        }\r\n\r\n        fullScreenLoader.startLoader();\r\n\r\n        _.each(hooks.requestModifiers, function (modifier) {\r\n            modifier(headers, payload);\r\n        });\r\n\r\n        return storage.post(\r\n            serviceUrl, JSON.stringify(payload), true, 'application/json', headers\r\n        ).fail(\r\n            function (response) {\r\n                errorProcessor.process(response, messageContainer);\r\n            }\r\n        ).always(\r\n            function () {\r\n                fullScreenLoader.stopLoader();\r\n                _.each(hooks.afterRequestListeners, function (listener) {\r\n                    listener();\r\n                });\r\n            }\r\n        );\r\n    };\r\n});\r\n","Magento_Checkout/js/action/set-payment-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/action/set-payment-information-extended'\r\n\r\n], function (setPaymentInformationExtended) {\r\n    'use strict';\r\n\r\n    return function (messageContainer, paymentData) {\r\n\r\n        return setPaymentInformationExtended(messageContainer, paymentData, false);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/set-shipping-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    '../model/quote',\r\n    'Magento_Checkout/js/model/shipping-save-processor'\r\n], function (quote, shippingSaveProcessor) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        return shippingSaveProcessor.saveShippingInformation(quote.shippingAddress().getType());\r\n    };\r\n});\r\n","Magento_Checkout/js/action/update-shopping-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery',\r\n    'mage/translate',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function (alert, confirm, $, $t) {\r\n    'use strict';\r\n\r\n    $.widget('mage.updateShoppingCart', {\r\n        options: {\r\n            validationURL: '',\r\n            eventName: 'updateCartItemQty',\r\n            updateCartActionContainer: '',\r\n            isCartHasUpdatedContent: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this._on(this.element, {\r\n                'submit': this.onSubmit\r\n            });\r\n            this._on('[data-role=cart-item-qty]', {\r\n                'change': function () {\r\n                    this.isCartHasUpdatedContent = true;\r\n                }\r\n            });\r\n            this._on('ul.pages-items', {\r\n                'click a': function (event) {\r\n                    if (this.isCartHasUpdatedContent) {\r\n                        event.preventDefault();\r\n                        this.changePageConfirm($(event.currentTarget).attr('href'));\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Show the confirmation popup\r\n         * @param nextPageUrl\r\n         */\r\n        changePageConfirm: function (nextPageUrl) {\r\n            confirm({\r\n                title: $t('Are you sure you want to leave the page?'),\r\n                content: $t('Changes you made to the cart will not be saved.'),\r\n                actions: {\r\n                    confirm: function () {\r\n                        window.location.href = nextPageUrl;\r\n                    }\r\n                },\r\n                buttons: [{\r\n                    text: $t('Cancel'),\r\n                    class: 'action-secondary action-dismiss',\r\n                    click: function (event) {\r\n                        this.closeModal(event);\r\n                    }\r\n                }, {\r\n                    text: $t('Leave'),\r\n                    class: 'action-primary action-accept',\r\n                    click: function (event) {\r\n                        this.closeModal(event, true);\r\n                    }\r\n                }]\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prevents default submit action and calls form validator.\r\n         *\r\n         * @param {Event} event\r\n         * @return {Boolean}\r\n         */\r\n        onSubmit: function (event) {\r\n            var action = this.element.find(this.options.updateCartActionContainer).val();\r\n\r\n            if (!this.options.validationURL || action === 'empty_cart') {\r\n                return true;\r\n            }\r\n\r\n            if (this.isValid()) {\r\n                event.preventDefault();\r\n                this.validateItems(this.options.validationURL, this.element.serialize());\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Validates requested form.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isValid: function () {\r\n            return this.element.validation() && this.element.validation('isValid');\r\n        },\r\n\r\n        /**\r\n         * Validates updated shopping cart data.\r\n         *\r\n         * @param {String} url - request url\r\n         * @param {Object} data - post data for ajax call\r\n         */\r\n        validateItems: function (url, data) {\r\n            $.extend(data, {\r\n                'form_key': $.mage.cookies.get('form_key')\r\n            });\r\n\r\n            $.ajax({\r\n                url: url,\r\n                data: data,\r\n                type: 'post',\r\n                dataType: 'json',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                beforeSend: function () {\r\n                    $(document.body).trigger('processStart');\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                complete: function () {\r\n                    $(document.body).trigger('processStop');\r\n                }\r\n            })\r\n                .done(function (response) {\r\n                    if (response.success) {\r\n                        this.onSuccess();\r\n                    } else {\r\n                        this.onError(response);\r\n                    }\r\n                })\r\n                .fail(function () {\r\n                    this.submitForm();\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Form validation succeed.\r\n         */\r\n        onSuccess: function () {\r\n            $(document).trigger('ajax:' + this.options.eventName);\r\n            this.submitForm();\r\n        },\r\n\r\n        /**\r\n         * Form validation failed.\r\n         */\r\n        onError: function (response) {\r\n            var that = this,\r\n                elm,\r\n                responseData = [];\r\n\r\n            try {\r\n                responseData = JSON.parse(response['error_message']);\r\n            } catch (error) {\r\n            }\r\n\r\n            if (response['error_message']) {\r\n                try {\r\n                    $.each(responseData, function (index, data) {\r\n\r\n                        if (data.itemId !== undefined) {\r\n                            elm = $('#cart-' + data.itemId + '-qty');\r\n                            elm.val(elm.attr('data-item-qty'));\r\n                        }\r\n                        response['error_message'] = data.error;\r\n                    });\r\n                } catch (e) {}\r\n                alert({\r\n                    content: response['error_message'],\r\n                    actions: {\r\n                        /** @inheritdoc */\r\n                        always: function () {\r\n                            that.submitForm();\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                this.submitForm();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Real submit of validated form.\r\n         */\r\n        submitForm: function () {\r\n            this.element\r\n                .off('submit', this.onSubmit)\r\n                .on('submit', function () {\r\n                    $(document.body).trigger('processStart');\r\n                })\r\n                .trigger('submit');\r\n        }\r\n    });\r\n\r\n    return $.mage.updateShoppingCart;\r\n});\r\n","Magento_Checkout/js/model/address-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/new-customer-address',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/utils/objects',\r\n    'underscore'\r\n], function ($, address, customerData, mageUtils, _) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return {\r\n        /**\r\n         * Convert address form data to Address object\r\n         *\r\n         * @param {Object} formData\r\n         * @returns {Object}\r\n         */\r\n        formAddressDataToQuoteAddress: function (formData) {\r\n            // clone address form data to new object\r\n            var addressData = $.extend(true, {}, formData),\r\n                region,\r\n                regionName = addressData.region,\r\n                customAttributes;\r\n\r\n            if (mageUtils.isObject(addressData.street)) {\r\n                addressData.street = this.objectToArray(addressData.street);\r\n            }\r\n\r\n            addressData.region = {\r\n                'region_id': addressData['region_id'],\r\n                'region_code': addressData['region_code'],\r\n                region: regionName\r\n            };\r\n\r\n            if (addressData['region_id'] &&\r\n                countryData()[addressData['country_id']] &&\r\n                countryData()[addressData['country_id']].regions\r\n            ) {\r\n                region = countryData()[addressData['country_id']].regions[addressData['region_id']];\r\n\r\n                if (region) {\r\n                    addressData.region['region_id'] = addressData['region_id'];\r\n                    addressData.region['region_code'] = region.code;\r\n                    addressData.region.region = region.name;\r\n                }\r\n            } else if (\r\n                !addressData['region_id'] &&\r\n                countryData()[addressData['country_id']] &&\r\n                countryData()[addressData['country_id']].regions\r\n            ) {\r\n                addressData.region['region_code'] = '';\r\n                addressData.region.region = '';\r\n            }\r\n            delete addressData['region_id'];\r\n\r\n            if (addressData['custom_attributes']) {\r\n                addressData['custom_attributes'] = _.map(\r\n                    addressData['custom_attributes'],\r\n                    function (value, key) {\r\n                        customAttributes = {\r\n                            'attribute_code': key,\r\n                            'value': value\r\n                        };\r\n\r\n                        if (typeof value === 'boolean') {\r\n                            customAttributes = {\r\n                                'attribute_code': key,\r\n                                'value': value,\r\n                                'label': value === true ? 'Yes' : 'No'\r\n                            };\r\n                        }\r\n\r\n                        return customAttributes;\r\n                    }\r\n                );\r\n            }\r\n\r\n            return address(addressData);\r\n        },\r\n\r\n        /**\r\n         * Convert Address object to address form data.\r\n         *\r\n         * @param {Object} addrs\r\n         * @returns {Object}\r\n         */\r\n        quoteAddressToFormAddressData: function (addrs) {\r\n            var self = this,\r\n                output = {},\r\n                streetObject,\r\n                customAttributesObject;\r\n\r\n            $.each(addrs, function (key) {\r\n                if (addrs.hasOwnProperty(key) && typeof addrs[key] !== 'function') {\r\n                    output[self.toUnderscore(key)] = addrs[key];\r\n                }\r\n            });\r\n\r\n            if (Array.isArray(addrs.street)) {\r\n                streetObject = {};\r\n                addrs.street.forEach(function (value, index) {\r\n                    streetObject[index] = value;\r\n                });\r\n                output.street = streetObject;\r\n            }\r\n\r\n            //jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n            if (Array.isArray(addrs.customAttributes)) {\r\n                customAttributesObject = {};\r\n                addrs.customAttributes.forEach(function (value) {\r\n                    customAttributesObject[value.attribute_code] = value.value;\r\n                });\r\n                output.custom_attributes = customAttributesObject;\r\n            }\r\n            //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n            return output;\r\n        },\r\n\r\n        /**\r\n         * @param {String} string\r\n         */\r\n        toUnderscore: function (string) {\r\n            return string.replace(/([A-Z])/g, function ($1) {\r\n                return '_' + $1.toLowerCase();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} formProviderData\r\n         * @param {String} formIndex\r\n         * @return {Object}\r\n         */\r\n        formDataProviderToFlatData: function (formProviderData, formIndex) {\r\n            var addressData = {};\r\n\r\n            $.each(formProviderData, function (path, value) {\r\n                var pathComponents = path.split('.'),\r\n                    dataObject = {};\r\n\r\n                pathComponents.splice(pathComponents.indexOf(formIndex), 1);\r\n                pathComponents.reverse();\r\n                $.each(pathComponents, function (index, pathPart) {\r\n                    var parent = {};\r\n\r\n                    if (index == 0) { //eslint-disable-line eqeqeq\r\n                        dataObject[pathPart] = value;\r\n                    } else {\r\n                        parent[pathPart] = dataObject;\r\n                        dataObject = parent;\r\n                    }\r\n                });\r\n                $.extend(true, addressData, dataObject);\r\n            });\r\n\r\n            return addressData;\r\n        },\r\n\r\n        /**\r\n         * Convert object to array\r\n         * @param {Object} object\r\n         * @returns {Array}\r\n         */\r\n        objectToArray: function (object) {\r\n            var convertedArray = [];\r\n\r\n            $.each(object, function (key) {\r\n                return typeof object[key] === 'string' ? convertedArray.push(object[key]) : false;\r\n            });\r\n\r\n            return convertedArray.slice(0);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} addrs\r\n         * @return {*|Object}\r\n         */\r\n        addressToEstimationAddress: function (addrs) {\r\n            var self = this,\r\n                estimatedAddressData = {};\r\n\r\n            $.each(addrs, function (key) {\r\n                estimatedAddressData[self.toUnderscore(key)] = addrs[key];\r\n            });\r\n\r\n            return this.formAddressDataToQuoteAddress(estimatedAddressData);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/authentication-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Ui/js/model/messages'\r\n], function (ko, Messages) {\r\n    'use strict';\r\n\r\n    return new Messages();\r\n});\r\n","Magento_Checkout/js/model/billing-address-postcode-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n           'jquery',\r\n           'Magento_Checkout/js/model/postcode-validator',\r\n           'mage/translate',\r\n           'uiRegistry'\r\n       ], function (\r\n    $,\r\n    postcodeValidator,\r\n    $t,\r\n    uiRegistry\r\n) {\r\n    'use strict';\r\n\r\n    var postcodeElementName = 'postcode';\r\n\r\n    return {\r\n        validateZipCodeTimeout: 0,\r\n        validateDelay: 2000,\r\n\r\n        /**\r\n         * Perform postponed binding for fieldset elements\r\n         *\r\n         * @param {String} formPath\r\n         */\r\n        initFields: function (formPath) {\r\n            var self = this;\r\n\r\n            uiRegistry.async(formPath + '.' + postcodeElementName)(self.bindHandler.bind(self));\r\n        },\r\n\r\n        /**\r\n         * @param {Object} element\r\n         * @param {Number} delay\r\n         */\r\n        bindHandler: function (element, delay) {\r\n            var self = this;\r\n\r\n            delay = typeof delay === 'undefined' ? self.validateDelay : delay;\r\n\r\n            element.on('value', function () {\r\n                clearTimeout(self.validateZipCodeTimeout);\r\n                self.validateZipCodeTimeout = setTimeout(function () {\r\n                    self.postcodeValidation(element);\r\n                }, delay);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} postcodeElement\r\n         * @return {*}\r\n         */\r\n        postcodeValidation: function (postcodeElement) {\r\n            var countryId = $('select[name=\"country_id\"]:visible').val(),\r\n                validationResult,\r\n                warnMessage;\r\n\r\n            if (postcodeElement == null || postcodeElement.value() == null) {\r\n                return true;\r\n            }\r\n\r\n            postcodeElement.warn(null);\r\n            validationResult = postcodeValidator.validate(postcodeElement.value(), countryId);\r\n\r\n            if (!validationResult) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postcodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n                postcodeElement.warn(warnMessage);\r\n            }\r\n\r\n            return validationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/checkout-data-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Checkout adapter for customer data storage\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/action/create-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/action/select-payment-method',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/action/create-billing-address',\r\n    'underscore'\r\n], function (\r\n    addressList,\r\n    quote,\r\n    checkoutData,\r\n    createShippingAddress,\r\n    selectShippingAddress,\r\n    selectShippingMethodAction,\r\n    paymentService,\r\n    selectPaymentMethodAction,\r\n    addressConverter,\r\n    selectBillingAddress,\r\n    createBillingAddress,\r\n    _\r\n) {\r\n    'use strict';\r\n\r\n    var isBillingAddressResolvedFromBackend = false;\r\n\r\n    return {\r\n\r\n        /**\r\n         * Resolve estimation address. Used local storage\r\n         */\r\n        resolveEstimationAddress: function () {\r\n            var address;\r\n\r\n            if (quote.isVirtual()) {\r\n                if (checkoutData.getBillingAddressFromData()) {\r\n                    address = addressConverter.formAddressDataToQuoteAddress(\r\n                        checkoutData.getBillingAddressFromData()\r\n                    );\r\n                    selectBillingAddress(address);\r\n                } else {\r\n                    this.resolveBillingAddress();\r\n                }\r\n            } else if (checkoutData.getShippingAddressFromData()) {\r\n                address = addressConverter.formAddressDataToQuoteAddress(checkoutData.getShippingAddressFromData());\r\n                selectShippingAddress(address);\r\n            } else {\r\n                this.resolveShippingAddress();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve shipping address. Used local storage\r\n         */\r\n        resolveShippingAddress: function () {\r\n            var newCustomerShippingAddress;\r\n\r\n            if (!checkoutData.getShippingAddressFromData() &&\r\n                window.checkoutConfig.shippingAddressFromData\r\n            ) {\r\n                checkoutData.setShippingAddressFromData(window.checkoutConfig.shippingAddressFromData);\r\n            }\r\n\r\n            newCustomerShippingAddress = checkoutData.getNewCustomerShippingAddress();\r\n\r\n            if (newCustomerShippingAddress) {\r\n                createShippingAddress(newCustomerShippingAddress);\r\n            }\r\n            this.applyShippingAddress();\r\n        },\r\n\r\n        /**\r\n         * Apply resolved estimated address to quote\r\n         *\r\n         * @param {Object} isEstimatedAddress\r\n         */\r\n        applyShippingAddress: function (isEstimatedAddress) {\r\n            var address,\r\n                shippingAddress,\r\n                isConvertAddress;\r\n\r\n            if (addressList().length === 0) {\r\n                address = addressConverter.formAddressDataToQuoteAddress(\r\n                    checkoutData.getShippingAddressFromData()\r\n                );\r\n                selectShippingAddress(address);\r\n            }\r\n            shippingAddress = quote.shippingAddress();\r\n            isConvertAddress = isEstimatedAddress || false;\r\n\r\n            if (!shippingAddress) {\r\n                shippingAddress = this.getShippingAddressFromCustomerAddressList();\r\n\r\n                if (shippingAddress) {\r\n                    selectShippingAddress(\r\n                        isConvertAddress ?\r\n                            addressConverter.addressToEstimationAddress(shippingAddress)\r\n                            : shippingAddress\r\n                    );\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} ratesData\r\n         */\r\n        resolveShippingRates: function (ratesData) {\r\n            var selectedShippingRate = checkoutData.getSelectedShippingRate(),\r\n                availableRate = false;\r\n\r\n            if (ratesData.length === 1 && !quote.shippingMethod()) {\r\n                //set shipping rate if we have only one available shipping rate\r\n                selectShippingMethodAction(ratesData[0]);\r\n\r\n                return;\r\n            }\r\n\r\n            if (quote.shippingMethod()) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    return rate['carrier_code'] == quote.shippingMethod()['carrier_code'] && //eslint-disable-line\r\n                        rate['method_code'] == quote.shippingMethod()['method_code']; //eslint-disable-line eqeqeq\r\n                });\r\n            }\r\n\r\n            if (!availableRate && selectedShippingRate) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    return rate['carrier_code'] + '_' + rate['method_code'] === selectedShippingRate;\r\n                });\r\n            }\r\n\r\n            if (!availableRate && window.checkoutConfig.selectedShippingMethod) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    var selectedShippingMethod = window.checkoutConfig.selectedShippingMethod;\r\n\r\n                    return rate['carrier_code'] == selectedShippingMethod['carrier_code'] && //eslint-disable-line\r\n                        rate['method_code'] == selectedShippingMethod['method_code']; //eslint-disable-line eqeqeq\r\n                });\r\n            }\r\n\r\n            //Unset selected shipping method if not available\r\n            if (!availableRate) {\r\n                selectShippingMethodAction(null);\r\n            } else {\r\n                selectShippingMethodAction(availableRate);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve payment method. Used local storage\r\n         */\r\n        resolvePaymentMethod: function () {\r\n            var availablePaymentMethods = paymentService.getAvailablePaymentMethods(),\r\n                selectedPaymentMethod = checkoutData.getSelectedPaymentMethod();\r\n\r\n            if (selectedPaymentMethod) {\r\n                availablePaymentMethods.some(function (payment) {\r\n                    if (payment.method == selectedPaymentMethod) { //eslint-disable-line eqeqeq\r\n                        selectPaymentMethodAction(payment);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve billing address. Used local storage\r\n         */\r\n        resolveBillingAddress: function () {\r\n            var selectedBillingAddress,\r\n                newCustomerBillingAddressData;\r\n\r\n            selectedBillingAddress = checkoutData.getSelectedBillingAddress();\r\n            newCustomerBillingAddressData = checkoutData.getNewCustomerBillingAddress();\r\n\r\n            if (selectedBillingAddress) {\r\n                if (selectedBillingAddress === 'new-customer-billing-address' && newCustomerBillingAddressData) {\r\n                    selectBillingAddress(createBillingAddress(newCustomerBillingAddressData));\r\n                } else {\r\n                    addressList.some(function (address) {\r\n                        if (selectedBillingAddress === address.getKey()) {\r\n                            selectBillingAddress(address);\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                this.applyBillingAddress();\r\n            }\r\n\r\n            if (!isBillingAddressResolvedFromBackend &&\r\n                !checkoutData.getBillingAddressFromData() &&\r\n                !_.isEmpty(window.checkoutConfig.billingAddressFromData) &&\r\n                !quote.billingAddress()\r\n            ) {\r\n                if (window.checkoutConfig.isBillingAddressFromDataValid === true) {\r\n                    selectBillingAddress(createBillingAddress(window.checkoutConfig.billingAddressFromData));\r\n                } else {\r\n                    checkoutData.setBillingAddressFromData(window.checkoutConfig.billingAddressFromData);\r\n                }\r\n                isBillingAddressResolvedFromBackend = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Apply resolved billing address to quote\r\n         */\r\n        applyBillingAddress: function () {\r\n            var shippingAddress,\r\n                isBillingAddressInitialized;\r\n\r\n            if (quote.billingAddress()) {\r\n                selectBillingAddress(quote.billingAddress());\r\n\r\n                return;\r\n            }\r\n\r\n            if (quote.isVirtual() || !quote.billingAddress()) {\r\n                isBillingAddressInitialized = addressList.some(function (addrs) {\r\n                    if (addrs.isDefaultBilling()) {\r\n                        selectBillingAddress(addrs);\r\n\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                });\r\n            }\r\n\r\n            shippingAddress = quote.shippingAddress();\r\n\r\n            if (!isBillingAddressInitialized &&\r\n                shippingAddress &&\r\n                shippingAddress.canUseForBilling() &&\r\n                (shippingAddress.isDefaultShipping() || !quote.isVirtual())\r\n            ) {\r\n                //set billing address same as shipping by default if it is not empty\r\n                selectBillingAddress(quote.shippingAddress());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get shipping address from address list\r\n         *\r\n         * @return {Object|null}\r\n         */\r\n        getShippingAddressFromCustomerAddressList: function () {\r\n            var shippingAddress = _.find(\r\n                    addressList(),\r\n                    function (address) {\r\n                        return checkoutData.getSelectedShippingAddress() == address.getKey() //eslint-disable-line\r\n                    }\r\n                );\r\n\r\n            if (!shippingAddress) {\r\n                shippingAddress = _.find(\r\n                    addressList(),\r\n                    function (address) {\r\n                        return address.isDefaultShipping();\r\n                    }\r\n                );\r\n            }\r\n\r\n            if (!shippingAddress && addressList().length === 1) {\r\n                shippingAddress = addressList()[0];\r\n            }\r\n\r\n            return shippingAddress;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/customer-email-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/customer',\r\n    'mage/validation'\r\n], function ($, customer) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Validate checkout agreements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            var emailValidationResult = customer.isLoggedIn(),\r\n                loginFormSelector = 'form[data-role=email-with-possible-login]';\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n            }\r\n\r\n            return emailValidationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-post-code-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Define necessity of using default post code value\r\n     */\r\n    var useDefaultPostCode;\r\n\r\n    return {\r\n        /**\r\n         * Resolve default post code\r\n         *\r\n         * @returns {String|null}\r\n         */\r\n        resolve: function () {\r\n            return useDefaultPostCode ?  window.checkoutConfig.defaultPostcode : null;\r\n        },\r\n\r\n        /**\r\n         * Set state to useDefaultPostCode variable\r\n         *\r\n         * @param {Boolean} shouldUseDefaultPostCode\r\n         * @returns {underscore}\r\n         */\r\n        setUseDefaultPostCode: function (shouldUseDefaultPostCode) {\r\n            useDefaultPostCode = shouldUseDefaultPostCode;\r\n\r\n            return this;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    './default-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/error-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'mage/url',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate'\r\n], function (url, globalMessageList, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @param {Object} response\r\n         * @param {Object} messageContainer\r\n         */\r\n        process: function (response, messageContainer) {\r\n            var error;\r\n\r\n            messageContainer = messageContainer || globalMessageList;\r\n\r\n            if (response.status == 401) { //eslint-disable-line eqeqeq\r\n                this.redirectTo(url.build('customer/account/login/'));\r\n            } else {\r\n                try {\r\n                    error = JSON.parse(response.responseText);\r\n                } catch (exception) {\r\n                    error = {\r\n                        message: $t('Something went wrong with your request. Please try again later.')\r\n                    };\r\n                }\r\n                messageContainer.addErrorMessage(error);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Method to redirect by requested URL.\r\n         */\r\n        redirectTo: function (redirectUrl) {\r\n            window.location.replace(redirectUrl);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/full-screen-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'rjsResolver'\r\n], function ($, resolver) {\r\n    'use strict';\r\n\r\n    var containerId = '#checkout';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Start full page loader action\r\n         */\r\n        startLoader: function () {\r\n            $(containerId).trigger('processStart');\r\n        },\r\n\r\n        /**\r\n         * Stop full page loader action\r\n         *\r\n         * @param {Boolean} [forceStop]\r\n         */\r\n        stopLoader: function (forceStop) {\r\n            var $elem = $(containerId),\r\n                stop = $elem.trigger.bind($elem, 'processStop'); //eslint-disable-line jquery-no-bind-unbind\r\n\r\n            forceStop ? stop() : resolver(stop);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/new-customer-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/default-post-code-resolver'\r\n], function (_, DefaultPostCodeResolver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} addressData\r\n     * Returns new address object\r\n     */\r\n    return function (addressData) {\r\n        var identifier = Date.now(),\r\n            countryId = addressData['country_id'] || addressData.countryId || window.checkoutConfig.defaultCountryId,\r\n            regionId;\r\n\r\n        if (addressData.region && addressData.region['region_id']) {\r\n            regionId = addressData.region['region_id'];\r\n        } else if (!addressData['region_id']) {\r\n            regionId = undefined;\r\n        } else if (\r\n            /* eslint-disable */\r\n            addressData['country_id'] && addressData['country_id'] == window.checkoutConfig.defaultCountryId ||\r\n            !addressData['country_id'] && countryId == window.checkoutConfig.defaultCountryId\r\n            /* eslint-enable */\r\n        ) {\r\n            regionId = window.checkoutConfig.defaultRegionId || undefined;\r\n        }\r\n\r\n        return {\r\n            email: addressData.email,\r\n            countryId: countryId,\r\n            regionId: regionId || addressData.regionId,\r\n            regionCode: addressData.region ? addressData.region['region_code'] : null,\r\n            region: addressData.region ? addressData.region.region : null,\r\n            customerId: addressData['customer_id'] || addressData.customerId,\r\n            street: addressData.street,\r\n            company: addressData.company,\r\n            telephone: addressData.telephone,\r\n            fax: addressData.fax,\r\n            postcode: addressData.postcode ? addressData.postcode : DefaultPostCodeResolver.resolve(),\r\n            city: addressData.city,\r\n            firstname: addressData.firstname,\r\n            lastname: addressData.lastname,\r\n            middlename: addressData.middlename,\r\n            prefix: addressData.prefix,\r\n            suffix: addressData.suffix,\r\n            vatId: addressData['vat_id'],\r\n            saveInAddressBook: addressData['save_in_address_book'],\r\n            customAttributes: addressData['custom_attributes'],\r\n            extensionAttributes: addressData['extension_attributes'],\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultShipping: function () {\r\n                return addressData['default_shipping'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultBilling: function () {\r\n                return addressData['default_billing'];\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getType: function () {\r\n                return 'new-customer-address';\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getKey: function () {\r\n                return this.getType();\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCacheKey: function () {\r\n                return this.getType() + identifier;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            isEditable: function () {\r\n                return true;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            canUseForBilling: function () {\r\n                return true;\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/payment/method-list',\r\n    'Magento_Checkout/js/action/select-payment-method'\r\n], function (_, quote, methodList, selectPaymentMethod) {\r\n    'use strict';\r\n\r\n    /**\r\n    * Free method filter\r\n    * @param {Object} paymentMethod\r\n    * @return {Boolean}\r\n    */\r\n    var isFreePaymentMethod = function (paymentMethod) {\r\n            return paymentMethod.method === 'free';\r\n        },\r\n\r\n        /**\r\n         * Grabs the grand total from quote\r\n         * @return {Number}\r\n         */\r\n        getGrandTotal = function () {\r\n            return quote.totals()['grand_total'];\r\n        };\r\n\r\n    return {\r\n        isFreeAvailable: false,\r\n\r\n        /**\r\n         * Populate the list of payment methods\r\n         * @param {Array} methods\r\n         */\r\n        setPaymentMethods: function (methods) {\r\n            var freeMethod,\r\n                filteredMethods,\r\n                methodIsAvailable,\r\n                methodNames;\r\n\r\n            freeMethod = _.find(methods, isFreePaymentMethod);\r\n            this.isFreeAvailable = !!freeMethod;\r\n\r\n            if (freeMethod && getGrandTotal() <= 0) {\r\n                methods.splice(0, methods.length, freeMethod);\r\n                selectPaymentMethod(freeMethod);\r\n            }\r\n\r\n            filteredMethods = _.without(methods, freeMethod);\r\n\r\n            if (filteredMethods.length === 1) {\r\n                selectPaymentMethod(filteredMethods[0]);\r\n            } else if (quote.paymentMethod()) {\r\n                methodIsAvailable = methods.some(function (item) {\r\n                    return item.method === quote.paymentMethod().method;\r\n                });\r\n                //Unset selected payment method if not available\r\n                if (!methodIsAvailable) {\r\n                    selectPaymentMethod(null);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Overwrite methods with existing methods to preserve ko array references.\r\n             * This prevent ko from re-rendering those methods.\r\n             */\r\n            methodNames = _.pluck(methods, 'method');\r\n            _.map(methodList(), function (existingMethod) {\r\n                var existingMethodIndex = methodNames.indexOf(existingMethod.method);\r\n\r\n                if (existingMethodIndex !== -1) {\r\n                    methods[existingMethodIndex] = existingMethod;\r\n                }\r\n            });\r\n\r\n            methodList(methods);\r\n        },\r\n\r\n        /**\r\n         * Get the list of available payment methods.\r\n         * @return {Array}\r\n         */\r\n        getAvailablePaymentMethods: function () {\r\n            var allMethods = methodList().slice(),\r\n                grandTotalOverZero = getGrandTotal() > 0;\r\n\r\n            if (!this.isFreeAvailable) {\r\n                return allMethods;\r\n            }\r\n\r\n            if (grandTotalOverZero) {\r\n                return _.reject(allMethods, isFreePaymentMethod);\r\n            }\r\n\r\n            return _.filter(allMethods, isFreePaymentMethod);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/place-order.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'mage/storage',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'Magento_Checkout/js/model/full-screen-loader',\r\n        'Magento_Customer/js/customer-data',\r\n        'Magento_Checkout/js/model/payment/place-order-hooks',\r\n        'underscore'\r\n    ],\r\n    function (storage, errorProcessor, fullScreenLoader, customerData, hooks, _) {\r\n        'use strict';\r\n\r\n        return function (serviceUrl, payload, messageContainer) {\r\n            var headers = {}, redirectURL = '';\r\n\r\n            fullScreenLoader.startLoader();\r\n            _.each(hooks.requestModifiers, function (modifier) {\r\n                modifier(headers, payload);\r\n            });\r\n\r\n            return storage.post(\r\n                serviceUrl, JSON.stringify(payload), true, 'application/json', headers\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response, messageContainer);\r\n                    redirectURL = response.getResponseHeader('errorRedirectAction');\r\n\r\n                    if (redirectURL) {\r\n                        setTimeout(function () {\r\n                            errorProcessor.redirectTo(redirectURL);\r\n                        }, 3000);\r\n                    }\r\n                }\r\n            ).done(\r\n                function (response) {\r\n                    var clearData = {\r\n                        'selectedShippingAddress': null,\r\n                        'shippingAddressFromData': null,\r\n                        'newCustomerShippingAddress': null,\r\n                        'selectedShippingRate': null,\r\n                        'selectedPaymentMethod': null,\r\n                        'selectedBillingAddress': null,\r\n                        'billingAddressFromData': null,\r\n                        'newCustomerBillingAddress': null\r\n                    };\r\n\r\n                    if (response.responseType !== 'error') {\r\n                        customerData.set('checkout-data', clearData);\r\n                    }\r\n                }\r\n            ).always(\r\n                function () {\r\n                    fullScreenLoader.stopLoader();\r\n                    _.each(hooks.afterRequestListeners, function (listener) {\r\n                        listener();\r\n                    });\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/model/postcode-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mageUtils'\r\n], function (utils) {\r\n    'use strict';\r\n\r\n    return {\r\n        validatedPostCodeExample: [],\r\n\r\n        /**\r\n         * @param {*} postCode\r\n         * @param {*} countryId\r\n         * @param {Array} postCodesPatterns\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (postCode, countryId, postCodesPatterns) {\r\n            var pattern, regex,\r\n                patterns = postCodesPatterns ? postCodesPatterns[countryId] :\r\n                    window.checkoutConfig.postCodes[countryId];\r\n\r\n            this.validatedPostCodeExample = [];\r\n\r\n            if (!utils.isEmpty(postCode) && !utils.isEmpty(patterns)) {\r\n                for (pattern in patterns) {\r\n                    if (patterns.hasOwnProperty(pattern)) { //eslint-disable-line max-depth\r\n                        this.validatedPostCodeExample.push(patterns[pattern].example);\r\n                        regex = new RegExp(patterns[pattern].pattern);\r\n\r\n                        if (regex.test(postCode)) { //eslint-disable-line max-depth\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/quote.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'domReady!'\r\n], function (ko, _) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Get totals data from the extension attributes.\r\n     * @param {*} data\r\n     * @returns {*}\r\n     */\r\n    var proceedTotalsData = function (data) {\r\n            if (_.isObject(data) && _.isObject(data['extension_attributes'])) {\r\n                _.each(data['extension_attributes'], function (element, index) {\r\n                    data[index] = element;\r\n                });\r\n            }\r\n\r\n            return data;\r\n        },\r\n        billingAddress = ko.observable(null),\r\n        shippingAddress = ko.observable(null),\r\n        shippingMethod = ko.observable(null),\r\n        paymentMethod = ko.observable(null),\r\n        quoteData = window.checkoutConfig.quoteData,\r\n        basePriceFormat = window.checkoutConfig.basePriceFormat,\r\n        priceFormat = window.checkoutConfig.priceFormat,\r\n        storeCode = window.checkoutConfig.storeCode,\r\n        totalsData = proceedTotalsData(window.checkoutConfig.totalsData),\r\n        totals = ko.observable(totalsData),\r\n        collectedTotals = ko.observable({});\r\n\r\n    return {\r\n        totals: totals,\r\n        shippingAddress: shippingAddress,\r\n        shippingMethod: shippingMethod,\r\n        billingAddress: billingAddress,\r\n        paymentMethod: paymentMethod,\r\n        guestEmail: null,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getQuoteId: function () {\r\n            return quoteData['entity_id'];\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isVirtual: function () {\r\n            return !!Number(quoteData['is_virtual']);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPriceFormat: function () {\r\n            return priceFormat;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getBasePriceFormat: function () {\r\n            return basePriceFormat;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getItems: function () {\r\n            return window.checkoutConfig.quoteItemData;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @return {*}\r\n         */\r\n        getTotals: function () {\r\n            return totals;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} data\r\n         */\r\n        setTotals: function (data) {\r\n            data = proceedTotalsData(data);\r\n            totals(data);\r\n            this.setCollectedTotals('subtotal_with_discount', parseFloat(data['subtotal_with_discount']));\r\n        },\r\n\r\n        /**\r\n         * @param {*} paymentMethodCode\r\n         */\r\n        setPaymentMethod: function (paymentMethodCode) {\r\n            paymentMethod(paymentMethodCode);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPaymentMethod: function () {\r\n            return paymentMethod;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getStoreCode: function () {\r\n            return storeCode;\r\n        },\r\n\r\n        /**\r\n         * @param {String} code\r\n         * @param {*} value\r\n         */\r\n        setCollectedTotals: function (code, value) {\r\n            var colTotals = collectedTotals();\r\n\r\n            colTotals[code] = value;\r\n            collectedTotals(colTotals);\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getCalculatedTotal: function () {\r\n            var total = 0.; //eslint-disable-line no-floating-decimal\r\n\r\n            _.each(collectedTotals(), function (value) {\r\n                total += value;\r\n            });\r\n\r\n            return total;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/resource-url-manager.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mageUtils'\r\n], function (customer, urlBuilder, utils) {\r\n        'use strict';\r\n\r\n        return {\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForTotalsEstimationForNewAddress: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            cartId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:cartId/totals-information',\r\n                        'customer': '/carts/mine/totals-information'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForEstimationShippingMethodsForNewAddress: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:quoteId/estimate-shipping-methods',\r\n                        'customer': '/carts/mine/estimate-shipping-methods'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForEstimationShippingMethodsByAddressId: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'default': '/carts/mine/estimate-shipping-methods-by-address-id'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {String} couponCode\r\n             * @param {String} quoteId\r\n             * @return {*}\r\n             */\r\n            getApplyCouponUrl: function (couponCode, quoteId) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quoteId\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/' + quoteId + '/coupons/' + encodeURIComponent(couponCode),\r\n                        'customer': '/carts/mine/coupons/' + encodeURIComponent(couponCode)\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {String} quoteId\r\n             * @return {*}\r\n             */\r\n            getCancelCouponUrl: function (quoteId) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quoteId\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/' + quoteId + '/coupons/',\r\n                        'customer': '/carts/mine/coupons/'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForCartTotals: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:quoteId/totals',\r\n                        'customer': '/carts/mine/totals'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForSetShippingInformation: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            cartId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:cartId/shipping-information',\r\n                        'customer': '/carts/mine/shipping-information'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * Get url for service.\r\n             *\r\n             * @param {*} urls\r\n             * @param {*} urlParams\r\n             * @return {String|*}\r\n             */\r\n            getUrl: function (urls, urlParams) {\r\n                var url;\r\n\r\n                if (utils.isEmpty(urls)) {\r\n                    return 'Provided service call does not exist.';\r\n                }\r\n\r\n                if (!utils.isEmpty(urls['default'])) {\r\n                    url = urls['default'];\r\n                } else {\r\n                    url = urls[this.getCheckoutMethod()];\r\n                }\r\n\r\n                return urlBuilder.createUrl(url, urlParams);\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCheckoutMethod: function () {\r\n                return customer.isLoggedIn() ? 'customer' : 'guest';\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/model/shipping-rate-registry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var cache = [];\r\n\r\n    return {\r\n        /**\r\n         * @param {String} addressKey\r\n         * @return {*}\r\n         */\r\n        get: function (addressKey) {\r\n            if (cache[addressKey]) {\r\n                return cache[addressKey];\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {String} addressKey\r\n         * @param {*} data\r\n         */\r\n        set: function (addressKey, data) {\r\n            cache[addressKey] = data;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/customer-address'\r\n], function (quote, defaultProcessor, customerAddressProcessor) {\r\n    'use strict';\r\n\r\n    var processors = {};\r\n\r\n    processors.default =  defaultProcessor;\r\n    processors['customer-address'] = customerAddressProcessor;\r\n\r\n    quote.shippingAddress.subscribe(function () {\r\n        var type = quote.shippingAddress().getType();\r\n\r\n        if (processors[type]) {\r\n            processors[type].getRates(quote.shippingAddress());\r\n        } else {\r\n            processors.default.getRates(quote.shippingAddress());\r\n        }\r\n    });\r\n\r\n    return {\r\n        /**\r\n         * @param {String} type\r\n         * @param {*} processor\r\n         */\r\n        registerProcessor: function (type, processor) {\r\n            processors[type] = processor;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    var ratesRules = {},\r\n        checkoutConfig = window.checkoutConfig;\r\n\r\n    return {\r\n        /**\r\n         * @param {String} carrier\r\n         * @param {Object} rules\r\n         */\r\n        registerRules: function (carrier, rules) {\r\n            if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\r\n                ratesRules[carrier] = rules.getRules();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return ratesRules;\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getObservableFields: function () {\r\n            var self = this,\r\n                observableFields = [];\r\n\r\n            $.each(self.getRules(), function (carrier, fields) {\r\n                $.each(fields, function (field) {\r\n                    if (observableFields.indexOf(field) === -1) {\r\n                        observableFields.push(field);\r\n                    }\r\n                });\r\n            });\r\n\r\n            return observableFields;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    './shipping-rates-validation-rules',\r\n    '../model/address-converter',\r\n    '../action/select-shipping-address',\r\n    './postcode-validator',\r\n    './default-validator',\r\n    'mage/translate',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (\r\n    $,\r\n    ko,\r\n    shippingRatesValidationRules,\r\n    addressConverter,\r\n    selectShippingAddress,\r\n    postcodeValidator,\r\n    defaultValidator,\r\n    $t,\r\n    uiRegistry,\r\n    formPopUpState\r\n) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        validators = [],\r\n        observedElements = [],\r\n        postcodeElements = [],\r\n        postcodeElementName = 'postcode';\r\n\r\n    validators.push(defaultValidator);\r\n\r\n    return {\r\n        validateAddressTimeout: 0,\r\n        validateZipCodeTimeout: 0,\r\n        validateDelay: 2000,\r\n\r\n        /**\r\n         * @param {String} carrier\r\n         * @param {Object} validator\r\n         */\r\n        registerValidator: function (carrier, validator) {\r\n            if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\r\n                validators.push(validator);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validateAddressData: function (address) {\r\n            return validators.some(function (validator) {\r\n                return validator.validate(address);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Perform postponed binding for fieldset elements\r\n         *\r\n         * @param {String} formPath\r\n         */\r\n        initFields: function (formPath) {\r\n            var self = this,\r\n                elements = shippingRatesValidationRules.getObservableFields();\r\n\r\n            if ($.inArray(postcodeElementName, elements) === -1) {\r\n                // Add postcode field to observables if not exist for zip code validation support\r\n                elements.push(postcodeElementName);\r\n            }\r\n\r\n            $.each(elements, function (index, field) {\r\n                uiRegistry.async(formPath + '.' + field)(self.doElementBinding.bind(self));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Bind shipping rates request to form element\r\n         *\r\n         * @param {Object} element\r\n         * @param {Boolean} force\r\n         * @param {Number} delay\r\n         */\r\n        doElementBinding: function (element, force, delay) {\r\n            var observableFields = shippingRatesValidationRules.getObservableFields();\r\n\r\n            if (element && (observableFields.indexOf(element.index) !== -1 || force)) {\r\n                if (element.index !== postcodeElementName) {\r\n                    this.bindHandler(element, delay);\r\n                }\r\n            }\r\n\r\n            if (element.index === postcodeElementName) {\r\n                this.bindHandler(element, delay);\r\n                postcodeElements.push(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} elements\r\n         * @param {Boolean} force\r\n         * @param {Number} delay\r\n         */\r\n        bindChangeHandlers: function (elements, force, delay) {\r\n            var self = this;\r\n\r\n            $.each(elements, function (index, elem) {\r\n                self.doElementBinding(elem, force, delay);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} element\r\n         * @param {Number} delay\r\n         */\r\n        bindHandler: function (element, delay) {\r\n            var self = this;\r\n\r\n            delay = typeof delay === 'undefined' ? self.validateDelay : delay;\r\n\r\n            if (element.component.indexOf('/group') !== -1) {\r\n                $.each(element.elems(), function (index, elem) {\r\n                    self.bindHandler(elem);\r\n                });\r\n            } else {\r\n                element.on('value', function () {\r\n                    clearTimeout(self.validateZipCodeTimeout);\r\n                    self.validateZipCodeTimeout = setTimeout(function () {\r\n                        if (element.index === postcodeElementName) {\r\n                            self.postcodeValidation(element);\r\n                        } else {\r\n                            $.each(postcodeElements, function (index, elem) {\r\n                                self.postcodeValidation(elem);\r\n                            });\r\n                        }\r\n                    }, delay);\r\n\r\n                    if (!formPopUpState.isVisible()) {\r\n                        clearTimeout(self.validateAddressTimeout);\r\n                        self.validateAddressTimeout = setTimeout(function () {\r\n                            self.validateFields();\r\n                        }, delay);\r\n                    }\r\n                });\r\n                observedElements.push(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        postcodeValidation: function (postcodeElement) {\r\n            var countryId = $('select[name=\"country_id\"]:visible').val(),\r\n                validationResult,\r\n                warnMessage;\r\n\r\n            if (postcodeElement == null || postcodeElement.value() == null) {\r\n                return true;\r\n            }\r\n\r\n            postcodeElement.warn(null);\r\n            validationResult = postcodeValidator.validate(postcodeElement.value(), countryId);\r\n\r\n            if (!validationResult) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postcodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n                postcodeElement.warn(warnMessage);\r\n            }\r\n\r\n            return validationResult;\r\n        },\r\n\r\n        /**\r\n         * Convert form data to quote address and validate fields for shipping rates\r\n         */\r\n        validateFields: function () {\r\n            var addressFlat = addressConverter.formDataProviderToFlatData(\r\n                this.collectObservedData(),\r\n                'shippingAddress'\r\n                ),\r\n                address;\r\n\r\n            if (this.validateAddressData(addressFlat)) {\r\n                addressFlat = uiRegistry.get('checkoutProvider').shippingAddress;\r\n                address = addressConverter.formAddressDataToQuoteAddress(addressFlat);\r\n                selectShippingAddress(address);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Collect observed fields data to object\r\n         *\r\n         * @returns {*}\r\n         */\r\n        collectObservedData: function () {\r\n            var observedValues = {};\r\n\r\n            $.each(observedElements, function (index, field) {\r\n                observedValues[field.dataScope] = field.value();\r\n            });\r\n\r\n            return observedValues;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/shipping-save-processor/default'\r\n], function (defaultProcessor) {\r\n    'use strict';\r\n\r\n    var processors = {};\r\n\r\n    processors['default'] =  defaultProcessor;\r\n\r\n    return {\r\n        /**\r\n         * @param {String} type\r\n         * @param {*} processor\r\n         */\r\n        registerProcessor: function (type, processor) {\r\n            processors[type] = processor;\r\n        },\r\n\r\n        /**\r\n         * @param {String} type\r\n         * @return {Array}\r\n         */\r\n        saveShippingInformation: function (type) {\r\n            var rates = [];\r\n\r\n            if (processors[type]) {\r\n                rates = processors[type].saveShippingInformation();\r\n            } else {\r\n                rates = processors['default'].saveShippingInformation();\r\n            }\r\n\r\n            return rates;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/checkout-data-resolver'\r\n], function (ko, checkoutDataResolver) {\r\n    'use strict';\r\n\r\n    var shippingRates = ko.observableArray([]);\r\n\r\n    return {\r\n        isLoading: ko.observable(false),\r\n\r\n        /**\r\n         * Set shipping rates\r\n         *\r\n         * @param {*} ratesData\r\n         */\r\n        setShippingRates: function (ratesData) {\r\n            shippingRates(ratesData);\r\n            shippingRates.valueHasMutated();\r\n            checkoutDataResolver.resolveShippingRates(ratesData);\r\n        },\r\n\r\n        /**\r\n         * Get shipping rates\r\n         *\r\n         * @returns {*}\r\n         */\r\n        getShippingRates: function () {\r\n            return shippingRates;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        popUp: false,\r\n\r\n        /**\r\n         * @param {Object} popUp\r\n         */\r\n        setPopup: function (popUp) {\r\n            this.popUp = popUp;\r\n        },\r\n\r\n        /**\r\n         * Show popup.\r\n         */\r\n        show: function () {\r\n            if (this.popUp) {\r\n                this.popUp.modal('openModal');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hide popup.\r\n         */\r\n        hide: function () {\r\n            if (this.popUp) {\r\n                this.popUp.modal('closeModal');\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/step-navigator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko'\r\n], function ($, ko) {\r\n    'use strict';\r\n\r\n    var steps = ko.observableArray();\r\n\r\n    return {\r\n        steps: steps,\r\n        stepCodes: [],\r\n        validCodes: [],\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        handleHash: function () {\r\n            var hashString = window.location.hash.replace('#', ''),\r\n                isRequestedStepVisible;\r\n\r\n            if (hashString === '') {\r\n                return false;\r\n            }\r\n\r\n            if ($.inArray(hashString, this.validCodes) === -1) {\r\n                window.location.href = window.checkoutConfig.pageNotFoundUrl;\r\n\r\n                return false;\r\n            }\r\n\r\n            isRequestedStepVisible = steps.sort(this.sortItems).some(function (element) {\r\n                return (element.code == hashString || element.alias == hashString) && element.isVisible(); //eslint-disable-line\r\n            });\r\n\r\n            //if requested step is visible, then we don't need to load step data from server\r\n            if (isRequestedStepVisible) {\r\n                return false;\r\n            }\r\n\r\n            steps().sort(this.sortItems).forEach(function (element) {\r\n                if (element.code == hashString || element.alias == hashString) { //eslint-disable-line eqeqeq\r\n                    element.navigate(element);\r\n                } else {\r\n                    element.isVisible(false);\r\n                }\r\n\r\n            });\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {String} code\r\n         * @param {*} alias\r\n         * @param {*} title\r\n         * @param {Function} isVisible\r\n         * @param {*} navigate\r\n         * @param {*} sortOrder\r\n         */\r\n        registerStep: function (code, alias, title, isVisible, navigate, sortOrder) {\r\n            var hash, active;\r\n\r\n            if ($.inArray(code, this.validCodes) !== -1) {\r\n                throw new DOMException('Step code [' + code + '] already registered in step navigator');\r\n            }\r\n\r\n            if (alias != null) {\r\n                if ($.inArray(alias, this.validCodes) !== -1) {\r\n                    throw new DOMException('Step code [' + alias + '] already registered in step navigator');\r\n                }\r\n                this.validCodes.push(alias);\r\n            }\r\n            this.validCodes.push(code);\r\n            steps.push({\r\n                code: code,\r\n                alias: alias != null ? alias : code,\r\n                title: title,\r\n                isVisible: isVisible,\r\n                navigate: navigate,\r\n                sortOrder: sortOrder\r\n            });\r\n            active = this.getActiveItemIndex();\r\n            steps.each(function (elem, index) {\r\n                if (active !== index) {\r\n                    elem.isVisible(false);\r\n                }\r\n            });\r\n            this.stepCodes.push(code);\r\n            hash = window.location.hash.replace('#', '');\r\n\r\n            if (hash != '' && hash != code) { //eslint-disable-line eqeqeq\r\n                //Force hiding of not active step\r\n                isVisible(false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} itemOne\r\n         * @param {Object} itemTwo\r\n         * @return {Number}\r\n         */\r\n        sortItems: function (itemOne, itemTwo) {\r\n            return itemOne.sortOrder > itemTwo.sortOrder ? 1 : -1;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getActiveItemIndex: function () {\r\n            var activeIndex = 0;\r\n\r\n            steps().sort(this.sortItems).some(function (element, index) {\r\n                if (element.isVisible()) {\r\n                    activeIndex = index;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n            return activeIndex;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @return {Boolean}\r\n         */\r\n        isProcessed: function (code) {\r\n            var activeItemIndex = this.getActiveItemIndex(),\r\n                sortedItems = steps().sort(this.sortItems),\r\n                requestedItemIndex = -1;\r\n\r\n            sortedItems.forEach(function (element, index) {\r\n                if (element.code == code) { //eslint-disable-line eqeqeq\r\n                    requestedItemIndex = index;\r\n                }\r\n            });\r\n\r\n            return activeItemIndex > requestedItemIndex;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @param {*} scrollToElementId\r\n         */\r\n        navigateTo: function (code, scrollToElementId) {\r\n            var sortedItems = steps().sort(this.sortItems),\r\n                bodyElem = $('body');\r\n\r\n            scrollToElementId = scrollToElementId || null;\r\n\r\n            if (!this.isProcessed(code)) {\r\n                return;\r\n            }\r\n            sortedItems.forEach(function (element) {\r\n                if (element.code == code) { //eslint-disable-line eqeqeq\r\n                    element.isVisible(true);\r\n                    bodyElem.animate({\r\n                        scrollTop: $('#' + code).offset().top\r\n                    }, 0, function () {\r\n                        window.location = window.checkoutConfig.checkoutUrl + '#' + code;\r\n                    });\r\n\r\n                    if (scrollToElementId && $('#' + scrollToElementId).length) {\r\n                        bodyElem.animate({\r\n                            scrollTop: $('#' + scrollToElementId).offset().top\r\n                        }, 0);\r\n                    }\r\n                } else {\r\n                    element.isVisible(false);\r\n                }\r\n\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sets window location hash.\r\n         *\r\n         * @param {String} hash\r\n         */\r\n        setHash: function (hash) {\r\n            window.location.hash = hash;\r\n        },\r\n\r\n        /**\r\n         * Next step.\r\n         */\r\n        next: function () {\r\n            var activeIndex = 0,\r\n                code;\r\n\r\n            steps().sort(this.sortItems).forEach(function (element, index) {\r\n                if (element.isVisible()) {\r\n                    element.isVisible(false);\r\n                    activeIndex = index;\r\n                }\r\n            });\r\n\r\n            if (steps().length > activeIndex + 1) {\r\n                code = steps()[activeIndex + 1].code;\r\n                steps()[activeIndex + 1].isVisible(true);\r\n                this.setHash(code);\r\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, quote, customerData) {\r\n    'use strict';\r\n\r\n    var quoteItems = ko.observable(quote.totals().items),\r\n        cartData = customerData.get('cart'),\r\n        quoteSubtotal = parseFloat(quote.totals().subtotal),\r\n        subtotalAmount = parseFloat(cartData().subtotalAmount);\r\n\r\n    quote.totals.subscribe(function (newValue) {\r\n        quoteItems(newValue.items);\r\n    });\r\n\r\n    if (!isNaN(subtotalAmount) && quoteSubtotal !== subtotalAmount && quoteSubtotal !== 0) {\r\n        customerData.reload(['cart'], false);\r\n    }\r\n\r\n    return {\r\n        totals: quote.totals,\r\n        isLoading: ko.observable(false),\r\n\r\n        /**\r\n         * @return {Function}\r\n         */\r\n        getItems: function () {\r\n            return quoteItems;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @return {*}\r\n         */\r\n        getSegment: function (code) {\r\n            var i, total;\r\n\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            for (i in this.totals()['total_segments']) { //eslint-disable-line guard-for-in\r\n                total = this.totals()['total_segments'][i];\r\n\r\n                if (total.code == code) { //eslint-disable-line eqeqeq\r\n                    return total;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/url-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    return {\r\n        method: 'rest',\r\n        storeCode: window.checkoutConfig.storeCode,\r\n        version: 'V1',\r\n        serviceUrl: ':method/:storeCode/:version',\r\n\r\n        /**\r\n         * @param {String} url\r\n         * @param {Object} params\r\n         * @return {*}\r\n         */\r\n        createUrl: function (url, params) {\r\n            var completeUrl = this.serviceUrl + url;\r\n\r\n            return this.bindParams(completeUrl, params);\r\n        },\r\n\r\n        /**\r\n         * @param {String} url\r\n         * @param {Object} params\r\n         * @return {*}\r\n         */\r\n        bindParams: function (url, params) {\r\n            var urlParts;\r\n\r\n            params.method = this.method;\r\n            params.storeCode = this.storeCode;\r\n            params.version = this.version;\r\n\r\n            urlParts = url.split('/');\r\n            urlParts = urlParts.filter(Boolean);\r\n\r\n            $.each(urlParts, function (key, part) {\r\n                part = part.replace(':', '');\r\n\r\n                if (params[part] != undefined) { //eslint-disable-line eqeqeq\r\n                    urlParts[key] = params[part];\r\n                }\r\n            });\r\n\r\n            return urlParts.join('/');\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/cart/cache.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Cart adapter for customer data storage.\r\n * It stores cart data in customer data(localStorage) without saving on server.\r\n * Adapter is created for shipping rates and totals data caching. It eliminates unneeded calculations requests.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data',\r\n    'mageUtils'\r\n], function (_, storage, utils) {\r\n    'use strict';\r\n\r\n    var cacheKey = 'cart-data',\r\n        cartData = {\r\n            totals: null,\r\n            address: null,\r\n            cartVersion: null,\r\n            shippingMethodCode: null,\r\n            shippingCarrierCode: null,\r\n            rates: null\r\n        },\r\n\r\n        /**\r\n         * Set data to local storage.\r\n         *\r\n         * @param {Object} checkoutData\r\n         */\r\n        setData = function (checkoutData) {\r\n            storage.set(cacheKey, checkoutData);\r\n        },\r\n\r\n        /**\r\n         * Get data from local storage.\r\n         *\r\n         * @param {String} [key]\r\n         * @returns {*}\r\n         */\r\n        getData = function (key) {\r\n            var data = key ? storage.get(cacheKey)()[key] : storage.get(cacheKey)();\r\n\r\n            if (_.isEmpty(storage.get(cacheKey)())) {\r\n                setData(utils.copy(cartData));\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Build method name base on name, prefix and suffix.\r\n         *\r\n         * @param {String} name\r\n         * @param {String} prefix\r\n         * @param {String} suffix\r\n         * @return {String}\r\n         */\r\n        getMethodName = function (name, prefix, suffix) {\r\n            prefix = prefix || '';\r\n            suffix = suffix || '';\r\n\r\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1) + suffix;\r\n        };\r\n\r\n    /**\r\n     * Provides get/set/isChanged/clear methods for work with cart data.\r\n     * Can be customized via mixin functionality.\r\n     */\r\n    return {\r\n        cartData: cartData,\r\n\r\n        /**\r\n         * Array of required address fields\r\n         */\r\n        requiredFields: ['countryId', 'region', 'regionId', 'postcode'],\r\n\r\n        /**\r\n         * Get data from customer data.\r\n         * Concatenate provided key with method name and call method if it exist or makes get by key.\r\n         *\r\n         * @param {String} key\r\n         * @return {*}\r\n         */\r\n        get: function (key) {\r\n            var methodName = getMethodName(key, '_get');\r\n\r\n            if (key === cacheKey) {\r\n                return getData();\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                return this[methodName]();\r\n            }\r\n\r\n            return getData(key);\r\n        },\r\n\r\n        /**\r\n         * Set data to customer data.\r\n         * Concatenate provided key with method name and call method if it exist or makes set by key.\r\n         * @example _setCustomAddress method will be called, if it exists.\r\n         *  set('address', customAddressValue)\r\n         * @example Will set value by provided key.\r\n         *  set('rates', ratesToCompare)\r\n         *\r\n         * @param {String} key\r\n         * @param {*} value\r\n         */\r\n        set: function (key, value) {\r\n            var methodName = getMethodName(key, '_set'),\r\n                obj;\r\n\r\n            if (key === cacheKey) {\r\n                _.each(value, function (val, k) {\r\n                    this.set(k, val);\r\n                }, this);\r\n\r\n                return;\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                this[methodName](value);\r\n            } else {\r\n                obj = getData();\r\n                obj[key] = value;\r\n                setData(obj);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear data in cache.\r\n         * Concatenate provided key with method name and call method if it exist or clear by key.\r\n         * @example _clearCustomAddress method will be called, if it exist.\r\n         *  clear('customAddress')\r\n         * @example Will clear data by provided key.\r\n         *  clear('rates')\r\n         *\r\n         * @param {String} key\r\n         */\r\n        clear: function (key) {\r\n            var methodName = getMethodName(key, '_clear');\r\n\r\n            if (key === cacheKey) {\r\n                setData(this.cartData);\r\n\r\n                return;\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                this[methodName]();\r\n            } else {\r\n                this.set(key, null);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if provided data has difference with cached data.\r\n         * Concatenate provided key with method name and call method if it exist or makes strict equality.\r\n         * @example Will call existing _isAddressChanged.\r\n         *  isChanged('address', addressToCompare)\r\n         * @example Will get data by provided key and make strict equality with provided value.\r\n         *  isChanged('rates', ratesToCompare)\r\n         *\r\n         * @param {String} key\r\n         * @param {*} value\r\n         * @return {Boolean}\r\n         */\r\n        isChanged: function (key, value) {\r\n            var methodName = getMethodName(key, '_is', 'Changed');\r\n\r\n            if (this[methodName]) {\r\n                return this[methodName](value);\r\n            }\r\n\r\n            return this.get(key) !== value;\r\n        },\r\n\r\n        /**\r\n         * Compare cached address with provided.\r\n         * Custom method for check object equality.\r\n         *\r\n         * @param {Object} address\r\n         * @returns {Boolean}\r\n         */\r\n        _isAddressChanged: function (address) {\r\n            return JSON.stringify(_.pick(this.get('address'), this.requiredFields)) !==\r\n                JSON.stringify(_.pick(address, this.requiredFields));\r\n        },\r\n\r\n        /**\r\n         * Compare cached subtotal with provided.\r\n         * Custom method for check object equality.\r\n         *\r\n         * @param {float} subtotal\r\n         * @returns {Boolean}\r\n         */\r\n        _isSubtotalChanged: function (subtotal) {\r\n            var cached = parseFloat(this.get('totals').subtotal);\r\n\r\n            return subtotal !== cached;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/cart/estimate-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\r\n    'Magento_Checkout/js/model/cart/totals-processor/default',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/cart/cache',\r\n    'Magento_Customer/js/customer-data'\r\n], function (quote, defaultProcessor, totalsDefaultProvider, shippingService, cartCache, customerData) {\r\n    'use strict';\r\n\r\n    var rateProcessors = {},\r\n        totalsProcessors = {},\r\n\r\n        /**\r\n         * Estimate totals for shipping address and update shipping rates.\r\n         */\r\n        estimateTotalsAndUpdateRates = function () {\r\n            var type = quote.shippingAddress().getType();\r\n\r\n            if (\r\n                quote.isVirtual() ||\r\n                window.checkoutConfig.activeCarriers && window.checkoutConfig.activeCarriers.length === 0\r\n            ) {\r\n                // update totals block when estimated address was set\r\n                totalsProcessors['default'] = totalsDefaultProvider;\r\n                totalsProcessors[type] ?\r\n                    totalsProcessors[type].estimateTotals(quote.shippingAddress()) :\r\n                    totalsProcessors['default'].estimateTotals(quote.shippingAddress());\r\n            } else {\r\n                // check if user data not changed -> load rates from cache\r\n                if (!cartCache.isChanged('address', quote.shippingAddress()) &&\r\n                    !cartCache.isChanged('cartVersion', customerData.get('cart')()['data_id']) &&\r\n                    cartCache.get('rates')\r\n                ) {\r\n                    shippingService.setShippingRates(cartCache.get('rates'));\r\n\r\n                    return;\r\n                }\r\n\r\n                // update rates list when estimated address was set\r\n                rateProcessors['default'] = defaultProcessor;\r\n                rateProcessors[type] ?\r\n                    rateProcessors[type].getRates(quote.shippingAddress()) :\r\n                    rateProcessors['default'].getRates(quote.shippingAddress());\r\n\r\n                // save rates to cache after load\r\n                shippingService.getShippingRates().subscribe(function (rates) {\r\n                    cartCache.set('rates', rates);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Estimate totals for shipping address.\r\n         */\r\n        estimateTotalsShipping = function () {\r\n            totalsDefaultProvider.estimateTotals(quote.shippingAddress());\r\n        },\r\n\r\n        /**\r\n         * Estimate totals for billing address.\r\n         */\r\n        estimateTotalsBilling = function () {\r\n            var type = quote.billingAddress().getType();\r\n\r\n            if (quote.isVirtual()) {\r\n                // update totals block when estimated address was set\r\n                totalsProcessors['default'] = totalsDefaultProvider;\r\n                totalsProcessors[type] ?\r\n                    totalsProcessors[type].estimateTotals(quote.billingAddress()) :\r\n                    totalsProcessors['default'].estimateTotals(quote.billingAddress());\r\n            }\r\n        };\r\n\r\n    quote.shippingAddress.subscribe(estimateTotalsAndUpdateRates);\r\n    quote.shippingMethod.subscribe(estimateTotalsShipping);\r\n    quote.billingAddress.subscribe(estimateTotalsBilling);\r\n});\r\n","Magento_Checkout/js/model/cart/totals-processor/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Checkout/js/model/cart/cache',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, resourceUrlManager, quote, storage, totalsService, errorProcessor, cartCache, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Load data from server.\r\n     *\r\n     * @param {Object} address\r\n     */\r\n    var loadFromServer = function (address) {\r\n        var serviceUrl,\r\n            payload;\r\n\r\n        // Start loader for totals block\r\n        totalsService.isLoading(true);\r\n        serviceUrl = resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);\r\n        payload = {\r\n            addressInformation: {\r\n                address: _.pick(address, cartCache.requiredFields)\r\n            }\r\n        };\r\n\r\n        if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n            payload.addressInformation['shipping_method_code'] = quote.shippingMethod()['method_code'];\r\n            payload.addressInformation['shipping_carrier_code'] = quote.shippingMethod()['carrier_code'];\r\n        }\r\n\r\n        return storage.post(\r\n            serviceUrl, JSON.stringify(payload), false\r\n        ).done(function (result) {\r\n            var data = {\r\n                totals: result,\r\n                address: address,\r\n                cartVersion: customerData.get('cart')()['data_id'],\r\n                shippingMethodCode: null,\r\n                shippingCarrierCode: null\r\n            };\r\n\r\n            if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n                data.shippingMethodCode = quote.shippingMethod()['method_code'];\r\n                data.shippingCarrierCode = quote.shippingMethod()['carrier_code'];\r\n            }\r\n\r\n            quote.setTotals(result);\r\n            cartCache.set('cart-data', data);\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response);\r\n        }).always(function () {\r\n            // Stop loader for totals block\r\n            totalsService.isLoading(false);\r\n        });\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Array of required address fields.\r\n         * @property {Array.String} requiredFields\r\n         * @deprecated Use cart cache.\r\n         */\r\n        requiredFields: cartCache.requiredFields,\r\n\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         * @param {Object} address\r\n         */\r\n        estimateTotals: function (address) {\r\n            return loadFromServer(address);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/additional-validators.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var validators = [];\r\n\r\n    return {\r\n        /**\r\n         * Register unique validator\r\n         *\r\n         * @param {*} validator\r\n         */\r\n        registerValidator: function (validator) {\r\n            validators.push(validator);\r\n        },\r\n\r\n        /**\r\n         * Returns array of registered validators\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getValidators: function () {\r\n            return validators;\r\n        },\r\n\r\n        /**\r\n         * Process validators\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function (hideError) {\r\n            var validationResult = true;\r\n\r\n            hideError = hideError || false;\r\n\r\n            if (validators.length <= 0) {\r\n                return validationResult;\r\n            }\r\n\r\n            validators.forEach(function (item) {\r\n                if (item.validate(hideError) == false) { //eslint-disable-line eqeqeq\r\n                    validationResult = false;\r\n\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return validationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/method-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return function (methods) {\r\n        _.each(methods, function (method) {\r\n            if (method.hasOwnProperty('code')) {\r\n                method.method = method.code;\r\n                delete method.code;\r\n            }\r\n        });\r\n\r\n        return methods;\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/method-group.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'uiElement',\r\n        'mage/translate'\r\n], function (Element, $t) {\r\n    'use strict';\r\n\r\n    var DEFAULT_GROUP_ALIAS = 'default';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            alias: DEFAULT_GROUP_ALIAS,\r\n            title: $t('Payment Method'),\r\n            sortOrder: 100,\r\n            displayArea: 'payment-methods-items-${ $.alias }'\r\n        },\r\n\r\n        /**\r\n         * Checks if group instance is default\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isDefault: function () {\r\n            return this.alias === DEFAULT_GROUP_ALIAS;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/model/payment/method-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Checkout/js/model/payment/place-order-hooks.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        requestModifiers: [],\r\n        afterRequestListeners: []\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/renderer-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Checkout/js/model/shipping-address/form-popup-state.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        isVisible: ko.observable(false)\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-processor/customer-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/model/error-processor'\r\n], function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {\r\n            var cache;\r\n\r\n            shippingService.isLoading(true);\r\n            cache = rateRegistry.get(address.getKey());\r\n\r\n            if (cache) {\r\n                shippingService.setShippingRates(cache);\r\n                shippingService.isLoading(false);\r\n            } else {\r\n                storage.post(\r\n                    resourceUrlManager.getUrlForEstimationShippingMethodsByAddressId(),\r\n                    JSON.stringify({\r\n                        addressId: address.customerAddressId\r\n                    }),\r\n                    false\r\n                ).done(function (result) {\r\n                    rateRegistry.set(address.getKey(), result);\r\n                    shippingService.setShippingRates(result);\r\n                }).fail(function (response) {\r\n                    shippingService.setShippingRates([]);\r\n                    errorProcessor.process(response);\r\n                }).always(function () {\r\n                    shippingService.isLoading(false);\r\n                }\r\n                );\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-processor/new-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/model/error-processor'\r\n], function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {\r\n            var cache, serviceUrl, payload;\r\n\r\n            shippingService.isLoading(true);\r\n            cache = rateRegistry.get(address.getCacheKey());\r\n            serviceUrl = resourceUrlManager.getUrlForEstimationShippingMethodsForNewAddress(quote);\r\n            payload = JSON.stringify({\r\n                    address: {\r\n                        'street': address.street,\r\n                        'city': address.city,\r\n                        'region_id': address.regionId,\r\n                        'region': address.region,\r\n                        'country_id': address.countryId,\r\n                        'postcode': address.postcode,\r\n                        'email': address.email,\r\n                        'customer_id': address.customerId,\r\n                        'firstname': address.firstname,\r\n                        'lastname': address.lastname,\r\n                        'middlename': address.middlename,\r\n                        'prefix': address.prefix,\r\n                        'suffix': address.suffix,\r\n                        'vat_id': address.vatId,\r\n                        'company': address.company,\r\n                        'telephone': address.telephone,\r\n                        'fax': address.fax,\r\n                        'custom_attributes': address.customAttributes,\r\n                        'save_in_address_book': address.saveInAddressBook\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (cache) {\r\n                shippingService.setShippingRates(cache);\r\n                shippingService.isLoading(false);\r\n            } else {\r\n                storage.post(\r\n                    serviceUrl, payload, false\r\n                ).done(function (result) {\r\n                    rateRegistry.set(address.getCacheKey(), result);\r\n                    shippingService.setShippingRates(result);\r\n                }).fail(function (response) {\r\n                    shippingService.setShippingRates([]);\r\n                    errorProcessor.process(response);\r\n                }).always(function () {\r\n                    shippingService.isLoading(false);\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/model/shipping-save-processor/payload-extender'\r\n], function (\r\n    ko,\r\n    quote,\r\n    resourceUrlManager,\r\n    storage,\r\n    paymentService,\r\n    methodConverter,\r\n    errorProcessor,\r\n    fullScreenLoader,\r\n    selectBillingAddressAction,\r\n    payloadExtender\r\n) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {jQuery.Deferred}\r\n         */\r\n        saveShippingInformation: function () {\r\n            var payload;\r\n\r\n            if (!quote.billingAddress() && quote.shippingAddress().canUseForBilling()) {\r\n                selectBillingAddressAction(quote.shippingAddress());\r\n            }\r\n\r\n            payload = {\r\n                addressInformation: {\r\n                    'shipping_address': quote.shippingAddress(),\r\n                    'billing_address': quote.billingAddress(),\r\n                    'shipping_method_code': quote.shippingMethod()['method_code'],\r\n                    'shipping_carrier_code': quote.shippingMethod()['carrier_code']\r\n                }\r\n            };\r\n\r\n            payloadExtender(payload);\r\n\r\n            fullScreenLoader.startLoader();\r\n\r\n            return storage.post(\r\n                resourceUrlManager.getUrlForSetShippingInformation(quote),\r\n                JSON.stringify(payload)\r\n            ).done(\r\n                function (response) {\r\n                    quote.setTotals(response.totals);\r\n                    paymentService.setPaymentMethods(methodConverter(response['payment_methods']));\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response);\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            );\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor/payload-extender.js":"define([], function () {\r\n    'use strict';\r\n\r\n    return function (payload) {\r\n        payload.addressInformation['extension_attributes'] = {};\r\n\r\n        return payload;\r\n    };\r\n});\r\n","Magento_Checkout/js/view/authentication-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    'Magento_Checkout/js/model/authentication-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/authentication.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Customer/js/model/customer',\r\n    'mage/validation',\r\n    'Magento_Checkout/js/model/authentication-messages',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function ($, Component, loginAction, customer, validation, messageContainer, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig;\r\n\r\n    return Component.extend({\r\n        isGuestCheckoutAllowed: checkoutConfig.isGuestCheckoutAllowed,\r\n        isCustomerLoginRequired: checkoutConfig.isCustomerLoginRequired,\r\n        registerUrl: checkoutConfig.registerUrl,\r\n        forgotPasswordUrl: checkoutConfig.forgotPasswordUrl,\r\n        autocomplete: checkoutConfig.autocomplete,\r\n        defaults: {\r\n            template: 'Magento_Checkout/authentication'\r\n        },\r\n\r\n        /**\r\n         * Is login form enabled for current customer.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return !customer.isLoggedIn();\r\n        },\r\n\r\n        /**\r\n         * Provide login action.\r\n         *\r\n         * @param {HTMLElement} loginForm\r\n         */\r\n        login: function (loginForm) {\r\n            var loginData = {},\r\n                formDataArray = $(loginForm).serializeArray();\r\n\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if ($(loginForm).validation() &&\r\n                $(loginForm).validation('isValid')\r\n            ) {\r\n                fullScreenLoader.startLoader();\r\n                loginAction(loginData, checkoutConfig.checkoutUrl, undefined, messageContainer).always(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                });\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/create-billing-address',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Checkout/js/action/set-billing-address',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/billing-address-postcode-validator',\r\n    'Magento_Checkout/js/model/address-converter'\r\n],\r\nfunction (\r\n    ko,\r\n    _,\r\n    Component,\r\n    customer,\r\n    addressList,\r\n    quote,\r\n    createBillingAddress,\r\n    selectBillingAddress,\r\n    checkoutData,\r\n    checkoutDataResolver,\r\n    customerData,\r\n    setBillingAddressAction,\r\n    globalMessageList,\r\n    $t,\r\n    billingAddressPostcodeValidator,\r\n    addressConverter\r\n) {\r\n    'use strict';\r\n\r\n    var lastSelectedBillingAddress = null,\r\n        addressUpdated = false,\r\n        addressEdited = false,\r\n        countryData = customerData.get('directory-data'),\r\n        addressOptions = addressList().filter(function (address) {\r\n            return address.getType() === 'customer-address';\r\n        });\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/billing-address',\r\n            actionsTemplate: 'Magento_Checkout/billing-address/actions',\r\n            formTemplate: 'Magento_Checkout/billing-address/form',\r\n            detailsTemplate: 'Magento_Checkout/billing-address/details',\r\n            links: {\r\n                isAddressFormVisible: '${$.billingAddressListProvider}:isNewAddressSelected'\r\n            }\r\n        },\r\n        currentBillingAddress: quote.billingAddress,\r\n        customerHasAddresses: addressOptions.length > 0,\r\n\r\n        /**\r\n         * Init component\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            quote.paymentMethod.subscribe(function () {\r\n                checkoutDataResolver.resolveBillingAddress();\r\n            }, this);\r\n            billingAddressPostcodeValidator.initFields(this.get('name') + '.form-fields');\r\n        },\r\n\r\n        /**\r\n         * @return {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe({\r\n                    selectedAddress: null,\r\n                    isAddressDetailsVisible: quote.billingAddress() != null,\r\n                    isAddressFormVisible: !customer.isLoggedIn() || !addressOptions.length,\r\n                    isAddressSameAsShipping: false,\r\n                    saveInAddressBook: 1\r\n                });\r\n\r\n            quote.billingAddress.subscribe(function (newAddress) {\r\n                if (quote.isVirtual()) {\r\n                    this.isAddressSameAsShipping(false);\r\n                } else {\r\n                    this.isAddressSameAsShipping(\r\n                        newAddress != null &&\r\n                        newAddress.getCacheKey() == quote.shippingAddress().getCacheKey() //eslint-disable-line eqeqeq\r\n                    );\r\n                }\r\n\r\n                if (newAddress != null && newAddress.saveInAddressBook !== undefined) {\r\n                    this.saveInAddressBook(newAddress.saveInAddressBook);\r\n                } else {\r\n                    this.saveInAddressBook(1);\r\n                }\r\n                this.isAddressDetailsVisible(true);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        canUseShippingAddress: ko.computed(function () {\r\n            return !quote.isVirtual() && quote.shippingAddress() && quote.shippingAddress().canUseForBilling();\r\n        }),\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        addressOptionsText: function (address) {\r\n            return address.getAddressInline();\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        useShippingAddress: function () {\r\n            if (this.isAddressSameAsShipping()) {\r\n                selectBillingAddress(quote.shippingAddress());\r\n                this.updateAddresses(true);\r\n                this.isAddressDetailsVisible(true);\r\n            } else {\r\n                lastSelectedBillingAddress = quote.billingAddress();\r\n                quote.billingAddress(null);\r\n                this.isAddressDetailsVisible(false);\r\n            }\r\n            checkoutData.setSelectedBillingAddress(null);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Update address action\r\n         */\r\n        updateAddress: function () {\r\n            var addressData, newBillingAddress;\r\n\r\n            addressUpdated = true;\r\n\r\n            if (this.selectedAddress() && !this.isAddressFormVisible()) {\r\n                selectBillingAddress(this.selectedAddress());\r\n                checkoutData.setSelectedBillingAddress(this.selectedAddress().getKey());\r\n            } else {\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger(this.dataScopePrefix + '.data.validate');\r\n\r\n                if (this.source.get(this.dataScopePrefix + '.custom_attributes')) {\r\n                    this.source.trigger(this.dataScopePrefix + '.custom_attributes.data.validate');\r\n                }\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    addressData = this.source.get(this.dataScopePrefix);\r\n\r\n                    if (customer.isLoggedIn() && !this.customerHasAddresses) { //eslint-disable-line max-depth\r\n                        this.saveInAddressBook(1);\r\n                    }\r\n                    addressData['save_in_address_book'] = this.saveInAddressBook() ? 1 : 0;\r\n                    newBillingAddress = createBillingAddress(addressData);\r\n                    // New address must be selected as a billing address\r\n                    selectBillingAddress(newBillingAddress);\r\n                    checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());\r\n                    checkoutData.setNewCustomerBillingAddress(addressData);\r\n                }\r\n            }\r\n            this.updateAddresses(true);\r\n        },\r\n\r\n        /**\r\n         * Edit address action\r\n         */\r\n        editAddress: function () {\r\n            addressUpdated = false;\r\n            addressEdited = true;\r\n            lastSelectedBillingAddress = quote.billingAddress();\r\n            quote.billingAddress(null);\r\n            this.isAddressDetailsVisible(false);\r\n        },\r\n\r\n        /**\r\n         * Cancel address edit action\r\n         */\r\n        cancelAddressEdit: function () {\r\n            addressUpdated = true;\r\n            this.restoreBillingAddress();\r\n\r\n            if (quote.billingAddress()) {\r\n                // restore 'Same As Shipping' checkbox state\r\n                this.isAddressSameAsShipping(\r\n                    quote.billingAddress() != null &&\r\n                        quote.billingAddress().getCacheKey() == quote.shippingAddress().getCacheKey() && //eslint-disable-line\r\n                        !quote.isVirtual()\r\n                );\r\n                this.isAddressDetailsVisible(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Manage cancel button visibility\r\n         */\r\n        canUseCancelBillingAddress: ko.computed(function () {\r\n            return quote.billingAddress() || lastSelectedBillingAddress;\r\n        }),\r\n\r\n        /**\r\n         * Check if Billing Address Changes should be canceled\r\n         */\r\n        needCancelBillingAddressChanges: function () {\r\n            if (addressEdited && !addressUpdated) {\r\n                this.cancelAddressEdit();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Restore billing address\r\n         */\r\n        restoreBillingAddress: function () {\r\n            var lastBillingAddress;\r\n\r\n            if (lastSelectedBillingAddress != null) {\r\n                selectBillingAddress(lastSelectedBillingAddress);\r\n                lastBillingAddress = addressConverter.quoteAddressToFormAddressData(lastSelectedBillingAddress);\r\n\r\n                checkoutData.setNewCustomerBillingAddress(lastBillingAddress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Number} countryId\r\n         * @return {*}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Trigger action to update shipping and billing addresses\r\n         *\r\n         * @param {Boolean} force\r\n         */\r\n        updateAddresses: function (force) {\r\n            force = !(typeof force === 'undefined' || force !== true);\r\n\r\n            if (force\r\n                || window.checkoutConfig.reloadOnBillingAddress\r\n                || !window.checkoutConfig.displayBillingOnPaymentMethod) {\r\n                setBillingAddressAction(globalMessageList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get code\r\n         * @param {Object} parent\r\n         * @returns {String}\r\n         */\r\n        getCode: function (parent) {\r\n            return _.isFunction(parent.getCode) ? parent.getCode() : 'shared';\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart-item-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * Prepare the product name value to be rendered as HTML\r\n         *\r\n         * @param {String} productName\r\n         * @return {String}\r\n         */\r\n        getProductNameUnsanitizedHtml: function (productName) {\r\n            // product name has already escaped on backend\r\n            return productName;\r\n        },\r\n\r\n        /**\r\n         * Prepare the given option value to be rendered as HTML\r\n         *\r\n         * @param {String} optionValue\r\n         * @return {String}\r\n         */\r\n        getOptionValueUnsanitizedHtml: function (optionValue) {\r\n            // option value has already escaped on backend\r\n            return optionValue;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/estimation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function (Component, quote, priceUtils, totals, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totals.isLoading,\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getQuantity: function () {\r\n            if (totals.totals()) {\r\n                return parseFloat(totals.totals()['items_qty']);\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            if (totals.totals()) {\r\n                return parseFloat(totals.getSegment('grand_total').value);\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Show sidebar.\r\n         */\r\n        showSidebar: function () {\r\n            sidebarModel.show();\r\n        },\r\n\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/minicart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    'sidebar',\r\n    'mage/translate',\r\n    'mage/dropdown'\r\n], function (Component, customerData, $, ko, _) {\r\n    'use strict';\r\n\r\n    var sidebarInitialized = false,\r\n        addToCartCalls = 0,\r\n        miniCart;\r\n\r\n    miniCart = $('[data-block=\\'minicart\\']');\r\n\r\n    /**\r\n     * @return {Boolean}\r\n     */\r\n    function initSidebar() {\r\n        if (miniCart.data('mageSidebar')) {\r\n            miniCart.sidebar('update');\r\n        }\r\n\r\n        if (!$('[data-role=product-item]').length) {\r\n            return false;\r\n        }\r\n        miniCart.trigger('contentUpdated');\r\n\r\n        if (sidebarInitialized) {\r\n            return false;\r\n        }\r\n        sidebarInitialized = true;\r\n        miniCart.sidebar({\r\n            'targetElement': 'div.block.block-minicart',\r\n            'url': {\r\n                'checkout': window.checkout.checkoutUrl,\r\n                'update': window.checkout.updateItemQtyUrl,\r\n                'remove': window.checkout.removeItemUrl,\r\n                'loginUrl': window.checkout.customerLoginUrl,\r\n                'isRedirectRequired': window.checkout.isRedirectRequired\r\n            },\r\n            'button': {\r\n                'checkout': '#top-cart-btn-checkout',\r\n                'remove': '#mini-cart a.action.delete',\r\n                'close': '#btn-minicart-close'\r\n            },\r\n            'showcart': {\r\n                'parent': 'span.counter',\r\n                'qty': 'span.counter-number',\r\n                'label': 'span.counter-label'\r\n            },\r\n            'minicart': {\r\n                'list': '#mini-cart',\r\n                'content': '#minicart-content-wrapper',\r\n                'qty': 'div.items-total',\r\n                'subtotal': 'div.subtotal span.price',\r\n                'maxItemsVisible': window.checkout.minicartMaxItemsVisible\r\n            },\r\n            'item': {\r\n                'qty': ':input.cart-item-qty',\r\n                'button': ':button.update-cart-item'\r\n            },\r\n            'confirmMessage': $.mage.__('Are you sure you would like to remove this item from the shopping cart?')\r\n        });\r\n    }\r\n\r\n    miniCart.on('dropdowndialogopen', function () {\r\n        initSidebar();\r\n    });\r\n\r\n    return Component.extend({\r\n        shoppingCartUrl: window.checkout.shoppingCartUrl,\r\n        maxItemsToDisplay: window.checkout.maxItemsToDisplay,\r\n        cart: {},\r\n\r\n        // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                cartData = customerData.get('cart');\r\n\r\n            this.update(cartData());\r\n            cartData.subscribe(function (updatedCart) {\r\n                addToCartCalls--;\r\n                this.isLoading(addToCartCalls > 0);\r\n                sidebarInitialized = false;\r\n                this.update(updatedCart);\r\n                initSidebar();\r\n            }, this);\r\n            $('[data-block=\"minicart\"]').on('contentLoading', function () {\r\n                addToCartCalls++;\r\n                self.isLoading(true);\r\n            });\r\n\r\n            if (\r\n                cartData().website_id !== window.checkout.websiteId && cartData().website_id !== undefined ||\r\n                cartData().storeId !== window.checkout.storeId && cartData().storeId !== undefined\r\n            ) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n        //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n        isLoading: ko.observable(false),\r\n        initSidebar: initSidebar,\r\n\r\n        /**\r\n         * Close mini shopping cart.\r\n         */\r\n        closeMinicart: function () {\r\n            $('[data-block=\"minicart\"]').find('[data-role=\"dropdownDialog\"]').dropdownDialog('close');\r\n        },\r\n\r\n        /**\r\n         * @param {String} productType\r\n         * @return {*|String}\r\n         */\r\n        getItemRenderer: function (productType) {\r\n            return this.itemRenderer[productType] || 'defaultRenderer';\r\n        },\r\n\r\n        /**\r\n         * Update mini shopping cart content.\r\n         *\r\n         * @param {Object} updatedCart\r\n         * @returns void\r\n         */\r\n        update: function (updatedCart) {\r\n            _.each(updatedCart, function (value, key) {\r\n                if (!this.cart.hasOwnProperty(key)) {\r\n                    this.cart[key] = ko.observable();\r\n                }\r\n                this.cart[key](value);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Get cart param by name.\r\n         *\r\n         * @param {String} name\r\n         * @returns {*}\r\n         */\r\n        getCartParamUnsanitizedHtml: function (name) {\r\n            if (!_.isUndefined(name)) {\r\n                if (!this.cart.hasOwnProperty(name)) {\r\n                    this.cart[name] = ko.observable();\r\n                }\r\n            }\r\n\r\n            return this.cart[name]();\r\n        },\r\n\r\n        /**\r\n         * @deprecated please use getCartParamUnsanitizedHtml.\r\n         * @param {String} name\r\n         * @returns {*}\r\n         */\r\n        getCartParam: function (name) {\r\n            return this.getCartParamUnsanitizedHtml(name);\r\n        },\r\n\r\n        /**\r\n         * Returns array of cart items, limited by 'maxItemsToDisplay' setting\r\n         * @returns []\r\n         */\r\n        getCartItems: function () {\r\n            var items = this.getCartParamUnsanitizedHtml('items') || [];\r\n\r\n            items = items.slice(parseInt(-this.maxItemsToDisplay, 10));\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         * Returns count of cart line items\r\n         * @returns {Number}\r\n         */\r\n        getCartLineItemsCount: function () {\r\n            var items = this.getCartParamUnsanitizedHtml('items') || [];\r\n\r\n            return parseInt(items.length, 10);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'mage/translate'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    ko,\r\n    quote,\r\n    stepNavigator,\r\n    paymentService,\r\n    methodConverter,\r\n    getPaymentInformation,\r\n    checkoutDataResolver,\r\n    $t\r\n) {\r\n    'use strict';\r\n\r\n    /** Set payment methods to collection */\r\n    paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/payment',\r\n            activeMethod: ''\r\n        },\r\n        isVisible: ko.observable(quote.isVirtual()),\r\n        quoteIsVirtual: quote.isVirtual(),\r\n        isPaymentMethodsAvailable: ko.computed(function () {\r\n            return paymentService.getAvailablePaymentMethods().length > 0;\r\n        }),\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            checkoutDataResolver.resolvePaymentMethod();\r\n            stepNavigator.registerStep(\r\n                'payment',\r\n                null,\r\n                $t('Review & Payments'),\r\n                this.isVisible,\r\n                _.bind(this.navigate, this),\r\n                this.sortOrder\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Navigate method.\r\n         */\r\n        navigate: function () {\r\n            var self = this;\r\n\r\n            if (!self.hasShippingMethod()) {\r\n                this.isVisible(false);\r\n                stepNavigator.setHash('shipping');\r\n            } else {\r\n                getPaymentInformation().done(function () {\r\n                    self.isVisible(true);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        hasShippingMethod: function () {\r\n            return window.checkoutConfig.selectedShippingMethod !== null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getFormKey: function () {\r\n            return window.checkoutConfig.formKey;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/progress-bar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/view/billing-address'\r\n], function ($, _, ko, Component, stepNavigator, billingAddress) {\r\n    'use strict';\r\n\r\n    var steps = stepNavigator.steps;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/progress-bar',\r\n            visible: true\r\n        },\r\n        steps: steps,\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var stepsValue;\r\n\r\n            this._super();\r\n            window.addEventListener('hashchange', _.bind(stepNavigator.handleHash, stepNavigator));\r\n\r\n            if (!window.location.hash) {\r\n                stepsValue = stepNavigator.steps();\r\n\r\n                if (stepsValue.length) {\r\n                    stepNavigator.setHash(stepsValue.sort(stepNavigator.sortItems)[0].code);\r\n                }\r\n            }\r\n\r\n            stepNavigator.handleHash();\r\n        },\r\n\r\n        /**\r\n         * @param {*} itemOne\r\n         * @param {*} itemTwo\r\n         * @return {*|Number}\r\n         */\r\n        sortItems: function (itemOne, itemTwo) {\r\n            return stepNavigator.sortItems(itemOne, itemTwo);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} step\r\n         */\r\n        navigateTo: function (step) {\r\n            if (step.code === 'shipping') {\r\n                billingAddress().needCancelBillingAddressChanges();\r\n            }\r\n            stepNavigator.navigateTo(step.code);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {*|Boolean}\r\n         */\r\n        isProcessed: function (item) {\r\n            return stepNavigator.isProcessed(item.code);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/registration.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Ui/js/model/messageList'\r\n], function ($, Component, messageList) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/registration',\r\n            accountCreated: false,\r\n            creationStarted: false,\r\n            isFormVisible: true\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('accountCreated')\r\n                .observe('isFormVisible')\r\n                .observe('creationStarted');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getEmailAddress: function () {\r\n            return this.email;\r\n        },\r\n\r\n        /**\r\n         * @return String\r\n         */\r\n        getUrl: function () {\r\n            return this.registrationUrl;\r\n        },\r\n\r\n        /**\r\n         * Create new user account.\r\n         *\r\n         * @deprecated\r\n         */\r\n        createAccount: function () {\r\n            this.creationStarted(true);\r\n            $.post(\r\n                this.registrationUrl\r\n            ).done(\r\n                function (response) {\r\n\r\n                    if (response.errors == false) { //eslint-disable-line eqeqeq\r\n                        this.accountCreated(true);\r\n                    } else {\r\n                        messageList.addErrorMessage(response);\r\n                    }\r\n                    this.isFormVisible(false);\r\n                }.bind(this)\r\n            ).fail(\r\n                function (response) {\r\n                    this.accountCreated(false);\r\n                    this.isFormVisible(false);\r\n                    messageList.addErrorMessage(response);\r\n                }.bind(this)\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function ($, Component, quote, stepNavigator, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isVisible: function () {\r\n            return !quote.isVirtual() && stepNavigator.isProcessed('shipping');\r\n        },\r\n\r\n        /**\r\n         * @return {String}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                shippingMethodTitle = '';\r\n\r\n            if (!shippingMethod) {\r\n                return '';\r\n            }\r\n\r\n            shippingMethodTitle = shippingMethod['carrier_title'];\r\n\r\n            if (typeof shippingMethod['method_title'] !== 'undefined') {\r\n                shippingMethodTitle += ' - ' + shippingMethod['method_title'];\r\n            }\r\n\r\n            return shippingMethodTitle;\r\n        },\r\n\r\n        /**\r\n         * Back step.\r\n         */\r\n        back: function () {\r\n            sidebarModel.hide();\r\n            stepNavigator.navigateTo('shipping');\r\n        },\r\n\r\n        /**\r\n         * Back to shipping method.\r\n         */\r\n        backToShippingMethod: function () {\r\n            sidebarModel.hide();\r\n            stepNavigator.navigateTo('shipping', 'opc-shipping_method');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/form',\r\n    'ko',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/create-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/action/set-shipping-information',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Ui/js/modal/modal',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'uiRegistry',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/shipping-rate-service'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    ko,\r\n    customer,\r\n    addressList,\r\n    addressConverter,\r\n    quote,\r\n    createShippingAddress,\r\n    selectShippingAddress,\r\n    shippingRatesValidator,\r\n    formPopUpState,\r\n    shippingService,\r\n    selectShippingMethodAction,\r\n    rateRegistry,\r\n    setShippingInformationAction,\r\n    stepNavigator,\r\n    modal,\r\n    checkoutDataResolver,\r\n    checkoutData,\r\n    registry,\r\n    $t\r\n) {\r\n    'use strict';\r\n\r\n    var popUp = null;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping',\r\n            shippingFormTemplate: 'Magento_Checkout/shipping-address/form',\r\n            shippingMethodListTemplate: 'Magento_Checkout/shipping-address/shipping-method-list',\r\n            shippingMethodItemTemplate: 'Magento_Checkout/shipping-address/shipping-method-item',\r\n            imports: {\r\n                countryOptions: '${ $.parentName }.shippingAddress.shipping-address-fieldset.country_id:indexedOptions'\r\n            }\r\n        },\r\n        visible: ko.observable(!quote.isVirtual()),\r\n        errorValidationMessage: ko.observable(false),\r\n        isCustomerLoggedIn: customer.isLoggedIn,\r\n        isFormPopUpVisible: formPopUpState.isVisible,\r\n        isFormInline: addressList().length === 0,\r\n        isNewAddressAdded: ko.observable(false),\r\n        saveInAddressBook: 1,\r\n        quoteIsVirtual: quote.isVirtual(),\r\n\r\n        /**\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                hasNewAddress,\r\n                fieldsetName = 'checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset';\r\n\r\n            this._super();\r\n\r\n            if (!quote.isVirtual()) {\r\n                stepNavigator.registerStep(\r\n                    'shipping',\r\n                    '',\r\n                    $t('Shipping'),\r\n                    this.visible, _.bind(this.navigate, this),\r\n                    this.sortOrder\r\n                );\r\n            }\r\n            checkoutDataResolver.resolveShippingAddress();\r\n\r\n            hasNewAddress = addressList.some(function (address) {\r\n                return address.getType() == 'new-customer-address'; //eslint-disable-line eqeqeq\r\n            });\r\n\r\n            this.isNewAddressAdded(hasNewAddress);\r\n\r\n            this.isFormPopUpVisible.subscribe(function (value) {\r\n                if (value) {\r\n                    self.getPopUp().openModal();\r\n                }\r\n            });\r\n\r\n            quote.shippingMethod.subscribe(function () {\r\n                self.errorValidationMessage(false);\r\n            });\r\n\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n\r\n                if (shippingAddressData) {\r\n                    checkoutProvider.set(\r\n                        'shippingAddress',\r\n                        $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                    );\r\n                }\r\n                checkoutProvider.on('shippingAddress', function (shippingAddrsData, changes) {\r\n                    var isStreetAddressDeleted, isStreetAddressNotEmpty;\r\n\r\n                    /**\r\n                     * In last modifying operation street address was deleted.\r\n                     * @return {Boolean}\r\n                     */\r\n                    isStreetAddressDeleted = function () {\r\n                        var change;\r\n\r\n                        if (!changes || changes.length === 0) {\r\n                            return false;\r\n                        }\r\n\r\n                        change = changes.pop();\r\n\r\n                        if (_.isUndefined(change.value) || _.isUndefined(change.oldValue)) {\r\n                            return false;\r\n                        }\r\n\r\n                        if (!change.path.startsWith('shippingAddress.street')) {\r\n                            return false;\r\n                        }\r\n\r\n                        return change.value.length === 0 && change.oldValue.length > 0;\r\n                    };\r\n\r\n                    isStreetAddressNotEmpty = shippingAddrsData.street && !_.isEmpty(shippingAddrsData.street[0]);\r\n\r\n                    if (isStreetAddressNotEmpty || isStreetAddressDeleted()) {\r\n                        checkoutData.setShippingAddressFromData(shippingAddrsData);\r\n                    }\r\n                });\r\n                shippingRatesValidator.initFields(fieldsetName);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Navigator change hash handler.\r\n         *\r\n         * @param {Object} step - navigation step\r\n         */\r\n        navigate: function (step) {\r\n            step && step.isVisible(true);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPopUp: function () {\r\n            var self = this,\r\n                buttons;\r\n\r\n            if (!popUp) {\r\n                buttons = this.popUpForm.options.buttons;\r\n                this.popUpForm.options.buttons = [\r\n                    {\r\n                        text: buttons.save.text ? buttons.save.text : $t('Save Address'),\r\n                        class: buttons.save.class ? buttons.save.class : 'action primary action-save-address',\r\n                        click: self.saveNewAddress.bind(self)\r\n                    },\r\n                    {\r\n                        text: buttons.cancel.text ? buttons.cancel.text : $t('Cancel'),\r\n                        class: buttons.cancel.class ? buttons.cancel.class : 'action secondary action-hide-popup',\r\n\r\n                        /** @inheritdoc */\r\n                        click: this.onClosePopUp.bind(this)\r\n                    }\r\n                ];\r\n\r\n                /** @inheritdoc */\r\n                this.popUpForm.options.closed = function () {\r\n                    self.isFormPopUpVisible(false);\r\n                };\r\n\r\n                this.popUpForm.options.modalCloseBtnHandler = this.onClosePopUp.bind(this);\r\n                this.popUpForm.options.keyEventHandlers = {\r\n                    escapeKey: this.onClosePopUp.bind(this)\r\n                };\r\n\r\n                /** @inheritdoc */\r\n                this.popUpForm.options.opened = function () {\r\n                    // Store temporary address for revert action in case when user click cancel action\r\n                    self.temporaryAddress = $.extend(true, {}, checkoutData.getShippingAddressFromData());\r\n                };\r\n                popUp = modal(this.popUpForm.options, $(this.popUpForm.element));\r\n            }\r\n\r\n            return popUp;\r\n        },\r\n\r\n        /**\r\n         * Revert address and close modal.\r\n         */\r\n        onClosePopUp: function () {\r\n            checkoutData.setShippingAddressFromData($.extend(true, {}, this.temporaryAddress));\r\n            this.getPopUp().closeModal();\r\n        },\r\n\r\n        /**\r\n         * Show address form popup\r\n         */\r\n        showFormPopUp: function () {\r\n            this.isFormPopUpVisible(true);\r\n        },\r\n\r\n        /**\r\n         * Save new shipping address\r\n         */\r\n        saveNewAddress: function () {\r\n            var addressData,\r\n                newShippingAddress;\r\n\r\n            this.source.set('params.invalid', false);\r\n            this.triggerShippingDataValidateEvent();\r\n\r\n            if (!this.source.get('params.invalid')) {\r\n                addressData = this.source.get('shippingAddress');\r\n                // if user clicked the checkbox, its value is true or false. Need to convert.\r\n                addressData['save_in_address_book'] = this.saveInAddressBook ? 1 : 0;\r\n\r\n                // New address must be selected as a shipping address\r\n                newShippingAddress = createShippingAddress(addressData);\r\n                selectShippingAddress(newShippingAddress);\r\n                checkoutData.setSelectedShippingAddress(newShippingAddress.getKey());\r\n                checkoutData.setNewCustomerShippingAddress($.extend(true, {}, addressData));\r\n                this.getPopUp().closeModal();\r\n                this.isNewAddressAdded(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Shipping Method View\r\n         */\r\n        rates: shippingService.getShippingRates(),\r\n        isLoading: shippingService.isLoading,\r\n        isSelected: ko.computed(function () {\r\n            return quote.shippingMethod() ?\r\n                quote.shippingMethod()['carrier_code'] + '_' + quote.shippingMethod()['method_code'] :\r\n                null;\r\n        }),\r\n\r\n        /**\r\n         * @param {Object} shippingMethod\r\n         * @return {Boolean}\r\n         */\r\n        selectShippingMethod: function (shippingMethod) {\r\n            selectShippingMethodAction(shippingMethod);\r\n            checkoutData.setSelectedShippingRate(shippingMethod['carrier_code'] + '_' + shippingMethod['method_code']);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Set shipping information handler\r\n         */\r\n        setShippingInformation: function () {\r\n            if (this.validateShippingInformation()) {\r\n                quote.billingAddress(null);\r\n                checkoutDataResolver.resolveBillingAddress();\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n\r\n                    if (shippingAddressData) {\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                        );\r\n                    }\r\n                });\r\n                setShippingInformationAction().done(\r\n                    function () {\r\n                        stepNavigator.next();\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        validateShippingInformation: function () {\r\n            var shippingAddress,\r\n                addressData,\r\n                loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                emailValidationResult = customer.isLoggedIn(),\r\n                field,\r\n                option = _.isObject(this.countryOptions) && this.countryOptions[quote.shippingAddress().countryId],\r\n                messageContainer = registry.get('checkout.errors').messageContainer;\r\n\r\n            if (!quote.shippingMethod()) {\r\n                this.errorValidationMessage(\r\n                    $t('The shipping method is missing. Select the shipping method and try again.')\r\n                );\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n            }\r\n\r\n            if (this.isFormInline) {\r\n                this.source.set('params.invalid', false);\r\n                this.triggerShippingDataValidateEvent();\r\n\r\n                if (!quote.shippingMethod()['method_code']) {\r\n                    this.errorValidationMessage(\r\n                        $t('The shipping method is missing. Select the shipping method and try again.')\r\n                    );\r\n                }\r\n\r\n                if (emailValidationResult &&\r\n                    this.source.get('params.invalid') ||\r\n                    !quote.shippingMethod()['method_code'] ||\r\n                    !quote.shippingMethod()['carrier_code']\r\n                ) {\r\n                    this.focusInvalid();\r\n\r\n                    return false;\r\n                }\r\n\r\n                shippingAddress = quote.shippingAddress();\r\n                addressData = addressConverter.formAddressDataToQuoteAddress(\r\n                    this.source.get('shippingAddress')\r\n                );\r\n\r\n                //Copy form data to quote shipping address object\r\n                for (field in addressData) {\r\n                    if (addressData.hasOwnProperty(field) &&  //eslint-disable-line max-depth\r\n                        shippingAddress.hasOwnProperty(field) &&\r\n                        typeof addressData[field] != 'function' &&\r\n                        _.isEqual(shippingAddress[field], addressData[field])\r\n                    ) {\r\n                        shippingAddress[field] = addressData[field];\r\n                    } else if (typeof addressData[field] != 'function' &&\r\n                        !_.isEqual(shippingAddress[field], addressData[field])) {\r\n                        shippingAddress = addressData;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (customer.isLoggedIn()) {\r\n                    shippingAddress['save_in_address_book'] = 1;\r\n                }\r\n                selectShippingAddress(shippingAddress);\r\n            } else if (customer.isLoggedIn() &&\r\n                option &&\r\n                option['is_region_required'] &&\r\n                !quote.shippingAddress().region\r\n            ) {\r\n                messageContainer.addErrorMessage({\r\n                    message: $t('Please specify a regionId in shipping address.')\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!emailValidationResult) {\r\n                $(loginFormSelector + ' input[name=username]').trigger('focus');\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Trigger Shipping data Validate Event.\r\n         */\r\n        triggerShippingDataValidateEvent: function () {\r\n            this.source.trigger('shippingAddress.data.validate');\r\n\r\n            if (this.source.get('shippingAddress.custom_attributes')) {\r\n                this.source.trigger('shippingAddress.custom_attributes.data.validate');\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function (Component, ko, $, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @param {HTMLElement} element\r\n         */\r\n        setModalElement: function (element) {\r\n            sidebarModel.setPopup($(element));\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, totals) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totals.isLoading\r\n    });\r\n});\r\n","Magento_Checkout/js/view/billing-address/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/model/address-list',\r\n    'mage/translate',\r\n    'Magento_Customer/js/model/customer'\r\n], function (Component, addressList, $t, customer) {\r\n    'use strict';\r\n\r\n    var newAddressOption = {\r\n            /**\r\n             * Get new address label\r\n             * @returns {String}\r\n             */\r\n            getAddressInline: function () {\r\n                return $t('New Address');\r\n            },\r\n            customerAddressId: null\r\n        },\r\n        addressOptions = addressList().filter(function (address) {\r\n            return address.getType() === 'customer-address';\r\n        }),\r\n        addressDefaultIndex = addressOptions.findIndex(function (address) {\r\n            return address.isDefaultBilling();\r\n        });\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/billing-address',\r\n            selectedAddress: null,\r\n            isNewAddressSelected: false,\r\n            addressOptions: addressOptions,\r\n            exports: {\r\n                selectedAddress: '${ $.parentName }:selectedAddress'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.addressOptions.push(newAddressOption);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('selectedAddress isNewAddressSelected')\r\n                .observe({\r\n                    isNewAddressSelected: !customer.isLoggedIn() || !addressOptions.length,\r\n                    selectedAddress: this.addressOptions[addressDefaultIndex]\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        addressOptionsText: function (address) {\r\n            return address.getAddressInline();\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        onAddressChange: function (address) {\r\n            this.isNewAddressSelected(address === newAddressOption);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/shipping-estimation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Ui/js/form/form',\r\n        'Magento_Checkout/js/action/select-shipping-address',\r\n        'Magento_Checkout/js/model/address-converter',\r\n        'Magento_Checkout/js/model/cart/estimate-service',\r\n        'Magento_Checkout/js/checkout-data',\r\n        'Magento_Checkout/js/model/shipping-rates-validator',\r\n        'uiRegistry',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/checkout-data-resolver',\r\n        'Magento_Checkout/js/model/shipping-service',\r\n        'mage/validation'\r\n    ],\r\n    function (\r\n        $,\r\n        Component,\r\n        selectShippingAddress,\r\n        addressConverter,\r\n        estimateService,\r\n        checkoutData,\r\n        shippingRatesValidator,\r\n        registry,\r\n        quote,\r\n        checkoutDataResolver,\r\n        shippingService\r\n    ) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'Magento_Checkout/cart/shipping-estimation'\r\n            },\r\n            isVirtual: quote.isVirtual(),\r\n\r\n            /**\r\n             * @override\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n\r\n                // Prevent shipping methods showing none available whilst we resolve\r\n                shippingService.isLoading(true);\r\n\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var address, estimatedAddress;\r\n\r\n                    shippingService.isLoading(false);\r\n\r\n                    checkoutDataResolver.resolveEstimationAddress();\r\n                    address = quote.isVirtual() ? quote.billingAddress() : quote.shippingAddress();\r\n\r\n                    if (!address && quote.isVirtual()) {\r\n                        address = addressConverter.formAddressDataToQuoteAddress(\r\n                            checkoutData.getSelectedBillingAddress()\r\n                        );\r\n                    }\r\n\r\n                    if (address) {\r\n                        estimatedAddress = address.isEditable() ?\r\n                            addressConverter.quoteAddressToFormAddressData(address) :\r\n                            {\r\n                                // only the following fields must be used by estimation form data provider\r\n                                'country_id': address.countryId,\r\n                                region: address.region,\r\n                                'region_id': address.regionId,\r\n                                postcode: address.postcode\r\n                            };\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend({}, checkoutProvider.get('shippingAddress'), estimatedAddress)\r\n                        );\r\n                    }\r\n\r\n                    if (!quote.isVirtual()) {\r\n                        checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                            //jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n                            if (quote.shippingAddress().countryId !== shippingAddressData.country_id ||\r\n                                (shippingAddressData.postcode || shippingAddressData.region_id)\r\n                            ) {\r\n                                checkoutData.setShippingAddressFromData(shippingAddressData);\r\n                            }\r\n                            //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n                        });\r\n                    } else {\r\n                        checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                            checkoutData.setBillingAddressFromData(shippingAddressData);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * @override\r\n             */\r\n            initElement: function (element) {\r\n                this._super();\r\n\r\n                if (element.index === 'address-fieldsets') {\r\n                    shippingRatesValidator.bindChangeHandlers(element.elems(), true, 500);\r\n                    element.elems.subscribe(function (elems) {\r\n                        shippingRatesValidator.doElementBinding(elems[elems.length - 1], true, 500);\r\n                    });\r\n                }\r\n\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * Returns shipping rates for address\r\n             * @returns void\r\n             */\r\n            getEstimationInfo: function () {\r\n                var addressData = null;\r\n\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger('shippingAddress.data.validate');\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    addressData = this.source.get('shippingAddress');\r\n                    selectShippingAddress(addressConverter.formAddressDataToQuoteAddress(addressData));\r\n                }\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_Checkout/js/view/cart/shipping-rates.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/checkout-data'\r\n], function (ko, _, Component, shippingService, priceUtils, quote, selectShippingMethodAction, checkoutData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/cart/shipping-rates'\r\n        },\r\n        isVisible: ko.observable(!quote.isVirtual()),\r\n        isLoading: shippingService.isLoading,\r\n        shippingRates: shippingService.getShippingRates(),\r\n        shippingRateGroups: ko.observableArray([]),\r\n        selectedShippingMethod: ko.computed(function () {\r\n            return quote.shippingMethod() ?\r\n                quote.shippingMethod()['carrier_code'] + '_' + quote.shippingMethod()['method_code'] :\r\n                null;\r\n        }),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            this.shippingRates.subscribe(function (rates) {\r\n                self.shippingRateGroups([]);\r\n                _.each(rates, function (rate) {\r\n                    var carrierTitle = rate['carrier_title'];\r\n\r\n                    if (self.shippingRateGroups.indexOf(carrierTitle) === -1) {\r\n                        self.shippingRateGroups.push(carrierTitle);\r\n                    }\r\n                });\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get shipping rates for specific group based on title.\r\n         * @returns Array\r\n         */\r\n        getRatesForGroup: function (shippingRateGroupTitle) {\r\n            return _.filter(this.shippingRates(), function (rate) {\r\n                return shippingRateGroupTitle === rate['carrier_title'];\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Format shipping price.\r\n         * @returns {String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * Set shipping method.\r\n         * @param {String} methodData\r\n         * @returns bool\r\n         */\r\n        selectShippingMethod: function (methodData) {\r\n            selectShippingMethodAction(methodData);\r\n            checkoutData.setSelectedShippingRate(methodData['carrier_code'] + '_' + methodData['method_code']);\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/shipping-service'\r\n], function ($, Component, totalsService, shippingService) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totalsService.isLoading,\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            totalsService.totals.subscribe(function () {\r\n                $(window).trigger('resize');\r\n            });\r\n            shippingService.getShippingRates().subscribe(function () {\r\n                $(window).trigger('resize');\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/totals/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return !!quote.shippingMethod();\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/checkout/placeOrderCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n    'Magento_Captcha/js/model/captchaList',\r\n    'underscore',\r\n    'Magento_Checkout/js/model/payment/place-order-hooks'\r\n],\r\nfunction (defaultCaptcha, captchaList, _, placeOrderHooks) {\r\n    'use strict';\r\n\r\n    return defaultCaptcha.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var self = this,\r\n                currentCaptcha;\r\n\r\n            this._super();\r\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n            if (currentCaptcha != null) {\r\n                currentCaptcha.setIsVisible(true);\r\n                this.setCurrentCaptcha(currentCaptcha);\r\n                placeOrderHooks.requestModifiers.push(function (headers) {\r\n                    if (self.isRequired()) {\r\n                        headers['X-Captcha'] = self.captchaValue()();\r\n                    }\r\n                });\r\n                if (self.isRequired()) {\r\n                    placeOrderHooks.afterRequestListeners.push(function () {\r\n                        self.refresh();\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        displaySubtotal: ko.observable(true),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.cart = customerData.get('cart');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/configure/product-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore',\r\n    'domReady!'\r\n], function ($, customerData, _) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n        qtySelector: '#product_addtocart_form [name=\"qty\"]',\r\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\r\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\r\n    },\r\n    cartData = customerData.get('cart'),\r\n    productId = $(selectors.productIdSelector).val(),\r\n    itemId = $(selectors.itemIdSelector).val(),\r\n    productQty,\r\n    productQtyInput,\r\n\r\n    /**\r\n    * Updates product's qty input value according to actual data\r\n    */\r\n    updateQty = function () {\r\n\r\n        if (productQty || productQty === 0) {\r\n            productQtyInput = productQtyInput || $(selectors.qtySelector);\r\n\r\n            if (productQtyInput && productQty.toString() !== productQtyInput.val()) {\r\n                productQtyInput.val(productQty);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n    * Sets productQty according to cart data from customer-data\r\n    *\r\n    * @param {Object} data - cart data from customer-data\r\n    */\r\n    setProductQty = function (data) {\r\n        var product;\r\n\r\n        if (!(data && data.items && data.items.length && productId)) {\r\n            return;\r\n        }\r\n        product = _.find(data.items, function (item) {\r\n            if (item['item_id'] === itemId) {\r\n                return item['product_id'] === productId ||\r\n                    item['item_id'] === productId;\r\n            }\r\n        });\r\n\r\n        if (!product) {\r\n            return;\r\n        }\r\n        productQty = product.qty;\r\n    };\r\n\r\n    cartData.subscribe(function (updateCartData) {\r\n        setProductQty(updateCartData);\r\n        updateQty();\r\n    });\r\n\r\n    setProductQty(cartData());\r\n    updateQty();\r\n});\r\n","Magento_Checkout/js/view/form/element/email.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'ko',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/action/check-email-availability',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'mage/validation'\r\n], function ($, Component, ko, customer, checkEmailAvailability, loginAction, quote, checkoutData, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    var validatedEmail;\r\n\r\n    if (!checkoutData.getValidatedEmailValue() &&\r\n        window.checkoutConfig.validatedEmailValue\r\n    ) {\r\n        checkoutData.setInputFieldEmailValue(window.checkoutConfig.validatedEmailValue);\r\n        checkoutData.setValidatedEmailValue(window.checkoutConfig.validatedEmailValue);\r\n    }\r\n\r\n    validatedEmail = checkoutData.getValidatedEmailValue();\r\n\r\n    if (validatedEmail && !customer.isLoggedIn()) {\r\n        quote.guestEmail = validatedEmail;\r\n    }\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/form/element/email',\r\n            email: checkoutData.getInputFieldEmailValue(),\r\n            emailFocused: false,\r\n            isLoading: false,\r\n            isPasswordVisible: false,\r\n            listens: {\r\n                email: 'emailHasChanged',\r\n                emailFocused: 'validateEmail'\r\n            },\r\n            ignoreTmpls: {\r\n                email: true\r\n            }\r\n        },\r\n        checkDelay: 2000,\r\n        checkRequest: null,\r\n        isEmailCheckComplete: null,\r\n        isCustomerLoggedIn: customer.isLoggedIn,\r\n        forgotPasswordUrl: window.checkoutConfig.forgotPasswordUrl,\r\n        emailCheckTimeout: 0,\r\n        emailInputId: '#customer-email',\r\n\r\n        /**\r\n         * Initializes regular properties of instance.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.isPasswordVisible = this.resolveInitialPasswordVisibility();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['email', 'emailFocused', 'isLoading', 'isPasswordVisible']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Callback on changing email property\r\n         */\r\n        emailHasChanged: function () {\r\n            var self = this;\r\n\r\n            clearTimeout(this.emailCheckTimeout);\r\n\r\n            if (self.validateEmail()) {\r\n                quote.guestEmail = self.email();\r\n                checkoutData.setValidatedEmailValue(self.email());\r\n            }\r\n            this.emailCheckTimeout = setTimeout(function () {\r\n                if (self.validateEmail()) {\r\n                    self.checkEmailAvailability();\r\n                } else {\r\n                    self.isPasswordVisible(false);\r\n                }\r\n            }, self.checkDelay);\r\n\r\n            checkoutData.setInputFieldEmailValue(self.email());\r\n        },\r\n\r\n        /**\r\n         * Check email existing.\r\n         */\r\n        checkEmailAvailability: function () {\r\n            this.validateRequest();\r\n            this.isEmailCheckComplete = $.Deferred();\r\n            // Clean up errors on email\r\n            $(this.emailInputId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n            this.isLoading(true);\r\n            this.checkRequest = checkEmailAvailability(this.isEmailCheckComplete, this.email());\r\n\r\n            $.when(this.isEmailCheckComplete).done(function () {\r\n                this.isPasswordVisible(false);\r\n                checkoutData.setCheckedEmailValue('');\r\n            }.bind(this)).fail(function () {\r\n                this.isPasswordVisible(true);\r\n                checkoutData.setCheckedEmailValue(this.email());\r\n            }.bind(this)).always(function () {\r\n                this.isLoading(false);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * If request has been sent -> abort it.\r\n         * ReadyStates for request aborting:\r\n         * 1 - The request has been set up\r\n         * 2 - The request has been sent\r\n         * 3 - The request is in process\r\n         */\r\n        validateRequest: function () {\r\n            if (this.checkRequest != null && $.inArray(this.checkRequest.readyState, [1, 2, 3])) {\r\n                this.checkRequest.abort();\r\n                this.checkRequest = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Local email validation.\r\n         *\r\n         * @param {Boolean} focused - input focus.\r\n         * @returns {Boolean} - validation result.\r\n         */\r\n        validateEmail: function (focused) {\r\n            var loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                usernameSelector = loginFormSelector + ' input[name=username]',\r\n                loginForm = $(loginFormSelector),\r\n                validator,\r\n                valid;\r\n\r\n            loginForm.validation();\r\n\r\n            if (focused === false && !!this.email()) {\r\n                valid = !!$(usernameSelector).valid();\r\n\r\n                if (valid) {\r\n                    $(usernameSelector).removeAttr('aria-invalid aria-describedby');\r\n                }\r\n\r\n                return valid;\r\n            }\r\n\r\n            if (loginForm.is(':visible')) {\r\n                validator = loginForm.validate();\r\n\r\n                return validator.check(usernameSelector);\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Log in form submitting callback.\r\n         *\r\n         * @param {HTMLElement} loginForm - form element.\r\n         */\r\n        login: function (loginForm) {\r\n            var loginData = {},\r\n                formDataArray = $(loginForm).serializeArray();\r\n\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if (this.isPasswordVisible() && $(loginForm).validation() && $(loginForm).validation('isValid')) {\r\n                fullScreenLoader.startLoader();\r\n                loginAction(loginData).always(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolves an initial state of a login form.\r\n         *\r\n         * @returns {Boolean} - initial visibility state.\r\n         */\r\n        resolveInitialPasswordVisibility: function () {\r\n            if (checkoutData.getInputFieldEmailValue() !== '' && checkoutData.getCheckedEmailValue() !== '') {\r\n                return true;\r\n            }\r\n\r\n            if (checkoutData.getInputFieldEmailValue() !== '') {\r\n                return checkoutData.getInputFieldEmailValue() === checkoutData.getCheckedEmailValue();\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/action/place-order',\r\n    'Magento_Checkout/js/action/select-payment-method',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/model/messages',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/action/redirect-on-success'\r\n], function (\r\n    ko,\r\n    $,\r\n    Component,\r\n    placeOrderAction,\r\n    selectPaymentMethodAction,\r\n    quote,\r\n    customer,\r\n    paymentService,\r\n    checkoutData,\r\n    checkoutDataResolver,\r\n    registry,\r\n    additionalValidators,\r\n    Messages,\r\n    layout,\r\n    redirectOnSuccessAction\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        redirectAfterPlaceOrder: true,\r\n        isPlaceOrderActionAllowed: ko.observable(quote.billingAddress() != null),\r\n\r\n        /**\r\n         * After place order callback\r\n         */\r\n        afterPlaceOrder: function () {\r\n            // Override this function and put after place order logic here\r\n        },\r\n\r\n        /**\r\n         * Initialize view.\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var billingAddressCode,\r\n                billingAddressData,\r\n                defaultAddressData;\r\n\r\n            this._super().initChildren();\r\n            quote.billingAddress.subscribe(function (address) {\r\n                this.isPlaceOrderActionAllowed(address !== null);\r\n            }, this);\r\n            checkoutDataResolver.resolveBillingAddress();\r\n\r\n            billingAddressCode = 'billingAddress' + this.getCode();\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                defaultAddressData = checkoutProvider.get(billingAddressCode);\r\n\r\n                if (defaultAddressData === undefined) {\r\n                    // Skip if payment does not have a billing address form\r\n                    return;\r\n                }\r\n                billingAddressData = checkoutData.getBillingAddressFromData();\r\n\r\n                if (billingAddressData) {\r\n                    checkoutProvider.set(\r\n                        billingAddressCode,\r\n                        $.extend(true, {}, defaultAddressData, billingAddressData)\r\n                    );\r\n                }\r\n                checkoutProvider.on(billingAddressCode, function (providerBillingAddressData) {\r\n                    checkoutData.setBillingAddressFromData(providerBillingAddressData);\r\n                }, billingAddressCode);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize child elements\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.messageContainer = new Messages();\r\n            this.createMessagesComponent();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create child message renderer component\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        createMessagesComponent: function () {\r\n\r\n            var messagesComponent = {\r\n                parent: this.name,\r\n                name: this.name + '.messages',\r\n                displayArea: 'messages',\r\n                component: 'Magento_Ui/js/view/messages',\r\n                config: {\r\n                    messageContainer: this.messageContainer\r\n                }\r\n            };\r\n\r\n            layout([messagesComponent]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Place order.\r\n         */\r\n        placeOrder: function (data, event) {\r\n            var self = this;\r\n\r\n            if (event) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            if (this.validate() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                this.isPlaceOrderActionAllowed(false);\r\n\r\n                this.getPlaceOrderDeferredObject()\r\n                    .done(\r\n                        function () {\r\n                            self.afterPlaceOrder();\r\n\r\n                            if (self.redirectAfterPlaceOrder) {\r\n                                redirectOnSuccessAction.execute();\r\n                            }\r\n                        }\r\n                    ).always(\r\n                        function () {\r\n                            self.isPlaceOrderActionAllowed(true);\r\n                        }\r\n                    );\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPlaceOrderDeferredObject: function () {\r\n            return $.when(\r\n                placeOrderAction(this.getData(), this.messageContainer)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        selectPaymentMethod: function () {\r\n            selectPaymentMethodAction(this.getData());\r\n            checkoutData.setSelectedPaymentMethod(this.item.method);\r\n\r\n            return true;\r\n        },\r\n\r\n        isChecked: ko.computed(function () {\r\n            return quote.paymentMethod() ? quote.paymentMethod().method : null;\r\n        }),\r\n\r\n        isRadioButtonVisible: ko.computed(function () {\r\n            return paymentService.getAvailablePaymentMethods().length !== 1;\r\n        }),\r\n\r\n        /**\r\n         * Get payment method data\r\n         */\r\n        getData: function () {\r\n            return {\r\n                'method': this.item.method,\r\n                'po_number': null,\r\n                'additional_data': null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get payment method type.\r\n         */\r\n        getTitle: function () {\r\n            return this.item.title;\r\n        },\r\n\r\n        /**\r\n         * Get payment method code.\r\n         */\r\n        getCode: function () {\r\n            return this.item.method;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        validate: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @return {String}\r\n         */\r\n        getBillingAddressFormName: function () {\r\n            return 'billing-address-form-' + this.item.method;\r\n        },\r\n\r\n        /**\r\n         * Dispose billing address subscriptions\r\n         */\r\n        disposeSubscriptions: function () {\r\n            // dispose all active subscriptions\r\n            var billingAddressCode = 'billingAddress' + this.getCode();\r\n\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                checkoutProvider.off(billingAddressCode);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment/email-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/payment/additional-validators',\r\n        'Magento_Checkout/js/model/customer-email-validator'\r\n    ],\r\n    function (Component, additionalValidators, agreementValidator) {\r\n        'use strict';\r\n\r\n        additionalValidators.registerValidator(agreementValidator);\r\n\r\n        return Component.extend({});\r\n    }\r\n);\r\n","Magento_Checkout/js/view/payment/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/method-list',\r\n    'Magento_Checkout/js/model/payment/renderer-list',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'mage/translate',\r\n    'uiRegistry'\r\n], function (_, ko, utils, Component, paymentMethods, rendererList, layout, checkoutDataResolver, $t, registry) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/payment-methods/list',\r\n            visible: paymentMethods().length > 0,\r\n            configDefaultGroup: {\r\n                name: 'methodGroup',\r\n                component: 'Magento_Checkout/js/model/payment/method-group'\r\n            },\r\n            paymentGroupsList: [],\r\n            defaultGroupTitle: $t('Select a new payment method')\r\n        },\r\n\r\n        /**\r\n         * Initialize view.\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super().initDefaulGroup().initChildren();\r\n            paymentMethods.subscribe(\r\n                function (changes) {\r\n                    checkoutDataResolver.resolvePaymentMethod();\r\n                    //remove renderer for \"deleted\" payment methods\r\n                    _.each(changes, function (change) {\r\n                        if (change.status === 'deleted') {\r\n                            this.removeRenderer(change.value.method);\r\n                        }\r\n                    }, this);\r\n                    //add renderer for \"added\" payment methods\r\n                    _.each(changes, function (change) {\r\n                        if (change.status === 'added') {\r\n                            this.createRenderer(change.value);\r\n                        }\r\n                    }, this);\r\n                }, this, 'arrayChange');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super().\r\n                observe(['paymentGroupsList']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates default group\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initDefaulGroup: function () {\r\n            layout([\r\n                this.configDefaultGroup\r\n            ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create renders for child payment methods.\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var self = this;\r\n\r\n            _.each(paymentMethods(), function (paymentMethodData) {\r\n                self.createRenderer(paymentMethodData);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @returns\r\n         */\r\n        createComponent: function (payment) {\r\n            var rendererTemplate,\r\n                rendererComponent,\r\n                templateData;\r\n\r\n            templateData = {\r\n                parentName: this.name,\r\n                name: payment.name\r\n            };\r\n            rendererTemplate = {\r\n                parent: '${ $.$data.parentName }',\r\n                name: '${ $.$data.name }',\r\n                displayArea: payment.displayArea,\r\n                component: payment.component\r\n            };\r\n            rendererComponent = utils.template(rendererTemplate, templateData);\r\n            utils.extend(rendererComponent, {\r\n                item: payment.item,\r\n                config: payment.config\r\n            });\r\n\r\n            return rendererComponent;\r\n        },\r\n\r\n        /**\r\n         * Create renderer.\r\n         *\r\n         * @param {Object} paymentMethodData\r\n         */\r\n        createRenderer: function (paymentMethodData) {\r\n            var isRendererForMethod = false,\r\n                currentGroup;\r\n\r\n            registry.get(this.configDefaultGroup.name, function (defaultGroup) {\r\n                _.each(rendererList(), function (renderer) {\r\n\r\n                    if (renderer.hasOwnProperty('typeComparatorCallback') &&\r\n                        typeof renderer.typeComparatorCallback == 'function'\r\n                    ) {\r\n                        isRendererForMethod = renderer.typeComparatorCallback(renderer.type, paymentMethodData.method);\r\n                    } else {\r\n                        isRendererForMethod = renderer.type === paymentMethodData.method;\r\n                    }\r\n\r\n                    if (isRendererForMethod) {\r\n                        currentGroup = renderer.group ? renderer.group : defaultGroup;\r\n\r\n                        this.collectPaymentGroups(currentGroup);\r\n\r\n                        layout([\r\n                            this.createComponent(\r\n                                {\r\n                                    config: renderer.config,\r\n                                    component: renderer.component,\r\n                                    name: renderer.type,\r\n                                    method: paymentMethodData.method,\r\n                                    item: paymentMethodData,\r\n                                    displayArea: currentGroup.displayArea\r\n                                }\r\n                            )]);\r\n                    }\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Collects unique groups of available payment methods\r\n         *\r\n         * @param {Object} group\r\n         */\r\n        collectPaymentGroups: function (group) {\r\n            var groupsList = this.paymentGroupsList(),\r\n                isGroupExists = _.some(groupsList, function (existsGroup) {\r\n                    return existsGroup.alias === group.alias;\r\n                });\r\n\r\n            if (!isGroupExists) {\r\n                groupsList.push(group);\r\n                groupsList = _.sortBy(groupsList, function (existsGroup) {\r\n                    return existsGroup.sortOrder;\r\n                });\r\n                this.paymentGroupsList(groupsList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns payment group title\r\n         *\r\n         * @param {Object} group\r\n         * @returns {String}\r\n         */\r\n        getGroupTitle: function (group) {\r\n            var title = group().title;\r\n\r\n            if (group().isDefault() && this.paymentGroupsList().length > 1) {\r\n                title = this.defaultGroupTitle;\r\n            }\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Checks if at least one payment method available\r\n         *\r\n         * @returns {String}\r\n         */\r\n        isPaymentMethodsAvailable: function () {\r\n            return _.some(this.paymentGroupsList(), function (group) {\r\n                return this.regionHasElements(group.displayArea);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Remove view renderer.\r\n         *\r\n         * @param {String} paymentMethodCode\r\n         */\r\n        removeRenderer: function (paymentMethodCode) {\r\n            var items;\r\n\r\n            _.each(this.paymentGroupsList(), function (group) {\r\n                items = this.getRegion(group.displayArea);\r\n\r\n                _.find(items(), function (value) {\r\n                    if (value.item.method.indexOf(paymentMethodCode) === 0) {\r\n                        value.disposeSubscriptions();\r\n                        value.destroy();\r\n                    }\r\n                });\r\n            }, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-address/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Customer/js/model/address-list'\r\n], function (_, ko, utils, Component, layout, addressList) {\r\n    'use strict';\r\n\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'Magento_Checkout/js/view/shipping-address/address-renderer/default',\r\n        provider: 'checkoutProvider'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-address/list',\r\n            visible: addressList().length > 0,\r\n            rendererTemplates: []\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            addressList.subscribe(function (changes) {\r\n                    var self = this;\r\n\r\n                    changes.forEach(function (change) {\r\n                        if (change.status === 'added') {\r\n                            self.createRendererComponent(change.value, change.index);\r\n                        }\r\n                    });\r\n                },\r\n                this,\r\n                'arrayChange'\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = [];\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initChildren: function () {\r\n            _.each(addressList(), this.createRendererComponent, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param {Object} address\r\n         * @param {*} index\r\n         */\r\n        createRendererComponent: function (address, index) {\r\n            var rendererTemplate, templateData, rendererComponent;\r\n\r\n            if (index in this.rendererComponents) {\r\n                this.rendererComponents[index].address(address);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                rendererTemplate = address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined ? //eslint-disable-line\r\n                    utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()]) :\r\n                    defaultRendererTemplate;\r\n                templateData = {\r\n                    parentName: this.name,\r\n                    name: index\r\n                };\r\n                rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(rendererComponent, {\r\n                    address: ko.observable(address)\r\n                });\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[index] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-address/address-renderer/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'underscore',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, ko, Component, _, selectShippingAddressAction, quote, formPopUpState, checkoutData, customerData) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-address/address-renderer/default'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.isSelected = ko.computed(function () {\r\n                var isSelected = false,\r\n                    shippingAddress = quote.shippingAddress();\r\n\r\n                if (shippingAddress) {\r\n                    isSelected = shippingAddress.getKey() == this.address().getKey(); //eslint-disable-line eqeqeq\r\n                }\r\n\r\n                return isSelected;\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {String} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        },\r\n\r\n        /** Set selected customer shipping address  */\r\n        selectAddress: function () {\r\n            selectShippingAddressAction(this.address());\r\n            checkoutData.setSelectedShippingAddress(this.address().getKey());\r\n        },\r\n\r\n        /**\r\n         * Edit address.\r\n         */\r\n        editAddress: function () {\r\n            formPopUpState.isVisible(true);\r\n            this.showPopup();\r\n\r\n        },\r\n\r\n        /**\r\n         * Show popup.\r\n         */\r\n        showPopup: function () {\r\n            $('[data-open-modal=\"opc-new-shipping-address\"]').trigger('click');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/model/quote'\r\n], function ($, ko, utils, Component, layout, quote) {\r\n    'use strict';\r\n\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'Magento_Checkout/js/view/shipping-information/address-renderer/default',\r\n        provider: 'checkoutProvider'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information/list',\r\n            rendererTemplates: {}\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super()\r\n                .initChildren();\r\n\r\n            quote.shippingAddress.subscribe(function (address) {\r\n                self.createRendererComponent(address);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = {};\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initChildren: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param {Object} address\r\n         */\r\n        createRendererComponent: function (address) {\r\n            var rendererTemplate, templateData, rendererComponent;\r\n\r\n            $.each(this.rendererComponents, function (index, component) {\r\n                component.visible(false);\r\n            });\r\n\r\n            if (this.rendererComponents[address.getType()]) {\r\n                this.rendererComponents[address.getType()].address(address);\r\n                this.rendererComponents[address.getType()].visible(true);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                rendererTemplate = address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined ? //eslint-disable-line\r\n                    utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()]) :\r\n                    defaultRendererTemplate;\r\n                templateData = {\r\n                    parentName: this.name,\r\n                    name: address.getType()\r\n                };\r\n\r\n                rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(\r\n                    rendererComponent,\r\n                    {\r\n                        address: ko.observable(address),\r\n                        visible: ko.observable(true)\r\n                    }\r\n                );\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[address.getType()] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information/address-renderer/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, _, customerData) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information/address-renderer/default'\r\n        },\r\n\r\n        /**\r\n         * @param {*} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/abstract-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/step-navigator'\r\n], function (Component, quote, priceUtils, totals, stepNavigator) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getTotals: function () {\r\n            return totals.totals();\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isFullMode: function () {\r\n            if (!this.getTotals()) {\r\n                return false;\r\n            }\r\n\r\n            return stepNavigator.isProcessed('shipping');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/cart-items.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/totals',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (ko, totals, Component, stepNavigator, quote) {\r\n    'use strict';\r\n\r\n    var useQty = window.checkoutConfig.useQty;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/cart-items'\r\n        },\r\n        totals: totals.totals(),\r\n        items: ko.observable([]),\r\n        maxCartItemsToDisplay: window.checkoutConfig.maxCartItemsToDisplay,\r\n        cartUrl: window.checkoutConfig.cartUrl,\r\n\r\n        /**\r\n         * @deprecated Please use observable property (this.items())\r\n         */\r\n        getItems: totals.getItems(),\r\n\r\n        /**\r\n         * Returns cart items qty\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getItemsQty: function () {\r\n            return parseFloat(this.totals['items_qty']);\r\n        },\r\n\r\n        /**\r\n         * Returns count of cart line items\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getCartLineItemsCount: function () {\r\n            return parseInt(totals.getItems()().length, 10);\r\n        },\r\n\r\n        /**\r\n         * Returns shopping cart items summary (includes config settings)\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getCartSummaryItemsCount: function () {\r\n            return useQty ? this.getItemsQty() : this.getCartLineItemsCount();\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            // Set initial items to observable field\r\n            this.setItems(totals.getItems()());\r\n            // Subscribe for items data changes and refresh items in view\r\n            totals.getItems().subscribe(function (items) {\r\n                this.setItems(items);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Set items to observable field\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        setItems: function (items) {\r\n            if (items && items.length > 0) {\r\n                items = items.slice(parseInt(-this.maxCartItemsToDisplay, 10));\r\n            }\r\n            this.items(items);\r\n        },\r\n\r\n        /**\r\n         * Returns bool value for items block state (expanded or not)\r\n         *\r\n         * @returns {*|Boolean}\r\n         */\r\n        isItemsBlockExpanded: function () {\r\n            return quote.isVirtual() || stepNavigator.isProcessed('shipping');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/grand-total'\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        },\r\n\r\n        /**\r\n         * Get pure value.\r\n         */\r\n        getPureValue: function () {\r\n            var totals = quote.getTotals()();\r\n\r\n            if (totals) {\r\n                return totals['grand_total'];\r\n            }\r\n\r\n            return quote['grand_total'];\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/view/summary/discount'\r\n], function ($, _, Component, quote, discountView) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/shipping'\r\n        },\r\n        quoteIsVirtual: quote.isVirtual(),\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod,\r\n                shippingMethodTitle = '';\r\n\r\n            if (!this.isCalculated()) {\r\n                return '';\r\n            }\r\n            shippingMethod = quote.shippingMethod();\r\n\r\n            if (!_.isArray(shippingMethod) && !_.isObject(shippingMethod)) {\r\n                return '';\r\n            }\r\n\r\n            if (typeof shippingMethod['method_title'] !== 'undefined') {\r\n                shippingMethodTitle = ' - ' + shippingMethod['method_title'];\r\n            }\r\n\r\n            return shippingMethodTitle ?\r\n                shippingMethod['carrier_title'] + shippingMethodTitle :\r\n                shippingMethod['carrier_title'];\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && quote.shippingMethod() != null; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price =  this.totals()['shipping_amount'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * If is set coupon code, but there wasn't displayed discount view.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        haveToShowCoupon: function () {\r\n            var couponCode = this.totals()['coupon_code'];\r\n\r\n            if (typeof couponCode === 'undefined') {\r\n                couponCode = false;\r\n            }\r\n\r\n            return couponCode && !discountView().isDisplayed();\r\n        },\r\n\r\n        /**\r\n         * Returns coupon code description.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getCouponDescription: function () {\r\n            if (!this.haveToShowCoupon()) {\r\n                return '';\r\n            }\r\n\r\n            return '(' + this.totals()['coupon_code'] + ')';\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/subtotal'\r\n        },\r\n\r\n        /**\r\n         * Get pure value.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getPureValue: function () {\r\n            var totals = quote.getTotals()();\r\n\r\n            if (totals) {\r\n                return totals.subtotal;\r\n            }\r\n\r\n            return quote.subtotal;\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'escaper'\r\n], function (Component, escaper) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details',\r\n            allowedTags: ['b', 'strong', 'i', 'em', 'u']\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {String}\r\n         */\r\n        getNameUnsanitizedHtml: function (quoteItem) {\r\n            var txt = document.createElement('textarea');\r\n\r\n            txt.innerHTML = quoteItem.name;\r\n\r\n            return escaper.escapeHtml(txt.value, this.allowedTags);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {String}Magento_Checkout/js/region-updater\r\n         */\r\n        getValue: function (quoteItem) {\r\n            return quoteItem.name;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiComponent'], function (Component) {\r\n    'use strict';\r\n\r\n    var quoteMessages = window.checkoutConfig.quoteMessages;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details/message'\r\n        },\r\n        displayArea: 'item_message',\r\n        quoteMessages: quoteMessages,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getMessage: function (item) {\r\n            if (this.quoteMessages[item['item_id']]) {\r\n                return this.quoteMessages[item['item_id']];\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total'\r\n], function (viewModel) {\r\n    'use strict';\r\n\r\n    return viewModel.extend({\r\n        defaults: {\r\n            displayArea: 'after_details',\r\n            template: 'Magento_Checkout/summary/item/details/subtotal'\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValue: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total']);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/thumbnail.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiComponent'], function (Component) {\r\n    'use strict';\r\n\r\n    var imageData = window.checkoutConfig.imageData;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details/thumbnail'\r\n        },\r\n        displayArea: 'before_details',\r\n        imageData: imageData,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {Array}\r\n         */\r\n        getImageItem: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']];\r\n            }\r\n\r\n            return [];\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getSrc: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].src;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getWidth: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].width;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getHeight: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].height;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getAlt: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].alt;\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreement-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/validation'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {},\r\n        agreementsInputPath = '.payment-method._active div.checkout-agreements input';\r\n\r\n    return {\r\n        /**\r\n         * Validate checkout agreements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function (hideError) {\r\n            var isValid = true;\r\n\r\n            if (!agreementsConfig.isEnabled || $(agreementsInputPath).length === 0) {\r\n                return true;\r\n            }\r\n\r\n            $(agreementsInputPath).each(function (index, element) {\r\n                if (!$.validator.validateSingleElement(element, {\r\n                    errorElement: 'div',\r\n                    hideError: hideError || false\r\n                })) {\r\n                    isValid = false;\r\n                }\r\n            });\r\n\r\n            return isValid;\r\n        }\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreements-assigner.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\r\n\r\n    /** Override default place order action and add agreement_ids to request */\r\n    return function (paymentData) {\r\n        var agreementForm,\r\n            agreementData,\r\n            agreementIds;\r\n\r\n        if (!agreementsConfig.isEnabled) {\r\n            return;\r\n        }\r\n\r\n        agreementForm = $('.payment-method._active div[data-role=checkout-agreements] input');\r\n        agreementData = agreementForm.serializeArray();\r\n        agreementIds = [];\r\n\r\n        agreementData.forEach(function (item) {\r\n            agreementIds.push(item.value);\r\n        });\r\n\r\n        if (paymentData['extension_attributes'] === undefined) {\r\n            paymentData['extension_attributes'] = {};\r\n        }\r\n\r\n        paymentData['extension_attributes']['agreement_ids'] = agreementIds;\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreements-modal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Create popUp window for provided element.\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        createModal: function (element) {\r\n            var options;\r\n\r\n            this.modalWindow = element;\r\n            options = {\r\n                'type': 'popup',\r\n                'modalClass': 'agreements-modal',\r\n                'responsive': true,\r\n                'innerScroll': true,\r\n                'trigger': '.show-modal',\r\n                'buttons': [\r\n                    {\r\n                        text: $t('Close'),\r\n                        class: 'action secondary action-hide-popup',\r\n\r\n                        /** @inheritdoc */\r\n                        click: function () {\r\n                            this.closeModal();\r\n                        }\r\n                    }\r\n                ]\r\n            };\r\n            modal(options, $(this.modalWindow));\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            $(this.modalWindow).modal('openModal');\r\n        }\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\r\n], function ($, wrapper, agreementsAssigner) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n\r\n        /** Override default place order action and add agreement_ids to request */\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\r\n            agreementsAssigner(paymentData);\r\n\r\n            return originalAction(paymentData, messageContainer);\r\n        });\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/set-payment-information-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\r\n], function ($, wrapper, agreementsAssigner) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n\r\n        /** Override place-order-mixin for set-payment-information action as they differs only by method signature */\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, messageContainer, paymentData) {\r\n            agreementsAssigner(paymentData);\r\n\r\n            return originalAction(messageContainer, paymentData);\r\n        });\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/view/agreement-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_CheckoutAgreements/js/model/agreement-validator'\r\n], function (Component, additionalValidators, agreementValidator) {\r\n    'use strict';\r\n\r\n    additionalValidators.registerValidator(agreementValidator);\r\n\r\n    return Component.extend({});\r\n});\r\n","Magento_CheckoutAgreements/js/view/checkout-agreements.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_CheckoutAgreements/js/model/agreements-modal'\r\n], function (ko, $, Component, agreementsModal) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        agreementManualMode = 1,\r\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_CheckoutAgreements/checkout/checkout-agreements'\r\n        },\r\n        isVisible: agreementsConfig.isEnabled,\r\n        agreements: agreementsConfig.agreements,\r\n        modalTitle: ko.observable(null),\r\n        modalContent: ko.observable(null),\r\n        contentHeight: ko.observable(null),\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Checks if agreement required\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        isAgreementRequired: function (element) {\r\n            return element.mode == agreementManualMode; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * Show agreement content in modal\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        showContent: function (element) {\r\n            this.modalTitle(element.checkboxText);\r\n            this.modalContent(element.content);\r\n            this.contentHeight(element.contentHeight ? element.contentHeight : 'auto');\r\n            agreementsModal.showModal();\r\n        },\r\n\r\n        /**\r\n         * build a unique id for the term checkbox\r\n         *\r\n         * @param {Object} context - the ko context\r\n         * @param {Number} agreementId\r\n         */\r\n        getCheckboxId: function (context, agreementId) {\r\n            var paymentMethodName = '',\r\n                paymentMethodRenderer = context.$parents[1];\r\n\r\n            // corresponding payment method fetched from parent context\r\n            if (paymentMethodRenderer) {\r\n                // item looks like this: {title: \"Check / Money order\", method: \"checkmo\"}\r\n                paymentMethodName = paymentMethodRenderer.item ?\r\n                  paymentMethodRenderer.item.method : '';\r\n            }\r\n\r\n            return 'agreement_' + paymentMethodName + '_' + agreementId;\r\n        },\r\n\r\n        /**\r\n         * Init modal window for rendered element\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        initModal: function (element) {\r\n            agreementsModal.createModal(element);\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/catalog-add-to-cart-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/product/view/product-info-resolver'\r\n], function (_, $, productInfoResolver) {\r\n    'use strict';\r\n\r\n    return function (widget) {\r\n\r\n        $.widget('mage.catalogAddToCart', widget, {\r\n            /**\r\n             * @param {jQuery} form\r\n             */\r\n            ajaxSubmit: function (form) {\r\n                var isConfigurable = !!_.find(form.serializeArray(), function (item) {\r\n                    return item.name.indexOf('super_attribute') !== -1;\r\n                });\r\n\r\n                if (isConfigurable) {\r\n                    this.options.productInfoResolver = productInfoResolver;\r\n                }\r\n\r\n                return this._super(form);\r\n            }\r\n        });\r\n\r\n        return $.mage.catalogAddToCart;\r\n    };\r\n});\r\n","Magento_ConfigurableProduct/js/catalog-add-to-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Add selected configurable attributes to redirect url\r\n     *\r\n     * @see Magento_Catalog/js/catalog-add-to-cart\r\n     */\r\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\r\n        $(data.form).find('select[name*=\"super\"]').each(function (index, item) {\r\n            data.redirectParameters.push(item.config.id + '=' + $(item).val());\r\n        });\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/configurable-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/options-updater'\r\n], function ($, Updater) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n            formSelector: '#product_addtocart_form'\r\n        },\r\n        configurableWidgetName = 'mageConfigurable',\r\n        widgetInitEvent = 'configurable.initialized',\r\n\r\n    /**\r\n    * Sets all configurable attribute's selected values\r\n    */\r\n    updateConfigurableOptions = function () {\r\n        var configurableWidget = $(selectors.formSelector).data(configurableWidgetName);\r\n\r\n        if (!configurableWidget) {\r\n            return;\r\n        }\r\n        configurableWidget.options.values = this.productOptions || {};\r\n        configurableWidget._configureForValues();\r\n    },\r\n    updater = new Updater(widgetInitEvent, updateConfigurableOptions);\r\n\r\n    updater.listen();\r\n});\r\n","Magento_ConfigurableProduct/js/configurable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'priceUtils',\r\n    'priceBox',\r\n    'jquery-ui-modules/widget',\r\n    'jquery/jquery.parsequery',\r\n    'fotoramaVideoEvents'\r\n], function ($, _, mageTemplate, $t, priceUtils) {\r\n    'use strict';\r\n\r\n    $.widget('mage.configurable', {\r\n        options: {\r\n            superSelector: '.super-attribute-select',\r\n            selectSimpleProduct: '[name=\"selected_configurable_option\"]',\r\n            priceHolderSelector: '.price-box',\r\n            spConfig: {},\r\n            state: {},\r\n            priceFormat: {},\r\n            optionTemplate: '<%- data.label %>' +\r\n            '<% if (typeof data.finalPrice.value !== \"undefined\") { %>' +\r\n            ' <%- data.finalPrice.formatted %>' +\r\n            '<% } %>',\r\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\r\n            mediaGalleryInitial: null,\r\n            slyOldPriceSelector: '.sly-old-price',\r\n            normalPriceLabelSelector: '.product-info-main .normal-price .price-label',\r\n\r\n            /**\r\n             * Defines the mechanism of how images of a gallery should be\r\n             * updated when user switches between configurations of a product.\r\n             *\r\n             * As for now value of this option can be either 'replace' or 'prepend'.\r\n             *\r\n             * @type {String}\r\n             */\r\n            gallerySwitchStrategy: 'replace',\r\n            tierPriceTemplateSelector: '#tier-prices-template',\r\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\r\n            tierPriceTemplate: '',\r\n            selectorProduct: '.product-info-main',\r\n            selectorProductPrice: '[data-role=priceBox]',\r\n            qtyInfo: '#qty'\r\n        },\r\n\r\n        /**\r\n         * Creates widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            // Initial setting of various option values\r\n            this._initializeOptions();\r\n\r\n            // Override defaults with URL query parameters and/or inputs values\r\n            this._overrideDefaults();\r\n\r\n            // Change events to check select reloads\r\n            this._setupChangeEvents();\r\n\r\n            // Fill state\r\n            this._fillState();\r\n\r\n            // Setup child and prev/next settings\r\n            this._setChildSettings();\r\n\r\n            // Setup/configure values to inputs\r\n            this._configureForValues();\r\n\r\n            $(this.element).trigger('configurable.initialized');\r\n            $(this.options.qtyInfo).on('input', this._reloadPrice.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Initialize tax configuration, initial settings, and options values.\r\n         * @private\r\n         */\r\n        _initializeOptions: function () {\r\n            var options = this.options,\r\n                gallery = $(options.mediaGallerySelector),\r\n                priceBoxOptions = $(this.options.priceHolderSelector).priceBox('option').priceConfig || null;\r\n\r\n            if (priceBoxOptions && priceBoxOptions.optionTemplate) {\r\n                options.optionTemplate = priceBoxOptions.optionTemplate;\r\n            }\r\n\r\n            if (priceBoxOptions && priceBoxOptions.priceFormat) {\r\n                options.priceFormat = priceBoxOptions.priceFormat;\r\n            }\r\n            options.optionTemplate = mageTemplate(options.optionTemplate);\r\n            options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\r\n\r\n            options.settings = options.spConfig.containerId ?\r\n                $(options.spConfig.containerId).find(options.superSelector) :\r\n                $(options.superSelector);\r\n\r\n            options.values = options.spConfig.defaultValues || {};\r\n            options.parentImage = $('[data-role=base-image-container] img').attr('src');\r\n\r\n            this.inputSimpleProduct = this.element.find(options.selectSimpleProduct);\r\n\r\n            gallery.data('gallery') ?\r\n                this._onGalleryLoaded(gallery) :\r\n                gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\r\n\r\n        },\r\n\r\n        /**\r\n         * Override default options values settings with either URL query parameters or\r\n         * initialized inputs values.\r\n         * @private\r\n         */\r\n        _overrideDefaults: function () {\r\n            var hashIndex = window.location.href.indexOf('#');\r\n\r\n            if (hashIndex !== -1) {\r\n                this._parseQueryParams(window.location.href.substr(hashIndex + 1));\r\n            }\r\n\r\n            if (this.options.spConfig.inputsInitialized) {\r\n                this._setValuesByAttribute();\r\n            }\r\n\r\n            this._setInitialOptionsLabels();\r\n        },\r\n\r\n        /**\r\n         * Parse query parameters from a query string and set options values based on the\r\n         * key value pairs of the parameters.\r\n         * @param {*} queryString - URL query string containing query parameters.\r\n         * @private\r\n         */\r\n        _parseQueryParams: function (queryString) {\r\n            var queryParams = $.parseQuery({\r\n                query: queryString\r\n            });\r\n\r\n            $.each(queryParams, $.proxy(function (key, value) {\r\n                if (this.options.spConfig.attributes[key] !== undefined &&\r\n                    _.find(this.options.spConfig.attributes[key].options, function (element) {\r\n                        return element.id === value;\r\n                    })) {\r\n                    this.options.values[key] = value;\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Override default options values with values based on each element's attribute\r\n         * identifier.\r\n         * @private\r\n         */\r\n        _setValuesByAttribute: function () {\r\n            this.options.values = {};\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                var attributeId;\r\n\r\n                if (element.value) {\r\n                    attributeId = element.id.replace(/[a-z]*/, '');\r\n\r\n                    if (this.options.spConfig.attributes[attributeId] !== undefined &&\r\n                        _.find(this.options.spConfig.attributes[attributeId].options, function (optionElement) {\r\n                            return optionElement.id === element.value;\r\n                        })) {\r\n                        this.options.values[attributeId] = element.value;\r\n                    }\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set additional field with initial label to be used when switching between options with different prices.\r\n         * @private\r\n         */\r\n        _setInitialOptionsLabels: function () {\r\n            $.each(this.options.spConfig.attributes, $.proxy(function (index, element) {\r\n                $.each(element.options, $.proxy(function (optIndex, optElement) {\r\n                    this.options.spConfig.attributes[index].options[optIndex].initialLabel = optElement.label;\r\n                }, this));\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set up .on('change') events for each option element to configure the option.\r\n         * @private\r\n         */\r\n        _setupChangeEvents: function () {\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                $(element).on('change', this, this._configure);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Iterate through the option settings and set each option's element configuration,\r\n         * attribute identifier. Set the state based on the attribute identifier.\r\n         * @private\r\n         */\r\n        _fillState: function () {\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                var attributeId = element.id.replace(/[a-z]*/, '');\r\n\r\n                if (attributeId && this.options.spConfig.attributes[attributeId]) {\r\n                    element.config = this.options.spConfig.attributes[attributeId];\r\n                    element.attributeId = attributeId;\r\n                    this.options.state[attributeId] = false;\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set each option's child settings, and next/prev option setting. Fill (initialize)\r\n         * an option's list of selections as needed or disable an option's setting.\r\n         * @private\r\n         */\r\n        _setChildSettings: function () {\r\n            var childSettings = [],\r\n                settings = this.options.settings,\r\n                index = settings.length,\r\n                option;\r\n\r\n            while (index--) {\r\n                option = settings[index];\r\n\r\n                if (index) {\r\n                    option.disabled = true;\r\n                } else {\r\n                    this._fillSelect(option);\r\n                }\r\n\r\n                _.extend(option, {\r\n                    childSettings: childSettings.slice(),\r\n                    prevSetting: settings[index - 1],\r\n                    nextSetting: settings[index + 1]\r\n                });\r\n\r\n                childSettings.push(option);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Setup for all configurable option settings. Set the value of the option and configure\r\n         * the option, which sets its state, and initializes the option's choices, etc.\r\n         * @private\r\n         */\r\n        _configureForValues: function () {\r\n            if (this.options.values) {\r\n                this.options.settings.each($.proxy(function (index, element) {\r\n                    var attributeId = element.attributeId;\r\n\r\n                    element.value = this.options.values[attributeId] || '';\r\n                    this._configureElement(element);\r\n                }, this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Event handler for configuring an option.\r\n         * @private\r\n         * @param {Object} event - Event triggered to configure an option.\r\n         */\r\n        _configure: function (event) {\r\n            event.data._configureElement(this);\r\n        },\r\n\r\n        /**\r\n         * Configure an option, initializing it's state and enabling related options, which\r\n         * populates the related option's selection and resets child option selections.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _configureElement: function (element) {\r\n            this.simpleProduct = this._getSimpleProductId(element);\r\n\r\n            if (element.value) {\r\n                this.options.state[element.config.id] = element.value;\r\n\r\n                if (element.nextSetting) {\r\n                    element.nextSetting.disabled = false;\r\n                    this._fillSelect(element.nextSetting);\r\n                    this._resetChildren(element.nextSetting);\r\n                } else {\r\n                    if (!!document.documentMode) { //eslint-disable-line\r\n                        this.inputSimpleProduct.val(element.options[element.selectedIndex].config.allowedProducts[0]);\r\n                    } else {\r\n                        this.inputSimpleProduct.val(element.selectedOptions[0].config.allowedProducts[0]);\r\n                    }\r\n                }\r\n            } else {\r\n                this._resetChildren(element);\r\n            }\r\n\r\n            this._reloadPrice();\r\n            this._displayRegularPriceBlock(this.simpleProduct);\r\n            this._displayTierPriceBlock(this.simpleProduct);\r\n            this._displayNormalPriceLabel();\r\n            this._changeProductImage();\r\n        },\r\n\r\n        /**\r\n         * Change displayed product image according to chosen options of configurable product\r\n         *\r\n         * @private\r\n         */\r\n        _changeProductImage: function () {\r\n            var images,\r\n                initialImages = this.options.mediaGalleryInitial,\r\n                gallery = $(this.options.mediaGallerySelector).data('gallery');\r\n\r\n            if (_.isUndefined(gallery)) {\r\n                $(this.options.mediaGallerySelector).on('gallery:loaded', function () {\r\n                    this._changeProductImage();\r\n                }.bind(this));\r\n\r\n                return;\r\n            }\r\n\r\n            images = this.options.spConfig.images[this.simpleProduct];\r\n\r\n            if (images) {\r\n                images = this._sortImages(images);\r\n\r\n                if (this.options.gallerySwitchStrategy === 'prepend') {\r\n                    images = images.concat(initialImages);\r\n                }\r\n\r\n                images = $.extend(true, [], images);\r\n                images = this._setImageIndex(images);\r\n\r\n                gallery.updateData(images);\r\n                this._addFotoramaVideoEvents(false);\r\n            } else {\r\n                gallery.updateData(initialImages);\r\n                this._addFotoramaVideoEvents(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add video events\r\n         *\r\n         * @param {Boolean} isInitial\r\n         * @private\r\n         */\r\n        _addFotoramaVideoEvents: function (isInitial) {\r\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\r\n                return;\r\n            }\r\n\r\n            if (isInitial) {\r\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\r\n\r\n                return;\r\n            }\r\n\r\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\r\n                selectedOption: this.simpleProduct,\r\n                dataMergeStrategy: this.options.gallerySwitchStrategy\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sorting images array\r\n         *\r\n         * @private\r\n         */\r\n        _sortImages: function (images) {\r\n            return _.sortBy(images, function (image) {\r\n                return image.position;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set correct indexes for image set.\r\n         *\r\n         * @param {Array} images\r\n         * @private\r\n         */\r\n        _setImageIndex: function (images) {\r\n            var length = images.length,\r\n                i;\r\n\r\n            for (i = 0; length > i; i++) {\r\n                images[i].i = i + 1;\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * For a given option element, reset all of its selectable options. Clear any selected\r\n         * index, disable the option choice, and reset the option's state if necessary.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _resetChildren: function (element) {\r\n            if (element.childSettings) {\r\n                _.each(element.childSettings, function (set) {\r\n                    set.selectedIndex = 0;\r\n                    set.disabled = true;\r\n                });\r\n\r\n                if (element.config) {\r\n                    this.options.state[element.config.id] = false;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Populates an option's selectable choices.\r\n         * @private\r\n         * @param {*} element - Element associated with a configurable option.\r\n         */\r\n        _fillSelect: function (element) {\r\n            var attributeId = element.id.replace(/[a-z]*/, ''),\r\n                options = this._getAttributeOptions(attributeId),\r\n                prevConfig,\r\n                index = 1,\r\n                allowedProducts,\r\n                allowedProductsByOption,\r\n                allowedProductsAll,\r\n                i,\r\n                j,\r\n                finalPrice = parseFloat(this.options.spConfig.prices.finalPrice.amount),\r\n                optionFinalPrice,\r\n                optionPriceDiff,\r\n                optionPrices = this.options.spConfig.optionPrices,\r\n                allowedOptions = [],\r\n                indexKey,\r\n                allowedProductMinPrice,\r\n                allowedProductsAllMinPrice,\r\n                canDisplayOutOfStockProducts = false,\r\n                filteredSalableProducts;\r\n\r\n            this._clearSelect(element);\r\n            element.options[0] = new Option('', '');\r\n            element.options[0].innerHTML = this.options.spConfig.chooseText;\r\n            prevConfig = false;\r\n\r\n            if (element.prevSetting) {\r\n                prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];\r\n            }\r\n\r\n            if (options) {\r\n                for (indexKey in this.options.spConfig.index) {\r\n                    /* eslint-disable max-depth */\r\n                    if (this.options.spConfig.index.hasOwnProperty(indexKey)) {\r\n                        allowedOptions = allowedOptions.concat(_.values(this.options.spConfig.index[indexKey]));\r\n                    }\r\n                }\r\n\r\n                if (prevConfig) {\r\n                    allowedProductsByOption = {};\r\n                    allowedProductsAll = [];\r\n\r\n                    for (i = 0; i < options.length; i++) {\r\n                        /* eslint-disable max-depth */\r\n                        for (j = 0; j < options[i].products.length; j++) {\r\n                            // prevConfig.config can be undefined\r\n                            if (prevConfig.config &&\r\n                                prevConfig.config.allowedProducts &&\r\n                                prevConfig.config.allowedProducts.indexOf(options[i].products[j]) > -1) {\r\n                                if (!allowedProductsByOption[i]) {\r\n                                    allowedProductsByOption[i] = [];\r\n                                }\r\n                                allowedProductsByOption[i].push(options[i].products[j]);\r\n                                allowedProductsAll.push(options[i].products[j]);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (typeof allowedProductsAll[0] !== 'undefined' &&\r\n                        typeof optionPrices[allowedProductsAll[0]] !== 'undefined') {\r\n                        allowedProductsAllMinPrice = this._getAllowedProductWithMinPrice(allowedProductsAll);\r\n                        finalPrice = parseFloat(optionPrices[allowedProductsAllMinPrice].finalPrice.amount);\r\n                    }\r\n                }\r\n\r\n                for (i = 0; i < options.length; i++) {\r\n                    if (prevConfig && typeof allowedProductsByOption[i] === 'undefined') {\r\n                        continue; //jscs:ignore disallowKeywords\r\n                    }\r\n\r\n                    allowedProducts = prevConfig ? allowedProductsByOption[i] : options[i].products.slice(0);\r\n                    optionPriceDiff = 0;\r\n\r\n                    if (typeof allowedProducts[0] !== 'undefined' &&\r\n                        typeof optionPrices[allowedProducts[0]] !== 'undefined') {\r\n                        allowedProductMinPrice = this._getAllowedProductWithMinPrice(allowedProducts);\r\n                        optionFinalPrice = parseFloat(optionPrices[allowedProductMinPrice].finalPrice.amount);\r\n                        optionPriceDiff = optionFinalPrice - finalPrice;\r\n                        options[i].label = options[i].initialLabel;\r\n\r\n                        if (optionPriceDiff !== 0) {\r\n                            options[i].label += ' ' + priceUtils.formatPriceLocale(\r\n                                optionPriceDiff,\r\n                                this.options.priceFormat,\r\n                                true\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    if (allowedProducts.length > 0 || _.include(allowedOptions, options[i].id)) {\r\n                        options[i].allowedProducts = allowedProducts;\r\n                        element.options[index] = new Option(this._getOptionLabel(options[i]), options[i].id);\r\n\r\n                        if (this.options.spConfig.canDisplayShowOutOfStockStatus) {\r\n                            filteredSalableProducts = $(this.options.spConfig.salable[attributeId][options[i].id]).\r\n                            filter(options[i].allowedProducts);\r\n                            canDisplayOutOfStockProducts = filteredSalableProducts.length === 0;\r\n                        }\r\n\r\n                        if (typeof options[i].price !== 'undefined') {\r\n                            element.options[index].setAttribute('price', options[i].price);\r\n                        }\r\n\r\n                        if (allowedProducts.length === 0 || canDisplayOutOfStockProducts) {\r\n                            element.options[index].disabled = true;\r\n                        }\r\n\r\n                        element.options[index].config = options[i];\r\n                        index++;\r\n                    }\r\n\r\n                    /* eslint-enable max-depth */\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Generate the label associated with a configurable option. This includes the option's\r\n         * label or value and the option's price.\r\n         * @private\r\n         * @param {*} option - A single choice among a group of choices for a configurable option.\r\n         * @return {String} The option label with option value and price (e.g. Black +1.99)\r\n         */\r\n        _getOptionLabel: function (option) {\r\n            return option.label;\r\n        },\r\n\r\n        /**\r\n         * Removes an option's selections.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _clearSelect: function (element) {\r\n            var i;\r\n\r\n            for (i = element.options.length - 1; i >= 0; i--) {\r\n                element.remove(i);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Retrieve the attribute options associated with a specific attribute Id.\r\n         * @private\r\n         * @param {Number} attributeId - The id of the attribute whose configurable options are sought.\r\n         * @return {Object} Object containing the attribute options.\r\n         */\r\n        _getAttributeOptions: function (attributeId) {\r\n            if (this.options.spConfig.attributes[attributeId]) {\r\n                return this.options.spConfig.attributes[attributeId].options;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reload the price of the configurable product incorporating the prices of all of the\r\n         * configurable product's option selections.\r\n         */\r\n        _reloadPrice: function () {\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', this._getPrices());\r\n        },\r\n\r\n        /**\r\n         * Get product various prices\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _getPrices: function () {\r\n            var prices = {},\r\n                elements = _.toArray(this.options.settings),\r\n                allowedProduct;\r\n\r\n            _.each(elements, function (element) {\r\n                var selected = element.options[element.selectedIndex],\r\n                    config = selected && selected.config,\r\n                    priceValue = this._calculatePrice({});\r\n\r\n                if (config && config.allowedProducts.length === 1) {\r\n                    priceValue = this._calculatePrice(config);\r\n                } else if (element.value) {\r\n                    allowedProduct = this._getAllowedProductWithMinPrice(config.allowedProducts);\r\n                    priceValue = this._calculatePrice({\r\n                        'allowedProducts': [\r\n                            allowedProduct\r\n                        ]\r\n                    });\r\n                }\r\n\r\n                if (!_.isEmpty(priceValue)) {\r\n                    prices.prices = priceValue;\r\n                }\r\n            }, this);\r\n\r\n            return prices;\r\n        },\r\n\r\n        /**\r\n         * Get product with minimum price from selected options.\r\n         *\r\n         * @param {Array} allowedProducts\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\r\n            var optionPrices = this.options.spConfig.optionPrices,\r\n                product = {},\r\n                optionMinPrice, optionFinalPrice;\r\n\r\n            _.each(allowedProducts, function (allowedProduct) {\r\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\r\n\r\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\r\n                    optionMinPrice = optionFinalPrice;\r\n                    product = allowedProduct;\r\n                }\r\n            }, this);\r\n\r\n            return product;\r\n        },\r\n\r\n        /**\r\n         * Returns prices for configured products\r\n         *\r\n         * @param {*} config - Products configuration\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _calculatePrice: function (config) {\r\n            var displayPrices = $(this.options.priceHolderSelector).priceBox('option').prices,\r\n                newPrices = this.options.spConfig.optionPrices[_.first(config.allowedProducts)] || {};\r\n\r\n            _.each(displayPrices, function (price, code) {\r\n                displayPrices[code].amount = newPrices[code] ? newPrices[code].amount - displayPrices[code].amount : 0;\r\n            });\r\n\r\n            return displayPrices;\r\n        },\r\n\r\n        /**\r\n         * Returns Simple product Id\r\n         *  depending on current selected option.\r\n         *\r\n         * @private\r\n         * @param {HTMLElement} element\r\n         * @returns {String|undefined}\r\n         */\r\n        _getSimpleProductId: function (element) {\r\n            // TODO: Rewrite algorithm. It should return ID of\r\n            //        simple product based on selected options.\r\n            var allOptions = element.config.options,\r\n                value = element.value,\r\n                config;\r\n\r\n            config = _.filter(allOptions, function (option) {\r\n                return option.id === value;\r\n            });\r\n            config = _.first(config);\r\n\r\n            return _.isEmpty(config) ?\r\n                undefined :\r\n                _.first(config.allowedProducts);\r\n\r\n        },\r\n\r\n        /**\r\n         * Show or hide regular price block\r\n         *\r\n         * @param {*} optionId\r\n         * @private\r\n         */\r\n        _displayRegularPriceBlock: function (optionId) {\r\n            var shouldBeShown = true,\r\n                $priceBox = this.element.parents(this.options.selectorProduct)\r\n                    .find(this.options.selectorProductPrice);\r\n\r\n            _.each(this.options.settings, function (element) {\r\n                if (element.value === '') {\r\n                    shouldBeShown = false;\r\n                }\r\n            });\r\n\r\n            if (shouldBeShown &&\r\n                this.options.spConfig.optionPrices[optionId].oldPrice.amount !==\r\n                this.options.spConfig.optionPrices[optionId].finalPrice.amount\r\n            ) {\r\n                $(this.options.slyOldPriceSelector).show();\r\n            } else {\r\n                $(this.options.slyOldPriceSelector).hide();\r\n            }\r\n\r\n            $(document).trigger('updateMsrpPriceBlock',\r\n                [\r\n                    optionId,\r\n                    this.options.spConfig.optionPrices,\r\n                    $priceBox\r\n                ]\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Show or hide normal price label\r\n         *\r\n         * @private\r\n         */\r\n        _displayNormalPriceLabel: function () {\r\n            var shouldBeShown = false;\r\n\r\n            _.each(this.options.settings, function (element) {\r\n                if (element.value === '') {\r\n                    shouldBeShown = true;\r\n                }\r\n            });\r\n\r\n            if (shouldBeShown) {\r\n                $(this.options.normalPriceLabelSelector).show();\r\n            } else {\r\n                $(this.options.normalPriceLabelSelector).hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         *\r\n         * @param {HTMLElement} element - DOM element associated with gallery.\r\n         */\r\n        _onGalleryLoaded: function (element) {\r\n            var galleryObject = element.data('gallery');\r\n\r\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\r\n        },\r\n\r\n        /**\r\n         * Show or hide tier price block\r\n         *\r\n         * @param {*} optionId\r\n         * @private\r\n         */\r\n        _displayTierPriceBlock: function (optionId) {\r\n            var tierPrices = typeof optionId != 'undefined' && this.options.spConfig.optionPrices[optionId].tierPrices;\r\n\r\n            if (_.isArray(tierPrices) && tierPrices.length > 0) {\r\n\r\n                if (this.options.tierPriceTemplate) {\r\n                    $(this.options.tierPriceBlockSelector).html(\r\n                        mageTemplate(this.options.tierPriceTemplate, {\r\n                            'tierPrices': tierPrices,\r\n                            '$t': $t,\r\n                            'currencyFormat': this.options.spConfig.currencyFormat,\r\n                            'priceUtils': priceUtils\r\n                        })\r\n                    ).show();\r\n                }\r\n            } else {\r\n                $(this.options.tierPriceBlockSelector).hide();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.configurable;\r\n});\r\n","Magento_ConfigurableProduct/js/options-updater.js":"define([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data',\r\n    'domReady!'\r\n], function ($, _, customerData) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n        formSelector: '#product_addtocart_form',\r\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\r\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\r\n    },\r\n    cartData = customerData.get('cart'),\r\n    productId = $(selectors.productIdSelector).val(),\r\n    itemId = $(selectors.itemIdSelector).val(),\r\n\r\n    /**\r\n    * set productOptions according to cart data from customer-data\r\n    *\r\n    * @param {Object} data - cart data from customer-data\r\n    * @returns {Boolean} - whether the new options differ from previous\r\n    */\r\n    setProductOptions = function (data) {\r\n        var changedProductOptions;\r\n\r\n        if (!(data && data.items && data.items.length && productId)) {\r\n            return false;\r\n        }\r\n        changedProductOptions = _.find(data.items, function (item) {\r\n            if (item['item_id'] === itemId) {\r\n                return item['product_id'] === productId;\r\n            }\r\n        });\r\n        changedProductOptions = changedProductOptions && changedProductOptions.options &&\r\n            changedProductOptions.options.reduce(function (obj, val) {\r\n                obj[val['option_id']] = val['option_value'];\r\n\r\n                return obj;\r\n            }, {});\r\n\r\n        if (JSON.stringify(this.productOptions || {}) === JSON.stringify(changedProductOptions || {})) {\r\n            return false;\r\n        }\r\n\r\n        this.productOptions = changedProductOptions;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n    * Listens to update of cart data or options initialization and update selected option according to customer data\r\n    *\r\n    */\r\n    listen = function () {\r\n        cartData.subscribe(function (updateCartData) {\r\n            if (this.setProductOptions(updateCartData)) {\r\n                this.updateOptions();\r\n            }\r\n        }.bind(this));\r\n        $(selectors.formSelector).on(this.eventName, function () {\r\n            this.setProductOptions(cartData());\r\n            this.updateOptions();\r\n        }.bind(this));\r\n    },\r\n\r\n    /**\r\n    * Updater constructor function\r\n    *\r\n    */\r\n    Updater = function (eventName, updateOptionsCallback) {\r\n        if (this instanceof Updater) {\r\n            this.eventName = eventName;\r\n            this.updateOptions = updateOptionsCallback;\r\n            this.productOptions = {};\r\n        }\r\n    };\r\n\r\n    Updater.prototype.setProductOptions = setProductOptions;\r\n    Updater.prototype.listen = listen;\r\n\r\n    return Updater;\r\n});\r\n","Magento_ConfigurableProduct/js/product/view/product-info-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function (_, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns info about configurable products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var optionValues = [],\r\n            product = _.findWhere($form.serializeArray(), {\r\n                name: 'product'\r\n            }),\r\n            productId;\r\n\r\n        if (!_.isUndefined(product)) {\r\n            productId = product.value;\r\n            _.each($form.serializeArray(), function (item) {\r\n                if (item.name.indexOf('super_attribute') !== -1) {\r\n                    optionValues.push(item.value);\r\n                }\r\n            });\r\n            optionValues.sort();\r\n            productInfo().push(\r\n                {\r\n                    'id': productId,\r\n                    'optionValues': optionValues\r\n                }\r\n            );\r\n        }\r\n\r\n        return _.uniq(productInfo(), function (item) {\r\n            var optionValuesStr = item.optionValues ? item.optionValues.join() : '';\r\n\r\n            return item.id + optionValuesStr;\r\n        });\r\n    };\r\n});\r\n\r\n","Magento_Cookie/js/notices.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.cookieNotices', {\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            if ($.mage.cookies.get(this.options.cookieName)) {\r\n                this.element.hide();\r\n            } else {\r\n                this.element.show();\r\n            }\r\n            $(this.options.cookieAllowButtonSelector).on('click', $.proxy(function () {\r\n                var cookieExpires = new Date(new Date().getTime() + this.options.cookieLifetime * 1000);\r\n\r\n                $.mage.cookies.set(this.options.cookieName, JSON.stringify(this.options.cookieValue), {\r\n                    expires: cookieExpires\r\n                });\r\n\r\n                if ($.mage.cookies.get(this.options.cookieName)) {\r\n                    this.element.hide();\r\n                    $(document).trigger('user:allowed:save:cookie');\r\n                } else {\r\n                    window.location.href = this.options.noCookiesUrl;\r\n                }\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.cookieNotices;\r\n});\r\n","Magento_Cookie/js/require-cookie.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/mage',\r\n    'mage/translate'\r\n], function ($, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.requireCookie', {\r\n        options: {\r\n            event: 'click',\r\n            noCookieUrl: 'enable-cookies',\r\n            triggers: ['.action.login', '.action.submit'],\r\n            isRedirectCmsPage: true\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * This method binds elements found in this widget.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {};\r\n\r\n            $.each(this.options.triggers, function (index, value) {\r\n                events['click ' + value] = '_checkCookie';\r\n            });\r\n            this._on(events);\r\n        },\r\n\r\n        /**\r\n         * This method set the url for the redirect.\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _checkCookie: function (event) {\r\n            if (navigator.cookieEnabled) {\r\n                return;\r\n            }\r\n\r\n            event.preventDefault();\r\n\r\n            if (this.options.isRedirectCmsPage) {\r\n                window.location = this.options.noCookieUrl;\r\n            } else {\r\n                alert({\r\n                    content: $.mage.__('Cookies are disabled in your browser.')\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.requireCookie;\r\n});\r\n","Magento_Customer/js/address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    $.widget('mage.address', {\r\n        /**\r\n         * Options common to all instances of this widget.\r\n         * @type {Object}\r\n         */\r\n        options: {\r\n            deleteConfirmMessage: $.mage.__('Are you sure you want to delete this address?')\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers for adding and deleting addresses.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var options         = this.options,\r\n                addAddress      = options.addAddress,\r\n                deleteAddress   = options.deleteAddress;\r\n\r\n            if (addAddress) {\r\n                $(document).on('click', addAddress, this._addAddress.bind(this));\r\n            }\r\n\r\n            if (deleteAddress) {\r\n                $(document).on('click', deleteAddress, this._deleteAddress.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add a new address.\r\n         * @private\r\n         */\r\n        _addAddress: function () {\r\n            window.location = this.options.addAddressLocation;\r\n        },\r\n\r\n        /**\r\n         * Delete the address whose id is specified in a data attribute after confirmation from the user.\r\n         * @private\r\n         * @param {jQuery.Event} e\r\n         * @return {Boolean}\r\n         */\r\n        _deleteAddress: function (e) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.options.deleteConfirmMessage,\r\n                actions: {\r\n\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        if (typeof $(e.target).parent().data('address') !== 'undefined') {\r\n                            window.location = self.options.deleteUrlPrefix + $(e.target).parent().data('address') +\r\n                                '/form_key/' + $.mage.cookies.get('form_key');\r\n                        } else {\r\n                            window.location = self.options.deleteUrlPrefix + $(e.target).data('address') +\r\n                                '/form_key/' + $.mage.cookies.get('form_key');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\n    return $.mage.address;\r\n});\r\n","Magento_Customer/js/addressValidation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/postcode-validator',\r\n    'jquery-ui-modules/widget',\r\n    'validation'\r\n], function ($, __, utils, $t, postCodeValidator) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addressValidation', {\r\n        options: {\r\n            selectors: {\r\n                button: '[data-action=save-address]',\r\n                zip: '#zip',\r\n                country: 'select[name=\"country_id\"]:visible'\r\n            }\r\n        },\r\n\r\n        zipInput: null,\r\n        countrySelect: null,\r\n\r\n        /**\r\n         * Validation creation\r\n         *\r\n         * @protected\r\n         */\r\n        _create: function () {\r\n            var button = $(this.options.selectors.button, this.element);\r\n\r\n            this.zipInput = $(this.options.selectors.zip, this.element);\r\n            this.countrySelect = $(this.options.selectors.country, this.element);\r\n\r\n            this.element.validation({\r\n\r\n                /**\r\n                 * Submit Handler\r\n                 * @param {Element} form - address form\r\n                 */\r\n                submitHandler: function (form) {\r\n\r\n                    button.attr('disabled', true);\r\n                    form.submit();\r\n                }\r\n            });\r\n\r\n            this._addPostCodeValidation();\r\n        },\r\n\r\n        /**\r\n         * Add postcode validation\r\n         *\r\n         * @protected\r\n         */\r\n        _addPostCodeValidation: function () {\r\n            var self = this;\r\n\r\n            this.zipInput.on('keyup', __.debounce(function (event) {\r\n                    var valid = self._validatePostCode(event.target.value);\r\n\r\n                    self._renderValidationResult(valid);\r\n                }, 500)\r\n            );\r\n\r\n            this.countrySelect.on('change', function () {\r\n                var valid = self._validatePostCode(self.zipInput.val());\r\n\r\n                self._renderValidationResult(valid);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate post code value.\r\n         *\r\n         * @protected\r\n         * @param {String} postCode - post code\r\n         * @return {Boolean} Whether is post code valid\r\n         */\r\n        _validatePostCode: function (postCode) {\r\n            var countryId = this.countrySelect.val();\r\n\r\n            if (postCode === null) {\r\n                return true;\r\n            }\r\n\r\n            return postCodeValidator.validate(postCode, countryId, this.options.postCodes);\r\n        },\r\n\r\n        /**\r\n         * Renders warning messages for invalid post code.\r\n         *\r\n         * @protected\r\n         * @param {Boolean} valid\r\n         */\r\n        _renderValidationResult: function (valid) {\r\n            var warnMessage,\r\n                alertDiv = this.zipInput.next();\r\n\r\n            if (!valid) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postCodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postCodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n            }\r\n\r\n            alertDiv.children(':first').text(warnMessage);\r\n\r\n            if (valid) {\r\n                alertDiv.hide();\r\n            } else {\r\n                alertDiv.show();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.addressValidation;\r\n});\r\n","Magento_Customer/js/block-submit-on-send.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var dataForm = $('#' + config.formId);\r\n\r\n        dataForm.on('submit', function () {\r\n            $(this).find(':submit').attr('disabled', 'disabled');\r\n\r\n            if (this.isValid === false) {\r\n                $(this).find(':submit').prop('disabled', false);\r\n            }\r\n            this.isValid = true;\r\n        });\r\n        dataForm.on('invalid-form.validate', function () {\r\n            $(this).find(':submit').prop('disabled', false);\r\n            this.isValid = false;\r\n        });\r\n    };\r\n});\r\n","Magento_Customer/js/change-email-password.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.changeEmailPassword', {\r\n        options: {\r\n            changeEmailSelector: '[data-role=change-email]',\r\n            changePasswordSelector: '[data-role=change-password]',\r\n            mainContainerSelector: '[data-container=change-email-password]',\r\n            titleSelector: '[data-title=change-email-password]',\r\n            emailContainerSelector: '[data-container=change-email]',\r\n            newPasswordContainerSelector: '[data-container=new-password]',\r\n            confirmPasswordContainerSelector: '[data-container=confirm-password]',\r\n            currentPasswordSelector: '[data-input=current-password]',\r\n            emailSelector: '[data-input=change-email]',\r\n            newPasswordSelector: '[data-input=new-password]',\r\n            confirmPasswordSelector: '[data-input=confirm-password]'\r\n        },\r\n\r\n        /**\r\n         * Create widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(function () {\r\n                this._checkChoice();\r\n            }, this));\r\n\r\n            this._checkChoice();\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Event binding, will monitor change, keyup and paste events.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._on($(this.options.emailSelector), {\r\n                'change': this._updatePasswordFieldWithEmailValue,\r\n                'keyup': this._updatePasswordFieldWithEmailValue,\r\n                'paste': this._updatePasswordFieldWithEmailValue\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check choice\r\n         * @private\r\n         */\r\n        _checkChoice: function () {\r\n            if ($(this.options.changeEmailSelector).is(':checked') &&\r\n                $(this.options.changePasswordSelector).is(':checked')) {\r\n                this._showAll();\r\n            } else if ($(this.options.changeEmailSelector).is(':checked')) {\r\n                this._showEmail();\r\n            } else if ($(this.options.changePasswordSelector).is(':checked')) {\r\n                this._showPassword();\r\n            } else {\r\n                this._hideAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show email and password input fields\r\n         * @private\r\n         */\r\n        _showAll: function () {\r\n            $(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);\r\n\r\n            $(this.options.mainContainerSelector).show();\r\n            $(this.options.emailContainerSelector).show();\r\n            $(this.options.newPasswordContainerSelector).show();\r\n            $(this.options.confirmPasswordContainerSelector).show();\r\n\r\n            $(this.options.currentPasswordSelector).attr('data-validate', '{required:true}').prop('disabled', false);\r\n            $(this.options.emailSelector).attr('data-validate', '{required:true}').prop('disabled', false);\r\n            this._updatePasswordFieldWithEmailValue();\r\n            $(this.options.confirmPasswordSelector).attr(\r\n                'data-validate',\r\n                '{required:true, equalTo:\"' + this.options.newPasswordSelector + '\"}'\r\n            ).prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Hide email and password input fields\r\n         * @private\r\n         */\r\n        _hideAll: function () {\r\n            $(this.options.mainContainerSelector).hide();\r\n            $(this.options.emailContainerSelector).hide();\r\n            $(this.options.newPasswordContainerSelector).hide();\r\n            $(this.options.confirmPasswordContainerSelector).hide();\r\n\r\n            $(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Show email input fields\r\n         * @private\r\n         */\r\n        _showEmail: function () {\r\n            this._showAll();\r\n            $(this.options.titleSelector).html(this.options.titleChangeEmail);\r\n\r\n            $(this.options.newPasswordContainerSelector).hide();\r\n            $(this.options.confirmPasswordContainerSelector).hide();\r\n\r\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Show password input fields\r\n         * @private\r\n         */\r\n        _showPassword: function () {\r\n            this._showAll();\r\n            $(this.options.titleSelector).html(this.options.titleChangePassword);\r\n\r\n            $(this.options.emailContainerSelector).hide();\r\n\r\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Update password validation rules with email input field value\r\n         * @private\r\n         */\r\n        _updatePasswordFieldWithEmailValue: function () {\r\n            $(this.options.newPasswordSelector).attr(\r\n                'data-validate',\r\n                '{required:true, ' +\r\n                '\\'validate-customer-password\\':true, ' +\r\n                '\\'password-not-equal-to-user-name\\':\\'' + $(this.options.emailSelector).val() + '\\'}'\r\n            ).prop('disabled', false);\r\n        }\r\n    });\r\n\r\n    return $.mage.changeEmailPassword;\r\n});\r\n","Magento_Customer/js/checkout-balance.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.checkoutBalance', {\r\n        /**\r\n         * Initialize store credit events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.eventData = {\r\n                price: this.options.balance,\r\n                totalPrice: 0\r\n            };\r\n            this.element.on('change', $.proxy(function (e) {\r\n                if ($(e.target).is(':checked')) {\r\n                    this.eventData.price = -1 * this.options.balance;\r\n                } else {\r\n                    if (this.options.amountSubstracted) { //eslint-disable-line no-lonely-if\r\n                        this.eventData.price = parseFloat(this.options.usedAmount);\r\n                        this.options.amountSubstracted = false;\r\n                    } else {\r\n                        this.eventData.price = parseFloat(this.options.balance);\r\n                    }\r\n                }\r\n                this.element.trigger('updateCheckoutPrice', this.eventData);\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.checkoutBalance;\r\n});\r\n","Magento_Customer/js/customer-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'Magento_Customer/js/section-config',\r\n    'mage/url',\r\n    'mage/storage',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, sectionConfig, url) {\r\n    'use strict';\r\n\r\n    var options = {},\r\n        storage,\r\n        storageInvalidation,\r\n        invalidateCacheBySessionTimeOut,\r\n        invalidateCacheByCloseCookieSession,\r\n        dataProvider,\r\n        buffer,\r\n        customerData,\r\n        deferred = $.Deferred();\r\n\r\n    url.setBaseUrl(window.BASE_URL);\r\n    options.sectionLoadUrl = url.build('customer/section/load');\r\n\r\n    /**\r\n     * @param {Object} invalidateOptions\r\n     */\r\n    invalidateCacheBySessionTimeOut = function (invalidateOptions) {\r\n        var date;\r\n\r\n        if (new Date($.localStorage.get('mage-cache-timeout')) < new Date()) {\r\n            storage.removeAll();\r\n        }\r\n        date = new Date(Date.now() + parseInt(invalidateOptions.cookieLifeTime, 10) * 1000);\r\n        $.localStorage.set('mage-cache-timeout', date);\r\n    };\r\n\r\n    /**\r\n     * Invalidate Cache By Close Cookie Session\r\n     */\r\n    invalidateCacheByCloseCookieSession = function () {\r\n        if (!$.cookieStorage.isSet('mage-cache-sessid')) {\r\n            storage.removeAll();\r\n        }\r\n\r\n        $.cookieStorage.set('mage-cache-sessid', true);\r\n    };\r\n\r\n    dataProvider = {\r\n\r\n        /**\r\n         * @param {Object} sectionNames\r\n         * @return {Object}\r\n         */\r\n        getFromStorage: function (sectionNames) {\r\n            var result = {};\r\n\r\n            _.each(sectionNames, function (sectionName) {\r\n                result[sectionName] = storage.get(sectionName);\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sectionNames\r\n         * @param {Boolean} forceNewSectionTimestamp\r\n         * @return {*}\r\n         */\r\n        getFromServer: function (sectionNames, forceNewSectionTimestamp) {\r\n            var parameters;\r\n\r\n            sectionNames = sectionConfig.filterClientSideSections(sectionNames);\r\n            parameters = _.isArray(sectionNames) && sectionNames.indexOf('*') < 0 ? {\r\n                sections: sectionNames.join(',')\r\n            } : [];\r\n            parameters['force_new_section_timestamp'] = forceNewSectionTimestamp;\r\n\r\n            return $.getJSON(options.sectionLoadUrl, parameters).fail(function (jqXHR) {\r\n                throw new Error(jqXHR);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {Function} target\r\n     * @param {String} sectionName\r\n     * @return {*}\r\n     */\r\n    ko.extenders.disposableCustomerData = function (target, sectionName) {\r\n        var sectionDataIds, newSectionDataIds = {};\r\n\r\n        target.subscribe(function () {\r\n            setTimeout(function () {\r\n                storage.remove(sectionName);\r\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n                _.each(sectionDataIds, function (data, name) {\r\n                    if (name !== sectionName) {\r\n                        newSectionDataIds[name] = data;\r\n                    }\r\n                });\r\n                $.cookieStorage.set('section_data_ids', newSectionDataIds);\r\n            }, 3000);\r\n        });\r\n\r\n        return target;\r\n    };\r\n\r\n    buffer = {\r\n        data: {},\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         */\r\n        bind: function (sectionName) {\r\n            this.data[sectionName] = ko.observable({});\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @return {Object}\r\n         */\r\n        get: function (sectionName) {\r\n            if (!this.data[sectionName]) {\r\n                this.bind(sectionName);\r\n            }\r\n\r\n            return this.data[sectionName];\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        keys: function () {\r\n            return _.keys(this.data);\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @param {Object} sectionData\r\n         */\r\n        notify: function (sectionName, sectionData) {\r\n            if (!this.data[sectionName]) {\r\n                this.bind(sectionName);\r\n            }\r\n            this.data[sectionName](sectionData);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sections\r\n         */\r\n        update: function (sections) {\r\n            var sectionId = 0,\r\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n\r\n            _.each(sections, function (sectionData, sectionName) {\r\n                sectionId = sectionData['data_id'];\r\n                sectionDataIds[sectionName] = sectionId;\r\n                storage.set(sectionName, sectionData);\r\n                storageInvalidation.remove(sectionName);\r\n                buffer.notify(sectionName, sectionData);\r\n            });\r\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sections\r\n         */\r\n        remove: function (sections) {\r\n            _.each(sections, function (sectionName) {\r\n                storage.remove(sectionName);\r\n\r\n                if (!sectionConfig.isClientSideSection(sectionName)) {\r\n                    storageInvalidation.set(sectionName, true);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    customerData = {\r\n\r\n        /**\r\n         * Customer data initialization\r\n         */\r\n        init: function () {\r\n            var expiredSectionNames = this.getExpiredSectionNames();\r\n\r\n            if (expiredSectionNames.length > 0) {\r\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\r\n                    buffer.notify(sectionName, sectionData);\r\n                });\r\n                this.reload(expiredSectionNames, false);\r\n            } else {\r\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\r\n                    buffer.notify(sectionName, sectionData);\r\n                });\r\n\r\n                if (!_.isEmpty(storageInvalidation.keys())) {\r\n                    this.reload(storageInvalidation.keys(), false);\r\n                }\r\n            }\r\n\r\n            if (!_.isEmpty($.cookieStorage.get('section_data_clean'))) {\r\n                this.reload(sectionConfig.getSectionNames(), true);\r\n                $.cookieStorage.set('section_data_clean', '');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Storage init\r\n         */\r\n        initStorage: function () {\r\n            $.cookieStorage.setConf({\r\n                path: '/',\r\n                expires: new Date(Date.now() + parseInt(options.cookieLifeTime, 10) * 1000)\r\n            });\r\n            storage = $.initNamespaceStorage('mage-cache-storage').localStorage;\r\n            storageInvalidation = $.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;\r\n        },\r\n\r\n        /**\r\n         * Retrieve the list of sections that has expired since last page reload.\r\n         *\r\n         * Sections can expire due to lifetime constraints or due to inconsistent storage information\r\n         * (validated by cookie data).\r\n         *\r\n         * @return {Array}\r\n         */\r\n        getExpiredSectionNames: function () {\r\n            var expiredSectionNames = [],\r\n                cookieSectionTimestamps = $.cookieStorage.get('section_data_ids') || {},\r\n                sectionLifetime = options.expirableSectionLifetime * 60,\r\n                currentTimestamp = Math.floor(Date.now() / 1000),\r\n                sectionData;\r\n\r\n            // process sections that can expire due to lifetime constraints\r\n            _.each(options.expirableSectionNames, function (sectionName) {\r\n                sectionData = storage.get(sectionName);\r\n\r\n                if (typeof sectionData === 'object' && sectionData['data_id'] + sectionLifetime <= currentTimestamp) {\r\n                    expiredSectionNames.push(sectionName);\r\n                }\r\n            });\r\n\r\n            // process sections that can expire due to storage information inconsistency\r\n            _.each(cookieSectionTimestamps, function (cookieSectionTimestamp, sectionName) {\r\n                sectionData = storage.get(sectionName);\r\n\r\n                if (typeof sectionData === 'undefined' ||\r\n                    typeof sectionData === 'object' &&\r\n                    cookieSectionTimestamp !== sectionData['data_id']\r\n                ) {\r\n                    expiredSectionNames.push(sectionName);\r\n                }\r\n            });\r\n\r\n            //remove expired section names of previously installed/enable modules\r\n            expiredSectionNames = _.intersection(expiredSectionNames, sectionConfig.getSectionNames());\r\n\r\n            return _.uniq(expiredSectionNames);\r\n        },\r\n\r\n        /**\r\n         * Check if some sections have to be reloaded.\r\n         *\r\n         * @deprecated Use getExpiredSectionNames instead.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        needReload: function () {\r\n            var expiredSectionNames = this.getExpiredSectionNames();\r\n\r\n            return expiredSectionNames.length > 0;\r\n        },\r\n\r\n        /**\r\n         * Retrieve the list of expired keys.\r\n         *\r\n         * @deprecated Use getExpiredSectionNames instead.\r\n         *\r\n         * @return {Array}\r\n         */\r\n        getExpiredKeys: function () {\r\n            return this.getExpiredSectionNames();\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @return {*}\r\n         */\r\n        get: function (sectionName) {\r\n            return buffer.get(sectionName);\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @param {Object} sectionData\r\n         */\r\n        set: function (sectionName, sectionData) {\r\n            var data = {};\r\n\r\n            data[sectionName] = sectionData;\r\n            buffer.update(data);\r\n        },\r\n\r\n        /**\r\n         * Avoid using this function directly 'cause of possible performance drawbacks.\r\n         * Each customer section reload brings new non-cached ajax request.\r\n         *\r\n         * @param {Array} sectionNames\r\n         * @param {Boolean} forceNewSectionTimestamp\r\n         * @return {*}\r\n         */\r\n        reload: function (sectionNames, forceNewSectionTimestamp) {\r\n            return dataProvider.getFromServer(sectionNames, forceNewSectionTimestamp).done(function (sections) {\r\n                $(document).trigger('customer-data-reload', [sectionNames]);\r\n                buffer.update(sections);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Array} sectionNames\r\n         */\r\n        invalidate: function (sectionNames) {\r\n            var sectionDataIds,\r\n                sectionsNamesForInvalidation;\r\n\r\n            sectionsNamesForInvalidation = _.contains(sectionNames, '*') ? sectionConfig.getSectionNames() :\r\n                sectionNames;\r\n\r\n            $(document).trigger('customer-data-invalidate', [sectionsNamesForInvalidation]);\r\n            buffer.remove(sectionsNamesForInvalidation);\r\n            sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n\r\n            // Invalidate section in cookie (increase version of section with 1000)\r\n            _.each(sectionsNamesForInvalidation, function (sectionName) {\r\n                if (!sectionConfig.isClientSideSection(sectionName)) {\r\n                    sectionDataIds[sectionName] += 1000;\r\n                }\r\n            });\r\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\r\n        },\r\n\r\n        /**\r\n         * Checks if customer data is initialized.\r\n         *\r\n         * @returns {jQuery.Deferred}\r\n         */\r\n        getInitCustomerData: function () {\r\n            return deferred.promise();\r\n        },\r\n\r\n        /**\r\n         * Reload sections on ajax complete\r\n         *\r\n         * @param {Object} jsonResponse\r\n         * @param {Object} settings\r\n         */\r\n        onAjaxComplete: function (jsonResponse, settings) {\r\n            var sections,\r\n                redirects;\r\n\r\n            if (settings.type.match(/post|put|delete/i)) {\r\n                sections = sectionConfig.getAffectedSections(settings.url);\r\n\r\n                if (sections && sections.length) {\r\n                    this.invalidate(sections);\r\n                    redirects = ['redirect', 'backUrl'];\r\n\r\n                    if (_.isObject(jsonResponse) && !_.isEmpty(_.pick(jsonResponse, redirects))) { //eslint-disable-line\r\n                        return;\r\n                    }\r\n                    this.reload(sections, true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} settings\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/customer-data': function (settings) {\r\n            options = settings;\r\n            customerData.initStorage();\r\n            invalidateCacheBySessionTimeOut(settings);\r\n            invalidateCacheByCloseCookieSession();\r\n            customerData.init();\r\n            deferred.resolve();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Events listener\r\n     */\r\n    $(document).on('ajaxComplete', function (event, xhr, settings) {\r\n        customerData.onAjaxComplete(xhr.responseJSON, settings);\r\n    });\r\n\r\n    /**\r\n     * Events listener\r\n     */\r\n    $(document).on('submit', function (event) {\r\n        var sections;\r\n\r\n        if (event.target.method.match(/post|put|delete/i)) {\r\n            sections = sectionConfig.getAffectedSections(event.target.action);\r\n\r\n            if (sections) {\r\n                customerData.invalidate(sections);\r\n            }\r\n        }\r\n    });\r\n\r\n    return customerData;\r\n});\r\n","Magento_Customer/js/customer-global-session-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, customerData) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var customer;\r\n\r\n        // When the session is available, this customer menu will be available\r\n        if ($('.customer-menu').length > 0) {\r\n            customer = customerData.get('customer');\r\n\r\n            customerData.getInitCustomerData().done(function () {\r\n                // Check if the customer data is set in local storage, if not reload data from server\r\n                if (!customer().firstname) {\r\n                    customerData.reload([], false);\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/invalidation-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, Element, customerData) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        /**\r\n         * Initialize object\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.process(customerData);\r\n        },\r\n\r\n        /**\r\n         * Process all rules in loop, each rule can invalidate some sections in customer data\r\n         *\r\n         * @param {Object} customerDataObject\r\n         */\r\n        process: function (customerDataObject) {\r\n            _.each(this.invalidationRules, function (rule, ruleName) {\r\n                _.each(rule, function (ruleArgs, rulePath) {\r\n                    require([rulePath], function (Rule) {\r\n                        var currentRule = new Rule(ruleArgs);\r\n\r\n                        if (!_.isFunction(currentRule.process)) {\r\n                            throw new Error('Rule ' + ruleName + ' should implement invalidationProcessor interface');\r\n                        }\r\n                        currentRule.process(customerDataObject);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/logout-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data) {\r\n        $($.mage.redirect(data.url, 'assign', 5000));\r\n    };\r\n});\r\n","Magento_Customer/js/password-strength-indicator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/zxcvbn',\r\n    'mage/translate',\r\n    'mage/validation'\r\n], function ($, zxcvbn, $t) {\r\n    'use strict';\r\n\r\n    $.widget('mage.passwordStrengthIndicator', {\r\n        options: {\r\n            cache: {},\r\n            passwordSelector: '[type=password]',\r\n            passwordStrengthMeterSelector: '[data-role=password-strength-meter]',\r\n            passwordStrengthMeterLabelSelector: '[data-role=password-strength-meter-label]',\r\n            formSelector: 'form',\r\n            emailSelector: 'input[type=\"email\"]'\r\n        },\r\n\r\n        /**\r\n         * Widget initialization\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.options.cache.input = $(this.options.passwordSelector, this.element);\r\n            this.options.cache.meter = $(this.options.passwordStrengthMeterSelector, this.element);\r\n            this.options.cache.label = $(this.options.passwordStrengthMeterLabelSelector, this.element);\r\n\r\n            // We need to look outside the module for backward compatibility, since someone can already use the module.\r\n            // @todo Narrow this selector in 2.3 so it doesn't accidentally finds the email field from the\r\n            // newsletter email field or any other \"email\" field.\r\n            this.options.cache.email = $(this.options.formSelector).find(this.options.emailSelector);\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Event binding, will monitor change, keyup and paste events.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._on(this.options.cache.input, {\r\n                'change': this._calculateStrength,\r\n                'keyup': this._calculateStrength,\r\n                'paste': this._calculateStrength\r\n            });\r\n\r\n            if (this.options.cache.email.length) {\r\n                this._on(this.options.cache.email, {\r\n                    'change': this._calculateStrength,\r\n                    'keyup': this._calculateStrength,\r\n                    'paste': this._calculateStrength\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Calculate password strength\r\n         * @private\r\n         */\r\n        _calculateStrength: function () {\r\n            var password = this._getPassword(),\r\n                isEmpty = password.length === 0,\r\n                zxcvbnScore,\r\n                displayScore,\r\n                isValid;\r\n\r\n            // Display score is based on combination of whether password is empty, valid, and zxcvbn strength\r\n            if (isEmpty) {\r\n                displayScore = 0;\r\n            } else {\r\n                this.options.cache.input.rules('add', {\r\n                    'password-not-equal-to-user-name': this.options.cache.email.val()\r\n                });\r\n\r\n                // We should only perform this check in case there is an email field on screen\r\n                if (this.options.cache.email.length &&\r\n                    password.toLowerCase() === this.options.cache.email.val().toLowerCase()) {\r\n                    displayScore = 1;\r\n                } else {\r\n                    isValid = $.validator.validateSingleElement(this.options.cache.input);\r\n                    zxcvbnScore = zxcvbn(password).score;\r\n                    displayScore = isValid && zxcvbnScore > 0 ? zxcvbnScore : 1;\r\n                }\r\n            }\r\n\r\n            // Update label\r\n            this._displayStrength(displayScore);\r\n        },\r\n\r\n        /**\r\n         * Display strength\r\n         * @param {Number} displayScore\r\n         * @private\r\n         */\r\n        _displayStrength: function (displayScore) {\r\n            var strengthLabel = '',\r\n                className;\r\n\r\n            switch (displayScore) {\r\n                case 0:\r\n                    strengthLabel = $t('No Password');\r\n                    className = 'password-none';\r\n                    break;\r\n\r\n                case 1:\r\n                    strengthLabel = $t('Weak');\r\n                    className = 'password-weak';\r\n                    break;\r\n\r\n                case 2:\r\n                    strengthLabel = $t('Medium');\r\n                    className = 'password-medium';\r\n                    break;\r\n\r\n                case 3:\r\n                    strengthLabel = $t('Strong');\r\n                    className = 'password-strong';\r\n                    break;\r\n\r\n                case 4:\r\n                    strengthLabel = $t('Very Strong');\r\n                    className = 'password-very-strong';\r\n                    break;\r\n            }\r\n\r\n            this.options.cache.meter\r\n                .removeClass()\r\n                .addClass(className);\r\n            this.options.cache.label.text(strengthLabel);\r\n        },\r\n\r\n        /**\r\n         * Get password value\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getPassword: function () {\r\n            return this.options.cache.input.val();\r\n        }\r\n    });\r\n\r\n    return $.mage.passwordStrengthIndicator;\r\n});\r\n","Magento_Customer/js/section-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    var baseUrls = [],\r\n        sections = [],\r\n        clientSideSections = [],\r\n        sectionNames = [],\r\n        canonize;\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @return {String}\r\n     */\r\n    canonize = function (url) {\r\n        var route = url;\r\n\r\n        _.some(baseUrls, function (baseUrl) {\r\n            route = url.replace(baseUrl, '');\r\n\r\n            return route !== url;\r\n        });\r\n\r\n        return route.replace(/^\\/?index.php\\/?/, '').toLowerCase();\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Returns a list of sections which should be invalidated for given URL.\r\n         * @param {String} url - URL which was requested.\r\n         * @return {Object} - List of sections to invalidate.\r\n         */\r\n        getAffectedSections: function (url) {\r\n            var route = canonize(url),\r\n                actions = _.find(sections, function (val, section) {\r\n                    var matched;\r\n\r\n                    // Covers the case where \"*\" works as a glob pattern.\r\n                    if (section.indexOf('*') >= 0) {\r\n                        section = section.replace(/\\*/g, '[^/]+') + '$';\r\n                        matched = route.match(section);\r\n\r\n                        return matched && matched[0] === route;\r\n                    }\r\n\r\n                    return route.indexOf(section) === 0;\r\n                });\r\n\r\n            return _.union(_.toArray(actions), sections['*']);\r\n        },\r\n\r\n        /**\r\n         * Filters the list of given sections to the ones defined as client side.\r\n         * @param {Object} allSections - List of sections to check.\r\n         * @return {Object} - List of filtered sections.\r\n         */\r\n        filterClientSideSections: function (allSections) {\r\n            return _.difference(allSections, clientSideSections);\r\n        },\r\n\r\n        /**\r\n         * Tells if section is defined as client side.\r\n         * @param {String} sectionName - Name of the section to check.\r\n         * @return {Boolean}\r\n         */\r\n        isClientSideSection: function (sectionName) {\r\n            return _.contains(clientSideSections, sectionName);\r\n        },\r\n\r\n        /**\r\n         * Returns array of section names.\r\n         * @returns {Array}\r\n         */\r\n        getSectionNames: function () {\r\n            return sectionNames;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} options\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/section-config': function (options) {\r\n            baseUrls = options.baseUrls;\r\n            sections = options.sections;\r\n            clientSideSections = options.clientSideSections;\r\n            sectionNames = options.sectionNames;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/show-password.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent'\r\n], function ($, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        passwordSelector: '',\r\n        passwordInputType: 'password',\r\n        textInputType: 'text',\r\n\r\n        defaults: {\r\n            template: 'Magento_Customer/show-password',\r\n            isPasswordVisible: false\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['isPasswordVisible']);\r\n\r\n            this.isPasswordVisible.subscribe(function (isChecked) {\r\n                this._showPassword(isChecked);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Show/Hide password\r\n         * @private\r\n         */\r\n        _showPassword: function (isChecked) {\r\n            $(this.passwordSelector).attr('type',\r\n                isChecked ? this.textInputType : this.passwordInputType\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/validation.js":"define([\r\n    'jquery',\r\n    'moment',\r\n    'mageUtils',\r\n    'jquery/validate',\r\n    'validation',\r\n    'mage/translate'\r\n], function ($, moment, utils) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'validate-date',\r\n        function (value, element, params) {\r\n            var dateFormat = utils.normalizeDate(params.dateFormat);\r\n\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return moment(value, dateFormat, true).isValid();\r\n        },\r\n        $.mage.__('Invalid date')\r\n    );\r\n\r\n    $.validator.addMethod(\r\n        'validate-dob',\r\n        function (value, element, params) {\r\n            var dateFormat = utils.convertToMomentFormat(params.dateFormat);\r\n\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return moment(value, dateFormat).isBefore(moment());\r\n        },\r\n        $.mage.__('The Date of Birth should not be greater than today.')\r\n    );\r\n});\r\n","Magento_Customer/js/action/check-email-availability.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/url-builder'\r\n], function (storage, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (deferred, email) {\r\n        return storage.post(\r\n            urlBuilder.createUrl('/customers/isEmailAvailable', {}),\r\n            JSON.stringify({\r\n                customerEmail: email\r\n            }),\r\n            false\r\n        ).done(function (isEmailAvailable) {\r\n            if (isEmailAvailable) {\r\n                deferred.resolve();\r\n            } else {\r\n                deferred.reject();\r\n            }\r\n        }).fail(function () {\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_Customer/js/action/login.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/storage',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/translate'\r\n], function ($, storage, globalMessageList, customerData, $t) {\r\n    'use strict';\r\n\r\n    var callbacks = [],\r\n\r\n        /**\r\n         * @param {Object} loginData\r\n         * @param {String} redirectUrl\r\n         * @param {*} isGlobal\r\n         * @param {Object} messageContainer\r\n         */\r\n        action = function (loginData, redirectUrl, isGlobal, messageContainer) {\r\n            messageContainer = messageContainer || globalMessageList;\r\n            let customerLoginUrl = 'customer/ajax/login';\r\n\r\n            if (loginData.customerLoginUrl) {\r\n                customerLoginUrl = loginData.customerLoginUrl;\r\n                delete loginData.customerLoginUrl;\r\n            }\r\n\r\n            return storage.post(\r\n                customerLoginUrl,\r\n                JSON.stringify(loginData),\r\n                isGlobal\r\n            ).done(function (response) {\r\n                if (response.errors) {\r\n                    messageContainer.addErrorMessage(response);\r\n                    callbacks.forEach(function (callback) {\r\n                        callback(loginData);\r\n                    });\r\n                } else {\r\n                    callbacks.forEach(function (callback) {\r\n                        callback(loginData);\r\n                    });\r\n                    customerData.invalidate(['customer']);\r\n\r\n                    if (response.redirectUrl) {\r\n                        window.location.href = response.redirectUrl;\r\n                    } else if (redirectUrl) {\r\n                        window.location.href = redirectUrl;\r\n                    } else {\r\n                        location.reload();\r\n                    }\r\n                }\r\n            }).fail(function () {\r\n                messageContainer.addErrorMessage({\r\n                    'message': $t('Could not authenticate. Please try again later')\r\n                });\r\n                callbacks.forEach(function (callback) {\r\n                    callback(loginData);\r\n                });\r\n            });\r\n        };\r\n\r\n    /**\r\n     * @param {Function} callback\r\n     */\r\n    action.registerLoginCallback = function (callback) {\r\n        callbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_Customer/js/invalidation-rules/website-rule.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n\r\n        defaults: {\r\n            scopeConfig: {}\r\n        },\r\n\r\n        /**\r\n         * Takes website id from current customer data and compare it with current website id\r\n         * If customer belongs to another scope, we need to invalidate current section\r\n         *\r\n         * @param {Object} customerData\r\n         */\r\n        process: function (customerData) {\r\n            var customer = customerData.get('customer');\r\n\r\n            if (this.scopeConfig && customer() &&\r\n                ~~customer().websiteId !== ~~this.scopeConfig.websiteId && ~~customer().websiteId !== 0) {\r\n                customerData.reload(['customer']);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/model/address-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    './customer-addresses'\r\n], function (ko, defaultProvider) {\r\n    'use strict';\r\n\r\n    return ko.observableArray(defaultProvider.getAddressItems());\r\n});\r\n","Magento_Customer/js/model/authentication-popup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal'\r\n], function ($, modal) {\r\n    'use strict';\r\n\r\n    return {\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Create popUp window for provided element\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        createPopUp: function (element) {\r\n            var options = {\r\n                'type': 'popup',\r\n                'modalClass': 'popup-authentication',\r\n                'focus': '[name=username]',\r\n                'responsive': true,\r\n                'innerScroll': true,\r\n                'trigger': '.proceed-to-checkout',\r\n                'buttons': []\r\n            };\r\n\r\n            this.modalWindow = element;\r\n            modal(options, $(this.modalWindow));\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            $(this.modalWindow).modal('openModal').trigger('contentUpdated');\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer-addresses.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    './customer/address'\r\n], function ($, ko, Address) {\r\n    'use strict';\r\n\r\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn);\r\n\r\n    return {\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getAddressItems: function () {\r\n            var items = [],\r\n                customerData = window.customerData;\r\n\r\n            if (isLoggedIn()) {\r\n                if (Object.keys(customerData).length) {\r\n                    $.each(customerData.addresses, function (key, item) {\r\n                        items.push(new Address(item));\r\n                    });\r\n                }\r\n            }\r\n\r\n            return items;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    './address-list'\r\n], function ($, ko, _, addressList) {\r\n    'use strict';\r\n\r\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn),\r\n        customerData = {};\r\n\r\n    if (isLoggedIn()) {\r\n        customerData = window.customerData;\r\n    } else {\r\n        customerData = {};\r\n    }\r\n\r\n    return {\r\n        customerData: customerData,\r\n        customerDetails: {},\r\n        isLoggedIn: isLoggedIn,\r\n\r\n        /**\r\n         * @param {Boolean} flag\r\n         */\r\n        setIsLoggedIn: function (flag) {\r\n            isLoggedIn(flag);\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getBillingAddressList: function () {\r\n            return addressList();\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getShippingAddressList: function () {\r\n            return addressList();\r\n        },\r\n\r\n        /**\r\n         * @param {String} fieldName\r\n         * @param {*} value\r\n         */\r\n        setDetails: function (fieldName, value) {\r\n            if (fieldName) {\r\n                this.customerDetails[fieldName] = value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {String} fieldName\r\n         * @return {*}\r\n         */\r\n        getDetails: function (fieldName) {\r\n            if (fieldName) {\r\n                if (this.customerDetails.hasOwnProperty(fieldName)) {\r\n                    return this.customerDetails[fieldName];\r\n                }\r\n\r\n                return undefined;\r\n            }\r\n\r\n            return this.customerDetails;\r\n        },\r\n\r\n        /**\r\n         * @param {Array} address\r\n         * @return {Number}\r\n         */\r\n        addCustomerAddress: function (address) {\r\n            var fields = [\r\n                    'customer_id', 'country_id', 'street', 'company', 'telephone', 'fax', 'postcode', 'city',\r\n                    'firstname', 'lastname', 'middlename', 'prefix', 'suffix', 'vat_id', 'default_billing',\r\n                    'default_shipping'\r\n                ],\r\n                customerAddress = {},\r\n                hasAddress = 0,\r\n                existingAddress;\r\n\r\n            if (!this.customerData.addresses) {\r\n                this.customerData.addresses = [];\r\n            }\r\n\r\n            customerAddress = _.pick(address, fields);\r\n\r\n            if (address.hasOwnProperty('region_id')) {\r\n                customerAddress.region = {\r\n                    'region_id': address['region_id'],\r\n                    region: address.region\r\n                };\r\n            }\r\n\r\n            for (existingAddress in this.customerData.addresses) {\r\n                if (this.customerData.addresses.hasOwnProperty(existingAddress)) {\r\n                    if (_.isEqual(this.customerData.addresses[existingAddress], customerAddress)) { //eslint-disable-line\r\n                        hasAddress = existingAddress;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (hasAddress === 0) {\r\n                return this.customerData.addresses.push(customerAddress) - 1;\r\n            }\r\n\r\n            return hasAddress;\r\n        },\r\n\r\n        /**\r\n         * @param {*} addressId\r\n         * @return {Boolean}\r\n         */\r\n        setAddressAsDefaultBilling: function (addressId) {\r\n            if (this.customerData.addresses[addressId]) {\r\n                this.customerData.addresses[addressId]['default_billing'] = 1;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {*} addressId\r\n         * @return {Boolean}\r\n         */\r\n        setAddressAsDefaultShipping: function (addressId) {\r\n            if (this.customerData.addresses[addressId]) {\r\n                this.customerData.addresses[addressId]['default_shipping'] = 1;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer/address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns new address object.\r\n     *\r\n     * @param {Object} addressData\r\n     * @return {Object}\r\n     */\r\n    return function (addressData) {\r\n        var regionId;\r\n\r\n        if (addressData.region['region_id'] && addressData.region['region_id'] !== '0') {\r\n            regionId = addressData.region['region_id'] + '';\r\n        }\r\n\r\n        return {\r\n            customerAddressId: addressData.id,\r\n            email: addressData.email,\r\n            countryId: addressData['country_id'],\r\n            regionId: regionId,\r\n            regionCode: addressData.region['region_code'],\r\n            region: addressData.region.region,\r\n            customerId: addressData['customer_id'],\r\n            street: addressData.street,\r\n            company: addressData.company,\r\n            telephone: addressData.telephone,\r\n            fax: addressData.fax,\r\n            postcode: addressData.postcode,\r\n            city: addressData.city,\r\n            firstname: addressData.firstname,\r\n            lastname: addressData.lastname,\r\n            middlename: addressData.middlename,\r\n            prefix: addressData.prefix,\r\n            suffix: addressData.suffix,\r\n            vatId: addressData['vat_id'],\r\n            sameAsBilling: addressData['same_as_billing'],\r\n            saveInAddressBook: addressData['save_in_address_book'],\r\n            customAttributes: _.toArray(addressData['custom_attributes']).reverse(),\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultShipping: function () {\r\n                return addressData['default_shipping'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultBilling: function () {\r\n                return addressData['default_billing'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            getAddressInline: function () {\r\n                return addressData.inline;\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getType: function () {\r\n                return 'customer-address';\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getKey: function () {\r\n                return this.getType() + this.customerAddressId;\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCacheKey: function () {\r\n                return this.getKey();\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            isEditable: function () {\r\n                return false;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            canUseForBilling: function () {\r\n                return true;\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Customer/js/view/authentication-popup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'mage/translate',\r\n    'mage/url',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/validation'\r\n], function ($, ko, Component, loginAction, customerData, authenticationPopup, $t, url, alert) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        registerUrl: window.authenticationPopup.customerRegisterUrl,\r\n        forgotPasswordUrl: window.authenticationPopup.customerForgotPasswordUrl,\r\n        autocomplete: window.authenticationPopup.autocomplete,\r\n        modalWindow: null,\r\n        isLoading: ko.observable(false),\r\n\r\n        defaults: {\r\n            template: 'Magento_Customer/authentication-popup'\r\n        },\r\n\r\n        /**\r\n         * Init\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n            url.setBaseUrl(window.authenticationPopup.baseUrl);\r\n            loginAction.registerLoginCallback(function () {\r\n                self.isLoading(false);\r\n            });\r\n        },\r\n\r\n        /** Init popup login window */\r\n        setModalElement: function (element) {\r\n            if (authenticationPopup.modalWindow == null) {\r\n                authenticationPopup.createPopUp(element);\r\n            }\r\n        },\r\n\r\n        /** Is login form enabled for current customer */\r\n        isActive: function () {\r\n            var customer = customerData.get('customer');\r\n\r\n            return customer() == false; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            if (this.modalWindow) {\r\n                $(this.modalWindow).modal('openModal');\r\n            } else {\r\n                alert({\r\n                    content: $t('Guest checkout is disabled.')\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Provide login action\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        login: function (formUiElement, event) {\r\n            var loginData = {},\r\n                formElement = $(event.currentTarget),\r\n                formDataArray = formElement.serializeArray();\r\n\r\n            event.stopPropagation();\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n            loginData['customerLoginUrl'] = window.authenticationPopup.customerLoginUrl;\r\n            if (formElement.validation() &&\r\n                formElement.validation('isValid')\r\n            ) {\r\n                this.isLoading(true);\r\n                loginAction(loginData);\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/view/customer.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.customer = customerData.get('customer');\r\n        }\r\n    });\r\n});\r\n","Magento_Dhl/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'city': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Dhl/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    'Magento_Dhl/js/model/shipping-rates-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Dhl/js/view/shipping-rates-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    'Magento_Dhl/js/model/shipping-rates-validator',\r\n    'Magento_Dhl/js/model/shipping-rates-validation-rules'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    dhlShippingRatesValidator,\r\n    dhlShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('dhl', dhlShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('dhl', dhlShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_Directory/js/region-updater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function ($, mageTemplate, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.directoryRegionUpdater', {\r\n        options: {\r\n            regionTemplate:\r\n                '<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>' +\r\n                '<%- data.title %>' +\r\n                '</option>',\r\n            isRegionRequired: true,\r\n            isZipRequired: true,\r\n            isCountryRequired: true,\r\n            currentRegion: null,\r\n            isMultipleCountriesAllowed: true\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initCountryElement();\r\n\r\n            this.currentRegionOption = this.options.currentRegion;\r\n            this.regionTmpl = mageTemplate(this.options.regionTemplate);\r\n\r\n            this._updateRegion(this.element.find('option:selected').val());\r\n\r\n            $(this.options.regionListId).on('change', $.proxy(function (e) {\r\n                this.setOption = false;\r\n                this.currentRegionOption = $(e.target).val();\r\n            }, this));\r\n\r\n            $(this.options.regionInputId).on('focusout', $.proxy(function () {\r\n                this.setOption = true;\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initCountryElement: function () {\r\n\r\n            if (this.options.isMultipleCountriesAllowed) {\r\n                this.element.parents('div.field').show();\r\n                this.element.on('change', $.proxy(function (e) {\r\n                    // clear region inputs on country change\r\n                    $(this.options.regionListId).val('');\r\n                    $(this.options.regionInputId).val('');\r\n                    this._updateRegion($(e.target).val());\r\n                }, this));\r\n\r\n                if (this.options.isCountryRequired) {\r\n                    this.element.addClass('required-entry');\r\n                    this.element.parents('div.field').addClass('required');\r\n                }\r\n            } else {\r\n                this.element.parents('div.field').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove options from dropdown list\r\n         *\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @private\r\n         */\r\n        _removeSelectOptions: function (selectElement) {\r\n            selectElement.find('option').each(function (index) {\r\n                if (index) {\r\n                    $(this).remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render dropdown list\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @param {String} key - region code\r\n         * @param {Object} value - region object\r\n         * @private\r\n         */\r\n        _renderSelectOption: function (selectElement, key, value) {\r\n            selectElement.append($.proxy(function () {\r\n                var name = value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&'),\r\n                    tmplData,\r\n                    tmpl;\r\n\r\n                if (value.code && $(name).is('span')) {\r\n                    key = value.code;\r\n                    value.name = $(name).text();\r\n                }\r\n\r\n                tmplData = {\r\n                    value: key,\r\n                    title: value.name,\r\n                    isSelected: false\r\n                };\r\n\r\n                if (this.options.defaultRegion === key) {\r\n                    tmplData.isSelected = true;\r\n                }\r\n\r\n                tmpl = this.regionTmpl({\r\n                    data: tmplData\r\n                });\r\n\r\n                return $(tmpl);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Takes clearError callback function as first option\r\n         * If no form is passed as option, look up the closest form and call clearError method.\r\n         * @private\r\n         */\r\n        _clearError: function () {\r\n            var args = ['clearError', this.options.regionListId, this.options.regionInputId, this.options.postcodeId];\r\n\r\n            if (this.options.clearError && typeof this.options.clearError === 'function') {\r\n                this.options.clearError.call(this);\r\n            } else {\r\n                if (!this.options.form) {\r\n                    this.options.form = this.element.closest('form').length ? $(this.element.closest('form')[0]) : null;\r\n                }\r\n\r\n                this.options.form = $(this.options.form);\r\n\r\n                this.options.form && this.options.form.data('validator') &&\r\n                this.options.form.validation.apply(this.options.form, _.compact(args));\r\n\r\n                // Clean up errors on region & zip fix\r\n                $(this.options.regionInputId).removeClass('mage-error').parent().find('[generated]').remove();\r\n                $(this.options.regionListId).removeClass('mage-error').parent().find('[generated]').remove();\r\n                $(this.options.postcodeId).removeClass('mage-error').parent().find('[generated]').remove();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update dropdown list based on the country selected\r\n         *\r\n         * @param {String} country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _updateRegion: function (country) {\r\n            // Clear validation error messages\r\n            var regionList = $(this.options.regionListId),\r\n                regionInput = $(this.options.regionInputId),\r\n                postcode = $(this.options.postcodeId),\r\n                label = regionList.parent().siblings('label'),\r\n                container = regionList.parents('div.field'),\r\n                regionsEntries,\r\n                regionId,\r\n                regionData;\r\n\r\n            this._clearError();\r\n            this._checkRegionRequired(country);\r\n\r\n            // Populate state/province dropdown list if available or use input box\r\n            if (this.options.regionJson[country]) {\r\n                this._removeSelectOptions(regionList);\r\n                regionsEntries = _.pairs(this.options.regionJson[country]);\r\n                $.each(regionsEntries, $.proxy(function (key, value) {\r\n                    regionData = value[1];\r\n                    regionId = regionData.id;\r\n                    this._renderSelectOption(regionList, regionId.toString(), regionData);\r\n                }, this));\r\n\r\n                if (this.currentRegionOption) {\r\n                    regionList.val(this.currentRegionOption);\r\n                }\r\n\r\n                if (this.setOption) {\r\n                    regionList.find('option').filter(function () {\r\n                        return this.text === regionInput.val();\r\n                    }).attr('selected', true);\r\n                }\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionList.addClass('required-entry').removeAttr('disabled');\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    regionList.removeClass('required-entry validate-select').removeAttr('data-validate');\r\n                    container.removeClass('required');\r\n\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionList.hide();\r\n                        container.hide();\r\n                    } else {\r\n                        regionList.removeAttr('disabled').show();\r\n                    }\r\n                }\r\n\r\n                regionList.show();\r\n                regionInput.hide();\r\n                label.attr('for', regionList.attr('id'));\r\n            } else {\r\n                this._removeSelectOptions(regionList);\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionInput.addClass('required-entry').removeAttr('disabled');\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionInput.attr('disabled', 'disabled');\r\n                        container.hide();\r\n                    }\r\n                    container.removeClass('required');\r\n                    regionInput.removeClass('required-entry');\r\n                }\r\n\r\n                regionList.removeClass('required-entry').prop('disabled', 'disabled').hide();\r\n                regionInput.show();\r\n                label.attr('for', regionInput.attr('id'));\r\n            }\r\n\r\n            // If country is in optionalzip list, make postcode input not required\r\n            if (this.options.isZipRequired) {\r\n                $.inArray(country, this.options.countriesWithOptionalZip) >= 0 ?\r\n                    postcode.removeClass('required-entry').closest('.field').removeClass('required') :\r\n                    postcode.addClass('required-entry').closest('.field').addClass('required');\r\n            }\r\n\r\n            // Add defaultvalue attribute to state/province select element\r\n            regionList.attr('defaultvalue', this.options.defaultRegion);\r\n            this.options.form.find('[type=\"submit\"]').removeAttr('disabled').show();\r\n        },\r\n\r\n        /**\r\n         * Check if the selected country has a mandatory region selection\r\n         *\r\n         * @param {String} country - Code of the country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _checkRegionRequired: function (country) {\r\n            var self = this;\r\n\r\n            this.options.isRegionRequired = false;\r\n            $.each(this.options.regionJson.config['regions_required'], function (index, elem) {\r\n                if (elem === country) {\r\n                    self.options.isRegionRequired = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.directoryRegionUpdater;\r\n});\r\n","Magento_Downloadable/js/downloadable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Catalog/js/price-box'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Downloadable widget\r\n     */\r\n    $.widget('mage.downloadable', {\r\n        options: {\r\n            priceHolderSelector: '.price-box',\r\n            linkElement: '',\r\n            allElements: ''\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        _init: function initLinks() {\r\n            var element = this.element,\r\n                options = $(this.options.linkElement, element);\r\n\r\n            options.trigger('change');\r\n        },\r\n\r\n        /**\r\n         *  @inheritdoc\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            this.element.find(this.options.linkElement).on('change', $.proxy(function () {\r\n                this._reloadPrice();\r\n            }, this));\r\n\r\n            this.element.find(this.options.allElements).on('change', function () {\r\n                if (this.checked) {\r\n                    $('label[for=\"' + this.id + '\"] > span').text($(this).attr('data-checked'));\r\n                    self.element.find(self.options.linkElement + ':not(:checked)').each(function () {\r\n                        $(this).trigger('click');\r\n                    });\r\n                } else {\r\n                    $('[for=\"' + this.id + '\"] > span').text($(this).attr('data-notchecked'));\r\n                    self.element.find(self.options.linkElement + ':checked').each(function () {\r\n                        $(this).trigger('click');\r\n                    });\r\n                }\r\n            });\r\n\r\n            this._reloadPrice();\r\n        },\r\n\r\n        /**\r\n         * Reload product price with selected link price included\r\n         * @private\r\n         */\r\n        _reloadPrice: function () {\r\n            var finalPrice = 0,\r\n                basePrice = 0;\r\n\r\n            this.element.find(this.options.linkElement + ':checked').each($.proxy(function (index, element) {\r\n                finalPrice += this.options.config.links[$(element).val()].finalPrice;\r\n                basePrice += this.options.config.links[$(element).val()].basePrice;\r\n            }, this));\r\n\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', {\r\n                'prices': {\r\n                    'finalPrice': {\r\n                        'amount': finalPrice\r\n                    },\r\n                    'basePrice': {\r\n                        'amount': basePrice\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.reloadAllCheckText();\r\n        },\r\n\r\n        /**\r\n         * Reload all-elements-checkbox's label\r\n         * @private\r\n         */\r\n        reloadAllCheckText: function () {\r\n            var allChecked = true,\r\n                allElementsCheck = $(this.options.allElements),\r\n                allElementsLabel = $('label[for=\"' + allElementsCheck.attr('id') + '\"] > span');\r\n\r\n            $(this.options.linkElement).each(function () {\r\n                if (!this.checked) {\r\n                    allChecked = false;\r\n                }\r\n            });\r\n\r\n            if (allChecked) {\r\n                allElementsLabel.text(allElementsCheck.attr('data-checked'));\r\n                allElementsCheck.prop('checked', true);\r\n            } else {\r\n                allElementsLabel.text(allElementsCheck.attr('data-notchecked'));\r\n                allElementsCheck.prop('checked', false);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.downloadable;\r\n});\r\n","Magento_Fedex/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'city': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Fedex/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    'Magento_Fedex/js/model/shipping-rates-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Fedex/js/view/shipping-rates-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    'Magento_Fedex/js/model/shipping-rates-validator',\r\n    'Magento_Fedex/js/model/shipping-rates-validation-rules'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    fedexShippingRatesValidator,\r\n    fedexShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('fedex', fedexShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('fedex', fedexShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_GiftMessage/js/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.giftOptions', {\r\n        options: {\r\n            mageError: 'mage-error',\r\n            noDisplay: 'no-display',\r\n            requiredEntry: 'required-entry'\r\n        },\r\n\r\n        /**\r\n         * Initial toggle of the various gift options after widget instantiation.\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            this._toggleVisibility();\r\n        },\r\n\r\n        /**\r\n         * Bind a click handler to the widget's context element.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', $.proxy(this._toggleVisibility, this));\r\n            $(this.element.data('selector').id).find('.giftmessage-area')\r\n                .on('change', $.proxy(this._toggleRequired, this));\r\n        },\r\n\r\n        /**\r\n         * Toggle the visibility of the widget's context element's selector(s).\r\n         * @private\r\n         * @param {jQuery.Event} event - Click event. Target is a checkbox.\r\n         */\r\n        _toggleVisibility: function (event) {\r\n            var checkbox = event ? $(event.target) : this.element,\r\n                container = $(checkbox.data('selector').id),\r\n                _this;\r\n\r\n            if (checkbox.is(':checked')) {\r\n                container.show()\r\n                    .find('.giftmessage-area:not(:visible)').each(function (x, element) {\r\n                        if ($(element).val().length > 0) {\r\n                            $(element).trigger('change');\r\n                            container.find('a').trigger('click');\r\n                        }\r\n                    });\r\n            } else {\r\n                _this = this;\r\n                container.hide()\r\n                    .find('.input-text:not(.giftmessage-area)').each(function (x, element) {\r\n                        $(element).val(element.defaultValue).removeClass(_this.options.mageError)\r\n                            .next('div.' + _this.options.mageError).remove();\r\n                    }).end()\r\n                    .find('.giftmessage-area').val('').change().end()\r\n                    .find('.select').val('').change().end()\r\n                    .find('.checkbox:checked').prop('checked', false).trigger('click').prop('checked', false).end()\r\n                    .find('.price-box').addClass(this.options.noDisplay).end();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Make the From and To input fields required if a gift message has been written.\r\n         * @private\r\n         * @param {jQuery.Event} event - Change event. Target is a textarea.\r\n         */\r\n        _toggleRequired: function (event) {\r\n            var textArea = $(event.target),\r\n                length = textArea.val().length;\r\n\r\n            textArea.closest('li').prev('.fields')\r\n                .find('.input-text').toggleClass(this.options.requiredEntry, length > 0);\r\n        }\r\n    });\r\n\r\n    return $.mage.giftOptions;\r\n});\r\n","Magento_GiftMessage/js/action/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_GiftMessage/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'mage/url',\r\n    'Magento_Checkout/js/model/quote',\r\n    'underscore'\r\n], function (urlBuilder, storage, messageList, errorProcessor, url, quote, _) {\r\n    'use strict';\r\n\r\n    return function (giftMessage, remove) {\r\n        var serviceUrl;\r\n\r\n        url.setBaseUrl(giftMessage.getConfigValue('baseUrl'));\r\n\r\n        if (giftMessage.getConfigValue('isCustomerLoggedIn')) {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message', {});\r\n\r\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\r\n                serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message/:itemId', {\r\n                    itemId: giftMessage.itemId\r\n                });\r\n            }\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/gift-message', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n\r\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\r\n                serviceUrl = urlBuilder.createUrl(\r\n                    '/guest-carts/:cartId/gift-message/:itemId',\r\n                    {\r\n                        cartId: quote.getQuoteId(), itemId: giftMessage.itemId\r\n                    }\r\n                );\r\n            }\r\n        }\r\n        messageList.clear();\r\n\r\n        storage.post(\r\n            serviceUrl,\r\n            JSON.stringify({\r\n                'gift_message': giftMessage.getSubmitParams(remove)\r\n            })\r\n        ).done(function () {\r\n            giftMessage.reset();\r\n            _.each(giftMessage.getAfterSubmitCallbacks(), function (callback) {\r\n                if (_.isFunction(callback)) {\r\n                    callback();\r\n                }\r\n            });\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response);\r\n        });\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'underscore',\r\n    'mage/url'\r\n], function (uiElement, _, url) {\r\n    'use strict';\r\n\r\n    var provider = uiElement();\r\n\r\n    return function (itemId) {\r\n        var model = {\r\n            id: 'message-' + itemId,\r\n            itemId: itemId,\r\n            observables: {},\r\n            additionalOptions: [],\r\n            submitParams: [\r\n                'recipient',\r\n                'sender',\r\n                'message'\r\n            ],\r\n\r\n            /**\r\n             * Initialize.\r\n             */\r\n            initialize: function () {\r\n                var message = false;\r\n\r\n                this.getObservable('alreadyAdded')(false);\r\n\r\n                if (this.itemId == 'orderLevel') { //eslint-disable-line eqeqeq\r\n                    message = window.giftOptionsConfig.giftMessage.hasOwnProperty(this.itemId) ?\r\n                        window.giftOptionsConfig.giftMessage[this.itemId] :\r\n                        null;\r\n                } else {\r\n                    message =\r\n                        window.giftOptionsConfig.giftMessage.hasOwnProperty('itemLevel') &&\r\n                        window.giftOptionsConfig.giftMessage.itemLevel.hasOwnProperty(this.itemId) ?\r\n                            window.giftOptionsConfig.giftMessage.itemLevel[this.itemId].message :\r\n                            null;\r\n                }\r\n\r\n                if (_.isObject(message)) {\r\n                    this.getObservable('recipient')(message.recipient);\r\n                    this.getObservable('sender')(message.sender);\r\n                    this.getObservable('message')(message.message);\r\n                    this.getObservable('alreadyAdded')(true);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {String} key\r\n             * @return {*}\r\n             */\r\n            getObservable: function (key) {\r\n                this.initObservable(this.id, key);\r\n\r\n                return provider[this.getUniqueKey(this.id, key)];\r\n            },\r\n\r\n            /**\r\n             * @param {String} node\r\n             * @param {String} key\r\n             */\r\n            initObservable: function (node, key) {\r\n                if (node && !this.observables.hasOwnProperty(node)) {\r\n                    this.observables[node] = [];\r\n                }\r\n\r\n                if (key && this.observables[node].indexOf(key) === -1) {\r\n                    this.observables[node].push(key);\r\n                    provider.observe(this.getUniqueKey(node, key));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {String} node\r\n             * @param {String} key\r\n             * @return {String}\r\n             */\r\n            getUniqueKey: function (node, key) {\r\n                return node + '-' + key;\r\n            },\r\n\r\n            /**\r\n             * @param {String} key\r\n             * @return {null}\r\n             */\r\n            getConfigValue: function (key) {\r\n                return window.giftOptionsConfig.hasOwnProperty(key) ?\r\n                    window.giftOptionsConfig[key]\r\n                    : null;\r\n            },\r\n\r\n            /**\r\n             * Reset.\r\n             */\r\n            reset: function () {\r\n                this.getObservable('isClear')(true);\r\n            },\r\n\r\n            /**\r\n             * @return {Array}\r\n             */\r\n            getAfterSubmitCallbacks: function () {\r\n                var callbacks = [];\r\n\r\n                callbacks.push(this.afterSubmit);\r\n                _.each(this.additionalOptions, function (option) {\r\n                    if (_.isFunction(option.afterSubmit)) {\r\n                        callbacks.push(option.afterSubmit);\r\n                    }\r\n                });\r\n\r\n                return callbacks;\r\n            },\r\n\r\n            /**\r\n             * After submit.\r\n             */\r\n            afterSubmit: function () {\r\n                window.location.href = url.build('checkout/cart/updatePost') +\r\n                    '?form_key=' + window.checkoutConfig.formKey +\r\n                    '&cart[]';\r\n            },\r\n\r\n            /**\r\n             * @param {Boolean} remove\r\n             * @return {Object}\r\n             */\r\n            getSubmitParams: function (remove) {\r\n                var params = {},\r\n                    self = this;\r\n\r\n                _.each(this.submitParams, function (key) {\r\n                    var observable = provider[self.getUniqueKey(self.id, key)];\r\n\r\n                    if (_.isFunction(observable)) {\r\n                        params[key] = remove ? null : observable();\r\n                    }\r\n                });\r\n\r\n                if (this.additionalOptions.length) {\r\n                    params['extension_attributes'] = {};\r\n                }\r\n                _.each(this.additionalOptions, function (option) {\r\n                    if (_.isFunction(option.getSubmitParams)) {\r\n                        params['extension_attributes'] = _.extend(\r\n                            params['extension_attributes'],\r\n                            option.getSubmitParams(remove)\r\n                        );\r\n                    }\r\n                });\r\n\r\n                return params;\r\n            },\r\n\r\n            /**\r\n             * Check if gift message can be displayed\r\n             *\r\n             * @returns {Boolean}\r\n             */\r\n            isGiftMessageAvailable: function () {\r\n                var isGloballyAvailable,\r\n                    giftMessageConfig,\r\n                    itemConfig;\r\n\r\n                // itemId represent gift message level: 'orderLevel' constant or cart item ID\r\n                if (this.itemId === 'orderLevel') {\r\n                    return this.getConfigValue('isOrderLevelGiftOptionsEnabled');\r\n                }\r\n\r\n                // gift message product configuration must override system configuration\r\n                isGloballyAvailable = this.getConfigValue('isItemLevelGiftOptionsEnabled');\r\n                giftMessageConfig = window.giftOptionsConfig.giftMessage;\r\n                itemConfig = giftMessageConfig.hasOwnProperty('itemLevel') &&\r\n                    giftMessageConfig.itemLevel.hasOwnProperty(this.itemId) ?\r\n                    giftMessageConfig.itemLevel[this.itemId] :\r\n                    {};\r\n\r\n                return itemConfig.hasOwnProperty('is_available') ? itemConfig['is_available'] : isGloballyAvailable;\r\n            }\r\n        };\r\n\r\n        model.initialize();\r\n\r\n        return model;\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'ko'\r\n], function (_, ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        options: ko.observableArray([]),\r\n\r\n        /**\r\n         * @param {Object} option\r\n         */\r\n        addOption: function (option) {\r\n            if (!this.options().hasOwnProperty(option.itemId)) {\r\n                this.options.push({\r\n                        id: option.itemId, value: option\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} itemId\r\n         * @return {*}\r\n         */\r\n        getOptionByItemId: function (itemId) {\r\n            var option = null;\r\n\r\n            _.each(this.options(), function (data) {\r\n                if (data.id === itemId) {\r\n                    option = data.value;\r\n\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return option;\r\n        }\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/url-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/url-builder'\r\n], function ($, urlBuilder) {\r\n    'use strict';\r\n\r\n    return $.extend(urlBuilder, {\r\n        storeCode: window.giftOptionsConfig.storeCode\r\n    });\r\n});\r\n","Magento_GiftMessage/js/view/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_GiftMessage/js/model/gift-message',\r\n    'Magento_GiftMessage/js/model/gift-options',\r\n    'Magento_GiftMessage/js/action/gift-options'\r\n], function (Component, GiftMessage, giftOptions, giftOptionsService) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        formBlockVisibility: null,\r\n        resultBlockVisibility: null,\r\n        model: {},\r\n\r\n        /**\r\n         * Component init\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                model;\r\n\r\n            this._super()\r\n                .observe('formBlockVisibility')\r\n                .observe({\r\n                    'resultBlockVisibility': false\r\n                });\r\n\r\n            this.itemId = this.itemId || 'orderLevel';\r\n            model = new GiftMessage(this.itemId);\r\n            this.model = model;\r\n            this.isResultBlockVisible();\r\n            giftOptions.addOption(model);\r\n\r\n            this.model.getObservable('isClear').subscribe(function (value) {\r\n                if (value == true) { //eslint-disable-line eqeqeq\r\n                    self.formBlockVisibility(false);\r\n                    self.model.getObservable('alreadyAdded')(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Is reslt block visible\r\n         */\r\n        isResultBlockVisible: function () {\r\n            var self = this;\r\n\r\n            if (this.model.getObservable('alreadyAdded')()) {\r\n                this.resultBlockVisibility(true);\r\n            }\r\n            this.model.getObservable('additionalOptionsApplied').subscribe(function (value) {\r\n                if (value == true) { //eslint-disable-line eqeqeq\r\n                    self.resultBlockVisibility(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {String} key\r\n         * @return {*}\r\n         */\r\n        getObservable: function (key) {\r\n            return this.model.getObservable(key);\r\n        },\r\n\r\n        /**\r\n         * Hide\\Show form block\r\n         */\r\n        toggleFormBlockVisibility: function () {\r\n            if (!this.model.getObservable('alreadyAdded')()) {\r\n                this.formBlockVisibility(!this.formBlockVisibility());\r\n            } else {\r\n                this.resultBlockVisibility(!this.resultBlockVisibility());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Edit options\r\n         */\r\n        editOptions: function () {\r\n            this.resultBlockVisibility(false);\r\n            this.formBlockVisibility(true);\r\n        },\r\n\r\n        /**\r\n         * Delete options\r\n         */\r\n        deleteOptions: function () {\r\n            giftOptionsService(this.model, true);\r\n        },\r\n\r\n        /**\r\n         * Hide form block\r\n         */\r\n        hideFormBlock: function () {\r\n            this.formBlockVisibility(false);\r\n\r\n            if (this.model.getObservable('alreadyAdded')()) {\r\n                this.resultBlockVisibility(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        hasActiveOptions: function () {\r\n            var regionData = this.getRegion('additionalOptions'),\r\n                options = regionData(),\r\n                i;\r\n\r\n            for (i = 0; i < options.length; i++) {\r\n                if (options[i].isActive()) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return this.model.isGiftMessageAvailable();\r\n        },\r\n\r\n        /**\r\n         * Submit options\r\n         */\r\n        submitOptions: function () {\r\n            giftOptionsService(this.model);\r\n        }\r\n    });\r\n});\r\n","Magento_GoogleAnalytics/js/google-analytics.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        var allowServices = false,\r\n            allowedCookies,\r\n            allowedWebsites;\r\n\r\n        if (config.isCookieRestrictionModeEnabled) {\r\n            allowedCookies = $.mage.cookies.get(config.cookieName);\r\n\r\n            if (allowedCookies !== null) {\r\n                allowedWebsites = JSON.parse(allowedCookies);\r\n\r\n                if (allowedWebsites[config.currentWebsite] === 1) {\r\n                    allowServices = true;\r\n                }\r\n            }\r\n        } else {\r\n            allowServices = true;\r\n        }\r\n\r\n        if (allowServices) {\r\n            (function (i, s, o, g, r, a, m) {\r\n                i.GoogleAnalyticsObject = r;\r\n                i[r] = i[r] || function () {\r\n                        (i[r].q = i[r].q || []).push(arguments)\r\n                    }, i[r].l = 1 * new Date();\r\n                a = s.createElement(o),\r\n                    m = s.getElementsByTagName(o)[0];\r\n                a.async = 1;\r\n                a.src = g;\r\n                m.parentNode.insertBefore(a, m)\r\n            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\r\n\r\n            // Process page info\r\n            ga('create', config.pageTrackingData.accountId, 'auto');\r\n\r\n            if (config.pageTrackingData.isAnonymizedIpActive) {\r\n                ga('set', 'anonymizeIp', true);\r\n            }\r\n\r\n            // Process orders data\r\n            if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                ga('require', 'ec', 'ec.js');\r\n\r\n                ga('set', 'currencyCode', config.ordersTrackingData.currency);\r\n\r\n                // Collect product data for GA\r\n                if (config.ordersTrackingData.products) {\r\n                    $.each(config.ordersTrackingData.products, function (index, value) {\r\n                        ga('ec:addProduct', value);\r\n                    });\r\n                }\r\n\r\n                // Collect orders data for GA\r\n                if (config.ordersTrackingData.orders) {\r\n                    $.each(config.ordersTrackingData.orders, function (index, value) {\r\n                        ga('ec:setAction', 'purchase', value);\r\n                    });\r\n                }\r\n\r\n                ga('send', 'pageview');\r\n            } else {\r\n                // Process Data if not orders\r\n                ga('send', 'pageview' + config.pageTrackingData.optPageUrl);\r\n            }\r\n        }\r\n    }\r\n});\r\n","Magento_GoogleGtag/js/google-adwords.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        if (!window.gtag) {\r\n            // Inject Global Site Tag\r\n            var gtagScript = document.createElement('script');\r\n            gtagScript.type = 'text/javascript';\r\n            gtagScript.async = true;\r\n            gtagScript.src = config.gtagSiteSrc;\r\n            document.head.appendChild(gtagScript);\r\n\r\n            window.dataLayer = window.dataLayer || [];\r\n\r\n            function gtag(){dataLayer.push(arguments);}\r\n            gtag('js', new Date());\r\n            gtag('set', 'developer_id.dYjhlMD', true);\r\n            if (config.conversionLabel) {\r\n                gtag(\r\n                    'event',\r\n                    'conversion',\r\n                    {'send_to': config.conversionId + '/'\r\n                            + config.conversionLabel}\r\n                );\r\n            }\r\n        } else {\r\n            gtag('config', config.conversionId);\r\n        }\r\n    }\r\n});\r\n","Magento_GoogleGtag/js/google-analytics.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        var allowServices = false,\r\n            allowedCookies,\r\n            allowedWebsites,\r\n            measurementId;\r\n\r\n        if (config.isCookieRestrictionModeEnabled) {\r\n            allowedCookies = $.mage.cookies.get(config.cookieName);\r\n\r\n            if (allowedCookies !== null) {\r\n                allowedWebsites = JSON.parse(allowedCookies);\r\n\r\n                if (allowedWebsites[config.currentWebsite] === 1) {\r\n                    allowServices = true;\r\n                }\r\n            }\r\n        } else {\r\n            allowServices = true;\r\n        }\r\n\r\n        if (allowServices) {\r\n            /* Global site tag (gtag.js) - Google Analytics */\r\n            measurementId = config.pageTrackingData.measurementId;\r\n            if (window.gtag) {\r\n                gtag('config', measurementId, { 'anonymize_ip': true });\r\n                // Purchase Event\r\n                if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                    var purchaseObject = config.ordersTrackingData.orders[0];\r\n                    purchaseObject['items'] = config.ordersTrackingData.products;\r\n                    gtag('event', 'purchase', purchaseObject);\r\n                }\r\n            } else {\r\n                (function(d,s,u){\r\n                    var gtagScript = d.createElement(s);\r\n                    gtagScript.type = 'text/javascript';\r\n                    gtagScript.async = true;\r\n                    gtagScript.src = u;\r\n                    d.head.insertBefore(gtagScript, d.head.children[0]);\r\n                })(document, 'script', 'https://www.googletagmanager.com/gtag/js?id=' + measurementId);\r\n                window.dataLayer = window.dataLayer || [];\r\n                function gtag(){dataLayer.push(arguments);}\r\n                gtag('js', new Date());\r\n                gtag('set', 'developer_id.dYjhlMD', true);\r\n                gtag('config', measurementId, { 'anonymize_ip': true });\r\n                // Purchase Event\r\n                if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                    var purchaseObject = config.ordersTrackingData.orders[0];\r\n                    purchaseObject['items'] = config.ordersTrackingData.products;\r\n                    gtag('event', 'purchase', purchaseObject);\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n","Magento_GroupedProduct/js/product-ids-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/product/view/product-ids',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function ($, productIds, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns id's of products in form.\r\n     *\r\n     * @param {Object} config\r\n     * @param {HTMLElement} element\r\n     * @return {Array}\r\n     */\r\n    return function (config, element) {\r\n        $(element).find('div[data-product-id]').each(function () {\r\n            productIds.push($(this).data('productId').toString());\r\n            productInfo.push(\r\n                {\r\n                    'id': $(this).data('productId').toString()\r\n                }\r\n            );\r\n        });\r\n\r\n        return productIds();\r\n    };\r\n});\r\n","Magento_InstantPurchase/js/view/instant-purchase.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/url',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'text!Magento_InstantPurchase/template/confirmation.html',\r\n    'mage/validation'\r\n], function (ko, $, _, Component, confirm, customerData, urlBuilder, mageTemplate, $t, confirmationTemplate) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InstantPurchase/instant-purchase',\r\n            buttonText: $t('Instant Purchase'),\r\n            purchaseUrl: urlBuilder.build('instantpurchase/button/placeOrder'),\r\n            showButton: false,\r\n            paymentToken: null,\r\n            shippingAddress: null,\r\n            billingAddress: null,\r\n            shippingMethod: null,\r\n            productFormSelector: '#product_addtocart_form',\r\n            confirmationTitle: $t('Instant Purchase Confirmation'),\r\n            confirmationData: {\r\n                message: $t('Are you sure you want to place order and pay?'),\r\n                shippingAddressTitle: $t('Shipping Address'),\r\n                billingAddressTitle: $t('Billing Address'),\r\n                paymentMethodTitle: $t('Payment Method'),\r\n                shippingMethodTitle: $t('Shipping Method')\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var instantPurchase = customerData.get('instant-purchase');\r\n\r\n            this._super();\r\n\r\n            this.setPurchaseData(instantPurchase());\r\n            instantPurchase.subscribe(this.setPurchaseData, this);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('showButton paymentToken shippingAddress billingAddress shippingMethod');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set data from customerData.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setPurchaseData: function (data) {\r\n            this.showButton(data.available);\r\n            this.paymentToken(data.paymentToken);\r\n            this.shippingAddress(data.shippingAddress);\r\n            this.billingAddress(data.billingAddress);\r\n            this.shippingMethod(data.shippingMethod);\r\n        },\r\n\r\n        /**\r\n         * Confirmation method\r\n         */\r\n        instantPurchase: function () {\r\n            var form = $(this.productFormSelector),\r\n                confirmTemplate = mageTemplate(confirmationTemplate),\r\n                confirmData = _.extend({}, this.confirmationData, {\r\n                    paymentToken: this.paymentToken().summary,\r\n                    shippingAddress: this.shippingAddress().summary,\r\n                    billingAddress: this.billingAddress().summary,\r\n                    shippingMethod: this.shippingMethod().summary\r\n                });\r\n\r\n            if (!(form.validation() && form.validation('isValid'))) {\r\n                return;\r\n            }\r\n\r\n            confirm({\r\n                title: this.confirmationTitle,\r\n                content: confirmTemplate({\r\n                    data: confirmData\r\n                }),\r\n                actions: {\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        $.ajax({\r\n                            url: this.purchaseUrl,\r\n                            data: form.serialize(),\r\n                            type: 'post',\r\n                            dataType: 'json',\r\n\r\n                            /** Show loader before send */\r\n                            beforeSend: function () {\r\n                                $('body').trigger('processStart');\r\n                            }\r\n                        }).always(function () {\r\n                            $('body').trigger('processStop');\r\n                        });\r\n                    }.bind(this)\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_InventoryConfigurableProductFrontendUi/js/configurable-variation-qty.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Configurable variation left qty.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/url'\r\n], function ($, _, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (productSku, salesChannel, salesChannelCode) {\r\n        var selectorInfoStockSkuQty = '.availability.only',\r\n            selectorInfoStockSkuQtyValue = '.availability.only > strong',\r\n            productQtyInfoBlock = $(selectorInfoStockSkuQty),\r\n            productQtyInfo = $(selectorInfoStockSkuQtyValue);\r\n\r\n        if (!_.isUndefined(productSku) && productSku !== null) {\r\n            $.ajax({\r\n                url: urlBuilder.build('inventory_catalog/product/getQty/'),\r\n                dataType: 'json',\r\n                data: {\r\n                    'sku': productSku,\r\n                    'channel': salesChannel,\r\n                    'salesChannelCode': salesChannelCode\r\n                }\r\n            }).done(function (response) {\r\n                if (response.qty !== null && response.qty > 0) {\r\n                    productQtyInfo.text(response.qty);\r\n                    productQtyInfoBlock.show();\r\n                } else {\r\n                    productQtyInfoBlock.hide();\r\n                }\r\n            }).fail(function () {\r\n                productQtyInfoBlock.hide();\r\n            });\r\n        } else {\r\n            productQtyInfoBlock.hide();\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryConfigurableProductFrontendUi/js/configurable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'configurableVariationQty',\r\n    'jquery-ui-modules/widget'\r\n], function ($, configurableVariationQty) {\r\n    'use strict';\r\n\r\n    return function (configurable) {\r\n        $.widget('mage.configurable', configurable, {\r\n\r\n            /** @inheritdoc */\r\n            _configureElement: function (element) {\r\n                var salesChannel = this.options.spConfig.channel,\r\n                    salesChannelCode = this.options.spConfig.salesChannelCode,\r\n                    productVariationsSku = this.options.spConfig.sku;\r\n\r\n                this._super(element);\r\n                configurableVariationQty(productVariationsSku[this.simpleProduct], salesChannel, salesChannelCode);\r\n            }\r\n        });\r\n\r\n        return $.mage.configurable;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/checkout-data-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Customer/js/customer-data'\r\n], function (\r\n    storage\r\n) {\r\n    'use strict';\r\n\r\n    return function (checkoutData) {\r\n\r\n        var cacheKey = 'checkout-data',\r\n\r\n            /**\r\n             * @param {Object} data\r\n             */\r\n            saveData = function (data) {\r\n                storage.set(cacheKey, data);\r\n            },\r\n\r\n            /**\r\n             * @return {Object}\r\n             */\r\n            getData = function () {\r\n                //Makes sure that checkout storage is initiated (any method can be used)\r\n                checkoutData.getSelectedShippingAddress();\r\n\r\n                return storage.get(cacheKey)();\r\n            };\r\n\r\n        /**\r\n         * Save the pickup address in persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        checkoutData.setSelectedPickupAddress = function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedPickupAddress = data;\r\n            saveData(obj);\r\n        };\r\n\r\n        /**\r\n         * Get the pickup address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        checkoutData.getSelectedPickupAddress = function () {\r\n            return getData().selectedPickupAddress || null;\r\n        };\r\n\r\n        return checkoutData;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/checkout-data-resolver-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter'\r\n], function (\r\n    wrapper,\r\n    checkoutData,\r\n    selectShippingAddress,\r\n    addressConverter,\r\n    pickupAddressConverter\r\n) {\r\n    'use strict';\r\n\r\n    return function (checkoutDataResolver) {\r\n        checkoutDataResolver.resolveShippingAddress = wrapper.wrapSuper(\r\n            checkoutDataResolver.resolveShippingAddress,\r\n            function () {\r\n                var shippingAddress,\r\n                    pickUpAddress;\r\n\r\n                if (checkoutData.getSelectedPickupAddress() && checkoutData.getSelectedShippingAddress()) {\r\n                    shippingAddress = addressConverter.formAddressDataToQuoteAddress(\r\n                        checkoutData.getSelectedPickupAddress()\r\n                    );\r\n                    pickUpAddress = pickupAddressConverter.formatAddressToPickupAddress(\r\n                        shippingAddress\r\n                    );\r\n\r\n                    if (pickUpAddress.getKey() === checkoutData.getSelectedShippingAddress()) {\r\n                        selectShippingAddress(pickUpAddress);\r\n\r\n                        return;\r\n                    }\r\n                }\r\n                this._super();\r\n            });\r\n\r\n        return checkoutDataResolver;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Format address to use in store pickup\r\n         *\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        formatAddressToPickupAddress: function (address) {\r\n            var sourceCode = _.findWhere(address.customAttributes, {\r\n                'attribute_code': 'sourceCode'\r\n            });\r\n\r\n            if (!sourceCode &&\r\n                !_.isEmpty(address.extensionAttributes) &&\r\n                address.extensionAttributes['pickup_location_code']\r\n            ) {\r\n                sourceCode = {\r\n                    value: address.extensionAttributes['pickup_location_code']\r\n                };\r\n            }\r\n\r\n            if (sourceCode && address.getType() !== 'store-pickup-address') {\r\n                address = _.extend({}, address, {\r\n                    saveInAddressBook: 0,\r\n\r\n                    /**\r\n                     * Is address can be used for billing\r\n                     *\r\n                     * @return {Boolean}\r\n                     */\r\n                    canUseForBilling: function () {\r\n                        return false;\r\n                    },\r\n\r\n                    /**\r\n                     * Returns address type\r\n                     *\r\n                     * @return {String}\r\n                     */\r\n                    getType: function () {\r\n                        return 'store-pickup-address';\r\n                    },\r\n\r\n                    /**\r\n                     * Returns address key\r\n                     *\r\n                     * @return {*}\r\n                     */\r\n                    getKey: function () {\r\n                        return this.getType() + sourceCode.value;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return address;\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/pickup-locations-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'knockout',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/resource-url-manager',\r\n    'mage/storage',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'underscore',\r\n    'mage/translate',\r\n    'mage/url',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter'\r\n], function (\r\n    $,\r\n    ko,\r\n    resourceUrlManager,\r\n    storage,\r\n    customerData,\r\n    checkoutData,\r\n    addressConverter,\r\n    selectShippingAddressAction,\r\n    _,\r\n    $t,\r\n    url,\r\n    pickupAddressConverter\r\n) {\r\n    'use strict';\r\n\r\n    var websiteCode = window.checkoutConfig.websiteCode,\r\n        countryData = customerData.get('directory-data');\r\n\r\n    return {\r\n        isLoading: ko.observable(false),\r\n        selectedLocation: ko.observable(null),\r\n        locationsCache: [],\r\n\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         *\r\n         * @param {String} sourceCode\r\n         */\r\n        getLocation: function (sourceCode) {\r\n            var serviceUrl = resourceUrlManager.getUrlForPickupLocation(websiteCode, sourceCode);\r\n\r\n            this.isLoading(true);\r\n\r\n            return storage\r\n                .get(serviceUrl, {}, false)\r\n                .then(function (result) {\r\n                    var addresses = result.items || [],\r\n                        address = addresses[0] || {};\r\n\r\n                    return this.formatAddress(address);\r\n                }.bind(this))\r\n                .fail(function (response) {\r\n                    this.processError(response);\r\n\r\n                    return [];\r\n                }.bind(this))\r\n                .always(function () {\r\n                    this.isLoading(false);\r\n                }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Get nearby pickup locations based on given search criteria.\r\n         *\r\n         * @param {Object} searchCriteria - Search criteria object.\r\n         * @see Magento/InventoryInStorePickup/Model/SearchCriteria/GetNearbyLocationsCriteria.php\r\n         */\r\n        getNearbyLocations: function (searchCriteria) {\r\n            var self = this,\r\n                serviceUrl = resourceUrlManager.getUrlForNearbyPickupLocations(websiteCode, searchCriteria);\r\n\r\n            if (self.locationsCache[serviceUrl]) {\r\n                return $.Deferred().resolve(self.locationsCache[serviceUrl]).promise();\r\n            }\r\n\r\n            self.isLoading(true);\r\n\r\n            return storage\r\n                .get(serviceUrl, {}, false)\r\n                .then(function (result) {\r\n                    self.locationsCache[serviceUrl] = _.map(result.items, function (address) {\r\n                        return self.formatAddress(address);\r\n                    });\r\n\r\n                    return self.locationsCache[serviceUrl];\r\n                })\r\n                .fail(function (response) {\r\n                    self.processError(response);\r\n\r\n                    return [];\r\n                })\r\n                .always(function () {\r\n                    self.isLoading(false);\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Select location for sipping.\r\n         *\r\n         * @param {Object} location\r\n         * @returns void\r\n         */\r\n        selectForShipping: function (location) {\r\n            var address = $.extend(\r\n                {},\r\n                addressConverter.formAddressDataToQuoteAddress({\r\n                    firstname: location.name,\r\n                    lastname: 'Store',\r\n                    street: location.street,\r\n                    city: location.city,\r\n                    postcode: location.postcode,\r\n                    'country_id': location['country_id'],\r\n                    telephone: location.telephone,\r\n                    'region_id': location['region_id'],\r\n                    'save_in_address_book': 0,\r\n                    'extension_attributes': {\r\n                        'pickup_location_code': location['pickup_location_code']\r\n                    }\r\n                }));\r\n\r\n            address = pickupAddressConverter.formatAddressToPickupAddress(address);\r\n            this.selectedLocation(location);\r\n            selectShippingAddressAction(address);\r\n            checkoutData.setSelectedShippingAddress(address.getKey());\r\n            checkoutData.setSelectedPickupAddress(\r\n                addressConverter.quoteAddressToFormAddressData(address)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Formats address returned by REST endpoint to match checkout address field naming.\r\n         *\r\n         * @param {Object} address - Address object returned by REST endpoint.\r\n         */\r\n        formatAddress: function (address) {\r\n            return {\r\n                name: address.name,\r\n                description: address.description,\r\n                latitude: address.latitude,\r\n                longitude: address.longitude,\r\n                street: [address.street],\r\n                city: address.city,\r\n                postcode: address.postcode,\r\n                'country_id': address['country_id'],\r\n                country: this.getCountryName(address['country_id']),\r\n                telephone: address.phone,\r\n                'region_id': address['region_id'],\r\n                region: this.getRegionName(\r\n                    address['country_id'],\r\n                    address['region_id']\r\n                ),\r\n                'pickup_location_code': address['pickup_location_code']\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get country name by id.\r\n         *\r\n         * @param {*} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] !== undefined ?\r\n                countryData()[countryId].name\r\n                : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Returns region name based on given country and region identifiers.\r\n         *\r\n         * @param {String} countryId - Country identifier.\r\n         * @param {String} regionId - Region identifier.\r\n         */\r\n        getRegionName: function (countryId, regionId) {\r\n            var regions = countryData()[countryId] ?\r\n                countryData()[countryId].regions\r\n                : null;\r\n\r\n            return regions && regions[regionId] ? regions[regionId].name : '';\r\n        },\r\n\r\n        /**\r\n         * Process response errors.\r\n         *\r\n         * @param {Object} response\r\n         * @returns void\r\n         */\r\n        processError: function (response) {\r\n            var expr = /([%])\\w+/g,\r\n                error;\r\n\r\n            if (response.status === 401) {\r\n                //eslint-disable-line eqeqeq\r\n                window.location.replace(url.build('customer/account/login/'));\r\n\r\n                return;\r\n            }\r\n\r\n            try {\r\n                error = JSON.parse(response.responseText);\r\n            } catch (exception) {\r\n                error = $t(\r\n                    'Something went wrong with your request. Please try again later.'\r\n                );\r\n            }\r\n\r\n            if (error.hasOwnProperty('parameters')) {\r\n                error = error.message.replace(expr, function (varName) {\r\n                    varName = varName.substr(1);\r\n\r\n                    if (error.parameters.hasOwnProperty(varName)) {\r\n                        return error.parameters[varName];\r\n                    }\r\n\r\n                    return error.parameters.shift();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns selected pick up address from local storage\r\n         *\r\n         * @returns {Object|null}\r\n         */\r\n        getSelectedPickupAddress: function () {\r\n            var shippingAddress,\r\n                pickUpAddress;\r\n\r\n            if (checkoutData.getSelectedPickupAddress()) {\r\n                shippingAddress = addressConverter.formAddressDataToQuoteAddress(\r\n                    checkoutData.getSelectedPickupAddress()\r\n                );\r\n                pickUpAddress = pickupAddressConverter.formatAddressToPickupAddress(\r\n                    shippingAddress\r\n                );\r\n\r\n                return pickUpAddress;\r\n            }\r\n\r\n            return null;\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/quote-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter'\r\n], function (ko, pickupAddressConverter) {\r\n    'use strict';\r\n\r\n    return function (quote) {\r\n        var shippingAddress = quote.shippingAddress;\r\n\r\n        /**\r\n         * Makes sure that shipping address gets appropriate type when it points\r\n         * to a store pickup location.\r\n         */\r\n        quote.shippingAddress = ko.pureComputed({\r\n            /**\r\n             * Return quote shipping address\r\n             */\r\n            read: function () {\r\n                return shippingAddress();\r\n            },\r\n\r\n            /**\r\n             * Set quote shipping address\r\n             */\r\n            write: function (address) {\r\n                shippingAddress(\r\n                    pickupAddressConverter.formatAddressToPickupAddress(address)\r\n                );\r\n            }\r\n        });\r\n\r\n        return quote;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/resource-url-manager.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery', 'Magento_Checkout/js/model/resource-url-manager'], function (\r\n    $,\r\n    resourceUrlManager\r\n) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Returns URL for REST API to fetch nearby pickup locations defined for given sales channel.\r\n         *\r\n         * @param {String} salesChannelCode - Code of the sales channel.\r\n         * @param {Object} searchCriteria\r\n         */\r\n        getUrlForNearbyPickupLocations: function (\r\n            salesChannelCode,\r\n            searchCriteria\r\n        ) {\r\n            var urls = {\r\n                    default: '/inventory/in-store-pickup/pickup-locations/'\r\n                },\r\n                criteria = {\r\n                    searchRequest: {\r\n                        scopeCode: salesChannelCode\r\n                    }\r\n                };\r\n\r\n            searchCriteria = {\r\n                searchRequest: searchCriteria\r\n            };\r\n\r\n            return (\r\n                resourceUrlManager.getUrl(urls, {}) +\r\n                '?' +\r\n                $.param($.extend(true, criteria, searchCriteria))\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Returns URL for REST API to fetch all pickup locations defined for given sales channel.\r\n         *\r\n         * @param {String} salesChannelType - Type of the sales channel, e.g. website.\r\n         * @param {String} salesChannelCode - Code of the sales channel.\r\n         */\r\n        getUrlForPickupLocationsAssignedToSalesChannel: function (\r\n            salesChannelType,\r\n            salesChannelCode\r\n        ) {\r\n            var params = {\r\n                    salesChannelType: salesChannelType,\r\n                    salesChannelCode: salesChannelCode\r\n                },\r\n                urls = {\r\n                    default: '/inventory/in-store-pickup/pickup-locations-assigned-to-sales-channel/' +\r\n                        ':salesChannelType/:salesChannelCode'\r\n                };\r\n\r\n            return resourceUrlManager.getUrl(urls, params);\r\n        },\r\n\r\n        /**\r\n         * Returns URL for REST API to fetch pickup location with given code defined for given sales channel.\r\n         *\r\n         * @param {String} salesChannelCode - Code of the sales channel.\r\n         * @param {String} pickupLocationCode - Code of the pickup location.\r\n         */\r\n        getUrlForPickupLocation: function (\r\n            salesChannelCode,\r\n            pickupLocationCode\r\n        ) {\r\n            var urls = {\r\n                    default: '/inventory/in-store-pickup/pickup-locations/'\r\n                },\r\n                searchRequest = {\r\n                    searchRequest: {\r\n                        filters: {\r\n                            pickupLocationCode: {\r\n                                value: pickupLocationCode\r\n                            }\r\n                        },\r\n                        scopeCode: salesChannelCode\r\n                    }\r\n                };\r\n\r\n            return resourceUrlManager.getUrl(urls, {}) +\r\n                '?' +\r\n                $.param(searchRequest);\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/shipping-rate-processor/store-pickup-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {}\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/shipping-information-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    var storePickupShippingInformation = {\r\n        defaults: {\r\n            template: 'Magento_InventoryInStorePickupFrontend/shipping-information'\r\n        },\r\n\r\n        /**\r\n         * Get shipping method title based on delivery method.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                locationName = '',\r\n                title;\r\n\r\n            if (!this.isStorePickup()) {\r\n\r\n                return this._super();\r\n            }\r\n\r\n            title = shippingMethod['carrier_title'] + ' - ' + shippingMethod['method_title'];\r\n\r\n            if (quote.shippingAddress().firstname !== undefined) {\r\n                locationName = quote.shippingAddress().firstname + ' ' + quote.shippingAddress().lastname;\r\n                title += ' \"' + locationName + '\"';\r\n            }\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Get is store pickup delivery method selected.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isStorePickup: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                isStorePickup = false;\r\n\r\n            if (shippingMethod !== null) {\r\n                isStorePickup = shippingMethod['carrier_code'] === 'instore' &&\r\n                    shippingMethod['method_code'] === 'pickup';\r\n            }\r\n\r\n            return isStorePickup;\r\n        }\r\n    };\r\n\r\n    return function (shippingInformation) {\r\n        return shippingInformation.extend(storePickupShippingInformation);\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/store-pickup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'underscore',\r\n    'jquery',\r\n    'knockout',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/shipping-rate-service',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/shipping-rate-processor/store-pickup-address',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-locations-service',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Checkout/js/action/select-shipping-address'\r\n], function (\r\n    Component,\r\n    _,\r\n    $,\r\n    ko,\r\n    registry,\r\n    quote,\r\n    selectShippingMethodAction,\r\n    checkoutData,\r\n    shippingService,\r\n    stepNavigator,\r\n    shippingRateService,\r\n    shippingRateProcessor,\r\n    pickupLocationsService,\r\n    pickupAddressConverter,\r\n    checkoutDataResolver,\r\n    selectShippingAddress\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InventoryInStorePickupFrontend/store-pickup',\r\n            deliveryMethodSelectorTemplate: 'Magento_InventoryInStorePickupFrontend/delivery-method-selector',\r\n            isVisible: false,\r\n            isAvailable: false,\r\n            isStorePickupSelected: false,\r\n            rate: {\r\n                'carrier_code': 'instore',\r\n                'method_code': 'pickup'\r\n            },\r\n            nearbySearchLimit: 50,\r\n            defaultCountry: window.checkoutConfig.defaultCountryId,\r\n            delimiter: window.checkoutConfig.storePickupApiSearchTermDelimiter,\r\n            rates: shippingService.getShippingRates(),\r\n            inStoreMethod: null,\r\n            lastSelectedNonPickUpShippingAddress: null\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            shippingRateService.registerProcessor('store-pickup-address', shippingRateProcessor);\r\n\r\n            this.convertAddressType(quote.shippingAddress());\r\n\r\n            this.isStorePickupSelected.subscribe(function () {\r\n                this.preselectLocation();\r\n            }, this);\r\n            this.preselectLocation();\r\n\r\n            this.syncWithShipping();\r\n        },\r\n\r\n        /**\r\n         * Init component observable variables\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super().observe(['isVisible']);\r\n\r\n            this.isStorePickupSelected = ko.pureComputed(function () {\r\n                return _.isMatch(quote.shippingMethod(), this.rate);\r\n            }, this);\r\n\r\n            this.isAvailable = ko.pureComputed(function () {\r\n                return _.findWhere(this.rates(), {\r\n                    'carrier_code': this.rate['carrier_code'],\r\n                    'method_code': this.rate['method_code']\r\n                });\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Synchronize store pickup visibility with shipping step.\r\n         *\r\n         * @returns void\r\n         */\r\n        syncWithShipping: function () {\r\n            var shippingStep = _.findWhere(stepNavigator.steps(), {\r\n                code: 'shipping'\r\n            });\r\n\r\n            shippingStep.isVisible.subscribe(function (isShippingVisible) {\r\n                this.isVisible(this.isAvailable && isShippingVisible);\r\n            }, this);\r\n            this.isVisible(this.isAvailable && shippingStep.isVisible());\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        selectShipping: function () {\r\n            var nonPickupShippingMethod = _.find(\r\n                this.rates(),\r\n                function (rate) {\r\n                    return (\r\n                        rate['carrier_code'] !== this.rate['carrier_code'] &&\r\n                        rate['method_code'] !== this.rate['method_code']\r\n                    );\r\n                },\r\n                this\r\n            ),\r\n                nonPickupShippingAddress;\r\n\r\n            checkoutData.setSelectedShippingAddress(this.lastSelectedNonPickUpShippingAddress);\r\n            this.selectShippingMethod(nonPickupShippingMethod);\r\n\r\n            if (this.isStorePickupAddress(quote.shippingAddress())) {\r\n                nonPickupShippingAddress = checkoutDataResolver.getShippingAddressFromCustomerAddressList();\r\n\r\n                if (nonPickupShippingAddress) {\r\n                    selectShippingAddress(nonPickupShippingAddress);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        selectStorePickup: function () {\r\n            var pickupShippingMethod = _.findWhere(\r\n                this.rates(),\r\n                {\r\n                    'carrier_code': this.rate['carrier_code'],\r\n                    'method_code': this.rate['method_code']\r\n                },\r\n                this\r\n            );\r\n\r\n            this.lastSelectedNonPickUpShippingAddress = checkoutData.getSelectedShippingAddress();\r\n            checkoutData.setSelectedShippingAddress(null);\r\n            this.preselectLocation();\r\n            this.selectShippingMethod(pickupShippingMethod);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} shippingMethod\r\n         */\r\n        selectShippingMethod: function (shippingMethod) {\r\n            selectShippingMethodAction(shippingMethod);\r\n            checkoutData.setSelectedShippingRate(\r\n                shippingMethod ? shippingMethod['carrier_code'] + '_' + shippingMethod['method_code'] : null\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @param {Object} shippingAddress\r\n         * @returns void\r\n         */\r\n        convertAddressType: function (shippingAddress) {\r\n            var pickUpAddress;\r\n\r\n            if (\r\n                !this.isStorePickupAddress(shippingAddress) &&\r\n                this.isStorePickupSelected()\r\n            ) {\r\n                pickUpAddress = pickupAddressConverter.formatAddressToPickupAddress(shippingAddress);\r\n\r\n                if (quote.shippingAddress() !== pickUpAddress) {\r\n                    quote.shippingAddress(pickUpAddress);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        preselectLocation: function () {\r\n            var selectedLocation,\r\n                shippingAddress,\r\n                selectedPickupAddress,\r\n                customAttributes,\r\n                selectedSource,\r\n                selectedSourceCode,\r\n                nearestLocation,\r\n                productsInfo = [],\r\n                items = quote.getItems();\r\n\r\n            if (!this.isStorePickupSelected()) {\r\n                return;\r\n            }\r\n\r\n            selectedLocation = pickupLocationsService.selectedLocation();\r\n\r\n            if (selectedLocation) {\r\n                pickupLocationsService.selectForShipping(selectedLocation);\r\n\r\n                return;\r\n            }\r\n\r\n            shippingAddress = quote.shippingAddress();\r\n            customAttributes = shippingAddress.customAttributes || [];\r\n            selectedSource = _.findWhere(customAttributes, {\r\n                'attribute_code': 'sourceCode'\r\n            });\r\n\r\n            if (selectedSource) {\r\n                selectedSourceCode = selectedSource.value;\r\n            }\r\n\r\n            if (!selectedSourceCode) {\r\n                selectedSourceCode = this.getPickupLocationCodeFromAddress(shippingAddress);\r\n            }\r\n\r\n            if (!selectedSourceCode) {\r\n                selectedPickupAddress = pickupLocationsService.getSelectedPickupAddress();\r\n                selectedSourceCode = this.getPickupLocationCodeFromAddress(selectedPickupAddress);\r\n            }\r\n\r\n            if (selectedSourceCode) {\r\n                pickupLocationsService\r\n                    .getLocation(selectedSourceCode)\r\n                    .then(function (location) {\r\n                        pickupLocationsService.selectForShipping(location);\r\n                    });\r\n            } else if (shippingAddress.city && shippingAddress.postcode) {\r\n                _.each(items, function (item) {\r\n                    if (item['qty_options'] === undefined || item['qty_options'].length === 0) {\r\n                        productsInfo.push(\r\n                            {\r\n                                sku: item.sku\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n                pickupLocationsService\r\n                    .getNearbyLocations({\r\n                        area: {\r\n                            radius: this.nearbySearchRadius,\r\n                            searchTerm: shippingAddress.postcode + this.delimiter +\r\n                                        shippingAddress.countryId || this.defaultCountry\r\n                        },\r\n                        extensionAttributes: {\r\n                            productsInfo: productsInfo\r\n                        },\r\n                        pageSize: this.nearbySearchLimit\r\n                    })\r\n                    .then(function (locations) {\r\n                        nearestLocation = locations[0];\r\n\r\n                        if (nearestLocation) {\r\n                            pickupLocationsService.selectForShipping(\r\n                                nearestLocation\r\n                            );\r\n                        }\r\n                    });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @returns {Boolean}\r\n         */\r\n        isStorePickupAddress: function (address) {\r\n            return address.getType() === 'store-pickup-address';\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @returns {String|null}\r\n         */\r\n        getPickupLocationCodeFromAddress: function (address) {\r\n            if (address &&\r\n                !_.isEmpty(address.extensionAttributes) &&\r\n                address.extensionAttributes['pickup_location_code']\r\n            ) {\r\n                return address.extensionAttributes['pickup_location_code'];\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/store-selector.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/modal/modal',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/set-shipping-information',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-locations-service'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    registry,\r\n    modal,\r\n    quote,\r\n    customer,\r\n    stepNavigator,\r\n    addressConverter,\r\n    setShippingInformationAction,\r\n    pickupLocationsService\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InventoryInStorePickupFrontend/store-selector',\r\n            selectedLocationTemplate:\r\n                'Magento_InventoryInStorePickupFrontend/store-selector/selected-location',\r\n            storeSelectorPopupTemplate:\r\n                'Magento_InventoryInStorePickupFrontend/store-selector/popup',\r\n            storeSelectorPopupItemTemplate:\r\n                'Magento_InventoryInStorePickupFrontend/store-selector/popup-item',\r\n            loginFormSelector:\r\n                '#store-selector form[data-role=email-with-possible-login]',\r\n            defaultCountryId: window.checkoutConfig.defaultCountryId,\r\n            delimiter: window.checkoutConfig.storePickupApiSearchTermDelimiter,\r\n            selectedLocation: pickupLocationsService.selectedLocation,\r\n            quoteIsVirtual: quote.isVirtual,\r\n            searchQuery: '',\r\n            nearbyLocations: null,\r\n            isLoading: pickupLocationsService.isLoading,\r\n            popup: null,\r\n            searchDebounceTimeout: 300,\r\n            imports: {\r\n                nearbySearchRadius: '${ $.parentName }:nearbySearchRadius',\r\n                nearbySearchLimit: '${ $.parentName }:nearbySearchLimit'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init component\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var updateNearbyLocations, country;\r\n\r\n            this._super();\r\n\r\n            updateNearbyLocations = _.debounce(function (searchQuery) {\r\n                country = quote.shippingAddress() && quote.shippingAddress().countryId ?\r\n                    quote.shippingAddress().countryId : this.defaultCountryId;\r\n                searchQuery = this.getSearchTerm(searchQuery, country);\r\n                this.updateNearbyLocations(searchQuery);\r\n            }, this.searchDebounceTimeout).bind(this);\r\n            this.searchQuery.subscribe(updateNearbyLocations);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init component observable variables\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            return this._super().observe(['nearbyLocations', 'searchQuery']);\r\n        },\r\n\r\n        /**\r\n         * Set shipping information handler\r\n         */\r\n        setPickupInformation: function () {\r\n            if (this.validatePickupInformation()) {\r\n                setShippingInformationAction().done(function () {\r\n                    stepNavigator.next();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPopup: function () {\r\n            if (!this.popup) {\r\n                this.popup = modal(\r\n                    this.popUpList.options,\r\n                    $(this.popUpList.element)\r\n                );\r\n            }\r\n\r\n            return this.popup;\r\n        },\r\n\r\n        /**\r\n         * Get Search Term from search query and country.\r\n         *\r\n         * @param {String} searchQuery\r\n         * @param {String} country\r\n         * @returns {String}\r\n         */\r\n        getSearchTerm: function (searchQuery, country) {\r\n            return searchQuery ? searchQuery + this.delimiter + country : searchQuery;\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        openPopup: function () {\r\n            var shippingAddress = quote.shippingAddress(),\r\n                country = shippingAddress.countryId ? shippingAddress.countryId :\r\n                this.defaultCountryId,\r\n                searchTerm = '';\r\n\r\n            this.getPopup().openModal();\r\n\r\n            if (shippingAddress.city && shippingAddress.postcode) {\r\n                searchTerm = this.getSearchTerm(shippingAddress.postcode, country);\r\n            }\r\n\r\n            this.updateNearbyLocations(searchTerm);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} location\r\n         * @returns void\r\n         */\r\n        selectPickupLocation: function (location) {\r\n            pickupLocationsService.selectForShipping(location);\r\n            this.getPopup().closeModal();\r\n        },\r\n\r\n        /**\r\n         * @param {Object} location\r\n         * @returns {*|Boolean}\r\n         */\r\n        isPickupLocationSelected: function (location) {\r\n            return _.isEqual(this.selectedLocation(), location);\r\n        },\r\n\r\n        /**\r\n         * @param {String} searchQuery\r\n         * @returns {*}\r\n         */\r\n        updateNearbyLocations: function (searchQuery) {\r\n            var self = this,\r\n                productsInfo = [],\r\n                items = quote.getItems(),\r\n                searchCriteria;\r\n\r\n            _.each(items, function (item) {\r\n                if (item['qty_options'] === undefined || item['qty_options'].length === 0) {\r\n                    productsInfo.push(\r\n                        {\r\n                            sku: item.sku\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n\r\n            searchCriteria = {\r\n                extensionAttributes: {\r\n                    productsInfo: productsInfo\r\n                },\r\n                pageSize: this.nearbySearchLimit\r\n            };\r\n\r\n            if (searchQuery) {\r\n                searchCriteria.area = {\r\n                    radius: this.nearbySearchRadius,\r\n                    searchTerm: searchQuery\r\n                };\r\n            }\r\n\r\n            return pickupLocationsService\r\n                .getNearbyLocations(searchCriteria)\r\n                .then(function (locations) {\r\n                    self.nearbyLocations(locations);\r\n                })\r\n                .fail(function () {\r\n                    self.nearbyLocations([]);\r\n                });\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        validatePickupInformation: function () {\r\n            var emailValidationResult,\r\n                loginFormSelector = this.loginFormSelector;\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = $(loginFormSelector + ' input[name=username]').valid() ? true : false;\r\n\r\n                if (!emailValidationResult) {\r\n                    $(this.loginFormSelector + ' input[name=username]').trigger('focus');\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/form/element/email.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery', 'Magento_Checkout/js/view/form/element/email'], function (\r\n    $,\r\n    Component\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template:\r\n                'Magento_InventoryInStorePickupFrontend/form/element/email',\r\n            links: {\r\n                email:\r\n                    'checkout.steps.shipping-step.shippingAddress.customer-email:email'\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_InventorySwatchesFrontendUi/js/swatch-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'configurableVariationQty',\r\n    'jquery-ui-modules/widget'\r\n], function ($, configurableVariationQty) {\r\n    'use strict';\r\n\r\n    return function (SwatchRenderer) {\r\n        $.widget('mage.SwatchRenderer', SwatchRenderer, {\r\n\r\n            /** @inheritdoc */\r\n            _OnClick: function ($this, widget) {\r\n                var salesChannel = this.options.jsonConfig.channel,\r\n                    salesChannelCode = this.options.jsonConfig.salesChannelCode,\r\n                    productVariationsSku = this.options.jsonConfig.sku;\r\n\r\n                this._super($this, widget);\r\n                configurableVariationQty(productVariationsSku[widget.getProductId()], salesChannel, salesChannelCode);\r\n            }\r\n        });\r\n\r\n        return $.mage.SwatchRenderer;\r\n    };\r\n});\r\n","Magento_LoginAsCustomerAssistance/js/opt-in.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('submit', function () {\r\n            this.elements['assistance_allowed'].value =\r\n                this.elements['assistance_allowed_checkbox'].checked ?\r\n                    config.allowAccess : config.denyAccess;\r\n        });\r\n    };\r\n});\r\n","Magento_LoginAsCustomerFrontendUi/js/login.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/section-config'\r\n], function ($, customerData, sectionConfig) {\r\n\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        customerData.reload(sectionConfig.getSectionNames()).done(function () {\r\n            window.location.href = config.redirectUrl;\r\n        });\r\n    };\r\n});\r\n","Magento_LoginAsCustomerFrontendUi/js/view/loginAsCustomer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/translate'\r\n], function ($, _, Component, customer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            isVisible: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var customerData, loggedAsCustomerData;\r\n\r\n            this._super();\r\n\r\n            customerData = customer.get('customer');\r\n            loggedAsCustomerData = customer.get('loggedAsCustomer');\r\n\r\n            customerData.subscribe(function (data) {\r\n                this.fullname = data.fullname;\r\n                this.updateBanner();\r\n            }.bind(this));\r\n            loggedAsCustomerData.subscribe(function (data) {\r\n                this.adminUserId = data.adminUserId;\r\n                this.websiteName = data.websiteName;\r\n                this.updateBanner();\r\n            }.bind(this));\r\n\r\n            this.fullname = customerData().fullname;\r\n            this.adminUserId = loggedAsCustomerData().adminUserId;\r\n            this.websiteName = loggedAsCustomerData().websiteName;\r\n\r\n            this.updateBanner();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['isVisible', 'notificationText']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update banner area\r\n         *\r\n         * @returns void\r\n         */\r\n        updateBanner: function () {\r\n            if (this.adminUserId !== undefined) {\r\n                this.isVisible(this.adminUserId);\r\n            }\r\n\r\n            if (this.fullname !== undefined && this.websiteName !== undefined) {\r\n                this.notificationText($.mage.__('You are connected as <strong>%1</strong> on %2')\r\n                    .replace('%1', _.escape(this.fullname))\r\n                    .replace('%2', _.escape(this.websiteName)));\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/msrp.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/price-utils',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/dropdown',\r\n    'mage/template'\r\n], function ($, priceUtils, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addToCart', {\r\n        options: {\r\n            showAddToCart: true,\r\n            submitUrl: '',\r\n            cartButtonId: '',\r\n            singleOpenDropDown: true,\r\n            dialog: {}, // Options for mage/dropdown\r\n            dialogDelay: 500, // Delay in ms after resize dropdown shown again\r\n            origin: '', //Required, type of popup: 'msrp', 'tier' or 'info' popup\r\n\r\n            // Selectors\r\n            cartForm: '.form.map.checkout',\r\n            msrpLabelId: '#map-popup-msrp',\r\n            msrpPriceElement: '#map-popup-msrp .price-wrapper',\r\n            priceLabelId: '#map-popup-price',\r\n            priceElement: '#map-popup-price .price',\r\n            mapInfoLinks: '.map-show-info',\r\n            displayPriceElement: '.old-price.map-old-price .price-wrapper',\r\n            fallbackPriceElement: '.normal-price.map-fallback-price .price-wrapper',\r\n            displayPriceContainer: '.old-price.map-old-price',\r\n            fallbackPriceContainer: '.normal-price.map-fallback-price',\r\n            popUpAttr: '[data-role=msrp-popup-template]',\r\n            popupCartButtonId: '#map-popup-button',\r\n            paypalCheckoutButons: '[data-action=checkout-form-submit]',\r\n            popupId: '',\r\n            realPrice: '',\r\n            isSaleable: '',\r\n            msrpPrice: '',\r\n            helpLinkId: '',\r\n            addToCartButton: '',\r\n\r\n            // Text options\r\n            productName: '',\r\n            addToCartUrl: ''\r\n        },\r\n\r\n        openDropDown: null,\r\n        triggerClass: 'dropdown-active',\r\n\r\n        popUpOptions: {\r\n            appendTo: 'body',\r\n            dialogContentClass: 'active',\r\n            closeOnMouseLeave: false,\r\n            autoPosition: true,\r\n            closeOnClickOutside: false,\r\n            'dialogClass': 'popup map-popup-wrapper',\r\n            position: {\r\n                my: 'left top',\r\n                collision: 'fit none',\r\n                at: 'left bottom',\r\n                within: 'body'\r\n            },\r\n            shadowHinter: 'popup popup-pointer'\r\n        },\r\n        popupOpened: false,\r\n        wasOpened: false,\r\n\r\n        /**\r\n         * Creates widget instance\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if (this.options.origin === 'msrp') {\r\n                this.initMsrpPopup();\r\n            } else if (this.options.origin === 'info') {\r\n                this.initInfoPopup();\r\n            } else if (this.options.origin === 'tier') {\r\n                this.initTierPopup();\r\n            }\r\n            $(this.options.cartButtonId).on('click', this._addToCartSubmit.bind(this));\r\n            $(document).on('updateMsrpPriceBlock', this.onUpdateMsrpPrice.bind(this));\r\n            $(this.options.cartForm).on('submit', this._onSubmitForm.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        initMsrpPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $msrpPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $msrpPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            $('body').append($msrpPopup);\r\n            $msrpPopup.trigger('contentUpdated');\r\n\r\n            $msrpPopup.find('button')\r\n                .on('click',\r\n                    this.handleMsrpAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $msrpPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleMsrpPaypalCheckout.bind(this));\r\n\r\n            $(this.options.popupId).on('click',\r\n                this.openPopup.bind(this));\r\n\r\n            this.$popup = $msrpPopup;\r\n        },\r\n\r\n        /**\r\n         * Init info popup\r\n         *\r\n         * @private\r\n         */\r\n        initInfoPopup: function () {\r\n            var infoPopupDOM = $('[data-role=msrp-info-template]')[0],\r\n                $infoPopup = $(infoPopupDOM.innerHTML.trim());\r\n\r\n            $('body').append($infoPopup);\r\n\r\n            $(this.options.helpLinkId).on('click', function (e) {\r\n                this.popUpOptions.position.of = $(e.target);\r\n                $infoPopup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n                this._toggle($infoPopup);\r\n            }.bind(this));\r\n\r\n            this.$popup = $infoPopup;\r\n        },\r\n\r\n        /**\r\n         * Init tier price popup\r\n         * @private\r\n         */\r\n        initTierPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $tierPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $('body').append($tierPopup);\r\n            $tierPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            this.popUpOptions.position.of = $(this.options.helpLinkId);\r\n\r\n            $tierPopup.find('button').on('click',\r\n                this.handleTierAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $tierPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleTierPaypalCheckout.bind(this));\r\n\r\n            $(this.options.attr).on('click', function (e) {\r\n                this.$popup = $tierPopup;\r\n                this.tierOptions = $(e.target).data('tier-price');\r\n                this.openPopup(e);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Msrp popup\r\n         * @param {Object} ev\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpPaypalCheckout: function () {\r\n            this.closePopup(this.$popup);\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Tier popup\r\n         *\r\n         * @param {Object} ev\r\n         * @private\r\n         */\r\n        handleTierAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton &&\r\n                this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Tier popup\r\n         *\r\n         * @private\r\n         */\r\n        handleTierPaypalCheckout: function () {\r\n            if (this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Open and set up popup\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        openPopup: function (event) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            this.popUpOptions.position.of = $(event.target);\r\n\r\n            if (!this.wasOpened) {\r\n                this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                this.wasOpened = true;\r\n            }\r\n            this.$popup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n            this._toggle(this.$popup);\r\n\r\n            if (!this.options.isSaleable) {\r\n                this.$popup.find('form').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggle MAP popup visibility\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         * @private\r\n         */\r\n        _toggle: function ($elem) {\r\n            $(document).on('mouseup.msrp touchend.msrp', function (e) {\r\n                if (!$elem.is(e.target) && $elem.has(e.target).length === 0) {\r\n                    this.closePopup($elem);\r\n                }\r\n            }.bind(this));\r\n            $(window).on('resize', function () {\r\n                this.closePopup($elem);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Close MAP information popup\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         */\r\n        closePopup: function ($elem) {\r\n            $elem.dropdownDialog('close');\r\n            $(document).off('mouseup.msrp touchend.msrp');\r\n        },\r\n\r\n        /**\r\n         * Handler for addToCart action\r\n         *\r\n         * @param {Object} e\r\n         */\r\n        _addToCartSubmit: function (e) {\r\n            this.element.trigger('addToCart', this.element);\r\n\r\n            if (this.element.data('stop-processing')) {\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartUrl) {\r\n                $('.mage-dropdown-dialog > .ui-dialog-content').dropdownDialog('close');\r\n            }\r\n\r\n            e.preventDefault();\r\n            $(this.options.cartForm).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Call on event updatePrice. Proxy to updateMsrpPrice method.\r\n         *\r\n         * @param {Event} event\r\n         * @param {mixed} priceIndex\r\n         * @param {Object} prices\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        onUpdateMsrpPrice: function onUpdateMsrpPrice(event, priceIndex, prices, $priceBox) {\r\n\r\n            var defaultMsrp,\r\n                defaultPrice,\r\n                msrpPrice,\r\n                finalPrice;\r\n\r\n            defaultMsrp = _.chain(prices).map(function (price) {\r\n                return price.msrpPrice.amount;\r\n            }).reject(function (p) {\r\n                return p === null;\r\n            }).max().value();\r\n\r\n            defaultPrice = _.chain(prices).map(function (p) {\r\n                return p.finalPrice.amount;\r\n            }).min().value();\r\n\r\n            if (typeof priceIndex !== 'undefined') {\r\n                msrpPrice = prices[priceIndex].msrpPrice.amount;\r\n                finalPrice = prices[priceIndex].finalPrice.amount;\r\n\r\n                if (msrpPrice === null || msrpPrice <= finalPrice) {\r\n                    this.updateNonMsrpPrice(priceUtils.formatPriceLocale(finalPrice), $priceBox);\r\n                } else {\r\n                    this.updateMsrpPrice(\r\n                        priceUtils.formatPriceLocale(finalPrice),\r\n                        priceUtils.formatPriceLocale(msrpPrice),\r\n                        false,\r\n                        $priceBox);\r\n                }\r\n            } else {\r\n                this.updateMsrpPrice(\r\n                    priceUtils.formatPriceLocale(defaultPrice),\r\n                    priceUtils.formatPriceLocale(defaultMsrp),\r\n                    true,\r\n                    $priceBox);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update prices for configurable product with MSRP enabled\r\n         *\r\n         * @param {String} finalPrice\r\n         * @param {String} msrpPrice\r\n         * @param {Boolean} useDefaultPrice\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateMsrpPrice: function (finalPrice, msrpPrice, useDefaultPrice, $priceBox) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            $(this.options.fallbackPriceContainer, $priceBox).hide();\r\n            $(this.options.displayPriceContainer, $priceBox).show();\r\n            $(this.options.mapInfoLinks, $priceBox).show();\r\n\r\n            if (useDefaultPrice || !this.wasOpened) {\r\n                if (this.$popup) {\r\n                    this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                    this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                }\r\n\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n                this.wasOpened = true;\r\n            }\r\n\r\n            if (!useDefaultPrice) {\r\n                this.$popup.find(this.options.msrpPriceElement).html(msrpPrice);\r\n                this.$popup.find(this.options.priceElement).html(finalPrice);\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display non MAP price for irrelevant products\r\n         *\r\n         * @param {String} price\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateNonMsrpPrice: function (price, $priceBox) {\r\n            $(this.options.fallbackPriceElement, $priceBox).html(price);\r\n            $(this.options.displayPriceContainer, $priceBox).hide();\r\n            $(this.options.mapInfoLinks, $priceBox).hide();\r\n            $(this.options.fallbackPriceContainer, $priceBox).show();\r\n        },\r\n\r\n        /**\r\n         * Handler for submit form\r\n         *\r\n         * @private\r\n         */\r\n        _onSubmitForm: function () {\r\n            if ($(this.options.cartForm).valid()) {\r\n                $(this.options.cartButtonId).prop('disabled', true);\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    return $.mage.addToCart;\r\n});\r\n","Magento_Msrp/js/product/list/columns/msrp-price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Catalog/js/product/list/columns/price-box',\r\n    'Magento_Catalog/js/product/addtocart-button',\r\n    'mage/dropdown'\r\n], function ($, _, PriceBox) {\r\n    'use strict';\r\n\r\n    return PriceBox.extend({\r\n        defaults: {\r\n            priceBoxSelector: '[data-role=msrp-price-box]',\r\n            popupTmpl: 'Magento_Msrp/product/item/popup',\r\n            popupTriggerSelector: '[data-role=msrp-popup-trigger]',\r\n            popupSelector: '[data-role=msrp-popup]',\r\n            popupOptions: {\r\n                appendTo: 'body',\r\n                dialogContentClass: 'active',\r\n                closeOnMouseLeave: false,\r\n                autoPosition: true,\r\n                dialogClass: 'popup map-popup-wrapper',\r\n                position: {\r\n                    my: 'left top',\r\n                    collision: 'fit none',\r\n                    at: 'left bottom',\r\n                    within: 'body'\r\n                },\r\n                shadowHinter: 'popup popup-pointer'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create and open popup with Msrp information.\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {DOMElement} elem - element\r\n         * @param {Event} event - event object\r\n         */\r\n        openPopup: function (data, elem, event) {\r\n            var $elem = $(elem),\r\n                $popup = $elem.find(this.popupSelector),\r\n                $trigger = $elem.find(this.popupTriggerSelector);\r\n\r\n            event.stopPropagation();\r\n\r\n            this.popupOptions.position.of = $trigger;\r\n            this.popupOptions.triggerTarget = $trigger;\r\n\r\n            $popup.dropdownDialog(this.popupOptions)\r\n                  .dropdownDialog('open');\r\n        },\r\n\r\n        /**\r\n         * Set listeners.\r\n         *\r\n         * @param {DOMElement} elem - DOM element\r\n         * @param {Object} data - element data\r\n         */\r\n        initListeners: function (elem, data) {\r\n            var $trigger = $(elem).find(this.popupTriggerSelector);\r\n\r\n            $trigger.on('click', this.openPopup.bind(this, data, elem));\r\n        },\r\n\r\n        /**\r\n         * Check whether we can apply msrp, or should use standard price.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Bool}\r\n         */\r\n        isMsrpApplicable: function (row) {\r\n            return this.getPrice(row)['is_applicable'];\r\n        },\r\n\r\n        /**\r\n         * Retrieve msrp formatted price\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getPrice: function (row) {\r\n            return row['price_info']['extension_attributes'].msrp;\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get msrp_price property of a price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getMsrpPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row)['msrp_price'];\r\n        },\r\n\r\n        /**\r\n         * Returns path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Check if popup with actual price must be shown.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isShowPriceOnGesture: function (row) {\r\n            return this.getPrice(row)['is_shown_price_on_gesture'];\r\n        },\r\n\r\n        /**\r\n         * Get msrp price supporting text.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getMsrpPriceMessage: function (row) {\r\n            return this.getPrice(row)['msrp_message'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMsrpPriceMessage.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getMsrpPriceMessageUnsanitizedHtml: function (row) {\r\n            return this.getMsrpPriceMessage(row);\r\n        },\r\n\r\n        /**\r\n         * Get msrp price supporting text, when actual price is hidden.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getExplanationMessage: function (row) {\r\n            return this.getPrice(row)['explanation_message'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getExplanationMessage.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getExplanationMessageUnsanitizedHtml: function (row) {\r\n            return this.getExplanationMessage(row);\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/minicart/subtotal/totals',\r\n    'underscore'\r\n], function (Component, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.displaySubtotal(this.isMsrpApplied(this.cart().items));\r\n            this.cart.subscribe(function (updatedCart) {\r\n\r\n                this.displaySubtotal(this.isMsrpApplied(updatedCart.items));\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Determine if subtotal should be hidden.\r\n         * @param {Array} cartItems\r\n         * @return {Boolean}\r\n         */\r\n        isMsrpApplied: function (cartItems) {\r\n            return !_.find(cartItems, function (item) {\r\n                if (_.has(item, 'canApplyMsrp')) {\r\n                    return item.canApplyMsrp;\r\n                }\r\n\r\n                return false;\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Multishipping/js/multi-shipping-balance.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/dataPost',\r\n    'jquery-ui-modules/widget'\r\n], function ($, dataPost) {\r\n    'use strict';\r\n\r\n    $.widget('mage.multiShippingBalance', {\r\n        options: {\r\n            changeUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize balance checkbox events.\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(function (event) {\r\n                dataPost().postData({\r\n                    action: this.options.changeUrl,\r\n                    data: {\r\n                        useBalance: +$(event.target).is(':checked')\r\n                    }\r\n                });\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.multiShippingBalance;\r\n});\r\n","Magento_Multishipping/js/multi-shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery-ui-modules/widget'\r\n], function ($, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.multiShipping', {\r\n        options: {\r\n            itemsQty: 0,\r\n            addNewAddressBtn: 'button[data-role=\"add-new-address\"]', // Add a new multishipping address.\r\n            addNewAddressFlag: '#add_new_address_flag', // Hidden input field with value 0 or 1.\r\n            canContinueBtn: 'button[data-role=\"can-continue\"]', // Continue (update quantity or go to shipping).\r\n            canContinueFlag: '#can_continue_flag' // Hidden input field with value 0 or 1.\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers to click events for corresponding buttons.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._prepareCartData();\r\n            $(this.options.addNewAddressBtn).on('click', $.proxy(this._addNewAddress, this));\r\n            $(this.options.canContinueBtn).on('click', $.proxy(this._canContinue, this));\r\n        },\r\n\r\n        /**\r\n         * Takes cart items qty from current cart data and compare it with current items qty\r\n         * Reloads cart data if cart items qty is wrong\r\n         * @private\r\n         */\r\n        _prepareCartData: function () {\r\n            var cartData = customerData.get('cart');\r\n\r\n            if (cartData()['summary_count'] !== this.options.itemsQty) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add a new address. Set the hidden input field and submit the form. Then enter a new shipping address.\r\n         * @private\r\n         */\r\n        _addNewAddress: function () {\r\n            $(this.options.addNewAddressFlag).val(1);\r\n            this.element.submit();\r\n        },\r\n\r\n        /**\r\n         * Can the user continue to the next step? The data-flag attribute holds either 0 (no) or 1 (yes).\r\n         * @private\r\n         * @param {Event} event - Click event on the corresponding button.\r\n         */\r\n        _canContinue: function (event) {\r\n            $(this.options.canContinueFlag).val(parseInt($(event.currentTarget).data('flag'), 10));\r\n        }\r\n    });\r\n\r\n    return $.mage.multiShipping;\r\n});\r\n","Magento_Multishipping/js/overview.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderOverview', {\r\n        options: {\r\n            opacity: 0.5, // CSS opacity for the 'Place Order' button when it's clicked and then disabled.\r\n            pleaseWaitLoader: 'span.please-wait', // 'Submitting order information...' Ajax loader.\r\n            placeOrderSubmit: 'button[type=\"submit\"]', // The 'Place Order' button.\r\n            agreements: '.checkout-agreements' // Container for all of the checkout agreements and terms/conditions\r\n        },\r\n\r\n        /**\r\n         * Bind a submit handler to the form.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('submit', $.proxy(this._showLoader, this));\r\n        },\r\n\r\n        /**\r\n         * Verify that all agreements and terms/conditions are checked. Show the Ajax loader. Disable\r\n         * the submit button (i.e. Place Order).\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _showLoader: function () {\r\n            if ($(this.options.agreements).find('input[type=\"checkbox\"]:not(:checked)').length > 0) {\r\n                return false;\r\n            }\r\n            this.element.find(this.options.pleaseWaitLoader).show().end()\r\n                .find(this.options.placeOrderSubmit).prop('disabled', true).css('opacity', this.options.opacity);\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    return $.mage.orderOverview;\r\n});\r\n","Magento_Multishipping/js/payment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, mageTemplate, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.payment', {\r\n        options: {\r\n            continueSelector: '#payment-continue',\r\n            methodsContainer: '#payment-methods',\r\n            minBalance: 0,\r\n            tmpl: '<input id=\"hidden-free\" type=\"hidden\" name=\"payment[method]\" value=\"free\">'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.element.find('dd [name^=\"payment[\"]').prop('disabled', true).end()\r\n                .on('click', this.options.continueSelector, $.proxy(this._submitHandler, this))\r\n                .on('updateCheckoutPrice', $.proxy(function (event, data) {\r\n                    //updating the checkoutPrice\r\n                    if (data.price) {\r\n                        this.options.checkoutPrice += data.price;\r\n                    }\r\n\r\n                    //updating total price\r\n                    if (data.totalPrice) {\r\n                        data.totalPrice = this.options.checkoutPrice;\r\n                    }\r\n\r\n                    if (this.options.checkoutPrice <= this.options.minBalance) {\r\n                        // Add free input field, hide and disable unchecked\r\n                        // checkbox payment method and all radio button payment methods\r\n                        this._disablePaymentMethods();\r\n                    } else {\r\n                        // Remove free input field, show all payment method\r\n                        this._enablePaymentMethods();\r\n                    }\r\n                }, this))\r\n                .on('click', 'dt input:radio', $.proxy(this._paymentMethodHandler, this));\r\n\r\n            if (this.options.checkoutPrice < this.options.minBalance) {\r\n                this._disablePaymentMethods();\r\n            } else {\r\n                this._enablePaymentMethods();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display payment details when payment method radio button is checked\r\n         * @private\r\n         * @param {EventObject} e\r\n         */\r\n        _paymentMethodHandler: function (e) {\r\n            var element = $(e.target),\r\n                parentsDl = element.closest('dl');\r\n\r\n            parentsDl.find('dt input:radio').prop('checked', false);\r\n            parentsDl.find('dd').addClass('no-display').end()\r\n                .find('.items').hide()\r\n                .find('[name^=\"payment[\"]').prop('disabled', true);\r\n            element.prop('checked', true).parent()\r\n                .next('dd').removeClass('no-display')\r\n                .find('.items').show().find('[name^=\"payment[\"]').prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * make sure one payment method is selected\r\n         * @private\r\n         * @return {Boolean}\r\n         */\r\n        _validatePaymentMethod: function () {\r\n            var methods = this.element.find('[name^=\"payment[\"]'),\r\n                isValid = false;\r\n\r\n            if (methods.length === 0) {\r\n                alert({\r\n                    content: $.mage.__('We can\\'t complete your order because you don\\'t have a payment method set up.')\r\n                });\r\n            } else if (this.options.checkoutPrice <= this.options.minBalance) {\r\n                isValid = true;\r\n            } else if (methods.filter('input:radio:checked').length) {\r\n                isValid = true;\r\n            } else {\r\n                alert({\r\n                    content: $.mage.__('Please choose a payment method.')\r\n                });\r\n            }\r\n\r\n            return isValid;\r\n        },\r\n\r\n        /**\r\n         * Disable and enable payment methods\r\n         * @private\r\n         */\r\n        _disablePaymentMethods: function () {\r\n            var tmpl = mageTemplate(this.options.tmpl, {\r\n                data: {}\r\n            });\r\n\r\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', true).end()\r\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', true).parent().hide();\r\n            this.element.find('[name=\"payment[method]\"][value=\"free\"]').parent('dt').remove();\r\n            this.element.find(this.options.methodsContainer).hide().find('[name^=\"payment[\"]').prop('disabled', true);\r\n\r\n            $(tmpl).appendTo(this.element);\r\n        },\r\n\r\n        /**\r\n         * Enable and enable payment methods\r\n         * @private\r\n         */\r\n        _enablePaymentMethods: function () {\r\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', false).end()\r\n                .find('dt input:radio:checked').trigger('click').end()\r\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', false).parent().show();\r\n            this.element.find(this.options.methodsContainer).show();\r\n        },\r\n\r\n        /**\r\n         * Returns checked payment method.\r\n         *\r\n         * @private\r\n         */\r\n        _getSelectedPaymentMethod: function () {\r\n            return this.element.find('input[name=\\'payment[method]\\']:checked');\r\n        },\r\n\r\n        /**\r\n         * Validate  before form submit\r\n         * @private\r\n         * @param {EventObject} e\r\n         */\r\n        _submitHandler: function (e) {\r\n            var currentMethod,\r\n                submitButton;\r\n\r\n            e.preventDefault();\r\n\r\n            if (this._validatePaymentMethod()) {\r\n                currentMethod = this._getSelectedPaymentMethod();\r\n                submitButton = currentMethod.parent().next('dd').find('button[type=submit]');\r\n\r\n                if (submitButton.length) {\r\n                    submitButton.first().trigger('click');\r\n                } else {\r\n                    this.element.trigger('submit');\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.payment;\r\n});\r\n","Magento_Newsletter/js/newsletter-sign-up.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'mage/url',\r\n    'subscriptionStatusResolver',\r\n    'mage/validation'\r\n], function ($, Component, urlBuilder, subscriptionStatusResolver) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            signUpElement: '',\r\n            submitButton: '',\r\n            element: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            this._super();\r\n            this.element = element;\r\n            $(element).on('change', $.proxy(this.updateSignUpStatus, this));\r\n            this.updateSignUpStatus();\r\n        },\r\n\r\n        /**\r\n         * Send status request and update subscription element according to result.\r\n         */\r\n        updateSignUpStatus: function () {\r\n            var element = $(this.element),\r\n                email = element.val(),\r\n                self = this,\r\n                newsletterSubscription;\r\n\r\n            if ($(self.signUpElement).is(':checked')) {\r\n                return;\r\n            }\r\n\r\n            if (!email || !$.validator.methods['validate-email'].call(this, email, element)) {\r\n                return;\r\n            }\r\n\r\n            newsletterSubscription = $.Deferred();\r\n\r\n            $(self.submitButton).prop('disabled', true);\r\n\r\n            subscriptionStatusResolver(email, newsletterSubscription);\r\n\r\n            $.when(newsletterSubscription).done(function (isSubscribed) {\r\n                if (isSubscribed) {\r\n                    $(self.signUpElement).prop('checked', true);\r\n                }\r\n            }).always(function () {\r\n                $(self.submitButton).prop('disabled', false);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Newsletter/js/subscription-status-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/url'\r\n], function ($, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (email, deferred) {\r\n        return $.getJSON(\r\n            urlBuilder.build('newsletter/ajax/status'),\r\n            {\r\n                email: email\r\n            }\r\n        ).done(function (response) {\r\n            if (response.errors) {\r\n                deferred.reject();\r\n            } else {\r\n                deferred.resolve(response.subscribed);\r\n            }\r\n        }).fail(function () {\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_OfflinePayments/js/view/payment/offline-payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'checkmo',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method'\r\n        },\r\n        {\r\n            type: 'banktransfer',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method'\r\n        },\r\n        {\r\n            type: 'cashondelivery',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method'\r\n        },\r\n        {\r\n            type: 'purchaseorder',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method'\r\n        }\r\n    );\r\n\r\n    /** Add view logic here if needed */\r\n    return Component.extend({});\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (ko, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/banktransfer'\r\n        },\r\n\r\n        /**\r\n         * Get value of instruction field.\r\n         * @returns {String}\r\n         */\r\n        getInstructions: function () {\r\n            return window.checkoutConfig.payment.instructions[this.item.method];\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/cashondelivery'\r\n        },\r\n\r\n        /**\r\n         * Returns payment method instructions.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getInstructions: function () {\r\n            return window.checkoutConfig.payment.instructions[this.item.method];\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/checkmo'\r\n        },\r\n\r\n        /**\r\n         * Returns send check to info.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getMailingAddress: function () {\r\n            return window.checkoutConfig.payment.checkmo.mailingAddress;\r\n        },\r\n\r\n        /**\r\n         * Returns payable to info.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getPayableTo: function () {\r\n            return window.checkoutConfig.payment.checkmo.payableTo;\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'jquery',\r\n    'mage/validation'\r\n], function (Component, $) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/purchaseorder-form',\r\n            purchaseOrderNumber: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('purchaseOrderNumber');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getData: function () {\r\n            return {\r\n                method: this.item.method,\r\n                'po_number': this.purchaseOrderNumber(),\r\n                'additional_data': null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {jQuery}\r\n         */\r\n        validate: function () {\r\n            var form = 'form[data-role=purchaseorder-form]';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'region_id': {\r\n                    'required': true\r\n                },\r\n                'region_id_input': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/flatrate',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/freeshipping',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/tablerate',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message, regionFields;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    regionFields = ['region', 'region_id', 'region_id_input'];\r\n\r\n                    if (\r\n                        $.inArray(field, regionFields) === -1 ||\r\n                        utils.isEmpty(address.region) && utils.isEmpty(address['region_id'])\r\n                    ) {\r\n                        self.validationErrors.push(message);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/flatrate',\r\n    '../../model/shipping-rates-validation-rules/flatrate'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    flatrateShippingRatesValidator,\r\n    flatrateShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('flatrate', flatrateShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('flatrate', flatrateShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/freeshipping',\r\n    '../../model/shipping-rates-validation-rules/freeshipping'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    freeshippingShippingRatesValidator,\r\n    freeshippingShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('freeshipping', freeshippingShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('freeshipping', freeshippingShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/tablerate',\r\n    '../../model/shipping-rates-validation-rules/tablerate'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    tablerateShippingRatesValidator,\r\n    tablerateShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('tablerate', tablerateShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('tablerate', tablerateShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_PageBuilder/js/events.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiEvents'], function (uiEvents) {\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Calls callback when name event is triggered\r\n         *\r\n         * @param {String} events\r\n         * @param {Function} callback\r\n         * @param {Function} ns\r\n         * @return {Object}\r\n         */\r\n        on: function (events, callback, ns) {\r\n            uiEvents.on('pagebuilder:' + events, callback, 'pagebuilder:' + ns);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Removed callback from listening to target event\r\n         *\r\n         * @param {String} ns\r\n         * @return {Object}\r\n         */\r\n        off: function (ns) {\r\n            uiEvents.off('pagebuilder:' + ns);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Triggers event and executes all attached callbacks\r\n         *\r\n         * @param {String} name\r\n         * @param {any} args\r\n         * @returns {Boolean}\r\n         */\r\n        trigger: function (name, args) {\r\n            return uiEvents.trigger('pagebuilder:' + name, args);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget-initializer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mage/apply/main',\r\n    'Magento_Ui/js/lib/view/utils/dom-observer'\r\n], function (_, $, mage, domObserver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Initializes components assigned to HTML elements.\r\n     *\r\n     *\r\n     * @param {HTMLElement} el\r\n     * @param {Array} data\r\n     * @param {Object} breakpoints\r\n     * @param {Object} currentViewport\r\n     */\r\n    function initializeWidget(el, data, breakpoints, currentViewport) {\r\n        _.each(data, function (config, component) {\r\n            config = config || {};\r\n            config.breakpoints = breakpoints;\r\n            config.currentViewport = currentViewport;\r\n            mage.applyFor(el, config, component);\r\n        });\r\n    }\r\n\r\n    return function (data, contextElement) {\r\n        _.each(data.config, function (componentConfiguration, elementPath) {\r\n            domObserver.get(\r\n                elementPath,\r\n                function (element) {\r\n                    var $element = $(element);\r\n\r\n                    if (contextElement) {\r\n                        $element = $(contextElement).find(element);\r\n                    }\r\n\r\n                    if ($element.length) {\r\n                        initializeWidget($element, componentConfiguration, data.breakpoints, data.currentViewport);\r\n                    }\r\n                }\r\n            );\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/banner/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_PageBuilder/js/widget/show-on-hover',\r\n    'Magento_PageBuilder/js/widget/video-background'\r\n], function (showOnHover, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var videoElement = element[0].querySelector('[data-background-type=video]');\r\n\r\n        showOnHover(config);\r\n\r\n        if (videoElement) {\r\n            videoBackground(config, videoElement);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/buttons/appearance/inline/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Equalize the width of a list of button-item components\r\n     *\r\n     * @param {JQuery} buttonList\r\n     */\r\n    var equalizeButtonWidth = function (buttonList) {\r\n        var buttonMinWidth = 0;\r\n\r\n        buttonList.css('min-width', buttonMinWidth);\r\n        buttonList.each(function () {\r\n            var buttonWidth = this.offsetWidth;\r\n\r\n            if (buttonWidth > buttonMinWidth) {\r\n                buttonMinWidth = buttonWidth;\r\n            }\r\n        });\r\n        buttonList.css('min-width', buttonMinWidth);\r\n    };\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            buttonSelector = '[data-element=\"link\"], [data-element=\"empty_link\"]';\r\n\r\n        if ($element.data('sameWidth')) {\r\n            equalizeButtonWidth($element.find(buttonSelector));\r\n            $(window).on('resize', function () {\r\n                equalizeButtonWidth($element.find(buttonSelector));\r\n            });\r\n            events.on('contentType:redrawAfter', function (eventData) {\r\n                if ($element.closest(eventData.element).length > 0) {\r\n                    equalizeButtonWidth($element.find(buttonSelector));\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/map/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/utils/map'\r\n], function ($, GoogleMap) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var locations,\r\n            controls,\r\n            mapOptions = {};\r\n\r\n        element = element[0];\r\n\r\n        if (element !== undefined && element.hasAttribute('data-locations')) {\r\n\r\n            /**\r\n             * Set map display to none if no locations\r\n             */\r\n            if (element.getAttribute('data-locations') === '[]') {\r\n                $(element).hide();\r\n\r\n                return;\r\n            }\r\n            locations = JSON.parse(element.getAttribute('data-locations'));\r\n            locations.forEach(function (location) {\r\n                location.position.latitude = parseFloat(location.position.latitude);\r\n                location.position.longitude = parseFloat(location.position.longitude);\r\n            });\r\n            controls = element.getAttribute('data-show-controls');\r\n            mapOptions.disableDefaultUI = controls !== 'true';\r\n            mapOptions.mapTypeControl = controls === 'true';\r\n            new GoogleMap(element, locations, mapOptions);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/products/appearance/carousel/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'matchMedia',\r\n    'Magento_PageBuilder/js/utils/breakpoints',\r\n    'Magento_PageBuilder/js/events',\r\n    'slick'\r\n], function ($, _, mediaCheck, breakpointsUtils, events) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Build slick\r\n     *\r\n     * @param {jQuery} $carouselElement\r\n     * @param {Object} config\r\n     */\r\n    function buildSlick($carouselElement, config) {\r\n        /**\r\n         * Prevent each slick slider from being initialized more than once which could throw an error.\r\n         */\r\n        if ($carouselElement.hasClass('slick-initialized')) {\r\n            $carouselElement.slick('unslick');\r\n        }\r\n\r\n        config.slidesToScroll = config.slidesToShow;\r\n        $carouselElement.slick(config);\r\n    }\r\n\r\n    /**\r\n     * Initialize slider.\r\n     *\r\n     * @param {jQuery} $element\r\n     * @param {Object} slickConfig\r\n     * @param {Object} breakpoint\r\n     */\r\n    function initSlider($element, slickConfig, breakpoint) {\r\n        var productCount = $element.find('.product-item').length,\r\n            $carouselElement = $($element.children()),\r\n            centerModeClass = 'center-mode',\r\n            carouselMode = $element.data('carousel-mode'),\r\n            slidesToShow = breakpoint.options.products[carouselMode] ?\r\n                breakpoint.options.products[carouselMode].slidesToShow :\r\n                breakpoint.options.products.default.slidesToShow;\r\n\r\n        slickConfig.slidesToShow = parseFloat(slidesToShow);\r\n\r\n        if (carouselMode === 'continuous' && productCount > slickConfig.slidesToShow) {\r\n            $element.addClass(centerModeClass);\r\n            slickConfig.centerPadding = $element.data('center-padding');\r\n            slickConfig.centerMode = true;\r\n        } else {\r\n            $element.removeClass(centerModeClass);\r\n            slickConfig.infinite = $element.data('infinite-loop');\r\n        }\r\n\r\n        buildSlick($carouselElement, slickConfig);\r\n    }\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            $carouselElement = $($element.children()),\r\n            currentViewport = config.currentViewport,\r\n            currentBreakpoint = config.breakpoints[currentViewport],\r\n            slickConfig = {\r\n                autoplay: $element.data('autoplay'),\r\n                autoplaySpeed: $element.data('autoplay-speed') || 0,\r\n                arrows: $element.data('show-arrows'),\r\n                dots: $element.data('show-dots')\r\n            };\r\n\r\n        _.each(config.breakpoints, function (breakpoint) {\r\n            mediaCheck({\r\n                media: breakpointsUtils.buildMedia(breakpoint.conditions),\r\n\r\n                /** @inheritdoc */\r\n                entry: function () {\r\n                    initSlider($element, slickConfig, breakpoint);\r\n                }\r\n            });\r\n        });\r\n\r\n        //initialize slider when content type is added in mobile viewport\r\n        if (currentViewport === 'mobile') {\r\n            initSlider($element, slickConfig, currentBreakpoint);\r\n        }\r\n\r\n        // Redraw slide after content type gets redrawn\r\n        events.on('contentType:redrawAfter', function (args) {\r\n            if ($carouselElement.closest(args.element).length) {\r\n                $carouselElement.slick('setPosition');\r\n            }\r\n        });\r\n\r\n        events.on('stage:viewportChangeAfter', function (args) {\r\n            var breakpoint = config.breakpoints[args.viewport];\r\n\r\n            initSlider($element, slickConfig, breakpoint);\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/row/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/widget/video-background',\r\n    'jarallax'\r\n], function ($, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            parallaxSpeed = null,\r\n            elementStyle = null;\r\n\r\n        if ($element.data('appearance') === 'contained') {\r\n            $element = $(element).find('[data-element=\"inner\"]');\r\n        }\r\n\r\n        if ($element.data('background-type') === 'video') {\r\n            videoBackground(config, $element[0]);\r\n\r\n            return;\r\n        }\r\n\r\n        if ($element.data('enableParallax') !== 1) {\r\n            return;\r\n        }\r\n\r\n        $element.addClass('jarallax');\r\n        $element.attr('data-jarallax', '');\r\n\r\n        parallaxSpeed = parseFloat($element.data('parallaxSpeed'));\r\n        elementStyle = window.getComputedStyle($element[0]);\r\n\r\n        window.jarallax($element[0], {\r\n            imgPosition: elementStyle.backgroundPosition || '50% 50%',\r\n            imgRepeat: elementStyle.backgroundRepeat || 'no-repeat',\r\n            imgSize: elementStyle.backgroundSize || 'cover',\r\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/slide/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_PageBuilder/js/widget/show-on-hover',\r\n    'Magento_PageBuilder/js/widget/video-background'\r\n], function ($, _, showOnHover, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var videoElement = element[0].querySelector('[data-background-type=video]'),\r\n            viewportElement = document.createElement('div'),\r\n            $slider = null;\r\n\r\n        showOnHover(config);\r\n\r\n        if (videoElement) {\r\n            $slider = $(element).closest('[data-content-type=slider]');\r\n            viewportElement.classList.add('jarallax-viewport-element');\r\n            videoElement.setAttribute('data-element-in-viewport', '.jarallax-viewport-element');\r\n            videoElement.appendChild(viewportElement);\r\n            videoBackground(config, videoElement);\r\n\r\n            if ($slider.data('afterChangeIsSet')) {\r\n                return;\r\n            }\r\n\r\n            $slider.on('afterChange init', function () {\r\n                var videoSlides = $slider[0].querySelectorAll('.jarallax');\r\n\r\n                _.each(videoSlides, function (videoSlide) {\r\n                    videoSlide.jarallax && videoSlide.jarallax.onScroll();\r\n                });\r\n            });\r\n            $slider.data('afterChangeIsSet', true);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/slider/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'slick'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    return function (config, sliderElement) {\r\n        var $element = $(sliderElement);\r\n\r\n        /**\r\n         * Prevent each slick slider from being initialized more than once which could throw an error.\r\n         */\r\n        if ($element.hasClass('slick-initialized')) {\r\n            $element.slick('unslick');\r\n        }\r\n\r\n        $element.slick({\r\n            autoplay: $element.data('autoplay'),\r\n            autoplaySpeed: $element.data('autoplay-speed') || 0,\r\n            fade: $element.data('fade'),\r\n            infinite: $element.data('infinite-loop'),\r\n            arrows: $element.data('show-arrows'),\r\n            dots: $element.data('show-dots')\r\n        });\r\n\r\n        // Redraw slide after content type gets redrawn\r\n        events.on('contentType:redrawAfter', function (args) {\r\n            if ($element.closest(args.element).length) {\r\n                $element.slick('setPosition');\r\n            }\r\n        });\r\n        // eslint-disable-next-line jquery-no-bind-unbind\r\n        events.on('stage:viewportChangeAfter', $element.slick.bind($element, 'setPosition'));\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/tabs/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'jquery-ui-modules/tabs'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element);\r\n\r\n        // Ignore stage builder preview tabs\r\n        if ($element.is('.pagebuilder-tabs')) {\r\n            return;\r\n        }\r\n\r\n        // Disambiguate between the mage/tabs component which is loaded randomly depending on requirejs order.\r\n        $.ui.tabs({\r\n            active: $element.data('activeTab') || 0,\r\n            create:\r\n\r\n                /**\r\n                 * Adjust the margin bottom of the navigation to correctly display the active tab\r\n                 */\r\n                function () {\r\n                    var borderWidth = parseInt($element.find('.tabs-content').css('borderWidth').toString(), 10);\r\n\r\n                    $element.find('.tabs-navigation').css('marginBottom', -borderWidth);\r\n                    $element.find('.tabs-navigation li:not(:first-child)').css('marginLeft', -borderWidth);\r\n                },\r\n            activate:\r\n\r\n                /**\r\n                 * Trigger redraw event since new content is being displayed\r\n                 */\r\n                function () {\r\n                    events.trigger('contentType:redrawAfter', {\r\n                        element: element\r\n                    });\r\n                }\r\n        }, element);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/resource/jarallax/jarallax-video.js":"/*!\r\n * Video Extension for Jarallax v2.0.3 (https://github.com/nk-o/jarallax)\r\n * Copyright 2022 nK <https://nkdev.info>\r\n * Licensed under MIT (https://github.com/nk-o/jarallax/blob/master/LICENSE)\r\n */\r\n\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n      typeof define === 'function' && define.amd ? define(factory) :\r\n          (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.jarallaxVideo = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  /*!\r\n   * Name    : Video Worker\r\n   * Version : 2.0.0\r\n   * Author  : nK <https://nkdev.info>\r\n   * GitHub  : https://github.com/nk-o/video-worker\r\n   */\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win$1;\r\n\r\n  if (typeof window !== 'undefined') {\r\n    win$1 = window;\r\n  } else if (typeof global !== 'undefined') {\r\n    win$1 = global;\r\n  } else if (typeof self !== 'undefined') {\r\n    win$1 = self;\r\n  } else {\r\n    win$1 = {};\r\n  }\r\n\r\n  var global$1$1 = win$1; // Deferred\r\n  // thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\r\n\r\n  function Deferred() {\r\n    this.doneCallbacks = [];\r\n    this.failCallbacks = [];\r\n  }\r\n\r\n  Deferred.prototype = {\r\n    execute(list, args) {\r\n      let i = list.length; // eslint-disable-next-line no-param-reassign\r\n\r\n      args = Array.prototype.slice.call(args);\r\n\r\n      while (i) {\r\n        i -= 1;\r\n        list[i].apply(null, args);\r\n      }\r\n    },\r\n\r\n    resolve(...args) {\r\n      this.execute(this.doneCallbacks, args);\r\n    },\r\n\r\n    reject(...args) {\r\n      this.execute(this.failCallbacks, args);\r\n    },\r\n\r\n    done(callback) {\r\n      this.doneCallbacks.push(callback);\r\n    },\r\n\r\n    fail(callback) {\r\n      this.failCallbacks.push(callback);\r\n    }\r\n\r\n  };\r\n  let ID = 0;\r\n  let YoutubeAPIadded = 0;\r\n  let VimeoAPIadded = 0;\r\n  let loadingYoutubePlayer = 0;\r\n  let loadingVimeoPlayer = 0;\r\n  const loadingYoutubeDefer = /*#__PURE__*/new Deferred();\r\n  const loadingVimeoDefer = /*#__PURE__*/new Deferred();\r\n\r\n  class VideoWorker {\r\n    constructor(url, options) {\r\n      const self = this;\r\n      self.url = url;\r\n      self.options_default = {\r\n        autoplay: false,\r\n        loop: false,\r\n        mute: false,\r\n        volume: 100,\r\n        showControls: true,\r\n        accessibilityHidden: false,\r\n        // start / end video time in seconds\r\n        startTime: 0,\r\n        endTime: 0\r\n      };\r\n      self.options = self.extend({}, self.options_default, options); // Fix wrong option name.\r\n      // Thanks to https://github.com/nk-o/video-worker/issues/13.\r\n\r\n      if (typeof self.options.showContols !== 'undefined') {\r\n        self.options.showControls = self.options.showContols;\r\n        delete self.options.showContols;\r\n      } // check URL\r\n\r\n\r\n      self.videoID = self.parseURL(url); // init\r\n\r\n      if (self.videoID) {\r\n        self.ID = ID;\r\n        ID += 1;\r\n        self.loadAPI();\r\n        self.init();\r\n      }\r\n    } // Extend like jQuery.extend\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    extend(...args) {\r\n      const out = args[0] || {};\r\n      Object.keys(args).forEach(i => {\r\n        if (!args[i]) {\r\n          return;\r\n        }\r\n\r\n        Object.keys(args[i]).forEach(key => {\r\n          out[key] = args[i][key];\r\n        });\r\n      });\r\n      return out;\r\n    }\r\n\r\n    parseURL(url) {\r\n      // parse youtube ID\r\n      function getYoutubeID(ytUrl) {\r\n        // eslint-disable-next-line no-useless-escape\r\n        const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\r\n        const match = ytUrl.match(regExp);\r\n        return match && match[1].length === 11 ? match[1] : false;\r\n      } // parse vimeo ID\r\n\r\n\r\n      function getVimeoID(vmUrl) {\r\n        // eslint-disable-next-line no-useless-escape\r\n        const regExp = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\r\n        const match = vmUrl.match(regExp);\r\n        return match && match[3] ? match[3] : false;\r\n      } // parse local string\r\n\r\n\r\n      function getLocalVideos(locUrl) {\r\n        // eslint-disable-next-line no-useless-escape\r\n        const videoFormats = locUrl.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\r\n        const result = {};\r\n        let ready = 0;\r\n        videoFormats.forEach(val => {\r\n          // eslint-disable-next-line no-useless-escape\r\n          const match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\r\n\r\n          if (match && match[1] && match[2]) {\r\n            // eslint-disable-next-line prefer-destructuring\r\n            result[match[1] === 'ogv' ? 'ogg' : match[1]] = match[2];\r\n            ready = 1;\r\n          }\r\n        });\r\n        return ready ? result : false;\r\n      }\r\n\r\n      const Youtube = getYoutubeID(url);\r\n      const Vimeo = getVimeoID(url);\r\n      const Local = getLocalVideos(url);\r\n\r\n      if (Youtube) {\r\n        this.type = 'youtube';\r\n        return Youtube;\r\n      }\r\n\r\n      if (Vimeo) {\r\n        this.type = 'vimeo';\r\n        return Vimeo;\r\n      }\r\n\r\n      if (Local) {\r\n        this.type = 'local';\r\n        return Local;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    isValid() {\r\n      return !!this.videoID;\r\n    } // events\r\n\r\n\r\n    on(name, callback) {\r\n      this.userEventsList = this.userEventsList || []; // add new callback in events list\r\n\r\n      (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\r\n    }\r\n\r\n    off(name, callback) {\r\n      if (!this.userEventsList || !this.userEventsList[name]) {\r\n        return;\r\n      }\r\n\r\n      if (!callback) {\r\n        delete this.userEventsList[name];\r\n      } else {\r\n        this.userEventsList[name].forEach((val, key) => {\r\n          if (val === callback) {\r\n            this.userEventsList[name][key] = false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    fire(name, ...args) {\r\n      if (this.userEventsList && typeof this.userEventsList[name] !== 'undefined') {\r\n        this.userEventsList[name].forEach(val => {\r\n          // call with all arguments\r\n          if (val) {\r\n            val.apply(this, args);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    play(start) {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.playVideo) {\r\n        if (typeof start !== 'undefined') {\r\n          self.player.seekTo(start || 0);\r\n        }\r\n\r\n        if (global$1$1.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\r\n          self.player.playVideo();\r\n        }\r\n      }\r\n\r\n      if (self.type === 'vimeo') {\r\n        if (typeof start !== 'undefined') {\r\n          self.player.setCurrentTime(start);\r\n        }\r\n\r\n        self.player.getPaused().then(paused => {\r\n          if (paused) {\r\n            self.player.play();\r\n          }\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        if (typeof start !== 'undefined') {\r\n          self.player.currentTime = start;\r\n        }\r\n\r\n        if (self.player.paused) {\r\n          self.player.play();\r\n        }\r\n      }\r\n    }\r\n\r\n    pause() {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.pauseVideo) {\r\n        if (global$1$1.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\r\n          self.player.pauseVideo();\r\n        }\r\n      }\r\n\r\n      if (self.type === 'vimeo') {\r\n        self.player.getPaused().then(paused => {\r\n          if (!paused) {\r\n            self.player.pause();\r\n          }\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        if (!self.player.paused) {\r\n          self.player.pause();\r\n        }\r\n      }\r\n    }\r\n\r\n    mute() {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.mute) {\r\n        self.player.mute();\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.setVolume) {\r\n        self.player.setVolume(0);\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        self.$video.muted = true;\r\n      }\r\n    }\r\n\r\n    unmute() {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.mute) {\r\n        self.player.unMute();\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.setVolume) {\r\n        self.player.setVolume(self.options.volume);\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        self.$video.muted = false;\r\n      }\r\n    }\r\n\r\n    setVolume(volume = false) {\r\n      const self = this;\r\n\r\n      if (!self.player || !volume) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.setVolume) {\r\n        self.player.setVolume(volume);\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.setVolume) {\r\n        self.player.setVolume(volume);\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        self.$video.volume = volume / 100;\r\n      }\r\n    }\r\n\r\n    getVolume(callback) {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        callback(false);\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.getVolume) {\r\n        callback(self.player.getVolume());\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.getVolume) {\r\n        self.player.getVolume().then(volume => {\r\n          callback(volume);\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        callback(self.$video.volume * 100);\r\n      }\r\n    }\r\n\r\n    getMuted(callback) {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        callback(null);\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.isMuted) {\r\n        callback(self.player.isMuted());\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.getVolume) {\r\n        self.player.getVolume().then(volume => {\r\n          callback(!!volume);\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        callback(self.$video.muted);\r\n      }\r\n    }\r\n\r\n    getImageURL(callback) {\r\n      const self = this;\r\n\r\n      if (self.videoImage) {\r\n        callback(self.videoImage);\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube') {\r\n        const availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\r\n        let step = 0;\r\n        const tempImg = new Image();\r\n\r\n        tempImg.onload = function () {\r\n          // if no thumbnail, youtube add their own image with width = 120px\r\n          if ((this.naturalWidth || this.width) !== 120 || step === availableSizes.length - 1) {\r\n            // ok\r\n            self.videoImage = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\r\n            callback(self.videoImage);\r\n          } else {\r\n            // try another size\r\n            step += 1;\r\n            this.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\r\n          }\r\n        };\r\n\r\n        tempImg.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\r\n      }\r\n\r\n      if (self.type === 'vimeo') {\r\n        let request = new XMLHttpRequest(); // https://vimeo.com/api/oembed.json?url=https://vimeo.com/235212527\r\n\r\n        request.open('GET', `https://vimeo.com/api/oembed.json?url=${self.url}`, true);\r\n\r\n        request.onreadystatechange = function () {\r\n          if (this.readyState === 4) {\r\n            if (this.status >= 200 && this.status < 400) {\r\n              // Success!\r\n              const response = JSON.parse(this.responseText);\r\n\r\n              if (response.thumbnail_url) {\r\n                self.videoImage = response.thumbnail_url;\r\n                callback(self.videoImage);\r\n              }\r\n            }\r\n          }\r\n        };\r\n\r\n        request.send();\r\n        request = null;\r\n      }\r\n    } // fallback to the old version.\r\n\r\n\r\n    getIframe(callback) {\r\n      this.getVideo(callback);\r\n    }\r\n\r\n    getVideo(callback) {\r\n      const self = this; // return generated video block\r\n\r\n      if (self.$video) {\r\n        callback(self.$video);\r\n        return;\r\n      } // generate new video block\r\n\r\n\r\n      self.onAPIready(() => {\r\n        let hiddenDiv;\r\n\r\n        if (!self.$video) {\r\n          hiddenDiv = document.createElement('div');\r\n          hiddenDiv.style.display = 'none';\r\n        } // Youtube\r\n\r\n\r\n        if (self.type === 'youtube') {\r\n          self.playerOptions = {\r\n            // GDPR Compliance.\r\n            host: 'https://www.youtube-nocookie.com',\r\n            videoId: self.videoID,\r\n            playerVars: {\r\n              autohide: 1,\r\n              rel: 0,\r\n              autoplay: 0,\r\n              // autoplay enable on mobile devices\r\n              playsinline: 1\r\n            }\r\n          }; // hide controls\r\n\r\n          if (!self.options.showControls) {\r\n            self.playerOptions.playerVars.iv_load_policy = 3;\r\n            self.playerOptions.playerVars.modestbranding = 1;\r\n            self.playerOptions.playerVars.controls = 0;\r\n            self.playerOptions.playerVars.showinfo = 0;\r\n            self.playerOptions.playerVars.disablekb = 1;\r\n          } // events\r\n\r\n\r\n          let ytStarted;\r\n          let ytProgressInterval;\r\n          self.playerOptions.events = {\r\n            onReady(e) {\r\n              // mute\r\n              if (self.options.mute) {\r\n                e.target.mute();\r\n              } else if (self.options.volume) {\r\n                e.target.setVolume(self.options.volume);\r\n              } // autoplay\r\n\r\n\r\n              if (self.options.autoplay) {\r\n                self.play(self.options.startTime);\r\n              }\r\n\r\n              self.fire('ready', e); // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\r\n              // https://github.com/nk-o/video-worker/issues/2\r\n\r\n              if (self.options.loop && !self.options.endTime) {\r\n                const secondsOffset = 0.1;\r\n                self.options.endTime = self.player.getDuration() - secondsOffset;\r\n              } // volumechange\r\n\r\n\r\n              setInterval(() => {\r\n                self.getVolume(volume => {\r\n                  if (self.options.volume !== volume) {\r\n                    self.options.volume = volume;\r\n                    self.fire('volumechange', e);\r\n                  }\r\n                });\r\n              }, 150);\r\n            },\r\n\r\n            onStateChange(e) {\r\n              // loop\r\n              if (self.options.loop && e.data === global$1$1.YT.PlayerState.ENDED) {\r\n                self.play(self.options.startTime);\r\n              }\r\n\r\n              if (!ytStarted && e.data === global$1$1.YT.PlayerState.PLAYING) {\r\n                ytStarted = 1;\r\n                self.fire('started', e);\r\n              }\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.PLAYING) {\r\n                self.fire('play', e);\r\n              }\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.PAUSED) {\r\n                self.fire('pause', e);\r\n              }\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.ENDED) {\r\n                self.fire('ended', e);\r\n              } // progress check\r\n\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.PLAYING) {\r\n                ytProgressInterval = setInterval(() => {\r\n                  self.fire('timeupdate', e); // check for end of video and play again or stop\r\n\r\n                  if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\r\n                    if (self.options.loop) {\r\n                      self.play(self.options.startTime);\r\n                    } else {\r\n                      self.pause();\r\n                    }\r\n                  }\r\n                }, 150);\r\n              } else {\r\n                clearInterval(ytProgressInterval);\r\n              }\r\n            },\r\n\r\n            onError(e) {\r\n              self.fire('error', e);\r\n            }\r\n\r\n          };\r\n          const firstInit = !self.$video;\r\n\r\n          if (firstInit) {\r\n            const div = document.createElement('div');\r\n            div.setAttribute('id', self.playerID);\r\n            hiddenDiv.appendChild(div);\r\n            document.body.appendChild(hiddenDiv);\r\n          }\r\n\r\n          self.player = self.player || new global$1$1.YT.Player(self.playerID, self.playerOptions);\r\n\r\n          if (firstInit) {\r\n            self.$video = document.getElementById(self.playerID); // add accessibility attributes\r\n\r\n            if (self.options.accessibilityHidden) {\r\n              self.$video.setAttribute('tabindex', '-1');\r\n              self.$video.setAttribute('aria-hidden', 'true');\r\n            } // get video width and height\r\n\r\n\r\n            self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\r\n            self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\r\n          }\r\n        } // Vimeo\r\n\r\n\r\n        if (self.type === 'vimeo') {\r\n          self.playerOptions = {\r\n            // GDPR Compliance.\r\n            dnt: 1,\r\n            id: self.videoID,\r\n            autopause: 0,\r\n            transparent: 0,\r\n            autoplay: self.options.autoplay ? 1 : 0,\r\n            loop: self.options.loop ? 1 : 0,\r\n            muted: self.options.mute ? 1 : 0\r\n          };\r\n\r\n          if (self.options.volume) {\r\n            self.playerOptions.volume = self.options.volume;\r\n          } // hide controls\r\n\r\n\r\n          if (!self.options.showControls) {\r\n            self.playerOptions.badge = 0;\r\n            self.playerOptions.byline = 0;\r\n            self.playerOptions.portrait = 0;\r\n            self.playerOptions.title = 0;\r\n            self.playerOptions.background = 1;\r\n          }\r\n\r\n          if (!self.$video) {\r\n            let playerOptionsString = '';\r\n            Object.keys(self.playerOptions).forEach(key => {\r\n              if (playerOptionsString !== '') {\r\n                playerOptionsString += '&';\r\n              }\r\n\r\n              playerOptionsString += `${key}=${encodeURIComponent(self.playerOptions[key])}`;\r\n            }); // we need to create iframe manually because when we create it using API\r\n            // js events won't triggers after iframe moved to another place\r\n\r\n            self.$video = document.createElement('iframe');\r\n            self.$video.setAttribute('id', self.playerID);\r\n            self.$video.setAttribute('src', `https://player.vimeo.com/video/${self.videoID}?${playerOptionsString}`);\r\n            self.$video.setAttribute('frameborder', '0');\r\n            self.$video.setAttribute('mozallowfullscreen', '');\r\n            self.$video.setAttribute('allowfullscreen', '');\r\n            self.$video.setAttribute('title', 'Vimeo video player'); // add accessibility attributes\r\n\r\n            if (self.options.accessibilityHidden) {\r\n              self.$video.setAttribute('tabindex', '-1');\r\n              self.$video.setAttribute('aria-hidden', 'true');\r\n            }\r\n\r\n            hiddenDiv.appendChild(self.$video);\r\n            document.body.appendChild(hiddenDiv);\r\n          }\r\n\r\n          self.player = self.player || new global$1$1.Vimeo.Player(self.$video, self.playerOptions); // set current time for autoplay\r\n\r\n          if (self.options.startTime && self.options.autoplay) {\r\n            self.player.setCurrentTime(self.options.startTime);\r\n          } // get video width and height\r\n\r\n\r\n          self.player.getVideoWidth().then(width => {\r\n            self.videoWidth = width || 1280;\r\n          });\r\n          self.player.getVideoHeight().then(height => {\r\n            self.videoHeight = height || 720;\r\n          }); // events\r\n\r\n          let vmStarted;\r\n          self.player.on('timeupdate', e => {\r\n            if (!vmStarted) {\r\n              self.fire('started', e);\r\n              vmStarted = 1;\r\n            }\r\n\r\n            self.fire('timeupdate', e); // check for end of video and play again or stop\r\n\r\n            if (self.options.endTime) {\r\n              if (self.options.endTime && e.seconds >= self.options.endTime) {\r\n                if (self.options.loop) {\r\n                  self.play(self.options.startTime);\r\n                } else {\r\n                  self.pause();\r\n                }\r\n              }\r\n            }\r\n          });\r\n          self.player.on('play', e => {\r\n            self.fire('play', e); // check for the start time and start with it\r\n\r\n            if (self.options.startTime && e.seconds === 0) {\r\n              self.play(self.options.startTime);\r\n            }\r\n          });\r\n          self.player.on('pause', e => {\r\n            self.fire('pause', e);\r\n          });\r\n          self.player.on('ended', e => {\r\n            self.fire('ended', e);\r\n          });\r\n          self.player.on('loaded', e => {\r\n            self.fire('ready', e);\r\n          });\r\n          self.player.on('volumechange', e => {\r\n            self.fire('volumechange', e);\r\n          });\r\n          self.player.on('error', e => {\r\n            self.fire('error', e);\r\n          });\r\n        } // Local\r\n\r\n\r\n        function addSourceToLocal(element, src, type) {\r\n          const source = document.createElement('source');\r\n          source.src = src;\r\n          source.type = type;\r\n          element.appendChild(source);\r\n        }\r\n\r\n        if (self.type === 'local') {\r\n          if (!self.$video) {\r\n            self.$video = document.createElement('video'); // show controls\r\n\r\n            if (self.options.showControls) {\r\n              self.$video.controls = true;\r\n            } // mute\r\n\r\n\r\n            if (self.options.mute) {\r\n              self.$video.muted = true;\r\n            } else if (self.$video.volume) {\r\n              self.$video.volume = self.options.volume / 100;\r\n            } // loop\r\n\r\n\r\n            if (self.options.loop) {\r\n              self.$video.loop = true;\r\n            } // autoplay enable on mobile devices\r\n\r\n\r\n            self.$video.setAttribute('playsinline', '');\r\n            self.$video.setAttribute('webkit-playsinline', ''); // add accessibility attributes\r\n\r\n            if (self.options.accessibilityHidden) {\r\n              self.$video.setAttribute('tabindex', '-1');\r\n              self.$video.setAttribute('aria-hidden', 'true');\r\n            }\r\n\r\n            self.$video.setAttribute('id', self.playerID);\r\n            hiddenDiv.appendChild(self.$video);\r\n            document.body.appendChild(hiddenDiv);\r\n            Object.keys(self.videoID).forEach(key => {\r\n              addSourceToLocal(self.$video, self.videoID[key], `video/${key}`);\r\n            });\r\n          }\r\n\r\n          self.player = self.player || self.$video;\r\n          let locStarted;\r\n          self.player.addEventListener('playing', e => {\r\n            if (!locStarted) {\r\n              self.fire('started', e);\r\n            }\r\n\r\n            locStarted = 1;\r\n          });\r\n          self.player.addEventListener('timeupdate', function (e) {\r\n            self.fire('timeupdate', e); // check for end of video and play again or stop\r\n\r\n            if (self.options.endTime) {\r\n              if (self.options.endTime && this.currentTime >= self.options.endTime) {\r\n                if (self.options.loop) {\r\n                  self.play(self.options.startTime);\r\n                } else {\r\n                  self.pause();\r\n                }\r\n              }\r\n            }\r\n          });\r\n          self.player.addEventListener('play', e => {\r\n            self.fire('play', e);\r\n          });\r\n          self.player.addEventListener('pause', e => {\r\n            self.fire('pause', e);\r\n          });\r\n          self.player.addEventListener('ended', e => {\r\n            self.fire('ended', e);\r\n          });\r\n          self.player.addEventListener('loadedmetadata', function () {\r\n            // get video width and height\r\n            self.videoWidth = this.videoWidth || 1280;\r\n            self.videoHeight = this.videoHeight || 720;\r\n            self.fire('ready'); // autoplay\r\n\r\n            if (self.options.autoplay) {\r\n              self.play(self.options.startTime);\r\n            }\r\n          });\r\n          self.player.addEventListener('volumechange', e => {\r\n            self.getVolume(volume => {\r\n              self.options.volume = volume;\r\n            });\r\n            self.fire('volumechange', e);\r\n          });\r\n          self.player.addEventListener('error', e => {\r\n            self.fire('error', e);\r\n          });\r\n        }\r\n\r\n        callback(self.$video);\r\n      });\r\n    }\r\n\r\n    init() {\r\n      const self = this;\r\n      self.playerID = `VideoWorker-${self.ID}`;\r\n    }\r\n\r\n    loadAPI() {\r\n      const self = this;\r\n\r\n      if (YoutubeAPIadded && VimeoAPIadded) {\r\n        return;\r\n      }\r\n\r\n      let src = ''; // load Youtube API\r\n\r\n      if (self.type === 'youtube' && !YoutubeAPIadded) {\r\n        YoutubeAPIadded = 1;\r\n        src = 'https://www.youtube.com/iframe_api';\r\n      } // load Vimeo API\r\n\r\n\r\n      if (self.type === 'vimeo' && !VimeoAPIadded) {\r\n        VimeoAPIadded = 1; // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\r\n\r\n        if (typeof global$1$1.Vimeo !== 'undefined') {\r\n          return;\r\n        }\r\n\r\n        src = 'https://player.vimeo.com/api/player.js';\r\n      }\r\n\r\n      if (!src) {\r\n        return;\r\n      } // add script in head section\r\n\r\n\r\n      let tag = document.createElement('script');\r\n      let head = document.getElementsByTagName('head')[0];\r\n      tag.src = src;\r\n      head.appendChild(tag);\r\n      head = null;\r\n      tag = null;\r\n    }\r\n\r\n    onAPIready(callback) {\r\n      const self = this; // Youtube\r\n\r\n      if (self.type === 'youtube') {\r\n        // Listen for global YT player callback\r\n        if ((typeof global$1$1.YT === 'undefined' || global$1$1.YT.loaded === 0) && !loadingYoutubePlayer) {\r\n          // Prevents Ready event from being called twice\r\n          loadingYoutubePlayer = 1; // Creates deferred so, other players know when to wait.\r\n\r\n          global$1$1.onYouTubeIframeAPIReady = function () {\r\n            global$1$1.onYouTubeIframeAPIReady = null;\r\n            loadingYoutubeDefer.resolve('done');\r\n            callback();\r\n          };\r\n        } else if (typeof global$1$1.YT === 'object' && global$1$1.YT.loaded === 1) {\r\n          callback();\r\n        } else {\r\n          loadingYoutubeDefer.done(() => {\r\n            callback();\r\n          });\r\n        }\r\n      } // Vimeo\r\n\r\n\r\n      if (self.type === 'vimeo') {\r\n        if (typeof global$1$1.Vimeo === 'undefined' && !loadingVimeoPlayer) {\r\n          loadingVimeoPlayer = 1;\r\n          const vimeoInterval = setInterval(() => {\r\n            if (typeof global$1$1.Vimeo !== 'undefined') {\r\n              clearInterval(vimeoInterval);\r\n              loadingVimeoDefer.resolve('done');\r\n              callback();\r\n            }\r\n          }, 20);\r\n        } else if (typeof global$1$1.Vimeo !== 'undefined') {\r\n          callback();\r\n        } else {\r\n          loadingVimeoDefer.done(() => {\r\n            callback();\r\n          });\r\n        }\r\n      } // Local\r\n\r\n\r\n      if (self.type === 'local') {\r\n        callback();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  function ready(callback) {\r\n    if ('complete' === document.readyState || 'interactive' === document.readyState) {\r\n      // Already ready or interactive, execute callback\r\n      callback();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', callback, {\r\n        capture: true,\r\n        once: true,\r\n        passive: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win;\r\n\r\n  if ('undefined' !== typeof window) {\r\n    win = window;\r\n  } else if ('undefined' !== typeof global) {\r\n    win = global;\r\n  } else if ('undefined' !== typeof self) {\r\n    win = self;\r\n  } else {\r\n    win = {};\r\n  }\r\n\r\n  var global$1 = win;\r\n\r\n  function jarallaxVideo(jarallax = global$1.jarallax) {\r\n    if ('undefined' === typeof jarallax) {\r\n      return;\r\n    }\r\n\r\n    const Jarallax = jarallax.constructor; // append video after when block will be visible.\r\n\r\n    const defOnScroll = Jarallax.prototype.onScroll;\r\n\r\n    Jarallax.prototype.onScroll = function () {\r\n      const self = this;\r\n      defOnScroll.apply(self);\r\n      const isReady = !self.isVideoInserted && self.video && (!self.options.videoLazyLoading || self.isElementInViewport) && !self.options.disableVideo();\r\n\r\n      if (isReady) {\r\n        self.isVideoInserted = true;\r\n        self.video.getVideo(video => {\r\n          const $parent = video.parentNode;\r\n          self.css(video, {\r\n            position: self.image.position,\r\n            top: '0px',\r\n            left: '0px',\r\n            right: '0px',\r\n            bottom: '0px',\r\n            width: '100%',\r\n            height: '100%',\r\n            maxWidth: 'none',\r\n            maxHeight: 'none',\r\n            pointerEvents: 'none',\r\n            transformStyle: 'preserve-3d',\r\n            backfaceVisibility: 'hidden',\r\n            willChange: 'transform,opacity',\r\n            margin: 0,\r\n            zIndex: -1\r\n          });\r\n          self.$video = video; // add Poster attribute to self-hosted video\r\n\r\n          if ('local' === self.video.type) {\r\n            if (self.image.src) {\r\n              self.$video.setAttribute('poster', self.image.src);\r\n            } else if (self.image.$item && 'IMG' === self.image.$item.tagName && self.image.$item.src) {\r\n              self.$video.setAttribute('poster', self.image.$item.src);\r\n            }\r\n          } // insert video tag\r\n\r\n\r\n          self.image.$container.appendChild(video); // remove parent video element (created by VideoWorker)\r\n\r\n          $parent.parentNode.removeChild($parent); // call onVideoInsert event\r\n\r\n          if (self.options.onVideoInsert) {\r\n            self.options.onVideoInsert.call(self);\r\n          }\r\n        });\r\n      }\r\n    }; // cover video\r\n\r\n\r\n    const defCoverImage = Jarallax.prototype.coverImage;\r\n\r\n    Jarallax.prototype.coverImage = function () {\r\n      const self = this;\r\n      const imageData = defCoverImage.apply(self);\r\n      const node = self.image.$item ? self.image.$item.nodeName : false;\r\n\r\n      if (imageData && self.video && node && ('IFRAME' === node || 'VIDEO' === node)) {\r\n        let h = imageData.image.height;\r\n        let w = h * self.image.width / self.image.height;\r\n        let ml = (imageData.container.width - w) / 2;\r\n        let mt = imageData.image.marginTop;\r\n\r\n        if (imageData.container.width > w) {\r\n          w = imageData.container.width;\r\n          h = w * self.image.height / self.image.width;\r\n          ml = 0;\r\n          mt += (imageData.image.height - h) / 2;\r\n        } // add video height over than need to hide controls\r\n\r\n\r\n        if ('IFRAME' === node) {\r\n          h += 400;\r\n          mt -= 200;\r\n        }\r\n\r\n        self.css(self.$video, {\r\n          width: `${w}px`,\r\n          marginLeft: `${ml}px`,\r\n          height: `${h}px`,\r\n          marginTop: `${mt}px`\r\n        });\r\n      }\r\n\r\n      return imageData;\r\n    }; // init video\r\n\r\n\r\n    const defInitImg = Jarallax.prototype.initImg;\r\n\r\n    Jarallax.prototype.initImg = function () {\r\n      const self = this;\r\n      const defaultResult = defInitImg.apply(self);\r\n\r\n      if (!self.options.videoSrc) {\r\n        self.options.videoSrc = self.$item.getAttribute('data-jarallax-video') || null;\r\n      }\r\n\r\n      if (self.options.videoSrc) {\r\n        self.defaultInitImgResult = defaultResult;\r\n        return true;\r\n      }\r\n\r\n      return defaultResult;\r\n    };\r\n\r\n    const defCanInitParallax = Jarallax.prototype.canInitParallax;\r\n\r\n    Jarallax.prototype.canInitParallax = function () {\r\n      const self = this;\r\n      let defaultResult = defCanInitParallax.apply(self);\r\n\r\n      if (!self.options.videoSrc) {\r\n        return defaultResult;\r\n      } // Init video api\r\n\r\n\r\n      const video = new VideoWorker(self.options.videoSrc, {\r\n        autoplay: true,\r\n        loop: self.options.videoLoop,\r\n        showControls: false,\r\n        accessibilityHidden: true,\r\n        startTime: self.options.videoStartTime || 0,\r\n        endTime: self.options.videoEndTime || 0,\r\n        mute: self.options.videoVolume ? 0 : 1,\r\n        volume: self.options.videoVolume || 0\r\n      }); // call onVideoWorkerInit event\r\n\r\n      if (self.options.onVideoWorkerInit) {\r\n        self.options.onVideoWorkerInit.call(self, video);\r\n      }\r\n\r\n      function resetDefaultImage() {\r\n        if (self.image.$default_item) {\r\n          self.image.$item = self.image.$default_item;\r\n          self.image.$item.style.display = 'block'; // set image width and height\r\n\r\n          self.coverImage();\r\n          self.onScroll();\r\n        }\r\n      }\r\n\r\n      if (video.isValid()) {\r\n        // Force enable parallax.\r\n        // When the parallax disabled on mobile devices, we still need to display videos.\r\n        // https://github.com/nk-o/jarallax/issues/159\r\n        if (this.options.disableParallax()) {\r\n          defaultResult = true;\r\n          self.image.position = 'absolute';\r\n          self.options.type = 'scroll';\r\n          self.options.speed = 1;\r\n        } // if parallax will not be inited, we can add thumbnail on background.\r\n\r\n\r\n        if (!defaultResult) {\r\n          if (!self.defaultInitImgResult) {\r\n            video.getImageURL(url => {\r\n              // save default user styles\r\n              const curStyle = self.$item.getAttribute('style');\r\n\r\n              if (curStyle) {\r\n                self.$item.setAttribute('data-jarallax-original-styles', curStyle);\r\n              } // set new background\r\n\r\n\r\n              self.css(self.$item, {\r\n                'background-image': `url(\"${url}\")`,\r\n                'background-position': 'center',\r\n                'background-size': 'cover'\r\n              });\r\n            });\r\n          } // init video\r\n\r\n        } else {\r\n          video.on('ready', () => {\r\n            if (self.options.videoPlayOnlyVisible) {\r\n              const oldOnScroll = self.onScroll;\r\n\r\n              self.onScroll = function () {\r\n                oldOnScroll.apply(self);\r\n\r\n                if (!self.videoError && (self.options.videoLoop || !self.options.videoLoop && !self.videoEnded)) {\r\n                  if (self.isVisible()) {\r\n                    video.play();\r\n                  } else {\r\n                    video.pause();\r\n                  }\r\n                }\r\n              };\r\n            } else {\r\n              video.play();\r\n            }\r\n          });\r\n          video.on('started', () => {\r\n            self.image.$default_item = self.image.$item;\r\n            self.image.$item = self.$video; // set video width and height\r\n\r\n            self.image.width = self.video.videoWidth || 1280;\r\n            self.image.height = self.video.videoHeight || 720;\r\n            self.coverImage();\r\n            self.onScroll(); // hide image\r\n\r\n            if (self.image.$default_item) {\r\n              self.image.$default_item.style.display = 'none';\r\n            }\r\n          });\r\n          video.on('ended', () => {\r\n            self.videoEnded = true;\r\n\r\n            if (!self.options.videoLoop) {\r\n              // show default image if Loop disabled.\r\n              resetDefaultImage();\r\n            }\r\n          });\r\n          video.on('error', () => {\r\n            self.videoError = true; // show default image if video loading error.\r\n\r\n            resetDefaultImage();\r\n          });\r\n          self.video = video; // set image if not exists\r\n\r\n          if (!self.defaultInitImgResult) {\r\n            // set empty image on self-hosted video if not defined\r\n            self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n\r\n            if ('local' !== video.type) {\r\n              video.getImageURL(url => {\r\n                self.image.bgImage = `url(\"${url}\")`;\r\n                self.init();\r\n              });\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return defaultResult;\r\n    }; // Destroy video parallax\r\n\r\n\r\n    const defDestroy = Jarallax.prototype.destroy;\r\n\r\n    Jarallax.prototype.destroy = function () {\r\n      const self = this;\r\n\r\n      if (self.image.$default_item) {\r\n        self.image.$item = self.image.$default_item;\r\n        delete self.image.$default_item;\r\n      }\r\n\r\n      defDestroy.apply(self);\r\n    };\r\n  }\r\n\r\n  jarallaxVideo(); // data-jarallax-video initialization\r\n\r\n  ready(() => {\r\n    if ('undefined' !== typeof global$1.jarallax) {\r\n      global$1.jarallax(document.querySelectorAll('[data-jarallax-video]'));\r\n    }\r\n  }); // We should add VideoWorker globally, since some project uses it.\r\n\r\n  if (!global$1.VideoWorker) {\r\n    global$1.VideoWorker = VideoWorker;\r\n  }\r\n\r\n  return jarallaxVideo;\r\n\r\n}));\r\n//# sourceMappingURL=jarallax-video.js.map\r\n","Magento_PageBuilder/js/resource/jarallax/jarallax-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PageBuilder/js/resource/jarallax/jarallax'\r\n], function(jarallax){\r\n    'use strict';\r\n\r\n    window.jarallax = window.jarallax || jarallax;\r\n});\r\n","Magento_PageBuilder/js/resource/jarallax/jarallax.js":"/*!\r\n * Jarallax v2.0.3 (https://github.com/nk-o/jarallax)\r\n * Copyright 2022 nK <https://nkdev.info>\r\n * Licensed under MIT (https://github.com/nk-o/jarallax/blob/master/LICENSE)\r\n */\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n      typeof define === 'function' && define.amd ? define(factory) :\r\n          (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.jarallax = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  function ready(callback) {\r\n    if ('complete' === document.readyState || 'interactive' === document.readyState) {\r\n      // Already ready or interactive, execute callback\r\n      callback();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', callback, {\r\n        capture: true,\r\n        once: true,\r\n        passive: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win;\r\n\r\n  if ('undefined' !== typeof window) {\r\n    win = window;\r\n  } else if ('undefined' !== typeof global) {\r\n    win = global;\r\n  } else if ('undefined' !== typeof self) {\r\n    win = self;\r\n  } else {\r\n    win = {};\r\n  }\r\n\r\n  var global$1 = win;\r\n\r\n  const {\r\n    navigator\r\n  } = global$1;\r\n  const isMobile = /*#__PURE__*/ /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n  let $deviceHelper;\r\n  /**\r\n   * The most popular mobile browsers changes height after page scroll and this generates image jumping.\r\n   * We can fix it using this workaround with vh units.\r\n   */\r\n\r\n  function getDeviceHeight() {\r\n    if (!$deviceHelper && document.body) {\r\n      $deviceHelper = document.createElement('div');\r\n      $deviceHelper.style.cssText = 'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\r\n      document.body.appendChild($deviceHelper);\r\n    }\r\n\r\n    return ($deviceHelper ? $deviceHelper.clientHeight : 0) || global$1.innerHeight || document.documentElement.clientHeight;\r\n  } // Window height data\r\n\r\n\r\n  let wndH;\r\n\r\n  function updateWndVars() {\r\n    if (isMobile) {\r\n      wndH = getDeviceHeight();\r\n    } else {\r\n      wndH = global$1.innerHeight || document.documentElement.clientHeight;\r\n    }\r\n  }\r\n\r\n  updateWndVars();\r\n  global$1.addEventListener('resize', updateWndVars);\r\n  global$1.addEventListener('orientationchange', updateWndVars);\r\n  global$1.addEventListener('load', updateWndVars);\r\n  ready(() => {\r\n    updateWndVars();\r\n  }); // list with all jarallax instances\r\n  // need to render all in one scroll/resize event\r\n\r\n  const jarallaxList = []; // get all parents of the element.\r\n\r\n  function getParents(elem) {\r\n    const parents = [];\r\n\r\n    while (null !== elem.parentElement) {\r\n      elem = elem.parentElement;\r\n\r\n      if (1 === elem.nodeType) {\r\n        parents.push(elem);\r\n      }\r\n    }\r\n\r\n    return parents;\r\n  }\r\n\r\n  function updateParallax() {\r\n    if (!jarallaxList.length) {\r\n      return;\r\n    }\r\n\r\n    jarallaxList.forEach((data, k) => {\r\n      const {\r\n        instance,\r\n        oldData\r\n      } = data;\r\n      const clientRect = instance.$item.getBoundingClientRect();\r\n      const newData = {\r\n        width: clientRect.width,\r\n        height: clientRect.height,\r\n        top: clientRect.top,\r\n        bottom: clientRect.bottom,\r\n        wndW: global$1.innerWidth,\r\n        wndH\r\n      };\r\n      const isResized = !oldData || oldData.wndW !== newData.wndW || oldData.wndH !== newData.wndH || oldData.width !== newData.width || oldData.height !== newData.height;\r\n      const isScrolled = isResized || !oldData || oldData.top !== newData.top || oldData.bottom !== newData.bottom;\r\n      jarallaxList[k].oldData = newData;\r\n\r\n      if (isResized) {\r\n        instance.onResize();\r\n      }\r\n\r\n      if (isScrolled) {\r\n        instance.onScroll();\r\n      }\r\n    });\r\n    global$1.requestAnimationFrame(updateParallax);\r\n  }\r\n\r\n  let instanceID = 0; // Jarallax class\r\n\r\n  class Jarallax {\r\n    constructor(item, userOptions) {\r\n      const self = this;\r\n      self.instanceID = instanceID;\r\n      instanceID += 1;\r\n      self.$item = item;\r\n      self.defaults = {\r\n        type: 'scroll',\r\n        // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\r\n        speed: 0.5,\r\n        // supported value from -1 to 2\r\n        imgSrc: null,\r\n        imgElement: '.jarallax-img',\r\n        imgSize: 'cover',\r\n        imgPosition: '50% 50%',\r\n        imgRepeat: 'no-repeat',\r\n        // supported only for background, not for <img> tag\r\n        keepImg: false,\r\n        // keep <img> tag in it's default place\r\n        elementInViewport: null,\r\n        zIndex: -100,\r\n        disableParallax: false,\r\n        disableVideo: false,\r\n        // video\r\n        videoSrc: null,\r\n        videoStartTime: 0,\r\n        videoEndTime: 0,\r\n        videoVolume: 0,\r\n        videoLoop: true,\r\n        videoPlayOnlyVisible: true,\r\n        videoLazyLoading: true,\r\n        // events\r\n        onScroll: null,\r\n        // function(calculations) {}\r\n        onInit: null,\r\n        // function() {}\r\n        onDestroy: null,\r\n        // function() {}\r\n        onCoverImage: null // function() {}\r\n\r\n      }; // prepare data-options\r\n\r\n      const dataOptions = self.$item.dataset || {};\r\n      const pureDataOptions = {};\r\n      Object.keys(dataOptions).forEach(key => {\r\n        const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\r\n\r\n        if (loweCaseOption && 'undefined' !== typeof self.defaults[loweCaseOption]) {\r\n          pureDataOptions[loweCaseOption] = dataOptions[key];\r\n        }\r\n      });\r\n      self.options = self.extend({}, self.defaults, pureDataOptions, userOptions);\r\n      self.pureOptions = self.extend({}, self.options); // prepare 'true' and 'false' strings to boolean\r\n\r\n      Object.keys(self.options).forEach(key => {\r\n        if ('true' === self.options[key]) {\r\n          self.options[key] = true;\r\n        } else if ('false' === self.options[key]) {\r\n          self.options[key] = false;\r\n        }\r\n      }); // fix speed option [-1.0, 2.0]\r\n\r\n      self.options.speed = Math.min(2, Math.max(-1, parseFloat(self.options.speed))); // prepare disableParallax callback\r\n\r\n      if ('string' === typeof self.options.disableParallax) {\r\n        self.options.disableParallax = new RegExp(self.options.disableParallax);\r\n      }\r\n\r\n      if (self.options.disableParallax instanceof RegExp) {\r\n        const disableParallaxRegexp = self.options.disableParallax;\r\n\r\n        self.options.disableParallax = () => disableParallaxRegexp.test(navigator.userAgent);\r\n      }\r\n\r\n      if ('function' !== typeof self.options.disableParallax) {\r\n        self.options.disableParallax = () => false;\r\n      } // prepare disableVideo callback\r\n\r\n\r\n      if ('string' === typeof self.options.disableVideo) {\r\n        self.options.disableVideo = new RegExp(self.options.disableVideo);\r\n      }\r\n\r\n      if (self.options.disableVideo instanceof RegExp) {\r\n        const disableVideoRegexp = self.options.disableVideo;\r\n\r\n        self.options.disableVideo = () => disableVideoRegexp.test(navigator.userAgent);\r\n      }\r\n\r\n      if ('function' !== typeof self.options.disableVideo) {\r\n        self.options.disableVideo = () => false;\r\n      } // custom element to check if parallax in viewport\r\n\r\n\r\n      let elementInVP = self.options.elementInViewport; // get first item from array\r\n\r\n      if (elementInVP && 'object' === typeof elementInVP && 'undefined' !== typeof elementInVP.length) {\r\n        [elementInVP] = elementInVP;\r\n      } // check if dom element\r\n\r\n\r\n      if (!(elementInVP instanceof Element)) {\r\n        elementInVP = null;\r\n      }\r\n\r\n      self.options.elementInViewport = elementInVP;\r\n      self.image = {\r\n        src: self.options.imgSrc || null,\r\n        $container: null,\r\n        useImgTag: false,\r\n        // 1. Position fixed is needed for the most of browsers because absolute position have glitches\r\n        // 2. On MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\r\n        // 3. Previously used 'absolute' for mobile devices. But we re-tested on iPhone 12 and 'fixed' position is working better, then 'absolute', so for now position is always 'fixed'\r\n        position: 'fixed'\r\n      };\r\n\r\n      if (self.initImg() && self.canInitParallax()) {\r\n        self.init();\r\n      }\r\n    } // add styles to element\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    css(el, styles) {\r\n      if ('string' === typeof styles) {\r\n        return global$1.getComputedStyle(el).getPropertyValue(styles);\r\n      }\r\n\r\n      Object.keys(styles).forEach(key => {\r\n        el.style[key] = styles[key];\r\n      });\r\n      return el;\r\n    } // Extend like jQuery.extend\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    extend(out, ...args) {\r\n      out = out || {};\r\n      Object.keys(args).forEach(i => {\r\n        if (!args[i]) {\r\n          return;\r\n        }\r\n\r\n        Object.keys(args[i]).forEach(key => {\r\n          out[key] = args[i][key];\r\n        });\r\n      });\r\n      return out;\r\n    } // get window size and scroll position. Useful for extensions\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    getWindowData() {\r\n      return {\r\n        width: global$1.innerWidth || document.documentElement.clientWidth,\r\n        height: wndH,\r\n        y: document.documentElement.scrollTop\r\n      };\r\n    } // Jarallax functions\r\n\r\n\r\n    initImg() {\r\n      const self = this; // find image element\r\n\r\n      let $imgElement = self.options.imgElement;\r\n\r\n      if ($imgElement && 'string' === typeof $imgElement) {\r\n        $imgElement = self.$item.querySelector($imgElement);\r\n      } // check if dom element\r\n\r\n\r\n      if (!($imgElement instanceof Element)) {\r\n        if (self.options.imgSrc) {\r\n          $imgElement = new Image();\r\n          $imgElement.src = self.options.imgSrc;\r\n        } else {\r\n          $imgElement = null;\r\n        }\r\n      }\r\n\r\n      if ($imgElement) {\r\n        if (self.options.keepImg) {\r\n          self.image.$item = $imgElement.cloneNode(true);\r\n        } else {\r\n          self.image.$item = $imgElement;\r\n          self.image.$itemParent = $imgElement.parentNode;\r\n        }\r\n\r\n        self.image.useImgTag = true;\r\n      } // true if there is img tag\r\n\r\n\r\n      if (self.image.$item) {\r\n        return true;\r\n      } // get image src\r\n\r\n\r\n      if (null === self.image.src) {\r\n        self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n        self.image.bgImage = self.css(self.$item, 'background-image');\r\n      }\r\n\r\n      return !(!self.image.bgImage || 'none' === self.image.bgImage);\r\n    }\r\n\r\n    canInitParallax() {\r\n      return !this.options.disableParallax();\r\n    }\r\n\r\n    init() {\r\n      const self = this;\r\n      const containerStyles = {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n      };\r\n      let imageStyles = {\r\n        pointerEvents: 'none',\r\n        transformStyle: 'preserve-3d',\r\n        backfaceVisibility: 'hidden',\r\n        willChange: 'transform,opacity'\r\n      };\r\n\r\n      if (!self.options.keepImg) {\r\n        // save default user styles\r\n        const curStyle = self.$item.getAttribute('style');\r\n\r\n        if (curStyle) {\r\n          self.$item.setAttribute('data-jarallax-original-styles', curStyle);\r\n        }\r\n\r\n        if (self.image.useImgTag) {\r\n          const curImgStyle = self.image.$item.getAttribute('style');\r\n\r\n          if (curImgStyle) {\r\n            self.image.$item.setAttribute('data-jarallax-original-styles', curImgStyle);\r\n          }\r\n        }\r\n      } // set relative position and z-index to the parent\r\n\r\n\r\n      if ('static' === self.css(self.$item, 'position')) {\r\n        self.css(self.$item, {\r\n          position: 'relative'\r\n        });\r\n      }\r\n\r\n      if ('auto' === self.css(self.$item, 'z-index')) {\r\n        self.css(self.$item, {\r\n          zIndex: 0\r\n        });\r\n      } // container for parallax image\r\n\r\n\r\n      self.image.$container = document.createElement('div');\r\n      self.css(self.image.$container, containerStyles);\r\n      self.css(self.image.$container, {\r\n        'z-index': self.options.zIndex\r\n      }); // it will remove some image overlapping\r\n      // overlapping occur due to an image position fixed inside absolute position element\r\n      // needed only when background in fixed position\r\n\r\n      if ('fixed' === this.image.position) {\r\n        self.css(self.image.$container, {\r\n          '-webkit-clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%)',\r\n          'clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%)'\r\n        });\r\n      }\r\n\r\n      self.image.$container.setAttribute('id', `jarallax-container-${self.instanceID}`);\r\n      self.$item.appendChild(self.image.$container); // use img tag\r\n\r\n      if (self.image.useImgTag) {\r\n        imageStyles = self.extend({\r\n          'object-fit': self.options.imgSize,\r\n          'object-position': self.options.imgPosition,\r\n          'max-width': 'none'\r\n        }, containerStyles, imageStyles); // use div with background image\r\n      } else {\r\n        self.image.$item = document.createElement('div');\r\n\r\n        if (self.image.src) {\r\n          imageStyles = self.extend({\r\n            'background-position': self.options.imgPosition,\r\n            'background-size': self.options.imgSize,\r\n            'background-repeat': self.options.imgRepeat,\r\n            'background-image': self.image.bgImage || `url(\"${self.image.src}\")`\r\n          }, containerStyles, imageStyles);\r\n        }\r\n      }\r\n\r\n      if ('opacity' === self.options.type || 'scale' === self.options.type || 'scale-opacity' === self.options.type || 1 === self.options.speed) {\r\n        self.image.position = 'absolute';\r\n      } // 1. Check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\r\n      //    discussion - https://github.com/nk-o/jarallax/issues/9\r\n      // 2. Check if parents have overflow scroll\r\n\r\n\r\n      if ('fixed' === self.image.position) {\r\n        const $parents = getParents(self.$item).filter(el => {\r\n          const styles = global$1.getComputedStyle(el);\r\n          const parentTransform = styles['-webkit-transform'] || styles['-moz-transform'] || styles.transform;\r\n          const overflowRegex = /(auto|scroll)/;\r\n          return parentTransform && 'none' !== parentTransform || overflowRegex.test(styles.overflow + styles['overflow-y'] + styles['overflow-x']);\r\n        });\r\n        self.image.position = $parents.length ? 'absolute' : 'fixed';\r\n      } // add position to parallax block\r\n\r\n\r\n      imageStyles.position = self.image.position; // insert parallax image\r\n\r\n      self.css(self.image.$item, imageStyles);\r\n      self.image.$container.appendChild(self.image.$item); // set initial position and size\r\n\r\n      self.onResize();\r\n      self.onScroll(true); // call onInit event\r\n\r\n      if (self.options.onInit) {\r\n        self.options.onInit.call(self);\r\n      } // remove default user background\r\n\r\n\r\n      if ('none' !== self.css(self.$item, 'background-image')) {\r\n        self.css(self.$item, {\r\n          'background-image': 'none'\r\n        });\r\n      }\r\n\r\n      self.addToParallaxList();\r\n    } // add to parallax instances list\r\n\r\n\r\n    addToParallaxList() {\r\n      jarallaxList.push({\r\n        instance: this\r\n      });\r\n\r\n      if (1 === jarallaxList.length) {\r\n        global$1.requestAnimationFrame(updateParallax);\r\n      }\r\n    } // remove from parallax instances list\r\n\r\n\r\n    removeFromParallaxList() {\r\n      const self = this;\r\n      jarallaxList.forEach((data, key) => {\r\n        if (data.instance.instanceID === self.instanceID) {\r\n          jarallaxList.splice(key, 1);\r\n        }\r\n      });\r\n    }\r\n\r\n    destroy() {\r\n      const self = this;\r\n      self.removeFromParallaxList(); // return styles on container as before jarallax init\r\n\r\n      const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\r\n      self.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\r\n\r\n      if (!originalStylesTag) {\r\n        self.$item.removeAttribute('style');\r\n      } else {\r\n        self.$item.setAttribute('style', originalStylesTag);\r\n      }\r\n\r\n      if (self.image.useImgTag) {\r\n        // return styles on img tag as before jarallax init\r\n        const originalStylesImgTag = self.image.$item.getAttribute('data-jarallax-original-styles');\r\n        self.image.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\r\n\r\n        if (!originalStylesImgTag) {\r\n          self.image.$item.removeAttribute('style');\r\n        } else {\r\n          self.image.$item.setAttribute('style', originalStylesTag);\r\n        } // move img tag to its default position\r\n\r\n\r\n        if (self.image.$itemParent) {\r\n          self.image.$itemParent.appendChild(self.image.$item);\r\n        }\r\n      } // remove additional dom elements\r\n\r\n\r\n      if (self.image.$container) {\r\n        self.image.$container.parentNode.removeChild(self.image.$container);\r\n      } // call onDestroy event\r\n\r\n\r\n      if (self.options.onDestroy) {\r\n        self.options.onDestroy.call(self);\r\n      } // delete jarallax from item\r\n\r\n\r\n      delete self.$item.jarallax;\r\n    } // Fallback for removed function.\r\n    // Does nothing now.\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    clipContainer() {}\r\n\r\n    coverImage() {\r\n      const self = this;\r\n      const rect = self.image.$container.getBoundingClientRect();\r\n      const contH = rect.height;\r\n      const {\r\n        speed\r\n      } = self.options;\r\n      const isScroll = 'scroll' === self.options.type || 'scroll-opacity' === self.options.type;\r\n      let scrollDist = 0;\r\n      let resultH = contH;\r\n      let resultMT = 0; // scroll parallax\r\n\r\n      if (isScroll) {\r\n        // scroll distance and height for image\r\n        if (0 > speed) {\r\n          scrollDist = speed * Math.max(contH, wndH);\r\n\r\n          if (wndH < contH) {\r\n            scrollDist -= speed * (contH - wndH);\r\n          }\r\n        } else {\r\n          scrollDist = speed * (contH + wndH);\r\n        } // size for scroll parallax\r\n\r\n\r\n        if (1 < speed) {\r\n          resultH = Math.abs(scrollDist - wndH);\r\n        } else if (0 > speed) {\r\n          resultH = scrollDist / speed + Math.abs(scrollDist);\r\n        } else {\r\n          resultH += (wndH - contH) * (1 - speed);\r\n        }\r\n\r\n        scrollDist /= 2;\r\n      } // store scroll distance\r\n\r\n\r\n      self.parallaxScrollDistance = scrollDist; // vertical center\r\n\r\n      if (isScroll) {\r\n        resultMT = (wndH - resultH) / 2;\r\n      } else {\r\n        resultMT = (contH - resultH) / 2;\r\n      } // apply result to item\r\n\r\n\r\n      self.css(self.image.$item, {\r\n        height: `${resultH}px`,\r\n        marginTop: `${resultMT}px`,\r\n        left: 'fixed' === self.image.position ? `${rect.left}px` : '0',\r\n        width: `${rect.width}px`\r\n      }); // call onCoverImage event\r\n\r\n      if (self.options.onCoverImage) {\r\n        self.options.onCoverImage.call(self);\r\n      } // return some useful data. Used in the video cover function\r\n\r\n\r\n      return {\r\n        image: {\r\n          height: resultH,\r\n          marginTop: resultMT\r\n        },\r\n        container: rect\r\n      };\r\n    }\r\n\r\n    isVisible() {\r\n      return this.isElementInViewport || false;\r\n    }\r\n\r\n    onScroll(force) {\r\n      const self = this;\r\n      const rect = self.$item.getBoundingClientRect();\r\n      const contT = rect.top;\r\n      const contH = rect.height;\r\n      const styles = {}; // check if in viewport\r\n\r\n      let viewportRect = rect;\r\n\r\n      if (self.options.elementInViewport) {\r\n        viewportRect = self.options.elementInViewport.getBoundingClientRect();\r\n      }\r\n\r\n      self.isElementInViewport = 0 <= viewportRect.bottom && 0 <= viewportRect.right && viewportRect.top <= wndH && viewportRect.left <= global$1.innerWidth; // stop calculations if item is not in viewport\r\n\r\n      if (force ? false : !self.isElementInViewport) {\r\n        return;\r\n      } // calculate parallax helping variables\r\n\r\n\r\n      const beforeTop = Math.max(0, contT);\r\n      const beforeTopEnd = Math.max(0, contH + contT);\r\n      const afterTop = Math.max(0, -contT);\r\n      const beforeBottom = Math.max(0, contT + contH - wndH);\r\n      const beforeBottomEnd = Math.max(0, contH - (contT + contH - wndH));\r\n      const afterBottom = Math.max(0, -contT + wndH - contH);\r\n      const fromViewportCenter = 1 - 2 * ((wndH - contT) / (wndH + contH)); // calculate on how percent of section is visible\r\n\r\n      let visiblePercent = 1;\r\n\r\n      if (contH < wndH) {\r\n        visiblePercent = 1 - (afterTop || beforeBottom) / contH;\r\n      } else if (beforeTopEnd <= wndH) {\r\n        visiblePercent = beforeTopEnd / wndH;\r\n      } else if (beforeBottomEnd <= wndH) {\r\n        visiblePercent = beforeBottomEnd / wndH;\r\n      } // opacity\r\n\r\n\r\n      if ('opacity' === self.options.type || 'scale-opacity' === self.options.type || 'scroll-opacity' === self.options.type) {\r\n        styles.transform = 'translate3d(0,0,0)';\r\n        styles.opacity = visiblePercent;\r\n      } // scale\r\n\r\n\r\n      if ('scale' === self.options.type || 'scale-opacity' === self.options.type) {\r\n        let scale = 1;\r\n\r\n        if (0 > self.options.speed) {\r\n          scale -= self.options.speed * visiblePercent;\r\n        } else {\r\n          scale += self.options.speed * (1 - visiblePercent);\r\n        }\r\n\r\n        styles.transform = `scale(${scale}) translate3d(0,0,0)`;\r\n      } // scroll\r\n\r\n\r\n      if ('scroll' === self.options.type || 'scroll-opacity' === self.options.type) {\r\n        let positionY = self.parallaxScrollDistance * fromViewportCenter; // fix if parallax block in absolute position\r\n\r\n        if ('absolute' === self.image.position) {\r\n          positionY -= contT;\r\n        }\r\n\r\n        styles.transform = `translate3d(0,${positionY}px,0)`;\r\n      }\r\n\r\n      self.css(self.image.$item, styles); // call onScroll event\r\n\r\n      if (self.options.onScroll) {\r\n        self.options.onScroll.call(self, {\r\n          section: rect,\r\n          beforeTop,\r\n          beforeTopEnd,\r\n          afterTop,\r\n          beforeBottom,\r\n          beforeBottomEnd,\r\n          afterBottom,\r\n          visiblePercent,\r\n          fromViewportCenter\r\n        });\r\n      }\r\n    }\r\n\r\n    onResize() {\r\n      this.coverImage();\r\n    }\r\n\r\n  } // global definition\r\n\r\n\r\n  const jarallax = function (items, options, ...args) {\r\n    // check for dom element\r\n    // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\r\n    if ('object' === typeof HTMLElement ? items instanceof HTMLElement : items && 'object' === typeof items && null !== items && 1 === items.nodeType && 'string' === typeof items.nodeName) {\r\n      items = [items];\r\n    }\r\n\r\n    const len = items.length;\r\n    let k = 0;\r\n    let ret;\r\n\r\n    for (k; k < len; k += 1) {\r\n      if ('object' === typeof options || 'undefined' === typeof options) {\r\n        if (!items[k].jarallax) {\r\n          items[k].jarallax = new Jarallax(items[k], options);\r\n        }\r\n      } else if (items[k].jarallax) {\r\n        // eslint-disable-next-line prefer-spread\r\n        ret = items[k].jarallax[options].apply(items[k].jarallax, args);\r\n      }\r\n\r\n      if ('undefined' !== typeof ret) {\r\n        return ret;\r\n      }\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  jarallax.constructor = Jarallax;\r\n\r\n  const $ = global$1.jQuery; // jQuery support\r\n\r\n  if ('undefined' !== typeof $) {\r\n    const $Plugin = function (...args) {\r\n      Array.prototype.unshift.call(args, this);\r\n      const res = jarallax.apply(global$1, args);\r\n      return 'object' !== typeof res ? res : this;\r\n    };\r\n\r\n    $Plugin.constructor = jarallax.constructor; // no conflict\r\n\r\n    const old$Plugin = $.fn.jarallax;\r\n    $.fn.jarallax = $Plugin;\r\n\r\n    $.fn.jarallax.noConflict = function () {\r\n      $.fn.jarallax = old$Plugin;\r\n      return this;\r\n    };\r\n  } // data-jarallax initialization\r\n\r\n\r\n  ready(() => {\r\n    jarallax(document.querySelectorAll('[data-jarallax]'));\r\n  });\r\n\r\n  return jarallax;\r\n\r\n}));\r\n//# sourceMappingURL=jarallax.js.map\r\n","Magento_PageBuilder/js/resource/slick/slick.min.js":"/*\r\n     _ _      _       _\r\n ___| (_) ___| | __  (_)___\r\n/ __| | |/ __| |/ /  | / __|\r\n\\__ \\ | | (__|   < _ | \\__ \\\r\n|___/_|_|\\___|_|\\_(_)/ |___/\r\n                   |__/\r\n\r\n Version: 1.9.0\r\n  Author: Ken Wheeler\r\n Website: http://kenwheeler.github.io\r\n    Docs: http://kenwheeler.github.io/slick\r\n    Repo: http://github.com/kenwheeler/slick\r\n  Issues: http://github.com/kenwheeler/slick/issues\r\n\r\n */\r\n(function(i){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],i):\"undefined\"!=typeof exports?module.exports=i(require(\"jquery\")):i(jQuery)})(function(i){\"use strict\";var e=window.Slick||{};e=function(){function e(e,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(e),appendDots:i(e),arrows:!0,asNavFor:null,prevArrow:'<button class=\"slick-prev\" aria-label=\"Previous\" type=\"button\">Previous</button>',nextArrow:'<button class=\"slick-next\" aria-label=\"Next\" type=\"button\">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:\"50px\",cssEase:\"ease\",customPaging:function(e,t){return i('<button type=\"button\" />').text(t+1)},dots:!1,dotsClass:\"slick-dots\",draggable:!0,easing:\"linear\",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:\"ondemand\",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:\"window\",responsive:null,rows:1,rtl:!1,slide:\"\",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden=\"hidden\",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(e),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange=\"visibilitychange\",n.windowWidth=0,n.windowTimer=null,s=i(e).data(\"slick\")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,\"undefined\"!=typeof document.mozHidden?(n.hidden=\"mozHidden\",n.visibilityChange=\"mozvisibilitychange\"):\"undefined\"!=typeof document.webkitHidden&&(n.hidden=\"webkitHidden\",n.visibilityChange=\"webkitvisibilitychange\"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=t++,n.htmlExpr=/^(?:\\s*(<[\\w\\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}var t=0;return e}(),e.prototype.activateADA=function(){var i=this;i.$slideTrack.find(\".slick-active\").attr({\"aria-hidden\":\"false\"}).find(\"a, input, button, select\").attr({tabindex:\"0\"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if(\"boolean\"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),\"number\"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):o===!0?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr(\"data-slick-index\",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),s.options.vertical===!1?(o[s.animType]=\"translate(\"+i+\"px, 0px)\",s.$slideTrack.css(o)):(o[s.animType]=\"translate(0px,\"+i+\"px)\",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),s.options.vertical===!1?o[s.animType]=\"translate3d(\"+e+\"px, 0px, 0px)\":o[s.animType]=\"translate3d(0px,\"+e+\"px, 0px)\",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this,o=t.getNavTarget();null!==o&&\"object\"==typeof o&&o.each(function(){var t=i(this).slick(\"getSlick\");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};e.options.fade===!1?t[e.transitionType]=e.transformType+\" \"+e.options.speed+\"ms \"+e.options.cssEase:t[e.transitionType]=\"opacity \"+e.options.speed+\"ms \"+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(i.options.infinite===!1&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1===0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=i(e.options.prevArrow).addClass(\"slick-arrow\"),e.$nextArrow=i(e.options.nextArrow).addClass(\"slick-arrow\"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass(\"slick-hidden\").removeAttr(\"aria-hidden tabindex\"),e.$nextArrow.removeClass(\"slick-hidden\").removeAttr(\"aria-hidden tabindex\"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\")):e.$prevArrow.add(e.$nextArrow).addClass(\"slick-hidden\").attr({\"aria-disabled\":\"true\",tabindex:\"-1\"}))},e.prototype.buildDots=function(){var e,t,o=this;if(o.options.dots===!0&&o.slideCount>o.options.slidesToShow){for(o.$slider.addClass(\"slick-dotted\"),t=i(\"<ul />\").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i(\"<li />\").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find(\"li\").first().addClass(\"slick-active\")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+\":not(.slick-cloned)\").addClass(\"slick-slide\"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr(\"data-slick-index\",e).data(\"originalStyling\",i(t).attr(\"style\")||\"\")}),e.$slider.addClass(\"slick-slider\"),e.$slideTrack=0===e.slideCount?i('<div class=\"slick-track\"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class=\"slick-track\"/>').parent(),e.$list=e.$slideTrack.wrap('<div class=\"slick-list\"/>').parent(),e.$slideTrack.css(\"opacity\",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),i(\"img[data-lazy]\",e.$slider).not(\"[src]\").addClass(\"slick-loading\"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses(\"number\"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass(\"draggable\")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>0){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement(\"div\");for(e=0;e<l.options.rows;e++){var a=document.createElement(\"div\");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+\"%\",display:\"inline-block\"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if(\"window\"===r.respondTo?n=a:\"slider\"===r.respondTo?n=d:\"min\"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(r.originalSettings.mobileFirst===!1?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,\"unslick\"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,\"unslick\"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||l===!1||r.$slider.trigger(\"breakpoint\",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is(\"a\")&&e.preventDefault(),l.is(\"li\")||(l=l.closest(\"li\")),n=r.slideCount%r.options.slidesToScroll!==0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case\"previous\":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case\"next\":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case\"index\":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger(\"focus\");break;default:return}},e.prototype.checkNavigable=function(i){var e,t,o=this;if(e=o.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var s in e){if(i<e[s]){i=t;break}t=e[s]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i(\"li\",e.$dots).off(\"click.slick\",e.changeSlide).off(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)).off(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1)),e.options.accessibility===!0&&e.$dots.off(\"keydown.slick\",e.keyHandler)),e.$slider.off(\"focus.slick blur.slick\"),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off(\"click.slick\",e.changeSlide),e.$nextArrow&&e.$nextArrow.off(\"click.slick\",e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow&&e.$prevArrow.off(\"keydown.slick\",e.keyHandler),e.$nextArrow&&e.$nextArrow.off(\"keydown.slick\",e.keyHandler))),e.$list.off(\"touchstart.slick mousedown.slick\",e.swipeHandler),e.$list.off(\"touchmove.slick mousemove.slick\",e.swipeHandler),e.$list.off(\"touchend.slick mouseup.slick\",e.swipeHandler),e.$list.off(\"touchcancel.slick mouseleave.slick\",e.swipeHandler),e.$list.off(\"click.slick\",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),e.options.accessibility===!0&&e.$list.off(\"keydown.slick\",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().off(\"click.slick\",e.selectHandler),i(window).off(\"orientationchange.slick.slick-\"+e.instanceUid,e.orientationChange),i(window).off(\"resize.slick.slick-\"+e.instanceUid,e.resize),i(\"[draggable!=true]\",e.$slideTrack).off(\"dragstart\",e.preventDefault),i(window).off(\"load.slick.slick-\"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)),e.$list.off(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>0&&(i=e.$slides.children().children(),i.removeAttr(\"style\"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){var e=this;e.shouldClick===!1&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(\".slick-cloned\",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass(\"slick-disabled slick-arrow slick-hidden\").removeAttr(\"aria-hidden aria-disabled tabindex\").css(\"display\",\"\"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass(\"slick-disabled slick-arrow slick-hidden\").removeAttr(\"aria-hidden aria-disabled tabindex\").css(\"display\",\"\"),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass(\"slick-slide slick-active slick-center slick-visible slick-current\").removeAttr(\"aria-hidden\").removeAttr(\"data-slick-index\").each(function(){i(this).attr(\"style\",i(this).data(\"originalStyling\"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass(\"slick-slider\"),t.$slider.removeClass(\"slick-initialized\"),t.$slider.removeClass(\"slick-dotted\"),t.unslicked=!0,e||t.$slider.trigger(\"destroy\",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]=\"\",e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;t.cssTransitions===!1?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;e.cssTransitions===!1?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off(\"focus.slick blur.slick\").on(\"focus.slick\",\"*\",function(t){var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&o.is(\":focus\")&&(e.focussed=!0,e.autoPlay())},0)}).on(\"blur.slick\",\"*\",function(t){i(this);e.options.pauseOnFocus&&(e.focussed=!1,e.autoPlay())})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var i=this;return i.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(i.options.infinite===!0)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(i.options.centerMode===!0)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),n.options.infinite===!0?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,n.options.vertical===!0&&n.options.centerMode===!0&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!==0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),n.options.centerMode===!0&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:n.options.centerMode===!0&&n.options.infinite===!0?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:n.options.centerMode===!0&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=n.options.vertical===!1?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,n.options.variableWidth===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(\".slick-slide\").eq(i):n.$slideTrack.children(\".slick-slide\").eq(i+n.options.slidesToShow),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,n.options.centerMode===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(\".slick-slide\").eq(i):n.$slideTrack.children(\".slick-slide\").eq(i+n.options.slidesToShow+1),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){var e=this;return e.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(e.options.infinite===!1?i=e.slideCount:(t=e.options.slidesToScroll*-1,o=e.options.slidesToScroll*-1,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o,s,n=this;return s=n.options.centerMode===!0?Math.floor(n.$list.width()/2):0,o=n.swipeLeft*-1+s,n.options.swipeToSlide===!0?(n.$slideTrack.find(\".slick-slide\").each(function(e,s){var r,l,d;if(r=i(s).outerWidth(),l=s.offsetLeft,n.options.centerMode!==!0&&(l+=r/2),d=l+r,o<d)return t=s,!1}),e=Math.abs(i(t).attr(\"data-slick-index\")-n.currentSlide)||1):n.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){var t=this;t.changeSlide({data:{message:\"index\",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass(\"slick-initialized\")||(i(t.$slider).addClass(\"slick-initialized\"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger(\"init\",[t]),t.options.accessibility===!0&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(\".slick-cloned\")).attr({\"aria-hidden\":\"true\",tabindex:\"-1\"}).find(\"a, input, button, select\").attr({tabindex:\"-1\"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(\".slick-cloned\")).each(function(t){var s=o.indexOf(t);if(i(this).attr({role:\"tabpanel\",id:\"slick-slide\"+e.instanceUid+t,tabindex:-1}),s!==-1){var n=\"slick-slide-control\"+e.instanceUid+s;i(\"#\"+n).length&&i(this).attr({\"aria-describedby\":n})}}),e.$dots.attr(\"role\",\"tablist\").find(\"li\").each(function(s){var n=o[s];i(this).attr({role:\"presentation\"}),i(this).find(\"button\").first().attr({role:\"tab\",id:\"slick-slide-control\"+e.instanceUid+s,\"aria-controls\":\"slick-slide\"+e.instanceUid+n,\"aria-label\":s+1+\" of \"+t,\"aria-selected\":null,tabindex:\"-1\"})}).eq(e.currentSlide).find(\"button\").attr({\"aria-selected\":\"true\",tabindex:\"0\"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.options.focusOnChange?e.$slides.eq(s).attr({tabindex:\"0\"}):e.$slides.eq(s).removeAttr(\"tabindex\");e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off(\"click.slick\").on(\"click.slick\",{message:\"previous\"},i.changeSlide),i.$nextArrow.off(\"click.slick\").on(\"click.slick\",{message:\"next\"},i.changeSlide),i.options.accessibility===!0&&(i.$prevArrow.on(\"keydown.slick\",i.keyHandler),i.$nextArrow.on(\"keydown.slick\",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&(i(\"li\",e.$dots).on(\"click.slick\",{message:\"index\"},e.changeSlide),e.options.accessibility===!0&&e.$dots.on(\"keydown.slick\",e.keyHandler)),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.slideCount>e.options.slidesToShow&&i(\"li\",e.$dots).on(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)).on(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)),e.$list.on(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on(\"touchstart.slick mousedown.slick\",{action:\"start\"},e.swipeHandler),e.$list.on(\"touchmove.slick mousemove.slick\",{action:\"move\"},e.swipeHandler),e.$list.on(\"touchend.slick mouseup.slick\",{action:\"end\"},e.swipeHandler),e.$list.on(\"touchcancel.slick mouseleave.slick\",{action:\"end\"},e.swipeHandler),e.$list.on(\"click.slick\",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),e.options.accessibility===!0&&e.$list.on(\"keydown.slick\",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on(\"click.slick\",e.selectHandler),i(window).on(\"orientationchange.slick.slick-\"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on(\"resize.slick.slick-\"+e.instanceUid,i.proxy(e.resize,e)),i(\"[draggable!=true]\",e.$slideTrack).on(\"dragstart\",e.preventDefault),i(window).on(\"load.slick.slick-\"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match(\"TEXTAREA|INPUT|SELECT\")||(37===i.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:e.options.rtl===!0?\"next\":\"previous\"}}):39===i.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:e.options.rtl===!0?\"previous\":\"next\"}}))},e.prototype.lazyLoad=function(){function e(e){i(\"img[data-lazy]\",e).each(function(){var e=i(this),t=i(this).attr(\"data-lazy\"),o=i(this).attr(\"data-srcset\"),s=i(this).attr(\"data-sizes\")||r.$slider.attr(\"data-sizes\"),n=document.createElement(\"img\");n.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr(\"srcset\",o),s&&e.attr(\"sizes\",s)),e.attr(\"src\",t).animate({opacity:1},200,function(){e.removeAttr(\"data-lazy data-srcset data-sizes\").removeClass(\"slick-loading\")}),r.$slider.trigger(\"lazyLoaded\",[r,e,t])})},n.onerror=function(){e.removeAttr(\"data-lazy\").removeClass(\"slick-loading\").addClass(\"slick-lazyload-error\"),r.$slider.trigger(\"lazyLoadError\",[r,e,t])},n.src=t})}var t,o,s,n,r=this;if(r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),n=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),n=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,n=Math.ceil(s+r.options.slidesToShow),r.options.fade===!0&&(s>0&&s--,n<=r.slideCount&&n++)),t=r.$slider.find(\".slick-slide\").slice(s,n),\"anticipated\"===r.options.lazyLoad)for(var l=s-1,d=n,a=r.$slider.find(\".slick-slide\"),c=0;c<r.options.slidesToScroll;c++)l<0&&(l=r.slideCount-1),t=t.add(a.eq(l)),t=t.add(a.eq(d)),l--,d++;e(t),r.slideCount<=r.options.slidesToShow?(o=r.$slider.find(\".slick-slide\"),e(o)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(o=r.$slider.find(\".slick-cloned\").slice(0,r.options.slidesToShow),e(o)):0===r.currentSlide&&(o=r.$slider.find(\".slick-cloned\").slice(r.options.slidesToShow*-1),e(o))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass(\"slick-loading\"),i.initUI(),\"progressive\"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var i=this;i.changeSlide({data:{message:\"next\"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;if(!t.unslicked&&(t.$slider.trigger(\"afterChange\",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),t.options.accessibility===!0&&(t.initADA(),t.options.focusOnChange))){var o=i(t.$slides.get(t.currentSlide));o.attr(\"tabindex\",0).focus()}},e.prototype.prev=e.prototype.slickPrev=function(){var i=this;i.changeSlide({data:{message:\"previous\"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i(\"img[data-lazy]\",l.$slider);d.length?(t=d.first(),o=t.attr(\"data-lazy\"),s=t.attr(\"data-srcset\"),n=t.attr(\"data-sizes\")||l.$slider.attr(\"data-sizes\"),r=document.createElement(\"img\"),r.onload=function(){s&&(t.attr(\"srcset\",s),n&&t.attr(\"sizes\",n)),t.attr(\"src\",o).removeAttr(\"data-lazy data-srcset data-sizes\").removeClass(\"slick-loading\"),l.options.adaptiveHeight===!0&&l.setPosition(),l.$slider.trigger(\"lazyLoaded\",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr(\"data-lazy\").removeClass(\"slick-loading\").addClass(\"slick-lazyload-error\"),l.$slider.trigger(\"lazyLoadError\",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger(\"allImagesLoaded\",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:\"index\",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if(\"array\"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||\"window\";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass(\"slick-slide\"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on(\"click.slick\",e.selectHandler),e.setSlideClasses(\"number\"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger(\"reInit\",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;return\"boolean\"==typeof i?(e=i,i=e===!0?0:o.slideCount-1):i=e===!0?--i:i,!(o.slideCount<1||i<0||i>o.slideCount-1)&&(o.unload(),t===!0?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},e.prototype.setCSS=function(i){var e,t,o=this,s={};o.options.rtl===!0&&(i=-i),e=\"left\"==o.positionProp?Math.ceil(i)+\"px\":\"0px\",t=\"top\"==o.positionProp?Math.ceil(i)+\"px\":\"0px\",s[o.positionProp]=i,o.transformsEnabled===!1?o.$slideTrack.css(s):(s={},o.cssTransitions===!1?(s[o.animType]=\"translate(\"+e+\", \"+t+\")\",o.$slideTrack.css(s)):(s[o.animType]=\"translate3d(\"+e+\", \"+t+\", 0px)\",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;i.options.vertical===!1?i.options.centerMode===!0&&i.$list.css({padding:\"0px \"+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),i.options.centerMode===!0&&i.$list.css({padding:i.options.centerPadding+\" 0px\"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),i.options.vertical===!1&&i.options.variableWidth===!1?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(\".slick-slide\").length))):i.options.variableWidth===!0?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(\".slick-slide\").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();i.options.variableWidth===!1&&i.$slideTrack.children(\".slick-slide\").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,t.options.rtl===!0?i(s).css({position:\"relative\",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:\"relative\",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css(\"height\",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if(\"object\"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n=\"multiple\"):\"string\"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],\"responsive\"===arguments[0]&&\"array\"===i.type(arguments[1])?n=\"responsive\":\"undefined\"!=typeof arguments[1]&&(n=\"single\")),\"single\"===n)r.options[o]=s;else if(\"multiple\"===n)i.each(o,function(i,e){r.options[i]=e});else if(\"responsive\"===n)for(t in s)if(\"array\"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),i.options.fade===!1?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger(\"setPosition\",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=i.options.vertical===!0?\"top\":\"left\",\r\n\"top\"===i.positionProp?i.$slider.addClass(\"slick-vertical\"):i.$slider.removeClass(\"slick-vertical\"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||i.options.useCSS===!0&&(i.cssTransitions=!0),i.options.fade&&(\"number\"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType=\"OTransform\",i.transformType=\"-o-transform\",i.transitionType=\"OTransition\",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType=\"MozTransform\",i.transformType=\"-moz-transform\",i.transitionType=\"MozTransition\",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType=\"webkitTransform\",i.transformType=\"-webkit-transform\",i.transitionType=\"webkitTransition\",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType=\"msTransform\",i.transformType=\"-ms-transform\",i.transitionType=\"msTransition\",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&i.animType!==!1&&(i.animType=\"transform\",i.transformType=\"transform\",i.transitionType=\"transition\"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&i.animType!==!1},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(\".slick-slide\").removeClass(\"slick-active slick-center slick-current\").attr(\"aria-hidden\",\"true\"),n.$slides.eq(i).addClass(\"slick-current\"),n.options.centerMode===!0){var r=n.options.slidesToShow%2===0?1:0;e=Math.floor(n.options.slidesToShow/2),n.options.infinite===!0&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass(\"slick-center\"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass(\"slick-center\")),n.$slides.eq(i).addClass(\"slick-center\")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):t.length<=n.options.slidesToShow?t.addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):(s=n.slideCount%n.options.slidesToShow,o=n.options.infinite===!0?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):t.slice(o,o+n.options.slidesToShow).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"));\"ondemand\"!==n.options.lazyLoad&&\"anticipated\"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr(\"id\",\"\").attr(\"data-slick-index\",t-s.slideCount).prependTo(s.$slideTrack).addClass(\"slick-cloned\");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr(\"id\",\"\").attr(\"data-slick-index\",t+s.slideCount).appendTo(s.$slideTrack).addClass(\"slick-cloned\");s.$slideTrack.find(\".slick-cloned\").find(\"[id]\").each(function(){i(this).attr(\"id\",\"\")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(\".slick-slide\")?i(e.target):i(e.target).parents(\".slick-slide\"),s=parseInt(o.attr(\"data-slick-index\"));return s||(s=0),t.slideCount<=t.options.slidesToShow?void t.slideHandler(s,!1,!0):void t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(a.animating===!0&&a.options.waitForAnimate===!0||a.options.fade===!0&&a.currentSlide===i))return e===!1&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,a.options.infinite===!1&&a.options.centerMode===!1&&(i<0||i>a.getDotCount()*a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):a.options.infinite===!1&&a.options.centerMode===!0&&(i<0||i>a.slideCount-a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!==0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!==0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger(\"beforeChange\",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=a.getNavTarget(),l=l.slick(\"getSlick\"),l.slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide)),a.updateDots(),a.updateArrows(),a.options.fade===!0?(t!==!0?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight()):void(t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)))},e.prototype.startLoad=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass(\"slick-loading\")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),o=Math.round(180*t/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0?s.options.rtl===!1?\"left\":\"right\":o<=360&&o>=315?s.options.rtl===!1?\"left\":\"right\":o>=135&&o<=225?s.options.rtl===!1?\"right\":\"left\":s.options.verticalSwiping===!0?o>=35&&o<=135?\"down\":\"up\":\"vertical\"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(o.touchObject.edgeHit===!0&&o.$slider.trigger(\"edge\",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case\"left\":case\"down\":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case\"right\":case\"up\":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}\"vertical\"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger(\"swipe\",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(e.options.swipe===!1||\"ontouchend\"in document&&e.options.swipe===!1||e.options.draggable===!1&&i.type.indexOf(\"mouse\")!==-1))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,e.options.verticalSwiping===!0&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case\"start\":e.swipeStart(i);break;case\"move\":e.swipeMove(i);break;case\"end\":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(l.options.verticalSwiping===!0&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(l.options.rtl===!1?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),l.options.verticalSwiping===!0&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,l.options.infinite===!1&&(0===l.currentSlide&&\"right\"===t||l.currentSlide>=l.getDotCount()&&\"left\"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),l.options.vertical===!1?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,l.options.verticalSwiping===!0&&(l.swipeLeft=e+o*s),l.options.fade!==!0&&l.options.touchMove!==!1&&(l.animating===!0?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;return t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,void(t.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(\".slick-cloned\",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass(\"slick-slide slick-active slick-visible slick-current\").attr(\"aria-hidden\",\"true\").css(\"width\",\"\")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger(\"unslick\",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i,e=this;i=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\"),e.$nextArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\"),0===e.currentSlide?(e.$prevArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$nextArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find(\"li\").removeClass(\"slick-active\").end(),i.$dots.find(\"li\").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass(\"slick-active\"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if(\"object\"==typeof s||\"undefined\"==typeof s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),\"undefined\"!=typeof t)return t;return o}});\r\n","Magento_PageBuilder/js/utils/breakpoints.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Build media query.\r\n         *\r\n         * @param {Object} conditions\r\n         * @returns {String}\r\n         */\r\n        buildMedia: function (conditions) {\r\n            var result = _.map(_.pairs(conditions), function (condition) {\r\n                return '(' + condition.join(': ') + ')';\r\n            });\r\n\r\n            return result.join(' and ');\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/utils/map.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * googleMaps dependency is added within googlemaps.phtml through shim based on API key being set\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'module',\r\n    'Magento_PageBuilder/js/events'\r\n], function (_, module, events) {\r\n    'use strict';\r\n\r\n    var google = window.google || {},\r\n\r\n        /**\r\n         * Generates a google map usable latitude and longitude object\r\n         *\r\n         * @param {Object} position\r\n         * @return {google.maps.LatLng}\r\n         */\r\n        getGoogleLatitudeLongitude = function (position) {\r\n            return new google.maps.LatLng(position.latitude, position.longitude);\r\n        },\r\n        gmAuthFailure = false;\r\n\r\n    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n    /**\r\n     * Google's error listener for map loader failures\r\n     */\r\n    window.gm_authFailure = function () {\r\n        events.trigger('googleMaps:authFailure');\r\n        gmAuthFailure = true;\r\n    };\r\n    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n    return function (element, markers, additionalOptions) {\r\n        var options,\r\n            style;\r\n\r\n        // If we've previously had an API key error, throw the error even again\r\n        if (gmAuthFailure) {\r\n            events.trigger('googleMaps:authFailure');\r\n\r\n            return;\r\n        }\r\n\r\n        // If Google Maps isn't loaded don't try init the map, it won't work\r\n        if (typeof google.maps === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * Just in case of a bad JSON that bypassed validation\r\n         */\r\n        try {\r\n            style = module.config().style ? JSON.parse(module.config().style) : [];\r\n        }\r\n        catch (error) {\r\n            style = [];\r\n        }\r\n        options = _.extend({\r\n            zoom: 8,\r\n            center: getGoogleLatitudeLongitude({\r\n                latitude: 30.2672,\r\n                longitude: -97.7431\r\n            }),\r\n            scrollwheel: false,\r\n            disableDoubleClickZoom: false,\r\n            disableDefaultUI: false,\r\n            mapTypeControl: true,\r\n            mapTypeControlOptions: {\r\n                style: google.maps.MapTypeControlStyle.DEFAULT\r\n            },\r\n            styles: style\r\n        }, additionalOptions);\r\n\r\n        /* Create the map */\r\n        this.map = new google.maps.Map(element, options);\r\n        this.markers = [];\r\n\r\n        /**\r\n         * Callback function on map config update\r\n         * @param {Array} newMarkers\r\n         * @param {Object} updateOptions\r\n         */\r\n        this.onUpdate = function (newMarkers, updateOptions) {\r\n            this.map.setOptions(updateOptions);\r\n            this.setMarkers(newMarkers);\r\n        };\r\n\r\n        /**\r\n         * Sets the markers to selected map\r\n         * @param {Object} newMarkers\r\n         */\r\n        this.setMarkers = function (newMarkers) {\r\n            var activeInfoWindow,\r\n                latitudeLongitudeBounds = new google.maps.LatLngBounds();\r\n\r\n            this.markers.forEach(function (marker) {\r\n                marker.setMap(null);\r\n            }, this);\r\n\r\n            this.markers = [];\r\n            this.bounds = [];\r\n\r\n            /**\r\n             * Creates and set listener for markers\r\n             */\r\n            if (newMarkers && newMarkers.length) {\r\n                newMarkers.forEach(function (newMarker) {\r\n                    var location = _.escape(newMarker['location_name']) || '',\r\n                    comment = newMarker.comment ?\r\n                        '<p>' + _.escape(newMarker.comment).replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>') + '</p>'\r\n                        : '',\r\n                    phone = newMarker.phone ? '<p>Phone: ' + _.escape(newMarker.phone) + '</p>' : '',\r\n                    address = newMarker.address ? _.escape(newMarker.address) + '<br/>' : '',\r\n                    city = _.escape(newMarker.city) || '',\r\n                    country = newMarker.country ? _.escape(newMarker.country) : '',\r\n                    state = newMarker.state ? _.escape(newMarker.state) + ' ' : '',\r\n                    zipCode = newMarker.zipcode ? _.escape(newMarker.zipcode) : '',\r\n                    cityComma = city !== '' && (zipCode !== '' || state !== '') ? ', ' : '',\r\n                    lineBreak = city !== '' || zipCode !== '' ? '<br/>' : '',\r\n                    contentString =\r\n                        '<div>' +\r\n                        '<h3><b>' + location + '</b></h3>' +\r\n                        comment +\r\n                        phone +\r\n                        '<p><span>' + address +\r\n                        city + cityComma + state + zipCode + lineBreak +\r\n                        country + '</span></p>' +\r\n                        '</div>',\r\n                    infowindow = new google.maps.InfoWindow({\r\n                        content: contentString,\r\n                        maxWidth: 350\r\n                    }),\r\n                    newCreatedMarker = new google.maps.Marker({\r\n                        map: this.map,\r\n                        position: getGoogleLatitudeLongitude(newMarker.position),\r\n                        title: location\r\n                    });\r\n\r\n                    if (location) {\r\n                        newCreatedMarker.addListener('click', function () {\r\n                            if (activeInfoWindow) {\r\n                                activeInfoWindow.close();\r\n                            }\r\n\r\n                            infowindow.open(this.map, newCreatedMarker);\r\n                            activeInfoWindow = infowindow;\r\n                        }, this);\r\n                    }\r\n\r\n                    this.markers.push(newCreatedMarker);\r\n                    this.bounds.push(getGoogleLatitudeLongitude(newMarker.position));\r\n                }, this);\r\n            }\r\n\r\n            /**\r\n             * This sets the bounds of the map for multiple locations\r\n             */\r\n            if (this.bounds.length > 1) {\r\n                this.bounds.forEach(function (bound) {\r\n                    latitudeLongitudeBounds.extend(bound);\r\n                });\r\n                this.map.fitBounds(latitudeLongitudeBounds);\r\n            }\r\n\r\n            /**\r\n             * Zoom to 8 if there is only a single location\r\n             */\r\n            if (this.bounds.length === 1) {\r\n                this.map.setCenter(this.bounds[0]);\r\n                this.map.setZoom(8);\r\n            }\r\n        };\r\n\r\n        this.setMarkers(markers);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget/show-on-hover.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Show the overlay on hover of specific elements\r\n     *\r\n     * @param {JQuery<Element>[]} $elements\r\n     */\r\n    function showOverlayOnHover($elements) {\r\n        $elements.each(function (index, element) {\r\n            var overlayEl = $(element).find('.pagebuilder-overlay'),\r\n                overlayColor = overlayEl.attr('data-overlay-color');\r\n\r\n            $(element).on('mouseenter', function () {\r\n                overlayEl.css('background-color', overlayColor);\r\n            });\r\n\r\n            $(element).on('mouseleave', function () {\r\n                overlayEl.css('background-color', 'transparent');\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show button on hover of specific elements\r\n     *\r\n     * @param {JQuery<Element>[]} $elements\r\n     * @param {String} buttonClass\r\n     */\r\n    function showButtonOnHover($elements, buttonClass) {\r\n        $elements.each(function (index, element) {\r\n            var buttonEl = $(element).find(buttonClass);\r\n\r\n            $(element).on('mouseenter', function () {\r\n                buttonEl.css({\r\n                    'opacity': '1',\r\n                    'visibility': 'visible'\r\n                });\r\n            });\r\n\r\n            $(element).on('mouseleave', function () {\r\n                buttonEl.css({\r\n                    'opacity': '0',\r\n                    'visibility': 'hidden'\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    return function (config) {\r\n\r\n        var buttonSelector = config.buttonSelector,\r\n            overlayHoverSelector = 'div[data-content-type=\"%s\"][data-show-overlay=\"%s\"]'\r\n                .replace('%s', config.dataRole)\r\n                .replace('%s', config.showOverlay),\r\n            overlayButtonSelector = 'div[data-content-type=\"%s\"][data-show-button=\"%s\"]'\r\n                .replace('%s', config.dataRole)\r\n                .replace('%s', config.showOverlay);\r\n\r\n        showOverlayOnHover($(overlayHoverSelector));\r\n        showButtonOnHover($(overlayButtonSelector), buttonSelector);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget/video-background.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jarallax',\r\n    'jarallaxVideo',\r\n    'vimeoWrapper'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            parallaxSpeed = $element.data('enableParallax') !== 1 ? 1 : parseFloat($element.data('parallaxSpeed'));\r\n\r\n        if ($element.data('background-type') !== 'video') {\r\n            return;\r\n        }\r\n\r\n        $element.addClass('jarallax');\r\n        $element.attr('data-jarallax', '');\r\n\r\n        window.jarallax($element[0], {\r\n            imgSrc: $element.data('videoFallbackSrc'),\r\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5,\r\n            videoLoop: $element.data('videoLoop'),\r\n            videoPlayOnlyVisible: $element.data('videoPlayOnlyVisible'),\r\n            videoLazyLoading: $element.data('videoLazyLoad'),\r\n            disableVideo: false,\r\n            elementInViewport: $element.data('elementInViewport') &&\r\n                $element[0].querySelector($element.data('elementInViewport'))\r\n        });\r\n        $element[0].jarallax.video && $element[0].jarallax.video.on('started', function () {\r\n            if ($element[0].jarallax.$video) {\r\n                $element[0].jarallax.$video.style.visibility = 'visible';\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_PageCache/js/form-key-provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (settings) {\r\n        var formKey,\r\n            inputElements,\r\n            inputSelector = 'input[name=\"form_key\"]';\r\n\r\n        /**\r\n         * Set form_key cookie\r\n         * @private\r\n         */\r\n        function setFormKeyCookie(value) {\r\n            var expires,\r\n                secure,\r\n                date = new Date(),\r\n                cookiesConfig = window.cookiesConfig || {},\r\n                isSecure = !!cookiesConfig.secure,\r\n                samesite = cookiesConfig.samesite || 'lax';\r\n\r\n            date.setTime(date.getTime() + 86400000);\r\n            expires = '; expires=' + date.toUTCString();\r\n            secure = isSecure ? '; secure' : '';\r\n            samesite = '; samesite=' + samesite;\r\n\r\n            document.cookie = 'form_key=' + (value || '') + expires + secure + '; path=/' + samesite;\r\n        }\r\n\r\n        /**\r\n         * Retrieves form key from cookie\r\n         * @private\r\n         */\r\n        function getFormKeyCookie() {\r\n            var cookie,\r\n                i,\r\n                nameEQ = 'form_key=',\r\n                cookieArr = document.cookie.split(';');\r\n\r\n            for (i = 0; i < cookieArr.length; i++) {\r\n                cookie = cookieArr[i];\r\n\r\n                while (cookie.charAt(0) === ' ') {\r\n                    cookie = cookie.substring(1, cookie.length);\r\n                }\r\n\r\n                if (cookie.indexOf(nameEQ) === 0) {\r\n                    return cookie.substring(nameEQ.length, cookie.length);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Get form key from UI input hidden\r\n         * @private\r\n         */\r\n        function getFormKeyFromUI() {\r\n            return document.querySelector(inputSelector).value;\r\n        }\r\n\r\n        /**\r\n         * Generate form key string\r\n         * @private\r\n         */\r\n        function generateFormKeyString() {\r\n            var result = '',\r\n                length = 16,\r\n                chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n            while (length--) {\r\n                result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        /**\r\n         * Init form_key inputs with value\r\n         * @private\r\n         */\r\n        function initFormKey() {\r\n            formKey = getFormKeyCookie();\r\n\r\n            if (settings && settings.isPaginationCacheEnabled && !formKey) {\r\n                formKey = getFormKeyFromUI();\r\n                setFormKeyCookie(formKey);\r\n            }\r\n\r\n            if (!formKey) {\r\n                formKey = generateFormKeyString();\r\n                setFormKeyCookie(formKey);\r\n            }\r\n            inputElements = document.querySelectorAll(inputSelector);\r\n\r\n            if (inputElements.length) {\r\n                Array.prototype.forEach.call(inputElements, function (element) {\r\n                    element.setAttribute('value', formKey);\r\n                });\r\n            }\r\n        }\r\n\r\n        initFormKey();\r\n    };\r\n});\r\n","Magento_PageCache/js/page-cache.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'domReady',\r\n    'consoleLogger',\r\n    'Magento_PageCache/js/form-key-provider',\r\n    'jquery-ui-modules/widget',\r\n    'mage/cookies'\r\n], function ($, domReady, consoleLogger, formKeyInit) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Helper. Generate random string\r\n     * TODO: Merge with mage/utils\r\n     * @param {String} chars - list of symbols\r\n     * @param {Number} length - length for need string\r\n     * @returns {String}\r\n     */\r\n    function generateRandomString(chars, length) {\r\n        var result = '';\r\n\r\n        length = length > 0 ? length : 1;\r\n\r\n        while (length--) {\r\n            result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Nodes tree to flat list converter\r\n     * @returns {Array}\r\n     */\r\n    $.fn.comments = function () {\r\n        var elements = [],\r\n            contents,\r\n            elementContents;\r\n\r\n        /**\r\n         * @param {jQuery} element - Comment holder\r\n         */\r\n        (function lookup(element) {\r\n            var iframeHostName;\r\n\r\n            // prevent cross origin iframe content reading\r\n            if ($(element).prop('tagName') === 'IFRAME') {\r\n                iframeHostName = $('<a>').prop('href', $(element).prop('src'))\r\n                    .prop('hostname');\r\n\r\n                if (window.location.hostname !== iframeHostName) {\r\n                    return [];\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Rewrite jQuery contents().\r\n             *\r\n             * @param {jQuery} elem\r\n             */\r\n            contents = function (elem) {\r\n                return $.map(elem, function (el) {\r\n                    try {\r\n                        return el.nodeName.toLowerCase() === 'iframe' ?\r\n                            el.contentDocument || (el.contentWindow ? el.contentWindow.document : []) :\r\n                            $.merge([], el.childNodes);\r\n                    } catch (e) {\r\n                        consoleLogger.error(e);\r\n\r\n                        return [];\r\n                    }\r\n                });\r\n            };\r\n\r\n            elementContents = contents($(element));\r\n\r\n            $.each(elementContents, function (index, el) {\r\n                switch (el.nodeType) {\r\n                    case 1: // ELEMENT_NODE\r\n                        lookup(el);\r\n                        break;\r\n\r\n                    case 8: // COMMENT_NODE\r\n                        elements.push(el);\r\n                        break;\r\n\r\n                    case 9: // DOCUMENT_NODE\r\n                        lookup($(el).find('body'));\r\n                        break;\r\n                }\r\n            });\r\n        })(this);\r\n\r\n        return elements;\r\n    };\r\n\r\n    /**\r\n     * FormKey Widget - this widget is generating from key, saves it to cookie and\r\n     * @deprecated see Magento/PageCache/view/frontend/web/js/form-key-provider.js\r\n     */\r\n    $.widget('mage.formKey', {\r\n        options: {\r\n            inputSelector: 'input[name=\"form_key\"]',\r\n            allowedCharacters: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\r\n            length: 16\r\n        },\r\n\r\n        /**\r\n         * Creates widget 'mage.formKey'\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var formKey = $.mage.cookies.get('form_key'),\r\n                options = {\r\n                    secure: window.cookiesConfig ? window.cookiesConfig.secure : false\r\n                };\r\n\r\n            if (!formKey) {\r\n                formKey = generateRandomString(this.options.allowedCharacters, this.options.length);\r\n                $.mage.cookies.set('form_key', formKey, options);\r\n            }\r\n            $(this.options.inputSelector).val(formKey);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * PageCache Widget\r\n     * Handles additional ajax request for rendering user private content.\r\n     */\r\n    $.widget('mage.pageCache', {\r\n        options: {\r\n            url: '/',\r\n            patternPlaceholderOpen: /^ BLOCK (.+) $/,\r\n            patternPlaceholderClose: /^ \\/BLOCK (.+) $/,\r\n            versionCookieName: 'private_content_version',\r\n            handles: []\r\n        },\r\n\r\n        /**\r\n         * Creates widget 'mage.pageCache'\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var placeholders,\r\n                version = $.mage.cookies.get(this.options.versionCookieName);\r\n\r\n            if (!version) {\r\n                return;\r\n            }\r\n            placeholders = this._searchPlaceholders(this.element.comments());\r\n\r\n            if (placeholders && placeholders.length) {\r\n                this._ajax(placeholders, version);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Parse page for placeholders.\r\n         * @param {Array} elements\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _searchPlaceholders: function (elements) {\r\n            var placeholders = [],\r\n                tmp = {},\r\n                ii,\r\n                len,\r\n                el, matches, name;\r\n\r\n            if (!(elements && elements.length)) {\r\n                return placeholders;\r\n            }\r\n\r\n            for (ii = 0, len = elements.length; ii < len; ii++) {\r\n                el = elements[ii];\r\n                matches = this.options.patternPlaceholderOpen.exec(el.nodeValue);\r\n                name = null;\r\n\r\n                if (matches) {\r\n                    name = matches[1];\r\n                    tmp[name] = {\r\n                        name: name,\r\n                        openElement: el\r\n                    };\r\n                } else {\r\n                    matches = this.options.patternPlaceholderClose.exec(el.nodeValue);\r\n\r\n                    if (matches) { //eslint-disable-line max-depth\r\n                        name = matches[1];\r\n\r\n                        if (tmp[name]) { //eslint-disable-line max-depth\r\n                            tmp[name].closeElement = el;\r\n                            placeholders.push(tmp[name]);\r\n                            delete tmp[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return placeholders;\r\n        },\r\n\r\n        /**\r\n         * Parse for page and replace placeholders\r\n         * @param {Object} placeholder\r\n         * @param {Object} html\r\n         * @protected\r\n         */\r\n        _replacePlaceholder: function (placeholder, html) {\r\n            var startReplacing = false,\r\n                prevSibling = null,\r\n                parent, contents, yy, len, element;\r\n\r\n            if (!placeholder || !html) {\r\n                return;\r\n            }\r\n\r\n            parent = $(placeholder.openElement).parent();\r\n            contents = parent.contents();\r\n\r\n            for (yy = 0, len = contents.length; yy < len; yy++) {\r\n                element = contents[yy];\r\n\r\n                if (element == placeholder.openElement) { //eslint-disable-line eqeqeq\r\n                    startReplacing = true;\r\n                }\r\n\r\n                if (startReplacing) {\r\n                    $(element).remove();\r\n                } else if (element.nodeType != 8) { //eslint-disable-line eqeqeq\r\n                    //due to comment tag doesn't have siblings we try to find it manually\r\n                    prevSibling = element;\r\n                }\r\n\r\n                if (element == placeholder.closeElement) { //eslint-disable-line eqeqeq\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (prevSibling) {\r\n                $(prevSibling).after(html);\r\n            } else {\r\n                $(parent).prepend(html);\r\n            }\r\n\r\n            // trigger event to use mage-data-init attribute\r\n            $(parent).trigger('contentUpdated');\r\n        },\r\n\r\n        /**\r\n         * AJAX helper\r\n         * @param {Object} placeholders\r\n         * @param {String} version\r\n         * @private\r\n         */\r\n        _ajax: function (placeholders, version) {\r\n            var ii,\r\n                data = {\r\n                    blocks: [],\r\n                    handles: this.options.handles,\r\n                    originalRequest: this.options.originalRequest,\r\n                    version: version\r\n                };\r\n\r\n            for (ii = 0; ii < placeholders.length; ii++) {\r\n                data.blocks.push(placeholders[ii].name);\r\n            }\r\n            data.blocks = JSON.stringify(data.blocks.sort());\r\n            data.handles = JSON.stringify(data.handles);\r\n            data.originalRequest = JSON.stringify(data.originalRequest);\r\n            $.ajax({\r\n                url: this.options.url,\r\n                data: data,\r\n                type: 'GET',\r\n                cache: true,\r\n                dataType: 'json',\r\n                context: this,\r\n\r\n                /**\r\n                 * Response handler\r\n                 * @param {Object} response\r\n                 */\r\n                success: function (response) {\r\n                    var placeholder, i;\r\n\r\n                    for (i = 0; i < placeholders.length; i++) {\r\n                        placeholder = placeholders[i];\r\n\r\n                        if (response.hasOwnProperty(placeholder.name)) {\r\n                            this._replacePlaceholder(placeholder, response[placeholder.name]);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    domReady(function () {\r\n        formKeyInit();\r\n    });\r\n\r\n    return {\r\n        'pageCache': $.mage.pageCache,\r\n        'formKey': $.mage.formKey\r\n    };\r\n});\r\n","Magento_Payment/js/cc-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.creditCardType', {\r\n        options: {\r\n            typeCodes: ['SS', 'SM', 'SO'] // Type codes for Switch/Maestro/Solo credit cards.\r\n        },\r\n\r\n        /**\r\n         * Bind change handler to select element and trigger the event to show/hide\r\n         * the Switch/Maestro or Solo credit card type container for those credit card types.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(this._toggleCardType, this)).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Toggle the Switch/Maestro and Solo credit card type container depending on which\r\n         * credit card type is selected.\r\n         * @private\r\n         */\r\n        _toggleCardType: function () {\r\n            $(this.options.creditCardTypeContainer)\r\n                .toggle($.inArray(this.element.val(), this.options.typeCodes) !== -1);\r\n        }\r\n    });\r\n\r\n    return $.mage.creditCardType;\r\n});\r\n","Magento_Payment/js/transparent.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Payment/js/model/credit-card-validation/validator',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function ($, mageTemplate, alert, ui, validator, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    $.widget('mage.transparent', {\r\n        options: {\r\n            context: null,\r\n            placeOrderSelector: '[data-role=\"review-save\"]',\r\n            paymentFormSelector: '#co-payment-form',\r\n            updateSelectorPrefix: '#checkout-',\r\n            updateSelectorSuffix: '-load',\r\n            hiddenFormTmpl:\r\n                '<form target=\"<%= data.target %>\" action=\"<%= data.action %>\" method=\"POST\" ' +\r\n                'hidden enctype=\"application/x-www-form-urlencoded\" class=\"no-display\">' +\r\n                    '<% _.each(data.inputs, function(val, key){ %>' +\r\n                    '<input value=\"<%= val %>\" name=\"<%= key %>\" type=\"hidden\">' +\r\n                    '<% }); %>' +\r\n                '</form>',\r\n            reviewAgreementForm: '#checkout-agreements',\r\n            cgiUrl: null,\r\n            orderSaveUrl: null,\r\n            controller: null,\r\n            gateway: null,\r\n            dateDelim: null,\r\n            cardFieldsMap: null,\r\n            expireYearLength: 2\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.hiddenFormTmpl = mageTemplate(this.options.hiddenFormTmpl);\r\n\r\n            if (this.options.context) {\r\n                this.options.context.setPlaceOrderHandler($.proxy(this._orderSave, this));\r\n                this.options.context.setValidateHandler($.proxy(this._validateHandler, this));\r\n            } else {\r\n                $(this.options.placeOrderSelector)\r\n                    .off('click')\r\n                    .on('click', $.proxy(this._placeOrderHandler, this));\r\n            }\r\n\r\n            this.element.validation();\r\n            $('[data-container=\"' + this.options.gateway + '-cc-number\"]').on('focusout', function () {\r\n                $(this).valid();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * handler for credit card validation\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _validateHandler: function () {\r\n            return this.element.validation && this.element.validation('isValid');\r\n        },\r\n\r\n        /**\r\n         * handler for Place Order button to call gateway for credit card validation\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _placeOrderHandler: function () {\r\n            if (this._validateHandler()) {\r\n                this._orderSave();\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Save order and generate post data for gateway call\r\n         * @private\r\n         */\r\n        _orderSave: function () {\r\n            var postData = $(this.options.paymentFormSelector).serialize();\r\n\r\n            if ($(this.options.reviewAgreementForm).length) {\r\n                postData += '&' + $(this.options.reviewAgreementForm).serialize();\r\n            }\r\n            postData += '&controller=' + this.options.controller;\r\n            postData += '&cc_type=' + this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-type\"]'\r\n            ).val();\r\n\r\n            return $.ajax({\r\n                url: this.options.orderSaveUrl,\r\n                type: 'post',\r\n                context: this,\r\n                data: postData,\r\n                dataType: 'json',\r\n\r\n                /**\r\n                 * {Function}\r\n                 */\r\n                beforeSend: function () {\r\n                    fullScreenLoader.startLoader();\r\n                },\r\n\r\n                /**\r\n                 * {Function}\r\n                 */\r\n                success: function (response) {\r\n                    var preparedData,\r\n                        msg,\r\n\r\n                        /**\r\n                         * {Function}\r\n                         */\r\n                        alertActionHandler = function () {\r\n                            // default action\r\n                        };\r\n\r\n                    if (response.success && response[this.options.gateway]) {\r\n                        preparedData = this._preparePaymentData(\r\n                            response[this.options.gateway].fields,\r\n                            this.options.cardFieldsMap\r\n                        );\r\n                        this._postPaymentToGateway(preparedData);\r\n                    } else {\r\n                        fullScreenLoader.stopLoader(true);\r\n\r\n                        msg = response['error_messages'];\r\n\r\n                        if (this.options.context) {\r\n                            this.options.context.clearTimeout().fail();\r\n                            alertActionHandler = this.options.context.alertActionHandler;\r\n                        }\r\n\r\n                        if (typeof msg === 'object') {\r\n                            msg = msg.join('\\n');\r\n                        }\r\n\r\n                        if (msg) {\r\n                            alert(\r\n                                {\r\n                                    content: msg,\r\n                                    actions: {\r\n\r\n                                        /**\r\n                                         * {Function}\r\n                                         */\r\n                                        always: alertActionHandler\r\n                                    }\r\n                                }\r\n                            );\r\n                        }\r\n                    }\r\n                }.bind(this)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Post data to gateway for credit card validation\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _postPaymentToGateway: function (data) {\r\n            var tmpl,\r\n                iframeSelector = '[data-container=\"' + this.options.gateway + '-transparent-iframe\"]';\r\n\r\n            tmpl = this.hiddenFormTmpl({\r\n                data: {\r\n                    target: $(iframeSelector).attr('name'),\r\n                    action: this.options.cgiUrl,\r\n                    inputs: data\r\n                }\r\n            });\r\n            $(tmpl).appendTo($(iframeSelector)).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Add credit card fields to post data for gateway\r\n         * @param {Object} data\r\n         * @param {Object} ccfields\r\n         * @private\r\n         */\r\n        _preparePaymentData: function (data, ccfields) {\r\n            var preparedata;\r\n\r\n            if (this.element.find('[data-container=\"' + this.options.gateway + '-cc-cvv\"]').length) {\r\n                data[ccfields.cccvv] = this.element.find(\r\n                    '[data-container=\"' + this.options.gateway + '-cc-cvv\"]'\r\n                ).val();\r\n            }\r\n            preparedata = this._prepareExpDate();\r\n            data[ccfields.ccexpdate] = preparedata.month + this.options.dateDelim + preparedata.year;\r\n            data[ccfields.ccnum] = this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-number\"]'\r\n            ).val();\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Grab Month and Year into one\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _prepareExpDate: function () {\r\n            var year = this.element.find('[data-container=\"' + this.options.gateway + '-cc-year\"]').val(),\r\n                month = parseInt(\r\n                    this.element.find('[data-container=\"' + this.options.gateway + '-cc-month\"]').val(),\r\n                    10\r\n                );\r\n\r\n            if (year.length > this.options.expireYearLength) {\r\n                year = year.substring(year.length - this.options.expireYearLength);\r\n            }\r\n\r\n            if (month < 10) {\r\n                month = '0' + month;\r\n            }\r\n\r\n            return {\r\n                month: month, year: year\r\n            };\r\n        }\r\n    });\r\n\r\n    return $.mage.transparent;\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        creditCard: null,\r\n        creditCardNumber: null,\r\n        expirationMonth: null,\r\n        expirationYear: null,\r\n        cvvCode: null\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type'\r\n], function (utils, luhn10, creditCardTypes) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} card\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} isValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(card, isPotentiallyValid, isValid) {\r\n        return {\r\n            card: card,\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var potentialTypes,\r\n            cardType,\r\n            valid,\r\n            i,\r\n            maxLength;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        value = value.replace(/\\s+/g, '');\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        potentialTypes = creditCardTypes.getCardTypes(value);\r\n\r\n        if (potentialTypes.length === 0) {\r\n            return resultWrapper(null, false, false);\r\n        } else if (potentialTypes.length !== 1) {\r\n            return resultWrapper(null, true, false);\r\n        }\r\n\r\n        cardType = potentialTypes[0];\r\n\r\n        if (cardType.type === 'unionpay') {  // UnionPay is not Luhn 10 compliant\r\n            valid = true;\r\n        } else {\r\n            valid = luhn10(value);\r\n        }\r\n\r\n        for (i = 0; i < cardType.lengths.length; i++) {\r\n            if (cardType.lengths[i] === value.length) {\r\n                return resultWrapper(cardType, valid, valid);\r\n            }\r\n        }\r\n\r\n        maxLength = Math.max.apply(null, cardType.lengths);\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(cardType, true, false);\r\n        }\r\n\r\n        return resultWrapper(cardType, false, false);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/cvv-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    /**\r\n     * CVV number validation.\r\n     * Validate digit count for CVV code.\r\n     *\r\n     * @param {*} value\r\n     * @param {Number} maxLength\r\n     * @return {Object}\r\n     */\r\n    return function (value, maxLength) {\r\n        var DEFAULT_LENGTH = 3;\r\n\r\n        maxLength = maxLength || DEFAULT_LENGTH;\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (value.length === maxLength) {\r\n            return resultWrapper(true, true);\r\n        }\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (value.length > maxLength) {\r\n            return resultWrapper(false, false);\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator'\r\n], function (utils, parseDate, expirationMonth, expirationYear) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} month\r\n     * @param {*} year\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid, month, year) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid,\r\n            month: month,\r\n            year: year\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var date,\r\n            monthValid,\r\n            yearValid;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(false, false, null, null);\r\n        }\r\n\r\n        value = value.replace(/^(\\d\\d) (\\d\\d(\\d\\d)?)$/, '$1/$2');\r\n        date = parseDate(value);\r\n        monthValid = expirationMonth(date.month);\r\n        yearValid = expirationYear(date.year);\r\n\r\n        if (monthValid.isValid && yearValid.isValid) {\r\n            return resultWrapper(true, true, date.month, date.year);\r\n        }\r\n\r\n        if (monthValid.isPotentiallyValid && yearValid.isPotentiallyValid) {\r\n            return resultWrapper(false, true, null, null);\r\n        }\r\n\r\n        return resultWrapper(false, false, null, null);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/model/credit-card-validation/cvv-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'mage/translate'\r\n], function ($, cvvValidator, creditCardNumberValidator, yearValidator, monthValidator, creditCardData) {\r\n    'use strict';\r\n\r\n    $('.payment-method-content input[type=\"number\"]').on('keyup', function () {\r\n        if ($(this).val() < 0) {\r\n            $(this).val($(this).val().replace(/^-/, ''));\r\n        }\r\n    });\r\n\r\n    $.each({\r\n        'validate-card-type': [\r\n            function (number, item, allowedTypes) {\r\n                var cardInfo,\r\n                    i,\r\n                    l;\r\n\r\n                if (!creditCardNumberValidator(number).isValid) {\r\n                    return false;\r\n                }\r\n\r\n                cardInfo = creditCardNumberValidator(number).card;\r\n\r\n                for (i = 0, l = allowedTypes.length; i < l; i++) {\r\n                    if (cardInfo.title == allowedTypes[i].type) { //eslint-disable-line eqeqeq\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            },\r\n            $.mage.__('Please enter a valid credit card type number.')\r\n        ],\r\n        'validate-card-number': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             *\r\n             * @param {*} number - credit card number\r\n             * @return {Boolean}\r\n             */\r\n            function (number) {\r\n                return creditCardNumberValidator(number).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card number.')\r\n        ],\r\n        'validate-card-date': [\r\n\r\n            /**\r\n             * Validate credit card expiration month\r\n             *\r\n             * @param {String} date - month\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return monthValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration month.')\r\n        ],\r\n        'validate-card-cvv': [\r\n\r\n            /**\r\n             * Validate cvv\r\n             *\r\n             * @param {String} cvv - card verification value\r\n             * @return {Boolean}\r\n             */\r\n            function (cvv) {\r\n                var maxLength = creditCardData.creditCard ? creditCardData.creditCard.code.size : 3;\r\n\r\n                return cvvValidator(cvv, maxLength).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card verification number.')\r\n        ],\r\n        'validate-card-year': [\r\n\r\n            /**\r\n             * Validate credit card expiration year\r\n             *\r\n             * @param {String} date - year\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return yearValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration year.')\r\n        ]\r\n\r\n    }, function (i, rule) {\r\n        rule.unshift(i);\r\n        $.validator.addMethod.apply($.validator, rule);\r\n    });\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mageUtils'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    var types = [\r\n        {\r\n            title: 'Visa',\r\n            type: 'VI',\r\n            pattern: '^4\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'MasterCard',\r\n            type: 'MC',\r\n            pattern: '^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'American Express',\r\n            type: 'AE',\r\n            pattern: '^3([47]\\\\d*)?$',\r\n            isAmex: true,\r\n            gaps: [4, 10],\r\n            lengths: [15],\r\n            code: {\r\n                name: 'CID',\r\n                size: 4\r\n            }\r\n        },\r\n        {\r\n            title: 'Diners',\r\n            type: 'DN',\r\n            pattern: '^(3(0[0-5]|095|6|[8-9]))\\\\d*$',\r\n            gaps: [4, 10],\r\n            lengths: [14, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Discover',\r\n            type: 'DI',\r\n            pattern: '^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CID',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'JCB',\r\n            type: 'JCB',\r\n            pattern: '^35(2[8-9]|[3-8])\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'UnionPay',\r\n            type: 'UN',\r\n            pattern: '^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVN',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro International',\r\n            type: 'MI',\r\n            pattern: '^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro Domestic',\r\n            type: 'MD',\r\n            pattern: '^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Hipercard',\r\n            type: 'HC',\r\n            pattern: '^((606282)|(637095)|(637568)|(637599)|(637609)|(637612))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [13, 16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Elo',\r\n            type: 'ELO',\r\n            pattern: '^((509091)|(636368)|(636297)|(504175)|(438935)|(40117[8-9])|(45763[1-2])|' +\r\n                '(457393)|(431274)|(50990[0-2])|(5099[7-9][0-9])|(50996[4-9])|(509[1-8][0-9][0-9])|' +\r\n                '(5090(0[0-2]|0[4-9]|1[2-9]|[24589][0-9]|3[1-9]|6[0-46-9]|7[0-24-9]))|' +\r\n                '(5067(0[0-24-8]|1[0-24-9]|2[014-9]|3[0-379]|4[0-9]|5[0-3]|6[0-5]|7[0-8]))|' +\r\n                '(6504(0[5-9]|1[0-9]|2[0-9]|3[0-9]))|' +\r\n                '(6504(8[5-9]|9[0-9])|6505(0[0-9]|1[0-9]|2[0-9]|3[0-8]))|' +\r\n                '(6505(4[1-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-8]))|' +\r\n                '(6507(0[0-9]|1[0-8]))|(65072[0-7])|(6509(0[1-9]|1[0-9]|20))|' +\r\n                '(6516(5[2-9]|6[0-9]|7[0-9]))|(6550(0[0-9]|1[0-9]))|' +\r\n                '(6550(2[1-9]|3[0-9]|4[0-9]|5[0-8])))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Aura',\r\n            type: 'AU',\r\n            pattern: '^5078\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        }\r\n    ];\r\n\r\n    return {\r\n        /**\r\n         * @param {*} cardNumber\r\n         * @return {Array}\r\n         */\r\n        getCardTypes: function (cardNumber) {\r\n            var i, value,\r\n                result = [];\r\n\r\n            if (utils.isEmpty(cardNumber)) {\r\n                return result;\r\n            }\r\n\r\n            if (cardNumber === '') {\r\n                return $.extend(true, {}, types);\r\n            }\r\n\r\n            for (i = 0; i < types.length; i++) {\r\n                value = types[i];\r\n\r\n                if (new RegExp(value.pattern).test(cardNumber)) {\r\n                    result.push($.extend(true, {}, value));\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Luhn algorithm verification\r\n     */\r\n    return function (a, b, c, d, e) {\r\n        for (d = +a[b = a.length - 1], e = 0; b--;) {\r\n            c = +a[b];\r\n            d += ++e % 2 ? 2 * c % 10 + (c > 4) : c;\r\n        }\r\n\r\n        return !(d % 10);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var month,\r\n            monthValid;\r\n\r\n        if (value.replace(/\\s/g, '') === '' || value === '0') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (isNaN(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        month = parseInt(value, 10);\r\n        monthValid = month > 0 && month < 13;\r\n\r\n        return resultWrapper(monthValid, monthValid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var currentYear = new Date().getFullYear(),\r\n            len = value.length,\r\n            valid,\r\n            expMaxLifetime = 19;\r\n\r\n        if (value.replace(/\\s/g, '') === '') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (len !== 4) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        value = parseInt(value, 10);\r\n        valid = value >= currentYear && value <= currentYear + expMaxLifetime;\r\n\r\n        return resultWrapper(valid, valid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (value) {\r\n        var month, len;\r\n\r\n        if (value.match('/')) {\r\n            value = value.split(/\\s*\\/\\s*/g);\r\n\r\n            return {\r\n                month: value[0],\r\n                year: value.slice(1).join()\r\n            };\r\n        }\r\n\r\n        len = value[0] === '0' || value.length > 5 || value.length === 4 || value.length === 3 ? 2 : 1;\r\n        month = value.substr(0, len);\r\n\r\n        return {\r\n            month: month,\r\n            year: value.substr(month.length, 4)\r\n        };\r\n    };\r\n});\r\n","Magento_Payment/js/view/payment/cc-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'mage/translate'\r\n], function (_, Component, creditCardData, cardNumberValidator, $t) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            creditCardType: '',\r\n            creditCardExpYear: '',\r\n            creditCardExpMonth: '',\r\n            creditCardNumber: '',\r\n            creditCardSsStartMonth: '',\r\n            creditCardSsStartYear: '',\r\n            creditCardSsIssue: '',\r\n            creditCardVerificationNumber: '',\r\n            selectedCardType: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'creditCardType',\r\n                    'creditCardExpYear',\r\n                    'creditCardExpMonth',\r\n                    'creditCardNumber',\r\n                    'creditCardVerificationNumber',\r\n                    'creditCardSsStartMonth',\r\n                    'creditCardSsStartYear',\r\n                    'creditCardSsIssue',\r\n                    'selectedCardType'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init component\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            //Set credit card number to credit card data object\r\n            this.creditCardNumber.subscribe(function (value) {\r\n                var result;\r\n\r\n                self.selectedCardType(null);\r\n\r\n                if (value === '' || value === null) {\r\n                    return false;\r\n                }\r\n                result = cardNumberValidator(value);\r\n\r\n                if (!result.isPotentiallyValid && !result.isValid) {\r\n                    return false;\r\n                }\r\n\r\n                if (result.card !== null) {\r\n                    self.selectedCardType(result.card.type);\r\n                    creditCardData.creditCard = result.card;\r\n                }\r\n\r\n                if (result.isValid) {\r\n                    creditCardData.creditCardNumber = value;\r\n                    self.creditCardType(result.card.type);\r\n                }\r\n            });\r\n\r\n            //Set expiration year to credit card data object\r\n            this.creditCardExpYear.subscribe(function (value) {\r\n                creditCardData.expirationYear = value;\r\n            });\r\n\r\n            //Set expiration month to credit card data object\r\n            this.creditCardExpMonth.subscribe(function (value) {\r\n                creditCardData.expirationMonth = value;\r\n            });\r\n\r\n            //Set cvv code to credit card data object\r\n            this.creditCardVerificationNumber.subscribe(function (value) {\r\n                creditCardData.cvvCode = value;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'cc';\r\n        },\r\n\r\n        /**\r\n         * Get data\r\n         * @returns {Object}\r\n         */\r\n        getData: function () {\r\n            return {\r\n                'method': this.item.method,\r\n                'additional_data': {\r\n                    'cc_cid': this.creditCardVerificationNumber(),\r\n                    'cc_ss_start_month': this.creditCardSsStartMonth(),\r\n                    'cc_ss_start_year': this.creditCardSsStartYear(),\r\n                    'cc_ss_issue': this.creditCardSsIssue(),\r\n                    'cc_type': this.creditCardType(),\r\n                    'cc_exp_year': this.creditCardExpYear(),\r\n                    'cc_exp_month': this.creditCardExpMonth(),\r\n                    'cc_number': this.creditCardNumber()\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get list of available credit card types\r\n         * @returns {Object}\r\n         */\r\n        getCcAvailableTypes: function () {\r\n            return window.checkoutConfig.payment.ccform.availableTypes[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get payment icons\r\n         * @param {String} type\r\n         * @returns {Boolean}\r\n         */\r\n        getIcons: function (type) {\r\n            return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type) ?\r\n                window.checkoutConfig.payment.ccform.icons[type]\r\n                : false;\r\n        },\r\n\r\n        /**\r\n         * Get list of months\r\n         * @returns {Object}\r\n         */\r\n        getCcMonths: function () {\r\n            return window.checkoutConfig.payment.ccform.months[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get list of years\r\n         * @returns {Object}\r\n         */\r\n        getCcYears: function () {\r\n            return window.checkoutConfig.payment.ccform.years[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Check if current payment has verification\r\n         * @returns {Boolean}\r\n         */\r\n        hasVerification: function () {\r\n            return window.checkoutConfig.payment.ccform.hasVerification[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Boolean}\r\n         */\r\n        hasSsCardType: function () {\r\n            return window.checkoutConfig.payment.ccform.hasSsCardType[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get image url for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageUrl: function () {\r\n            return window.checkoutConfig.payment.ccform.cvvImageUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get image for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageHtml: function () {\r\n            return '<img src=\"' + this.getCvvImageUrl() +\r\n                '\" alt=\"' + $t('Card Verification Number Visual Reference') +\r\n                '\" title=\"' + $t('Card Verification Number Visual Reference') +\r\n                '\" />';\r\n        },\r\n\r\n        /**\r\n         * Get unsanitized html for image for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageUnsanitizedHtml: function () {\r\n            return this.getCvvImageHtml();\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Object}\r\n         */\r\n        getSsStartYears: function () {\r\n            return window.checkoutConfig.payment.ccform.ssStartYears[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get list of available credit card types values\r\n         * @returns {Object}\r\n         */\r\n        getCcAvailableTypesValues: function () {\r\n            return _.map(this.getCcAvailableTypes(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'type': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get list of available month values\r\n         * @returns {Object}\r\n         */\r\n        getCcMonthsValues: function () {\r\n            return _.map(this.getCcMonths(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'month': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get list of available year values\r\n         * @returns {Object}\r\n         */\r\n        getCcYearsValues: function () {\r\n            return _.map(this.getCcYears(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'year': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Object}\r\n         */\r\n        getSsStartYearsValues: function () {\r\n            return _.map(this.getSsStartYears(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'year': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Is legend available to display\r\n         * @returns {Boolean}\r\n         */\r\n        isShowLegend: function () {\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get available credit card type by code\r\n         * @param {String} code\r\n         * @returns {String}\r\n         */\r\n        getCcTypeTitleByCode: function (code) {\r\n            var title = '',\r\n                keyValue = 'value',\r\n                keyType = 'type';\r\n\r\n            _.each(this.getCcAvailableTypesValues(), function (value) {\r\n                if (value[keyValue] === code) {\r\n                    title = value[keyType];\r\n                }\r\n            });\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Prepare credit card number to output\r\n         * @param {String} number\r\n         * @returns {String}\r\n         */\r\n        formatDisplayCcNumber: function (number) {\r\n            return 'xxxx-' + number.substr(-4);\r\n        },\r\n\r\n        /**\r\n         * Get credit card details\r\n         * @returns {Array}\r\n         */\r\n        getInfo: function () {\r\n            return [\r\n                {\r\n                    'name': 'Credit Card Type', value: this.getCcTypeTitleByCode(this.creditCardType())\r\n                },\r\n                {\r\n                    'name': 'Credit Card Number', value: this.formatDisplayCcNumber(this.creditCardNumber())\r\n                }\r\n            ];\r\n        }\r\n    });\r\n});\r\n","Magento_Payment/js/view/payment/iframe.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/view/payment/cc-form',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/set-payment-information',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/modal/alert'\r\n], function (\r\n    $,\r\n    Component,\r\n    messageList,\r\n    $t,\r\n    fullScreenLoader,\r\n    setPaymentInformationAction,\r\n    additionalValidators,\r\n    alert\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Payment/payment/iframe',\r\n            timeoutId: null,\r\n            timeoutMessage: 'Sorry, but something went wrong.'\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getSource: function () {\r\n            return window.checkoutConfig.payment.iframe.source[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getControllerName: function () {\r\n            return window.checkoutConfig.payment.iframe.controllerName[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getPlaceOrderUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.placeOrderUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCgiUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.cgiUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getSaveOrderUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.saveOrderUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getDateDelim: function () {\r\n            return window.checkoutConfig.payment.iframe.dateDelim[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCardFieldsMap: function () {\r\n            return window.checkoutConfig.payment.iframe.cardFieldsMap[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getExpireYearLength: function () {\r\n            return window.checkoutConfig.payment.iframe.expireYearLength[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @param {Object} parent\r\n         * @returns {Function}\r\n         */\r\n        originalPlaceOrder: function (parent) {\r\n            return parent.placeOrder.bind(parent);\r\n        },\r\n\r\n        /**\r\n         * @returns {Number}\r\n         */\r\n        getTimeoutTime: function () {\r\n            return window.checkoutConfig.payment.iframe.timeoutTime[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getTimeoutMessage: function () {\r\n            return $t(this.timeoutMessage);\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            var self = this;\r\n\r\n            if (this.validateHandler() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                fullScreenLoader.startLoader();\r\n\r\n                this.isPlaceOrderActionAllowed(false);\r\n\r\n                $.when(\r\n                    this.setPaymentInformation()\r\n                ).done(\r\n                    this.done.bind(this)\r\n                ).fail(\r\n                    this.fail.bind(this)\r\n                ).always(\r\n                    function () {\r\n                        self.isPlaceOrderActionAllowed(true);\r\n                    }\r\n                );\r\n\r\n                this.initTimeoutHandler();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        setPaymentInformation: function () {\r\n            return setPaymentInformationAction(\r\n                this.messageContainer,\r\n                {\r\n                    method: this.getCode()\r\n                }\r\n            );\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        initTimeoutHandler: function () {\r\n            this.timeoutId = setTimeout(\r\n                this.timeoutHandler.bind(this),\r\n                this.getTimeoutTime()\r\n            );\r\n\r\n            $(window).off('clearTimeout')\r\n                .on('clearTimeout', this.clearTimeout.bind(this));\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        clearTimeout: function () {\r\n            clearTimeout(this.timeoutId);\r\n            this.fail();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        timeoutHandler: function () {\r\n            this.clearTimeout();\r\n\r\n            alert(\r\n                {\r\n                    content: this.getTimeoutMessage(),\r\n                    actions: {\r\n\r\n                        /**\r\n                         * {Function}\r\n                         */\r\n                        always: this.alertActionHandler.bind(this)\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.fail();\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        alertActionHandler: function () {\r\n            fullScreenLoader.startLoader();\r\n            window.location.reload();\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        fail: function () {\r\n            fullScreenLoader.stopLoader();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        done: function () {\r\n            this.placeOrderHandler().fail(function () {\r\n                fullScreenLoader.stopLoader();\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Payment/js/view/payment/payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'free',\r\n            component: 'Magento_Payment/js/view/payment/method-renderer/free-method'\r\n        }\r\n    );\r\n\r\n    /** Add view logic here if needed */\r\n    return Component.extend({});\r\n});\r\n","Magento_Payment/js/view/payment/method-renderer/free-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Payment/payment/free'\r\n        },\r\n\r\n        /** Returns is method available */\r\n        isAvailable: function () {\r\n            return quote.totals()['grand_total'] <= 0;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/order-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate',\r\n    'mage/mage',\r\n    'mage/validation'\r\n], function ($, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderReview', {\r\n        options: {\r\n            orderReviewSubmitSelector: '#review-button',\r\n            shippingSelector: '#shipping_method',\r\n            shippingSubmitFormSelector: null,\r\n            updateOrderSelector: '#update-order',\r\n            billingAsShippingSelector: '#billing\\\\:as_shipping',\r\n            updateContainerSelector: '#details-reload',\r\n            waitLoadingContainer: '#review-please-wait',\r\n            shippingMethodContainer: '#shipping-method-container',\r\n            agreementSelector: 'div.checkout-agreements input',\r\n            isAjax: false,\r\n            shippingMethodUpdateUrl: null,\r\n            updateOrderSubmitUrl: null,\r\n            canEditShippingMethod: false\r\n        },\r\n\r\n        /**\r\n         * Widget instance properties\r\n         */\r\n        triggerPropertyChange: true,\r\n        isShippingSubmitForm: false,\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            var isDisable;\r\n\r\n            //change handler for ajaxEnabled\r\n            if (this.options.isAjax) {\r\n                this._submitOrder = this._ajaxSubmitOrder;\r\n            }\r\n\r\n            this.element.on('click', this.options.orderReviewSubmitSelector, $.proxy(this._submitOrder, this))\r\n                .on('click', this.options.billingAsShippingSelector, $.proxy(this._shippingTobilling, this))\r\n                .on('change',\r\n                    this.options.shippingSelector,\r\n                    $.proxy(this._submitUpdateOrder,\r\n                        this,\r\n                        this.options.updateOrderSubmitUrl,\r\n                        this.options.updateContainerSelector\r\n                    )\r\n                ).find(this.options.updateOrderSelector).on('click', $.proxy(this._updateOrderHandler, this)).end();\r\n            this._shippingTobilling();\r\n\r\n            if ($(this.options.shippingSubmitFormSelector).length && this.options.canEditShippingMethod) {\r\n                this.isShippingSubmitForm = true;\r\n                $(this.options.shippingSubmitFormSelector)\r\n                    .on('change',\r\n                        this.options.shippingSelector,\r\n                        $.proxy(\r\n                            this._submitUpdateOrder,\r\n                            this,\r\n                            $(this.options.shippingSubmitFormSelector).prop('action'),\r\n                            this.options.updateContainerSelector\r\n                        )\r\n                    );\r\n                this._updateOrderSubmit(!$(this.options.shippingSubmitFormSelector)\r\n                    .find(this.options.shippingSelector).val());\r\n            } else {\r\n                isDisable = this.isShippingSubmitForm && this.element.find(this.options.shippingSelector).val();\r\n                this.element\r\n                    .on('input propertychange', ':input[name]',\r\n                        $.proxy(this._updateOrderSubmit, this, isDisable, this._onShippingChange)\r\n                    ).find('select').not(this.options.shippingSelector).on('change', this._propertyChange);\r\n                this._updateOrderSubmit(isDisable);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * show ajax loader\r\n         */\r\n        _ajaxBeforeSend: function () {\r\n            this.element.find(this.options.waitLoadingContainer).show();\r\n        },\r\n\r\n        /**\r\n         * hide ajax loader\r\n         */\r\n        _ajaxComplete: function () {\r\n            this.element.find(this.options.waitLoadingContainer).hide();\r\n        },\r\n\r\n        /**\r\n         * trigger propertychange for input type select\r\n         */\r\n        _propertyChange: function () {\r\n            $(this).trigger('propertychange');\r\n        },\r\n\r\n        /**\r\n         * trigger change for the update of shipping methods from server\r\n         */\r\n        _updateOrderHandler: function () {\r\n            $(this.options.shippingSelector).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Attempt to submit order\r\n         */\r\n        _submitOrder: function () {\r\n            if (this._validateForm()) {\r\n                this.element.find(this.options.updateOrderSelector).fadeTo(0, 0.5)\r\n                    .end().find(this.options.waitLoadingContainer).show()\r\n                    .end().trigger('submit');\r\n                this._updateOrderSubmit(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Attempt to ajax submit order\r\n         */\r\n        _ajaxSubmitOrder: function () {\r\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\r\n                return false;\r\n            }\r\n            $.ajax({\r\n                url: this.element.prop('action'),\r\n                type: 'post',\r\n                context: this,\r\n                data: {\r\n                    isAjax: 1\r\n                },\r\n                dataType: 'json',\r\n                beforeSend: this._ajaxBeforeSend,\r\n                complete: this._ajaxComplete,\r\n\r\n                /** @inheritdoc */\r\n                success: function (response) {\r\n                    var msg;\r\n\r\n                    if (typeof response === 'object' && !$.isEmptyObject(response)) {\r\n                        if (response['error_messages']) {\r\n                            this._ajaxComplete();\r\n                            msg = response['error_messages'];\r\n\r\n                            /* eslint-disable max-depth */\r\n                            if (msg) {\r\n                                if (Array.isArray(msg)) {\r\n                                    msg = msg.join('\\n');\r\n                                }\r\n                            }\r\n\r\n                            /* eslint-enablemax-depth */\r\n                            alert({\r\n                                content: msg\r\n                            });\r\n\r\n                            return false;\r\n                        }\r\n\r\n                        if (response.redirect) {\r\n                            $.mage.redirect(response.redirect);\r\n\r\n                            return false;\r\n                        } else if (response.success) {\r\n                            $.mage.redirect(this.options.successUrl);\r\n\r\n                            return false;\r\n                        }\r\n                        this._ajaxComplete();\r\n                        alert({\r\n                            content: $.mage.__('Sorry, something went wrong.')\r\n                        });\r\n                    }\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                error: function () {\r\n                    alert({\r\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\r\n                    });\r\n                    this._ajaxComplete();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate Order form\r\n         */\r\n        _validateForm: function () {\r\n            this.element.find(this.options.agreementSelector).off('change').on('change', $.proxy(function () {\r\n                var isValid = this._validateForm();\r\n\r\n                this._updateOrderSubmit(!isValid);\r\n            }, this));\r\n\r\n            if (this.element.data('mageValidation')) {\r\n                return this.element.validation().valid();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check/Set whether order can be submitted\r\n         * Also disables form submission element, if any\r\n         * @param {*} shouldDisable - whether should prevent order submission explicitly\r\n         * @param {Function} [fn] - function for shipping change handler\r\n         * @param {*} [*] - if true the property change will be set to true\r\n         */\r\n        _updateOrderSubmit: function (shouldDisable, fn) {\r\n            this._toggleButton(this.options.orderReviewSubmitSelector, shouldDisable);\r\n\r\n            if (typeof fn === 'function') {\r\n                fn.call(this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable/Disable button\r\n         * @param {jQuery} button - button selector to be toggled\r\n         * @param {*} disable - boolean for toggling\r\n         */\r\n        _toggleButton: function (button, disable) {\r\n            $(button).prop({\r\n                'disabled': disable\r\n            }).toggleClass('no-checkout', disable).fadeTo(0, disable ? 0.5 : 1);\r\n        },\r\n\r\n        /**\r\n         * Copy element value from shipping to billing address\r\n         * @param {jQuery.Event} e - optional\r\n         */\r\n        _shippingTobilling: function (e) {\r\n            var isChecked, opacity;\r\n\r\n            if (this.options.shippingSubmitFormSelector) {\r\n                return false;\r\n            }\r\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\r\n            opacity = isChecked ? 0.5 : 1;\r\n\r\n            if (isChecked) {\r\n                this.element.validation('clearError', ':input[name^=\"billing\"]');\r\n            }\r\n            $(':input[name^=\"shipping\"]', this.element).each($.proxy(function (key, value) {\r\n                var fieldObj = $(value.id.replace('shipping:', '#billing\\\\:'));\r\n\r\n                if (isChecked) {\r\n                    fieldObj = fieldObj.val($(value).val());\r\n                }\r\n                fieldObj.prop({\r\n                    'readonly': isChecked,\r\n                    'disabled': isChecked\r\n                }).fadeTo(0, opacity);\r\n\r\n                if (fieldObj.is('select')) {\r\n                    this.triggerPropertyChange = false;\r\n                    fieldObj.trigger('change');\r\n                }\r\n            }, this));\r\n\r\n            if (isChecked || e) {\r\n                this._updateOrderSubmit(true);\r\n            }\r\n            this.triggerPropertyChange = true;\r\n        },\r\n\r\n        /**\r\n         * Dispatch an ajax request of Update Order submission\r\n         * @param {*} url - url where to submit shipping method\r\n         * @param {*} resultId - id of element to be updated\r\n         */\r\n        _submitUpdateOrder: function (url, resultId) {\r\n            var isChecked, formData, callBackResponseHandler, shippingMethod;\r\n\r\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\r\n                return false;\r\n            }\r\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\r\n            formData = null;\r\n            callBackResponseHandler = null;\r\n            let val = $(this.options.shippingSelector).val();\r\n\r\n            shippingMethod = val.trim();\r\n            this._shippingTobilling();\r\n\r\n            if (url && resultId && shippingMethod) {\r\n                this._updateOrderSubmit(true);\r\n                this._toggleButton(this.options.updateOrderSelector, true);\r\n\r\n                // form data and callBack updated based on the shipping Form element\r\n                if (this.isShippingSubmitForm) {\r\n                    formData = $(this.options.shippingSubmitFormSelector).serialize() + '&isAjax=true';\r\n\r\n                    /**\r\n                     * @param {Object} response\r\n                     */\r\n                    callBackResponseHandler = function (response) {\r\n                        $(resultId).html(response);\r\n                        this._updateOrderSubmit(false);\r\n                        this._ajaxComplete();\r\n                    };\r\n                } else {\r\n                    formData = this.element.serialize() + '&isAjax=true';\r\n\r\n                    /**\r\n                     * @param {Object} response\r\n                     */\r\n                    callBackResponseHandler = function (response) {\r\n                        $(resultId).html(response);\r\n                        this._ajaxShippingUpdate(shippingMethod);\r\n                    };\r\n                }\r\n\r\n                if (isChecked) {\r\n                    $(this.options.shippingSelect).prop('disabled', true);\r\n                }\r\n                $.ajax({\r\n                    url: url,\r\n                    type: 'post',\r\n                    context: this,\r\n                    beforeSend: this._ajaxBeforeSend,\r\n                    data: formData,\r\n                    success: callBackResponseHandler\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update Shipping Methods Element from server\r\n         * @param {*} shippingMethod\r\n         */\r\n        _ajaxShippingUpdate: function (shippingMethod) {\r\n            $.ajax({\r\n                url: this.options.shippingMethodUpdateUrl,\r\n                data: {\r\n                    isAjax: true,\r\n                    'shipping_method': shippingMethod\r\n                },\r\n                type: 'post',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                success: function (response) {\r\n                    $(this.options.shippingMethodContainer).parent().html(response);\r\n                    this._toggleButton(this.options.updateOrderSelector, false);\r\n                    this._updateOrderSubmit(false);\r\n                },\r\n                complete: this._ajaxComplete\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Actions on change Shipping Address data\r\n         */\r\n        _onShippingChange: function () {\r\n            let val = $(this.options.shippingSelector).val();\r\n\r\n            if (this.triggerPropertyChange && val.trim()) {\r\n                this.element.find(this.options.shippingSelector).hide().end()\r\n                    .find(this.options.shippingSelector + '_update').show();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.orderReview;\r\n});\r\n","Magento_Paypal/js/paypal-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery-ui-modules/widget',\r\n    'mage/mage'\r\n], function ($, confirm, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.paypalCheckout', {\r\n        options: {\r\n            originalForm:\r\n                'form:not(#product_addtocart_form_from_popup):has(input[name=\"product\"][value=%1])',\r\n            productId: 'input[type=\"hidden\"][name=\"product\"]',\r\n            ppCheckoutSelector: '[data-role=pp-checkout-url]',\r\n            ppCheckoutInput: '<input type=\"hidden\" data-role=\"pp-checkout-url\" name=\"return_url\" value=\"\"/>'\r\n        },\r\n\r\n        /**\r\n         * Initialize store credit events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', '[data-action=\"checkout-form-submit\"]', $.proxy(function (e) {\r\n                var $target = $(e.target),\r\n                    returnUrl = $target.data('checkout-url'),\r\n                    productId = $target.closest('form').find(this.options.productId).val(),\r\n                    originalForm = this.options.originalForm.replace('%1', productId),\r\n                    self = this,\r\n                    billingAgreement = customerData.get('paypal-billing-agreement');\r\n\r\n                e.preventDefault();\r\n\r\n                if (billingAgreement().askToCreate) {\r\n                    confirm({\r\n                        content: billingAgreement().confirmMessage,\r\n                        actions: {\r\n\r\n                            /**\r\n                             * Confirmation handler\r\n                             *\r\n                             */\r\n                            confirm: function () {\r\n                                returnUrl = billingAgreement().confirmUrl;\r\n                                self._redirect(returnUrl, originalForm);\r\n                            },\r\n\r\n                            /**\r\n                             * Cancel confirmation handler\r\n                             *\r\n                             */\r\n                            cancel: function (event) {\r\n                                if (event && !$(event.target).hasClass('action-close')) {\r\n                                    self._redirect(returnUrl);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    this._redirect(returnUrl, originalForm);\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Redirect to certain url, with optional form\r\n         * @param {String} returnUrl\r\n         * @param {HTMLElement} originalForm\r\n         *\r\n         */\r\n        _redirect: function (returnUrl, originalForm) {\r\n            var $form,\r\n                ppCheckoutInput;\r\n\r\n            if (this.options.isCatalogProduct) {\r\n                // find the form from which the button was clicked\r\n                $form = originalForm ? $(originalForm) : $($(this.options.shortcutContainerClass).closest('form'));\r\n\r\n                ppCheckoutInput = $form.find(this.options.ppCheckoutSelector)[0];\r\n\r\n                if (!ppCheckoutInput) {\r\n                    ppCheckoutInput = $(this.options.ppCheckoutInput);\r\n                    ppCheckoutInput.appendTo($form);\r\n                }\r\n                $(ppCheckoutInput).val(returnUrl);\r\n\r\n                $form.trigger('submit');\r\n            } else {\r\n                $.mage.redirect(returnUrl);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.paypalCheckout;\r\n});\r\n","Magento_Paypal/js/action/set-payment-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/set-payment-information'\r\n], function (quote, setPaymentInformation) {\r\n    'use strict';\r\n\r\n    return function (messageContainer) {\r\n        return setPaymentInformation(messageContainer, quote.paymentMethod());\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/billing-agreement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, confirm, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.billingAgreement', {\r\n        options: {\r\n            invalidateOnLoad: false,\r\n            cancelButtonSelector: '.block-billing-agreements-view button.cancel',\r\n            cancelMessage: '',\r\n            cancelUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize billing agreements events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            if (this.options.invalidateOnLoad) {\r\n                this.invalidate();\r\n            }\r\n            $(this.options.cancelButtonSelector).on('click', function () {\r\n                confirm({\r\n                    content: self.options.cancelMessage,\r\n                    actions: {\r\n                        /**\r\n                         * 'Confirm' action handler.\r\n                         */\r\n                        confirm: function () {\r\n                            self.invalidate();\r\n                            window.location.href = self.options.cancelUrl;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return false;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * clear paypal billing agreement customer data\r\n         * @returns void\r\n         */\r\n        invalidate: function () {\r\n            customerData.invalidate(['paypal-billing-agreement']);\r\n        }\r\n    });\r\n\r\n    return $.mage.billingAgreement;\r\n});\r\n","Magento_Paypal/js/in-context/button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, $, Wrapper, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            declinePayment: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer');\r\n\r\n            this._super();\r\n            this.renderPayPalButtons(element);\r\n\r\n            if (cart().isGuestCheckoutAllowed === undefined) {\r\n                cart.subscribe(function (updatedCart) {\r\n                    this.declinePayment = !customer().firstname && !cart().isGuestCheckoutAllowed;\r\n\r\n                    return updatedCart;\r\n                }.bind(this));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            if (this.declinePayment) {\r\n                this.addError(this.signInMessage, 'warning');\r\n\r\n                reject();\r\n            } else {\r\n                promise.resolve();\r\n            }\r\n\r\n            return promise;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n\r\n            return this.clientConfig;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/in-context/express-checkout-smart-buttons.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* eslint-disable max-nested-callbacks */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_Paypal/js/in-context/paypal-sdk',\r\n    'Magento_Customer/js/customer-data',\r\n    'domReady!'\r\n], function (_, $, paypalSdk, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Triggers beforePayment action on PayPal buttons\r\n     *\r\n     * @param {Object} clientConfig\r\n     * @returns {Object} jQuery promise\r\n     */\r\n    function performCreateOrder(clientConfig) {\r\n        var params = {\r\n            'quote_id': clientConfig.quoteId,\r\n            'customer_id': clientConfig.customerId || '',\r\n            'form_key': clientConfig.formKey,\r\n            button: clientConfig.button\r\n        };\r\n\r\n        return $.Deferred(function (deferred) {\r\n            clientConfig.rendererComponent.beforePayment(deferred.resolve, deferred.reject).then(function () {\r\n                $.post(clientConfig.getTokenUrl, params).done(function (res) {\r\n                    clientConfig.rendererComponent.afterPayment(res, deferred.resolve, deferred.reject);\r\n                }).fail(function (jqXHR, textStatus, err) {\r\n                    clientConfig.rendererComponent.catchPayment(err, deferred.resolve, deferred.reject);\r\n                });\r\n            });\r\n        }).promise();\r\n    }\r\n\r\n    /**\r\n     * Triggers beforeOnAuthorize action on PayPal buttons\r\n     * @param {Object} clientConfig\r\n     * @param {Object} data\r\n     * @param {Object} actions\r\n     * @returns {Object} jQuery promise\r\n     */\r\n    function performOnApprove(clientConfig, data, actions) {\r\n        var params = {\r\n            paymentToken: data.orderID,\r\n            payerId: data.payerID,\r\n            paypalFundingSource: customerData.get('paypal-funding-source'),\r\n            'form_key': clientConfig.formKey\r\n        };\r\n\r\n        return $.Deferred(function (deferred) {\r\n            clientConfig.rendererComponent.beforeOnAuthorize(deferred.resolve, deferred.reject, actions)\r\n                .then(function () {\r\n                    $.post(clientConfig.onAuthorizeUrl, params).done(function (res) {\r\n                        clientConfig.rendererComponent\r\n                            .afterOnAuthorize(res, deferred.resolve, deferred.reject, actions);\r\n                        customerData.set('paypal-funding-source', '');\r\n                    }).fail(function (jqXHR, textStatus, err) {\r\n                        clientConfig.rendererComponent.catchOnAuthorize(err, deferred.resolve, deferred.reject);\r\n                        customerData.set('paypal-funding-source', '');\r\n                    });\r\n                });\r\n        }).promise();\r\n    }\r\n\r\n    return function (clientConfig, element) {\r\n        paypalSdk(clientConfig.sdkUrl, clientConfig.dataAttributes).done(function (paypal) {\r\n            paypal.Buttons({\r\n                style: clientConfig.styles,\r\n\r\n                /**\r\n                 * onInit is called when the button first renders\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onInit: function (data, actions) {\r\n                    clientConfig.rendererComponent.validate(actions);\r\n                },\r\n\r\n                /**\r\n                 * Triggers beforePayment action on PayPal buttons\r\n                 * @returns {Object} jQuery promise\r\n                 */\r\n                createOrder: function () {\r\n                    return performCreateOrder(clientConfig);\r\n                },\r\n\r\n                /**\r\n                 * Triggers beforeOnAuthorize action on PayPal buttons\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onApprove: function (data, actions) {\r\n                    performOnApprove(clientConfig, data, actions);\r\n                },\r\n\r\n                /**\r\n                 * Execute logic on Paypal button click\r\n                 */\r\n                onClick: function (data) {\r\n                    customerData.set('paypal-funding-source', data.fundingSource);\r\n                    clientConfig.rendererComponent.validate();\r\n                    clientConfig.rendererComponent.onClick();\r\n                },\r\n\r\n                /**\r\n                 * Process cancel action\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onCancel: function (data, actions) {\r\n                    clientConfig.rendererComponent.onCancel(data, actions);\r\n                },\r\n\r\n                /**\r\n                 * Process errors\r\n                 *\r\n                 * @param {Error} err\r\n                 */\r\n                onError: function (err) {\r\n                    clientConfig.rendererComponent.onError(err);\r\n                }\r\n            }).render(element);\r\n        });\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/express-checkout-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Paypal/js/in-context/express-checkout-smart-buttons',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/cookies'\r\n], function ($, $t, customerData, checkoutSmartButtons, alert) {\r\n    'use strict';\r\n\r\n    return {\r\n        defaults: {\r\n            paymentActionError: $t('Something went wrong with your request. Please try again later.'),\r\n            signInMessage: $t('To check out, please sign in with your email address.')\r\n        },\r\n\r\n        /**\r\n         * Render PayPal buttons using checkout.js\r\n         */\r\n        renderPayPalButtons: function (element) {\r\n            checkoutSmartButtons(this.prepareClientConfig(), element);\r\n        },\r\n\r\n        /**\r\n         * Validate payment method\r\n         *\r\n         * @param {Object} actions\r\n         */\r\n        validate: function (actions) {\r\n            this.actions = actions || this.actions;\r\n        },\r\n\r\n        /**\r\n         * Execute logic on Paypal button click\r\n         */\r\n        onClick: function () {},\r\n\r\n        /**\r\n         * Before payment execute\r\n         *\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @return {*}\r\n         */\r\n        beforePayment: function (resolve, reject) { //eslint-disable-line no-unused-vars\r\n            return $.Deferred().resolve();\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * Catch payment\r\n         *\r\n         * @param {Error} err\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         */\r\n        catchPayment: function (err, resolve, reject) {\r\n            this.addAlert(this.paymentActionError);\r\n            reject(err);\r\n        },\r\n\r\n        /**\r\n         * Before onAuthorize execute\r\n         *\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {jQuery.Deferred}\r\n         */\r\n        beforeOnAuthorize: function (resolve, reject, actions) { //eslint-disable-line no-unused-vars\r\n            //display loading widget.\r\n            $('body').trigger('processStart');\r\n\r\n            return $.Deferred().resolve();\r\n        },\r\n\r\n        /**\r\n         * After onAuthorize execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            $('body').trigger('processStop');\r\n\r\n            if (res.success) {\r\n                resolve();\r\n\r\n                return actions.redirect(res.redirectUrl);\r\n            }\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * Catch payment\r\n         *\r\n         * @param {Error} err\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         */\r\n        catchOnAuthorize: function (err, resolve, reject) {\r\n            $('body').trigger('processStop');\r\n            this.addAlert(this.paymentActionError);\r\n            reject(err);\r\n        },\r\n\r\n        /**\r\n         * Process cancel action\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} actions\r\n         */\r\n        onCancel: function (data, actions) {\r\n            $('body').trigger('processStop');\r\n            actions.redirect(this.clientConfig.onCancelUrl);\r\n        },\r\n\r\n        /**\r\n         * Process errors\r\n         *\r\n         * @param {Error} err\r\n         */\r\n        onError: function (err) { //eslint-disable-line no-unused-vars\r\n            // Uncaught error isn't displayed in the console\r\n        },\r\n\r\n        /**\r\n         * Adds error message\r\n         *\r\n         * @param {String} message\r\n         * @param {String} [type]\r\n         */\r\n        addError: function (message, type) {\r\n            type = type || 'error';\r\n            customerData.set('messages', {\r\n                messages: [{\r\n                    type: type,\r\n                    text: message\r\n                }],\r\n                'data_id': Math.floor(Date.now() / 1000)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Add alert message\r\n         *\r\n         * @param {String} message\r\n         */\r\n        addAlert: function (message) {\r\n            alert({\r\n                content: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getButtonId: function () {\r\n            return this.inContextId;\r\n        },\r\n\r\n        /**\r\n         * Populate client config with all required data\r\n         *\r\n         * @return {Object}\r\n         */\r\n        prepareClientConfig: function () {\r\n            this.clientConfig.rendererComponent = this;\r\n            this.clientConfig.formKey = $.mage.cookies.get('form_key');\r\n\r\n            return this.clientConfig;\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/paypal-sdk.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var dfd = $.Deferred();\r\n\r\n    /**\r\n     * Loads the PayPal SDK object\r\n     * @param {String} paypalUrl - the url of the PayPal SDK\r\n     * @param {Array} dataAttributes - Array of the Attributes for PayPal SDK Script tag\r\n     */\r\n    return function loadPaypalScript(paypalUrl, dataAttributes) {\r\n        //configuration for loaded PayPal script\r\n        require.config({\r\n            paths: {\r\n                paypalSdk: paypalUrl\r\n            },\r\n            shim: {\r\n                paypalSdk: {\r\n                    exports: 'paypal'\r\n                }\r\n            },\r\n            attributes: {\r\n                'paypalSdk': dataAttributes\r\n            },\r\n\r\n            /**\r\n             * Add attributes under Paypal SDK Script tag\r\n             */\r\n            onNodeCreated: function (node, config, name) {\r\n                if (config.attributes && config.attributes[name]) {\r\n                    $.each(dataAttributes, function (index, elem) {\r\n                        node.setAttribute(index, elem);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        if (dfd.state() !== 'resolved') {\r\n            require(['paypalSdk'], function (paypalObject) {\r\n                dfd.resolve(paypalObject);\r\n            });\r\n        }\r\n\r\n        return dfd.promise();\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/product-express-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, $, Component, Wrapper, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            productFormSelector: '#product_addtocart_form',\r\n            declinePayment: false,\r\n            formInvalid: false,\r\n            productAddedToCart: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer'),\r\n                isGuestCheckoutAllowed;\r\n\r\n            this._super();\r\n\r\n            isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\r\n\r\n            if (typeof isGuestCheckoutAllowed === 'undefined') {\r\n                isGuestCheckoutAllowed = config.clientConfig.isGuestCheckoutAllowed;\r\n            }\r\n\r\n            if (config.clientConfig.isVisibleOnProductPage) {\r\n                this.renderPayPalButtons(element);\r\n            }\r\n\r\n            this.declinePayment = !customer().firstname && !isGuestCheckoutAllowed;\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onClick: function () {\r\n            var $form = $(this.productFormSelector);\r\n\r\n            if (!this.declinePayment && !this.productAddedToCart) {\r\n                $form.trigger('submit');\r\n                this.formInvalid = !$form.validation('isValid');\r\n                this.productAddedToCart = true;\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            if (this.declinePayment) {\r\n                this.addError(this.signInMessage, 'warning');\r\n                reject();\r\n            } else if (this.formInvalid) {\r\n                reject();\r\n            } else {\r\n                $(document).on('ajax:addToCart', function (e, data) {\r\n                    if (_.isEmpty(data.response)) {\r\n                        return promise.resolve();\r\n                    }\r\n\r\n                    return reject();\r\n                });\r\n                $(document).on('ajax:addToCart:error', reject);\r\n            }\r\n\r\n            return promise;\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            this.addAlert(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n            this.clientConfig.quoteId = '';\r\n            this.clientConfig.customerId = '';\r\n\r\n            return this.clientConfig;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onError: function (err) {\r\n            this.productAddedToCart = false;\r\n            this._super(err);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onCancel: function (data, actions) {\r\n            this.productAddedToCart = false;\r\n            this._super(data, actions);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            this.productAddedToCart = false;\r\n\r\n            return this._super(res, resolve, reject, actions);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/model/iframe-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Paypal/js/model/iframe',\r\n    'Magento_Ui/js/model/messageList'\r\n],\r\nfunction (ko, iframe, messageList) {\r\n    'use strict';\r\n\r\n    return function (cartUrl, errorMessage, goToSuccessPage, successUrl) {\r\n        if (this === window.self) {\r\n            window.location = cartUrl;\r\n        }\r\n\r\n        if (!!errorMessage.message) { //eslint-disable-line no-extra-boolean-cast\r\n            document.removeEventListener('click', iframe.stopEventPropagation, true);\r\n            iframe.isInAction(false);\r\n            messageList.addErrorMessage(errorMessage);\r\n        } else if (!!goToSuccessPage) { //eslint-disable-line no-extra-boolean-cast\r\n            window.location = successUrl;\r\n        } else {\r\n            window.location = cartUrl;\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/model/iframe.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    var isInAction = ko.observable(false);\r\n\r\n    return {\r\n        isInAction: isInAction,\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         */\r\n        stopEventPropagation: function (event) {\r\n            event.stopImmediatePropagation();\r\n            event.preventDefault();\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/view/paylater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiElement',\r\n    'uiLayout',\r\n    'Magento_Paypal/js/in-context/paypal-sdk',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    ko,\r\n    Component,\r\n    layout,\r\n    paypalSdk\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            template: 'Magento_Paypal/paylater',\r\n            sdkUrl: '',\r\n            attributes: {\r\n                class: 'pay-later-message'\r\n            },\r\n            dataAttributes: {},\r\n            refreshSelector: '',\r\n            displayAmount: false,\r\n            amountComponentConfig: {\r\n                name: '${ $.name }.amountProvider',\r\n                component: ''\r\n            }\r\n        },\r\n        paypal: null,\r\n        amount: null,\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .observe(['amount']);\r\n\r\n            if (this.displayAmount) {\r\n                layout([this.amountComponentConfig]);\r\n            }\r\n\r\n            if (this.sdkUrl !== '') {\r\n                this.loadPayPalSdk(this.sdkUrl, this.dataAttributes)\r\n                    .then(this._setPayPalObject.bind(this));\r\n            }\r\n\r\n            if (this.refreshSelector) {\r\n                $(this.refreshSelector).on('click', this._refreshMessages.bind(this));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get attribute value from configuration\r\n         *\r\n         * @param {String} attributeName\r\n         * @returns {*|null}\r\n         */\r\n        getAttribute: function (attributeName) {\r\n            return typeof this.attributes[attributeName] !== 'undefined' ?\r\n                this.attributes[attributeName] : null;\r\n        },\r\n\r\n        /**\r\n         * Load PP SDK with preconfigured options\r\n         *\r\n         * @param {String} sdkUrl - the url of the PayPal SDK\r\n         * @param {Array} dataAttributes - Array of the Attributes for PayPal SDK Script tag\r\n         */\r\n        loadPayPalSdk: function (sdkUrl, dataAttributes) {\r\n            return paypalSdk(sdkUrl, dataAttributes);\r\n        },\r\n\r\n        /**\r\n         * Set reference to paypal Sdk object\r\n         *\r\n         * @param {Object} paypal\r\n         * @private\r\n         */\r\n        _setPayPalObject: function (paypal) {\r\n            this.paypal = paypal;\r\n        },\r\n\r\n        /**\r\n         * Render messages\r\n         *\r\n         * @private\r\n         */\r\n        _refreshMessages: function () {\r\n            if (this.paypal) {\r\n                this.paypal.Messages.render();\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/quote',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    ko,\r\n    Component,\r\n    registry,\r\n    quote\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            amount: null\r\n        },\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.updateAmount();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update amount\r\n         */\r\n        updateAmount: function () {\r\n            var payLater = registry.get(this.parentName);\r\n\r\n            quote.totals.subscribe(function (newValue) {\r\n                payLater.amount(newValue['base_grand_total']);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/product-grouped.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    Component,\r\n    registry\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            tableWrapperSelector: '.table-wrapper.grouped',\r\n            priceBoxSelector: '[data-role=\"priceBox\"]',\r\n            qtyFieldSelector: '.input-text.qty',\r\n            amount: null\r\n        },\r\n        priceInfo: {},\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            $('tbody tr', this.tableWrapperSelector).each(function (index, element) {\r\n                var priceBox = $(self.priceBoxSelector, element),\r\n                    qtyElement = $(self.qtyFieldSelector, element),\r\n                    productId = priceBox.data('productId'),\r\n                    priceElement = $('#product-price-' + productId);\r\n\r\n                self.priceInfo[productId] = {\r\n                    qty: self._getQty(qtyElement),\r\n                    price: priceElement.data('priceAmount')\r\n                };\r\n            });\r\n\r\n            $(this.qtyFieldSelector).on('change', this._onQtyChange.bind(this));\r\n\r\n            this._updateAmount();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get product quantity\r\n         *\r\n         * @param {jQuery.Element} element\r\n         * @private\r\n         */\r\n        _getQty: function (element) {\r\n            var qty = parseFloat(element.val());\r\n\r\n            return !isNaN(qty) && qty ? qty : 0;\r\n        },\r\n\r\n        /**\r\n         * Handle changed product quantity\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyChange: function (event) {\r\n            var qtyElement = $(event.target),\r\n                parent = qtyElement.parents('tr'),\r\n                priceBox = $(this.priceBoxSelector, parent),\r\n                productId = priceBox.data('productId');\r\n\r\n            if (this.priceInfo[productId]) {\r\n                this.priceInfo[productId].qty = this._getQty(qtyElement);\r\n            }\r\n\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Calculate and update amount\r\n         *\r\n         * @private\r\n         */\r\n        _updateAmount: function () {\r\n            var productId,\r\n                amount = 0,\r\n                payLater = registry.get(this.parentName);\r\n\r\n            for (productId in this.priceInfo) {\r\n                if (this.priceInfo.hasOwnProperty(productId)) {\r\n                    amount += this.priceInfo[productId].price * this.priceInfo[productId].qty;\r\n                }\r\n            }\r\n\r\n            payLater.amount(amount);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/product.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'priceBox',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    Component,\r\n    registry\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            priceBoxSelector: '.price-box',\r\n            qtyFieldSelector: '#product_addtocart_form [name=\"qty\"]',\r\n            amount: null\r\n        },\r\n        qty: 1,\r\n        price: 0,\r\n        priceType: '',\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            var priceBox;\r\n\r\n            this._super();\r\n\r\n            priceBox = $(this.priceBoxSelector);\r\n            priceBox.on('priceUpdated', this._onPriceChange.bind(this));\r\n\r\n            if (priceBox.priceBox('option') &&\r\n                priceBox.priceBox('option').prices &&\r\n                (priceBox.priceBox('option').prices.finalPrice || priceBox.priceBox('option').prices.basePrice)\r\n            ) {\r\n                this.priceType = priceBox.priceBox('option').prices.finalPrice ? 'finalPrice' : 'basePrice';\r\n                this.price = priceBox.priceBox('option').prices[this.priceType].amount;\r\n            }\r\n\r\n            $(this.qtyFieldSelector).on('change', this._onQtyChange.bind(this));\r\n\r\n            priceBox.trigger('updatePrice');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handle changed product qty\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyChange: function (event) {\r\n            var qty = parseFloat($(event.target).val());\r\n\r\n            this.qty = !isNaN(qty) && qty ? qty : 1;\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Handle product price change\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onPriceChange: function (event, data) {\r\n            this.price = data[this.priceType].amount;\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Calculate and update amount\r\n         *\r\n         * @private\r\n         */\r\n        _updateAmount: function () {\r\n            var amount = this.price * this.qty,\r\n                payLater = registry.get(this.parentName);\r\n\r\n            if (amount !== 0) {\r\n                payLater.amount(amount);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/paypal-payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    var isContextCheckout = window.checkoutConfig.payment.paypalExpress.isContextCheckout,\r\n        paypalExpress = 'Magento_Paypal/js/view/payment/method-renderer' +\r\n            (isContextCheckout ? '/in-context/checkout-express' : '/paypal-express');\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'paypal_express',\r\n            component: paypalExpress,\r\n            config: window.checkoutConfig.payment.paypalExpress.inContextConfig\r\n        },\r\n        {\r\n            type: 'payflow_express',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express'\r\n        },\r\n        {\r\n            type: 'payflow_express_bml',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml'\r\n        },\r\n        {\r\n            type: 'payflowpro',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method'\r\n        },\r\n        {\r\n            type: 'payflow_link',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'payflow_advanced',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'hosted_pro',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'paypal_billing_agreement',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement'\r\n        }\r\n    );\r\n\r\n    /**\r\n     * Add view logic here if needed\r\n     **/\r\n    return Component.extend({});\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/iframe-methods.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Paypal/js/model/iframe',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function (Component, iframe, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/iframe-methods',\r\n            paymentReady: false\r\n        },\r\n        redirectAfterPlaceOrder: false,\r\n        isInAction: iframe.isInAction,\r\n\r\n        /**\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('paymentReady');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isPaymentReady: function () {\r\n            return this.paymentReady();\r\n        },\r\n\r\n        /**\r\n         * Get action url for payment method iframe.\r\n         * @returns {String}\r\n         */\r\n        getActionUrl: function () {\r\n            return this.isInAction() ? window.checkoutConfig.payment.paypalIframe.actionUrl[this.getCode()] : '';\r\n        },\r\n\r\n        /**\r\n         * Places order in pending payment status.\r\n         */\r\n        placePendingPaymentOrder: function () {\r\n            if (this.placeOrder()) {\r\n                fullScreenLoader.startLoader();\r\n                this.isInAction(true);\r\n                // capture all click events\r\n                document.addEventListener('click', iframe.stopEventPropagation, true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPlaceOrderDeferredObject: function () {\r\n            var self = this;\r\n\r\n            return this._super().fail(function () {\r\n                fullScreenLoader.stopLoader();\r\n                self.isInAction(false);\r\n                document.removeEventListener('click', iframe.stopEventPropagation, true);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * After place order callback\r\n         */\r\n        afterPlaceOrder: function () {\r\n            if (this.iframeIsLoaded) {\r\n                document.getElementById(this.getCode() + '-iframe')\r\n                    .contentWindow.location.reload();\r\n                this.paymentReady(false);\r\n            }\r\n\r\n            this.paymentReady(true);\r\n            this.iframeIsLoaded = true;\r\n            this.isPlaceOrderActionAllowed(true);\r\n            fullScreenLoader.stopLoader();\r\n        },\r\n\r\n        /**\r\n         * Hide loader when iframe is fully loaded.\r\n         */\r\n        iframeLoaded: function () {\r\n            fullScreenLoader.stopLoader();\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express-bml'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/view/payment/iframe',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Checkout/js/action/set-payment-information',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Vault/js/view/payment/vault-enabler'\r\n], function ($, Component, additionalValidators, setPaymentInformationAction, fullScreenLoader, VaultEnabler) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflowpro-form'\r\n        },\r\n        placeOrderHandler: null,\r\n        validateHandler: null,\r\n\r\n        /**\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.vaultEnabler = new VaultEnabler();\r\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Function} handler\r\n         */\r\n        setPlaceOrderHandler: function (handler) {\r\n            this.placeOrderHandler = handler;\r\n        },\r\n\r\n        /**\r\n         * @param {Function} handler\r\n         */\r\n        setValidateHandler: function (handler) {\r\n            this.validateHandler = handler;\r\n        },\r\n\r\n        /**\r\n         * @returns {Object}\r\n         */\r\n        context: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        isShowLegend: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'payflowpro';\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            var self = this;\r\n\r\n            if (this.validateHandler() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                this.isPlaceOrderActionAllowed(false);\r\n                fullScreenLoader.startLoader();\r\n                $.when(\r\n                    setPaymentInformationAction(this.messageContainer, self.getData())\r\n                ).done(\r\n                    function () {\r\n                        self.placeOrderHandler().fail(\r\n                            function () {\r\n                                fullScreenLoader.stopLoader();\r\n                            }\r\n                        );\r\n                    }\r\n                ).always(\r\n                    function () {\r\n                        self.isPlaceOrderActionAllowed(true);\r\n                        fullScreenLoader.stopLoader();\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {Object}\r\n         */\r\n        getData: function () {\r\n            var data = {\r\n                'method': this.getCode(),\r\n                'additional_data': {\r\n                    'cc_type': this.creditCardType(),\r\n                    'cc_exp_year': this.creditCardExpYear(),\r\n                    'cc_exp_month': this.creditCardExpMonth(),\r\n                    'cc_last_4': this.creditCardNumber().substr(-4)\r\n                }\r\n            };\r\n\r\n            this.vaultEnabler.visitAdditionalData(data);\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * @returns {Bool}\r\n         */\r\n        isVaultEnabled: function () {\r\n            return this.vaultEnabler.isVaultEnabled();\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getVaultCode: function () {\r\n            return 'payflowpro_cc_vault';\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'mage/validation'\r\n], function ($, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal_billing_agreement-form',\r\n            selectedBillingAgreement: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('selectedBillingAgreement');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getTransportName: function () {\r\n            return window.checkoutConfig.payment.paypalBillingAgreement.transportName;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getBillingAgreements: function () {\r\n            return window.checkoutConfig.payment.paypalBillingAgreement.agreements;\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getData: function () {\r\n            var additionalData = null;\r\n\r\n            if (this.getTransportName()) {\r\n                additionalData = {};\r\n                additionalData[this.getTransportName()] = this.selectedBillingAgreement();\r\n            }\r\n\r\n            return {\r\n                'method': this.item.method,\r\n                'additional_data': additionalData\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {jQuery}\r\n         */\r\n        validate: function () {\r\n            var form = '#billing-agreement-form';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Paypal/js/action/set-payment-method',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, Component, setPaymentMethodAction, additionalValidators, quote, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express-bml',\r\n            billingAgreement: ''\r\n        },\r\n\r\n        /** Init observable variables */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('billingAgreement');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** Open window with  */\r\n        showAcceptanceWindow: function (data, event) {\r\n            window.open(\r\n                $(event.currentTarget).attr('href'),\r\n                'olcwhatispaypal',\r\n                'toolbar=no, location=no,' +\r\n                ' directories=no, status=no,' +\r\n                ' menubar=no, scrollbars=yes,' +\r\n                ' resizable=yes, ,left=0,' +\r\n                ' top=0, width=400, height=350'\r\n            );\r\n\r\n            return false;\r\n        },\r\n\r\n        /** Returns payment acceptance mark link path */\r\n        getPaymentAcceptanceMarkHref: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkHref;\r\n        },\r\n\r\n        /** Returns payment acceptance mark image path */\r\n        getPaymentAcceptanceMarkSrc: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkSrc;\r\n        },\r\n\r\n        /** Returns billing agreement data */\r\n        getBillingAgreementCode: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.billingAgreementCode[this.item.method];\r\n        },\r\n\r\n        /** Returns payment information data */\r\n        getData: function () {\r\n            var parent = this._super(),\r\n                additionalData = null;\r\n\r\n            if (this.getBillingAgreementCode()) {\r\n                additionalData = {};\r\n                additionalData[this.getBillingAgreementCode()] = this.billingAgreement();\r\n            }\r\n\r\n            return $.extend(true, parent, {\r\n                'additional_data': additionalData\r\n            });\r\n        },\r\n\r\n        /** Redirect to paypal */\r\n        continueToPayPal: function () {\r\n            if (additionalValidators.validate()) {\r\n                //update payment method information if additional data was changed\r\n                setPaymentMethodAction(this.messageContainer).done(\r\n                    function () {\r\n                        customerData.invalidate(['cart']);\r\n                        $.mage.redirect(\r\n                            window.checkoutConfig.payment.paypalExpress.redirectUrl[quote.paymentMethod().method]\r\n                        );\r\n                    }\r\n                );\r\n\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal-express'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/in-context/checkout-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Paypal/js/action/set-payment-method',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function ($, Component, Wrapper, setPaymentMethod, additionalValidators, messageList) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal-express-in-context',\r\n            validationElements: 'input'\r\n        },\r\n\r\n        /**\r\n         * Listens element on change and validate it.\r\n         *\r\n         * @param {HTMLElement} context\r\n         */\r\n        initListeners: function (context) {\r\n            $.async(this.validationElements, context, function (element) {\r\n                $(element).on('change', function () {\r\n                    this.validate();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         *  Validates Smart Buttons\r\n         */\r\n        validate: function () {\r\n            this._super();\r\n\r\n            if (this.actions) {\r\n                additionalValidators.validate(true) ? this.actions.enable() : this.actions.disable();\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            setPaymentMethod(this.messageContainer).done(function () {\r\n                return promise.resolve();\r\n            }).fail(function (response) {\r\n                var error;\r\n\r\n                try {\r\n                    error = JSON.parse(response.responseText);\r\n                } catch (exception) {\r\n                    error = this.paymentActionError;\r\n                }\r\n\r\n                this.addError(error);\r\n\r\n                return reject(new Error(error));\r\n            }.bind(this));\r\n\r\n            return promise;\r\n        },\r\n\r\n        /**\r\n         * Populate client config with all required data\r\n         *\r\n         * @return {Object}\r\n         */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n            this.clientConfig.quoteId = window.checkoutConfig.quoteData['entity_id'];\r\n            this.clientConfig.customerId = window.customerData.id;\r\n            this.clientConfig.button = 0;\r\n\r\n            return this.clientConfig;\r\n        },\r\n\r\n        /**\r\n         * Adding logic to be triggered onClick action for smart buttons component\r\n         */\r\n        onClick: function () {\r\n            additionalValidators.validate();\r\n        },\r\n\r\n        /**\r\n         * Adds error message\r\n         *\r\n         * @param {String} message\r\n         */\r\n        addError: function (message) {\r\n            messageList.addErrorMessage({\r\n                message: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            this.addError(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * After onAuthorize execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            if (res.success) {\r\n                resolve();\r\n\r\n                return actions.redirect(res.redirectUrl);\r\n            }\r\n\r\n            this.addError(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro/vault.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Vault/js/view/payment/method-renderer/vault'\r\n], function (VaultComponent) {\r\n    'use strict';\r\n\r\n    return VaultComponent.extend({\r\n        defaults: {\r\n            template: 'Magento_Vault/payment/form'\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getToken: function () {\r\n            return this.publicHash;\r\n        },\r\n\r\n        /**\r\n         * Get last 4 digits of card\r\n         * @returns {String}\r\n         */\r\n        getMaskedCard: function () {\r\n            return this.details['cc_last_4'];\r\n        },\r\n\r\n        /**\r\n         * Get expiration date\r\n         * @returns {String}\r\n         */\r\n        getExpirationDate: function () {\r\n            return this.details['cc_exp_month'] + '/' + this.details['cc_exp_year'];\r\n        },\r\n\r\n        /**\r\n         * Get card type\r\n         * @returns {String}\r\n         */\r\n        getCardType: function () {\r\n            return this.details['cc_type'];\r\n        }\r\n    });\r\n});\r\n","Magento_PaypalCaptcha/js/model/skipRefreshCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        skip: ko.observable(false)\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/checkout/defaultCaptcha-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PaypalCaptcha/js/model/skipRefreshCaptcha'\r\n], function (skipRefreshCaptcha) {\r\n    'use strict';\r\n\r\n    var defaultCaptchaMixin = {\r\n        /**\r\n         * @override\r\n         */\r\n        refresh: function () {\r\n            if (!skipRefreshCaptcha.skip()) {\r\n                this._super();\r\n            } else {\r\n                skipRefreshCaptcha.skip(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    return function (defaultCaptcha) {\r\n        return defaultCaptcha.extend(defaultCaptchaMixin);\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/checkout/paymentCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n    'Magento_Captcha/js/model/captchaList',\r\n    'Magento_Captcha/js/model/captcha'\r\n],\r\nfunction ($, defaultCaptcha, captchaList, Captcha) {\r\n    'use strict';\r\n\r\n    return defaultCaptcha.extend({\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var captchaConfigPayment,\r\n                currentCaptcha;\r\n\r\n            this._super();\r\n\r\n            if (window[this.configSource] && window[this.configSource].captchaPayments) {\r\n                captchaConfigPayment = window[this.configSource].captchaPayments;\r\n\r\n                $.each(captchaConfigPayment, function (formId, captchaData) {\r\n                    var captcha;\r\n\r\n                    captchaData.formId = formId;\r\n                    captcha = Captcha(captchaData);\r\n                    captchaList.add(captcha);\r\n                });\r\n            }\r\n\r\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (currentCaptcha != null) {\r\n                currentCaptcha.setIsVisible(true);\r\n                this.setCurrentCaptcha(currentCaptcha);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PaypalCaptcha/js/view/payment/list-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Captcha/js/model/captchaList'\r\n], function ($, captchaList) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n        formId: 'co-payment-form',\r\n\r\n        /**\r\n         * Sets custom template for Payflow Pro\r\n         *\r\n         * @param {Object} payment\r\n         * @returns {Object}\r\n         */\r\n        createComponent: function (payment) {\r\n\r\n            var component = this._super(payment);\r\n\r\n            if (component.component === 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method') {\r\n                component.template = 'Magento_PaypalCaptcha/payment/payflowpro-form';\r\n                $(window).off('clearTimeout')\r\n                    .on('clearTimeout', this.clearTimeout.bind(this));\r\n            }\r\n\r\n            return component;\r\n        },\r\n\r\n        /**\r\n         * Overrides default window.clearTimeout() to catch errors from iframe and reload Captcha.\r\n         *\r\n         * @param {Number} timeoutID\r\n         */\r\n        clearTimeout: function (timeoutID) {\r\n            var captcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (captcha !== null) {\r\n                captcha.refresh();\r\n            }\r\n            clearTimeout(timeoutID);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Overrides `Magento_Checkout/js/view/payment/list::createComponent`\r\n     */\r\n    return function (target) {\r\n        return target.extend(mixin);\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/payment/method-renderer/payflowpro-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PaypalCaptcha/js/model/skipRefreshCaptcha'\r\n], function (skipRefreshCaptcha) {\r\n    'use strict';\r\n\r\n    var payflowProMethodMixin = {\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            skipRefreshCaptcha.skip(true);\r\n            this._super();\r\n        }\r\n    };\r\n\r\n    return function (payflowProMethod) {\r\n        return payflowProMethod.extend(payflowProMethodMixin);\r\n    };\r\n});\r\n","Magento_Persistent/js/view/additional-welcome.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, $t, customerData) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Init.\r\n         */\r\n        init: function () {\r\n            var persistent = customerData.get('persistent');\r\n\r\n            if (persistent().fullname === undefined) {\r\n                customerData.get('persistent').subscribe(this.replacePersistentWelcome);\r\n            } else {\r\n                this.replacePersistentWelcome();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Replace welcome message for customer with persistent cookie.\r\n         */\r\n        replacePersistentWelcome: function () {\r\n            var persistent = customerData.get('persistent'),\r\n                welcomeElems;\r\n\r\n            if (persistent().fullname !== undefined) {\r\n                welcomeElems = $('li.greet.welcome > span.not-logged-in');\r\n\r\n                if (welcomeElems.length) {\r\n                    $(welcomeElems).each(function () {\r\n                        var html = $t('Welcome, %1!').replace('%1', persistent().fullname);\r\n\r\n                        $(this).attr('data-bind', html);\r\n                        $(this).html(html);\r\n                    });\r\n                    $(welcomeElems).append(' <span><a ' + window.notYouLink + '>' + $t('Not you?') + '</a>');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @constructor\r\n         */\r\n        'Magento_Persistent/js/view/additional-welcome': function () {\r\n            this.init();\r\n        }\r\n    };\r\n});\r\n","Magento_Persistent/js/view/customer-data-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper'\r\n], function ($, wrapper) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n        /**\r\n         * Check if persistent section is expired due to lifetime.\r\n         *\r\n         * @param {Function} originFn - Original method.\r\n         * @return {Array}\r\n         */\r\n        getExpiredSectionNames: function (originFn) {\r\n            var expiredSections = originFn(),\r\n                storage = $.initNamespaceStorage('mage-cache-storage').localStorage,\r\n                currentTimestamp = Math.floor(Date.now() / 1000),\r\n                persistentIndex = expiredSections.indexOf('persistent'),\r\n                persistentLifeTime = 0,\r\n                sectionData;\r\n\r\n            if (window.persistent !== undefined && window.persistent.expirationLifetime !== undefined) {\r\n                persistentLifeTime = window.persistent.expirationLifetime;\r\n            }\r\n\r\n            if (persistentIndex !== -1) {\r\n                sectionData = storage.get('persistent');\r\n\r\n                if (typeof sectionData === 'object' &&\r\n                    sectionData['data_id'] + persistentLifeTime >= currentTimestamp\r\n                ) {\r\n                    expiredSections.splice(persistentIndex, 1);\r\n                }\r\n            }\r\n\r\n            return expiredSections;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} settings\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/customer-data': function (originFn) {\r\n            let mageCacheTimeout = new Date($.localStorage.get('mage-cache-timeout')),\r\n                mageCacheSessId = $.cookieStorage.isSet('mage-cache-sessid');\r\n\r\n            originFn();\r\n            if (window.persistent !== undefined && (mageCacheTimeout < new Date() || !mageCacheSessId)) {\r\n                this.reload(['persistent','cart'],true);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Override default customer-data.getExpiredSectionNames().\r\n     */\r\n    return function (target) {\r\n        return wrapper.extend(target, mixin);\r\n    };\r\n});\r\n","Magento_ProductAlert/js/form-submitter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n\r\n        $(element).trigger('submit');\r\n    };\r\n});\r\n","Magento_ProductVideo/js/fotorama-add-video-events.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'catalogGallery',\r\n    'loadPlayer'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    var allowBase = true; //global var is needed because fotorama always fully reloads events in case of fullscreen\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    function parseHref(href) {\r\n        var a = document.createElement('a');\r\n\r\n        a.href = href;\r\n\r\n        return a;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    function parseURL(href, forceVideo) {\r\n        var id,\r\n            type,\r\n            ampersandPosition,\r\n            vimeoRegex,\r\n            useYoutubeNocookie = false;\r\n\r\n        /**\r\n         * Get youtube ID\r\n         * @param {String} srcid\r\n         * @returns {{}}\r\n         */\r\n        function _getYoutubeId(srcid) {\r\n            if (srcid) {\r\n                ampersandPosition = srcid.indexOf('&');\r\n\r\n                if (ampersandPosition === -1) {\r\n                    return srcid;\r\n                }\r\n\r\n                srcid = srcid.substring(0, ampersandPosition);\r\n            }\r\n\r\n            return srcid;\r\n        }\r\n\r\n        if (typeof href !== 'string') {\r\n            return href;\r\n        }\r\n\r\n        href = parseHref(href);\r\n\r\n        if (href.host.match(/youtube\\.com/) && href.search) {\r\n            id = href.search.split('v=')[1];\r\n\r\n            if (id) {\r\n                id = _getYoutubeId(id);\r\n                type = 'youtube';\r\n            }\r\n        } else if (href.host.match(/youtube\\.com|youtu\\.be|youtube-nocookie.com/)) {\r\n            id = href.pathname.replace(/^\\/(embed\\/|v\\/)?/, '').replace(/\\/.*/, '');\r\n            type = 'youtube';\r\n\r\n            if (href.host.match(/youtube-nocookie.com/)) {\r\n                useYoutubeNocookie = true;\r\n            }\r\n        } else if (href.host.match(/vimeo\\.com/)) {\r\n            type = 'vimeo';\r\n            vimeoRegex = new RegExp(['https?:\\\\/\\\\/(?:www\\\\.|player\\\\.)?vimeo.com\\\\/(?:channels\\\\/(?:\\\\w+\\\\/)',\r\n                '?|groups\\\\/([^\\\\/]*)\\\\/videos\\\\/|album\\\\/(\\\\d+)\\\\/video\\\\/|video\\\\/|)(\\\\d+)(?:$|\\\\/|\\\\?)'\r\n            ].join(''));\r\n            id = href.href.match(vimeoRegex)[3];\r\n        }\r\n\r\n        if ((!id || !type) && forceVideo) {\r\n            id = href.href;\r\n            type = 'custom';\r\n        }\r\n\r\n        return id ? {\r\n            id: id, type: type, s: href.search.replace(/^\\?/, ''), useYoutubeNocookie: useYoutubeNocookie\r\n        } : false;\r\n    }\r\n\r\n    //create AddFotoramaVideoEvents widget\r\n    $.widget('mage.AddFotoramaVideoEvents', {\r\n        options: {\r\n            videoData: '',\r\n            videoSettings: '',\r\n            optionsVideoData: '',\r\n            dataMergeStrategy: 'replace'\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        onVimeoJSFramework: function () {},\r\n        defaultVideoData: [],\r\n        PV: 'product-video', // [CONST]\r\n        VU: 'video-unplayed',\r\n        PVLOADED: 'fotorama__product-video--loaded', // [CONST]\r\n        PVLOADING: 'fotorama__product-video--loading', // [CONST]\r\n        VID: 'video', // [CONST]\r\n        VI: 'vimeo', // [CONST]\r\n        FTVC: 'fotorama__video-close',\r\n        FTAR: 'fotorama__arr',\r\n        fotoramaSpinner: 'fotorama__spinner',\r\n        fotoramaSpinnerShow: 'fotorama__spinner--show',\r\n        TI: 'video-thumb-icon',\r\n        isFullscreen: false,\r\n        FTCF: '[data-gallery-role=\"fotorama__fullscreen-icon\"]',\r\n        Base: 0, //on check for video is base this setting become true if there is any video with base role\r\n        MobileMaxWidth: 768,\r\n        GP: 'gallery-placeholder', //gallery placeholder class is needed to find and erase <script> tag\r\n        videoData: null,\r\n        videoDataPlaceholder: [{\r\n            id: '',\r\n            isBase: true,\r\n            mediaType: 'image',\r\n            provider: ''\r\n        }],\r\n\r\n        /**\r\n         * Creates widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            $(this.element).data('gallery') ?\r\n                this._onGalleryLoaded() :\r\n                $(this.element).on('gallery:loaded', this._onGalleryLoaded.bind(this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initialize: function () {\r\n            if (!this.defaultVideoData.length) {\r\n                this.defaultVideoData = this.options.videoData;\r\n            }\r\n\r\n            // If product does not have images, no video data generated,\r\n            // but for configurable product we still need a video data, in case of 'prepend' gallery strategy.\r\n            if (!this.defaultVideoData.length && !this.options.videoData.length) {\r\n                this.defaultVideoData = this.options.videoData = this.videoDataPlaceholder;\r\n            }\r\n\r\n            this.clearEvents();\r\n\r\n            if (this._checkForVideoExist()) {\r\n                this._checkFullscreen();\r\n                this._listenForFullscreen();\r\n                this._isVideoBase();\r\n                this._initFotoramaVideo();\r\n                this._attachFotoramaEvents();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         */\r\n        _onGalleryLoaded: function () {\r\n            this.fotoramaItem = $(this.element).find('.fotorama-item');\r\n            this._initialize();\r\n        },\r\n\r\n        /**\r\n         * Clear gallery events to prevent duplicated calls.\r\n         *\r\n         * @private\r\n         */\r\n        clearEvents: function () {\r\n            if (this.fotoramaItem !== undefined) {\r\n                this.fotoramaItem.off(\r\n                    'fotorama:show.' + this.PV +\r\n                    ' fotorama:showend.' + this.PV +\r\n                    ' fotorama:fullscreenenter.' + this.PV +\r\n                    ' fotorama:fullscreenexit.' + this.PV\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _setOptions: function (options) {\r\n            if (options.videoData && options.videoData.length) {\r\n                this.options.videoData = options.videoData;\r\n            }\r\n\r\n            this._loadVideoData(options);\r\n            this._initialize();\r\n        },\r\n\r\n        /**\r\n         * Set video data for configurable product.\r\n         *\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _loadVideoData: function (options) {\r\n            if (options.selectedOption) {\r\n                if (options.dataMergeStrategy === 'prepend') {\r\n                    this.options.videoData = [].concat(\r\n                        this.options.optionsVideoData[options.selectedOption],\r\n                        this.defaultVideoData\r\n                    );\r\n                } else {\r\n                    this.options.videoData = this.options.optionsVideoData[options.selectedOption];\r\n                }\r\n            } else {\r\n                this.options.videoData = this.defaultVideoData;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _checkFullscreen: function () {\r\n            if (this.fotoramaItem.data('fotorama').fullScreen || false) {\r\n                this.isFullscreen = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _listenForFullscreen: function () {\r\n            this.fotoramaItem.on('fotorama:fullscreenenter.' + this.PV, $.proxy(function () {\r\n                this.isFullscreen = true;\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:fullscreenexit.' + this.PV, $.proxy(function () {\r\n                this.isFullscreen = false;\r\n                this._hideVideoArrows();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} inputData\r\n         * @param {bool} isJSON\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _createVideoData: function (inputData, isJSON) {\r\n            var videoData = [],\r\n                dataUrl,\r\n                tmpVideoData,\r\n                tmpInputData,\r\n                i;\r\n\r\n            if (isJSON) {\r\n                inputData = JSON.parse(inputData);\r\n            }\r\n\r\n            for (i = 0; i < inputData.length; i++) {\r\n                tmpInputData = inputData[i];\r\n                dataUrl = '';\r\n                tmpVideoData = {\r\n                    mediaType: '',\r\n                    isBase: '',\r\n                    id: '',\r\n                    provider: ''\r\n                };\r\n                tmpVideoData.mediaType = this.VID;\r\n\r\n                if (tmpInputData.mediaType !== 'external-video') {\r\n                    tmpVideoData.mediaType = tmpInputData.mediaType;\r\n                }\r\n\r\n                tmpVideoData.isBase = tmpInputData.isBase;\r\n\r\n                if (tmpInputData.videoUrl && tmpInputData.videoUrl !== null) {\r\n                    dataUrl = tmpInputData.videoUrl;\r\n                    dataUrl = parseURL(dataUrl);\r\n                    tmpVideoData.id = dataUrl.id;\r\n                    tmpVideoData.provider = dataUrl.type;\r\n                    tmpVideoData.videoUrl = tmpInputData.videoUrl;\r\n                    tmpVideoData.useYoutubeNocookie = dataUrl.useYoutubeNocookie;\r\n                }\r\n\r\n                videoData.push(tmpVideoData);\r\n            }\r\n\r\n            return videoData;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} fotorama\r\n         * @param {bool} isBase\r\n         * @private\r\n         */\r\n        _createCloseVideo: function (fotorama, isBase) {\r\n            var closeVideo;\r\n\r\n            this.fotoramaItem.find('.' + this.FTVC).remove();\r\n            this.fotoramaItem.append('<div class=\"' + this.FTVC + '\"></div>');\r\n            this.fotoramaItem.css('position', 'relative');\r\n            closeVideo = this.fotoramaItem.find('.' + this.FTVC);\r\n            this._closeVideoSetEvents(closeVideo, fotorama);\r\n\r\n            if (\r\n                isBase &&\r\n                this.options.videoData[fotorama.activeIndex].isBase &&\r\n                $(window).width() > this.MobileMaxWidth) {\r\n                this._showCloseVideo();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _hideCloseVideo: function () {\r\n            this.fotoramaItem\r\n                .find('.' + this.FTVC)\r\n                .removeClass('fotorama-show-control');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _showCloseVideo: function () {\r\n            this.fotoramaItem\r\n                .find('.' + this.FTVC)\r\n                .addClass('fotorama-show-control');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {jQuery} $closeVideo\r\n         * @param {jQuery} fotorama\r\n         * @private\r\n         */\r\n        _closeVideoSetEvents: function ($closeVideo, fotorama) {\r\n            $closeVideo.on('click', $.proxy(function () {\r\n                this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, true);\r\n                this._hideCloseVideo();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {Boolean}\r\n         * @private\r\n         */\r\n        _checkForVideoExist: function () {\r\n            var key, result, checker, videoSettings;\r\n\r\n            if (!this.options.videoData) {\r\n                return false;\r\n            }\r\n\r\n            if (!this.options.videoSettings) {\r\n                return false;\r\n            }\r\n\r\n            result = this._createVideoData(this.options.videoData, false);\r\n            checker = false;\r\n            videoSettings = this.options.videoSettings[0];\r\n            videoSettings.playIfBase = parseInt(videoSettings.playIfBase, 10);\r\n            videoSettings.showRelated = parseInt(videoSettings.showRelated, 10);\r\n            videoSettings.videoAutoRestart = parseInt(videoSettings.videoAutoRestart, 10);\r\n\r\n            for (key in result) {\r\n                if (result[key].mediaType === this.VID) {\r\n                    checker = true;\r\n                }\r\n            }\r\n\r\n            if (checker) {\r\n                this.options.videoData = result;\r\n            }\r\n\r\n            return checker;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _isVideoBase: function () {\r\n            var allVideoData = this.options.videoData,\r\n                videoItem,\r\n                allVideoDataKeys,\r\n                key,\r\n                i;\r\n\r\n            allVideoDataKeys = Object.keys(allVideoData);\r\n\r\n            for (i = 0; i < allVideoDataKeys.length; i++) {\r\n                key = allVideoDataKeys[i];\r\n                videoItem = allVideoData[key];\r\n\r\n                if (\r\n                    videoItem.mediaType === this.VID && videoItem.isBase &&\r\n                    this.options.videoSettings[0].playIfBase && allowBase\r\n                ) {\r\n                    this.Base = true;\r\n                    allowBase = false;\r\n                }\r\n            }\r\n\r\n            if (!this.isFullscreen) {\r\n                this._createCloseVideo(this.fotoramaItem.data('fotorama'), this.Base);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Event} e\r\n         * @private\r\n         */\r\n        _initFotoramaVideo: function (e) {\r\n            var fotorama = this.fotoramaItem.data('fotorama'),\r\n                thumbsParent,\r\n                thumbs,\r\n                t;\r\n\r\n            if (!fotorama.activeFrame.$navThumbFrame) {\r\n                this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (evt, fotoramaData) {\r\n                    $(fotoramaData.activeFrame.$stageFrame).removeAttr('href');\r\n                }, this));\r\n\r\n                this._startPrepareForPlayer(e, fotorama);\r\n\r\n                return null;\r\n            }\r\n\r\n            fotorama.data.map($.proxy(this._setItemType, this));\r\n            thumbsParent = fotorama.activeFrame.$navThumbFrame.parent();\r\n            thumbs = thumbsParent.find('.fotorama__nav__frame:visible');\r\n\r\n            for (t = 0; t < thumbs.length; t++) {\r\n                this._setThumbsIcon(thumbs.eq(t), t);\r\n                this._checkForVideo(e, fotorama, t + 1);\r\n            }\r\n\r\n            this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (evt, fotoramaData) {\r\n                $(fotoramaData.activeFrame.$stageFrame).removeAttr('href');\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} elem\r\n         * @param {Number} i\r\n         * @private\r\n         */\r\n        _setThumbsIcon: function (elem, i) {\r\n            var fotorama = this.fotoramaItem.data('fotorama');\r\n\r\n            if (fotorama.options.nav === 'dots' && elem.hasClass(this.TI)) {\r\n                elem.removeClass(this.TI);\r\n            }\r\n\r\n            if (this.options.videoData[i].mediaType === this.VID &&\r\n                fotorama.data[i].type ===  this.VID &&\r\n                fotorama.options.nav === 'thumbs') {\r\n                elem.addClass(this.TI);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Temporary solution with adding types for configurable product items\r\n         *\r\n         * @param {Object} item\r\n         * @param {Number} i\r\n         * @private\r\n         */\r\n        _setItemType: function (item, i) {\r\n            !item.type && (item.type = this.options.videoData[i].mediaType);\r\n        },\r\n\r\n        /**\r\n         * Attach\r\n         *\r\n         * @private\r\n         */\r\n        _attachFotoramaEvents: function () {\r\n            this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (e, fotorama) {\r\n                this._startPrepareForPlayer(e, fotorama);\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:show.' + this.PV, $.proxy(function (e, fotorama) {\r\n                this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, true);\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:fullscreenexit.' + this.PV, $.proxy(function (e, fotorama) {\r\n                fotorama.activeFrame.$stageFrame.find('.' + this.PV).remove();\r\n                this._startPrepareForPlayer(e, fotorama);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Start prepare for player\r\n         *\r\n         * @param {Event} e\r\n         * @param {jQuery} fotorama\r\n         * @private\r\n         */\r\n        _startPrepareForPlayer: function (e, fotorama) {\r\n            this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, false);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i - 1);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i + 1);\r\n        },\r\n\r\n        /**\r\n         * Check for video\r\n         *\r\n         * @param {Event} e\r\n         * @param {jQuery} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _checkForVideo: function (e, fotorama, number) {\r\n            var videoData = this.options.videoData[number - 1],\r\n                $image = fotorama.data[number - 1];\r\n\r\n            if ($image) {\r\n                !$image.type && this._setItemType($image, number - 1);\r\n\r\n                if ($image.type === 'image') {\r\n                    $image.$navThumbFrame && $image.$navThumbFrame.removeClass(this.TI);\r\n                    this._hideCloseVideo();\r\n\r\n                    return;\r\n                } else if ($image.$navThumbFrame && $image.type === 'video') {\r\n                    !$image.$navThumbFrame.hasClass(this.TI) && $image.$navThumbFrame.addClass(this.TI);\r\n                }\r\n\r\n                $image = $image.$stageFrame;\r\n            }\r\n\r\n            if ($image && videoData && videoData.mediaType === this.VID) {\r\n                $(fotorama.activeFrame.$stageFrame).removeAttr('href');\r\n                this._prepareForVideoContainer($image, videoData, fotorama, number);\r\n            }\r\n\r\n            if (this.isFullscreen && this.fotoramaItem.data('fotorama').activeFrame.i === number) {\r\n                this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Prepare for video container\r\n         *\r\n         * @param {jQuery} $image\r\n         * @param {Object} videoData\r\n         * @param {Object} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _prepareForVideoContainer: function ($image, videoData, fotorama, number) {\r\n            $image.addClass('fotorama-video-container').addClass(this.VU);\r\n            this._createVideoContainer(videoData, $image);\r\n            this._setVideoEvent($image, this.PV, fotorama, number);\r\n        },\r\n\r\n        /**\r\n         * Create video container\r\n         *\r\n         * @param {Object} videoData\r\n         * @param {jQuery} $image\r\n         * @private\r\n         */\r\n        _createVideoContainer: function (videoData, $image) {\r\n            var videoSettings;\r\n\r\n            videoSettings = this.options.videoSettings[0];\r\n            $image.find('.' + this.PV).remove();\r\n            $image.append(\r\n                '<div class=\"' +\r\n                this.PV +\r\n                '\" data-related=\"' +\r\n                videoSettings.showRelated +\r\n                '\" data-loop=\"' +\r\n                videoSettings.videoAutoRestart +\r\n                '\" data-type=\"' +\r\n                videoData.provider +\r\n                '\" data-code=\"' +\r\n                videoData.id +\r\n                '\"  data-youtubenocookie=\"' +\r\n                videoData.useYoutubeNocookie +\r\n                '\" data-width=\"100%\" data-height=\"100%\"></div>'\r\n            );\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} $image\r\n         * @param {Object} PV\r\n         * @param {Object} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _setVideoEvent: function ($image, PV, fotorama, number) {\r\n            $image.find('.magnify-lens').remove();\r\n            $image\r\n                .off('click tap', $.proxy(this._clickHandler, this))\r\n                .on('click tap', $.proxy(this._clickHandler, this));\r\n            this._handleBaseVideo(fotorama, number); //check for video is it base and handle it if it's base\r\n        },\r\n\r\n        /**\r\n         * Hides preview arrows above video player.\r\n         * @private\r\n         */\r\n        _hideVideoArrows: function () {\r\n            var arrows = $('.' + this.FTAR);\r\n\r\n            arrows.removeClass('fotorama__arr--shown');\r\n            arrows.removeClass('fotorama__arr--hidden');\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _showLoader: function () {\r\n            var spinner = this.fotoramaItem.find('.' + this.fotoramaSpinner);\r\n\r\n            spinner.addClass(this.fotoramaSpinnerShow);\r\n            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.addClass(this.PVLOADING);\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _hideLoader: function () {\r\n            var spinner = this.fotoramaItem.find('.' + this.fotoramaSpinner);\r\n\r\n            spinner.removeClass(this.fotoramaSpinnerShow);\r\n            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.removeClass(this.PVLOADING);\r\n        },\r\n\r\n        /**\r\n         * @param {Event} event\r\n         * @private\r\n         */\r\n        _clickHandler: function (event) {\r\n            var type;\r\n\r\n            if ($(event.target).hasClass(this.VU) && $(event.target).find('iframe').length === 0) {\r\n                $(event.target).removeClass(this.VU);\r\n                type = $(event.target).find('.' + this.PV).data('type');\r\n\r\n                if (type === this.VI) {\r\n                    $(event.target).find('.' + this.PV).productVideoLoader();\r\n                } else if (type === this.VI) {\r\n                    this._showLoader();\r\n                    this.onVimeoJSFramework = function () {\r\n                        $(event.target).find('.' + this.PV).productVideoLoader();\r\n                        this._hideLoader();\r\n                    }.bind(this);\r\n                } else {\r\n                    $(event.target).find('.' + this.PV).productVideoLoader();\r\n                }\r\n\r\n                $('.' + this.FTAR).addClass(this.isFullscreen ? 'fotorama__arr--shown' : 'fotorama__arr--hidden');\r\n                $('.' + this.FTVC).addClass('fotorama-show-control');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle base video\r\n         * @param {Object} fotorama\r\n         * @param {Number} srcNumber\r\n         * @private\r\n         */\r\n        _handleBaseVideo: function (fotorama, srcNumber) {\r\n            var videoData = this.options.videoData,\r\n                activeIndex = fotorama.activeIndex,\r\n                number = parseInt(srcNumber, 10),\r\n                activeIndexIsBase = videoData[activeIndex];\r\n\r\n            if (!this.Base) {\r\n                return;\r\n            }\r\n\r\n            if (activeIndexIsBase && number === 1 && $(window).width() > this.MobileMaxWidth) {\r\n                setTimeout($.proxy(function () {\r\n                    fotorama.requestFullScreen();\r\n                    this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n                    this.Base = false;\r\n                }, this), 50);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Destroy video player\r\n         * @param {jQuery} $wrapper\r\n         * @param {jQuery} current\r\n         * @param {bool} close\r\n         * @private\r\n         */\r\n        _unloadVideoPlayer: function ($wrapper, current, close) {\r\n            var self = this;\r\n\r\n            if (!$wrapper) {\r\n                return;\r\n            }\r\n\r\n            $wrapper.find('.' + this.PVLOADED).removeClass(this.PVLOADED);\r\n            this._hideLoader();\r\n\r\n            $wrapper.find('.' + this.PV).each(function () {\r\n                var $item = $(this).parent(),\r\n                    cloneVideoDiv,\r\n                    iframeElement = $(this).find('iframe'),\r\n                    currentIndex,\r\n                    itemIndex;\r\n\r\n                if (iframeElement.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                currentIndex = current.activeFrame.$stageFrame.index();\r\n                itemIndex = $item.index();\r\n\r\n                if (currentIndex === itemIndex && !close) {\r\n                    return;\r\n                }\r\n\r\n                if (currentIndex !== itemIndex && close) {\r\n                    return;\r\n                }\r\n\r\n                iframeElement.remove();\r\n                cloneVideoDiv = $(this).clone();\r\n                $(this).remove();\r\n                $item.append(cloneVideoDiv);\r\n                $item.addClass(self.VU);\r\n\r\n                self._hideCloseVideo();\r\n                self._hideVideoArrows();\r\n\r\n                if (self.isFullscreen && !self.fotoramaItem.data('fotorama').options.fullscreen.arrows) {\r\n                    if ($('.' + self.FTAR + '--prev').is(':focus') || $('.' + self.FTAR + '--next').is(':focus')) {\r\n                        $(self.FTCF).trigger('focus');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.AddFotoramaVideoEvents;\r\n});\r\n","Magento_ProductVideo/js/load-player.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n @version 0.0.1\r\n @requires jQuery & jQuery UI\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'vimeoWrapper'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var videoRegister = {\r\n        _register: {},\r\n\r\n        /**\r\n         * Checks, if api is already registered\r\n         *\r\n         * @param {String} api\r\n         * @returns {bool}\r\n         */\r\n        isRegistered: function (api) {\r\n            return this._register[api] !== undefined;\r\n        },\r\n\r\n        /**\r\n         * Checks, if api is loaded\r\n         *\r\n         * @param {String} api\r\n         * @returns {bool}\r\n         */\r\n        isLoaded: function (api) {\r\n            return this._register[api] !== undefined && this._register[api] === true;\r\n        },\r\n\r\n        /**\r\n         * Register new video api\r\n         * @param {String} api\r\n         * @param {bool} loaded\r\n         */\r\n        register: function (api, loaded) {\r\n            loaded = loaded || false;\r\n            this._register[api] = loaded;\r\n        }\r\n    };\r\n\r\n    $.widget('mage.productVideoLoader', {\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            switch (this.element.data('type')) {\r\n                case 'youtube':\r\n                    this.element.videoYoutube();\r\n                    this._player = this.element.data('mageVideoYoutube');\r\n                    break;\r\n\r\n                case 'vimeo':\r\n                    this.element.videoVimeo();\r\n                    this._player = this.element.data('mageVideoVimeo');\r\n                    break;\r\n                default:\r\n                    throw {\r\n                        name: 'Video Error',\r\n                        message: 'Unknown video type',\r\n\r\n                        /**\r\n                         * join name with message\r\n                         */\r\n                        toString: function () {\r\n                            return this.name + ': ' + this.message;\r\n                        }\r\n                    };\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes variables\r\n         * @private\r\n         */\r\n        _initialize: function () {\r\n            this._params = this.element.data('params') || {};\r\n            this._code = this.element.data('code');\r\n            this._width = this.element.data('width');\r\n            this._height = this.element.data('height');\r\n            this._autoplay = !!this.element.data('autoplay');\r\n            this._playing = this._autoplay || false;\r\n            this._loop = this.element.data('loop');\r\n            this._rel = this.element.data('related');\r\n            this.useYoutubeNocookie = this.element.data('youtubenocookie') || false;\r\n\r\n            this._responsive = this.element.data('responsive') !== false;\r\n\r\n            if (this._responsive === true) {\r\n                this.element.addClass('responsive');\r\n            }\r\n\r\n            this._calculateRatio();\r\n        },\r\n\r\n        /**\r\n         * Abstract play command\r\n         */\r\n        play: function () {\r\n            this._player.play();\r\n        },\r\n\r\n        /**\r\n         * Abstract pause command\r\n         */\r\n        pause: function () {\r\n            this._player.pause();\r\n        },\r\n\r\n        /**\r\n         * Abstract stop command\r\n         */\r\n        stop: function () {\r\n            this._player.stop();\r\n        },\r\n\r\n        /**\r\n         * Abstract playing command\r\n         */\r\n        playing: function () {\r\n            return this._player.playing();\r\n        },\r\n\r\n        /**\r\n         * Calculates ratio for responsive videos\r\n         * @private\r\n         */\r\n        _calculateRatio: function () {\r\n            if (!this._responsive) {\r\n                return;\r\n            }\r\n            this.element.css('paddingBottom', this._height / this._width * 100 + '%');\r\n        }\r\n    });\r\n\r\n    $.widget('mage.videoYoutube', $.mage.productVideoLoader, {\r\n\r\n        /**\r\n         * Initialization of the Youtube widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            this._initialize();\r\n\r\n            this.element.append('<div></div>');\r\n\r\n            this._on(window, {\r\n\r\n                /**\r\n                 * Handle event\r\n                 */\r\n                'youtubeapiready': function () {\r\n                    var host = 'https://www.youtube.com';\r\n\r\n                    if (self.useYoutubeNocookie) {\r\n                        host = 'https://www.youtube-nocookie.com';\r\n                    }\r\n\r\n                    if (self._player !== undefined) {\r\n                        return;\r\n                    }\r\n                    self._autoplay = true;\r\n\r\n                    if (self._autoplay) {\r\n                        self._params.autoplay = 1;\r\n                    }\r\n\r\n                    if (!self._rel) {\r\n                        self._params.rel = 0;\r\n                    }\r\n\r\n                    self._player = new window.YT.Player(self.element.children(':first')[0], {\r\n                        height: self._height,\r\n                        width: self._width,\r\n                        videoId: self._code,\r\n                        playerVars: self._params,\r\n                        host: host,\r\n                        events: {\r\n\r\n                            /**\r\n                             * Get duration\r\n                             */\r\n                            'onReady': function onPlayerReady() {\r\n                                self._player.getDuration();\r\n                                self.element.closest('.fotorama__stage__frame')\r\n                                    .addClass('fotorama__product-video--loaded');\r\n                            },\r\n\r\n                            /**\r\n                             * Event observer\r\n                             */\r\n                            onStateChange: function (data) {\r\n                                switch (window.parseInt(data.data, 10)) {\r\n                                    case 1:\r\n                                        self._playing = true;\r\n                                        break;\r\n                                    default:\r\n                                        self._playing = false;\r\n                                        break;\r\n                                }\r\n\r\n                                self._trigger('statechange', {}, data);\r\n\r\n                                if (data.data === window.YT.PlayerState.ENDED && self._loop) {\r\n                                    self._player.playVideo();\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    });\r\n                }\r\n            });\r\n\r\n            this._loadApi();\r\n        },\r\n\r\n        /**\r\n         * Loads Youtube API and triggers event, when loaded\r\n         * @private\r\n         */\r\n        _loadApi: function () {\r\n            var element,\r\n                scriptTag;\r\n\r\n            if (videoRegister.isRegistered('youtube')) {\r\n                if (videoRegister.isLoaded('youtube')) {\r\n                    $(window).trigger('youtubeapiready');\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            // if script already loaded by other library\r\n            if (window.YT) {\r\n                videoRegister.register('youtube', true);\r\n                $(window).trigger('youtubeapiready');\r\n\r\n                return;\r\n            }\r\n            videoRegister.register('youtube');\r\n\r\n            element = document.createElement('script');\r\n            scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n            element.async = true;\r\n            element.src = 'https://www.youtube.com/iframe_api';\r\n            scriptTag.parentNode.insertBefore(element, scriptTag);\r\n\r\n            /**\r\n             * Event observe and handle\r\n             */\r\n            window.onYouTubeIframeAPIReady = function () {\r\n                $(window).trigger('youtubeapiready');\r\n                videoRegister.register('youtube', true);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Play command for Youtube\r\n         */\r\n        play: function () {\r\n            this._player.playVideo();\r\n            this._playing = true;\r\n        },\r\n\r\n        /**\r\n         * Pause command for Youtube\r\n         */\r\n        pause: function () {\r\n            this._player.pauseVideo();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Stop command for Youtube\r\n         */\r\n        stop: function () {\r\n            this._player.stopVideo();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Playing command for Youtube\r\n         */\r\n        playing: function () {\r\n            return this._playing;\r\n        },\r\n\r\n        /**\r\n         * stops and unloads player\r\n         * @private\r\n         */\r\n        _destroy: function () {\r\n            this.stop();\r\n        }\r\n    });\r\n\r\n    $.widget('mage.videoVimeo', $.mage.productVideoLoader, {\r\n\r\n        /**\r\n         * Initialize the Vimeo widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var timestamp,\r\n                additionalParams = '',\r\n                src,\r\n                id;\r\n\r\n            this._initialize();\r\n            timestamp = new Date().getTime();\r\n            this._autoplay = true;\r\n\r\n            if (this._autoplay) {\r\n                additionalParams += '&autoplay=1';\r\n            }\r\n\r\n            if (this._loop) {\r\n                additionalParams += '&loop=1';\r\n            }\r\n            src = 'https://player.vimeo.com/video/' +\r\n                this._code + '?api=1&player_id=vimeo' +\r\n                this._code +\r\n                timestamp +\r\n                additionalParams;\r\n            id = 'vimeo' + this._code + timestamp;\r\n            this.element.append(\r\n                $('<iframe></iframe>')\r\n                    .attr('frameborder', 0)\r\n                    .attr('id', id)\r\n                    .attr('width', this._width)\r\n                    .attr('height', this._height)\r\n                    .attr('src', src)\r\n                    .attr('webkitallowfullscreen', '')\r\n                    .attr('mozallowfullscreen', '')\r\n                    .attr('allowfullscreen', '')\r\n                    .attr('referrerPolicy', 'origin')\r\n                    .attr('allow', 'autoplay')\r\n            );\r\n\r\n            /* eslint-disable no-undef */\r\n            this._player = new Vimeo.Player(this.element.children(':first')[0]);\r\n\r\n            this._player.ready().then(function () {\r\n                $('#' + id).closest('.fotorama__stage__frame').addClass('fotorama__product-video--loaded');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Play command for Vimeo\r\n         */\r\n        play: function () {\r\n            this._player.play();\r\n            this._playing = true;\r\n        },\r\n\r\n        /**\r\n         * Pause command for Vimeo\r\n         */\r\n        pause: function () {\r\n            this._player.pause();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Stop command for Vimeo\r\n         */\r\n        stop: function () {\r\n            this._player.unload();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Playing command for Vimeo\r\n         */\r\n        playing: function () {\r\n            return this._playing;\r\n        }\r\n    });\r\n});\r\n","Magento_ReCaptchaCheckout/js/webapiReCaptchaRegistry-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (originalFunction) {\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n       originalFunction.addListener = function (id , func) {\r\n            this._listeners[id] = func;\r\n       };\r\n\r\n        return originalFunction;\r\n    };\r\n\r\n});\r\n","Magento_ReCaptchaCheckout/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* eslint-disable max-nested-callbacks */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry'\r\n], function ($, wrapper, recaptchaRegistry) {\r\n    'use strict';\r\n\r\n    return function (placeOrder) {\r\n        return wrapper.wrap(placeOrder, function (originalAction, serviceUrl, payload, messageContainer) {\r\n            var recaptchaDeferred;\r\n\r\n            if (recaptchaRegistry.triggers.hasOwnProperty('recaptcha-checkout-place-order')) {\r\n                //ReCaptcha is present for checkout\r\n                recaptchaDeferred = $.Deferred();\r\n                recaptchaRegistry.addListener('recaptcha-checkout-place-order', function (token) {\r\n                    //Add reCaptcha value to place-order request and resolve deferred with the API call results\r\n                    payload.xReCaptchaValue = token;\r\n                    originalAction(serviceUrl, payload, messageContainer).done(function () {\r\n                        recaptchaDeferred.resolve.apply(recaptchaDeferred, arguments);\r\n                    }).fail(function () {\r\n                        recaptchaDeferred.reject.apply(recaptchaDeferred, arguments);\r\n                    });\r\n                });\r\n                //Trigger ReCaptcha validation\r\n                recaptchaRegistry.triggers['recaptcha-checkout-place-order']();\r\n\r\n                if (\r\n                    !recaptchaRegistry._isInvisibleType.hasOwnProperty('recaptcha-checkout-place-order') ||\r\n                    recaptchaRegistry._isInvisibleType['recaptcha-checkout-place-order'] === false\r\n                ) {\r\n                    //remove listener so that place order action is only triggered by the 'Place Order' button\r\n                    recaptchaRegistry.removeListener('recaptcha-checkout-place-order');\r\n                }\r\n\r\n                return recaptchaDeferred;\r\n            }\r\n\r\n            //No ReCaptcha, just sending the request\r\n            return originalAction(serviceUrl, payload, messageContainer);\r\n        });\r\n    };\r\n});\r\n","Magento_ReCaptchaCheckoutSalesRule/js/checkout-sales-rule.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* global grecaptcha */\r\ndefine(\r\n    [\r\n        'Magento_ReCaptchaWebapiUi/js/webapiReCaptcha',\r\n        'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry',\r\n        'jquery',\r\n        'Magento_SalesRule/js/action/set-coupon-code',\r\n        'Magento_SalesRule/js/action/cancel-coupon',\r\n        'Magento_Checkout/js/model/quote',\r\n        'ko'\r\n    ], function (Component, recaptchaRegistry, $, setCouponCodeAction, cancelCouponAction, quote, ko) {\r\n        'use strict';\r\n\r\n        var totals = quote.getTotals(),\r\n            couponCode = ko.observable(null),\r\n            isApplied;\r\n\r\n        if (totals()) {\r\n            couponCode(totals()['coupon_code']);\r\n        }\r\n        //Captcha can only be required for adding a coupon so we need to know if one was added already.\r\n        isApplied = ko.observable(couponCode() != null);\r\n\r\n        return Component.extend({\r\n\r\n            /**\r\n             * Initialize parent form.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var self = this,\r\n                    xRecaptchaValue,\r\n                    captchaId = this.getReCaptchaId();\r\n\r\n                this._super();\r\n\r\n                if (couponCode() != null) {\r\n                    if (isApplied) {\r\n                        self.validateReCaptcha(true);\r\n                        $('#' + captchaId).hide();\r\n                    }\r\n                }\r\n\r\n                if (recaptchaRegistry.triggers.hasOwnProperty('recaptcha-checkout-coupon-apply')) {\r\n                    recaptchaRegistry.addListener('recaptcha-checkout-coupon-apply', function (token) {\r\n                        //Add reCaptcha value to coupon request\r\n                        xRecaptchaValue = token;\r\n                    });\r\n                }\r\n\r\n                setCouponCodeAction.registerDataModifier(function (headers) {\r\n                    headers['X-ReCaptcha'] = xRecaptchaValue;\r\n                });\r\n\r\n                if (self.getIsInvisibleRecaptcha()) {\r\n                    grecaptcha.execute(widgetId);\r\n                    self.validateReCaptcha(true);\r\n                }\r\n                //Refresh reCaptcha after failed request.\r\n                setCouponCodeAction.registerFailCallback(function () {\r\n                    if (self.getIsInvisibleRecaptcha()) {\r\n                        grecaptcha.execute(widgetId);\r\n                        self.validateReCaptcha(true);\r\n                    } else {\r\n                        self.validateReCaptcha(false);\r\n                        grecaptcha.reset(widgetId);\r\n                        $('#' + captchaId).show();\r\n                    }\r\n                });\r\n                //Hide captcha when a coupon has been applied.\r\n                setCouponCodeAction.registerSuccessCallback(function () {\r\n                    self.validateReCaptcha(true);\r\n                    $('#' + captchaId).hide();\r\n                });\r\n                //Show captcha again if it was canceled.\r\n                cancelCouponAction.registerSuccessCallback(function () {\r\n                    self.validateReCaptcha(false);\r\n                    grecaptcha.reset(widgetId);\r\n                    $('#' + captchaId).show();\r\n                });\r\n            }\r\n        });\r\n    });\r\n","Magento_ReCaptchaFrontendUi/js/nonInlineReCaptchaRenderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global grecaptcha */\r\ndefine([\r\n    'jquery',\r\n    'jquery/z-index'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var reCaptchaEntities = [],\r\n        initialized = false,\r\n        rendererRecaptchaId = 'recaptcha-invisible',\r\n        rendererReCaptcha = null;\r\n\r\n    return {\r\n        /**\r\n         * Add reCaptcha entity to checklist.\r\n         *\r\n         * @param {jQuery} reCaptchaEntity\r\n         * @param {Object} parameters\r\n         */\r\n        add: function (reCaptchaEntity, parameters) {\r\n            if (!initialized) {\r\n                this.init();\r\n                grecaptcha.render(rendererRecaptchaId, parameters);\r\n                setInterval(this.resolveVisibility, 100);\r\n                initialized = true;\r\n            }\r\n\r\n            reCaptchaEntities.push(reCaptchaEntity);\r\n        },\r\n\r\n        /**\r\n         * Show additional reCaptcha instance if any other should be visible, otherwise hide it.\r\n         */\r\n        resolveVisibility: function () {\r\n            reCaptchaEntities.some(function (entity) {\r\n                return entity.is(':visible') &&\r\n                    // 900 is some magic z-index value of modal popups.\r\n                    (entity.closest('[data-role=\\'modal\\']').length === 0 || entity.zIndex() > 900);\r\n            }) ? rendererReCaptcha.show() : rendererReCaptcha.hide();\r\n        },\r\n\r\n        /**\r\n         * Initialize additional reCaptcha instance.\r\n         */\r\n        init: function () {\r\n            rendererReCaptcha = $('<div/>', {\r\n                'id': rendererRecaptchaId\r\n            });\r\n            rendererReCaptcha.hide();\r\n            $('body').append(rendererReCaptcha);\r\n        }\r\n    };\r\n});\r\n","Magento_ReCaptchaFrontendUi/js/reCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global grecaptcha */\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'jquery',\r\n        'ko',\r\n        'underscore',\r\n        'Magento_ReCaptchaFrontendUi/js/registry',\r\n        'Magento_ReCaptchaFrontendUi/js/reCaptchaScriptLoader',\r\n        'Magento_ReCaptchaFrontendUi/js/nonInlineReCaptchaRenderer'\r\n    ], function (Component, $, ko, _, registry, reCaptchaLoader, nonInlineReCaptchaRenderer) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n\r\n            defaults: {\r\n                template: 'Magento_ReCaptchaFrontendUi/reCaptcha',\r\n                reCaptchaId: 'recaptcha'\r\n            },\r\n\r\n            /**\r\n             * @inheritdoc\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n                this._loadApi();\r\n            },\r\n\r\n            /**\r\n             * Loads recaptchaapi API and triggers event, when loaded\r\n             * @private\r\n             */\r\n            _loadApi: function () {\r\n                if (this._isApiRegistered !== undefined) {\r\n                    if (this._isApiRegistered === true) {\r\n                        $(window).trigger('recaptchaapiready');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n                this._isApiRegistered = false;\r\n\r\n                // global function\r\n                window.globalOnRecaptchaOnLoadCallback = function () {\r\n                    this._isApiRegistered = true;\r\n                    $(window).trigger('recaptchaapiready');\r\n                }.bind(this);\r\n\r\n                reCaptchaLoader.addReCaptchaScriptTag();\r\n            },\r\n\r\n            /**\r\n             * Checking that reCAPTCHA is invisible type\r\n             * @returns {Boolean}\r\n             */\r\n            getIsInvisibleRecaptcha: function () {\r\n                if (this.settings ===\r\n\r\n                    void 0) {\r\n                    return false;\r\n                }\r\n\r\n                return this.settings.invisible;\r\n            },\r\n\r\n            /**\r\n             * reCAPTCHA callback\r\n             * @param {String} token\r\n             */\r\n            reCaptchaCallback: function (token) {\r\n                if (this.getIsInvisibleRecaptcha()) {\r\n                    this.tokenField.value = token;\r\n                    this.$parentForm.submit();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Initialize reCAPTCHA after first rendering\r\n             */\r\n            initCaptcha: function () {\r\n                var $parentForm,\r\n                    $wrapper,\r\n                    $reCaptcha,\r\n                    widgetId,\r\n                    parameters;\r\n\r\n                if (this.captchaInitialized || this.settings ===\r\n\r\n                    void 0) {\r\n                    return;\r\n                }\r\n\r\n                this.captchaInitialized = true;\r\n\r\n                /*\r\n                 * Workaround for data-bind issue:\r\n                 * We cannot use data-bind to link a dynamic id to our component\r\n                 * See:\r\n                 * https://stackoverflow.com/questions/46657573/recaptcha-the-bind-parameter-must-be-an-element-or-id\r\n                 *\r\n                 * We create a wrapper element with a wrapping id and we inject the real ID with jQuery.\r\n                 * In this way we have no data-bind attribute at all in our reCAPTCHA div\r\n                 */\r\n                $wrapper = $('#' + this.getReCaptchaId() + '-wrapper');\r\n                $reCaptcha = $wrapper.find('.g-recaptcha');\r\n                $reCaptcha.attr('id', this.getReCaptchaId());\r\n\r\n                $parentForm = $wrapper.parents('form');\r\n\r\n                if (this.settings === undefined) {\r\n\r\n                    return;\r\n                }\r\n\r\n                parameters = _.extend(\r\n                    {\r\n                        'callback': function (token) { // jscs:ignore jsDoc\r\n                            this.reCaptchaCallback(token);\r\n                            this.validateReCaptcha(true);\r\n                        }.bind(this),\r\n                        'expired-callback': function () {\r\n                            this.validateReCaptcha(false);\r\n                        }.bind(this)\r\n                    },\r\n                    this.settings.rendering\r\n                );\r\n\r\n                if (parameters.size === 'invisible' && parameters.badge !== 'inline') {\r\n                    nonInlineReCaptchaRenderer.add($reCaptcha, parameters);\r\n                }\r\n\r\n                // eslint-disable-next-line no-undef\r\n                widgetId = grecaptcha.render(this.getReCaptchaId(), parameters);\r\n                this.initParentForm($parentForm, widgetId);\r\n\r\n                registry.ids.push(this.getReCaptchaId());\r\n                registry.captchaList.push(widgetId);\r\n                registry.tokenFields.push(this.tokenField);\r\n\r\n            },\r\n\r\n            /**\r\n             * Initialize parent form.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var listeners;\r\n\r\n                if (this.getIsInvisibleRecaptcha() && parentForm.length > 0) {\r\n                    parentForm.submit(function (event) {\r\n                        if (!this.tokenField.value) {\r\n                            // eslint-disable-next-line no-undef\r\n                            grecaptcha.execute(widgetId);\r\n                            event.preventDefault(event);\r\n                            event.stopImmediatePropagation();\r\n                        }\r\n                    }.bind(this));\r\n\r\n                    // Move our (last) handler topmost. We need this to avoid submit bindings with ko.\r\n                    listeners = $._data(parentForm[0], 'events').submit;\r\n                    listeners.unshift(listeners.pop());\r\n\r\n                    // Create a virtual token field\r\n                    this.tokenField = $('<input type=\"text\" name=\"token\" style=\"display: none\" />')[0];\r\n                    this.$parentForm = parentForm;\r\n                    parentForm.append(this.tokenField);\r\n                } else {\r\n                    this.tokenField = null;\r\n                }\r\n                if ($('#send2').length > 0) {$('#send2').prop('disabled', false);}\r\n            },\r\n\r\n            /**\r\n             * Validates reCAPTCHA\r\n             * @param {*} state\r\n             * @returns {jQuery}\r\n             */\r\n            validateReCaptcha: function (state) {\r\n                if (!this.getIsInvisibleRecaptcha()) {\r\n                    return $(document).find('input[type=checkbox].required-captcha').prop('checked', state);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Render reCAPTCHA\r\n             */\r\n            renderReCaptcha: function () {\r\n                if (window.grecaptcha && window.grecaptcha.render) { // Check if reCAPTCHA is already loaded\r\n                    this.initCaptcha();\r\n                } else { // Wait for reCAPTCHA to be loaded\r\n                    $(window).on('recaptchaapiready', function () {\r\n                        this.initCaptcha();\r\n                    }.bind(this));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Get reCAPTCHA ID\r\n             * @returns {String}\r\n             */\r\n            getReCaptchaId: function () {\r\n                return this.reCaptchaId;\r\n            }\r\n        });\r\n    });\r\n","Magento_ReCaptchaFrontendUi/js/reCaptchaScriptLoader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var scriptTagAdded = false;\r\n\r\n    return {\r\n        /**\r\n         * Add script tag. Script tag should be added once\r\n         */\r\n        addReCaptchaScriptTag: function () {\r\n            var element, scriptTag;\r\n\r\n            if (!scriptTagAdded) {\r\n                element = document.createElement('script');\r\n                scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n                element.async = true;\r\n                element.src = 'https://www.google.com/recaptcha/api.js' +\r\n                    '?onload=globalOnRecaptchaOnLoadCallback&render=explicit';\r\n\r\n                scriptTag.parentNode.insertBefore(element, scriptTag);\r\n                scriptTagAdded = true;\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_ReCaptchaFrontendUi/js/registry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        ids: ko.observableArray([]),\r\n        captchaList: ko.observableArray([]),\r\n        tokenFields: ko.observableArray([])\r\n    };\r\n});\r\n","Magento_ReCaptchaFrontendUi/js/ui-messages-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['Magento_ReCaptchaFrontendUi/js/registry'], function (registry) {\r\n    'use strict';\r\n\r\n    return function (originalComponent) {\r\n        return originalComponent.extend({\r\n            /**\r\n             * Initialize reset on messages\r\n             * @returns {initialize}\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n\r\n                this.messageContainer.errorMessages.subscribe(function () {\r\n                    var\r\n                        i,\r\n                        captchaList = registry.captchaList(),\r\n                        tokenFieldsList = registry.tokenFields();\r\n\r\n                    for (i = 0; i < captchaList.length; i++) {\r\n                        // eslint-disable-next-line no-undef\r\n                        grecaptcha.reset(captchaList[i]);\r\n\r\n                        if (tokenFieldsList[i]) {\r\n                            tokenFieldsList[i].value = '';\r\n                        }\r\n                    }\r\n                }, null, 'arrayChange');\r\n\r\n                return this;\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_ReCaptchaPaypal/js/payflowpro-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/payment/additional-validators'\r\n], function ($, additionalValidators) {\r\n    'use strict';\r\n\r\n    return function (originalComponent) {\r\n        return originalComponent.extend({\r\n            /**\r\n             * Initializes reCaptcha\r\n             */\r\n            placeOrder: function () {\r\n                var original = this._super.bind(this),\r\n                    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n                    isEnabledForPaypal = window.checkoutConfig.recaptcha_paypal,\r\n                    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n                    paymentFormSelector = $('#co-payment-form'),\r\n                    startEvent = 'captcha:startExecute',\r\n                    endEvent = 'captcha:endExecute';\r\n\r\n                if (!this.validateHandler() || !additionalValidators.validate() || !isEnabledForPaypal) {\r\n                    return original();\r\n                }\r\n\r\n                paymentFormSelector.off(endEvent).on(endEvent, function () {\r\n                    original();\r\n                    paymentFormSelector.off(endEvent);\r\n                });\r\n\r\n                paymentFormSelector.trigger(startEvent);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_ReCaptchaPaypal/js/reCaptchaPaypal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(\r\n    [\r\n        'Magento_ReCaptchaFrontendUi/js/reCaptcha',\r\n        'jquery'\r\n    ],\r\n    function (Component, $) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n\r\n            /**\r\n             * Recaptcha callback\r\n             * @param {String} token\r\n             */\r\n            reCaptchaCallback: function (token) {\r\n                this.tokenField.value = token;\r\n                this.$parentForm.trigger('captcha:endExecute');\r\n            },\r\n\r\n            /**\r\n             * Initialize parent form.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var me = this;\r\n\r\n                parentForm.on('captcha:startExecute', function (event) {\r\n                    if (!me.tokenField.value && me.getIsInvisibleRecaptcha()) {\r\n                        // eslint-disable-next-line no-undef\r\n                        grecaptcha.execute(widgetId);\r\n                        event.preventDefault(event);\r\n                        event.stopImmediatePropagation();\r\n                    } else {\r\n                        me.$parentForm.trigger('captcha:endExecute');\r\n                    }\r\n                });\r\n\r\n                // Create a virtual token field\r\n                this.tokenField = $('<input type=\"text\" name=\"token\" style=\"display: none\" />')[0];\r\n                this.$parentForm = parentForm;\r\n                parentForm.append(this.tokenField);\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_ReCaptchaStorePickup/js/reCaptchaStorePickup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['Magento_ReCaptchaFrontendUi/js/reCaptcha'], function (reCaptcha) {\r\n    'use strict';\r\n\r\n    return reCaptcha.extend({\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        renderReCaptcha: function () {\r\n            this.captchaInitialized = false;\r\n            this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_ReCaptchaWebapiUi/js/jquery-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n// jscs:disable requireDotNotation\r\n\r\ndefine([\r\n    'mage/utils/wrapper'\r\n], function (wrapper) {\r\n    'use strict';\r\n\r\n    return function (jQuery) {\r\n        jQuery.ajax = wrapper.wrapSuper(jQuery.ajax, function () {\r\n            //Moving ReCaptcha value from payload to the header for requests to web API\r\n            var settings,\r\n                payload;\r\n\r\n            if (arguments.length !== 0) {\r\n                settings = arguments.length === 1 ? arguments[0] : arguments[1];\r\n            }\r\n\r\n            if (settings && settings.hasOwnProperty('data')) {\r\n                //The request has a body, trying to parse JSON data\r\n                try {\r\n                    payload = JSON.parse(settings.data);\r\n                } catch (e) {\r\n                    //Not JSON\r\n                }\r\n            }\r\n\r\n            if (payload && payload.hasOwnProperty('xReCaptchaValue')) {\r\n                if (!settings.hasOwnProperty('headers')) {\r\n                    settings.headers = {};\r\n                }\r\n                settings.headers['X-ReCaptcha'] = payload.xReCaptchaValue;\r\n                delete payload['xReCaptchaValue'];\r\n                settings.data = JSON.stringify(payload);\r\n            }\r\n\r\n            return this._super.apply(this, arguments);\r\n        });\r\n\r\n        return jQuery;\r\n    };\r\n});\r\n","Magento_ReCaptchaWebapiUi/js/webapiReCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n// jscs:disable jsDoc\r\n\r\n/* global grecaptcha */\r\ndefine(\r\n    [\r\n        'Magento_ReCaptchaFrontendUi/js/reCaptcha',\r\n        'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry'\r\n    ],\r\n    function (Component, registry) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                autoTrigger: false\r\n            },\r\n\r\n            /**\r\n             * Provide the token to the registry.\r\n             *\r\n             * @param {String} token\r\n             */\r\n            reCaptchaCallback: function (token) {\r\n                //Make the token retrievable in other UI components.\r\n                registry.tokens[this.getReCaptchaId()] = token;\r\n\r\n                if (typeof registry._listeners[this.getReCaptchaId()] !== 'undefined') {\r\n                    registry._listeners[this.getReCaptchaId()](token);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Register this ReCaptcha.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var self = this,\r\n                    trigger;\r\n\r\n                trigger = function () {\r\n                    self.reCaptchaCallback(grecaptcha.getResponse(widgetId));\r\n                };\r\n                registry._isInvisibleType[this.getReCaptchaId()] = false;\r\n\r\n                if (this.getIsInvisibleRecaptcha()) {\r\n                    trigger = function () {\r\n                        grecaptcha.execute(widgetId);\r\n                    };\r\n                    registry._isInvisibleType[this.getReCaptchaId()] = true;\r\n                }\r\n\r\n                if (this.autoTrigger) {\r\n                    //Validate ReCaptcha when initiated\r\n                    trigger();\r\n                    registry.triggers[this.getReCaptchaId()] = new Function();\r\n                } else {\r\n                    registry.triggers[this.getReCaptchaId()] = trigger;\r\n                }\r\n                this.tokenField = null;\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * recaptchaId: token map.\r\n         *\r\n         * Tokens for already verified recaptcha.\r\n         */\r\n        tokens: {},\r\n\r\n        /**\r\n         * recaptchaId: triggerFn map.\r\n         *\r\n         * Call a trigger to initiate a recaptcha verification.\r\n         */\r\n        triggers: {},\r\n\r\n        /**\r\n         * recaptchaId: callback map\r\n         */\r\n        _listeners: {},\r\n\r\n        /**\r\n         * recaptchaId: bool map\r\n         */\r\n        _isInvisibleType: {},\r\n\r\n        /**\r\n         * Add a listener to when the ReCaptcha finishes verification\r\n         * @param {String} id - ReCaptchaId\r\n         * @param {Function} func - Will be called back with the token\r\n         */\r\n        addListener: function (id, func) {\r\n            if (this.tokens.hasOwnProperty(id)) {\r\n                func(this.tokens[id]);\r\n            } else {\r\n                this._listeners[id] = func;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove a listener\r\n         *\r\n         * @param id\r\n         */\r\n        removeListener: function (id) {\r\n            this._listeners[id] = undefined;\r\n        }\r\n    };\r\n});\r\n","Magento_Reports/js/recently-viewed.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.recentlyViewedProducts', {\r\n        options: {\r\n            localStorageKey: 'recently-viewed-products',\r\n            productBlock: '#widget_viewed_item',\r\n            viewedContainer: 'ol'\r\n        },\r\n\r\n        /**\r\n         * Bind events to the appropriate handlers.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var productHtml = $(this.options.productBlock).html(),\r\n                productSku = $(this.options.productBlock).data('sku'),\r\n                products = JSON.parse(window.localStorage.getItem(this.options.localStorageKey)),\r\n                productsLength, maximum, showed, index;\r\n\r\n            if (products) {\r\n                productsLength = products.sku.length;\r\n                maximum = $(this.element).data('count');\r\n                showed = 0;\r\n\r\n                for (index = 0; index <= productsLength; index++) {\r\n                    if (products.sku[index] == productSku || showed >= maximum) { //eslint-disable-line\r\n                        products.sku.splice(index, 1);\r\n                        products.html.splice(index, 1);\r\n                    } else {\r\n                        $(this.element).find(this.options.viewedContainer).append(products.html[index]);\r\n                        $(this.element).show();\r\n                        showed++;\r\n                    }\r\n                }\r\n                $(this.element).find(this.options.productBlock).show();\r\n            } else {\r\n                products = {};\r\n                products.sku = [];\r\n                products.html = [];\r\n            }\r\n            products.sku.unshift(productSku);\r\n            products.html.unshift(productHtml);\r\n            window.localStorage.setItem(this.options.localStorageKey, JSON.stringify(products));\r\n        }\r\n    });\r\n\r\n    return $.mage.recentlyViewedProducts;\r\n});\r\n","Magento_Review/js/error-placement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).mage('validation', {\r\n            /** @inheritdoc */\r\n            errorPlacement: function (error, el) {\r\n\r\n                if (el.parents('#product-review-table').length) {\r\n                    $('#product-review-table').siblings(this.errorElement + '.' + this.errorClass).remove();\r\n                    $('#product-review-table').after(error);\r\n                } else {\r\n                    el.after(error);\r\n                }\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/process-reviews.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'tabs',\r\n    'collapsible'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @param {*} fromPages\r\n     */\r\n    function processReviews(url, fromPages) {\r\n        $.ajax({\r\n            url: url,\r\n            cache: true,\r\n            dataType: 'html',\r\n            showLoader: false,\r\n            loaderContext: $('.product.data.items')\r\n        }).done(function (data) {\r\n            $('#product-review-container').html(data).trigger('contentUpdated');\r\n            $('[data-role=\"product-review\"] .pages a').each(function (index, element) {\r\n                $(element).on('click', function (event) { //eslint-disable-line max-nested-callbacks\r\n                    processReviews($(element).attr('href'), true);\r\n                    event.preventDefault();\r\n                });\r\n            });\r\n        }).always(function () {\r\n            if (fromPages == true) { //eslint-disable-line eqeqeq\r\n                $('html, body').animate({\r\n                    scrollTop: $('#reviews').offset().top - 50\r\n                }, 300);\r\n            }\r\n        });\r\n    }\r\n\r\n    return function (config) {\r\n        var reviewTab = $(config.reviewsTabSelector),\r\n            requiredReviewTabRole = 'tab';\r\n\r\n        if (reviewTab.attr('role') === requiredReviewTabRole && reviewTab.hasClass('active')) {\r\n            processReviews(config.productReviewUrl, location.hash === '#reviews');\r\n        } else {\r\n            reviewTab.one('beforeOpen', function () {\r\n                processReviews(config.productReviewUrl);\r\n            });\r\n        }\r\n\r\n        $(function () {\r\n            $('.product-info-main .reviews-actions a').on('click', function (event) {\r\n                var anchor, addReviewBlock;\r\n\r\n                event.preventDefault();\r\n                anchor = $(this).attr('href').replace(/^.*?(#|$)/, '');\r\n                addReviewBlock = $('#' + anchor);\r\n\r\n                if (addReviewBlock.length) {\r\n                    $('.product.data.items [data-role=\"content\"]').each(function (index) { //eslint-disable-line\r\n                        if (this.id == 'reviews') { //eslint-disable-line eqeqeq\r\n                            $('.product.data.items').tabs('activate', index);\r\n                        }\r\n                    });\r\n                    $('html, body').animate({\r\n                        scrollTop: addReviewBlock.offset().top - 50\r\n                    }, 300);\r\n                }\r\n\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/submit-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('submit', function () {\r\n            if ($(this).valid()) {\r\n                $(this).find('.submit').attr('disabled', true);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/validate-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/validate',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'rating-required', function (value) {\r\n            return value !== undefined;\r\n        }, $.mage.__('Please select one of each of the ratings above.'));\r\n});\r\n","Magento_Review/js/view/review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/view/customer'\r\n], function (Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.review = customerData.get('review').extend({\r\n                disposableCustomerData: 'review'\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        nickname: function () {\r\n            return this.review().nickname || customerData.get('customer')().firstname;\r\n        }\r\n    });\r\n});\r\n","Magento_Sales/js/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.giftMessage', {\r\n        options: {\r\n            rowPrefix: '#order-item-row-', // Selector prefix for item's row in the table.\r\n            linkPrefix: '#order-item-gift-message-link-', // Selector prefix for the 'Gift Message' link.\r\n            duration: 100, // Toggle duration.\r\n            expandedClass: 'expanded', // Class added/removed to/from the 'Gift Message' link.\r\n            expandedContentClass: 'expanded-content', // Class added/removed to/from the 'Gift Message' content.\r\n            lastClass: 'last' // Class added/removed to/from the last item's row in the products table.\r\n        },\r\n\r\n        /**\r\n         * Bind a click handler on the widget's element to toggle the gift message.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', $.proxy(this._toggleGiftMessage, this));\r\n        },\r\n\r\n        /**\r\n         * Toggle the display of the item's corresponding gift message.\r\n         * @private\r\n         * @param {jQuery.Event} event - Click event.\r\n         */\r\n        _toggleGiftMessage: function (event) {\r\n            var element = $(event.target), // Click target. The 'Gift Message' link or 'Close' button.\r\n                options = this.options, // Cached widget options.\r\n                itemId = element.data('item-id'), // The individual item's numeric id.\r\n                link = $(options.linkPrefix + itemId), // The 'Gift Message' expandable link.\r\n                row = $(options.rowPrefix + itemId), // The item's row in the products table.\r\n                region = $('#' + element.attr('aria-controls')); // The gift message container region.\r\n\r\n            region.toggleClass(options.expandedContentClass, options.duration, function () {\r\n                if (region.attr('aria-expanded') === 'true') {\r\n                    region.attr('aria-expanded', 'false');\r\n\r\n                    if (region.hasClass(options.lastClass)) {\r\n                        row.addClass(options.lastClass);\r\n                    }\r\n                } else {\r\n                    region.attr('aria-expanded', 'true');\r\n\r\n                    if (region.hasClass(options.lastClass)) {\r\n                        row.removeClass(options.lastClass);\r\n                    }\r\n                }\r\n                link.toggleClass(options.expandedClass);\r\n            });\r\n            event.preventDefault(); // Prevent event propagation and avoid going to the link's href.\r\n        }\r\n    });\r\n\r\n    return $.mage.giftMessage;\r\n});\r\n","Magento_Sales/js/orders-returns.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.ordersReturns', {\r\n        options: {\r\n            zipCode: '#oar-zip', // Search by zip code.\r\n            emailAddress: '#oar-email', // Search by email address.\r\n            searchType: '#quick-search-type-id' // Search element used for choosing between the two.\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            $(this.options.searchType).on('change', $.proxy(this._showIdentifyBlock, this)).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Show either the search by zip code option or the search by email address option.\r\n         * @private\r\n         * @param {jQuery.Event} e - Change event. Event target value is either 'zip' or 'email'.\r\n         */\r\n        _showIdentifyBlock: function (e) {\r\n            var value = $(e.target).val();\r\n\r\n            $(this.options.zipCode).toggle(value === 'zip');\r\n            $(this.options.emailAddress).toggle(value === 'email');\r\n        }\r\n    });\r\n\r\n    return $.mage.ordersReturns;\r\n});\r\n","Magento_Sales/js/view/last-ordered-items.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore'\r\n], function (Component, customerData, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isShowAddToCart: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.lastOrderedItems = customerData.get('last-ordered-items');\r\n            this.lastOrderedItems.subscribe(this.checkSalableItems.bind(this));\r\n            this.checkSalableItems();\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('isShowAddToCart');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check if items is_saleable and change add to cart button visibility.\r\n         */\r\n        checkSalableItems: function () {\r\n            var isShowAddToCart = _.some(this.lastOrderedItems().items, {\r\n                'is_saleable': true\r\n            });\r\n\r\n            this.isShowAddToCart(isShowAddToCart);\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/action/cancel-coupon.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/totals',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/recollect-shipping-rates'\r\n], function ($, quote, urlManager, errorProcessor, messageContainer, storage, getPaymentInformationAction, totals, $t,\r\n  fullScreenLoader, recollectShippingRates\r\n) {\r\n    'use strict';\r\n\r\n    var successCallbacks = [],\r\n        action,\r\n        callSuccessCallbacks;\r\n\r\n    /**\r\n     * Execute callbacks when a coupon is successfully canceled.\r\n     */\r\n    callSuccessCallbacks = function () {\r\n        successCallbacks.forEach(function (callback) {\r\n            callback();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Cancel applied coupon.\r\n     *\r\n     * @param {Boolean} isApplied\r\n     * @returns {Deferred}\r\n     */\r\n    action =  function (isApplied) {\r\n        var quoteId = quote.getQuoteId(),\r\n            url = urlManager.getCancelCouponUrl(quoteId),\r\n            message = $t('Your coupon was successfully removed.');\r\n\r\n        messageContainer.clear();\r\n        fullScreenLoader.startLoader();\r\n\r\n        return storage.delete(\r\n            url,\r\n            false\r\n        ).done(function () {\r\n            var deferred = $.Deferred();\r\n\r\n            totals.isLoading(true);\r\n            recollectShippingRates();\r\n            getPaymentInformationAction(deferred);\r\n            $.when(deferred).done(function () {\r\n                isApplied(false);\r\n                totals.isLoading(false);\r\n                fullScreenLoader.stopLoader();\r\n                //Allowing to tap into coupon-cancel process.\r\n                callSuccessCallbacks();\r\n            });\r\n            messageContainer.addSuccessMessage({\r\n                'message': message\r\n            });\r\n        }).fail(function (response) {\r\n            totals.isLoading(false);\r\n            fullScreenLoader.stopLoader();\r\n            errorProcessor.process(response, messageContainer);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Callback for when the cancel-coupon process is finished.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerSuccessCallback = function (callback) {\r\n        successCallbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_SalesRule/js/action/select-payment-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'Magento_Checkout/js/action/set-payment-information-extended',\r\n    'Magento_Checkout/js/action/get-totals',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function ($, wrapper, quote, messageContainer, setPaymentInformationExtended, getTotalsAction, coupon) {\r\n    'use strict';\r\n\r\n    return function (selectPaymentMethodAction) {\r\n\r\n        return wrapper.wrap(selectPaymentMethodAction, function (originalSelectPaymentMethodAction, paymentMethod) {\r\n\r\n            originalSelectPaymentMethodAction(paymentMethod);\r\n\r\n            if (paymentMethod === null) {\r\n                return;\r\n            }\r\n\r\n            $.when(\r\n                setPaymentInformationExtended(\r\n                    messageContainer,\r\n                    {\r\n                        method: paymentMethod.method\r\n                    },\r\n                    true\r\n                )\r\n            ).done(\r\n                function () {\r\n                    var deferred = $.Deferred(),\r\n\r\n                        /**\r\n                         * Update coupon form.\r\n                         */\r\n                        updateCouponCallback = function () {\r\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                                coupon.setCouponCode('');\r\n                                coupon.setIsApplied(false);\r\n                            }\r\n                        };\r\n\r\n                    getTotalsAction([], deferred);\r\n                    $.when(deferred).done(updateCouponCallback);\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n});\r\n","Magento_SalesRule/js/action/set-coupon-code.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'mage/storage',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/recollect-shipping-rates'\r\n], function (ko, $, quote, urlManager, errorProcessor, messageContainer, storage, $t, getPaymentInformationAction,\r\n    totals, fullScreenLoader, recollectShippingRates\r\n) {\r\n    'use strict';\r\n\r\n    var dataModifiers = [],\r\n        successCallbacks = [],\r\n        failCallbacks = [],\r\n        action;\r\n\r\n    /**\r\n     * Apply provided coupon.\r\n     *\r\n     * @param {String} couponCode\r\n     * @param {Boolean}isApplied\r\n     * @returns {Deferred}\r\n     */\r\n    action = function (couponCode, isApplied) {\r\n        var quoteId = quote.getQuoteId(),\r\n            url = urlManager.getApplyCouponUrl(couponCode, quoteId),\r\n            message = $t('Your coupon was successfully applied.'),\r\n            data = {},\r\n            headers = {};\r\n\r\n        //Allowing to modify coupon-apply request\r\n        dataModifiers.forEach(function (modifier) {\r\n            modifier(headers, data);\r\n        });\r\n        fullScreenLoader.startLoader();\r\n\r\n        return storage.put(\r\n            url,\r\n            data,\r\n            false,\r\n            null,\r\n            headers\r\n        ).done(function (response) {\r\n            var deferred;\r\n\r\n            if (response) {\r\n                deferred = $.Deferred();\r\n\r\n                isApplied(true);\r\n                totals.isLoading(true);\r\n                recollectShippingRates();\r\n                getPaymentInformationAction(deferred);\r\n                $.when(deferred).done(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                    totals.isLoading(false);\r\n                });\r\n                messageContainer.addSuccessMessage({\r\n                    'message': message\r\n                });\r\n                //Allowing to tap into apply-coupon process.\r\n                successCallbacks.forEach(function (callback) {\r\n                    callback(response);\r\n                });\r\n            }\r\n        }).fail(function (response) {\r\n            fullScreenLoader.stopLoader();\r\n            totals.isLoading(false);\r\n            errorProcessor.process(response, messageContainer);\r\n            //Allowing to tap into apply-coupon process.\r\n            failCallbacks.forEach(function (callback) {\r\n                callback(response);\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Modifying data to be sent.\r\n     *\r\n     * @param {Function} modifier\r\n     */\r\n    action.registerDataModifier = function (modifier) {\r\n        dataModifiers.push(modifier);\r\n    };\r\n\r\n    /**\r\n     * When successfully added a coupon.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerSuccessCallback = function (callback) {\r\n        successCallbacks.push(callback);\r\n    };\r\n\r\n    /**\r\n     * When failed to add a coupon.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerFailCallback = function (callback) {\r\n        failCallbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_SalesRule/js/form/element/coupon-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, uiRegistry, select) {\r\n    'use strict';\r\n\r\n    return select.extend({\r\n\r\n        /**\r\n         * Hide fields on coupon tab\r\n         */\r\n        onUpdate: function () {\r\n\r\n            /* eslint-disable eqeqeq */\r\n            if (this.value() != this.displayOnlyForCouponType) {\r\n                uiRegistry.get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation').checked(false);\r\n            }\r\n\r\n            this.enableDisableFields();\r\n        },\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/manage-coupon-codes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/components/fieldset',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (_, uiRegistry, fieldset, async) {\r\n    'use strict';\r\n\r\n    return fieldset.extend({\r\n\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * Initialize element\r\n         *\r\n         * @returns {Abstract} Chainable\r\n         */\r\n        initialize: function (elems, position) {\r\n            var obj = this;\r\n\r\n            this._super();\r\n\r\n            async.async('#sales-rule-form-tab-coupons', document.getElementById('container'), function (node) {\r\n                var useAutoGeneration = uiRegistry.get(\r\n                    'sales_rule_form.sales_rule_form.rule_information.use_auto_generation'\r\n                );\r\n\r\n                useAutoGeneration.on('checked', function () {\r\n                    obj.enableDisableFields();\r\n                });\r\n                obj.enableDisableFields();\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /*eslint-enable no-unused-vars*/\r\n        /*eslint-disable lines-around-comment*/\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            /**\r\n             * \\Magento\\Rule\\Model\\AbstractModel::COUPON_TYPE_AUTO\r\n             */\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/model/coupon.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * Coupon model.\r\n */\r\ndefine([\r\n    'ko',\r\n    'domReady!'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    var couponCode = ko.observable(null),\r\n        isApplied = ko.observable(null);\r\n\r\n    return {\r\n        couponCode: couponCode,\r\n        isApplied: isApplied,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponCode: function () {\r\n            return couponCode;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        getIsApplied: function () {\r\n            return isApplied;\r\n        },\r\n\r\n        /**\r\n         * @param {*} couponCodeValue\r\n         */\r\n        setCouponCode: function (couponCodeValue) {\r\n            couponCode(couponCodeValue);\r\n        },\r\n\r\n        /**\r\n         * @param {Boolean} isAppliedValue\r\n         */\r\n        setIsApplied: function (isAppliedValue) {\r\n            isApplied(isAppliedValue);\r\n        }\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/coupon',\r\n    'Magento_Checkout/js/action/get-totals'\r\n], function ($, wrapper, quote, coupon, getTotalsAction) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\r\n            var result;\r\n\r\n            $.when(\r\n                result = originalAction(paymentData, messageContainer)\r\n            ).fail(\r\n                function () {\r\n                    var deferred = $.Deferred(),\r\n\r\n                        /**\r\n                         * Update coupon form\r\n                         */\r\n                        updateCouponCallback = function () {\r\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                                coupon.setCouponCode('');\r\n                                coupon.setIsApplied(false);\r\n                            }\r\n                        };\r\n\r\n                    getTotalsAction([], deferred);\r\n                    $.when(deferred).done(updateCouponCallback);\r\n                }\r\n            );\r\n\r\n            return result;\r\n        });\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/shipping-save-processor-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function (wrapper, quote, coupon) {\r\n    'use strict';\r\n\r\n    return function (shippingSaveProcessor) {\r\n        shippingSaveProcessor.saveShippingInformation = wrapper.wrapSuper(\r\n            shippingSaveProcessor.saveShippingInformation,\r\n            function (type) {\r\n                var updateCouponCallback;\r\n\r\n                /**\r\n                 * Update coupon form\r\n                 */\r\n                updateCouponCallback = function () {\r\n                    if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                        coupon.setCouponCode('');\r\n                        coupon.setIsApplied(false);\r\n                    }\r\n                };\r\n\r\n                return this._super(type).done(updateCouponCallback);\r\n            }\r\n        );\r\n\r\n        return shippingSaveProcessor;\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/payment/discount-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/model/messages'\r\n], function (Messages) {\r\n    'use strict';\r\n\r\n    return new Messages();\r\n});\r\n","Magento_SalesRule/js/view/cart/totals/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_SalesRule/js/view/summary/discount'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/cart/totals/discount'\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.getPureValue() != 0; //eslint-disable-line eqeqeq\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/payment/captcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n        'Magento_Captcha/js/model/captchaList',\r\n        'Magento_SalesRule/js/action/set-coupon-code',\r\n        'Magento_SalesRule/js/action/cancel-coupon',\r\n        'Magento_Checkout/js/model/quote',\r\n        'ko'\r\n    ],\r\n    function (defaultCaptcha, captchaList, setCouponCodeAction, cancelCouponAction, quote, ko) {\r\n        'use strict';\r\n\r\n        var totals = quote.getTotals(),\r\n            couponCode = ko.observable(null),\r\n            isApplied;\r\n\r\n        if (totals()) {\r\n            couponCode(totals()['coupon_code']);\r\n        }\r\n        //Captcha can only be required for adding a coupon so we need to know if one was added already.\r\n        isApplied = ko.observable(couponCode() != null);\r\n\r\n        return defaultCaptcha.extend({\r\n            /** @inheritdoc */\r\n            initialize: function () {\r\n                var self = this,\r\n                    currentCaptcha;\r\n\r\n                this._super();\r\n                //Getting coupon captcha model.\r\n                currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n                if (currentCaptcha != null) {\r\n                    if (!isApplied()) {\r\n                        //Show captcha if we don't have a coupon applied.\r\n                        currentCaptcha.setIsVisible(true);\r\n                    }\r\n                    this.setCurrentCaptcha(currentCaptcha);\r\n                    //Add captcha code to coupon-apply request.\r\n                    setCouponCodeAction.registerDataModifier(function (headers) {\r\n                        if (self.isRequired()) {\r\n                            headers['X-Captcha'] = self.captchaValue()();\r\n                        }\r\n                    });\r\n                    //Refresh captcha after failed request.\r\n                    setCouponCodeAction.registerFailCallback(function () {\r\n                        if (self.isRequired()) {\r\n                            self.refresh();\r\n                        }\r\n                    });\r\n                    //Hide captcha when a coupon has been applied.\r\n                    setCouponCodeAction.registerSuccessCallback(function () {\r\n                        self.setIsVisible(false);\r\n                    });\r\n                    //Show captcha again if it was canceled.\r\n                    cancelCouponAction.registerSuccessCallback(function () {\r\n                        if (self.isRequired()) {\r\n                            self.setIsVisible(true);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    });\r\n","Magento_SalesRule/js/view/payment/discount-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    '../../model/payment/discount-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/payment/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/action/set-coupon-code',\r\n    'Magento_SalesRule/js/action/cancel-coupon',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function ($, ko, Component, quote, setCouponCodeAction, cancelCouponAction, coupon) {\r\n    'use strict';\r\n\r\n    var totals = quote.getTotals(),\r\n        couponCode = coupon.getCouponCode(),\r\n        isApplied = coupon.getIsApplied();\r\n\r\n    if (totals()) {\r\n        couponCode(totals()['coupon_code']);\r\n    }\r\n    isApplied(couponCode() != null);\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/payment/discount'\r\n        },\r\n        couponCode: couponCode,\r\n\r\n        /**\r\n         * Applied flag\r\n         */\r\n        isApplied: isApplied,\r\n\r\n        /**\r\n         * Coupon code application procedure\r\n         */\r\n        apply: function () {\r\n            if (this.validate()) {\r\n                setCouponCodeAction(couponCode(), isApplied);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cancel using coupon\r\n         */\r\n        cancel: function () {\r\n            if (this.validate()) {\r\n                couponCode('');\r\n                cancelCouponAction(isApplied);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Coupon form validation\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            var form = '#discount-form';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/summary/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/summary/discount'\r\n        },\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode() && this.getPureValue() != 0; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponCode: function () {\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            return this.totals()['coupon_code'];\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponLabel: function () {\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            return this.totals()['coupon_label'];\r\n        },\r\n\r\n        /**\r\n         * Get discount title\r\n         *\r\n         * @returns {null|String}\r\n         */\r\n        getTitle: function () {\r\n            var discountSegments;\r\n\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            discountSegments = this.totals()['total_segments'].filter(function (segment) {\r\n                return segment.code.indexOf('discount') !== -1;\r\n            });\r\n\r\n            return discountSegments.length ? discountSegments[0].title : null;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals() && this.totals()['discount_amount']) {\r\n                price = parseFloat(this.totals()['discount_amount']);\r\n            }\r\n\r\n            return price;\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Search/js/form-mini.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'matchMedia',\r\n    'jquery-ui-modules/widget',\r\n    'jquery-ui-modules/core',\r\n    'mage/translate'\r\n], function ($, _, mageTemplate, mediaCheck) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Check whether the incoming string is not empty or if doesn't consist of spaces.\r\n     *\r\n     * @param {String} value - Value to check.\r\n     * @returns {Boolean}\r\n     */\r\n    function isEmpty(value) {\r\n        return value.length === 0 || value == null || /^\\s+$/.test(value);\r\n    }\r\n\r\n    $.widget('mage.quickSearch', {\r\n        options: {\r\n            autocomplete: 'off',\r\n            minSearchLength: 3,\r\n            responseFieldElements: 'ul li',\r\n            selectClass: 'selected',\r\n            template:\r\n                '<li class=\"<%- data.row_class %>\" id=\"qs-option-<%- data.index %>\" role=\"option\">' +\r\n                '<span class=\"qs-option-name\">' +\r\n                ' <%- data.title %>' +\r\n                '</span>' +\r\n                '<span aria-hidden=\"true\" class=\"amount\">' +\r\n                '<%- data.num_results %>' +\r\n                '</span>' +\r\n                '</li>',\r\n            submitBtn: 'button[type=\"submit\"]',\r\n            searchLabel: '[data-role=minisearch-label]',\r\n            isExpandable: null,\r\n            suggestionDelay: 300\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.responseList = {\r\n                indexList: null,\r\n                selected: null\r\n            };\r\n            this.autoComplete = $(this.options.destinationSelector);\r\n            this.searchForm = $(this.options.formSelector);\r\n            this.submitBtn = this.searchForm.find(this.options.submitBtn)[0];\r\n            this.searchLabel = this.searchForm.find(this.options.searchLabel);\r\n            this.isExpandable = this.options.isExpandable;\r\n\r\n            _.bindAll(this, '_onKeyDown', '_onPropertyChange', '_onSubmit');\r\n\r\n            this.submitBtn.disabled = true;\r\n\r\n            this.element.attr('autocomplete', this.options.autocomplete);\r\n\r\n            mediaCheck({\r\n                media: '(max-width: 768px)',\r\n                entry: function () {\r\n                    this.isExpandable = true;\r\n                }.bind(this),\r\n                exit: function () {\r\n                    this.isExpandable = true;\r\n                }.bind(this)\r\n            });\r\n\r\n            this.searchLabel.on('click', function (e) {\r\n                // allow input to lose its' focus when clicking on label\r\n                if (this.isExpandable && this.isActive()) {\r\n                    e.preventDefault();\r\n                }\r\n            }.bind(this));\r\n\r\n            this.element.on('blur', $.proxy(function () {\r\n                if (!this.searchLabel.hasClass('active')) {\r\n                    return;\r\n                }\r\n\r\n                setTimeout($.proxy(function () {\r\n                    if (this.autoComplete.is(':hidden')) {\r\n                        this.setActiveState(false);\r\n                    } else {\r\n                        this.element.trigger('focus');\r\n                    }\r\n                    this.autoComplete.hide();\r\n                    this._updateAriaHasPopup(false);\r\n                }, this), 250);\r\n            }, this));\r\n\r\n            if (this.element.get(0) === document.activeElement) {\r\n                this.setActiveState(true);\r\n            }\r\n\r\n            this.element.on('focus', this.setActiveState.bind(this, true));\r\n            this.element.on('keydown', this._onKeyDown);\r\n            // Prevent spamming the server with requests by waiting till the user has stopped typing for period of time\r\n            this.element.on('input propertychange', _.debounce(this._onPropertyChange, this.options.suggestionDelay));\r\n\r\n            this.searchForm.on('submit', $.proxy(function (e) {\r\n                this._onSubmit(e);\r\n                this._updateAriaHasPopup(false);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Checks if search field is active.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return this.searchLabel.hasClass('active');\r\n        },\r\n\r\n        /**\r\n         * Sets state of the search field to provided value.\r\n         *\r\n         * @param {Boolean} isActive\r\n         */\r\n        setActiveState: function (isActive) {\r\n            var searchValue;\r\n\r\n            this.searchForm.toggleClass('active', isActive);\r\n            this.searchLabel.toggleClass('active', isActive);\r\n\r\n            if (this.isExpandable) {\r\n                this.element.attr('aria-expanded', isActive);\r\n                searchValue = this.element.val();\r\n                this.element.val('');\r\n                this.element.val(searchValue);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @return {Element} The first element in the suggestion list.\r\n         */\r\n        _getFirstVisibleElement: function () {\r\n            return this.responseList.indexList ? this.responseList.indexList.first() : false;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @return {Element} The last element in the suggestion list.\r\n         */\r\n        _getLastElement: function () {\r\n            return this.responseList.indexList ? this.responseList.indexList.last() : false;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @param {Boolean} show - Set attribute aria-haspopup to \"true/false\" for element.\r\n         */\r\n        _updateAriaHasPopup: function (show) {\r\n            if (show) {\r\n                this.element.attr('aria-haspopup', 'true');\r\n            } else {\r\n                this.element.attr('aria-haspopup', 'false');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clears the item selected from the suggestion list and resets the suggestion list.\r\n         * @private\r\n         * @param {Boolean} all - Controls whether to clear the suggestion list.\r\n         */\r\n        _resetResponseList: function (all) {\r\n            this.responseList.selected = null;\r\n\r\n            if (all === true) {\r\n                this.responseList.indexList = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the search box is submitted. Sets the search input field to the\r\n         * value of the selected item.\r\n         * @private\r\n         * @param {Event} e - The submit event\r\n         */\r\n        _onSubmit: function (e) {\r\n            var value = this.element.val();\r\n\r\n            if (isEmpty(value)) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            if (this.responseList.selected) {\r\n                this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when keys are pressed in the search input field. Performs specific actions\r\n         * depending on which keys are pressed.\r\n         * @private\r\n         * @param {Event} e - The key down event\r\n         * @return {Boolean} Default return type for any unhandled keys\r\n         */\r\n        _onKeyDown: function (e) {\r\n            var keyCode = e.keyCode || e.which;\r\n\r\n            switch (keyCode) {\r\n                case $.ui.keyCode.HOME:\r\n                    if (this._getFirstVisibleElement()) {\r\n                        this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                        this.responseList.selected = this._getFirstVisibleElement();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.END:\r\n                    if (this._getLastElement()) {\r\n                        this._getLastElement().addClass(this.options.selectClass);\r\n                        this.responseList.selected = this._getLastElement();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.ESCAPE:\r\n                    this._resetResponseList(true);\r\n                    this.autoComplete.hide();\r\n                    break;\r\n\r\n                case $.ui.keyCode.ENTER:\r\n                    if (this.element.val().length >= parseInt(this.options.minSearchLength, 10)) {\r\n                        this.searchForm.trigger('submit');\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.DOWN:\r\n                    if (this.responseList.indexList) {\r\n                        if (!this.responseList.selected) {  //eslint-disable-line max-depth\r\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getFirstVisibleElement();\r\n                        } else if (!this._getLastElement().hasClass(this.options.selectClass)) {\r\n                            this.responseList.selected = this.responseList.selected\r\n                                .removeClass(this.options.selectClass).next().addClass(this.options.selectClass);\r\n                        } else {\r\n                            this.responseList.selected.removeClass(this.options.selectClass);\r\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getFirstVisibleElement();\r\n                        }\r\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\r\n                        this._updateAriaHasPopup(true);\r\n                        this.autoComplete.show();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.UP:\r\n                    if (this.responseList.indexList !== null) {\r\n                        if (!this._getFirstVisibleElement().hasClass(this.options.selectClass)) {\r\n                            this.responseList.selected = this.responseList.selected\r\n                                .removeClass(this.options.selectClass).prev().addClass(this.options.selectClass);\r\n\r\n                        } else {\r\n                            this.responseList.selected.removeClass(this.options.selectClass);\r\n                            this._getLastElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getLastElement();\r\n                        }\r\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\r\n                        this._updateAriaHasPopup(true);\r\n                        this.autoComplete.show();\r\n                    }\r\n                    break;\r\n                default:\r\n                    return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the value of the search input field changes. Executes a GET request\r\n         * to populate a suggestion list based on entered text. Handles click (select), hover,\r\n         * and mouseout events on the populated suggestion list dropdown.\r\n         * @private\r\n         */\r\n        _onPropertyChange: function () {\r\n            var searchField = this.element,\r\n                clonePosition = {\r\n                    position: 'absolute',\r\n                    // Removed to fix display issues\r\n                    // left: searchField.offset().left,\r\n                    // top: searchField.offset().top + searchField.outerHeight(),\r\n                    width: searchField.outerWidth()\r\n                },\r\n                source = this.options.template,\r\n                template = mageTemplate(source),\r\n                dropdown = $('<ul role=\"listbox\"></ul>'),\r\n                value = this.element.val();\r\n\r\n            this.submitBtn.disabled = true;\r\n\r\n            if (value.length >= parseInt(this.options.minSearchLength, 10)) {\r\n                this.submitBtn.disabled = false;\r\n\r\n                if (this.options.url !== '') { //eslint-disable-line eqeqeq\r\n                    $.getJSON(this.options.url, {\r\n                        q: value\r\n                    }, $.proxy(function (data) {\r\n                        if (data.length) {\r\n                            $.each(data, function (index, element) {\r\n                                var html;\r\n\r\n                                element.index = index;\r\n                                html = template({\r\n                                    data: element\r\n                                });\r\n                                dropdown.append(html);\r\n                            });\r\n\r\n                            this._resetResponseList(true);\r\n\r\n                            this.responseList.indexList = this.autoComplete.html(dropdown)\r\n                                .css(clonePosition)\r\n                                .show()\r\n                                .find(this.options.responseFieldElements + ':visible');\r\n\r\n                            this.element.removeAttr('aria-activedescendant');\r\n\r\n                            if (this.responseList.indexList.length) {\r\n                                this._updateAriaHasPopup(true);\r\n                            } else {\r\n                                this._updateAriaHasPopup(false);\r\n                            }\r\n\r\n                            this.responseList.indexList\r\n                                .on('click', function (e) {\r\n                                    this.responseList.selected = $(e.currentTarget);\r\n                                    this.searchForm.trigger('submit');\r\n                                }.bind(this))\r\n                                .on('mouseenter mouseleave', function (e) {\r\n                                    this.responseList.indexList.removeClass(this.options.selectClass);\r\n                                    $(e.target).addClass(this.options.selectClass);\r\n                                    this.responseList.selected = $(e.target);\r\n                                    this.element.attr('aria-activedescendant', $(e.target).attr('id'));\r\n                                }.bind(this))\r\n                                .on('mouseout', function (e) {\r\n                                    if (!this._getLastElement() &&\r\n                                        this._getLastElement().hasClass(this.options.selectClass)) {\r\n                                        $(e.target).removeClass(this.options.selectClass);\r\n                                        this._resetResponseList(false);\r\n                                    }\r\n                                }.bind(this));\r\n                        } else {\r\n                            this._resetResponseList(true);\r\n                            this.autoComplete.hide();\r\n                            this._updateAriaHasPopup(false);\r\n                            this.element.removeAttr('aria-activedescendant');\r\n                        }\r\n                    }, this));\r\n                }\r\n            } else {\r\n                this._resetResponseList(true);\r\n                this.autoComplete.hide();\r\n                this._updateAriaHasPopup(false);\r\n                this.element.removeAttr('aria-activedescendant');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.quickSearch;\r\n});\r\n","Magento_Security/js/escaper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * A loose JavaScript version of Magento\\Framework\\Escaper\r\n *\r\n * Due to differences in how XML/HTML is processed in PHP vs JS there are a couple of minor differences in behavior\r\n * from the PHP counterpart.\r\n *\r\n * The first difference is that the default invocation of escapeHtml without allowedTags will double-escape existing\r\n * entities as the intention of such an invocation is that the input isn't supposed to contain any HTML.\r\n *\r\n * The second difference is that escapeHtml will not escape quotes. Since the input is actually being processed by the\r\n * DOM there is no chance of quotes being mixed with HTML syntax. And, since escapeHtml is not\r\n * intended to be used with raw injection into a HTML attribute, this is acceptable.\r\n *\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        neverAllowedElements: ['script', 'img', 'embed', 'iframe', 'video', 'source', 'object', 'audio'],\r\n        generallyAllowedAttributes: ['id', 'class', 'href', 'title', 'style'],\r\n        forbiddenAttributesByElement: {\r\n            a: ['style']\r\n        },\r\n\r\n        /**\r\n         * Escape a string for safe injection into HTML\r\n         *\r\n         * @param {String} data\r\n         * @param {Array|null} allowedTags\r\n         * @returns {String}\r\n         */\r\n        escapeHtml: function (data, allowedTags) {\r\n            var domParser = new DOMParser(),\r\n                fragment = domParser.parseFromString('<div></div>', 'text/html');\r\n\r\n            fragment = fragment.body.childNodes[0];\r\n            allowedTags = typeof allowedTags === 'object' && allowedTags.length ? allowedTags : null;\r\n\r\n            if (allowedTags) {\r\n                fragment.innerHTML = data || '';\r\n                allowedTags = this._filterProhibitedTags(allowedTags);\r\n\r\n                this._removeComments(fragment);\r\n                this._removeNotAllowedElements(fragment, allowedTags);\r\n                this._removeNotAllowedAttributes(fragment);\r\n\r\n                return fragment.innerHTML;\r\n            }\r\n\r\n            fragment.textContent = data || '';\r\n\r\n            return fragment.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * Remove the always forbidden tags from a list of provided tags\r\n         *\r\n         * @param {Array} tags\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _filterProhibitedTags: function (tags) {\r\n            return tags.filter(function (n) {\r\n                return this.neverAllowedElements.indexOf(n) === -1;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Remove comment nodes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeComments: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_COMMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                    false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                nodesToRemove.push(treeWalker.currentNode);\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.removeChild(nodeToRemove);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Strip the given node of all disallowed tags while permitting any nested text nodes\r\n         *\r\n         * @param {Node} node\r\n         * @param {Array|null} allowedTags\r\n         * @private\r\n         */\r\n        _removeNotAllowedElements: function (node, allowedTags) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function (currentNode) {\r\n                        return allowedTags.indexOf(currentNode.nodeName.toLowerCase()) === -1 ?\r\n                            NodeFilter.FILTER_ACCEPT\r\n                            // SKIP instead of REJECT because REJECT also rejects child nodes\r\n                            : NodeFilter.FILTER_SKIP;\r\n                    },\r\n                false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                if (allowedTags.indexOf(treeWalker.currentNode.nodeName.toLowerCase()) === -1) {\r\n                    nodesToRemove.push(treeWalker.currentNode);\r\n                }\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.replaceChild(\r\n                    node.ownerDocument.createTextNode(nodeToRemove.textContent),\r\n                    nodeToRemove\r\n                );\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Remove any invalid attributes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeNotAllowedAttributes: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                false\r\n                ),\r\n                i,\r\n                attribute,\r\n                nodeName,\r\n                attributesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                for (i = 0; i < treeWalker.currentNode.attributes.length; i++) {\r\n                    attribute = treeWalker.currentNode.attributes[i];\r\n                    nodeName = treeWalker.currentNode.nodeName.toLowerCase();\r\n\r\n                    if (this.generallyAllowedAttributes.indexOf(attribute.name) === -1  || // eslint-disable-line max-depth,max-len\r\n                        this._checkHrefValue(attribute) ||\r\n                        this.forbiddenAttributesByElement[nodeName] &&\r\n                        this.forbiddenAttributesByElement[nodeName].indexOf(attribute.name) !== -1\r\n                    ) {\r\n                        attributesToRemove.push(attribute);\r\n                    }\r\n                }\r\n            }\r\n\r\n            attributesToRemove.forEach(function (attributeToRemove) {\r\n                attributeToRemove.ownerElement.removeAttribute(attributeToRemove.name);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check that attribute contains script content\r\n         *\r\n         * @param {Object} attribute\r\n         * @private\r\n         */\r\n        _checkHrefValue: function (attribute) {\r\n            return attribute.nodeName === 'href' && attribute.nodeValue.startsWith('javascript');\r\n        }\r\n    };\r\n});\r\n","Magento_SendFriend/requirejs-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nvar config = {\r\n    map: {\r\n        '*': {\r\n            'Magento_SendFriend/back-event': 'Magento_SendFriend/js/back-event'\r\n        }\r\n    }\r\n};\r\n","Magento_SendFriend/js/back-event.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('click', function () {\r\n            history.back();\r\n\r\n            return false;\r\n        });\r\n    };\r\n});\r\n","Magento_Shipping/js/model/config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function () {\r\n        return window.checkoutConfig.shippingPolicy;\r\n    };\r\n});\r\n","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Shipping/js/model/config'\r\n\r\n], function (Component, config) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\r\n        },\r\n        config: config()\r\n    });\r\n});\r\n","Magento_Swatches/js/catalog-add-to-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Add selected swatch attributes to redirect url\r\n     *\r\n     * @see Magento_Catalog/js/catalog-add-to-cart\r\n     */\r\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\r\n        $(data.form).find('[name*=\"super\"]').each(function (index, item) {\r\n            var $item = $(item),\r\n                attr;\r\n\r\n            if ($item.attr('data-attr-name')) {\r\n                attr = $item.attr('data-attr-name');\r\n            } else {\r\n                attr = $item.parent().attr('attribute-code');\r\n            }\r\n            data.redirectParameters.push(attr + '=' + $item.val());\r\n\r\n        });\r\n    });\r\n});\r\n","Magento_Swatches/js/configurable-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/options-updater'\r\n], function ($, Updater) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n            formSelector: '#product_addtocart_form',\r\n            swatchSelector: '.swatch-opt'\r\n        },\r\n        swatchWidgetName = 'mage-SwatchRenderer',\r\n        widgetInitEvent = 'swatch.initialized',\r\n\r\n    /**\r\n    * Sets all configurable swatch attribute's selected values\r\n    */\r\n    updateSwatchOptions = function () {\r\n        var swatchWidget = $(selectors.swatchSelector).data(swatchWidgetName);\r\n\r\n        if (!swatchWidget || !swatchWidget._EmulateSelectedByAttributeId) {\r\n            return;\r\n        }\r\n        swatchWidget._EmulateSelectedByAttributeId(this.productOptions);\r\n    },\r\n    updater = new Updater(widgetInitEvent, updateSwatchOptions);\r\n\r\n    updater.listen();\r\n});\r\n"}
}});
