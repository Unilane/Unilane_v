require.config({"config": {
        "jsbuild":{"Magento_Checkout/js/model/checkout-data-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Checkout adapter for customer data storage\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/action/create-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/action/select-payment-method',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/action/create-billing-address',\r\n    'underscore'\r\n], function (\r\n    addressList,\r\n    quote,\r\n    checkoutData,\r\n    createShippingAddress,\r\n    selectShippingAddress,\r\n    selectShippingMethodAction,\r\n    paymentService,\r\n    selectPaymentMethodAction,\r\n    addressConverter,\r\n    selectBillingAddress,\r\n    createBillingAddress,\r\n    _\r\n) {\r\n    'use strict';\r\n\r\n    var isBillingAddressResolvedFromBackend = false;\r\n\r\n    return {\r\n\r\n        /**\r\n         * Resolve estimation address. Used local storage\r\n         */\r\n        resolveEstimationAddress: function () {\r\n            var address;\r\n\r\n            if (quote.isVirtual()) {\r\n                if (checkoutData.getBillingAddressFromData()) {\r\n                    address = addressConverter.formAddressDataToQuoteAddress(\r\n                        checkoutData.getBillingAddressFromData()\r\n                    );\r\n                    selectBillingAddress(address);\r\n                } else {\r\n                    this.resolveBillingAddress();\r\n                }\r\n            } else if (checkoutData.getShippingAddressFromData()) {\r\n                address = addressConverter.formAddressDataToQuoteAddress(checkoutData.getShippingAddressFromData());\r\n                selectShippingAddress(address);\r\n            } else {\r\n                this.resolveShippingAddress();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve shipping address. Used local storage\r\n         */\r\n        resolveShippingAddress: function () {\r\n            var newCustomerShippingAddress;\r\n\r\n            if (!checkoutData.getShippingAddressFromData() &&\r\n                window.checkoutConfig.shippingAddressFromData\r\n            ) {\r\n                checkoutData.setShippingAddressFromData(window.checkoutConfig.shippingAddressFromData);\r\n            }\r\n\r\n            newCustomerShippingAddress = checkoutData.getNewCustomerShippingAddress();\r\n\r\n            if (newCustomerShippingAddress) {\r\n                createShippingAddress(newCustomerShippingAddress);\r\n            }\r\n            this.applyShippingAddress();\r\n        },\r\n\r\n        /**\r\n         * Apply resolved estimated address to quote\r\n         *\r\n         * @param {Object} isEstimatedAddress\r\n         */\r\n        applyShippingAddress: function (isEstimatedAddress) {\r\n            var address,\r\n                shippingAddress,\r\n                isConvertAddress;\r\n\r\n            if (addressList().length === 0) {\r\n                address = addressConverter.formAddressDataToQuoteAddress(\r\n                    checkoutData.getShippingAddressFromData()\r\n                );\r\n                selectShippingAddress(address);\r\n            }\r\n            shippingAddress = quote.shippingAddress();\r\n            isConvertAddress = isEstimatedAddress || false;\r\n\r\n            if (!shippingAddress) {\r\n                shippingAddress = this.getShippingAddressFromCustomerAddressList();\r\n\r\n                if (shippingAddress) {\r\n                    selectShippingAddress(\r\n                        isConvertAddress ?\r\n                            addressConverter.addressToEstimationAddress(shippingAddress)\r\n                            : shippingAddress\r\n                    );\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} ratesData\r\n         */\r\n        resolveShippingRates: function (ratesData) {\r\n            var selectedShippingRate = checkoutData.getSelectedShippingRate(),\r\n                availableRate = false;\r\n\r\n            if (ratesData.length === 1 && !quote.shippingMethod()) {\r\n                //set shipping rate if we have only one available shipping rate\r\n                selectShippingMethodAction(ratesData[0]);\r\n\r\n                return;\r\n            }\r\n\r\n            if (quote.shippingMethod()) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    return rate['carrier_code'] == quote.shippingMethod()['carrier_code'] && //eslint-disable-line\r\n                        rate['method_code'] == quote.shippingMethod()['method_code']; //eslint-disable-line eqeqeq\r\n                });\r\n            }\r\n\r\n            if (!availableRate && selectedShippingRate) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    return rate['carrier_code'] + '_' + rate['method_code'] === selectedShippingRate;\r\n                });\r\n            }\r\n\r\n            if (!availableRate && window.checkoutConfig.selectedShippingMethod) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    var selectedShippingMethod = window.checkoutConfig.selectedShippingMethod;\r\n\r\n                    return rate['carrier_code'] == selectedShippingMethod['carrier_code'] && //eslint-disable-line\r\n                        rate['method_code'] == selectedShippingMethod['method_code']; //eslint-disable-line eqeqeq\r\n                });\r\n            }\r\n\r\n            //Unset selected shipping method if not available\r\n            if (!availableRate) {\r\n                selectShippingMethodAction(null);\r\n            } else {\r\n                selectShippingMethodAction(availableRate);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve payment method. Used local storage\r\n         */\r\n        resolvePaymentMethod: function () {\r\n            var availablePaymentMethods = paymentService.getAvailablePaymentMethods(),\r\n                selectedPaymentMethod = checkoutData.getSelectedPaymentMethod();\r\n\r\n            if (selectedPaymentMethod) {\r\n                availablePaymentMethods.some(function (payment) {\r\n                    if (payment.method == selectedPaymentMethod) { //eslint-disable-line eqeqeq\r\n                        selectPaymentMethodAction(payment);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve billing address. Used local storage\r\n         */\r\n        resolveBillingAddress: function () {\r\n            var selectedBillingAddress,\r\n                newCustomerBillingAddressData;\r\n\r\n            selectedBillingAddress = checkoutData.getSelectedBillingAddress();\r\n            newCustomerBillingAddressData = checkoutData.getNewCustomerBillingAddress();\r\n\r\n            if (selectedBillingAddress) {\r\n                if (selectedBillingAddress === 'new-customer-billing-address' && newCustomerBillingAddressData) {\r\n                    selectBillingAddress(createBillingAddress(newCustomerBillingAddressData));\r\n                } else {\r\n                    addressList.some(function (address) {\r\n                        if (selectedBillingAddress === address.getKey()) {\r\n                            selectBillingAddress(address);\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                this.applyBillingAddress();\r\n            }\r\n\r\n            if (!isBillingAddressResolvedFromBackend &&\r\n                !checkoutData.getBillingAddressFromData() &&\r\n                !_.isEmpty(window.checkoutConfig.billingAddressFromData) &&\r\n                !quote.billingAddress()\r\n            ) {\r\n                if (window.checkoutConfig.isBillingAddressFromDataValid === true) {\r\n                    selectBillingAddress(createBillingAddress(window.checkoutConfig.billingAddressFromData));\r\n                } else {\r\n                    checkoutData.setBillingAddressFromData(window.checkoutConfig.billingAddressFromData);\r\n                }\r\n                isBillingAddressResolvedFromBackend = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Apply resolved billing address to quote\r\n         */\r\n        applyBillingAddress: function () {\r\n            var shippingAddress,\r\n                isBillingAddressInitialized;\r\n\r\n            if (quote.billingAddress()) {\r\n                selectBillingAddress(quote.billingAddress());\r\n\r\n                return;\r\n            }\r\n\r\n            if (quote.isVirtual() || !quote.billingAddress()) {\r\n                isBillingAddressInitialized = addressList.some(function (addrs) {\r\n                    if (addrs.isDefaultBilling()) {\r\n                        selectBillingAddress(addrs);\r\n\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                });\r\n            }\r\n\r\n            shippingAddress = quote.shippingAddress();\r\n\r\n            if (!isBillingAddressInitialized &&\r\n                shippingAddress &&\r\n                shippingAddress.canUseForBilling() &&\r\n                (shippingAddress.isDefaultShipping() || !quote.isVirtual())\r\n            ) {\r\n                //set billing address same as shipping by default if it is not empty\r\n                selectBillingAddress(quote.shippingAddress());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get shipping address from address list\r\n         *\r\n         * @return {Object|null}\r\n         */\r\n        getShippingAddressFromCustomerAddressList: function () {\r\n            var shippingAddress = _.find(\r\n                    addressList(),\r\n                    function (address) {\r\n                        return checkoutData.getSelectedShippingAddress() == address.getKey() //eslint-disable-line\r\n                    }\r\n                );\r\n\r\n            if (!shippingAddress) {\r\n                shippingAddress = _.find(\r\n                    addressList(),\r\n                    function (address) {\r\n                        return address.isDefaultShipping();\r\n                    }\r\n                );\r\n            }\r\n\r\n            if (!shippingAddress && addressList().length === 1) {\r\n                shippingAddress = addressList()[0];\r\n            }\r\n\r\n            return shippingAddress;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/customer-email-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/customer',\r\n    'mage/validation'\r\n], function ($, customer) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Validate checkout agreements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            var emailValidationResult = customer.isLoggedIn(),\r\n                loginFormSelector = 'form[data-role=email-with-possible-login]';\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n            }\r\n\r\n            return emailValidationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-post-code-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Define necessity of using default post code value\r\n     */\r\n    var useDefaultPostCode;\r\n\r\n    return {\r\n        /**\r\n         * Resolve default post code\r\n         *\r\n         * @returns {String|null}\r\n         */\r\n        resolve: function () {\r\n            return useDefaultPostCode ?  window.checkoutConfig.defaultPostcode : null;\r\n        },\r\n\r\n        /**\r\n         * Set state to useDefaultPostCode variable\r\n         *\r\n         * @param {Boolean} shouldUseDefaultPostCode\r\n         * @returns {underscore}\r\n         */\r\n        setUseDefaultPostCode: function (shouldUseDefaultPostCode) {\r\n            useDefaultPostCode = shouldUseDefaultPostCode;\r\n\r\n            return this;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    './default-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/error-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'mage/url',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate'\r\n], function (url, globalMessageList, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @param {Object} response\r\n         * @param {Object} messageContainer\r\n         */\r\n        process: function (response, messageContainer) {\r\n            var error;\r\n\r\n            messageContainer = messageContainer || globalMessageList;\r\n\r\n            if (response.status == 401) { //eslint-disable-line eqeqeq\r\n                this.redirectTo(url.build('customer/account/login/'));\r\n            } else {\r\n                try {\r\n                    error = JSON.parse(response.responseText);\r\n                } catch (exception) {\r\n                    error = {\r\n                        message: $t('Something went wrong with your request. Please try again later.')\r\n                    };\r\n                }\r\n                messageContainer.addErrorMessage(error);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Method to redirect by requested URL.\r\n         */\r\n        redirectTo: function (redirectUrl) {\r\n            window.location.replace(redirectUrl);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/full-screen-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'rjsResolver'\r\n], function ($, resolver) {\r\n    'use strict';\r\n\r\n    var containerId = '#checkout';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Start full page loader action\r\n         */\r\n        startLoader: function () {\r\n            $(containerId).trigger('processStart');\r\n        },\r\n\r\n        /**\r\n         * Stop full page loader action\r\n         *\r\n         * @param {Boolean} [forceStop]\r\n         */\r\n        stopLoader: function (forceStop) {\r\n            var $elem = $(containerId),\r\n                stop = $elem.trigger.bind($elem, 'processStop'); //eslint-disable-line jquery-no-bind-unbind\r\n\r\n            forceStop ? stop() : resolver(stop);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/new-customer-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/default-post-code-resolver'\r\n], function (_, DefaultPostCodeResolver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} addressData\r\n     * Returns new address object\r\n     */\r\n    return function (addressData) {\r\n        var identifier = Date.now(),\r\n            countryId = addressData['country_id'] || addressData.countryId || window.checkoutConfig.defaultCountryId,\r\n            regionId;\r\n\r\n        if (addressData.region && addressData.region['region_id']) {\r\n            regionId = addressData.region['region_id'];\r\n        } else if (!addressData['region_id']) {\r\n            regionId = undefined;\r\n        } else if (\r\n            /* eslint-disable */\r\n            addressData['country_id'] && addressData['country_id'] == window.checkoutConfig.defaultCountryId ||\r\n            !addressData['country_id'] && countryId == window.checkoutConfig.defaultCountryId\r\n            /* eslint-enable */\r\n        ) {\r\n            regionId = window.checkoutConfig.defaultRegionId || undefined;\r\n        }\r\n\r\n        return {\r\n            email: addressData.email,\r\n            countryId: countryId,\r\n            regionId: regionId || addressData.regionId,\r\n            regionCode: addressData.region ? addressData.region['region_code'] : null,\r\n            region: addressData.region ? addressData.region.region : null,\r\n            customerId: addressData['customer_id'] || addressData.customerId,\r\n            street: addressData.street,\r\n            company: addressData.company,\r\n            telephone: addressData.telephone,\r\n            fax: addressData.fax,\r\n            postcode: addressData.postcode ? addressData.postcode : DefaultPostCodeResolver.resolve(),\r\n            city: addressData.city,\r\n            firstname: addressData.firstname,\r\n            lastname: addressData.lastname,\r\n            middlename: addressData.middlename,\r\n            prefix: addressData.prefix,\r\n            suffix: addressData.suffix,\r\n            vatId: addressData['vat_id'],\r\n            saveInAddressBook: addressData['save_in_address_book'],\r\n            customAttributes: addressData['custom_attributes'],\r\n            extensionAttributes: addressData['extension_attributes'],\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultShipping: function () {\r\n                return addressData['default_shipping'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultBilling: function () {\r\n                return addressData['default_billing'];\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getType: function () {\r\n                return 'new-customer-address';\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getKey: function () {\r\n                return this.getType();\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCacheKey: function () {\r\n                return this.getType() + identifier;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            isEditable: function () {\r\n                return true;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            canUseForBilling: function () {\r\n                return true;\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/payment/method-list',\r\n    'Magento_Checkout/js/action/select-payment-method'\r\n], function (_, quote, methodList, selectPaymentMethod) {\r\n    'use strict';\r\n\r\n    /**\r\n    * Free method filter\r\n    * @param {Object} paymentMethod\r\n    * @return {Boolean}\r\n    */\r\n    var isFreePaymentMethod = function (paymentMethod) {\r\n            return paymentMethod.method === 'free';\r\n        },\r\n\r\n        /**\r\n         * Grabs the grand total from quote\r\n         * @return {Number}\r\n         */\r\n        getGrandTotal = function () {\r\n            return quote.totals()['grand_total'];\r\n        };\r\n\r\n    return {\r\n        isFreeAvailable: false,\r\n\r\n        /**\r\n         * Populate the list of payment methods\r\n         * @param {Array} methods\r\n         */\r\n        setPaymentMethods: function (methods) {\r\n            var freeMethod,\r\n                filteredMethods,\r\n                methodIsAvailable,\r\n                methodNames;\r\n\r\n            freeMethod = _.find(methods, isFreePaymentMethod);\r\n            this.isFreeAvailable = !!freeMethod;\r\n\r\n            if (freeMethod && getGrandTotal() <= 0) {\r\n                methods.splice(0, methods.length, freeMethod);\r\n                selectPaymentMethod(freeMethod);\r\n            }\r\n\r\n            filteredMethods = _.without(methods, freeMethod);\r\n\r\n            if (filteredMethods.length === 1) {\r\n                selectPaymentMethod(filteredMethods[0]);\r\n            } else if (quote.paymentMethod()) {\r\n                methodIsAvailable = methods.some(function (item) {\r\n                    return item.method === quote.paymentMethod().method;\r\n                });\r\n                //Unset selected payment method if not available\r\n                if (!methodIsAvailable) {\r\n                    selectPaymentMethod(null);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Overwrite methods with existing methods to preserve ko array references.\r\n             * This prevent ko from re-rendering those methods.\r\n             */\r\n            methodNames = _.pluck(methods, 'method');\r\n            _.map(methodList(), function (existingMethod) {\r\n                var existingMethodIndex = methodNames.indexOf(existingMethod.method);\r\n\r\n                if (existingMethodIndex !== -1) {\r\n                    methods[existingMethodIndex] = existingMethod;\r\n                }\r\n            });\r\n\r\n            methodList(methods);\r\n        },\r\n\r\n        /**\r\n         * Get the list of available payment methods.\r\n         * @return {Array}\r\n         */\r\n        getAvailablePaymentMethods: function () {\r\n            var allMethods = methodList().slice(),\r\n                grandTotalOverZero = getGrandTotal() > 0;\r\n\r\n            if (!this.isFreeAvailable) {\r\n                return allMethods;\r\n            }\r\n\r\n            if (grandTotalOverZero) {\r\n                return _.reject(allMethods, isFreePaymentMethod);\r\n            }\r\n\r\n            return _.filter(allMethods, isFreePaymentMethod);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/place-order.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'mage/storage',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'Magento_Checkout/js/model/full-screen-loader',\r\n        'Magento_Customer/js/customer-data',\r\n        'Magento_Checkout/js/model/payment/place-order-hooks',\r\n        'underscore'\r\n    ],\r\n    function (storage, errorProcessor, fullScreenLoader, customerData, hooks, _) {\r\n        'use strict';\r\n\r\n        return function (serviceUrl, payload, messageContainer) {\r\n            var headers = {}, redirectURL = '';\r\n\r\n            fullScreenLoader.startLoader();\r\n            _.each(hooks.requestModifiers, function (modifier) {\r\n                modifier(headers, payload);\r\n            });\r\n\r\n            return storage.post(\r\n                serviceUrl, JSON.stringify(payload), true, 'application/json', headers\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response, messageContainer);\r\n                    redirectURL = response.getResponseHeader('errorRedirectAction');\r\n\r\n                    if (redirectURL) {\r\n                        setTimeout(function () {\r\n                            errorProcessor.redirectTo(redirectURL);\r\n                        }, 3000);\r\n                    }\r\n                }\r\n            ).done(\r\n                function (response) {\r\n                    var clearData = {\r\n                        'selectedShippingAddress': null,\r\n                        'shippingAddressFromData': null,\r\n                        'newCustomerShippingAddress': null,\r\n                        'selectedShippingRate': null,\r\n                        'selectedPaymentMethod': null,\r\n                        'selectedBillingAddress': null,\r\n                        'billingAddressFromData': null,\r\n                        'newCustomerBillingAddress': null\r\n                    };\r\n\r\n                    if (response.responseType !== 'error') {\r\n                        customerData.set('checkout-data', clearData);\r\n                    }\r\n                }\r\n            ).always(\r\n                function () {\r\n                    fullScreenLoader.stopLoader();\r\n                    _.each(hooks.afterRequestListeners, function (listener) {\r\n                        listener();\r\n                    });\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/model/postcode-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mageUtils'\r\n], function (utils) {\r\n    'use strict';\r\n\r\n    return {\r\n        validatedPostCodeExample: [],\r\n\r\n        /**\r\n         * @param {*} postCode\r\n         * @param {*} countryId\r\n         * @param {Array} postCodesPatterns\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (postCode, countryId, postCodesPatterns) {\r\n            var pattern, regex,\r\n                patterns = postCodesPatterns ? postCodesPatterns[countryId] :\r\n                    window.checkoutConfig.postCodes[countryId];\r\n\r\n            this.validatedPostCodeExample = [];\r\n\r\n            if (!utils.isEmpty(postCode) && !utils.isEmpty(patterns)) {\r\n                for (pattern in patterns) {\r\n                    if (patterns.hasOwnProperty(pattern)) { //eslint-disable-line max-depth\r\n                        this.validatedPostCodeExample.push(patterns[pattern].example);\r\n                        regex = new RegExp(patterns[pattern].pattern);\r\n\r\n                        if (regex.test(postCode)) { //eslint-disable-line max-depth\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/quote.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'domReady!'\r\n], function (ko, _) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Get totals data from the extension attributes.\r\n     * @param {*} data\r\n     * @returns {*}\r\n     */\r\n    var proceedTotalsData = function (data) {\r\n            if (_.isObject(data) && _.isObject(data['extension_attributes'])) {\r\n                _.each(data['extension_attributes'], function (element, index) {\r\n                    data[index] = element;\r\n                });\r\n            }\r\n\r\n            return data;\r\n        },\r\n        billingAddress = ko.observable(null),\r\n        shippingAddress = ko.observable(null),\r\n        shippingMethod = ko.observable(null),\r\n        paymentMethod = ko.observable(null),\r\n        quoteData = window.checkoutConfig.quoteData,\r\n        basePriceFormat = window.checkoutConfig.basePriceFormat,\r\n        priceFormat = window.checkoutConfig.priceFormat,\r\n        storeCode = window.checkoutConfig.storeCode,\r\n        totalsData = proceedTotalsData(window.checkoutConfig.totalsData),\r\n        totals = ko.observable(totalsData),\r\n        collectedTotals = ko.observable({});\r\n\r\n    return {\r\n        totals: totals,\r\n        shippingAddress: shippingAddress,\r\n        shippingMethod: shippingMethod,\r\n        billingAddress: billingAddress,\r\n        paymentMethod: paymentMethod,\r\n        guestEmail: null,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getQuoteId: function () {\r\n            return quoteData['entity_id'];\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isVirtual: function () {\r\n            return !!Number(quoteData['is_virtual']);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPriceFormat: function () {\r\n            return priceFormat;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getBasePriceFormat: function () {\r\n            return basePriceFormat;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getItems: function () {\r\n            return window.checkoutConfig.quoteItemData;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @return {*}\r\n         */\r\n        getTotals: function () {\r\n            return totals;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} data\r\n         */\r\n        setTotals: function (data) {\r\n            data = proceedTotalsData(data);\r\n            totals(data);\r\n            this.setCollectedTotals('subtotal_with_discount', parseFloat(data['subtotal_with_discount']));\r\n        },\r\n\r\n        /**\r\n         * @param {*} paymentMethodCode\r\n         */\r\n        setPaymentMethod: function (paymentMethodCode) {\r\n            paymentMethod(paymentMethodCode);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPaymentMethod: function () {\r\n            return paymentMethod;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getStoreCode: function () {\r\n            return storeCode;\r\n        },\r\n\r\n        /**\r\n         * @param {String} code\r\n         * @param {*} value\r\n         */\r\n        setCollectedTotals: function (code, value) {\r\n            var colTotals = collectedTotals();\r\n\r\n            colTotals[code] = value;\r\n            collectedTotals(colTotals);\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getCalculatedTotal: function () {\r\n            var total = 0.; //eslint-disable-line no-floating-decimal\r\n\r\n            _.each(collectedTotals(), function (value) {\r\n                total += value;\r\n            });\r\n\r\n            return total;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/resource-url-manager.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mageUtils'\r\n], function (customer, urlBuilder, utils) {\r\n        'use strict';\r\n\r\n        return {\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForTotalsEstimationForNewAddress: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            cartId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:cartId/totals-information',\r\n                        'customer': '/carts/mine/totals-information'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForEstimationShippingMethodsForNewAddress: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:quoteId/estimate-shipping-methods',\r\n                        'customer': '/carts/mine/estimate-shipping-methods'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForEstimationShippingMethodsByAddressId: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'default': '/carts/mine/estimate-shipping-methods-by-address-id'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {String} couponCode\r\n             * @param {String} quoteId\r\n             * @return {*}\r\n             */\r\n            getApplyCouponUrl: function (couponCode, quoteId) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quoteId\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/' + quoteId + '/coupons/' + encodeURIComponent(couponCode),\r\n                        'customer': '/carts/mine/coupons/' + encodeURIComponent(couponCode)\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {String} quoteId\r\n             * @return {*}\r\n             */\r\n            getCancelCouponUrl: function (quoteId) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quoteId\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/' + quoteId + '/coupons/',\r\n                        'customer': '/carts/mine/coupons/'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForCartTotals: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:quoteId/totals',\r\n                        'customer': '/carts/mine/totals'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForSetShippingInformation: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            cartId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:cartId/shipping-information',\r\n                        'customer': '/carts/mine/shipping-information'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * Get url for service.\r\n             *\r\n             * @param {*} urls\r\n             * @param {*} urlParams\r\n             * @return {String|*}\r\n             */\r\n            getUrl: function (urls, urlParams) {\r\n                var url;\r\n\r\n                if (utils.isEmpty(urls)) {\r\n                    return 'Provided service call does not exist.';\r\n                }\r\n\r\n                if (!utils.isEmpty(urls['default'])) {\r\n                    url = urls['default'];\r\n                } else {\r\n                    url = urls[this.getCheckoutMethod()];\r\n                }\r\n\r\n                return urlBuilder.createUrl(url, urlParams);\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCheckoutMethod: function () {\r\n                return customer.isLoggedIn() ? 'customer' : 'guest';\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/model/shipping-rate-registry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var cache = [];\r\n\r\n    return {\r\n        /**\r\n         * @param {String} addressKey\r\n         * @return {*}\r\n         */\r\n        get: function (addressKey) {\r\n            if (cache[addressKey]) {\r\n                return cache[addressKey];\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {String} addressKey\r\n         * @param {*} data\r\n         */\r\n        set: function (addressKey, data) {\r\n            cache[addressKey] = data;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/customer-address'\r\n], function (quote, defaultProcessor, customerAddressProcessor) {\r\n    'use strict';\r\n\r\n    var processors = {};\r\n\r\n    processors.default =  defaultProcessor;\r\n    processors['customer-address'] = customerAddressProcessor;\r\n\r\n    quote.shippingAddress.subscribe(function () {\r\n        var type = quote.shippingAddress().getType();\r\n\r\n        if (processors[type]) {\r\n            processors[type].getRates(quote.shippingAddress());\r\n        } else {\r\n            processors.default.getRates(quote.shippingAddress());\r\n        }\r\n    });\r\n\r\n    return {\r\n        /**\r\n         * @param {String} type\r\n         * @param {*} processor\r\n         */\r\n        registerProcessor: function (type, processor) {\r\n            processors[type] = processor;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    var ratesRules = {},\r\n        checkoutConfig = window.checkoutConfig;\r\n\r\n    return {\r\n        /**\r\n         * @param {String} carrier\r\n         * @param {Object} rules\r\n         */\r\n        registerRules: function (carrier, rules) {\r\n            if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\r\n                ratesRules[carrier] = rules.getRules();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return ratesRules;\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getObservableFields: function () {\r\n            var self = this,\r\n                observableFields = [];\r\n\r\n            $.each(self.getRules(), function (carrier, fields) {\r\n                $.each(fields, function (field) {\r\n                    if (observableFields.indexOf(field) === -1) {\r\n                        observableFields.push(field);\r\n                    }\r\n                });\r\n            });\r\n\r\n            return observableFields;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    './shipping-rates-validation-rules',\r\n    '../model/address-converter',\r\n    '../action/select-shipping-address',\r\n    './postcode-validator',\r\n    './default-validator',\r\n    'mage/translate',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (\r\n    $,\r\n    ko,\r\n    shippingRatesValidationRules,\r\n    addressConverter,\r\n    selectShippingAddress,\r\n    postcodeValidator,\r\n    defaultValidator,\r\n    $t,\r\n    uiRegistry,\r\n    formPopUpState\r\n) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        validators = [],\r\n        observedElements = [],\r\n        postcodeElements = [],\r\n        postcodeElementName = 'postcode';\r\n\r\n    validators.push(defaultValidator);\r\n\r\n    return {\r\n        validateAddressTimeout: 0,\r\n        validateZipCodeTimeout: 0,\r\n        validateDelay: 2000,\r\n\r\n        /**\r\n         * @param {String} carrier\r\n         * @param {Object} validator\r\n         */\r\n        registerValidator: function (carrier, validator) {\r\n            if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\r\n                validators.push(validator);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validateAddressData: function (address) {\r\n            return validators.some(function (validator) {\r\n                return validator.validate(address);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Perform postponed binding for fieldset elements\r\n         *\r\n         * @param {String} formPath\r\n         */\r\n        initFields: function (formPath) {\r\n            var self = this,\r\n                elements = shippingRatesValidationRules.getObservableFields();\r\n\r\n            if ($.inArray(postcodeElementName, elements) === -1) {\r\n                // Add postcode field to observables if not exist for zip code validation support\r\n                elements.push(postcodeElementName);\r\n            }\r\n\r\n            $.each(elements, function (index, field) {\r\n                uiRegistry.async(formPath + '.' + field)(self.doElementBinding.bind(self));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Bind shipping rates request to form element\r\n         *\r\n         * @param {Object} element\r\n         * @param {Boolean} force\r\n         * @param {Number} delay\r\n         */\r\n        doElementBinding: function (element, force, delay) {\r\n            var observableFields = shippingRatesValidationRules.getObservableFields();\r\n\r\n            if (element && (observableFields.indexOf(element.index) !== -1 || force)) {\r\n                if (element.index !== postcodeElementName) {\r\n                    this.bindHandler(element, delay);\r\n                }\r\n            }\r\n\r\n            if (element.index === postcodeElementName) {\r\n                this.bindHandler(element, delay);\r\n                postcodeElements.push(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} elements\r\n         * @param {Boolean} force\r\n         * @param {Number} delay\r\n         */\r\n        bindChangeHandlers: function (elements, force, delay) {\r\n            var self = this;\r\n\r\n            $.each(elements, function (index, elem) {\r\n                self.doElementBinding(elem, force, delay);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} element\r\n         * @param {Number} delay\r\n         */\r\n        bindHandler: function (element, delay) {\r\n            var self = this;\r\n\r\n            delay = typeof delay === 'undefined' ? self.validateDelay : delay;\r\n\r\n            if (element.component.indexOf('/group') !== -1) {\r\n                $.each(element.elems(), function (index, elem) {\r\n                    self.bindHandler(elem);\r\n                });\r\n            } else {\r\n                element.on('value', function () {\r\n                    clearTimeout(self.validateZipCodeTimeout);\r\n                    self.validateZipCodeTimeout = setTimeout(function () {\r\n                        if (element.index === postcodeElementName) {\r\n                            self.postcodeValidation(element);\r\n                        } else {\r\n                            $.each(postcodeElements, function (index, elem) {\r\n                                self.postcodeValidation(elem);\r\n                            });\r\n                        }\r\n                    }, delay);\r\n\r\n                    if (!formPopUpState.isVisible()) {\r\n                        clearTimeout(self.validateAddressTimeout);\r\n                        self.validateAddressTimeout = setTimeout(function () {\r\n                            self.validateFields();\r\n                        }, delay);\r\n                    }\r\n                });\r\n                observedElements.push(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        postcodeValidation: function (postcodeElement) {\r\n            var countryId = $('select[name=\"country_id\"]:visible').val(),\r\n                validationResult,\r\n                warnMessage;\r\n\r\n            if (postcodeElement == null || postcodeElement.value() == null) {\r\n                return true;\r\n            }\r\n\r\n            postcodeElement.warn(null);\r\n            validationResult = postcodeValidator.validate(postcodeElement.value(), countryId);\r\n\r\n            if (!validationResult) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postcodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n                postcodeElement.warn(warnMessage);\r\n            }\r\n\r\n            return validationResult;\r\n        },\r\n\r\n        /**\r\n         * Convert form data to quote address and validate fields for shipping rates\r\n         */\r\n        validateFields: function () {\r\n            var addressFlat = addressConverter.formDataProviderToFlatData(\r\n                this.collectObservedData(),\r\n                'shippingAddress'\r\n                ),\r\n                address;\r\n\r\n            if (this.validateAddressData(addressFlat)) {\r\n                addressFlat = uiRegistry.get('checkoutProvider').shippingAddress;\r\n                address = addressConverter.formAddressDataToQuoteAddress(addressFlat);\r\n                selectShippingAddress(address);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Collect observed fields data to object\r\n         *\r\n         * @returns {*}\r\n         */\r\n        collectObservedData: function () {\r\n            var observedValues = {};\r\n\r\n            $.each(observedElements, function (index, field) {\r\n                observedValues[field.dataScope] = field.value();\r\n            });\r\n\r\n            return observedValues;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/shipping-save-processor/default'\r\n], function (defaultProcessor) {\r\n    'use strict';\r\n\r\n    var processors = {};\r\n\r\n    processors['default'] =  defaultProcessor;\r\n\r\n    return {\r\n        /**\r\n         * @param {String} type\r\n         * @param {*} processor\r\n         */\r\n        registerProcessor: function (type, processor) {\r\n            processors[type] = processor;\r\n        },\r\n\r\n        /**\r\n         * @param {String} type\r\n         * @return {Array}\r\n         */\r\n        saveShippingInformation: function (type) {\r\n            var rates = [];\r\n\r\n            if (processors[type]) {\r\n                rates = processors[type].saveShippingInformation();\r\n            } else {\r\n                rates = processors['default'].saveShippingInformation();\r\n            }\r\n\r\n            return rates;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/checkout-data-resolver'\r\n], function (ko, checkoutDataResolver) {\r\n    'use strict';\r\n\r\n    var shippingRates = ko.observableArray([]);\r\n\r\n    return {\r\n        isLoading: ko.observable(false),\r\n\r\n        /**\r\n         * Set shipping rates\r\n         *\r\n         * @param {*} ratesData\r\n         */\r\n        setShippingRates: function (ratesData) {\r\n            shippingRates(ratesData);\r\n            shippingRates.valueHasMutated();\r\n            checkoutDataResolver.resolveShippingRates(ratesData);\r\n        },\r\n\r\n        /**\r\n         * Get shipping rates\r\n         *\r\n         * @returns {*}\r\n         */\r\n        getShippingRates: function () {\r\n            return shippingRates;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        popUp: false,\r\n\r\n        /**\r\n         * @param {Object} popUp\r\n         */\r\n        setPopup: function (popUp) {\r\n            this.popUp = popUp;\r\n        },\r\n\r\n        /**\r\n         * Show popup.\r\n         */\r\n        show: function () {\r\n            if (this.popUp) {\r\n                this.popUp.modal('openModal');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hide popup.\r\n         */\r\n        hide: function () {\r\n            if (this.popUp) {\r\n                this.popUp.modal('closeModal');\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/step-navigator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko'\r\n], function ($, ko) {\r\n    'use strict';\r\n\r\n    var steps = ko.observableArray();\r\n\r\n    return {\r\n        steps: steps,\r\n        stepCodes: [],\r\n        validCodes: [],\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        handleHash: function () {\r\n            var hashString = window.location.hash.replace('#', ''),\r\n                isRequestedStepVisible;\r\n\r\n            if (hashString === '') {\r\n                return false;\r\n            }\r\n\r\n            if ($.inArray(hashString, this.validCodes) === -1) {\r\n                window.location.href = window.checkoutConfig.pageNotFoundUrl;\r\n\r\n                return false;\r\n            }\r\n\r\n            isRequestedStepVisible = steps.sort(this.sortItems).some(function (element) {\r\n                return (element.code == hashString || element.alias == hashString) && element.isVisible(); //eslint-disable-line\r\n            });\r\n\r\n            //if requested step is visible, then we don't need to load step data from server\r\n            if (isRequestedStepVisible) {\r\n                return false;\r\n            }\r\n\r\n            steps().sort(this.sortItems).forEach(function (element) {\r\n                if (element.code == hashString || element.alias == hashString) { //eslint-disable-line eqeqeq\r\n                    element.navigate(element);\r\n                } else {\r\n                    element.isVisible(false);\r\n                }\r\n\r\n            });\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {String} code\r\n         * @param {*} alias\r\n         * @param {*} title\r\n         * @param {Function} isVisible\r\n         * @param {*} navigate\r\n         * @param {*} sortOrder\r\n         */\r\n        registerStep: function (code, alias, title, isVisible, navigate, sortOrder) {\r\n            var hash, active;\r\n\r\n            if ($.inArray(code, this.validCodes) !== -1) {\r\n                throw new DOMException('Step code [' + code + '] already registered in step navigator');\r\n            }\r\n\r\n            if (alias != null) {\r\n                if ($.inArray(alias, this.validCodes) !== -1) {\r\n                    throw new DOMException('Step code [' + alias + '] already registered in step navigator');\r\n                }\r\n                this.validCodes.push(alias);\r\n            }\r\n            this.validCodes.push(code);\r\n            steps.push({\r\n                code: code,\r\n                alias: alias != null ? alias : code,\r\n                title: title,\r\n                isVisible: isVisible,\r\n                navigate: navigate,\r\n                sortOrder: sortOrder\r\n            });\r\n            active = this.getActiveItemIndex();\r\n            steps.each(function (elem, index) {\r\n                if (active !== index) {\r\n                    elem.isVisible(false);\r\n                }\r\n            });\r\n            this.stepCodes.push(code);\r\n            hash = window.location.hash.replace('#', '');\r\n\r\n            if (hash != '' && hash != code) { //eslint-disable-line eqeqeq\r\n                //Force hiding of not active step\r\n                isVisible(false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} itemOne\r\n         * @param {Object} itemTwo\r\n         * @return {Number}\r\n         */\r\n        sortItems: function (itemOne, itemTwo) {\r\n            return itemOne.sortOrder > itemTwo.sortOrder ? 1 : -1;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getActiveItemIndex: function () {\r\n            var activeIndex = 0;\r\n\r\n            steps().sort(this.sortItems).some(function (element, index) {\r\n                if (element.isVisible()) {\r\n                    activeIndex = index;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n            return activeIndex;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @return {Boolean}\r\n         */\r\n        isProcessed: function (code) {\r\n            var activeItemIndex = this.getActiveItemIndex(),\r\n                sortedItems = steps().sort(this.sortItems),\r\n                requestedItemIndex = -1;\r\n\r\n            sortedItems.forEach(function (element, index) {\r\n                if (element.code == code) { //eslint-disable-line eqeqeq\r\n                    requestedItemIndex = index;\r\n                }\r\n            });\r\n\r\n            return activeItemIndex > requestedItemIndex;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @param {*} scrollToElementId\r\n         */\r\n        navigateTo: function (code, scrollToElementId) {\r\n            var sortedItems = steps().sort(this.sortItems),\r\n                bodyElem = $('body');\r\n\r\n            scrollToElementId = scrollToElementId || null;\r\n\r\n            if (!this.isProcessed(code)) {\r\n                return;\r\n            }\r\n            sortedItems.forEach(function (element) {\r\n                if (element.code == code) { //eslint-disable-line eqeqeq\r\n                    element.isVisible(true);\r\n                    bodyElem.animate({\r\n                        scrollTop: $('#' + code).offset().top\r\n                    }, 0, function () {\r\n                        window.location = window.checkoutConfig.checkoutUrl + '#' + code;\r\n                    });\r\n\r\n                    if (scrollToElementId && $('#' + scrollToElementId).length) {\r\n                        bodyElem.animate({\r\n                            scrollTop: $('#' + scrollToElementId).offset().top\r\n                        }, 0);\r\n                    }\r\n                } else {\r\n                    element.isVisible(false);\r\n                }\r\n\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sets window location hash.\r\n         *\r\n         * @param {String} hash\r\n         */\r\n        setHash: function (hash) {\r\n            window.location.hash = hash;\r\n        },\r\n\r\n        /**\r\n         * Next step.\r\n         */\r\n        next: function () {\r\n            var activeIndex = 0,\r\n                code;\r\n\r\n            steps().sort(this.sortItems).forEach(function (element, index) {\r\n                if (element.isVisible()) {\r\n                    element.isVisible(false);\r\n                    activeIndex = index;\r\n                }\r\n            });\r\n\r\n            if (steps().length > activeIndex + 1) {\r\n                code = steps()[activeIndex + 1].code;\r\n                steps()[activeIndex + 1].isVisible(true);\r\n                this.setHash(code);\r\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, quote, customerData) {\r\n    'use strict';\r\n\r\n    var quoteItems = ko.observable(quote.totals().items),\r\n        cartData = customerData.get('cart'),\r\n        quoteSubtotal = parseFloat(quote.totals().subtotal),\r\n        subtotalAmount = parseFloat(cartData().subtotalAmount);\r\n\r\n    quote.totals.subscribe(function (newValue) {\r\n        quoteItems(newValue.items);\r\n    });\r\n\r\n    if (!isNaN(subtotalAmount) && quoteSubtotal !== subtotalAmount && quoteSubtotal !== 0) {\r\n        customerData.reload(['cart'], false);\r\n    }\r\n\r\n    return {\r\n        totals: quote.totals,\r\n        isLoading: ko.observable(false),\r\n\r\n        /**\r\n         * @return {Function}\r\n         */\r\n        getItems: function () {\r\n            return quoteItems;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @return {*}\r\n         */\r\n        getSegment: function (code) {\r\n            var i, total;\r\n\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            for (i in this.totals()['total_segments']) { //eslint-disable-line guard-for-in\r\n                total = this.totals()['total_segments'][i];\r\n\r\n                if (total.code == code) { //eslint-disable-line eqeqeq\r\n                    return total;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/url-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    return {\r\n        method: 'rest',\r\n        storeCode: window.checkoutConfig.storeCode,\r\n        version: 'V1',\r\n        serviceUrl: ':method/:storeCode/:version',\r\n\r\n        /**\r\n         * @param {String} url\r\n         * @param {Object} params\r\n         * @return {*}\r\n         */\r\n        createUrl: function (url, params) {\r\n            var completeUrl = this.serviceUrl + url;\r\n\r\n            return this.bindParams(completeUrl, params);\r\n        },\r\n\r\n        /**\r\n         * @param {String} url\r\n         * @param {Object} params\r\n         * @return {*}\r\n         */\r\n        bindParams: function (url, params) {\r\n            var urlParts;\r\n\r\n            params.method = this.method;\r\n            params.storeCode = this.storeCode;\r\n            params.version = this.version;\r\n\r\n            urlParts = url.split('/');\r\n            urlParts = urlParts.filter(Boolean);\r\n\r\n            $.each(urlParts, function (key, part) {\r\n                part = part.replace(':', '');\r\n\r\n                if (params[part] != undefined) { //eslint-disable-line eqeqeq\r\n                    urlParts[key] = params[part];\r\n                }\r\n            });\r\n\r\n            return urlParts.join('/');\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/cart/cache.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Cart adapter for customer data storage.\r\n * It stores cart data in customer data(localStorage) without saving on server.\r\n * Adapter is created for shipping rates and totals data caching. It eliminates unneeded calculations requests.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data',\r\n    'mageUtils'\r\n], function (_, storage, utils) {\r\n    'use strict';\r\n\r\n    var cacheKey = 'cart-data',\r\n        cartData = {\r\n            totals: null,\r\n            address: null,\r\n            cartVersion: null,\r\n            shippingMethodCode: null,\r\n            shippingCarrierCode: null,\r\n            rates: null\r\n        },\r\n\r\n        /**\r\n         * Set data to local storage.\r\n         *\r\n         * @param {Object} checkoutData\r\n         */\r\n        setData = function (checkoutData) {\r\n            storage.set(cacheKey, checkoutData);\r\n        },\r\n\r\n        /**\r\n         * Get data from local storage.\r\n         *\r\n         * @param {String} [key]\r\n         * @returns {*}\r\n         */\r\n        getData = function (key) {\r\n            var data = key ? storage.get(cacheKey)()[key] : storage.get(cacheKey)();\r\n\r\n            if (_.isEmpty(storage.get(cacheKey)())) {\r\n                setData(utils.copy(cartData));\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Build method name base on name, prefix and suffix.\r\n         *\r\n         * @param {String} name\r\n         * @param {String} prefix\r\n         * @param {String} suffix\r\n         * @return {String}\r\n         */\r\n        getMethodName = function (name, prefix, suffix) {\r\n            prefix = prefix || '';\r\n            suffix = suffix || '';\r\n\r\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1) + suffix;\r\n        };\r\n\r\n    /**\r\n     * Provides get/set/isChanged/clear methods for work with cart data.\r\n     * Can be customized via mixin functionality.\r\n     */\r\n    return {\r\n        cartData: cartData,\r\n\r\n        /**\r\n         * Array of required address fields\r\n         */\r\n        requiredFields: ['countryId', 'region', 'regionId', 'postcode'],\r\n\r\n        /**\r\n         * Get data from customer data.\r\n         * Concatenate provided key with method name and call method if it exist or makes get by key.\r\n         *\r\n         * @param {String} key\r\n         * @return {*}\r\n         */\r\n        get: function (key) {\r\n            var methodName = getMethodName(key, '_get');\r\n\r\n            if (key === cacheKey) {\r\n                return getData();\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                return this[methodName]();\r\n            }\r\n\r\n            return getData(key);\r\n        },\r\n\r\n        /**\r\n         * Set data to customer data.\r\n         * Concatenate provided key with method name and call method if it exist or makes set by key.\r\n         * @example _setCustomAddress method will be called, if it exists.\r\n         *  set('address', customAddressValue)\r\n         * @example Will set value by provided key.\r\n         *  set('rates', ratesToCompare)\r\n         *\r\n         * @param {String} key\r\n         * @param {*} value\r\n         */\r\n        set: function (key, value) {\r\n            var methodName = getMethodName(key, '_set'),\r\n                obj;\r\n\r\n            if (key === cacheKey) {\r\n                _.each(value, function (val, k) {\r\n                    this.set(k, val);\r\n                }, this);\r\n\r\n                return;\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                this[methodName](value);\r\n            } else {\r\n                obj = getData();\r\n                obj[key] = value;\r\n                setData(obj);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear data in cache.\r\n         * Concatenate provided key with method name and call method if it exist or clear by key.\r\n         * @example _clearCustomAddress method will be called, if it exist.\r\n         *  clear('customAddress')\r\n         * @example Will clear data by provided key.\r\n         *  clear('rates')\r\n         *\r\n         * @param {String} key\r\n         */\r\n        clear: function (key) {\r\n            var methodName = getMethodName(key, '_clear');\r\n\r\n            if (key === cacheKey) {\r\n                setData(this.cartData);\r\n\r\n                return;\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                this[methodName]();\r\n            } else {\r\n                this.set(key, null);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if provided data has difference with cached data.\r\n         * Concatenate provided key with method name and call method if it exist or makes strict equality.\r\n         * @example Will call existing _isAddressChanged.\r\n         *  isChanged('address', addressToCompare)\r\n         * @example Will get data by provided key and make strict equality with provided value.\r\n         *  isChanged('rates', ratesToCompare)\r\n         *\r\n         * @param {String} key\r\n         * @param {*} value\r\n         * @return {Boolean}\r\n         */\r\n        isChanged: function (key, value) {\r\n            var methodName = getMethodName(key, '_is', 'Changed');\r\n\r\n            if (this[methodName]) {\r\n                return this[methodName](value);\r\n            }\r\n\r\n            return this.get(key) !== value;\r\n        },\r\n\r\n        /**\r\n         * Compare cached address with provided.\r\n         * Custom method for check object equality.\r\n         *\r\n         * @param {Object} address\r\n         * @returns {Boolean}\r\n         */\r\n        _isAddressChanged: function (address) {\r\n            return JSON.stringify(_.pick(this.get('address'), this.requiredFields)) !==\r\n                JSON.stringify(_.pick(address, this.requiredFields));\r\n        },\r\n\r\n        /**\r\n         * Compare cached subtotal with provided.\r\n         * Custom method for check object equality.\r\n         *\r\n         * @param {float} subtotal\r\n         * @returns {Boolean}\r\n         */\r\n        _isSubtotalChanged: function (subtotal) {\r\n            var cached = parseFloat(this.get('totals').subtotal);\r\n\r\n            return subtotal !== cached;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/cart/estimate-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\r\n    'Magento_Checkout/js/model/cart/totals-processor/default',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/cart/cache',\r\n    'Magento_Customer/js/customer-data'\r\n], function (quote, defaultProcessor, totalsDefaultProvider, shippingService, cartCache, customerData) {\r\n    'use strict';\r\n\r\n    var rateProcessors = {},\r\n        totalsProcessors = {},\r\n\r\n        /**\r\n         * Estimate totals for shipping address and update shipping rates.\r\n         */\r\n        estimateTotalsAndUpdateRates = function () {\r\n            var type = quote.shippingAddress().getType();\r\n\r\n            if (\r\n                quote.isVirtual() ||\r\n                window.checkoutConfig.activeCarriers && window.checkoutConfig.activeCarriers.length === 0\r\n            ) {\r\n                // update totals block when estimated address was set\r\n                totalsProcessors['default'] = totalsDefaultProvider;\r\n                totalsProcessors[type] ?\r\n                    totalsProcessors[type].estimateTotals(quote.shippingAddress()) :\r\n                    totalsProcessors['default'].estimateTotals(quote.shippingAddress());\r\n            } else {\r\n                // check if user data not changed -> load rates from cache\r\n                if (!cartCache.isChanged('address', quote.shippingAddress()) &&\r\n                    !cartCache.isChanged('cartVersion', customerData.get('cart')()['data_id']) &&\r\n                    cartCache.get('rates')\r\n                ) {\r\n                    shippingService.setShippingRates(cartCache.get('rates'));\r\n\r\n                    return;\r\n                }\r\n\r\n                // update rates list when estimated address was set\r\n                rateProcessors['default'] = defaultProcessor;\r\n                rateProcessors[type] ?\r\n                    rateProcessors[type].getRates(quote.shippingAddress()) :\r\n                    rateProcessors['default'].getRates(quote.shippingAddress());\r\n\r\n                // save rates to cache after load\r\n                shippingService.getShippingRates().subscribe(function (rates) {\r\n                    cartCache.set('rates', rates);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Estimate totals for shipping address.\r\n         */\r\n        estimateTotalsShipping = function () {\r\n            totalsDefaultProvider.estimateTotals(quote.shippingAddress());\r\n        },\r\n\r\n        /**\r\n         * Estimate totals for billing address.\r\n         */\r\n        estimateTotalsBilling = function () {\r\n            var type = quote.billingAddress().getType();\r\n\r\n            if (quote.isVirtual()) {\r\n                // update totals block when estimated address was set\r\n                totalsProcessors['default'] = totalsDefaultProvider;\r\n                totalsProcessors[type] ?\r\n                    totalsProcessors[type].estimateTotals(quote.billingAddress()) :\r\n                    totalsProcessors['default'].estimateTotals(quote.billingAddress());\r\n            }\r\n        };\r\n\r\n    quote.shippingAddress.subscribe(estimateTotalsAndUpdateRates);\r\n    quote.shippingMethod.subscribe(estimateTotalsShipping);\r\n    quote.billingAddress.subscribe(estimateTotalsBilling);\r\n});\r\n","Magento_Checkout/js/model/cart/totals-processor/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Checkout/js/model/cart/cache',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, resourceUrlManager, quote, storage, totalsService, errorProcessor, cartCache, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Load data from server.\r\n     *\r\n     * @param {Object} address\r\n     */\r\n    var loadFromServer = function (address) {\r\n        var serviceUrl,\r\n            payload;\r\n\r\n        // Start loader for totals block\r\n        totalsService.isLoading(true);\r\n        serviceUrl = resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);\r\n        payload = {\r\n            addressInformation: {\r\n                address: _.pick(address, cartCache.requiredFields)\r\n            }\r\n        };\r\n\r\n        if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n            payload.addressInformation['shipping_method_code'] = quote.shippingMethod()['method_code'];\r\n            payload.addressInformation['shipping_carrier_code'] = quote.shippingMethod()['carrier_code'];\r\n        }\r\n\r\n        return storage.post(\r\n            serviceUrl, JSON.stringify(payload), false\r\n        ).done(function (result) {\r\n            var data = {\r\n                totals: result,\r\n                address: address,\r\n                cartVersion: customerData.get('cart')()['data_id'],\r\n                shippingMethodCode: null,\r\n                shippingCarrierCode: null\r\n            };\r\n\r\n            if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n                data.shippingMethodCode = quote.shippingMethod()['method_code'];\r\n                data.shippingCarrierCode = quote.shippingMethod()['carrier_code'];\r\n            }\r\n\r\n            quote.setTotals(result);\r\n            cartCache.set('cart-data', data);\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response);\r\n        }).always(function () {\r\n            // Stop loader for totals block\r\n            totalsService.isLoading(false);\r\n        });\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Array of required address fields.\r\n         * @property {Array.String} requiredFields\r\n         * @deprecated Use cart cache.\r\n         */\r\n        requiredFields: cartCache.requiredFields,\r\n\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         * @param {Object} address\r\n         */\r\n        estimateTotals: function (address) {\r\n            return loadFromServer(address);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/additional-validators.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var validators = [];\r\n\r\n    return {\r\n        /**\r\n         * Register unique validator\r\n         *\r\n         * @param {*} validator\r\n         */\r\n        registerValidator: function (validator) {\r\n            validators.push(validator);\r\n        },\r\n\r\n        /**\r\n         * Returns array of registered validators\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getValidators: function () {\r\n            return validators;\r\n        },\r\n\r\n        /**\r\n         * Process validators\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function (hideError) {\r\n            var validationResult = true;\r\n\r\n            hideError = hideError || false;\r\n\r\n            if (validators.length <= 0) {\r\n                return validationResult;\r\n            }\r\n\r\n            validators.forEach(function (item) {\r\n                if (item.validate(hideError) == false) { //eslint-disable-line eqeqeq\r\n                    validationResult = false;\r\n\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return validationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/method-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return function (methods) {\r\n        _.each(methods, function (method) {\r\n            if (method.hasOwnProperty('code')) {\r\n                method.method = method.code;\r\n                delete method.code;\r\n            }\r\n        });\r\n\r\n        return methods;\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/method-group.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'uiElement',\r\n        'mage/translate'\r\n], function (Element, $t) {\r\n    'use strict';\r\n\r\n    var DEFAULT_GROUP_ALIAS = 'default';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            alias: DEFAULT_GROUP_ALIAS,\r\n            title: $t('Payment Method'),\r\n            sortOrder: 100,\r\n            displayArea: 'payment-methods-items-${ $.alias }'\r\n        },\r\n\r\n        /**\r\n         * Checks if group instance is default\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isDefault: function () {\r\n            return this.alias === DEFAULT_GROUP_ALIAS;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/model/payment/method-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Checkout/js/model/payment/place-order-hooks.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        requestModifiers: [],\r\n        afterRequestListeners: []\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/renderer-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Checkout/js/model/shipping-address/form-popup-state.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        isVisible: ko.observable(false)\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-processor/customer-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/model/error-processor'\r\n], function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {\r\n            var cache;\r\n\r\n            shippingService.isLoading(true);\r\n            cache = rateRegistry.get(address.getKey());\r\n\r\n            if (cache) {\r\n                shippingService.setShippingRates(cache);\r\n                shippingService.isLoading(false);\r\n            } else {\r\n                storage.post(\r\n                    resourceUrlManager.getUrlForEstimationShippingMethodsByAddressId(),\r\n                    JSON.stringify({\r\n                        addressId: address.customerAddressId\r\n                    }),\r\n                    false\r\n                ).done(function (result) {\r\n                    rateRegistry.set(address.getKey(), result);\r\n                    shippingService.setShippingRates(result);\r\n                }).fail(function (response) {\r\n                    shippingService.setShippingRates([]);\r\n                    errorProcessor.process(response);\r\n                }).always(function () {\r\n                    shippingService.isLoading(false);\r\n                }\r\n                );\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-processor/new-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/model/error-processor'\r\n], function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {\r\n            var cache, serviceUrl, payload;\r\n\r\n            shippingService.isLoading(true);\r\n            cache = rateRegistry.get(address.getCacheKey());\r\n            serviceUrl = resourceUrlManager.getUrlForEstimationShippingMethodsForNewAddress(quote);\r\n            payload = JSON.stringify({\r\n                    address: {\r\n                        'street': address.street,\r\n                        'city': address.city,\r\n                        'region_id': address.regionId,\r\n                        'region': address.region,\r\n                        'country_id': address.countryId,\r\n                        'postcode': address.postcode,\r\n                        'email': address.email,\r\n                        'customer_id': address.customerId,\r\n                        'firstname': address.firstname,\r\n                        'lastname': address.lastname,\r\n                        'middlename': address.middlename,\r\n                        'prefix': address.prefix,\r\n                        'suffix': address.suffix,\r\n                        'vat_id': address.vatId,\r\n                        'company': address.company,\r\n                        'telephone': address.telephone,\r\n                        'fax': address.fax,\r\n                        'custom_attributes': address.customAttributes,\r\n                        'save_in_address_book': address.saveInAddressBook\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (cache) {\r\n                shippingService.setShippingRates(cache);\r\n                shippingService.isLoading(false);\r\n            } else {\r\n                storage.post(\r\n                    serviceUrl, payload, false\r\n                ).done(function (result) {\r\n                    rateRegistry.set(address.getCacheKey(), result);\r\n                    shippingService.setShippingRates(result);\r\n                }).fail(function (response) {\r\n                    shippingService.setShippingRates([]);\r\n                    errorProcessor.process(response);\r\n                }).always(function () {\r\n                    shippingService.isLoading(false);\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/model/shipping-save-processor/payload-extender'\r\n], function (\r\n    ko,\r\n    quote,\r\n    resourceUrlManager,\r\n    storage,\r\n    paymentService,\r\n    methodConverter,\r\n    errorProcessor,\r\n    fullScreenLoader,\r\n    selectBillingAddressAction,\r\n    payloadExtender\r\n) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {jQuery.Deferred}\r\n         */\r\n        saveShippingInformation: function () {\r\n            var payload;\r\n\r\n            if (!quote.billingAddress() && quote.shippingAddress().canUseForBilling()) {\r\n                selectBillingAddressAction(quote.shippingAddress());\r\n            }\r\n\r\n            payload = {\r\n                addressInformation: {\r\n                    'shipping_address': quote.shippingAddress(),\r\n                    'billing_address': quote.billingAddress(),\r\n                    'shipping_method_code': quote.shippingMethod()['method_code'],\r\n                    'shipping_carrier_code': quote.shippingMethod()['carrier_code']\r\n                }\r\n            };\r\n\r\n            payloadExtender(payload);\r\n\r\n            fullScreenLoader.startLoader();\r\n\r\n            return storage.post(\r\n                resourceUrlManager.getUrlForSetShippingInformation(quote),\r\n                JSON.stringify(payload)\r\n            ).done(\r\n                function (response) {\r\n                    quote.setTotals(response.totals);\r\n                    paymentService.setPaymentMethods(methodConverter(response['payment_methods']));\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response);\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            );\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor/payload-extender.js":"define([], function () {\r\n    'use strict';\r\n\r\n    return function (payload) {\r\n        payload.addressInformation['extension_attributes'] = {};\r\n\r\n        return payload;\r\n    };\r\n});\r\n","Magento_Checkout/js/view/authentication-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    'Magento_Checkout/js/model/authentication-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/authentication.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Customer/js/model/customer',\r\n    'mage/validation',\r\n    'Magento_Checkout/js/model/authentication-messages',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function ($, Component, loginAction, customer, validation, messageContainer, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig;\r\n\r\n    return Component.extend({\r\n        isGuestCheckoutAllowed: checkoutConfig.isGuestCheckoutAllowed,\r\n        isCustomerLoginRequired: checkoutConfig.isCustomerLoginRequired,\r\n        registerUrl: checkoutConfig.registerUrl,\r\n        forgotPasswordUrl: checkoutConfig.forgotPasswordUrl,\r\n        autocomplete: checkoutConfig.autocomplete,\r\n        defaults: {\r\n            template: 'Magento_Checkout/authentication'\r\n        },\r\n\r\n        /**\r\n         * Is login form enabled for current customer.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return !customer.isLoggedIn();\r\n        },\r\n\r\n        /**\r\n         * Provide login action.\r\n         *\r\n         * @param {HTMLElement} loginForm\r\n         */\r\n        login: function (loginForm) {\r\n            var loginData = {},\r\n                formDataArray = $(loginForm).serializeArray();\r\n\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if ($(loginForm).validation() &&\r\n                $(loginForm).validation('isValid')\r\n            ) {\r\n                fullScreenLoader.startLoader();\r\n                loginAction(loginData, checkoutConfig.checkoutUrl, undefined, messageContainer).always(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                });\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/create-billing-address',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Checkout/js/action/set-billing-address',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/billing-address-postcode-validator',\r\n    'Magento_Checkout/js/model/address-converter'\r\n],\r\nfunction (\r\n    ko,\r\n    _,\r\n    Component,\r\n    customer,\r\n    addressList,\r\n    quote,\r\n    createBillingAddress,\r\n    selectBillingAddress,\r\n    checkoutData,\r\n    checkoutDataResolver,\r\n    customerData,\r\n    setBillingAddressAction,\r\n    globalMessageList,\r\n    $t,\r\n    billingAddressPostcodeValidator,\r\n    addressConverter\r\n) {\r\n    'use strict';\r\n\r\n    var lastSelectedBillingAddress = null,\r\n        addressUpdated = false,\r\n        addressEdited = false,\r\n        countryData = customerData.get('directory-data'),\r\n        addressOptions = addressList().filter(function (address) {\r\n            return address.getType() === 'customer-address';\r\n        });\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/billing-address',\r\n            actionsTemplate: 'Magento_Checkout/billing-address/actions',\r\n            formTemplate: 'Magento_Checkout/billing-address/form',\r\n            detailsTemplate: 'Magento_Checkout/billing-address/details',\r\n            links: {\r\n                isAddressFormVisible: '${$.billingAddressListProvider}:isNewAddressSelected'\r\n            }\r\n        },\r\n        currentBillingAddress: quote.billingAddress,\r\n        customerHasAddresses: addressOptions.length > 0,\r\n\r\n        /**\r\n         * Init component\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            quote.paymentMethod.subscribe(function () {\r\n                checkoutDataResolver.resolveBillingAddress();\r\n            }, this);\r\n            billingAddressPostcodeValidator.initFields(this.get('name') + '.form-fields');\r\n        },\r\n\r\n        /**\r\n         * @return {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe({\r\n                    selectedAddress: null,\r\n                    isAddressDetailsVisible: quote.billingAddress() != null,\r\n                    isAddressFormVisible: !customer.isLoggedIn() || !addressOptions.length,\r\n                    isAddressSameAsShipping: false,\r\n                    saveInAddressBook: 1\r\n                });\r\n\r\n            quote.billingAddress.subscribe(function (newAddress) {\r\n                if (quote.isVirtual()) {\r\n                    this.isAddressSameAsShipping(false);\r\n                } else {\r\n                    this.isAddressSameAsShipping(\r\n                        newAddress != null &&\r\n                        newAddress.getCacheKey() == quote.shippingAddress().getCacheKey() //eslint-disable-line eqeqeq\r\n                    );\r\n                }\r\n\r\n                if (newAddress != null && newAddress.saveInAddressBook !== undefined) {\r\n                    this.saveInAddressBook(newAddress.saveInAddressBook);\r\n                } else {\r\n                    this.saveInAddressBook(1);\r\n                }\r\n                this.isAddressDetailsVisible(true);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        canUseShippingAddress: ko.computed(function () {\r\n            return !quote.isVirtual() && quote.shippingAddress() && quote.shippingAddress().canUseForBilling();\r\n        }),\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        addressOptionsText: function (address) {\r\n            return address.getAddressInline();\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        useShippingAddress: function () {\r\n            if (this.isAddressSameAsShipping()) {\r\n                selectBillingAddress(quote.shippingAddress());\r\n                this.updateAddresses(true);\r\n                this.isAddressDetailsVisible(true);\r\n            } else {\r\n                lastSelectedBillingAddress = quote.billingAddress();\r\n                quote.billingAddress(null);\r\n                this.isAddressDetailsVisible(false);\r\n            }\r\n            checkoutData.setSelectedBillingAddress(null);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Update address action\r\n         */\r\n        updateAddress: function () {\r\n            var addressData, newBillingAddress;\r\n\r\n            addressUpdated = true;\r\n\r\n            if (this.selectedAddress() && !this.isAddressFormVisible()) {\r\n                selectBillingAddress(this.selectedAddress());\r\n                checkoutData.setSelectedBillingAddress(this.selectedAddress().getKey());\r\n            } else {\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger(this.dataScopePrefix + '.data.validate');\r\n\r\n                if (this.source.get(this.dataScopePrefix + '.custom_attributes')) {\r\n                    this.source.trigger(this.dataScopePrefix + '.custom_attributes.data.validate');\r\n                }\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    addressData = this.source.get(this.dataScopePrefix);\r\n\r\n                    if (customer.isLoggedIn() && !this.customerHasAddresses) { //eslint-disable-line max-depth\r\n                        this.saveInAddressBook(1);\r\n                    }\r\n                    addressData['save_in_address_book'] = this.saveInAddressBook() ? 1 : 0;\r\n                    newBillingAddress = createBillingAddress(addressData);\r\n                    // New address must be selected as a billing address\r\n                    selectBillingAddress(newBillingAddress);\r\n                    checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());\r\n                    checkoutData.setNewCustomerBillingAddress(addressData);\r\n                }\r\n            }\r\n            this.updateAddresses(true);\r\n        },\r\n\r\n        /**\r\n         * Edit address action\r\n         */\r\n        editAddress: function () {\r\n            addressUpdated = false;\r\n            addressEdited = true;\r\n            lastSelectedBillingAddress = quote.billingAddress();\r\n            quote.billingAddress(null);\r\n            this.isAddressDetailsVisible(false);\r\n        },\r\n\r\n        /**\r\n         * Cancel address edit action\r\n         */\r\n        cancelAddressEdit: function () {\r\n            addressUpdated = true;\r\n            this.restoreBillingAddress();\r\n\r\n            if (quote.billingAddress()) {\r\n                // restore 'Same As Shipping' checkbox state\r\n                this.isAddressSameAsShipping(\r\n                    quote.billingAddress() != null &&\r\n                        quote.billingAddress().getCacheKey() == quote.shippingAddress().getCacheKey() && //eslint-disable-line\r\n                        !quote.isVirtual()\r\n                );\r\n                this.isAddressDetailsVisible(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Manage cancel button visibility\r\n         */\r\n        canUseCancelBillingAddress: ko.computed(function () {\r\n            return quote.billingAddress() || lastSelectedBillingAddress;\r\n        }),\r\n\r\n        /**\r\n         * Check if Billing Address Changes should be canceled\r\n         */\r\n        needCancelBillingAddressChanges: function () {\r\n            if (addressEdited && !addressUpdated) {\r\n                this.cancelAddressEdit();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Restore billing address\r\n         */\r\n        restoreBillingAddress: function () {\r\n            var lastBillingAddress;\r\n\r\n            if (lastSelectedBillingAddress != null) {\r\n                selectBillingAddress(lastSelectedBillingAddress);\r\n                lastBillingAddress = addressConverter.quoteAddressToFormAddressData(lastSelectedBillingAddress);\r\n\r\n                checkoutData.setNewCustomerBillingAddress(lastBillingAddress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Number} countryId\r\n         * @return {*}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Trigger action to update shipping and billing addresses\r\n         *\r\n         * @param {Boolean} force\r\n         */\r\n        updateAddresses: function (force) {\r\n            force = !(typeof force === 'undefined' || force !== true);\r\n\r\n            if (force\r\n                || window.checkoutConfig.reloadOnBillingAddress\r\n                || !window.checkoutConfig.displayBillingOnPaymentMethod) {\r\n                setBillingAddressAction(globalMessageList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get code\r\n         * @param {Object} parent\r\n         * @returns {String}\r\n         */\r\n        getCode: function (parent) {\r\n            return _.isFunction(parent.getCode) ? parent.getCode() : 'shared';\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart-item-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * Prepare the product name value to be rendered as HTML\r\n         *\r\n         * @param {String} productName\r\n         * @return {String}\r\n         */\r\n        getProductNameUnsanitizedHtml: function (productName) {\r\n            // product name has already escaped on backend\r\n            return productName;\r\n        },\r\n\r\n        /**\r\n         * Prepare the given option value to be rendered as HTML\r\n         *\r\n         * @param {String} optionValue\r\n         * @return {String}\r\n         */\r\n        getOptionValueUnsanitizedHtml: function (optionValue) {\r\n            // option value has already escaped on backend\r\n            return optionValue;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/estimation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function (Component, quote, priceUtils, totals, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totals.isLoading,\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getQuantity: function () {\r\n            if (totals.totals()) {\r\n                return parseFloat(totals.totals()['items_qty']);\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            if (totals.totals()) {\r\n                return parseFloat(totals.getSegment('grand_total').value);\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Show sidebar.\r\n         */\r\n        showSidebar: function () {\r\n            sidebarModel.show();\r\n        },\r\n\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/minicart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    'sidebar',\r\n    'mage/translate',\r\n    'mage/dropdown'\r\n], function (Component, customerData, $, ko, _) {\r\n    'use strict';\r\n\r\n    var sidebarInitialized = false,\r\n        addToCartCalls = 0,\r\n        miniCart;\r\n\r\n    miniCart = $('[data-block=\\'minicart\\']');\r\n\r\n    /**\r\n     * @return {Boolean}\r\n     */\r\n    function initSidebar() {\r\n        if (miniCart.data('mageSidebar')) {\r\n            miniCart.sidebar('update');\r\n        }\r\n\r\n        if (!$('[data-role=product-item]').length) {\r\n            return false;\r\n        }\r\n        miniCart.trigger('contentUpdated');\r\n\r\n        if (sidebarInitialized) {\r\n            return false;\r\n        }\r\n        sidebarInitialized = true;\r\n        miniCart.sidebar({\r\n            'targetElement': 'div.block.block-minicart',\r\n            'url': {\r\n                'checkout': window.checkout.checkoutUrl,\r\n                'update': window.checkout.updateItemQtyUrl,\r\n                'remove': window.checkout.removeItemUrl,\r\n                'loginUrl': window.checkout.customerLoginUrl,\r\n                'isRedirectRequired': window.checkout.isRedirectRequired\r\n            },\r\n            'button': {\r\n                'checkout': '#top-cart-btn-checkout',\r\n                'remove': '#mini-cart a.action.delete',\r\n                'close': '#btn-minicart-close'\r\n            },\r\n            'showcart': {\r\n                'parent': 'span.counter',\r\n                'qty': 'span.counter-number',\r\n                'label': 'span.counter-label'\r\n            },\r\n            'minicart': {\r\n                'list': '#mini-cart',\r\n                'content': '#minicart-content-wrapper',\r\n                'qty': 'div.items-total',\r\n                'subtotal': 'div.subtotal span.price',\r\n                'maxItemsVisible': window.checkout.minicartMaxItemsVisible\r\n            },\r\n            'item': {\r\n                'qty': ':input.cart-item-qty',\r\n                'button': ':button.update-cart-item'\r\n            },\r\n            'confirmMessage': $.mage.__('Are you sure you would like to remove this item from the shopping cart?')\r\n        });\r\n    }\r\n\r\n    miniCart.on('dropdowndialogopen', function () {\r\n        initSidebar();\r\n    });\r\n\r\n    return Component.extend({\r\n        shoppingCartUrl: window.checkout.shoppingCartUrl,\r\n        maxItemsToDisplay: window.checkout.maxItemsToDisplay,\r\n        cart: {},\r\n\r\n        // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                cartData = customerData.get('cart');\r\n\r\n            this.update(cartData());\r\n            cartData.subscribe(function (updatedCart) {\r\n                addToCartCalls--;\r\n                this.isLoading(addToCartCalls > 0);\r\n                sidebarInitialized = false;\r\n                this.update(updatedCart);\r\n                initSidebar();\r\n            }, this);\r\n            $('[data-block=\"minicart\"]').on('contentLoading', function () {\r\n                addToCartCalls++;\r\n                self.isLoading(true);\r\n            });\r\n\r\n            if (\r\n                cartData().website_id !== window.checkout.websiteId && cartData().website_id !== undefined ||\r\n                cartData().storeId !== window.checkout.storeId && cartData().storeId !== undefined\r\n            ) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n        //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n        isLoading: ko.observable(false),\r\n        initSidebar: initSidebar,\r\n\r\n        /**\r\n         * Close mini shopping cart.\r\n         */\r\n        closeMinicart: function () {\r\n            $('[data-block=\"minicart\"]').find('[data-role=\"dropdownDialog\"]').dropdownDialog('close');\r\n        },\r\n\r\n        /**\r\n         * @param {String} productType\r\n         * @return {*|String}\r\n         */\r\n        getItemRenderer: function (productType) {\r\n            return this.itemRenderer[productType] || 'defaultRenderer';\r\n        },\r\n\r\n        /**\r\n         * Update mini shopping cart content.\r\n         *\r\n         * @param {Object} updatedCart\r\n         * @returns void\r\n         */\r\n        update: function (updatedCart) {\r\n            _.each(updatedCart, function (value, key) {\r\n                if (!this.cart.hasOwnProperty(key)) {\r\n                    this.cart[key] = ko.observable();\r\n                }\r\n                this.cart[key](value);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Get cart param by name.\r\n         *\r\n         * @param {String} name\r\n         * @returns {*}\r\n         */\r\n        getCartParamUnsanitizedHtml: function (name) {\r\n            if (!_.isUndefined(name)) {\r\n                if (!this.cart.hasOwnProperty(name)) {\r\n                    this.cart[name] = ko.observable();\r\n                }\r\n            }\r\n\r\n            return this.cart[name]();\r\n        },\r\n\r\n        /**\r\n         * @deprecated please use getCartParamUnsanitizedHtml.\r\n         * @param {String} name\r\n         * @returns {*}\r\n         */\r\n        getCartParam: function (name) {\r\n            return this.getCartParamUnsanitizedHtml(name);\r\n        },\r\n\r\n        /**\r\n         * Returns array of cart items, limited by 'maxItemsToDisplay' setting\r\n         * @returns []\r\n         */\r\n        getCartItems: function () {\r\n            var items = this.getCartParamUnsanitizedHtml('items') || [];\r\n\r\n            items = items.slice(parseInt(-this.maxItemsToDisplay, 10));\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         * Returns count of cart line items\r\n         * @returns {Number}\r\n         */\r\n        getCartLineItemsCount: function () {\r\n            var items = this.getCartParamUnsanitizedHtml('items') || [];\r\n\r\n            return parseInt(items.length, 10);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'mage/translate'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    ko,\r\n    quote,\r\n    stepNavigator,\r\n    paymentService,\r\n    methodConverter,\r\n    getPaymentInformation,\r\n    checkoutDataResolver,\r\n    $t\r\n) {\r\n    'use strict';\r\n\r\n    /** Set payment methods to collection */\r\n    paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/payment',\r\n            activeMethod: ''\r\n        },\r\n        isVisible: ko.observable(quote.isVirtual()),\r\n        quoteIsVirtual: quote.isVirtual(),\r\n        isPaymentMethodsAvailable: ko.computed(function () {\r\n            return paymentService.getAvailablePaymentMethods().length > 0;\r\n        }),\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            checkoutDataResolver.resolvePaymentMethod();\r\n            stepNavigator.registerStep(\r\n                'payment',\r\n                null,\r\n                $t('Review & Payments'),\r\n                this.isVisible,\r\n                _.bind(this.navigate, this),\r\n                this.sortOrder\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Navigate method.\r\n         */\r\n        navigate: function () {\r\n            var self = this;\r\n\r\n            if (!self.hasShippingMethod()) {\r\n                this.isVisible(false);\r\n                stepNavigator.setHash('shipping');\r\n            } else {\r\n                getPaymentInformation().done(function () {\r\n                    self.isVisible(true);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        hasShippingMethod: function () {\r\n            return window.checkoutConfig.selectedShippingMethod !== null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getFormKey: function () {\r\n            return window.checkoutConfig.formKey;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/progress-bar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/view/billing-address'\r\n], function ($, _, ko, Component, stepNavigator, billingAddress) {\r\n    'use strict';\r\n\r\n    var steps = stepNavigator.steps;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/progress-bar',\r\n            visible: true\r\n        },\r\n        steps: steps,\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var stepsValue;\r\n\r\n            this._super();\r\n            window.addEventListener('hashchange', _.bind(stepNavigator.handleHash, stepNavigator));\r\n\r\n            if (!window.location.hash) {\r\n                stepsValue = stepNavigator.steps();\r\n\r\n                if (stepsValue.length) {\r\n                    stepNavigator.setHash(stepsValue.sort(stepNavigator.sortItems)[0].code);\r\n                }\r\n            }\r\n\r\n            stepNavigator.handleHash();\r\n        },\r\n\r\n        /**\r\n         * @param {*} itemOne\r\n         * @param {*} itemTwo\r\n         * @return {*|Number}\r\n         */\r\n        sortItems: function (itemOne, itemTwo) {\r\n            return stepNavigator.sortItems(itemOne, itemTwo);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} step\r\n         */\r\n        navigateTo: function (step) {\r\n            if (step.code === 'shipping') {\r\n                billingAddress().needCancelBillingAddressChanges();\r\n            }\r\n            stepNavigator.navigateTo(step.code);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {*|Boolean}\r\n         */\r\n        isProcessed: function (item) {\r\n            return stepNavigator.isProcessed(item.code);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/registration.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Ui/js/model/messageList'\r\n], function ($, Component, messageList) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/registration',\r\n            accountCreated: false,\r\n            creationStarted: false,\r\n            isFormVisible: true\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('accountCreated')\r\n                .observe('isFormVisible')\r\n                .observe('creationStarted');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getEmailAddress: function () {\r\n            return this.email;\r\n        },\r\n\r\n        /**\r\n         * @return String\r\n         */\r\n        getUrl: function () {\r\n            return this.registrationUrl;\r\n        },\r\n\r\n        /**\r\n         * Create new user account.\r\n         *\r\n         * @deprecated\r\n         */\r\n        createAccount: function () {\r\n            this.creationStarted(true);\r\n            $.post(\r\n                this.registrationUrl\r\n            ).done(\r\n                function (response) {\r\n\r\n                    if (response.errors == false) { //eslint-disable-line eqeqeq\r\n                        this.accountCreated(true);\r\n                    } else {\r\n                        messageList.addErrorMessage(response);\r\n                    }\r\n                    this.isFormVisible(false);\r\n                }.bind(this)\r\n            ).fail(\r\n                function (response) {\r\n                    this.accountCreated(false);\r\n                    this.isFormVisible(false);\r\n                    messageList.addErrorMessage(response);\r\n                }.bind(this)\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function ($, Component, quote, stepNavigator, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isVisible: function () {\r\n            return !quote.isVirtual() && stepNavigator.isProcessed('shipping');\r\n        },\r\n\r\n        /**\r\n         * @return {String}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                shippingMethodTitle = '';\r\n\r\n            if (!shippingMethod) {\r\n                return '';\r\n            }\r\n\r\n            shippingMethodTitle = shippingMethod['carrier_title'];\r\n\r\n            if (typeof shippingMethod['method_title'] !== 'undefined') {\r\n                shippingMethodTitle += ' - ' + shippingMethod['method_title'];\r\n            }\r\n\r\n            return shippingMethodTitle;\r\n        },\r\n\r\n        /**\r\n         * Back step.\r\n         */\r\n        back: function () {\r\n            sidebarModel.hide();\r\n            stepNavigator.navigateTo('shipping');\r\n        },\r\n\r\n        /**\r\n         * Back to shipping method.\r\n         */\r\n        backToShippingMethod: function () {\r\n            sidebarModel.hide();\r\n            stepNavigator.navigateTo('shipping', 'opc-shipping_method');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/form',\r\n    'ko',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/create-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/action/set-shipping-information',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Ui/js/modal/modal',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'uiRegistry',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/shipping-rate-service'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    ko,\r\n    customer,\r\n    addressList,\r\n    addressConverter,\r\n    quote,\r\n    createShippingAddress,\r\n    selectShippingAddress,\r\n    shippingRatesValidator,\r\n    formPopUpState,\r\n    shippingService,\r\n    selectShippingMethodAction,\r\n    rateRegistry,\r\n    setShippingInformationAction,\r\n    stepNavigator,\r\n    modal,\r\n    checkoutDataResolver,\r\n    checkoutData,\r\n    registry,\r\n    $t\r\n) {\r\n    'use strict';\r\n\r\n    var popUp = null;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping',\r\n            shippingFormTemplate: 'Magento_Checkout/shipping-address/form',\r\n            shippingMethodListTemplate: 'Magento_Checkout/shipping-address/shipping-method-list',\r\n            shippingMethodItemTemplate: 'Magento_Checkout/shipping-address/shipping-method-item',\r\n            imports: {\r\n                countryOptions: '${ $.parentName }.shippingAddress.shipping-address-fieldset.country_id:indexedOptions'\r\n            }\r\n        },\r\n        visible: ko.observable(!quote.isVirtual()),\r\n        errorValidationMessage: ko.observable(false),\r\n        isCustomerLoggedIn: customer.isLoggedIn,\r\n        isFormPopUpVisible: formPopUpState.isVisible,\r\n        isFormInline: addressList().length === 0,\r\n        isNewAddressAdded: ko.observable(false),\r\n        saveInAddressBook: 1,\r\n        quoteIsVirtual: quote.isVirtual(),\r\n\r\n        /**\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                hasNewAddress,\r\n                fieldsetName = 'checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset';\r\n\r\n            this._super();\r\n\r\n            if (!quote.isVirtual()) {\r\n                stepNavigator.registerStep(\r\n                    'shipping',\r\n                    '',\r\n                    $t('Shipping'),\r\n                    this.visible, _.bind(this.navigate, this),\r\n                    this.sortOrder\r\n                );\r\n            }\r\n            checkoutDataResolver.resolveShippingAddress();\r\n\r\n            hasNewAddress = addressList.some(function (address) {\r\n                return address.getType() == 'new-customer-address'; //eslint-disable-line eqeqeq\r\n            });\r\n\r\n            this.isNewAddressAdded(hasNewAddress);\r\n\r\n            this.isFormPopUpVisible.subscribe(function (value) {\r\n                if (value) {\r\n                    self.getPopUp().openModal();\r\n                }\r\n            });\r\n\r\n            quote.shippingMethod.subscribe(function () {\r\n                self.errorValidationMessage(false);\r\n            });\r\n\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n\r\n                if (shippingAddressData) {\r\n                    checkoutProvider.set(\r\n                        'shippingAddress',\r\n                        $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                    );\r\n                }\r\n                checkoutProvider.on('shippingAddress', function (shippingAddrsData, changes) {\r\n                    var isStreetAddressDeleted, isStreetAddressNotEmpty;\r\n\r\n                    /**\r\n                     * In last modifying operation street address was deleted.\r\n                     * @return {Boolean}\r\n                     */\r\n                    isStreetAddressDeleted = function () {\r\n                        var change;\r\n\r\n                        if (!changes || changes.length === 0) {\r\n                            return false;\r\n                        }\r\n\r\n                        change = changes.pop();\r\n\r\n                        if (_.isUndefined(change.value) || _.isUndefined(change.oldValue)) {\r\n                            return false;\r\n                        }\r\n\r\n                        if (!change.path.startsWith('shippingAddress.street')) {\r\n                            return false;\r\n                        }\r\n\r\n                        return change.value.length === 0 && change.oldValue.length > 0;\r\n                    };\r\n\r\n                    isStreetAddressNotEmpty = shippingAddrsData.street && !_.isEmpty(shippingAddrsData.street[0]);\r\n\r\n                    if (isStreetAddressNotEmpty || isStreetAddressDeleted()) {\r\n                        checkoutData.setShippingAddressFromData(shippingAddrsData);\r\n                    }\r\n                });\r\n                shippingRatesValidator.initFields(fieldsetName);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Navigator change hash handler.\r\n         *\r\n         * @param {Object} step - navigation step\r\n         */\r\n        navigate: function (step) {\r\n            step && step.isVisible(true);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPopUp: function () {\r\n            var self = this,\r\n                buttons;\r\n\r\n            if (!popUp) {\r\n                buttons = this.popUpForm.options.buttons;\r\n                this.popUpForm.options.buttons = [\r\n                    {\r\n                        text: buttons.save.text ? buttons.save.text : $t('Save Address'),\r\n                        class: buttons.save.class ? buttons.save.class : 'action primary action-save-address',\r\n                        click: self.saveNewAddress.bind(self)\r\n                    },\r\n                    {\r\n                        text: buttons.cancel.text ? buttons.cancel.text : $t('Cancel'),\r\n                        class: buttons.cancel.class ? buttons.cancel.class : 'action secondary action-hide-popup',\r\n\r\n                        /** @inheritdoc */\r\n                        click: this.onClosePopUp.bind(this)\r\n                    }\r\n                ];\r\n\r\n                /** @inheritdoc */\r\n                this.popUpForm.options.closed = function () {\r\n                    self.isFormPopUpVisible(false);\r\n                };\r\n\r\n                this.popUpForm.options.modalCloseBtnHandler = this.onClosePopUp.bind(this);\r\n                this.popUpForm.options.keyEventHandlers = {\r\n                    escapeKey: this.onClosePopUp.bind(this)\r\n                };\r\n\r\n                /** @inheritdoc */\r\n                this.popUpForm.options.opened = function () {\r\n                    // Store temporary address for revert action in case when user click cancel action\r\n                    self.temporaryAddress = $.extend(true, {}, checkoutData.getShippingAddressFromData());\r\n                };\r\n                popUp = modal(this.popUpForm.options, $(this.popUpForm.element));\r\n            }\r\n\r\n            return popUp;\r\n        },\r\n\r\n        /**\r\n         * Revert address and close modal.\r\n         */\r\n        onClosePopUp: function () {\r\n            checkoutData.setShippingAddressFromData($.extend(true, {}, this.temporaryAddress));\r\n            this.getPopUp().closeModal();\r\n        },\r\n\r\n        /**\r\n         * Show address form popup\r\n         */\r\n        showFormPopUp: function () {\r\n            this.isFormPopUpVisible(true);\r\n        },\r\n\r\n        /**\r\n         * Save new shipping address\r\n         */\r\n        saveNewAddress: function () {\r\n            var addressData,\r\n                newShippingAddress;\r\n\r\n            this.source.set('params.invalid', false);\r\n            this.triggerShippingDataValidateEvent();\r\n\r\n            if (!this.source.get('params.invalid')) {\r\n                addressData = this.source.get('shippingAddress');\r\n                // if user clicked the checkbox, its value is true or false. Need to convert.\r\n                addressData['save_in_address_book'] = this.saveInAddressBook ? 1 : 0;\r\n\r\n                // New address must be selected as a shipping address\r\n                newShippingAddress = createShippingAddress(addressData);\r\n                selectShippingAddress(newShippingAddress);\r\n                checkoutData.setSelectedShippingAddress(newShippingAddress.getKey());\r\n                checkoutData.setNewCustomerShippingAddress($.extend(true, {}, addressData));\r\n                this.getPopUp().closeModal();\r\n                this.isNewAddressAdded(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Shipping Method View\r\n         */\r\n        rates: shippingService.getShippingRates(),\r\n        isLoading: shippingService.isLoading,\r\n        isSelected: ko.computed(function () {\r\n            return quote.shippingMethod() ?\r\n                quote.shippingMethod()['carrier_code'] + '_' + quote.shippingMethod()['method_code'] :\r\n                null;\r\n        }),\r\n\r\n        /**\r\n         * @param {Object} shippingMethod\r\n         * @return {Boolean}\r\n         */\r\n        selectShippingMethod: function (shippingMethod) {\r\n            selectShippingMethodAction(shippingMethod);\r\n            checkoutData.setSelectedShippingRate(shippingMethod['carrier_code'] + '_' + shippingMethod['method_code']);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Set shipping information handler\r\n         */\r\n        setShippingInformation: function () {\r\n            if (this.validateShippingInformation()) {\r\n                quote.billingAddress(null);\r\n                checkoutDataResolver.resolveBillingAddress();\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n\r\n                    if (shippingAddressData) {\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                        );\r\n                    }\r\n                });\r\n                setShippingInformationAction().done(\r\n                    function () {\r\n                        stepNavigator.next();\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        validateShippingInformation: function () {\r\n            var shippingAddress,\r\n                addressData,\r\n                loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                emailValidationResult = customer.isLoggedIn(),\r\n                field,\r\n                option = _.isObject(this.countryOptions) && this.countryOptions[quote.shippingAddress().countryId],\r\n                messageContainer = registry.get('checkout.errors').messageContainer;\r\n\r\n            if (!quote.shippingMethod()) {\r\n                this.errorValidationMessage(\r\n                    $t('The shipping method is missing. Select the shipping method and try again.')\r\n                );\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n            }\r\n\r\n            if (this.isFormInline) {\r\n                this.source.set('params.invalid', false);\r\n                this.triggerShippingDataValidateEvent();\r\n\r\n                if (!quote.shippingMethod()['method_code']) {\r\n                    this.errorValidationMessage(\r\n                        $t('The shipping method is missing. Select the shipping method and try again.')\r\n                    );\r\n                }\r\n\r\n                if (emailValidationResult &&\r\n                    this.source.get('params.invalid') ||\r\n                    !quote.shippingMethod()['method_code'] ||\r\n                    !quote.shippingMethod()['carrier_code']\r\n                ) {\r\n                    this.focusInvalid();\r\n\r\n                    return false;\r\n                }\r\n\r\n                shippingAddress = quote.shippingAddress();\r\n                addressData = addressConverter.formAddressDataToQuoteAddress(\r\n                    this.source.get('shippingAddress')\r\n                );\r\n\r\n                //Copy form data to quote shipping address object\r\n                for (field in addressData) {\r\n                    if (addressData.hasOwnProperty(field) &&  //eslint-disable-line max-depth\r\n                        shippingAddress.hasOwnProperty(field) &&\r\n                        typeof addressData[field] != 'function' &&\r\n                        _.isEqual(shippingAddress[field], addressData[field])\r\n                    ) {\r\n                        shippingAddress[field] = addressData[field];\r\n                    } else if (typeof addressData[field] != 'function' &&\r\n                        !_.isEqual(shippingAddress[field], addressData[field])) {\r\n                        shippingAddress = addressData;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (customer.isLoggedIn()) {\r\n                    shippingAddress['save_in_address_book'] = 1;\r\n                }\r\n                selectShippingAddress(shippingAddress);\r\n            } else if (customer.isLoggedIn() &&\r\n                option &&\r\n                option['is_region_required'] &&\r\n                !quote.shippingAddress().region\r\n            ) {\r\n                messageContainer.addErrorMessage({\r\n                    message: $t('Please specify a regionId in shipping address.')\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!emailValidationResult) {\r\n                $(loginFormSelector + ' input[name=username]').trigger('focus');\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Trigger Shipping data Validate Event.\r\n         */\r\n        triggerShippingDataValidateEvent: function () {\r\n            this.source.trigger('shippingAddress.data.validate');\r\n\r\n            if (this.source.get('shippingAddress.custom_attributes')) {\r\n                this.source.trigger('shippingAddress.custom_attributes.data.validate');\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function (Component, ko, $, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @param {HTMLElement} element\r\n         */\r\n        setModalElement: function (element) {\r\n            sidebarModel.setPopup($(element));\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, totals) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totals.isLoading\r\n    });\r\n});\r\n","Magento_Checkout/js/view/billing-address/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/model/address-list',\r\n    'mage/translate',\r\n    'Magento_Customer/js/model/customer'\r\n], function (Component, addressList, $t, customer) {\r\n    'use strict';\r\n\r\n    var newAddressOption = {\r\n            /**\r\n             * Get new address label\r\n             * @returns {String}\r\n             */\r\n            getAddressInline: function () {\r\n                return $t('New Address');\r\n            },\r\n            customerAddressId: null\r\n        },\r\n        addressOptions = addressList().filter(function (address) {\r\n            return address.getType() === 'customer-address';\r\n        }),\r\n        addressDefaultIndex = addressOptions.findIndex(function (address) {\r\n            return address.isDefaultBilling();\r\n        });\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/billing-address',\r\n            selectedAddress: null,\r\n            isNewAddressSelected: false,\r\n            addressOptions: addressOptions,\r\n            exports: {\r\n                selectedAddress: '${ $.parentName }:selectedAddress'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.addressOptions.push(newAddressOption);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('selectedAddress isNewAddressSelected')\r\n                .observe({\r\n                    isNewAddressSelected: !customer.isLoggedIn() || !addressOptions.length,\r\n                    selectedAddress: this.addressOptions[addressDefaultIndex]\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        addressOptionsText: function (address) {\r\n            return address.getAddressInline();\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        onAddressChange: function (address) {\r\n            this.isNewAddressSelected(address === newAddressOption);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/shipping-estimation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Ui/js/form/form',\r\n        'Magento_Checkout/js/action/select-shipping-address',\r\n        'Magento_Checkout/js/model/address-converter',\r\n        'Magento_Checkout/js/model/cart/estimate-service',\r\n        'Magento_Checkout/js/checkout-data',\r\n        'Magento_Checkout/js/model/shipping-rates-validator',\r\n        'uiRegistry',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/checkout-data-resolver',\r\n        'Magento_Checkout/js/model/shipping-service',\r\n        'mage/validation'\r\n    ],\r\n    function (\r\n        $,\r\n        Component,\r\n        selectShippingAddress,\r\n        addressConverter,\r\n        estimateService,\r\n        checkoutData,\r\n        shippingRatesValidator,\r\n        registry,\r\n        quote,\r\n        checkoutDataResolver,\r\n        shippingService\r\n    ) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'Magento_Checkout/cart/shipping-estimation'\r\n            },\r\n            isVirtual: quote.isVirtual(),\r\n\r\n            /**\r\n             * @override\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n\r\n                // Prevent shipping methods showing none available whilst we resolve\r\n                shippingService.isLoading(true);\r\n\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var address, estimatedAddress;\r\n\r\n                    shippingService.isLoading(false);\r\n\r\n                    checkoutDataResolver.resolveEstimationAddress();\r\n                    address = quote.isVirtual() ? quote.billingAddress() : quote.shippingAddress();\r\n\r\n                    if (!address && quote.isVirtual()) {\r\n                        address = addressConverter.formAddressDataToQuoteAddress(\r\n                            checkoutData.getSelectedBillingAddress()\r\n                        );\r\n                    }\r\n\r\n                    if (address) {\r\n                        estimatedAddress = address.isEditable() ?\r\n                            addressConverter.quoteAddressToFormAddressData(address) :\r\n                            {\r\n                                // only the following fields must be used by estimation form data provider\r\n                                'country_id': address.countryId,\r\n                                region: address.region,\r\n                                'region_id': address.regionId,\r\n                                postcode: address.postcode\r\n                            };\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend({}, checkoutProvider.get('shippingAddress'), estimatedAddress)\r\n                        );\r\n                    }\r\n\r\n                    if (!quote.isVirtual()) {\r\n                        checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                            //jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n                            if (quote.shippingAddress().countryId !== shippingAddressData.country_id ||\r\n                                (shippingAddressData.postcode || shippingAddressData.region_id)\r\n                            ) {\r\n                                checkoutData.setShippingAddressFromData(shippingAddressData);\r\n                            }\r\n                            //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n                        });\r\n                    } else {\r\n                        checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                            checkoutData.setBillingAddressFromData(shippingAddressData);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * @override\r\n             */\r\n            initElement: function (element) {\r\n                this._super();\r\n\r\n                if (element.index === 'address-fieldsets') {\r\n                    shippingRatesValidator.bindChangeHandlers(element.elems(), true, 500);\r\n                    element.elems.subscribe(function (elems) {\r\n                        shippingRatesValidator.doElementBinding(elems[elems.length - 1], true, 500);\r\n                    });\r\n                }\r\n\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * Returns shipping rates for address\r\n             * @returns void\r\n             */\r\n            getEstimationInfo: function () {\r\n                var addressData = null;\r\n\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger('shippingAddress.data.validate');\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    addressData = this.source.get('shippingAddress');\r\n                    selectShippingAddress(addressConverter.formAddressDataToQuoteAddress(addressData));\r\n                }\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_Checkout/js/view/cart/shipping-rates.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/checkout-data'\r\n], function (ko, _, Component, shippingService, priceUtils, quote, selectShippingMethodAction, checkoutData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/cart/shipping-rates'\r\n        },\r\n        isVisible: ko.observable(!quote.isVirtual()),\r\n        isLoading: shippingService.isLoading,\r\n        shippingRates: shippingService.getShippingRates(),\r\n        shippingRateGroups: ko.observableArray([]),\r\n        selectedShippingMethod: ko.computed(function () {\r\n            return quote.shippingMethod() ?\r\n                quote.shippingMethod()['carrier_code'] + '_' + quote.shippingMethod()['method_code'] :\r\n                null;\r\n        }),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            this.shippingRates.subscribe(function (rates) {\r\n                self.shippingRateGroups([]);\r\n                _.each(rates, function (rate) {\r\n                    var carrierTitle = rate['carrier_title'];\r\n\r\n                    if (self.shippingRateGroups.indexOf(carrierTitle) === -1) {\r\n                        self.shippingRateGroups.push(carrierTitle);\r\n                    }\r\n                });\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get shipping rates for specific group based on title.\r\n         * @returns Array\r\n         */\r\n        getRatesForGroup: function (shippingRateGroupTitle) {\r\n            return _.filter(this.shippingRates(), function (rate) {\r\n                return shippingRateGroupTitle === rate['carrier_title'];\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Format shipping price.\r\n         * @returns {String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * Set shipping method.\r\n         * @param {String} methodData\r\n         * @returns bool\r\n         */\r\n        selectShippingMethod: function (methodData) {\r\n            selectShippingMethodAction(methodData);\r\n            checkoutData.setSelectedShippingRate(methodData['carrier_code'] + '_' + methodData['method_code']);\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/shipping-service'\r\n], function ($, Component, totalsService, shippingService) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totalsService.isLoading,\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            totalsService.totals.subscribe(function () {\r\n                $(window).trigger('resize');\r\n            });\r\n            shippingService.getShippingRates().subscribe(function () {\r\n                $(window).trigger('resize');\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/totals/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return !!quote.shippingMethod();\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/checkout/placeOrderCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n    'Magento_Captcha/js/model/captchaList',\r\n    'underscore',\r\n    'Magento_Checkout/js/model/payment/place-order-hooks'\r\n],\r\nfunction (defaultCaptcha, captchaList, _, placeOrderHooks) {\r\n    'use strict';\r\n\r\n    return defaultCaptcha.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var self = this,\r\n                currentCaptcha;\r\n\r\n            this._super();\r\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n            if (currentCaptcha != null) {\r\n                currentCaptcha.setIsVisible(true);\r\n                this.setCurrentCaptcha(currentCaptcha);\r\n                placeOrderHooks.requestModifiers.push(function (headers) {\r\n                    if (self.isRequired()) {\r\n                        headers['X-Captcha'] = self.captchaValue()();\r\n                    }\r\n                });\r\n                if (self.isRequired()) {\r\n                    placeOrderHooks.afterRequestListeners.push(function () {\r\n                        self.refresh();\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        displaySubtotal: ko.observable(true),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.cart = customerData.get('cart');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/configure/product-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore',\r\n    'domReady!'\r\n], function ($, customerData, _) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n        qtySelector: '#product_addtocart_form [name=\"qty\"]',\r\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\r\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\r\n    },\r\n    cartData = customerData.get('cart'),\r\n    productId = $(selectors.productIdSelector).val(),\r\n    itemId = $(selectors.itemIdSelector).val(),\r\n    productQty,\r\n    productQtyInput,\r\n\r\n    /**\r\n    * Updates product's qty input value according to actual data\r\n    */\r\n    updateQty = function () {\r\n\r\n        if (productQty || productQty === 0) {\r\n            productQtyInput = productQtyInput || $(selectors.qtySelector);\r\n\r\n            if (productQtyInput && productQty.toString() !== productQtyInput.val()) {\r\n                productQtyInput.val(productQty);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n    * Sets productQty according to cart data from customer-data\r\n    *\r\n    * @param {Object} data - cart data from customer-data\r\n    */\r\n    setProductQty = function (data) {\r\n        var product;\r\n\r\n        if (!(data && data.items && data.items.length && productId)) {\r\n            return;\r\n        }\r\n        product = _.find(data.items, function (item) {\r\n            if (item['item_id'] === itemId) {\r\n                return item['product_id'] === productId ||\r\n                    item['item_id'] === productId;\r\n            }\r\n        });\r\n\r\n        if (!product) {\r\n            return;\r\n        }\r\n        productQty = product.qty;\r\n    };\r\n\r\n    cartData.subscribe(function (updateCartData) {\r\n        setProductQty(updateCartData);\r\n        updateQty();\r\n    });\r\n\r\n    setProductQty(cartData());\r\n    updateQty();\r\n});\r\n","Magento_Checkout/js/view/form/element/email.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'ko',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/action/check-email-availability',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'mage/validation'\r\n], function ($, Component, ko, customer, checkEmailAvailability, loginAction, quote, checkoutData, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    var validatedEmail;\r\n\r\n    if (!checkoutData.getValidatedEmailValue() &&\r\n        window.checkoutConfig.validatedEmailValue\r\n    ) {\r\n        checkoutData.setInputFieldEmailValue(window.checkoutConfig.validatedEmailValue);\r\n        checkoutData.setValidatedEmailValue(window.checkoutConfig.validatedEmailValue);\r\n    }\r\n\r\n    validatedEmail = checkoutData.getValidatedEmailValue();\r\n\r\n    if (validatedEmail && !customer.isLoggedIn()) {\r\n        quote.guestEmail = validatedEmail;\r\n    }\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/form/element/email',\r\n            email: checkoutData.getInputFieldEmailValue(),\r\n            emailFocused: false,\r\n            isLoading: false,\r\n            isPasswordVisible: false,\r\n            listens: {\r\n                email: 'emailHasChanged',\r\n                emailFocused: 'validateEmail'\r\n            },\r\n            ignoreTmpls: {\r\n                email: true\r\n            }\r\n        },\r\n        checkDelay: 2000,\r\n        checkRequest: null,\r\n        isEmailCheckComplete: null,\r\n        isCustomerLoggedIn: customer.isLoggedIn,\r\n        forgotPasswordUrl: window.checkoutConfig.forgotPasswordUrl,\r\n        emailCheckTimeout: 0,\r\n        emailInputId: '#customer-email',\r\n\r\n        /**\r\n         * Initializes regular properties of instance.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.isPasswordVisible = this.resolveInitialPasswordVisibility();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['email', 'emailFocused', 'isLoading', 'isPasswordVisible']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Callback on changing email property\r\n         */\r\n        emailHasChanged: function () {\r\n            var self = this;\r\n\r\n            clearTimeout(this.emailCheckTimeout);\r\n\r\n            if (self.validateEmail()) {\r\n                quote.guestEmail = self.email();\r\n                checkoutData.setValidatedEmailValue(self.email());\r\n            }\r\n            this.emailCheckTimeout = setTimeout(function () {\r\n                if (self.validateEmail()) {\r\n                    self.checkEmailAvailability();\r\n                } else {\r\n                    self.isPasswordVisible(false);\r\n                }\r\n            }, self.checkDelay);\r\n\r\n            checkoutData.setInputFieldEmailValue(self.email());\r\n        },\r\n\r\n        /**\r\n         * Check email existing.\r\n         */\r\n        checkEmailAvailability: function () {\r\n            this.validateRequest();\r\n            this.isEmailCheckComplete = $.Deferred();\r\n            // Clean up errors on email\r\n            $(this.emailInputId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n            this.isLoading(true);\r\n            this.checkRequest = checkEmailAvailability(this.isEmailCheckComplete, this.email());\r\n\r\n            $.when(this.isEmailCheckComplete).done(function () {\r\n                this.isPasswordVisible(false);\r\n                checkoutData.setCheckedEmailValue('');\r\n            }.bind(this)).fail(function () {\r\n                this.isPasswordVisible(true);\r\n                checkoutData.setCheckedEmailValue(this.email());\r\n            }.bind(this)).always(function () {\r\n                this.isLoading(false);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * If request has been sent -> abort it.\r\n         * ReadyStates for request aborting:\r\n         * 1 - The request has been set up\r\n         * 2 - The request has been sent\r\n         * 3 - The request is in process\r\n         */\r\n        validateRequest: function () {\r\n            if (this.checkRequest != null && $.inArray(this.checkRequest.readyState, [1, 2, 3])) {\r\n                this.checkRequest.abort();\r\n                this.checkRequest = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Local email validation.\r\n         *\r\n         * @param {Boolean} focused - input focus.\r\n         * @returns {Boolean} - validation result.\r\n         */\r\n        validateEmail: function (focused) {\r\n            var loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                usernameSelector = loginFormSelector + ' input[name=username]',\r\n                loginForm = $(loginFormSelector),\r\n                validator,\r\n                valid;\r\n\r\n            loginForm.validation();\r\n\r\n            if (focused === false && !!this.email()) {\r\n                valid = !!$(usernameSelector).valid();\r\n\r\n                if (valid) {\r\n                    $(usernameSelector).removeAttr('aria-invalid aria-describedby');\r\n                }\r\n\r\n                return valid;\r\n            }\r\n\r\n            if (loginForm.is(':visible')) {\r\n                validator = loginForm.validate();\r\n\r\n                return validator.check(usernameSelector);\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Log in form submitting callback.\r\n         *\r\n         * @param {HTMLElement} loginForm - form element.\r\n         */\r\n        login: function (loginForm) {\r\n            var loginData = {},\r\n                formDataArray = $(loginForm).serializeArray();\r\n\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if (this.isPasswordVisible() && $(loginForm).validation() && $(loginForm).validation('isValid')) {\r\n                fullScreenLoader.startLoader();\r\n                loginAction(loginData).always(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolves an initial state of a login form.\r\n         *\r\n         * @returns {Boolean} - initial visibility state.\r\n         */\r\n        resolveInitialPasswordVisibility: function () {\r\n            if (checkoutData.getInputFieldEmailValue() !== '' && checkoutData.getCheckedEmailValue() !== '') {\r\n                return true;\r\n            }\r\n\r\n            if (checkoutData.getInputFieldEmailValue() !== '') {\r\n                return checkoutData.getInputFieldEmailValue() === checkoutData.getCheckedEmailValue();\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/action/place-order',\r\n    'Magento_Checkout/js/action/select-payment-method',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/model/messages',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/action/redirect-on-success'\r\n], function (\r\n    ko,\r\n    $,\r\n    Component,\r\n    placeOrderAction,\r\n    selectPaymentMethodAction,\r\n    quote,\r\n    customer,\r\n    paymentService,\r\n    checkoutData,\r\n    checkoutDataResolver,\r\n    registry,\r\n    additionalValidators,\r\n    Messages,\r\n    layout,\r\n    redirectOnSuccessAction\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        redirectAfterPlaceOrder: true,\r\n        isPlaceOrderActionAllowed: ko.observable(quote.billingAddress() != null),\r\n\r\n        /**\r\n         * After place order callback\r\n         */\r\n        afterPlaceOrder: function () {\r\n            // Override this function and put after place order logic here\r\n        },\r\n\r\n        /**\r\n         * Initialize view.\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var billingAddressCode,\r\n                billingAddressData,\r\n                defaultAddressData;\r\n\r\n            this._super().initChildren();\r\n            quote.billingAddress.subscribe(function (address) {\r\n                this.isPlaceOrderActionAllowed(address !== null);\r\n            }, this);\r\n            checkoutDataResolver.resolveBillingAddress();\r\n\r\n            billingAddressCode = 'billingAddress' + this.getCode();\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                defaultAddressData = checkoutProvider.get(billingAddressCode);\r\n\r\n                if (defaultAddressData === undefined) {\r\n                    // Skip if payment does not have a billing address form\r\n                    return;\r\n                }\r\n                billingAddressData = checkoutData.getBillingAddressFromData();\r\n\r\n                if (billingAddressData) {\r\n                    checkoutProvider.set(\r\n                        billingAddressCode,\r\n                        $.extend(true, {}, defaultAddressData, billingAddressData)\r\n                    );\r\n                }\r\n                checkoutProvider.on(billingAddressCode, function (providerBillingAddressData) {\r\n                    checkoutData.setBillingAddressFromData(providerBillingAddressData);\r\n                }, billingAddressCode);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize child elements\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.messageContainer = new Messages();\r\n            this.createMessagesComponent();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create child message renderer component\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        createMessagesComponent: function () {\r\n\r\n            var messagesComponent = {\r\n                parent: this.name,\r\n                name: this.name + '.messages',\r\n                displayArea: 'messages',\r\n                component: 'Magento_Ui/js/view/messages',\r\n                config: {\r\n                    messageContainer: this.messageContainer\r\n                }\r\n            };\r\n\r\n            layout([messagesComponent]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Place order.\r\n         */\r\n        placeOrder: function (data, event) {\r\n            var self = this;\r\n\r\n            if (event) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            if (this.validate() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                this.isPlaceOrderActionAllowed(false);\r\n\r\n                this.getPlaceOrderDeferredObject()\r\n                    .done(\r\n                        function () {\r\n                            self.afterPlaceOrder();\r\n\r\n                            if (self.redirectAfterPlaceOrder) {\r\n                                redirectOnSuccessAction.execute();\r\n                            }\r\n                        }\r\n                    ).always(\r\n                        function () {\r\n                            self.isPlaceOrderActionAllowed(true);\r\n                        }\r\n                    );\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPlaceOrderDeferredObject: function () {\r\n            return $.when(\r\n                placeOrderAction(this.getData(), this.messageContainer)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        selectPaymentMethod: function () {\r\n            selectPaymentMethodAction(this.getData());\r\n            checkoutData.setSelectedPaymentMethod(this.item.method);\r\n\r\n            return true;\r\n        },\r\n\r\n        isChecked: ko.computed(function () {\r\n            return quote.paymentMethod() ? quote.paymentMethod().method : null;\r\n        }),\r\n\r\n        isRadioButtonVisible: ko.computed(function () {\r\n            return paymentService.getAvailablePaymentMethods().length !== 1;\r\n        }),\r\n\r\n        /**\r\n         * Get payment method data\r\n         */\r\n        getData: function () {\r\n            return {\r\n                'method': this.item.method,\r\n                'po_number': null,\r\n                'additional_data': null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get payment method type.\r\n         */\r\n        getTitle: function () {\r\n            return this.item.title;\r\n        },\r\n\r\n        /**\r\n         * Get payment method code.\r\n         */\r\n        getCode: function () {\r\n            return this.item.method;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        validate: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @return {String}\r\n         */\r\n        getBillingAddressFormName: function () {\r\n            return 'billing-address-form-' + this.item.method;\r\n        },\r\n\r\n        /**\r\n         * Dispose billing address subscriptions\r\n         */\r\n        disposeSubscriptions: function () {\r\n            // dispose all active subscriptions\r\n            var billingAddressCode = 'billingAddress' + this.getCode();\r\n\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                checkoutProvider.off(billingAddressCode);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment/email-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/payment/additional-validators',\r\n        'Magento_Checkout/js/model/customer-email-validator'\r\n    ],\r\n    function (Component, additionalValidators, agreementValidator) {\r\n        'use strict';\r\n\r\n        additionalValidators.registerValidator(agreementValidator);\r\n\r\n        return Component.extend({});\r\n    }\r\n);\r\n","Magento_Checkout/js/view/payment/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/method-list',\r\n    'Magento_Checkout/js/model/payment/renderer-list',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'mage/translate',\r\n    'uiRegistry'\r\n], function (_, ko, utils, Component, paymentMethods, rendererList, layout, checkoutDataResolver, $t, registry) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/payment-methods/list',\r\n            visible: paymentMethods().length > 0,\r\n            configDefaultGroup: {\r\n                name: 'methodGroup',\r\n                component: 'Magento_Checkout/js/model/payment/method-group'\r\n            },\r\n            paymentGroupsList: [],\r\n            defaultGroupTitle: $t('Select a new payment method')\r\n        },\r\n\r\n        /**\r\n         * Initialize view.\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super().initDefaulGroup().initChildren();\r\n            paymentMethods.subscribe(\r\n                function (changes) {\r\n                    checkoutDataResolver.resolvePaymentMethod();\r\n                    //remove renderer for \"deleted\" payment methods\r\n                    _.each(changes, function (change) {\r\n                        if (change.status === 'deleted') {\r\n                            this.removeRenderer(change.value.method);\r\n                        }\r\n                    }, this);\r\n                    //add renderer for \"added\" payment methods\r\n                    _.each(changes, function (change) {\r\n                        if (change.status === 'added') {\r\n                            this.createRenderer(change.value);\r\n                        }\r\n                    }, this);\r\n                }, this, 'arrayChange');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super().\r\n                observe(['paymentGroupsList']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates default group\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initDefaulGroup: function () {\r\n            layout([\r\n                this.configDefaultGroup\r\n            ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create renders for child payment methods.\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var self = this;\r\n\r\n            _.each(paymentMethods(), function (paymentMethodData) {\r\n                self.createRenderer(paymentMethodData);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @returns\r\n         */\r\n        createComponent: function (payment) {\r\n            var rendererTemplate,\r\n                rendererComponent,\r\n                templateData;\r\n\r\n            templateData = {\r\n                parentName: this.name,\r\n                name: payment.name\r\n            };\r\n            rendererTemplate = {\r\n                parent: '${ $.$data.parentName }',\r\n                name: '${ $.$data.name }',\r\n                displayArea: payment.displayArea,\r\n                component: payment.component\r\n            };\r\n            rendererComponent = utils.template(rendererTemplate, templateData);\r\n            utils.extend(rendererComponent, {\r\n                item: payment.item,\r\n                config: payment.config\r\n            });\r\n\r\n            return rendererComponent;\r\n        },\r\n\r\n        /**\r\n         * Create renderer.\r\n         *\r\n         * @param {Object} paymentMethodData\r\n         */\r\n        createRenderer: function (paymentMethodData) {\r\n            var isRendererForMethod = false,\r\n                currentGroup;\r\n\r\n            registry.get(this.configDefaultGroup.name, function (defaultGroup) {\r\n                _.each(rendererList(), function (renderer) {\r\n\r\n                    if (renderer.hasOwnProperty('typeComparatorCallback') &&\r\n                        typeof renderer.typeComparatorCallback == 'function'\r\n                    ) {\r\n                        isRendererForMethod = renderer.typeComparatorCallback(renderer.type, paymentMethodData.method);\r\n                    } else {\r\n                        isRendererForMethod = renderer.type === paymentMethodData.method;\r\n                    }\r\n\r\n                    if (isRendererForMethod) {\r\n                        currentGroup = renderer.group ? renderer.group : defaultGroup;\r\n\r\n                        this.collectPaymentGroups(currentGroup);\r\n\r\n                        layout([\r\n                            this.createComponent(\r\n                                {\r\n                                    config: renderer.config,\r\n                                    component: renderer.component,\r\n                                    name: renderer.type,\r\n                                    method: paymentMethodData.method,\r\n                                    item: paymentMethodData,\r\n                                    displayArea: currentGroup.displayArea\r\n                                }\r\n                            )]);\r\n                    }\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Collects unique groups of available payment methods\r\n         *\r\n         * @param {Object} group\r\n         */\r\n        collectPaymentGroups: function (group) {\r\n            var groupsList = this.paymentGroupsList(),\r\n                isGroupExists = _.some(groupsList, function (existsGroup) {\r\n                    return existsGroup.alias === group.alias;\r\n                });\r\n\r\n            if (!isGroupExists) {\r\n                groupsList.push(group);\r\n                groupsList = _.sortBy(groupsList, function (existsGroup) {\r\n                    return existsGroup.sortOrder;\r\n                });\r\n                this.paymentGroupsList(groupsList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns payment group title\r\n         *\r\n         * @param {Object} group\r\n         * @returns {String}\r\n         */\r\n        getGroupTitle: function (group) {\r\n            var title = group().title;\r\n\r\n            if (group().isDefault() && this.paymentGroupsList().length > 1) {\r\n                title = this.defaultGroupTitle;\r\n            }\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Checks if at least one payment method available\r\n         *\r\n         * @returns {String}\r\n         */\r\n        isPaymentMethodsAvailable: function () {\r\n            return _.some(this.paymentGroupsList(), function (group) {\r\n                return this.regionHasElements(group.displayArea);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Remove view renderer.\r\n         *\r\n         * @param {String} paymentMethodCode\r\n         */\r\n        removeRenderer: function (paymentMethodCode) {\r\n            var items;\r\n\r\n            _.each(this.paymentGroupsList(), function (group) {\r\n                items = this.getRegion(group.displayArea);\r\n\r\n                _.find(items(), function (value) {\r\n                    if (value.item.method.indexOf(paymentMethodCode) === 0) {\r\n                        value.disposeSubscriptions();\r\n                        value.destroy();\r\n                    }\r\n                });\r\n            }, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-address/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Customer/js/model/address-list'\r\n], function (_, ko, utils, Component, layout, addressList) {\r\n    'use strict';\r\n\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'Magento_Checkout/js/view/shipping-address/address-renderer/default',\r\n        provider: 'checkoutProvider'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-address/list',\r\n            visible: addressList().length > 0,\r\n            rendererTemplates: []\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            addressList.subscribe(function (changes) {\r\n                    var self = this;\r\n\r\n                    changes.forEach(function (change) {\r\n                        if (change.status === 'added') {\r\n                            self.createRendererComponent(change.value, change.index);\r\n                        }\r\n                    });\r\n                },\r\n                this,\r\n                'arrayChange'\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = [];\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initChildren: function () {\r\n            _.each(addressList(), this.createRendererComponent, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param {Object} address\r\n         * @param {*} index\r\n         */\r\n        createRendererComponent: function (address, index) {\r\n            var rendererTemplate, templateData, rendererComponent;\r\n\r\n            if (index in this.rendererComponents) {\r\n                this.rendererComponents[index].address(address);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                rendererTemplate = address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined ? //eslint-disable-line\r\n                    utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()]) :\r\n                    defaultRendererTemplate;\r\n                templateData = {\r\n                    parentName: this.name,\r\n                    name: index\r\n                };\r\n                rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(rendererComponent, {\r\n                    address: ko.observable(address)\r\n                });\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[index] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-address/address-renderer/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'underscore',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, ko, Component, _, selectShippingAddressAction, quote, formPopUpState, checkoutData, customerData) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-address/address-renderer/default'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.isSelected = ko.computed(function () {\r\n                var isSelected = false,\r\n                    shippingAddress = quote.shippingAddress();\r\n\r\n                if (shippingAddress) {\r\n                    isSelected = shippingAddress.getKey() == this.address().getKey(); //eslint-disable-line eqeqeq\r\n                }\r\n\r\n                return isSelected;\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {String} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        },\r\n\r\n        /** Set selected customer shipping address  */\r\n        selectAddress: function () {\r\n            selectShippingAddressAction(this.address());\r\n            checkoutData.setSelectedShippingAddress(this.address().getKey());\r\n        },\r\n\r\n        /**\r\n         * Edit address.\r\n         */\r\n        editAddress: function () {\r\n            formPopUpState.isVisible(true);\r\n            this.showPopup();\r\n\r\n        },\r\n\r\n        /**\r\n         * Show popup.\r\n         */\r\n        showPopup: function () {\r\n            $('[data-open-modal=\"opc-new-shipping-address\"]').trigger('click');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/model/quote'\r\n], function ($, ko, utils, Component, layout, quote) {\r\n    'use strict';\r\n\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'Magento_Checkout/js/view/shipping-information/address-renderer/default',\r\n        provider: 'checkoutProvider'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information/list',\r\n            rendererTemplates: {}\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super()\r\n                .initChildren();\r\n\r\n            quote.shippingAddress.subscribe(function (address) {\r\n                self.createRendererComponent(address);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = {};\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initChildren: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param {Object} address\r\n         */\r\n        createRendererComponent: function (address) {\r\n            var rendererTemplate, templateData, rendererComponent;\r\n\r\n            $.each(this.rendererComponents, function (index, component) {\r\n                component.visible(false);\r\n            });\r\n\r\n            if (this.rendererComponents[address.getType()]) {\r\n                this.rendererComponents[address.getType()].address(address);\r\n                this.rendererComponents[address.getType()].visible(true);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                rendererTemplate = address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined ? //eslint-disable-line\r\n                    utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()]) :\r\n                    defaultRendererTemplate;\r\n                templateData = {\r\n                    parentName: this.name,\r\n                    name: address.getType()\r\n                };\r\n\r\n                rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(\r\n                    rendererComponent,\r\n                    {\r\n                        address: ko.observable(address),\r\n                        visible: ko.observable(true)\r\n                    }\r\n                );\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[address.getType()] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information/address-renderer/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, _, customerData) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information/address-renderer/default'\r\n        },\r\n\r\n        /**\r\n         * @param {*} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/abstract-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/step-navigator'\r\n], function (Component, quote, priceUtils, totals, stepNavigator) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getTotals: function () {\r\n            return totals.totals();\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isFullMode: function () {\r\n            if (!this.getTotals()) {\r\n                return false;\r\n            }\r\n\r\n            return stepNavigator.isProcessed('shipping');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/cart-items.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/totals',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (ko, totals, Component, stepNavigator, quote) {\r\n    'use strict';\r\n\r\n    var useQty = window.checkoutConfig.useQty;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/cart-items'\r\n        },\r\n        totals: totals.totals(),\r\n        items: ko.observable([]),\r\n        maxCartItemsToDisplay: window.checkoutConfig.maxCartItemsToDisplay,\r\n        cartUrl: window.checkoutConfig.cartUrl,\r\n\r\n        /**\r\n         * @deprecated Please use observable property (this.items())\r\n         */\r\n        getItems: totals.getItems(),\r\n\r\n        /**\r\n         * Returns cart items qty\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getItemsQty: function () {\r\n            return parseFloat(this.totals['items_qty']);\r\n        },\r\n\r\n        /**\r\n         * Returns count of cart line items\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getCartLineItemsCount: function () {\r\n            return parseInt(totals.getItems()().length, 10);\r\n        },\r\n\r\n        /**\r\n         * Returns shopping cart items summary (includes config settings)\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getCartSummaryItemsCount: function () {\r\n            return useQty ? this.getItemsQty() : this.getCartLineItemsCount();\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            // Set initial items to observable field\r\n            this.setItems(totals.getItems()());\r\n            // Subscribe for items data changes and refresh items in view\r\n            totals.getItems().subscribe(function (items) {\r\n                this.setItems(items);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Set items to observable field\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        setItems: function (items) {\r\n            if (items && items.length > 0) {\r\n                items = items.slice(parseInt(-this.maxCartItemsToDisplay, 10));\r\n            }\r\n            this.items(items);\r\n        },\r\n\r\n        /**\r\n         * Returns bool value for items block state (expanded or not)\r\n         *\r\n         * @returns {*|Boolean}\r\n         */\r\n        isItemsBlockExpanded: function () {\r\n            return quote.isVirtual() || stepNavigator.isProcessed('shipping');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/grand-total'\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        },\r\n\r\n        /**\r\n         * Get pure value.\r\n         */\r\n        getPureValue: function () {\r\n            var totals = quote.getTotals()();\r\n\r\n            if (totals) {\r\n                return totals['grand_total'];\r\n            }\r\n\r\n            return quote['grand_total'];\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/view/summary/discount'\r\n], function ($, _, Component, quote, discountView) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/shipping'\r\n        },\r\n        quoteIsVirtual: quote.isVirtual(),\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod,\r\n                shippingMethodTitle = '';\r\n\r\n            if (!this.isCalculated()) {\r\n                return '';\r\n            }\r\n            shippingMethod = quote.shippingMethod();\r\n\r\n            if (!_.isArray(shippingMethod) && !_.isObject(shippingMethod)) {\r\n                return '';\r\n            }\r\n\r\n            if (typeof shippingMethod['method_title'] !== 'undefined') {\r\n                shippingMethodTitle = ' - ' + shippingMethod['method_title'];\r\n            }\r\n\r\n            return shippingMethodTitle ?\r\n                shippingMethod['carrier_title'] + shippingMethodTitle :\r\n                shippingMethod['carrier_title'];\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && quote.shippingMethod() != null; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price =  this.totals()['shipping_amount'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * If is set coupon code, but there wasn't displayed discount view.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        haveToShowCoupon: function () {\r\n            var couponCode = this.totals()['coupon_code'];\r\n\r\n            if (typeof couponCode === 'undefined') {\r\n                couponCode = false;\r\n            }\r\n\r\n            return couponCode && !discountView().isDisplayed();\r\n        },\r\n\r\n        /**\r\n         * Returns coupon code description.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getCouponDescription: function () {\r\n            if (!this.haveToShowCoupon()) {\r\n                return '';\r\n            }\r\n\r\n            return '(' + this.totals()['coupon_code'] + ')';\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/subtotal'\r\n        },\r\n\r\n        /**\r\n         * Get pure value.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getPureValue: function () {\r\n            var totals = quote.getTotals()();\r\n\r\n            if (totals) {\r\n                return totals.subtotal;\r\n            }\r\n\r\n            return quote.subtotal;\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'escaper'\r\n], function (Component, escaper) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details',\r\n            allowedTags: ['b', 'strong', 'i', 'em', 'u']\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {String}\r\n         */\r\n        getNameUnsanitizedHtml: function (quoteItem) {\r\n            var txt = document.createElement('textarea');\r\n\r\n            txt.innerHTML = quoteItem.name;\r\n\r\n            return escaper.escapeHtml(txt.value, this.allowedTags);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {String}Magento_Checkout/js/region-updater\r\n         */\r\n        getValue: function (quoteItem) {\r\n            return quoteItem.name;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiComponent'], function (Component) {\r\n    'use strict';\r\n\r\n    var quoteMessages = window.checkoutConfig.quoteMessages;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details/message'\r\n        },\r\n        displayArea: 'item_message',\r\n        quoteMessages: quoteMessages,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getMessage: function (item) {\r\n            if (this.quoteMessages[item['item_id']]) {\r\n                return this.quoteMessages[item['item_id']];\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total'\r\n], function (viewModel) {\r\n    'use strict';\r\n\r\n    return viewModel.extend({\r\n        defaults: {\r\n            displayArea: 'after_details',\r\n            template: 'Magento_Checkout/summary/item/details/subtotal'\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValue: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total']);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/thumbnail.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiComponent'], function (Component) {\r\n    'use strict';\r\n\r\n    var imageData = window.checkoutConfig.imageData;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details/thumbnail'\r\n        },\r\n        displayArea: 'before_details',\r\n        imageData: imageData,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {Array}\r\n         */\r\n        getImageItem: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']];\r\n            }\r\n\r\n            return [];\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getSrc: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].src;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getWidth: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].width;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getHeight: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].height;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getAlt: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].alt;\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreement-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/validation'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {},\r\n        agreementsInputPath = '.payment-method._active div.checkout-agreements input';\r\n\r\n    return {\r\n        /**\r\n         * Validate checkout agreements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function (hideError) {\r\n            var isValid = true;\r\n\r\n            if (!agreementsConfig.isEnabled || $(agreementsInputPath).length === 0) {\r\n                return true;\r\n            }\r\n\r\n            $(agreementsInputPath).each(function (index, element) {\r\n                if (!$.validator.validateSingleElement(element, {\r\n                    errorElement: 'div',\r\n                    hideError: hideError || false\r\n                })) {\r\n                    isValid = false;\r\n                }\r\n            });\r\n\r\n            return isValid;\r\n        }\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreements-assigner.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\r\n\r\n    /** Override default place order action and add agreement_ids to request */\r\n    return function (paymentData) {\r\n        var agreementForm,\r\n            agreementData,\r\n            agreementIds;\r\n\r\n        if (!agreementsConfig.isEnabled) {\r\n            return;\r\n        }\r\n\r\n        agreementForm = $('.payment-method._active div[data-role=checkout-agreements] input');\r\n        agreementData = agreementForm.serializeArray();\r\n        agreementIds = [];\r\n\r\n        agreementData.forEach(function (item) {\r\n            agreementIds.push(item.value);\r\n        });\r\n\r\n        if (paymentData['extension_attributes'] === undefined) {\r\n            paymentData['extension_attributes'] = {};\r\n        }\r\n\r\n        paymentData['extension_attributes']['agreement_ids'] = agreementIds;\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreements-modal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Create popUp window for provided element.\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        createModal: function (element) {\r\n            var options;\r\n\r\n            this.modalWindow = element;\r\n            options = {\r\n                'type': 'popup',\r\n                'modalClass': 'agreements-modal',\r\n                'responsive': true,\r\n                'innerScroll': true,\r\n                'trigger': '.show-modal',\r\n                'buttons': [\r\n                    {\r\n                        text: $t('Close'),\r\n                        class: 'action secondary action-hide-popup',\r\n\r\n                        /** @inheritdoc */\r\n                        click: function () {\r\n                            this.closeModal();\r\n                        }\r\n                    }\r\n                ]\r\n            };\r\n            modal(options, $(this.modalWindow));\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            $(this.modalWindow).modal('openModal');\r\n        }\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\r\n], function ($, wrapper, agreementsAssigner) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n\r\n        /** Override default place order action and add agreement_ids to request */\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\r\n            agreementsAssigner(paymentData);\r\n\r\n            return originalAction(paymentData, messageContainer);\r\n        });\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/set-payment-information-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\r\n], function ($, wrapper, agreementsAssigner) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n\r\n        /** Override place-order-mixin for set-payment-information action as they differs only by method signature */\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, messageContainer, paymentData) {\r\n            agreementsAssigner(paymentData);\r\n\r\n            return originalAction(messageContainer, paymentData);\r\n        });\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/view/agreement-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_CheckoutAgreements/js/model/agreement-validator'\r\n], function (Component, additionalValidators, agreementValidator) {\r\n    'use strict';\r\n\r\n    additionalValidators.registerValidator(agreementValidator);\r\n\r\n    return Component.extend({});\r\n});\r\n","Magento_CheckoutAgreements/js/view/checkout-agreements.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_CheckoutAgreements/js/model/agreements-modal'\r\n], function (ko, $, Component, agreementsModal) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        agreementManualMode = 1,\r\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_CheckoutAgreements/checkout/checkout-agreements'\r\n        },\r\n        isVisible: agreementsConfig.isEnabled,\r\n        agreements: agreementsConfig.agreements,\r\n        modalTitle: ko.observable(null),\r\n        modalContent: ko.observable(null),\r\n        contentHeight: ko.observable(null),\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Checks if agreement required\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        isAgreementRequired: function (element) {\r\n            return element.mode == agreementManualMode; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * Show agreement content in modal\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        showContent: function (element) {\r\n            this.modalTitle(element.checkboxText);\r\n            this.modalContent(element.content);\r\n            this.contentHeight(element.contentHeight ? element.contentHeight : 'auto');\r\n            agreementsModal.showModal();\r\n        },\r\n\r\n        /**\r\n         * build a unique id for the term checkbox\r\n         *\r\n         * @param {Object} context - the ko context\r\n         * @param {Number} agreementId\r\n         */\r\n        getCheckboxId: function (context, agreementId) {\r\n            var paymentMethodName = '',\r\n                paymentMethodRenderer = context.$parents[1];\r\n\r\n            // corresponding payment method fetched from parent context\r\n            if (paymentMethodRenderer) {\r\n                // item looks like this: {title: \"Check / Money order\", method: \"checkmo\"}\r\n                paymentMethodName = paymentMethodRenderer.item ?\r\n                  paymentMethodRenderer.item.method : '';\r\n            }\r\n\r\n            return 'agreement_' + paymentMethodName + '_' + agreementId;\r\n        },\r\n\r\n        /**\r\n         * Init modal window for rendered element\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        initModal: function (element) {\r\n            agreementsModal.createModal(element);\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/catalog-add-to-cart-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/product/view/product-info-resolver'\r\n], function (_, $, productInfoResolver) {\r\n    'use strict';\r\n\r\n    return function (widget) {\r\n\r\n        $.widget('mage.catalogAddToCart', widget, {\r\n            /**\r\n             * @param {jQuery} form\r\n             */\r\n            ajaxSubmit: function (form) {\r\n                var isConfigurable = !!_.find(form.serializeArray(), function (item) {\r\n                    return item.name.indexOf('super_attribute') !== -1;\r\n                });\r\n\r\n                if (isConfigurable) {\r\n                    this.options.productInfoResolver = productInfoResolver;\r\n                }\r\n\r\n                return this._super(form);\r\n            }\r\n        });\r\n\r\n        return $.mage.catalogAddToCart;\r\n    };\r\n});\r\n","Magento_ConfigurableProduct/js/catalog-add-to-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Add selected configurable attributes to redirect url\r\n     *\r\n     * @see Magento_Catalog/js/catalog-add-to-cart\r\n     */\r\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\r\n        $(data.form).find('select[name*=\"super\"]').each(function (index, item) {\r\n            data.redirectParameters.push(item.config.id + '=' + $(item).val());\r\n        });\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/configurable-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/options-updater'\r\n], function ($, Updater) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n            formSelector: '#product_addtocart_form'\r\n        },\r\n        configurableWidgetName = 'mageConfigurable',\r\n        widgetInitEvent = 'configurable.initialized',\r\n\r\n    /**\r\n    * Sets all configurable attribute's selected values\r\n    */\r\n    updateConfigurableOptions = function () {\r\n        var configurableWidget = $(selectors.formSelector).data(configurableWidgetName);\r\n\r\n        if (!configurableWidget) {\r\n            return;\r\n        }\r\n        configurableWidget.options.values = this.productOptions || {};\r\n        configurableWidget._configureForValues();\r\n    },\r\n    updater = new Updater(widgetInitEvent, updateConfigurableOptions);\r\n\r\n    updater.listen();\r\n});\r\n","Magento_ConfigurableProduct/js/configurable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'priceUtils',\r\n    'priceBox',\r\n    'jquery-ui-modules/widget',\r\n    'jquery/jquery.parsequery',\r\n    'fotoramaVideoEvents'\r\n], function ($, _, mageTemplate, $t, priceUtils) {\r\n    'use strict';\r\n\r\n    $.widget('mage.configurable', {\r\n        options: {\r\n            superSelector: '.super-attribute-select',\r\n            selectSimpleProduct: '[name=\"selected_configurable_option\"]',\r\n            priceHolderSelector: '.price-box',\r\n            spConfig: {},\r\n            state: {},\r\n            priceFormat: {},\r\n            optionTemplate: '<%- data.label %>' +\r\n            '<% if (typeof data.finalPrice.value !== \"undefined\") { %>' +\r\n            ' <%- data.finalPrice.formatted %>' +\r\n            '<% } %>',\r\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\r\n            mediaGalleryInitial: null,\r\n            slyOldPriceSelector: '.sly-old-price',\r\n            normalPriceLabelSelector: '.product-info-main .normal-price .price-label',\r\n\r\n            /**\r\n             * Defines the mechanism of how images of a gallery should be\r\n             * updated when user switches between configurations of a product.\r\n             *\r\n             * As for now value of this option can be either 'replace' or 'prepend'.\r\n             *\r\n             * @type {String}\r\n             */\r\n            gallerySwitchStrategy: 'replace',\r\n            tierPriceTemplateSelector: '#tier-prices-template',\r\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\r\n            tierPriceTemplate: '',\r\n            selectorProduct: '.product-info-main',\r\n            selectorProductPrice: '[data-role=priceBox]',\r\n            qtyInfo: '#qty'\r\n        },\r\n\r\n        /**\r\n         * Creates widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            // Initial setting of various option values\r\n            this._initializeOptions();\r\n\r\n            // Override defaults with URL query parameters and/or inputs values\r\n            this._overrideDefaults();\r\n\r\n            // Change events to check select reloads\r\n            this._setupChangeEvents();\r\n\r\n            // Fill state\r\n            this._fillState();\r\n\r\n            // Setup child and prev/next settings\r\n            this._setChildSettings();\r\n\r\n            // Setup/configure values to inputs\r\n            this._configureForValues();\r\n\r\n            $(this.element).trigger('configurable.initialized');\r\n            $(this.options.qtyInfo).on('input', this._reloadPrice.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Initialize tax configuration, initial settings, and options values.\r\n         * @private\r\n         */\r\n        _initializeOptions: function () {\r\n            var options = this.options,\r\n                gallery = $(options.mediaGallerySelector),\r\n                priceBoxOptions = $(this.options.priceHolderSelector).priceBox('option').priceConfig || null;\r\n\r\n            if (priceBoxOptions && priceBoxOptions.optionTemplate) {\r\n                options.optionTemplate = priceBoxOptions.optionTemplate;\r\n            }\r\n\r\n            if (priceBoxOptions && priceBoxOptions.priceFormat) {\r\n                options.priceFormat = priceBoxOptions.priceFormat;\r\n            }\r\n            options.optionTemplate = mageTemplate(options.optionTemplate);\r\n            options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\r\n\r\n            options.settings = options.spConfig.containerId ?\r\n                $(options.spConfig.containerId).find(options.superSelector) :\r\n                $(options.superSelector);\r\n\r\n            options.values = options.spConfig.defaultValues || {};\r\n            options.parentImage = $('[data-role=base-image-container] img').attr('src');\r\n\r\n            this.inputSimpleProduct = this.element.find(options.selectSimpleProduct);\r\n\r\n            gallery.data('gallery') ?\r\n                this._onGalleryLoaded(gallery) :\r\n                gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\r\n\r\n        },\r\n\r\n        /**\r\n         * Override default options values settings with either URL query parameters or\r\n         * initialized inputs values.\r\n         * @private\r\n         */\r\n        _overrideDefaults: function () {\r\n            var hashIndex = window.location.href.indexOf('#');\r\n\r\n            if (hashIndex !== -1) {\r\n                this._parseQueryParams(window.location.href.substr(hashIndex + 1));\r\n            }\r\n\r\n            if (this.options.spConfig.inputsInitialized) {\r\n                this._setValuesByAttribute();\r\n            }\r\n\r\n            this._setInitialOptionsLabels();\r\n        },\r\n\r\n        /**\r\n         * Parse query parameters from a query string and set options values based on the\r\n         * key value pairs of the parameters.\r\n         * @param {*} queryString - URL query string containing query parameters.\r\n         * @private\r\n         */\r\n        _parseQueryParams: function (queryString) {\r\n            var queryParams = $.parseQuery({\r\n                query: queryString\r\n            });\r\n\r\n            $.each(queryParams, $.proxy(function (key, value) {\r\n                if (this.options.spConfig.attributes[key] !== undefined &&\r\n                    _.find(this.options.spConfig.attributes[key].options, function (element) {\r\n                        return element.id === value;\r\n                    })) {\r\n                    this.options.values[key] = value;\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Override default options values with values based on each element's attribute\r\n         * identifier.\r\n         * @private\r\n         */\r\n        _setValuesByAttribute: function () {\r\n            this.options.values = {};\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                var attributeId;\r\n\r\n                if (element.value) {\r\n                    attributeId = element.id.replace(/[a-z]*/, '');\r\n\r\n                    if (this.options.spConfig.attributes[attributeId] !== undefined &&\r\n                        _.find(this.options.spConfig.attributes[attributeId].options, function (optionElement) {\r\n                            return optionElement.id === element.value;\r\n                        })) {\r\n                        this.options.values[attributeId] = element.value;\r\n                    }\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set additional field with initial label to be used when switching between options with different prices.\r\n         * @private\r\n         */\r\n        _setInitialOptionsLabels: function () {\r\n            $.each(this.options.spConfig.attributes, $.proxy(function (index, element) {\r\n                $.each(element.options, $.proxy(function (optIndex, optElement) {\r\n                    this.options.spConfig.attributes[index].options[optIndex].initialLabel = optElement.label;\r\n                }, this));\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set up .on('change') events for each option element to configure the option.\r\n         * @private\r\n         */\r\n        _setupChangeEvents: function () {\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                $(element).on('change', this, this._configure);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Iterate through the option settings and set each option's element configuration,\r\n         * attribute identifier. Set the state based on the attribute identifier.\r\n         * @private\r\n         */\r\n        _fillState: function () {\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                var attributeId = element.id.replace(/[a-z]*/, '');\r\n\r\n                if (attributeId && this.options.spConfig.attributes[attributeId]) {\r\n                    element.config = this.options.spConfig.attributes[attributeId];\r\n                    element.attributeId = attributeId;\r\n                    this.options.state[attributeId] = false;\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set each option's child settings, and next/prev option setting. Fill (initialize)\r\n         * an option's list of selections as needed or disable an option's setting.\r\n         * @private\r\n         */\r\n        _setChildSettings: function () {\r\n            var childSettings = [],\r\n                settings = this.options.settings,\r\n                index = settings.length,\r\n                option;\r\n\r\n            while (index--) {\r\n                option = settings[index];\r\n\r\n                if (index) {\r\n                    option.disabled = true;\r\n                } else {\r\n                    this._fillSelect(option);\r\n                }\r\n\r\n                _.extend(option, {\r\n                    childSettings: childSettings.slice(),\r\n                    prevSetting: settings[index - 1],\r\n                    nextSetting: settings[index + 1]\r\n                });\r\n\r\n                childSettings.push(option);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Setup for all configurable option settings. Set the value of the option and configure\r\n         * the option, which sets its state, and initializes the option's choices, etc.\r\n         * @private\r\n         */\r\n        _configureForValues: function () {\r\n            if (this.options.values) {\r\n                this.options.settings.each($.proxy(function (index, element) {\r\n                    var attributeId = element.attributeId;\r\n\r\n                    element.value = this.options.values[attributeId] || '';\r\n                    this._configureElement(element);\r\n                }, this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Event handler for configuring an option.\r\n         * @private\r\n         * @param {Object} event - Event triggered to configure an option.\r\n         */\r\n        _configure: function (event) {\r\n            event.data._configureElement(this);\r\n        },\r\n\r\n        /**\r\n         * Configure an option, initializing it's state and enabling related options, which\r\n         * populates the related option's selection and resets child option selections.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _configureElement: function (element) {\r\n            this.simpleProduct = this._getSimpleProductId(element);\r\n\r\n            if (element.value) {\r\n                this.options.state[element.config.id] = element.value;\r\n\r\n                if (element.nextSetting) {\r\n                    element.nextSetting.disabled = false;\r\n                    this._fillSelect(element.nextSetting);\r\n                    this._resetChildren(element.nextSetting);\r\n                } else {\r\n                    if (!!document.documentMode) { //eslint-disable-line\r\n                        this.inputSimpleProduct.val(element.options[element.selectedIndex].config.allowedProducts[0]);\r\n                    } else {\r\n                        this.inputSimpleProduct.val(element.selectedOptions[0].config.allowedProducts[0]);\r\n                    }\r\n                }\r\n            } else {\r\n                this._resetChildren(element);\r\n            }\r\n\r\n            this._reloadPrice();\r\n            this._displayRegularPriceBlock(this.simpleProduct);\r\n            this._displayTierPriceBlock(this.simpleProduct);\r\n            this._displayNormalPriceLabel();\r\n            this._changeProductImage();\r\n        },\r\n\r\n        /**\r\n         * Change displayed product image according to chosen options of configurable product\r\n         *\r\n         * @private\r\n         */\r\n        _changeProductImage: function () {\r\n            var images,\r\n                initialImages = this.options.mediaGalleryInitial,\r\n                gallery = $(this.options.mediaGallerySelector).data('gallery');\r\n\r\n            if (_.isUndefined(gallery)) {\r\n                $(this.options.mediaGallerySelector).on('gallery:loaded', function () {\r\n                    this._changeProductImage();\r\n                }.bind(this));\r\n\r\n                return;\r\n            }\r\n\r\n            images = this.options.spConfig.images[this.simpleProduct];\r\n\r\n            if (images) {\r\n                images = this._sortImages(images);\r\n\r\n                if (this.options.gallerySwitchStrategy === 'prepend') {\r\n                    images = images.concat(initialImages);\r\n                }\r\n\r\n                images = $.extend(true, [], images);\r\n                images = this._setImageIndex(images);\r\n\r\n                gallery.updateData(images);\r\n                this._addFotoramaVideoEvents(false);\r\n            } else {\r\n                gallery.updateData(initialImages);\r\n                this._addFotoramaVideoEvents(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add video events\r\n         *\r\n         * @param {Boolean} isInitial\r\n         * @private\r\n         */\r\n        _addFotoramaVideoEvents: function (isInitial) {\r\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\r\n                return;\r\n            }\r\n\r\n            if (isInitial) {\r\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\r\n\r\n                return;\r\n            }\r\n\r\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\r\n                selectedOption: this.simpleProduct,\r\n                dataMergeStrategy: this.options.gallerySwitchStrategy\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sorting images array\r\n         *\r\n         * @private\r\n         */\r\n        _sortImages: function (images) {\r\n            return _.sortBy(images, function (image) {\r\n                return image.position;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set correct indexes for image set.\r\n         *\r\n         * @param {Array} images\r\n         * @private\r\n         */\r\n        _setImageIndex: function (images) {\r\n            var length = images.length,\r\n                i;\r\n\r\n            for (i = 0; length > i; i++) {\r\n                images[i].i = i + 1;\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * For a given option element, reset all of its selectable options. Clear any selected\r\n         * index, disable the option choice, and reset the option's state if necessary.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _resetChildren: function (element) {\r\n            if (element.childSettings) {\r\n                _.each(element.childSettings, function (set) {\r\n                    set.selectedIndex = 0;\r\n                    set.disabled = true;\r\n                });\r\n\r\n                if (element.config) {\r\n                    this.options.state[element.config.id] = false;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Populates an option's selectable choices.\r\n         * @private\r\n         * @param {*} element - Element associated with a configurable option.\r\n         */\r\n        _fillSelect: function (element) {\r\n            var attributeId = element.id.replace(/[a-z]*/, ''),\r\n                options = this._getAttributeOptions(attributeId),\r\n                prevConfig,\r\n                index = 1,\r\n                allowedProducts,\r\n                allowedProductsByOption,\r\n                allowedProductsAll,\r\n                i,\r\n                j,\r\n                finalPrice = parseFloat(this.options.spConfig.prices.finalPrice.amount),\r\n                optionFinalPrice,\r\n                optionPriceDiff,\r\n                optionPrices = this.options.spConfig.optionPrices,\r\n                allowedOptions = [],\r\n                indexKey,\r\n                allowedProductMinPrice,\r\n                allowedProductsAllMinPrice,\r\n                canDisplayOutOfStockProducts = false,\r\n                filteredSalableProducts;\r\n\r\n            this._clearSelect(element);\r\n            element.options[0] = new Option('', '');\r\n            element.options[0].innerHTML = this.options.spConfig.chooseText;\r\n            prevConfig = false;\r\n\r\n            if (element.prevSetting) {\r\n                prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];\r\n            }\r\n\r\n            if (options) {\r\n                for (indexKey in this.options.spConfig.index) {\r\n                    /* eslint-disable max-depth */\r\n                    if (this.options.spConfig.index.hasOwnProperty(indexKey)) {\r\n                        allowedOptions = allowedOptions.concat(_.values(this.options.spConfig.index[indexKey]));\r\n                    }\r\n                }\r\n\r\n                if (prevConfig) {\r\n                    allowedProductsByOption = {};\r\n                    allowedProductsAll = [];\r\n\r\n                    for (i = 0; i < options.length; i++) {\r\n                        /* eslint-disable max-depth */\r\n                        for (j = 0; j < options[i].products.length; j++) {\r\n                            // prevConfig.config can be undefined\r\n                            if (prevConfig.config &&\r\n                                prevConfig.config.allowedProducts &&\r\n                                prevConfig.config.allowedProducts.indexOf(options[i].products[j]) > -1) {\r\n                                if (!allowedProductsByOption[i]) {\r\n                                    allowedProductsByOption[i] = [];\r\n                                }\r\n                                allowedProductsByOption[i].push(options[i].products[j]);\r\n                                allowedProductsAll.push(options[i].products[j]);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (typeof allowedProductsAll[0] !== 'undefined' &&\r\n                        typeof optionPrices[allowedProductsAll[0]] !== 'undefined') {\r\n                        allowedProductsAllMinPrice = this._getAllowedProductWithMinPrice(allowedProductsAll);\r\n                        finalPrice = parseFloat(optionPrices[allowedProductsAllMinPrice].finalPrice.amount);\r\n                    }\r\n                }\r\n\r\n                for (i = 0; i < options.length; i++) {\r\n                    if (prevConfig && typeof allowedProductsByOption[i] === 'undefined') {\r\n                        continue; //jscs:ignore disallowKeywords\r\n                    }\r\n\r\n                    allowedProducts = prevConfig ? allowedProductsByOption[i] : options[i].products.slice(0);\r\n                    optionPriceDiff = 0;\r\n\r\n                    if (typeof allowedProducts[0] !== 'undefined' &&\r\n                        typeof optionPrices[allowedProducts[0]] !== 'undefined') {\r\n                        allowedProductMinPrice = this._getAllowedProductWithMinPrice(allowedProducts);\r\n                        optionFinalPrice = parseFloat(optionPrices[allowedProductMinPrice].finalPrice.amount);\r\n                        optionPriceDiff = optionFinalPrice - finalPrice;\r\n                        options[i].label = options[i].initialLabel;\r\n\r\n                        if (optionPriceDiff !== 0) {\r\n                            options[i].label += ' ' + priceUtils.formatPriceLocale(\r\n                                optionPriceDiff,\r\n                                this.options.priceFormat,\r\n                                true\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    if (allowedProducts.length > 0 || _.include(allowedOptions, options[i].id)) {\r\n                        options[i].allowedProducts = allowedProducts;\r\n                        element.options[index] = new Option(this._getOptionLabel(options[i]), options[i].id);\r\n\r\n                        if (this.options.spConfig.canDisplayShowOutOfStockStatus) {\r\n                            filteredSalableProducts = $(this.options.spConfig.salable[attributeId][options[i].id]).\r\n                            filter(options[i].allowedProducts);\r\n                            canDisplayOutOfStockProducts = filteredSalableProducts.length === 0;\r\n                        }\r\n\r\n                        if (typeof options[i].price !== 'undefined') {\r\n                            element.options[index].setAttribute('price', options[i].price);\r\n                        }\r\n\r\n                        if (allowedProducts.length === 0 || canDisplayOutOfStockProducts) {\r\n                            element.options[index].disabled = true;\r\n                        }\r\n\r\n                        element.options[index].config = options[i];\r\n                        index++;\r\n                    }\r\n\r\n                    /* eslint-enable max-depth */\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Generate the label associated with a configurable option. This includes the option's\r\n         * label or value and the option's price.\r\n         * @private\r\n         * @param {*} option - A single choice among a group of choices for a configurable option.\r\n         * @return {String} The option label with option value and price (e.g. Black +1.99)\r\n         */\r\n        _getOptionLabel: function (option) {\r\n            return option.label;\r\n        },\r\n\r\n        /**\r\n         * Removes an option's selections.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _clearSelect: function (element) {\r\n            var i;\r\n\r\n            for (i = element.options.length - 1; i >= 0; i--) {\r\n                element.remove(i);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Retrieve the attribute options associated with a specific attribute Id.\r\n         * @private\r\n         * @param {Number} attributeId - The id of the attribute whose configurable options are sought.\r\n         * @return {Object} Object containing the attribute options.\r\n         */\r\n        _getAttributeOptions: function (attributeId) {\r\n            if (this.options.spConfig.attributes[attributeId]) {\r\n                return this.options.spConfig.attributes[attributeId].options;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reload the price of the configurable product incorporating the prices of all of the\r\n         * configurable product's option selections.\r\n         */\r\n        _reloadPrice: function () {\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', this._getPrices());\r\n        },\r\n\r\n        /**\r\n         * Get product various prices\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _getPrices: function () {\r\n            var prices = {},\r\n                elements = _.toArray(this.options.settings),\r\n                allowedProduct;\r\n\r\n            _.each(elements, function (element) {\r\n                var selected = element.options[element.selectedIndex],\r\n                    config = selected && selected.config,\r\n                    priceValue = this._calculatePrice({});\r\n\r\n                if (config && config.allowedProducts.length === 1) {\r\n                    priceValue = this._calculatePrice(config);\r\n                } else if (element.value) {\r\n                    allowedProduct = this._getAllowedProductWithMinPrice(config.allowedProducts);\r\n                    priceValue = this._calculatePrice({\r\n                        'allowedProducts': [\r\n                            allowedProduct\r\n                        ]\r\n                    });\r\n                }\r\n\r\n                if (!_.isEmpty(priceValue)) {\r\n                    prices.prices = priceValue;\r\n                }\r\n            }, this);\r\n\r\n            return prices;\r\n        },\r\n\r\n        /**\r\n         * Get product with minimum price from selected options.\r\n         *\r\n         * @param {Array} allowedProducts\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\r\n            var optionPrices = this.options.spConfig.optionPrices,\r\n                product = {},\r\n                optionMinPrice, optionFinalPrice;\r\n\r\n            _.each(allowedProducts, function (allowedProduct) {\r\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\r\n\r\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\r\n                    optionMinPrice = optionFinalPrice;\r\n                    product = allowedProduct;\r\n                }\r\n            }, this);\r\n\r\n            return product;\r\n        },\r\n\r\n        /**\r\n         * Returns prices for configured products\r\n         *\r\n         * @param {*} config - Products configuration\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _calculatePrice: function (config) {\r\n            var displayPrices = $(this.options.priceHolderSelector).priceBox('option').prices,\r\n                newPrices = this.options.spConfig.optionPrices[_.first(config.allowedProducts)] || {};\r\n\r\n            _.each(displayPrices, function (price, code) {\r\n                displayPrices[code].amount = newPrices[code] ? newPrices[code].amount - displayPrices[code].amount : 0;\r\n            });\r\n\r\n            return displayPrices;\r\n        },\r\n\r\n        /**\r\n         * Returns Simple product Id\r\n         *  depending on current selected option.\r\n         *\r\n         * @private\r\n         * @param {HTMLElement} element\r\n         * @returns {String|undefined}\r\n         */\r\n        _getSimpleProductId: function (element) {\r\n            // TODO: Rewrite algorithm. It should return ID of\r\n            //        simple product based on selected options.\r\n            var allOptions = element.config.options,\r\n                value = element.value,\r\n                config;\r\n\r\n            config = _.filter(allOptions, function (option) {\r\n                return option.id === value;\r\n            });\r\n            config = _.first(config);\r\n\r\n            return _.isEmpty(config) ?\r\n                undefined :\r\n                _.first(config.allowedProducts);\r\n\r\n        },\r\n\r\n        /**\r\n         * Show or hide regular price block\r\n         *\r\n         * @param {*} optionId\r\n         * @private\r\n         */\r\n        _displayRegularPriceBlock: function (optionId) {\r\n            var shouldBeShown = true,\r\n                $priceBox = this.element.parents(this.options.selectorProduct)\r\n                    .find(this.options.selectorProductPrice);\r\n\r\n            _.each(this.options.settings, function (element) {\r\n                if (element.value === '') {\r\n                    shouldBeShown = false;\r\n                }\r\n            });\r\n\r\n            if (shouldBeShown &&\r\n                this.options.spConfig.optionPrices[optionId].oldPrice.amount !==\r\n                this.options.spConfig.optionPrices[optionId].finalPrice.amount\r\n            ) {\r\n                $(this.options.slyOldPriceSelector).show();\r\n            } else {\r\n                $(this.options.slyOldPriceSelector).hide();\r\n            }\r\n\r\n            $(document).trigger('updateMsrpPriceBlock',\r\n                [\r\n                    optionId,\r\n                    this.options.spConfig.optionPrices,\r\n                    $priceBox\r\n                ]\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Show or hide normal price label\r\n         *\r\n         * @private\r\n         */\r\n        _displayNormalPriceLabel: function () {\r\n            var shouldBeShown = false;\r\n\r\n            _.each(this.options.settings, function (element) {\r\n                if (element.value === '') {\r\n                    shouldBeShown = true;\r\n                }\r\n            });\r\n\r\n            if (shouldBeShown) {\r\n                $(this.options.normalPriceLabelSelector).show();\r\n            } else {\r\n                $(this.options.normalPriceLabelSelector).hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         *\r\n         * @param {HTMLElement} element - DOM element associated with gallery.\r\n         */\r\n        _onGalleryLoaded: function (element) {\r\n            var galleryObject = element.data('gallery');\r\n\r\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\r\n        },\r\n\r\n        /**\r\n         * Show or hide tier price block\r\n         *\r\n         * @param {*} optionId\r\n         * @private\r\n         */\r\n        _displayTierPriceBlock: function (optionId) {\r\n            var tierPrices = typeof optionId != 'undefined' && this.options.spConfig.optionPrices[optionId].tierPrices;\r\n\r\n            if (_.isArray(tierPrices) && tierPrices.length > 0) {\r\n\r\n                if (this.options.tierPriceTemplate) {\r\n                    $(this.options.tierPriceBlockSelector).html(\r\n                        mageTemplate(this.options.tierPriceTemplate, {\r\n                            'tierPrices': tierPrices,\r\n                            '$t': $t,\r\n                            'currencyFormat': this.options.spConfig.currencyFormat,\r\n                            'priceUtils': priceUtils\r\n                        })\r\n                    ).show();\r\n                }\r\n            } else {\r\n                $(this.options.tierPriceBlockSelector).hide();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.configurable;\r\n});\r\n","Magento_ConfigurableProduct/js/options-updater.js":"define([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data',\r\n    'domReady!'\r\n], function ($, _, customerData) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n        formSelector: '#product_addtocart_form',\r\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\r\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\r\n    },\r\n    cartData = customerData.get('cart'),\r\n    productId = $(selectors.productIdSelector).val(),\r\n    itemId = $(selectors.itemIdSelector).val(),\r\n\r\n    /**\r\n    * set productOptions according to cart data from customer-data\r\n    *\r\n    * @param {Object} data - cart data from customer-data\r\n    * @returns {Boolean} - whether the new options differ from previous\r\n    */\r\n    setProductOptions = function (data) {\r\n        var changedProductOptions;\r\n\r\n        if (!(data && data.items && data.items.length && productId)) {\r\n            return false;\r\n        }\r\n        changedProductOptions = _.find(data.items, function (item) {\r\n            if (item['item_id'] === itemId) {\r\n                return item['product_id'] === productId;\r\n            }\r\n        });\r\n        changedProductOptions = changedProductOptions && changedProductOptions.options &&\r\n            changedProductOptions.options.reduce(function (obj, val) {\r\n                obj[val['option_id']] = val['option_value'];\r\n\r\n                return obj;\r\n            }, {});\r\n\r\n        if (JSON.stringify(this.productOptions || {}) === JSON.stringify(changedProductOptions || {})) {\r\n            return false;\r\n        }\r\n\r\n        this.productOptions = changedProductOptions;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n    * Listens to update of cart data or options initialization and update selected option according to customer data\r\n    *\r\n    */\r\n    listen = function () {\r\n        cartData.subscribe(function (updateCartData) {\r\n            if (this.setProductOptions(updateCartData)) {\r\n                this.updateOptions();\r\n            }\r\n        }.bind(this));\r\n        $(selectors.formSelector).on(this.eventName, function () {\r\n            this.setProductOptions(cartData());\r\n            this.updateOptions();\r\n        }.bind(this));\r\n    },\r\n\r\n    /**\r\n    * Updater constructor function\r\n    *\r\n    */\r\n    Updater = function (eventName, updateOptionsCallback) {\r\n        if (this instanceof Updater) {\r\n            this.eventName = eventName;\r\n            this.updateOptions = updateOptionsCallback;\r\n            this.productOptions = {};\r\n        }\r\n    };\r\n\r\n    Updater.prototype.setProductOptions = setProductOptions;\r\n    Updater.prototype.listen = listen;\r\n\r\n    return Updater;\r\n});\r\n","Magento_ConfigurableProduct/js/product/view/product-info-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function (_, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns info about configurable products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var optionValues = [],\r\n            product = _.findWhere($form.serializeArray(), {\r\n                name: 'product'\r\n            }),\r\n            productId;\r\n\r\n        if (!_.isUndefined(product)) {\r\n            productId = product.value;\r\n            _.each($form.serializeArray(), function (item) {\r\n                if (item.name.indexOf('super_attribute') !== -1) {\r\n                    optionValues.push(item.value);\r\n                }\r\n            });\r\n            optionValues.sort();\r\n            productInfo().push(\r\n                {\r\n                    'id': productId,\r\n                    'optionValues': optionValues\r\n                }\r\n            );\r\n        }\r\n\r\n        return _.uniq(productInfo(), function (item) {\r\n            var optionValuesStr = item.optionValues ? item.optionValues.join() : '';\r\n\r\n            return item.id + optionValuesStr;\r\n        });\r\n    };\r\n});\r\n\r\n","Magento_Cookie/js/notices.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.cookieNotices', {\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            if ($.mage.cookies.get(this.options.cookieName)) {\r\n                this.element.hide();\r\n            } else {\r\n                this.element.show();\r\n            }\r\n            $(this.options.cookieAllowButtonSelector).on('click', $.proxy(function () {\r\n                var cookieExpires = new Date(new Date().getTime() + this.options.cookieLifetime * 1000);\r\n\r\n                $.mage.cookies.set(this.options.cookieName, JSON.stringify(this.options.cookieValue), {\r\n                    expires: cookieExpires\r\n                });\r\n\r\n                if ($.mage.cookies.get(this.options.cookieName)) {\r\n                    this.element.hide();\r\n                    $(document).trigger('user:allowed:save:cookie');\r\n                } else {\r\n                    window.location.href = this.options.noCookiesUrl;\r\n                }\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.cookieNotices;\r\n});\r\n","Magento_Cookie/js/require-cookie.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/mage',\r\n    'mage/translate'\r\n], function ($, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.requireCookie', {\r\n        options: {\r\n            event: 'click',\r\n            noCookieUrl: 'enable-cookies',\r\n            triggers: ['.action.login', '.action.submit'],\r\n            isRedirectCmsPage: true\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * This method binds elements found in this widget.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {};\r\n\r\n            $.each(this.options.triggers, function (index, value) {\r\n                events['click ' + value] = '_checkCookie';\r\n            });\r\n            this._on(events);\r\n        },\r\n\r\n        /**\r\n         * This method set the url for the redirect.\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _checkCookie: function (event) {\r\n            if (navigator.cookieEnabled) {\r\n                return;\r\n            }\r\n\r\n            event.preventDefault();\r\n\r\n            if (this.options.isRedirectCmsPage) {\r\n                window.location = this.options.noCookieUrl;\r\n            } else {\r\n                alert({\r\n                    content: $.mage.__('Cookies are disabled in your browser.')\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.requireCookie;\r\n});\r\n","Magento_Customer/js/address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    $.widget('mage.address', {\r\n        /**\r\n         * Options common to all instances of this widget.\r\n         * @type {Object}\r\n         */\r\n        options: {\r\n            deleteConfirmMessage: $.mage.__('Are you sure you want to delete this address?')\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers for adding and deleting addresses.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var options         = this.options,\r\n                addAddress      = options.addAddress,\r\n                deleteAddress   = options.deleteAddress;\r\n\r\n            if (addAddress) {\r\n                $(document).on('click', addAddress, this._addAddress.bind(this));\r\n            }\r\n\r\n            if (deleteAddress) {\r\n                $(document).on('click', deleteAddress, this._deleteAddress.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add a new address.\r\n         * @private\r\n         */\r\n        _addAddress: function () {\r\n            window.location = this.options.addAddressLocation;\r\n        },\r\n\r\n        /**\r\n         * Delete the address whose id is specified in a data attribute after confirmation from the user.\r\n         * @private\r\n         * @param {jQuery.Event} e\r\n         * @return {Boolean}\r\n         */\r\n        _deleteAddress: function (e) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.options.deleteConfirmMessage,\r\n                actions: {\r\n\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        if (typeof $(e.target).parent().data('address') !== 'undefined') {\r\n                            window.location = self.options.deleteUrlPrefix + $(e.target).parent().data('address') +\r\n                                '/form_key/' + $.mage.cookies.get('form_key');\r\n                        } else {\r\n                            window.location = self.options.deleteUrlPrefix + $(e.target).data('address') +\r\n                                '/form_key/' + $.mage.cookies.get('form_key');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\n    return $.mage.address;\r\n});\r\n","Magento_Customer/js/addressValidation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/postcode-validator',\r\n    'jquery-ui-modules/widget',\r\n    'validation'\r\n], function ($, __, utils, $t, postCodeValidator) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addressValidation', {\r\n        options: {\r\n            selectors: {\r\n                button: '[data-action=save-address]',\r\n                zip: '#zip',\r\n                country: 'select[name=\"country_id\"]:visible'\r\n            }\r\n        },\r\n\r\n        zipInput: null,\r\n        countrySelect: null,\r\n\r\n        /**\r\n         * Validation creation\r\n         *\r\n         * @protected\r\n         */\r\n        _create: function () {\r\n            var button = $(this.options.selectors.button, this.element);\r\n\r\n            this.zipInput = $(this.options.selectors.zip, this.element);\r\n            this.countrySelect = $(this.options.selectors.country, this.element);\r\n\r\n            this.element.validation({\r\n\r\n                /**\r\n                 * Submit Handler\r\n                 * @param {Element} form - address form\r\n                 */\r\n                submitHandler: function (form) {\r\n\r\n                    button.attr('disabled', true);\r\n                    form.submit();\r\n                }\r\n            });\r\n\r\n            this._addPostCodeValidation();\r\n        },\r\n\r\n        /**\r\n         * Add postcode validation\r\n         *\r\n         * @protected\r\n         */\r\n        _addPostCodeValidation: function () {\r\n            var self = this;\r\n\r\n            this.zipInput.on('keyup', __.debounce(function (event) {\r\n                    var valid = self._validatePostCode(event.target.value);\r\n\r\n                    self._renderValidationResult(valid);\r\n                }, 500)\r\n            );\r\n\r\n            this.countrySelect.on('change', function () {\r\n                var valid = self._validatePostCode(self.zipInput.val());\r\n\r\n                self._renderValidationResult(valid);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate post code value.\r\n         *\r\n         * @protected\r\n         * @param {String} postCode - post code\r\n         * @return {Boolean} Whether is post code valid\r\n         */\r\n        _validatePostCode: function (postCode) {\r\n            var countryId = this.countrySelect.val();\r\n\r\n            if (postCode === null) {\r\n                return true;\r\n            }\r\n\r\n            return postCodeValidator.validate(postCode, countryId, this.options.postCodes);\r\n        },\r\n\r\n        /**\r\n         * Renders warning messages for invalid post code.\r\n         *\r\n         * @protected\r\n         * @param {Boolean} valid\r\n         */\r\n        _renderValidationResult: function (valid) {\r\n            var warnMessage,\r\n                alertDiv = this.zipInput.next();\r\n\r\n            if (!valid) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postCodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postCodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n            }\r\n\r\n            alertDiv.children(':first').text(warnMessage);\r\n\r\n            if (valid) {\r\n                alertDiv.hide();\r\n            } else {\r\n                alertDiv.show();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.addressValidation;\r\n});\r\n","Magento_Customer/js/block-submit-on-send.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var dataForm = $('#' + config.formId);\r\n\r\n        dataForm.on('submit', function () {\r\n            $(this).find(':submit').attr('disabled', 'disabled');\r\n\r\n            if (this.isValid === false) {\r\n                $(this).find(':submit').prop('disabled', false);\r\n            }\r\n            this.isValid = true;\r\n        });\r\n        dataForm.on('invalid-form.validate', function () {\r\n            $(this).find(':submit').prop('disabled', false);\r\n            this.isValid = false;\r\n        });\r\n    };\r\n});\r\n","Magento_Customer/js/change-email-password.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.changeEmailPassword', {\r\n        options: {\r\n            changeEmailSelector: '[data-role=change-email]',\r\n            changePasswordSelector: '[data-role=change-password]',\r\n            mainContainerSelector: '[data-container=change-email-password]',\r\n            titleSelector: '[data-title=change-email-password]',\r\n            emailContainerSelector: '[data-container=change-email]',\r\n            newPasswordContainerSelector: '[data-container=new-password]',\r\n            confirmPasswordContainerSelector: '[data-container=confirm-password]',\r\n            currentPasswordSelector: '[data-input=current-password]',\r\n            emailSelector: '[data-input=change-email]',\r\n            newPasswordSelector: '[data-input=new-password]',\r\n            confirmPasswordSelector: '[data-input=confirm-password]'\r\n        },\r\n\r\n        /**\r\n         * Create widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(function () {\r\n                this._checkChoice();\r\n            }, this));\r\n\r\n            this._checkChoice();\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Event binding, will monitor change, keyup and paste events.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._on($(this.options.emailSelector), {\r\n                'change': this._updatePasswordFieldWithEmailValue,\r\n                'keyup': this._updatePasswordFieldWithEmailValue,\r\n                'paste': this._updatePasswordFieldWithEmailValue\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check choice\r\n         * @private\r\n         */\r\n        _checkChoice: function () {\r\n            if ($(this.options.changeEmailSelector).is(':checked') &&\r\n                $(this.options.changePasswordSelector).is(':checked')) {\r\n                this._showAll();\r\n            } else if ($(this.options.changeEmailSelector).is(':checked')) {\r\n                this._showEmail();\r\n            } else if ($(this.options.changePasswordSelector).is(':checked')) {\r\n                this._showPassword();\r\n            } else {\r\n                this._hideAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show email and password input fields\r\n         * @private\r\n         */\r\n        _showAll: function () {\r\n            $(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);\r\n\r\n            $(this.options.mainContainerSelector).show();\r\n            $(this.options.emailContainerSelector).show();\r\n            $(this.options.newPasswordContainerSelector).show();\r\n            $(this.options.confirmPasswordContainerSelector).show();\r\n\r\n            $(this.options.currentPasswordSelector).attr('data-validate', '{required:true}').prop('disabled', false);\r\n            $(this.options.emailSelector).attr('data-validate', '{required:true}').prop('disabled', false);\r\n            this._updatePasswordFieldWithEmailValue();\r\n            $(this.options.confirmPasswordSelector).attr(\r\n                'data-validate',\r\n                '{required:true, equalTo:\"' + this.options.newPasswordSelector + '\"}'\r\n            ).prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Hide email and password input fields\r\n         * @private\r\n         */\r\n        _hideAll: function () {\r\n            $(this.options.mainContainerSelector).hide();\r\n            $(this.options.emailContainerSelector).hide();\r\n            $(this.options.newPasswordContainerSelector).hide();\r\n            $(this.options.confirmPasswordContainerSelector).hide();\r\n\r\n            $(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Show email input fields\r\n         * @private\r\n         */\r\n        _showEmail: function () {\r\n            this._showAll();\r\n            $(this.options.titleSelector).html(this.options.titleChangeEmail);\r\n\r\n            $(this.options.newPasswordContainerSelector).hide();\r\n            $(this.options.confirmPasswordContainerSelector).hide();\r\n\r\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Show password input fields\r\n         * @private\r\n         */\r\n        _showPassword: function () {\r\n            this._showAll();\r\n            $(this.options.titleSelector).html(this.options.titleChangePassword);\r\n\r\n            $(this.options.emailContainerSelector).hide();\r\n\r\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Update password validation rules with email input field value\r\n         * @private\r\n         */\r\n        _updatePasswordFieldWithEmailValue: function () {\r\n            $(this.options.newPasswordSelector).attr(\r\n                'data-validate',\r\n                '{required:true, ' +\r\n                '\\'validate-customer-password\\':true, ' +\r\n                '\\'password-not-equal-to-user-name\\':\\'' + $(this.options.emailSelector).val() + '\\'}'\r\n            ).prop('disabled', false);\r\n        }\r\n    });\r\n\r\n    return $.mage.changeEmailPassword;\r\n});\r\n","Magento_Customer/js/checkout-balance.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.checkoutBalance', {\r\n        /**\r\n         * Initialize store credit events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.eventData = {\r\n                price: this.options.balance,\r\n                totalPrice: 0\r\n            };\r\n            this.element.on('change', $.proxy(function (e) {\r\n                if ($(e.target).is(':checked')) {\r\n                    this.eventData.price = -1 * this.options.balance;\r\n                } else {\r\n                    if (this.options.amountSubstracted) { //eslint-disable-line no-lonely-if\r\n                        this.eventData.price = parseFloat(this.options.usedAmount);\r\n                        this.options.amountSubstracted = false;\r\n                    } else {\r\n                        this.eventData.price = parseFloat(this.options.balance);\r\n                    }\r\n                }\r\n                this.element.trigger('updateCheckoutPrice', this.eventData);\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.checkoutBalance;\r\n});\r\n","Magento_Customer/js/customer-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'Magento_Customer/js/section-config',\r\n    'mage/url',\r\n    'mage/storage',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, sectionConfig, url) {\r\n    'use strict';\r\n\r\n    var options = {},\r\n        storage,\r\n        storageInvalidation,\r\n        invalidateCacheBySessionTimeOut,\r\n        invalidateCacheByCloseCookieSession,\r\n        dataProvider,\r\n        buffer,\r\n        customerData,\r\n        deferred = $.Deferred();\r\n\r\n    url.setBaseUrl(window.BASE_URL);\r\n    options.sectionLoadUrl = url.build('customer/section/load');\r\n\r\n    /**\r\n     * @param {Object} invalidateOptions\r\n     */\r\n    invalidateCacheBySessionTimeOut = function (invalidateOptions) {\r\n        var date;\r\n\r\n        if (new Date($.localStorage.get('mage-cache-timeout')) < new Date()) {\r\n            storage.removeAll();\r\n        }\r\n        date = new Date(Date.now() + parseInt(invalidateOptions.cookieLifeTime, 10) * 1000);\r\n        $.localStorage.set('mage-cache-timeout', date);\r\n    };\r\n\r\n    /**\r\n     * Invalidate Cache By Close Cookie Session\r\n     */\r\n    invalidateCacheByCloseCookieSession = function () {\r\n        if (!$.cookieStorage.isSet('mage-cache-sessid')) {\r\n            storage.removeAll();\r\n        }\r\n\r\n        $.cookieStorage.set('mage-cache-sessid', true);\r\n    };\r\n\r\n    dataProvider = {\r\n\r\n        /**\r\n         * @param {Object} sectionNames\r\n         * @return {Object}\r\n         */\r\n        getFromStorage: function (sectionNames) {\r\n            var result = {};\r\n\r\n            _.each(sectionNames, function (sectionName) {\r\n                result[sectionName] = storage.get(sectionName);\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sectionNames\r\n         * @param {Boolean} forceNewSectionTimestamp\r\n         * @return {*}\r\n         */\r\n        getFromServer: function (sectionNames, forceNewSectionTimestamp) {\r\n            var parameters;\r\n\r\n            sectionNames = sectionConfig.filterClientSideSections(sectionNames);\r\n            parameters = _.isArray(sectionNames) && sectionNames.indexOf('*') < 0 ? {\r\n                sections: sectionNames.join(',')\r\n            } : [];\r\n            parameters['force_new_section_timestamp'] = forceNewSectionTimestamp;\r\n\r\n            return $.getJSON(options.sectionLoadUrl, parameters).fail(function (jqXHR) {\r\n                throw new Error(jqXHR);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {Function} target\r\n     * @param {String} sectionName\r\n     * @return {*}\r\n     */\r\n    ko.extenders.disposableCustomerData = function (target, sectionName) {\r\n        var sectionDataIds, newSectionDataIds = {};\r\n\r\n        target.subscribe(function () {\r\n            setTimeout(function () {\r\n                storage.remove(sectionName);\r\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n                _.each(sectionDataIds, function (data, name) {\r\n                    if (name !== sectionName) {\r\n                        newSectionDataIds[name] = data;\r\n                    }\r\n                });\r\n                $.cookieStorage.set('section_data_ids', newSectionDataIds);\r\n            }, 3000);\r\n        });\r\n\r\n        return target;\r\n    };\r\n\r\n    buffer = {\r\n        data: {},\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         */\r\n        bind: function (sectionName) {\r\n            this.data[sectionName] = ko.observable({});\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @return {Object}\r\n         */\r\n        get: function (sectionName) {\r\n            if (!this.data[sectionName]) {\r\n                this.bind(sectionName);\r\n            }\r\n\r\n            return this.data[sectionName];\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        keys: function () {\r\n            return _.keys(this.data);\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @param {Object} sectionData\r\n         */\r\n        notify: function (sectionName, sectionData) {\r\n            if (!this.data[sectionName]) {\r\n                this.bind(sectionName);\r\n            }\r\n            this.data[sectionName](sectionData);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sections\r\n         */\r\n        update: function (sections) {\r\n            var sectionId = 0,\r\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n\r\n            _.each(sections, function (sectionData, sectionName) {\r\n                sectionId = sectionData['data_id'];\r\n                sectionDataIds[sectionName] = sectionId;\r\n                storage.set(sectionName, sectionData);\r\n                storageInvalidation.remove(sectionName);\r\n                buffer.notify(sectionName, sectionData);\r\n            });\r\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sections\r\n         */\r\n        remove: function (sections) {\r\n            _.each(sections, function (sectionName) {\r\n                storage.remove(sectionName);\r\n\r\n                if (!sectionConfig.isClientSideSection(sectionName)) {\r\n                    storageInvalidation.set(sectionName, true);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    customerData = {\r\n\r\n        /**\r\n         * Customer data initialization\r\n         */\r\n        init: function () {\r\n            var expiredSectionNames = this.getExpiredSectionNames();\r\n\r\n            if (expiredSectionNames.length > 0) {\r\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\r\n                    buffer.notify(sectionName, sectionData);\r\n                });\r\n                this.reload(expiredSectionNames, false);\r\n            } else {\r\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\r\n                    buffer.notify(sectionName, sectionData);\r\n                });\r\n\r\n                if (!_.isEmpty(storageInvalidation.keys())) {\r\n                    this.reload(storageInvalidation.keys(), false);\r\n                }\r\n            }\r\n\r\n            if (!_.isEmpty($.cookieStorage.get('section_data_clean'))) {\r\n                this.reload(sectionConfig.getSectionNames(), true);\r\n                $.cookieStorage.set('section_data_clean', '');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Storage init\r\n         */\r\n        initStorage: function () {\r\n            $.cookieStorage.setConf({\r\n                path: '/',\r\n                expires: new Date(Date.now() + parseInt(options.cookieLifeTime, 10) * 1000)\r\n            });\r\n            storage = $.initNamespaceStorage('mage-cache-storage').localStorage;\r\n            storageInvalidation = $.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;\r\n        },\r\n\r\n        /**\r\n         * Retrieve the list of sections that has expired since last page reload.\r\n         *\r\n         * Sections can expire due to lifetime constraints or due to inconsistent storage information\r\n         * (validated by cookie data).\r\n         *\r\n         * @return {Array}\r\n         */\r\n        getExpiredSectionNames: function () {\r\n            var expiredSectionNames = [],\r\n                cookieSectionTimestamps = $.cookieStorage.get('section_data_ids') || {},\r\n                sectionLifetime = options.expirableSectionLifetime * 60,\r\n                currentTimestamp = Math.floor(Date.now() / 1000),\r\n                sectionData;\r\n\r\n            // process sections that can expire due to lifetime constraints\r\n            _.each(options.expirableSectionNames, function (sectionName) {\r\n                sectionData = storage.get(sectionName);\r\n\r\n                if (typeof sectionData === 'object' && sectionData['data_id'] + sectionLifetime <= currentTimestamp) {\r\n                    expiredSectionNames.push(sectionName);\r\n                }\r\n            });\r\n\r\n            // process sections that can expire due to storage information inconsistency\r\n            _.each(cookieSectionTimestamps, function (cookieSectionTimestamp, sectionName) {\r\n                sectionData = storage.get(sectionName);\r\n\r\n                if (typeof sectionData === 'undefined' ||\r\n                    typeof sectionData === 'object' &&\r\n                    cookieSectionTimestamp !== sectionData['data_id']\r\n                ) {\r\n                    expiredSectionNames.push(sectionName);\r\n                }\r\n            });\r\n\r\n            //remove expired section names of previously installed/enable modules\r\n            expiredSectionNames = _.intersection(expiredSectionNames, sectionConfig.getSectionNames());\r\n\r\n            return _.uniq(expiredSectionNames);\r\n        },\r\n\r\n        /**\r\n         * Check if some sections have to be reloaded.\r\n         *\r\n         * @deprecated Use getExpiredSectionNames instead.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        needReload: function () {\r\n            var expiredSectionNames = this.getExpiredSectionNames();\r\n\r\n            return expiredSectionNames.length > 0;\r\n        },\r\n\r\n        /**\r\n         * Retrieve the list of expired keys.\r\n         *\r\n         * @deprecated Use getExpiredSectionNames instead.\r\n         *\r\n         * @return {Array}\r\n         */\r\n        getExpiredKeys: function () {\r\n            return this.getExpiredSectionNames();\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @return {*}\r\n         */\r\n        get: function (sectionName) {\r\n            return buffer.get(sectionName);\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @param {Object} sectionData\r\n         */\r\n        set: function (sectionName, sectionData) {\r\n            var data = {};\r\n\r\n            data[sectionName] = sectionData;\r\n            buffer.update(data);\r\n        },\r\n\r\n        /**\r\n         * Avoid using this function directly 'cause of possible performance drawbacks.\r\n         * Each customer section reload brings new non-cached ajax request.\r\n         *\r\n         * @param {Array} sectionNames\r\n         * @param {Boolean} forceNewSectionTimestamp\r\n         * @return {*}\r\n         */\r\n        reload: function (sectionNames, forceNewSectionTimestamp) {\r\n            return dataProvider.getFromServer(sectionNames, forceNewSectionTimestamp).done(function (sections) {\r\n                $(document).trigger('customer-data-reload', [sectionNames]);\r\n                buffer.update(sections);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Array} sectionNames\r\n         */\r\n        invalidate: function (sectionNames) {\r\n            var sectionDataIds,\r\n                sectionsNamesForInvalidation;\r\n\r\n            sectionsNamesForInvalidation = _.contains(sectionNames, '*') ? sectionConfig.getSectionNames() :\r\n                sectionNames;\r\n\r\n            $(document).trigger('customer-data-invalidate', [sectionsNamesForInvalidation]);\r\n            buffer.remove(sectionsNamesForInvalidation);\r\n            sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n\r\n            // Invalidate section in cookie (increase version of section with 1000)\r\n            _.each(sectionsNamesForInvalidation, function (sectionName) {\r\n                if (!sectionConfig.isClientSideSection(sectionName)) {\r\n                    sectionDataIds[sectionName] += 1000;\r\n                }\r\n            });\r\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\r\n        },\r\n\r\n        /**\r\n         * Checks if customer data is initialized.\r\n         *\r\n         * @returns {jQuery.Deferred}\r\n         */\r\n        getInitCustomerData: function () {\r\n            return deferred.promise();\r\n        },\r\n\r\n        /**\r\n         * Reload sections on ajax complete\r\n         *\r\n         * @param {Object} jsonResponse\r\n         * @param {Object} settings\r\n         */\r\n        onAjaxComplete: function (jsonResponse, settings) {\r\n            var sections,\r\n                redirects;\r\n\r\n            if (settings.type.match(/post|put|delete/i)) {\r\n                sections = sectionConfig.getAffectedSections(settings.url);\r\n\r\n                if (sections && sections.length) {\r\n                    this.invalidate(sections);\r\n                    redirects = ['redirect', 'backUrl'];\r\n\r\n                    if (_.isObject(jsonResponse) && !_.isEmpty(_.pick(jsonResponse, redirects))) { //eslint-disable-line\r\n                        return;\r\n                    }\r\n                    this.reload(sections, true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} settings\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/customer-data': function (settings) {\r\n            options = settings;\r\n            customerData.initStorage();\r\n            invalidateCacheBySessionTimeOut(settings);\r\n            invalidateCacheByCloseCookieSession();\r\n            customerData.init();\r\n            deferred.resolve();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Events listener\r\n     */\r\n    $(document).on('ajaxComplete', function (event, xhr, settings) {\r\n        customerData.onAjaxComplete(xhr.responseJSON, settings);\r\n    });\r\n\r\n    /**\r\n     * Events listener\r\n     */\r\n    $(document).on('submit', function (event) {\r\n        var sections;\r\n\r\n        if (event.target.method.match(/post|put|delete/i)) {\r\n            sections = sectionConfig.getAffectedSections(event.target.action);\r\n\r\n            if (sections) {\r\n                customerData.invalidate(sections);\r\n            }\r\n        }\r\n    });\r\n\r\n    return customerData;\r\n});\r\n","Magento_Customer/js/customer-global-session-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, customerData) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var customer;\r\n\r\n        // When the session is available, this customer menu will be available\r\n        if ($('.customer-menu').length > 0) {\r\n            customer = customerData.get('customer');\r\n\r\n            customerData.getInitCustomerData().done(function () {\r\n                // Check if the customer data is set in local storage, if not reload data from server\r\n                if (!customer().firstname) {\r\n                    customerData.reload([], false);\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/invalidation-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, Element, customerData) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        /**\r\n         * Initialize object\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.process(customerData);\r\n        },\r\n\r\n        /**\r\n         * Process all rules in loop, each rule can invalidate some sections in customer data\r\n         *\r\n         * @param {Object} customerDataObject\r\n         */\r\n        process: function (customerDataObject) {\r\n            _.each(this.invalidationRules, function (rule, ruleName) {\r\n                _.each(rule, function (ruleArgs, rulePath) {\r\n                    require([rulePath], function (Rule) {\r\n                        var currentRule = new Rule(ruleArgs);\r\n\r\n                        if (!_.isFunction(currentRule.process)) {\r\n                            throw new Error('Rule ' + ruleName + ' should implement invalidationProcessor interface');\r\n                        }\r\n                        currentRule.process(customerDataObject);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/logout-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data) {\r\n        $($.mage.redirect(data.url, 'assign', 5000));\r\n    };\r\n});\r\n","Magento_Customer/js/password-strength-indicator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/zxcvbn',\r\n    'mage/translate',\r\n    'mage/validation'\r\n], function ($, zxcvbn, $t) {\r\n    'use strict';\r\n\r\n    $.widget('mage.passwordStrengthIndicator', {\r\n        options: {\r\n            cache: {},\r\n            passwordSelector: '[type=password]',\r\n            passwordStrengthMeterSelector: '[data-role=password-strength-meter]',\r\n            passwordStrengthMeterLabelSelector: '[data-role=password-strength-meter-label]',\r\n            formSelector: 'form',\r\n            emailSelector: 'input[type=\"email\"]'\r\n        },\r\n\r\n        /**\r\n         * Widget initialization\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.options.cache.input = $(this.options.passwordSelector, this.element);\r\n            this.options.cache.meter = $(this.options.passwordStrengthMeterSelector, this.element);\r\n            this.options.cache.label = $(this.options.passwordStrengthMeterLabelSelector, this.element);\r\n\r\n            // We need to look outside the module for backward compatibility, since someone can already use the module.\r\n            // @todo Narrow this selector in 2.3 so it doesn't accidentally finds the email field from the\r\n            // newsletter email field or any other \"email\" field.\r\n            this.options.cache.email = $(this.options.formSelector).find(this.options.emailSelector);\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Event binding, will monitor change, keyup and paste events.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._on(this.options.cache.input, {\r\n                'change': this._calculateStrength,\r\n                'keyup': this._calculateStrength,\r\n                'paste': this._calculateStrength\r\n            });\r\n\r\n            if (this.options.cache.email.length) {\r\n                this._on(this.options.cache.email, {\r\n                    'change': this._calculateStrength,\r\n                    'keyup': this._calculateStrength,\r\n                    'paste': this._calculateStrength\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Calculate password strength\r\n         * @private\r\n         */\r\n        _calculateStrength: function () {\r\n            var password = this._getPassword(),\r\n                isEmpty = password.length === 0,\r\n                zxcvbnScore,\r\n                displayScore,\r\n                isValid;\r\n\r\n            // Display score is based on combination of whether password is empty, valid, and zxcvbn strength\r\n            if (isEmpty) {\r\n                displayScore = 0;\r\n            } else {\r\n                this.options.cache.input.rules('add', {\r\n                    'password-not-equal-to-user-name': this.options.cache.email.val()\r\n                });\r\n\r\n                // We should only perform this check in case there is an email field on screen\r\n                if (this.options.cache.email.length &&\r\n                    password.toLowerCase() === this.options.cache.email.val().toLowerCase()) {\r\n                    displayScore = 1;\r\n                } else {\r\n                    isValid = $.validator.validateSingleElement(this.options.cache.input);\r\n                    zxcvbnScore = zxcvbn(password).score;\r\n                    displayScore = isValid && zxcvbnScore > 0 ? zxcvbnScore : 1;\r\n                }\r\n            }\r\n\r\n            // Update label\r\n            this._displayStrength(displayScore);\r\n        },\r\n\r\n        /**\r\n         * Display strength\r\n         * @param {Number} displayScore\r\n         * @private\r\n         */\r\n        _displayStrength: function (displayScore) {\r\n            var strengthLabel = '',\r\n                className;\r\n\r\n            switch (displayScore) {\r\n                case 0:\r\n                    strengthLabel = $t('No Password');\r\n                    className = 'password-none';\r\n                    break;\r\n\r\n                case 1:\r\n                    strengthLabel = $t('Weak');\r\n                    className = 'password-weak';\r\n                    break;\r\n\r\n                case 2:\r\n                    strengthLabel = $t('Medium');\r\n                    className = 'password-medium';\r\n                    break;\r\n\r\n                case 3:\r\n                    strengthLabel = $t('Strong');\r\n                    className = 'password-strong';\r\n                    break;\r\n\r\n                case 4:\r\n                    strengthLabel = $t('Very Strong');\r\n                    className = 'password-very-strong';\r\n                    break;\r\n            }\r\n\r\n            this.options.cache.meter\r\n                .removeClass()\r\n                .addClass(className);\r\n            this.options.cache.label.text(strengthLabel);\r\n        },\r\n\r\n        /**\r\n         * Get password value\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getPassword: function () {\r\n            return this.options.cache.input.val();\r\n        }\r\n    });\r\n\r\n    return $.mage.passwordStrengthIndicator;\r\n});\r\n","Magento_Customer/js/section-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    var baseUrls = [],\r\n        sections = [],\r\n        clientSideSections = [],\r\n        sectionNames = [],\r\n        canonize;\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @return {String}\r\n     */\r\n    canonize = function (url) {\r\n        var route = url;\r\n\r\n        _.some(baseUrls, function (baseUrl) {\r\n            route = url.replace(baseUrl, '');\r\n\r\n            return route !== url;\r\n        });\r\n\r\n        return route.replace(/^\\/?index.php\\/?/, '').toLowerCase();\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Returns a list of sections which should be invalidated for given URL.\r\n         * @param {String} url - URL which was requested.\r\n         * @return {Object} - List of sections to invalidate.\r\n         */\r\n        getAffectedSections: function (url) {\r\n            var route = canonize(url),\r\n                actions = _.find(sections, function (val, section) {\r\n                    var matched;\r\n\r\n                    // Covers the case where \"*\" works as a glob pattern.\r\n                    if (section.indexOf('*') >= 0) {\r\n                        section = section.replace(/\\*/g, '[^/]+') + '$';\r\n                        matched = route.match(section);\r\n\r\n                        return matched && matched[0] === route;\r\n                    }\r\n\r\n                    return route.indexOf(section) === 0;\r\n                });\r\n\r\n            return _.union(_.toArray(actions), sections['*']);\r\n        },\r\n\r\n        /**\r\n         * Filters the list of given sections to the ones defined as client side.\r\n         * @param {Object} allSections - List of sections to check.\r\n         * @return {Object} - List of filtered sections.\r\n         */\r\n        filterClientSideSections: function (allSections) {\r\n            return _.difference(allSections, clientSideSections);\r\n        },\r\n\r\n        /**\r\n         * Tells if section is defined as client side.\r\n         * @param {String} sectionName - Name of the section to check.\r\n         * @return {Boolean}\r\n         */\r\n        isClientSideSection: function (sectionName) {\r\n            return _.contains(clientSideSections, sectionName);\r\n        },\r\n\r\n        /**\r\n         * Returns array of section names.\r\n         * @returns {Array}\r\n         */\r\n        getSectionNames: function () {\r\n            return sectionNames;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} options\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/section-config': function (options) {\r\n            baseUrls = options.baseUrls;\r\n            sections = options.sections;\r\n            clientSideSections = options.clientSideSections;\r\n            sectionNames = options.sectionNames;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/show-password.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent'\r\n], function ($, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        passwordSelector: '',\r\n        passwordInputType: 'password',\r\n        textInputType: 'text',\r\n\r\n        defaults: {\r\n            template: 'Magento_Customer/show-password',\r\n            isPasswordVisible: false\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['isPasswordVisible']);\r\n\r\n            this.isPasswordVisible.subscribe(function (isChecked) {\r\n                this._showPassword(isChecked);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Show/Hide password\r\n         * @private\r\n         */\r\n        _showPassword: function (isChecked) {\r\n            $(this.passwordSelector).attr('type',\r\n                isChecked ? this.textInputType : this.passwordInputType\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/validation.js":"define([\r\n    'jquery',\r\n    'moment',\r\n    'mageUtils',\r\n    'jquery/validate',\r\n    'validation',\r\n    'mage/translate'\r\n], function ($, moment, utils) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'validate-date',\r\n        function (value, element, params) {\r\n            var dateFormat = utils.normalizeDate(params.dateFormat);\r\n\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return moment(value, dateFormat, true).isValid();\r\n        },\r\n        $.mage.__('Invalid date')\r\n    );\r\n\r\n    $.validator.addMethod(\r\n        'validate-dob',\r\n        function (value, element, params) {\r\n            var dateFormat = utils.convertToMomentFormat(params.dateFormat);\r\n\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return moment(value, dateFormat).isBefore(moment());\r\n        },\r\n        $.mage.__('The Date of Birth should not be greater than today.')\r\n    );\r\n});\r\n","Magento_Customer/js/action/check-email-availability.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/url-builder'\r\n], function (storage, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (deferred, email) {\r\n        return storage.post(\r\n            urlBuilder.createUrl('/customers/isEmailAvailable', {}),\r\n            JSON.stringify({\r\n                customerEmail: email\r\n            }),\r\n            false\r\n        ).done(function (isEmailAvailable) {\r\n            if (isEmailAvailable) {\r\n                deferred.resolve();\r\n            } else {\r\n                deferred.reject();\r\n            }\r\n        }).fail(function () {\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_Customer/js/action/login.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/storage',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/translate'\r\n], function ($, storage, globalMessageList, customerData, $t) {\r\n    'use strict';\r\n\r\n    var callbacks = [],\r\n\r\n        /**\r\n         * @param {Object} loginData\r\n         * @param {String} redirectUrl\r\n         * @param {*} isGlobal\r\n         * @param {Object} messageContainer\r\n         */\r\n        action = function (loginData, redirectUrl, isGlobal, messageContainer) {\r\n            messageContainer = messageContainer || globalMessageList;\r\n            let customerLoginUrl = 'customer/ajax/login';\r\n\r\n            if (loginData.customerLoginUrl) {\r\n                customerLoginUrl = loginData.customerLoginUrl;\r\n                delete loginData.customerLoginUrl;\r\n            }\r\n\r\n            return storage.post(\r\n                customerLoginUrl,\r\n                JSON.stringify(loginData),\r\n                isGlobal\r\n            ).done(function (response) {\r\n                if (response.errors) {\r\n                    messageContainer.addErrorMessage(response);\r\n                    callbacks.forEach(function (callback) {\r\n                        callback(loginData);\r\n                    });\r\n                } else {\r\n                    callbacks.forEach(function (callback) {\r\n                        callback(loginData);\r\n                    });\r\n                    customerData.invalidate(['customer']);\r\n\r\n                    if (response.redirectUrl) {\r\n                        window.location.href = response.redirectUrl;\r\n                    } else if (redirectUrl) {\r\n                        window.location.href = redirectUrl;\r\n                    } else {\r\n                        location.reload();\r\n                    }\r\n                }\r\n            }).fail(function () {\r\n                messageContainer.addErrorMessage({\r\n                    'message': $t('Could not authenticate. Please try again later')\r\n                });\r\n                callbacks.forEach(function (callback) {\r\n                    callback(loginData);\r\n                });\r\n            });\r\n        };\r\n\r\n    /**\r\n     * @param {Function} callback\r\n     */\r\n    action.registerLoginCallback = function (callback) {\r\n        callbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_Customer/js/invalidation-rules/website-rule.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n\r\n        defaults: {\r\n            scopeConfig: {}\r\n        },\r\n\r\n        /**\r\n         * Takes website id from current customer data and compare it with current website id\r\n         * If customer belongs to another scope, we need to invalidate current section\r\n         *\r\n         * @param {Object} customerData\r\n         */\r\n        process: function (customerData) {\r\n            var customer = customerData.get('customer');\r\n\r\n            if (this.scopeConfig && customer() &&\r\n                ~~customer().websiteId !== ~~this.scopeConfig.websiteId && ~~customer().websiteId !== 0) {\r\n                customerData.reload(['customer']);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/model/address-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    './customer-addresses'\r\n], function (ko, defaultProvider) {\r\n    'use strict';\r\n\r\n    return ko.observableArray(defaultProvider.getAddressItems());\r\n});\r\n","Magento_Customer/js/model/authentication-popup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal'\r\n], function ($, modal) {\r\n    'use strict';\r\n\r\n    return {\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Create popUp window for provided element\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        createPopUp: function (element) {\r\n            var options = {\r\n                'type': 'popup',\r\n                'modalClass': 'popup-authentication',\r\n                'focus': '[name=username]',\r\n                'responsive': true,\r\n                'innerScroll': true,\r\n                'trigger': '.proceed-to-checkout',\r\n                'buttons': []\r\n            };\r\n\r\n            this.modalWindow = element;\r\n            modal(options, $(this.modalWindow));\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            $(this.modalWindow).modal('openModal').trigger('contentUpdated');\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer-addresses.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    './customer/address'\r\n], function ($, ko, Address) {\r\n    'use strict';\r\n\r\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn);\r\n\r\n    return {\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getAddressItems: function () {\r\n            var items = [],\r\n                customerData = window.customerData;\r\n\r\n            if (isLoggedIn()) {\r\n                if (Object.keys(customerData).length) {\r\n                    $.each(customerData.addresses, function (key, item) {\r\n                        items.push(new Address(item));\r\n                    });\r\n                }\r\n            }\r\n\r\n            return items;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    './address-list'\r\n], function ($, ko, _, addressList) {\r\n    'use strict';\r\n\r\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn),\r\n        customerData = {};\r\n\r\n    if (isLoggedIn()) {\r\n        customerData = window.customerData;\r\n    } else {\r\n        customerData = {};\r\n    }\r\n\r\n    return {\r\n        customerData: customerData,\r\n        customerDetails: {},\r\n        isLoggedIn: isLoggedIn,\r\n\r\n        /**\r\n         * @param {Boolean} flag\r\n         */\r\n        setIsLoggedIn: function (flag) {\r\n            isLoggedIn(flag);\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getBillingAddressList: function () {\r\n            return addressList();\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getShippingAddressList: function () {\r\n            return addressList();\r\n        },\r\n\r\n        /**\r\n         * @param {String} fieldName\r\n         * @param {*} value\r\n         */\r\n        setDetails: function (fieldName, value) {\r\n            if (fieldName) {\r\n                this.customerDetails[fieldName] = value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {String} fieldName\r\n         * @return {*}\r\n         */\r\n        getDetails: function (fieldName) {\r\n            if (fieldName) {\r\n                if (this.customerDetails.hasOwnProperty(fieldName)) {\r\n                    return this.customerDetails[fieldName];\r\n                }\r\n\r\n                return undefined;\r\n            }\r\n\r\n            return this.customerDetails;\r\n        },\r\n\r\n        /**\r\n         * @param {Array} address\r\n         * @return {Number}\r\n         */\r\n        addCustomerAddress: function (address) {\r\n            var fields = [\r\n                    'customer_id', 'country_id', 'street', 'company', 'telephone', 'fax', 'postcode', 'city',\r\n                    'firstname', 'lastname', 'middlename', 'prefix', 'suffix', 'vat_id', 'default_billing',\r\n                    'default_shipping'\r\n                ],\r\n                customerAddress = {},\r\n                hasAddress = 0,\r\n                existingAddress;\r\n\r\n            if (!this.customerData.addresses) {\r\n                this.customerData.addresses = [];\r\n            }\r\n\r\n            customerAddress = _.pick(address, fields);\r\n\r\n            if (address.hasOwnProperty('region_id')) {\r\n                customerAddress.region = {\r\n                    'region_id': address['region_id'],\r\n                    region: address.region\r\n                };\r\n            }\r\n\r\n            for (existingAddress in this.customerData.addresses) {\r\n                if (this.customerData.addresses.hasOwnProperty(existingAddress)) {\r\n                    if (_.isEqual(this.customerData.addresses[existingAddress], customerAddress)) { //eslint-disable-line\r\n                        hasAddress = existingAddress;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (hasAddress === 0) {\r\n                return this.customerData.addresses.push(customerAddress) - 1;\r\n            }\r\n\r\n            return hasAddress;\r\n        },\r\n\r\n        /**\r\n         * @param {*} addressId\r\n         * @return {Boolean}\r\n         */\r\n        setAddressAsDefaultBilling: function (addressId) {\r\n            if (this.customerData.addresses[addressId]) {\r\n                this.customerData.addresses[addressId]['default_billing'] = 1;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {*} addressId\r\n         * @return {Boolean}\r\n         */\r\n        setAddressAsDefaultShipping: function (addressId) {\r\n            if (this.customerData.addresses[addressId]) {\r\n                this.customerData.addresses[addressId]['default_shipping'] = 1;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer/address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns new address object.\r\n     *\r\n     * @param {Object} addressData\r\n     * @return {Object}\r\n     */\r\n    return function (addressData) {\r\n        var regionId;\r\n\r\n        if (addressData.region['region_id'] && addressData.region['region_id'] !== '0') {\r\n            regionId = addressData.region['region_id'] + '';\r\n        }\r\n\r\n        return {\r\n            customerAddressId: addressData.id,\r\n            email: addressData.email,\r\n            countryId: addressData['country_id'],\r\n            regionId: regionId,\r\n            regionCode: addressData.region['region_code'],\r\n            region: addressData.region.region,\r\n            customerId: addressData['customer_id'],\r\n            street: addressData.street,\r\n            company: addressData.company,\r\n            telephone: addressData.telephone,\r\n            fax: addressData.fax,\r\n            postcode: addressData.postcode,\r\n            city: addressData.city,\r\n            firstname: addressData.firstname,\r\n            lastname: addressData.lastname,\r\n            middlename: addressData.middlename,\r\n            prefix: addressData.prefix,\r\n            suffix: addressData.suffix,\r\n            vatId: addressData['vat_id'],\r\n            sameAsBilling: addressData['same_as_billing'],\r\n            saveInAddressBook: addressData['save_in_address_book'],\r\n            customAttributes: _.toArray(addressData['custom_attributes']).reverse(),\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultShipping: function () {\r\n                return addressData['default_shipping'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultBilling: function () {\r\n                return addressData['default_billing'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            getAddressInline: function () {\r\n                return addressData.inline;\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getType: function () {\r\n                return 'customer-address';\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getKey: function () {\r\n                return this.getType() + this.customerAddressId;\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCacheKey: function () {\r\n                return this.getKey();\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            isEditable: function () {\r\n                return false;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            canUseForBilling: function () {\r\n                return true;\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Customer/js/view/authentication-popup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'mage/translate',\r\n    'mage/url',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/validation'\r\n], function ($, ko, Component, loginAction, customerData, authenticationPopup, $t, url, alert) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        registerUrl: window.authenticationPopup.customerRegisterUrl,\r\n        forgotPasswordUrl: window.authenticationPopup.customerForgotPasswordUrl,\r\n        autocomplete: window.authenticationPopup.autocomplete,\r\n        modalWindow: null,\r\n        isLoading: ko.observable(false),\r\n\r\n        defaults: {\r\n            template: 'Magento_Customer/authentication-popup'\r\n        },\r\n\r\n        /**\r\n         * Init\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n            url.setBaseUrl(window.authenticationPopup.baseUrl);\r\n            loginAction.registerLoginCallback(function () {\r\n                self.isLoading(false);\r\n            });\r\n        },\r\n\r\n        /** Init popup login window */\r\n        setModalElement: function (element) {\r\n            if (authenticationPopup.modalWindow == null) {\r\n                authenticationPopup.createPopUp(element);\r\n            }\r\n        },\r\n\r\n        /** Is login form enabled for current customer */\r\n        isActive: function () {\r\n            var customer = customerData.get('customer');\r\n\r\n            return customer() == false; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            if (this.modalWindow) {\r\n                $(this.modalWindow).modal('openModal');\r\n            } else {\r\n                alert({\r\n                    content: $t('Guest checkout is disabled.')\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Provide login action\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        login: function (formUiElement, event) {\r\n            var loginData = {},\r\n                formElement = $(event.currentTarget),\r\n                formDataArray = formElement.serializeArray();\r\n\r\n            event.stopPropagation();\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n            loginData['customerLoginUrl'] = window.authenticationPopup.customerLoginUrl;\r\n            if (formElement.validation() &&\r\n                formElement.validation('isValid')\r\n            ) {\r\n                this.isLoading(true);\r\n                loginAction(loginData);\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/view/customer.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.customer = customerData.get('customer');\r\n        }\r\n    });\r\n});\r\n","Magento_Dhl/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'city': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Dhl/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    'Magento_Dhl/js/model/shipping-rates-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Dhl/js/view/shipping-rates-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    'Magento_Dhl/js/model/shipping-rates-validator',\r\n    'Magento_Dhl/js/model/shipping-rates-validation-rules'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    dhlShippingRatesValidator,\r\n    dhlShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('dhl', dhlShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('dhl', dhlShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_Directory/js/region-updater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function ($, mageTemplate, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.directoryRegionUpdater', {\r\n        options: {\r\n            regionTemplate:\r\n                '<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>' +\r\n                '<%- data.title %>' +\r\n                '</option>',\r\n            isRegionRequired: true,\r\n            isZipRequired: true,\r\n            isCountryRequired: true,\r\n            currentRegion: null,\r\n            isMultipleCountriesAllowed: true\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initCountryElement();\r\n\r\n            this.currentRegionOption = this.options.currentRegion;\r\n            this.regionTmpl = mageTemplate(this.options.regionTemplate);\r\n\r\n            this._updateRegion(this.element.find('option:selected').val());\r\n\r\n            $(this.options.regionListId).on('change', $.proxy(function (e) {\r\n                this.setOption = false;\r\n                this.currentRegionOption = $(e.target).val();\r\n            }, this));\r\n\r\n            $(this.options.regionInputId).on('focusout', $.proxy(function () {\r\n                this.setOption = true;\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initCountryElement: function () {\r\n\r\n            if (this.options.isMultipleCountriesAllowed) {\r\n                this.element.parents('div.field').show();\r\n                this.element.on('change', $.proxy(function (e) {\r\n                    // clear region inputs on country change\r\n                    $(this.options.regionListId).val('');\r\n                    $(this.options.regionInputId).val('');\r\n                    this._updateRegion($(e.target).val());\r\n                }, this));\r\n\r\n                if (this.options.isCountryRequired) {\r\n                    this.element.addClass('required-entry');\r\n                    this.element.parents('div.field').addClass('required');\r\n                }\r\n            } else {\r\n                this.element.parents('div.field').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove options from dropdown list\r\n         *\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @private\r\n         */\r\n        _removeSelectOptions: function (selectElement) {\r\n            selectElement.find('option').each(function (index) {\r\n                if (index) {\r\n                    $(this).remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render dropdown list\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @param {String} key - region code\r\n         * @param {Object} value - region object\r\n         * @private\r\n         */\r\n        _renderSelectOption: function (selectElement, key, value) {\r\n            selectElement.append($.proxy(function () {\r\n                var name = value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&'),\r\n                    tmplData,\r\n                    tmpl;\r\n\r\n                if (value.code && $(name).is('span')) {\r\n                    key = value.code;\r\n                    value.name = $(name).text();\r\n                }\r\n\r\n                tmplData = {\r\n                    value: key,\r\n                    title: value.name,\r\n                    isSelected: false\r\n                };\r\n\r\n                if (this.options.defaultRegion === key) {\r\n                    tmplData.isSelected = true;\r\n                }\r\n\r\n                tmpl = this.regionTmpl({\r\n                    data: tmplData\r\n                });\r\n\r\n                return $(tmpl);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Takes clearError callback function as first option\r\n         * If no form is passed as option, look up the closest form and call clearError method.\r\n         * @private\r\n         */\r\n        _clearError: function () {\r\n            var args = ['clearError', this.options.regionListId, this.options.regionInputId, this.options.postcodeId];\r\n\r\n            if (this.options.clearError && typeof this.options.clearError === 'function') {\r\n                this.options.clearError.call(this);\r\n            } else {\r\n                if (!this.options.form) {\r\n                    this.options.form = this.element.closest('form').length ? $(this.element.closest('form')[0]) : null;\r\n                }\r\n\r\n                this.options.form = $(this.options.form);\r\n\r\n                this.options.form && this.options.form.data('validator') &&\r\n                this.options.form.validation.apply(this.options.form, _.compact(args));\r\n\r\n                // Clean up errors on region & zip fix\r\n                $(this.options.regionInputId).removeClass('mage-error').parent().find('[generated]').remove();\r\n                $(this.options.regionListId).removeClass('mage-error').parent().find('[generated]').remove();\r\n                $(this.options.postcodeId).removeClass('mage-error').parent().find('[generated]').remove();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update dropdown list based on the country selected\r\n         *\r\n         * @param {String} country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _updateRegion: function (country) {\r\n            // Clear validation error messages\r\n            var regionList = $(this.options.regionListId),\r\n                regionInput = $(this.options.regionInputId),\r\n                postcode = $(this.options.postcodeId),\r\n                label = regionList.parent().siblings('label'),\r\n                container = regionList.parents('div.field'),\r\n                regionsEntries,\r\n                regionId,\r\n                regionData;\r\n\r\n            this._clearError();\r\n            this._checkRegionRequired(country);\r\n\r\n            // Populate state/province dropdown list if available or use input box\r\n            if (this.options.regionJson[country]) {\r\n                this._removeSelectOptions(regionList);\r\n                regionsEntries = _.pairs(this.options.regionJson[country]);\r\n                $.each(regionsEntries, $.proxy(function (key, value) {\r\n                    regionData = value[1];\r\n                    regionId = regionData.id;\r\n                    this._renderSelectOption(regionList, regionId.toString(), regionData);\r\n                }, this));\r\n\r\n                if (this.currentRegionOption) {\r\n                    regionList.val(this.currentRegionOption);\r\n                }\r\n\r\n                if (this.setOption) {\r\n                    regionList.find('option').filter(function () {\r\n                        return this.text === regionInput.val();\r\n                    }).attr('selected', true);\r\n                }\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionList.addClass('required-entry').removeAttr('disabled');\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    regionList.removeClass('required-entry validate-select').removeAttr('data-validate');\r\n                    container.removeClass('required');\r\n\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionList.hide();\r\n                        container.hide();\r\n                    } else {\r\n                        regionList.removeAttr('disabled').show();\r\n                    }\r\n                }\r\n\r\n                regionList.show();\r\n                regionInput.hide();\r\n                label.attr('for', regionList.attr('id'));\r\n            } else {\r\n                this._removeSelectOptions(regionList);\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionInput.addClass('required-entry').removeAttr('disabled');\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionInput.attr('disabled', 'disabled');\r\n                        container.hide();\r\n                    }\r\n                    container.removeClass('required');\r\n                    regionInput.removeClass('required-entry');\r\n                }\r\n\r\n                regionList.removeClass('required-entry').prop('disabled', 'disabled').hide();\r\n                regionInput.show();\r\n                label.attr('for', regionInput.attr('id'));\r\n            }\r\n\r\n            // If country is in optionalzip list, make postcode input not required\r\n            if (this.options.isZipRequired) {\r\n                $.inArray(country, this.options.countriesWithOptionalZip) >= 0 ?\r\n                    postcode.removeClass('required-entry').closest('.field').removeClass('required') :\r\n                    postcode.addClass('required-entry').closest('.field').addClass('required');\r\n            }\r\n\r\n            // Add defaultvalue attribute to state/province select element\r\n            regionList.attr('defaultvalue', this.options.defaultRegion);\r\n            this.options.form.find('[type=\"submit\"]').removeAttr('disabled').show();\r\n        },\r\n\r\n        /**\r\n         * Check if the selected country has a mandatory region selection\r\n         *\r\n         * @param {String} country - Code of the country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _checkRegionRequired: function (country) {\r\n            var self = this;\r\n\r\n            this.options.isRegionRequired = false;\r\n            $.each(this.options.regionJson.config['regions_required'], function (index, elem) {\r\n                if (elem === country) {\r\n                    self.options.isRegionRequired = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.directoryRegionUpdater;\r\n});\r\n","Magento_Downloadable/js/downloadable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Catalog/js/price-box'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Downloadable widget\r\n     */\r\n    $.widget('mage.downloadable', {\r\n        options: {\r\n            priceHolderSelector: '.price-box',\r\n            linkElement: '',\r\n            allElements: ''\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        _init: function initLinks() {\r\n            var element = this.element,\r\n                options = $(this.options.linkElement, element);\r\n\r\n            options.trigger('change');\r\n        },\r\n\r\n        /**\r\n         *  @inheritdoc\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            this.element.find(this.options.linkElement).on('change', $.proxy(function () {\r\n                this._reloadPrice();\r\n            }, this));\r\n\r\n            this.element.find(this.options.allElements).on('change', function () {\r\n                if (this.checked) {\r\n                    $('label[for=\"' + this.id + '\"] > span').text($(this).attr('data-checked'));\r\n                    self.element.find(self.options.linkElement + ':not(:checked)').each(function () {\r\n                        $(this).trigger('click');\r\n                    });\r\n                } else {\r\n                    $('[for=\"' + this.id + '\"] > span').text($(this).attr('data-notchecked'));\r\n                    self.element.find(self.options.linkElement + ':checked').each(function () {\r\n                        $(this).trigger('click');\r\n                    });\r\n                }\r\n            });\r\n\r\n            this._reloadPrice();\r\n        },\r\n\r\n        /**\r\n         * Reload product price with selected link price included\r\n         * @private\r\n         */\r\n        _reloadPrice: function () {\r\n            var finalPrice = 0,\r\n                basePrice = 0;\r\n\r\n            this.element.find(this.options.linkElement + ':checked').each($.proxy(function (index, element) {\r\n                finalPrice += this.options.config.links[$(element).val()].finalPrice;\r\n                basePrice += this.options.config.links[$(element).val()].basePrice;\r\n            }, this));\r\n\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', {\r\n                'prices': {\r\n                    'finalPrice': {\r\n                        'amount': finalPrice\r\n                    },\r\n                    'basePrice': {\r\n                        'amount': basePrice\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.reloadAllCheckText();\r\n        },\r\n\r\n        /**\r\n         * Reload all-elements-checkbox's label\r\n         * @private\r\n         */\r\n        reloadAllCheckText: function () {\r\n            var allChecked = true,\r\n                allElementsCheck = $(this.options.allElements),\r\n                allElementsLabel = $('label[for=\"' + allElementsCheck.attr('id') + '\"] > span');\r\n\r\n            $(this.options.linkElement).each(function () {\r\n                if (!this.checked) {\r\n                    allChecked = false;\r\n                }\r\n            });\r\n\r\n            if (allChecked) {\r\n                allElementsLabel.text(allElementsCheck.attr('data-checked'));\r\n                allElementsCheck.prop('checked', true);\r\n            } else {\r\n                allElementsLabel.text(allElementsCheck.attr('data-notchecked'));\r\n                allElementsCheck.prop('checked', false);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.downloadable;\r\n});\r\n","Magento_Fedex/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'city': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Fedex/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    'Magento_Fedex/js/model/shipping-rates-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Fedex/js/view/shipping-rates-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    'Magento_Fedex/js/model/shipping-rates-validator',\r\n    'Magento_Fedex/js/model/shipping-rates-validation-rules'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    fedexShippingRatesValidator,\r\n    fedexShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('fedex', fedexShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('fedex', fedexShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_GiftMessage/js/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.giftOptions', {\r\n        options: {\r\n            mageError: 'mage-error',\r\n            noDisplay: 'no-display',\r\n            requiredEntry: 'required-entry'\r\n        },\r\n\r\n        /**\r\n         * Initial toggle of the various gift options after widget instantiation.\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            this._toggleVisibility();\r\n        },\r\n\r\n        /**\r\n         * Bind a click handler to the widget's context element.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', $.proxy(this._toggleVisibility, this));\r\n            $(this.element.data('selector').id).find('.giftmessage-area')\r\n                .on('change', $.proxy(this._toggleRequired, this));\r\n        },\r\n\r\n        /**\r\n         * Toggle the visibility of the widget's context element's selector(s).\r\n         * @private\r\n         * @param {jQuery.Event} event - Click event. Target is a checkbox.\r\n         */\r\n        _toggleVisibility: function (event) {\r\n            var checkbox = event ? $(event.target) : this.element,\r\n                container = $(checkbox.data('selector').id),\r\n                _this;\r\n\r\n            if (checkbox.is(':checked')) {\r\n                container.show()\r\n                    .find('.giftmessage-area:not(:visible)').each(function (x, element) {\r\n                        if ($(element).val().length > 0) {\r\n                            $(element).trigger('change');\r\n                            container.find('a').trigger('click');\r\n                        }\r\n                    });\r\n            } else {\r\n                _this = this;\r\n                container.hide()\r\n                    .find('.input-text:not(.giftmessage-area)').each(function (x, element) {\r\n                        $(element).val(element.defaultValue).removeClass(_this.options.mageError)\r\n                            .next('div.' + _this.options.mageError).remove();\r\n                    }).end()\r\n                    .find('.giftmessage-area').val('').change().end()\r\n                    .find('.select').val('').change().end()\r\n                    .find('.checkbox:checked').prop('checked', false).trigger('click').prop('checked', false).end()\r\n                    .find('.price-box').addClass(this.options.noDisplay).end();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Make the From and To input fields required if a gift message has been written.\r\n         * @private\r\n         * @param {jQuery.Event} event - Change event. Target is a textarea.\r\n         */\r\n        _toggleRequired: function (event) {\r\n            var textArea = $(event.target),\r\n                length = textArea.val().length;\r\n\r\n            textArea.closest('li').prev('.fields')\r\n                .find('.input-text').toggleClass(this.options.requiredEntry, length > 0);\r\n        }\r\n    });\r\n\r\n    return $.mage.giftOptions;\r\n});\r\n","Magento_GiftMessage/js/action/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_GiftMessage/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'mage/url',\r\n    'Magento_Checkout/js/model/quote',\r\n    'underscore'\r\n], function (urlBuilder, storage, messageList, errorProcessor, url, quote, _) {\r\n    'use strict';\r\n\r\n    return function (giftMessage, remove) {\r\n        var serviceUrl;\r\n\r\n        url.setBaseUrl(giftMessage.getConfigValue('baseUrl'));\r\n\r\n        if (giftMessage.getConfigValue('isCustomerLoggedIn')) {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message', {});\r\n\r\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\r\n                serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message/:itemId', {\r\n                    itemId: giftMessage.itemId\r\n                });\r\n            }\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/gift-message', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n\r\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\r\n                serviceUrl = urlBuilder.createUrl(\r\n                    '/guest-carts/:cartId/gift-message/:itemId',\r\n                    {\r\n                        cartId: quote.getQuoteId(), itemId: giftMessage.itemId\r\n                    }\r\n                );\r\n            }\r\n        }\r\n        messageList.clear();\r\n\r\n        storage.post(\r\n            serviceUrl,\r\n            JSON.stringify({\r\n                'gift_message': giftMessage.getSubmitParams(remove)\r\n            })\r\n        ).done(function () {\r\n            giftMessage.reset();\r\n            _.each(giftMessage.getAfterSubmitCallbacks(), function (callback) {\r\n                if (_.isFunction(callback)) {\r\n                    callback();\r\n                }\r\n            });\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response);\r\n        });\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'underscore',\r\n    'mage/url'\r\n], function (uiElement, _, url) {\r\n    'use strict';\r\n\r\n    var provider = uiElement();\r\n\r\n    return function (itemId) {\r\n        var model = {\r\n            id: 'message-' + itemId,\r\n            itemId: itemId,\r\n            observables: {},\r\n            additionalOptions: [],\r\n            submitParams: [\r\n                'recipient',\r\n                'sender',\r\n                'message'\r\n            ],\r\n\r\n            /**\r\n             * Initialize.\r\n             */\r\n            initialize: function () {\r\n                var message = false;\r\n\r\n                this.getObservable('alreadyAdded')(false);\r\n\r\n                if (this.itemId == 'orderLevel') { //eslint-disable-line eqeqeq\r\n                    message = window.giftOptionsConfig.giftMessage.hasOwnProperty(this.itemId) ?\r\n                        window.giftOptionsConfig.giftMessage[this.itemId] :\r\n                        null;\r\n                } else {\r\n                    message =\r\n                        window.giftOptionsConfig.giftMessage.hasOwnProperty('itemLevel') &&\r\n                        window.giftOptionsConfig.giftMessage.itemLevel.hasOwnProperty(this.itemId) ?\r\n                            window.giftOptionsConfig.giftMessage.itemLevel[this.itemId].message :\r\n                            null;\r\n                }\r\n\r\n                if (_.isObject(message)) {\r\n                    this.getObservable('recipient')(message.recipient);\r\n                    this.getObservable('sender')(message.sender);\r\n                    this.getObservable('message')(message.message);\r\n                    this.getObservable('alreadyAdded')(true);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {String} key\r\n             * @return {*}\r\n             */\r\n            getObservable: function (key) {\r\n                this.initObservable(this.id, key);\r\n\r\n                return provider[this.getUniqueKey(this.id, key)];\r\n            },\r\n\r\n            /**\r\n             * @param {String} node\r\n             * @param {String} key\r\n             */\r\n            initObservable: function (node, key) {\r\n                if (node && !this.observables.hasOwnProperty(node)) {\r\n                    this.observables[node] = [];\r\n                }\r\n\r\n                if (key && this.observables[node].indexOf(key) === -1) {\r\n                    this.observables[node].push(key);\r\n                    provider.observe(this.getUniqueKey(node, key));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {String} node\r\n             * @param {String} key\r\n             * @return {String}\r\n             */\r\n            getUniqueKey: function (node, key) {\r\n                return node + '-' + key;\r\n            },\r\n\r\n            /**\r\n             * @param {String} key\r\n             * @return {null}\r\n             */\r\n            getConfigValue: function (key) {\r\n                return window.giftOptionsConfig.hasOwnProperty(key) ?\r\n                    window.giftOptionsConfig[key]\r\n                    : null;\r\n            },\r\n\r\n            /**\r\n             * Reset.\r\n             */\r\n            reset: function () {\r\n                this.getObservable('isClear')(true);\r\n            },\r\n\r\n            /**\r\n             * @return {Array}\r\n             */\r\n            getAfterSubmitCallbacks: function () {\r\n                var callbacks = [];\r\n\r\n                callbacks.push(this.afterSubmit);\r\n                _.each(this.additionalOptions, function (option) {\r\n                    if (_.isFunction(option.afterSubmit)) {\r\n                        callbacks.push(option.afterSubmit);\r\n                    }\r\n                });\r\n\r\n                return callbacks;\r\n            },\r\n\r\n            /**\r\n             * After submit.\r\n             */\r\n            afterSubmit: function () {\r\n                window.location.href = url.build('checkout/cart/updatePost') +\r\n                    '?form_key=' + window.checkoutConfig.formKey +\r\n                    '&cart[]';\r\n            },\r\n\r\n            /**\r\n             * @param {Boolean} remove\r\n             * @return {Object}\r\n             */\r\n            getSubmitParams: function (remove) {\r\n                var params = {},\r\n                    self = this;\r\n\r\n                _.each(this.submitParams, function (key) {\r\n                    var observable = provider[self.getUniqueKey(self.id, key)];\r\n\r\n                    if (_.isFunction(observable)) {\r\n                        params[key] = remove ? null : observable();\r\n                    }\r\n                });\r\n\r\n                if (this.additionalOptions.length) {\r\n                    params['extension_attributes'] = {};\r\n                }\r\n                _.each(this.additionalOptions, function (option) {\r\n                    if (_.isFunction(option.getSubmitParams)) {\r\n                        params['extension_attributes'] = _.extend(\r\n                            params['extension_attributes'],\r\n                            option.getSubmitParams(remove)\r\n                        );\r\n                    }\r\n                });\r\n\r\n                return params;\r\n            },\r\n\r\n            /**\r\n             * Check if gift message can be displayed\r\n             *\r\n             * @returns {Boolean}\r\n             */\r\n            isGiftMessageAvailable: function () {\r\n                var isGloballyAvailable,\r\n                    giftMessageConfig,\r\n                    itemConfig;\r\n\r\n                // itemId represent gift message level: 'orderLevel' constant or cart item ID\r\n                if (this.itemId === 'orderLevel') {\r\n                    return this.getConfigValue('isOrderLevelGiftOptionsEnabled');\r\n                }\r\n\r\n                // gift message product configuration must override system configuration\r\n                isGloballyAvailable = this.getConfigValue('isItemLevelGiftOptionsEnabled');\r\n                giftMessageConfig = window.giftOptionsConfig.giftMessage;\r\n                itemConfig = giftMessageConfig.hasOwnProperty('itemLevel') &&\r\n                    giftMessageConfig.itemLevel.hasOwnProperty(this.itemId) ?\r\n                    giftMessageConfig.itemLevel[this.itemId] :\r\n                    {};\r\n\r\n                return itemConfig.hasOwnProperty('is_available') ? itemConfig['is_available'] : isGloballyAvailable;\r\n            }\r\n        };\r\n\r\n        model.initialize();\r\n\r\n        return model;\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'ko'\r\n], function (_, ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        options: ko.observableArray([]),\r\n\r\n        /**\r\n         * @param {Object} option\r\n         */\r\n        addOption: function (option) {\r\n            if (!this.options().hasOwnProperty(option.itemId)) {\r\n                this.options.push({\r\n                        id: option.itemId, value: option\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} itemId\r\n         * @return {*}\r\n         */\r\n        getOptionByItemId: function (itemId) {\r\n            var option = null;\r\n\r\n            _.each(this.options(), function (data) {\r\n                if (data.id === itemId) {\r\n                    option = data.value;\r\n\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return option;\r\n        }\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/url-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/url-builder'\r\n], function ($, urlBuilder) {\r\n    'use strict';\r\n\r\n    return $.extend(urlBuilder, {\r\n        storeCode: window.giftOptionsConfig.storeCode\r\n    });\r\n});\r\n","Magento_GiftMessage/js/view/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_GiftMessage/js/model/gift-message',\r\n    'Magento_GiftMessage/js/model/gift-options',\r\n    'Magento_GiftMessage/js/action/gift-options'\r\n], function (Component, GiftMessage, giftOptions, giftOptionsService) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        formBlockVisibility: null,\r\n        resultBlockVisibility: null,\r\n        model: {},\r\n\r\n        /**\r\n         * Component init\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                model;\r\n\r\n            this._super()\r\n                .observe('formBlockVisibility')\r\n                .observe({\r\n                    'resultBlockVisibility': false\r\n                });\r\n\r\n            this.itemId = this.itemId || 'orderLevel';\r\n            model = new GiftMessage(this.itemId);\r\n            this.model = model;\r\n            this.isResultBlockVisible();\r\n            giftOptions.addOption(model);\r\n\r\n            this.model.getObservable('isClear').subscribe(function (value) {\r\n                if (value == true) { //eslint-disable-line eqeqeq\r\n                    self.formBlockVisibility(false);\r\n                    self.model.getObservable('alreadyAdded')(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Is reslt block visible\r\n         */\r\n        isResultBlockVisible: function () {\r\n            var self = this;\r\n\r\n            if (this.model.getObservable('alreadyAdded')()) {\r\n                this.resultBlockVisibility(true);\r\n            }\r\n            this.model.getObservable('additionalOptionsApplied').subscribe(function (value) {\r\n                if (value == true) { //eslint-disable-line eqeqeq\r\n                    self.resultBlockVisibility(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {String} key\r\n         * @return {*}\r\n         */\r\n        getObservable: function (key) {\r\n            return this.model.getObservable(key);\r\n        },\r\n\r\n        /**\r\n         * Hide\\Show form block\r\n         */\r\n        toggleFormBlockVisibility: function () {\r\n            if (!this.model.getObservable('alreadyAdded')()) {\r\n                this.formBlockVisibility(!this.formBlockVisibility());\r\n            } else {\r\n                this.resultBlockVisibility(!this.resultBlockVisibility());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Edit options\r\n         */\r\n        editOptions: function () {\r\n            this.resultBlockVisibility(false);\r\n            this.formBlockVisibility(true);\r\n        },\r\n\r\n        /**\r\n         * Delete options\r\n         */\r\n        deleteOptions: function () {\r\n            giftOptionsService(this.model, true);\r\n        },\r\n\r\n        /**\r\n         * Hide form block\r\n         */\r\n        hideFormBlock: function () {\r\n            this.formBlockVisibility(false);\r\n\r\n            if (this.model.getObservable('alreadyAdded')()) {\r\n                this.resultBlockVisibility(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        hasActiveOptions: function () {\r\n            var regionData = this.getRegion('additionalOptions'),\r\n                options = regionData(),\r\n                i;\r\n\r\n            for (i = 0; i < options.length; i++) {\r\n                if (options[i].isActive()) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return this.model.isGiftMessageAvailable();\r\n        },\r\n\r\n        /**\r\n         * Submit options\r\n         */\r\n        submitOptions: function () {\r\n            giftOptionsService(this.model);\r\n        }\r\n    });\r\n});\r\n","Magento_GoogleAnalytics/js/google-analytics.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        var allowServices = false,\r\n            allowedCookies,\r\n            allowedWebsites;\r\n\r\n        if (config.isCookieRestrictionModeEnabled) {\r\n            allowedCookies = $.mage.cookies.get(config.cookieName);\r\n\r\n            if (allowedCookies !== null) {\r\n                allowedWebsites = JSON.parse(allowedCookies);\r\n\r\n                if (allowedWebsites[config.currentWebsite] === 1) {\r\n                    allowServices = true;\r\n                }\r\n            }\r\n        } else {\r\n            allowServices = true;\r\n        }\r\n\r\n        if (allowServices) {\r\n            (function (i, s, o, g, r, a, m) {\r\n                i.GoogleAnalyticsObject = r;\r\n                i[r] = i[r] || function () {\r\n                        (i[r].q = i[r].q || []).push(arguments)\r\n                    }, i[r].l = 1 * new Date();\r\n                a = s.createElement(o),\r\n                    m = s.getElementsByTagName(o)[0];\r\n                a.async = 1;\r\n                a.src = g;\r\n                m.parentNode.insertBefore(a, m)\r\n            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\r\n\r\n            // Process page info\r\n            ga('create', config.pageTrackingData.accountId, 'auto');\r\n\r\n            if (config.pageTrackingData.isAnonymizedIpActive) {\r\n                ga('set', 'anonymizeIp', true);\r\n            }\r\n\r\n            // Process orders data\r\n            if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                ga('require', 'ec', 'ec.js');\r\n\r\n                ga('set', 'currencyCode', config.ordersTrackingData.currency);\r\n\r\n                // Collect product data for GA\r\n                if (config.ordersTrackingData.products) {\r\n                    $.each(config.ordersTrackingData.products, function (index, value) {\r\n                        ga('ec:addProduct', value);\r\n                    });\r\n                }\r\n\r\n                // Collect orders data for GA\r\n                if (config.ordersTrackingData.orders) {\r\n                    $.each(config.ordersTrackingData.orders, function (index, value) {\r\n                        ga('ec:setAction', 'purchase', value);\r\n                    });\r\n                }\r\n\r\n                ga('send', 'pageview');\r\n            } else {\r\n                // Process Data if not orders\r\n                ga('send', 'pageview' + config.pageTrackingData.optPageUrl);\r\n            }\r\n        }\r\n    }\r\n});\r\n","Magento_GoogleGtag/js/google-adwords.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        if (!window.gtag) {\r\n            // Inject Global Site Tag\r\n            var gtagScript = document.createElement('script');\r\n            gtagScript.type = 'text/javascript';\r\n            gtagScript.async = true;\r\n            gtagScript.src = config.gtagSiteSrc;\r\n            document.head.appendChild(gtagScript);\r\n\r\n            window.dataLayer = window.dataLayer || [];\r\n\r\n            function gtag(){dataLayer.push(arguments);}\r\n            gtag('js', new Date());\r\n            gtag('set', 'developer_id.dYjhlMD', true);\r\n            if (config.conversionLabel) {\r\n                gtag(\r\n                    'event',\r\n                    'conversion',\r\n                    {'send_to': config.conversionId + '/'\r\n                            + config.conversionLabel}\r\n                );\r\n            }\r\n        } else {\r\n            gtag('config', config.conversionId);\r\n        }\r\n    }\r\n});\r\n","Magento_GoogleGtag/js/google-analytics.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        var allowServices = false,\r\n            allowedCookies,\r\n            allowedWebsites,\r\n            measurementId;\r\n\r\n        if (config.isCookieRestrictionModeEnabled) {\r\n            allowedCookies = $.mage.cookies.get(config.cookieName);\r\n\r\n            if (allowedCookies !== null) {\r\n                allowedWebsites = JSON.parse(allowedCookies);\r\n\r\n                if (allowedWebsites[config.currentWebsite] === 1) {\r\n                    allowServices = true;\r\n                }\r\n            }\r\n        } else {\r\n            allowServices = true;\r\n        }\r\n\r\n        if (allowServices) {\r\n            /* Global site tag (gtag.js) - Google Analytics */\r\n            measurementId = config.pageTrackingData.measurementId;\r\n            if (window.gtag) {\r\n                gtag('config', measurementId, { 'anonymize_ip': true });\r\n                // Purchase Event\r\n                if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                    var purchaseObject = config.ordersTrackingData.orders[0];\r\n                    purchaseObject['items'] = config.ordersTrackingData.products;\r\n                    gtag('event', 'purchase', purchaseObject);\r\n                }\r\n            } else {\r\n                (function(d,s,u){\r\n                    var gtagScript = d.createElement(s);\r\n                    gtagScript.type = 'text/javascript';\r\n                    gtagScript.async = true;\r\n                    gtagScript.src = u;\r\n                    d.head.insertBefore(gtagScript, d.head.children[0]);\r\n                })(document, 'script', 'https://www.googletagmanager.com/gtag/js?id=' + measurementId);\r\n                window.dataLayer = window.dataLayer || [];\r\n                function gtag(){dataLayer.push(arguments);}\r\n                gtag('js', new Date());\r\n                gtag('set', 'developer_id.dYjhlMD', true);\r\n                gtag('config', measurementId, { 'anonymize_ip': true });\r\n                // Purchase Event\r\n                if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                    var purchaseObject = config.ordersTrackingData.orders[0];\r\n                    purchaseObject['items'] = config.ordersTrackingData.products;\r\n                    gtag('event', 'purchase', purchaseObject);\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n","Magento_GroupedProduct/js/product-ids-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/product/view/product-ids',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function ($, productIds, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns id's of products in form.\r\n     *\r\n     * @param {Object} config\r\n     * @param {HTMLElement} element\r\n     * @return {Array}\r\n     */\r\n    return function (config, element) {\r\n        $(element).find('div[data-product-id]').each(function () {\r\n            productIds.push($(this).data('productId').toString());\r\n            productInfo.push(\r\n                {\r\n                    'id': $(this).data('productId').toString()\r\n                }\r\n            );\r\n        });\r\n\r\n        return productIds();\r\n    };\r\n});\r\n","Magento_InstantPurchase/js/view/instant-purchase.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/url',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'text!Magento_InstantPurchase/template/confirmation.html',\r\n    'mage/validation'\r\n], function (ko, $, _, Component, confirm, customerData, urlBuilder, mageTemplate, $t, confirmationTemplate) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InstantPurchase/instant-purchase',\r\n            buttonText: $t('Instant Purchase'),\r\n            purchaseUrl: urlBuilder.build('instantpurchase/button/placeOrder'),\r\n            showButton: false,\r\n            paymentToken: null,\r\n            shippingAddress: null,\r\n            billingAddress: null,\r\n            shippingMethod: null,\r\n            productFormSelector: '#product_addtocart_form',\r\n            confirmationTitle: $t('Instant Purchase Confirmation'),\r\n            confirmationData: {\r\n                message: $t('Are you sure you want to place order and pay?'),\r\n                shippingAddressTitle: $t('Shipping Address'),\r\n                billingAddressTitle: $t('Billing Address'),\r\n                paymentMethodTitle: $t('Payment Method'),\r\n                shippingMethodTitle: $t('Shipping Method')\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var instantPurchase = customerData.get('instant-purchase');\r\n\r\n            this._super();\r\n\r\n            this.setPurchaseData(instantPurchase());\r\n            instantPurchase.subscribe(this.setPurchaseData, this);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('showButton paymentToken shippingAddress billingAddress shippingMethod');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set data from customerData.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setPurchaseData: function (data) {\r\n            this.showButton(data.available);\r\n            this.paymentToken(data.paymentToken);\r\n            this.shippingAddress(data.shippingAddress);\r\n            this.billingAddress(data.billingAddress);\r\n            this.shippingMethod(data.shippingMethod);\r\n        },\r\n\r\n        /**\r\n         * Confirmation method\r\n         */\r\n        instantPurchase: function () {\r\n            var form = $(this.productFormSelector),\r\n                confirmTemplate = mageTemplate(confirmationTemplate),\r\n                confirmData = _.extend({}, this.confirmationData, {\r\n                    paymentToken: this.paymentToken().summary,\r\n                    shippingAddress: this.shippingAddress().summary,\r\n                    billingAddress: this.billingAddress().summary,\r\n                    shippingMethod: this.shippingMethod().summary\r\n                });\r\n\r\n            if (!(form.validation() && form.validation('isValid'))) {\r\n                return;\r\n            }\r\n\r\n            confirm({\r\n                title: this.confirmationTitle,\r\n                content: confirmTemplate({\r\n                    data: confirmData\r\n                }),\r\n                actions: {\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        $.ajax({\r\n                            url: this.purchaseUrl,\r\n                            data: form.serialize(),\r\n                            type: 'post',\r\n                            dataType: 'json',\r\n\r\n                            /** Show loader before send */\r\n                            beforeSend: function () {\r\n                                $('body').trigger('processStart');\r\n                            }\r\n                        }).always(function () {\r\n                            $('body').trigger('processStop');\r\n                        });\r\n                    }.bind(this)\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_InventoryConfigurableProductFrontendUi/js/configurable-variation-qty.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Configurable variation left qty.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/url'\r\n], function ($, _, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (productSku, salesChannel, salesChannelCode) {\r\n        var selectorInfoStockSkuQty = '.availability.only',\r\n            selectorInfoStockSkuQtyValue = '.availability.only > strong',\r\n            productQtyInfoBlock = $(selectorInfoStockSkuQty),\r\n            productQtyInfo = $(selectorInfoStockSkuQtyValue);\r\n\r\n        if (!_.isUndefined(productSku) && productSku !== null) {\r\n            $.ajax({\r\n                url: urlBuilder.build('inventory_catalog/product/getQty/'),\r\n                dataType: 'json',\r\n                data: {\r\n                    'sku': productSku,\r\n                    'channel': salesChannel,\r\n                    'salesChannelCode': salesChannelCode\r\n                }\r\n            }).done(function (response) {\r\n                if (response.qty !== null && response.qty > 0) {\r\n                    productQtyInfo.text(response.qty);\r\n                    productQtyInfoBlock.show();\r\n                } else {\r\n                    productQtyInfoBlock.hide();\r\n                }\r\n            }).fail(function () {\r\n                productQtyInfoBlock.hide();\r\n            });\r\n        } else {\r\n            productQtyInfoBlock.hide();\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryConfigurableProductFrontendUi/js/configurable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'configurableVariationQty',\r\n    'jquery-ui-modules/widget'\r\n], function ($, configurableVariationQty) {\r\n    'use strict';\r\n\r\n    return function (configurable) {\r\n        $.widget('mage.configurable', configurable, {\r\n\r\n            /** @inheritdoc */\r\n            _configureElement: function (element) {\r\n                var salesChannel = this.options.spConfig.channel,\r\n                    salesChannelCode = this.options.spConfig.salesChannelCode,\r\n                    productVariationsSku = this.options.spConfig.sku;\r\n\r\n                this._super(element);\r\n                configurableVariationQty(productVariationsSku[this.simpleProduct], salesChannel, salesChannelCode);\r\n            }\r\n        });\r\n\r\n        return $.mage.configurable;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/checkout-data-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Customer/js/customer-data'\r\n], function (\r\n    storage\r\n) {\r\n    'use strict';\r\n\r\n    return function (checkoutData) {\r\n\r\n        var cacheKey = 'checkout-data',\r\n\r\n            /**\r\n             * @param {Object} data\r\n             */\r\n            saveData = function (data) {\r\n                storage.set(cacheKey, data);\r\n            },\r\n\r\n            /**\r\n             * @return {Object}\r\n             */\r\n            getData = function () {\r\n                //Makes sure that checkout storage is initiated (any method can be used)\r\n                checkoutData.getSelectedShippingAddress();\r\n\r\n                return storage.get(cacheKey)();\r\n            };\r\n\r\n        /**\r\n         * Save the pickup address in persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        checkoutData.setSelectedPickupAddress = function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedPickupAddress = data;\r\n            saveData(obj);\r\n        };\r\n\r\n        /**\r\n         * Get the pickup address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        checkoutData.getSelectedPickupAddress = function () {\r\n            return getData().selectedPickupAddress || null;\r\n        };\r\n\r\n        return checkoutData;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/checkout-data-resolver-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter'\r\n], function (\r\n    wrapper,\r\n    checkoutData,\r\n    selectShippingAddress,\r\n    addressConverter,\r\n    pickupAddressConverter\r\n) {\r\n    'use strict';\r\n\r\n    return function (checkoutDataResolver) {\r\n        checkoutDataResolver.resolveShippingAddress = wrapper.wrapSuper(\r\n            checkoutDataResolver.resolveShippingAddress,\r\n            function () {\r\n                var shippingAddress,\r\n                    pickUpAddress;\r\n\r\n                if (checkoutData.getSelectedPickupAddress() && checkoutData.getSelectedShippingAddress()) {\r\n                    shippingAddress = addressConverter.formAddressDataToQuoteAddress(\r\n                        checkoutData.getSelectedPickupAddress()\r\n                    );\r\n                    pickUpAddress = pickupAddressConverter.formatAddressToPickupAddress(\r\n                        shippingAddress\r\n                    );\r\n\r\n                    if (pickUpAddress.getKey() === checkoutData.getSelectedShippingAddress()) {\r\n                        selectShippingAddress(pickUpAddress);\r\n\r\n                        return;\r\n                    }\r\n                }\r\n                this._super();\r\n            });\r\n\r\n        return checkoutDataResolver;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Format address to use in store pickup\r\n         *\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        formatAddressToPickupAddress: function (address) {\r\n            var sourceCode = _.findWhere(address.customAttributes, {\r\n                'attribute_code': 'sourceCode'\r\n            });\r\n\r\n            if (!sourceCode &&\r\n                !_.isEmpty(address.extensionAttributes) &&\r\n                address.extensionAttributes['pickup_location_code']\r\n            ) {\r\n                sourceCode = {\r\n                    value: address.extensionAttributes['pickup_location_code']\r\n                };\r\n            }\r\n\r\n            if (sourceCode && address.getType() !== 'store-pickup-address') {\r\n                address = _.extend({}, address, {\r\n                    saveInAddressBook: 0,\r\n\r\n                    /**\r\n                     * Is address can be used for billing\r\n                     *\r\n                     * @return {Boolean}\r\n                     */\r\n                    canUseForBilling: function () {\r\n                        return false;\r\n                    },\r\n\r\n                    /**\r\n                     * Returns address type\r\n                     *\r\n                     * @return {String}\r\n                     */\r\n                    getType: function () {\r\n                        return 'store-pickup-address';\r\n                    },\r\n\r\n                    /**\r\n                     * Returns address key\r\n                     *\r\n                     * @return {*}\r\n                     */\r\n                    getKey: function () {\r\n                        return this.getType() + sourceCode.value;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return address;\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/pickup-locations-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'knockout',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/resource-url-manager',\r\n    'mage/storage',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'underscore',\r\n    'mage/translate',\r\n    'mage/url',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter'\r\n], function (\r\n    $,\r\n    ko,\r\n    resourceUrlManager,\r\n    storage,\r\n    customerData,\r\n    checkoutData,\r\n    addressConverter,\r\n    selectShippingAddressAction,\r\n    _,\r\n    $t,\r\n    url,\r\n    pickupAddressConverter\r\n) {\r\n    'use strict';\r\n\r\n    var websiteCode = window.checkoutConfig.websiteCode,\r\n        countryData = customerData.get('directory-data');\r\n\r\n    return {\r\n        isLoading: ko.observable(false),\r\n        selectedLocation: ko.observable(null),\r\n        locationsCache: [],\r\n\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         *\r\n         * @param {String} sourceCode\r\n         */\r\n        getLocation: function (sourceCode) {\r\n            var serviceUrl = resourceUrlManager.getUrlForPickupLocation(websiteCode, sourceCode);\r\n\r\n            this.isLoading(true);\r\n\r\n            return storage\r\n                .get(serviceUrl, {}, false)\r\n                .then(function (result) {\r\n                    var addresses = result.items || [],\r\n                        address = addresses[0] || {};\r\n\r\n                    return this.formatAddress(address);\r\n                }.bind(this))\r\n                .fail(function (response) {\r\n                    this.processError(response);\r\n\r\n                    return [];\r\n                }.bind(this))\r\n                .always(function () {\r\n                    this.isLoading(false);\r\n                }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Get nearby pickup locations based on given search criteria.\r\n         *\r\n         * @param {Object} searchCriteria - Search criteria object.\r\n         * @see Magento/InventoryInStorePickup/Model/SearchCriteria/GetNearbyLocationsCriteria.php\r\n         */\r\n        getNearbyLocations: function (searchCriteria) {\r\n            var self = this,\r\n                serviceUrl = resourceUrlManager.getUrlForNearbyPickupLocations(websiteCode, searchCriteria);\r\n\r\n            if (self.locationsCache[serviceUrl]) {\r\n                return $.Deferred().resolve(self.locationsCache[serviceUrl]).promise();\r\n            }\r\n\r\n            self.isLoading(true);\r\n\r\n            return storage\r\n                .get(serviceUrl, {}, false)\r\n                .then(function (result) {\r\n                    self.locationsCache[serviceUrl] = _.map(result.items, function (address) {\r\n                        return self.formatAddress(address);\r\n                    });\r\n\r\n                    return self.locationsCache[serviceUrl];\r\n                })\r\n                .fail(function (response) {\r\n                    self.processError(response);\r\n\r\n                    return [];\r\n                })\r\n                .always(function () {\r\n                    self.isLoading(false);\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Select location for sipping.\r\n         *\r\n         * @param {Object} location\r\n         * @returns void\r\n         */\r\n        selectForShipping: function (location) {\r\n            var address = $.extend(\r\n                {},\r\n                addressConverter.formAddressDataToQuoteAddress({\r\n                    firstname: location.name,\r\n                    lastname: 'Store',\r\n                    street: location.street,\r\n                    city: location.city,\r\n                    postcode: location.postcode,\r\n                    'country_id': location['country_id'],\r\n                    telephone: location.telephone,\r\n                    'region_id': location['region_id'],\r\n                    'save_in_address_book': 0,\r\n                    'extension_attributes': {\r\n                        'pickup_location_code': location['pickup_location_code']\r\n                    }\r\n                }));\r\n\r\n            address = pickupAddressConverter.formatAddressToPickupAddress(address);\r\n            this.selectedLocation(location);\r\n            selectShippingAddressAction(address);\r\n            checkoutData.setSelectedShippingAddress(address.getKey());\r\n            checkoutData.setSelectedPickupAddress(\r\n                addressConverter.quoteAddressToFormAddressData(address)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Formats address returned by REST endpoint to match checkout address field naming.\r\n         *\r\n         * @param {Object} address - Address object returned by REST endpoint.\r\n         */\r\n        formatAddress: function (address) {\r\n            return {\r\n                name: address.name,\r\n                description: address.description,\r\n                latitude: address.latitude,\r\n                longitude: address.longitude,\r\n                street: [address.street],\r\n                city: address.city,\r\n                postcode: address.postcode,\r\n                'country_id': address['country_id'],\r\n                country: this.getCountryName(address['country_id']),\r\n                telephone: address.phone,\r\n                'region_id': address['region_id'],\r\n                region: this.getRegionName(\r\n                    address['country_id'],\r\n                    address['region_id']\r\n                ),\r\n                'pickup_location_code': address['pickup_location_code']\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get country name by id.\r\n         *\r\n         * @param {*} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] !== undefined ?\r\n                countryData()[countryId].name\r\n                : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Returns region name based on given country and region identifiers.\r\n         *\r\n         * @param {String} countryId - Country identifier.\r\n         * @param {String} regionId - Region identifier.\r\n         */\r\n        getRegionName: function (countryId, regionId) {\r\n            var regions = countryData()[countryId] ?\r\n                countryData()[countryId].regions\r\n                : null;\r\n\r\n            return regions && regions[regionId] ? regions[regionId].name : '';\r\n        },\r\n\r\n        /**\r\n         * Process response errors.\r\n         *\r\n         * @param {Object} response\r\n         * @returns void\r\n         */\r\n        processError: function (response) {\r\n            var expr = /([%])\\w+/g,\r\n                error;\r\n\r\n            if (response.status === 401) {\r\n                //eslint-disable-line eqeqeq\r\n                window.location.replace(url.build('customer/account/login/'));\r\n\r\n                return;\r\n            }\r\n\r\n            try {\r\n                error = JSON.parse(response.responseText);\r\n            } catch (exception) {\r\n                error = $t(\r\n                    'Something went wrong with your request. Please try again later.'\r\n                );\r\n            }\r\n\r\n            if (error.hasOwnProperty('parameters')) {\r\n                error = error.message.replace(expr, function (varName) {\r\n                    varName = varName.substr(1);\r\n\r\n                    if (error.parameters.hasOwnProperty(varName)) {\r\n                        return error.parameters[varName];\r\n                    }\r\n\r\n                    return error.parameters.shift();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns selected pick up address from local storage\r\n         *\r\n         * @returns {Object|null}\r\n         */\r\n        getSelectedPickupAddress: function () {\r\n            var shippingAddress,\r\n                pickUpAddress;\r\n\r\n            if (checkoutData.getSelectedPickupAddress()) {\r\n                shippingAddress = addressConverter.formAddressDataToQuoteAddress(\r\n                    checkoutData.getSelectedPickupAddress()\r\n                );\r\n                pickUpAddress = pickupAddressConverter.formatAddressToPickupAddress(\r\n                    shippingAddress\r\n                );\r\n\r\n                return pickUpAddress;\r\n            }\r\n\r\n            return null;\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/quote-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter'\r\n], function (ko, pickupAddressConverter) {\r\n    'use strict';\r\n\r\n    return function (quote) {\r\n        var shippingAddress = quote.shippingAddress;\r\n\r\n        /**\r\n         * Makes sure that shipping address gets appropriate type when it points\r\n         * to a store pickup location.\r\n         */\r\n        quote.shippingAddress = ko.pureComputed({\r\n            /**\r\n             * Return quote shipping address\r\n             */\r\n            read: function () {\r\n                return shippingAddress();\r\n            },\r\n\r\n            /**\r\n             * Set quote shipping address\r\n             */\r\n            write: function (address) {\r\n                shippingAddress(\r\n                    pickupAddressConverter.formatAddressToPickupAddress(address)\r\n                );\r\n            }\r\n        });\r\n\r\n        return quote;\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/resource-url-manager.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery', 'Magento_Checkout/js/model/resource-url-manager'], function (\r\n    $,\r\n    resourceUrlManager\r\n) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Returns URL for REST API to fetch nearby pickup locations defined for given sales channel.\r\n         *\r\n         * @param {String} salesChannelCode - Code of the sales channel.\r\n         * @param {Object} searchCriteria\r\n         */\r\n        getUrlForNearbyPickupLocations: function (\r\n            salesChannelCode,\r\n            searchCriteria\r\n        ) {\r\n            var urls = {\r\n                    default: '/inventory/in-store-pickup/pickup-locations/'\r\n                },\r\n                criteria = {\r\n                    searchRequest: {\r\n                        scopeCode: salesChannelCode\r\n                    }\r\n                };\r\n\r\n            searchCriteria = {\r\n                searchRequest: searchCriteria\r\n            };\r\n\r\n            return (\r\n                resourceUrlManager.getUrl(urls, {}) +\r\n                '?' +\r\n                $.param($.extend(true, criteria, searchCriteria))\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Returns URL for REST API to fetch all pickup locations defined for given sales channel.\r\n         *\r\n         * @param {String} salesChannelType - Type of the sales channel, e.g. website.\r\n         * @param {String} salesChannelCode - Code of the sales channel.\r\n         */\r\n        getUrlForPickupLocationsAssignedToSalesChannel: function (\r\n            salesChannelType,\r\n            salesChannelCode\r\n        ) {\r\n            var params = {\r\n                    salesChannelType: salesChannelType,\r\n                    salesChannelCode: salesChannelCode\r\n                },\r\n                urls = {\r\n                    default: '/inventory/in-store-pickup/pickup-locations-assigned-to-sales-channel/' +\r\n                        ':salesChannelType/:salesChannelCode'\r\n                };\r\n\r\n            return resourceUrlManager.getUrl(urls, params);\r\n        },\r\n\r\n        /**\r\n         * Returns URL for REST API to fetch pickup location with given code defined for given sales channel.\r\n         *\r\n         * @param {String} salesChannelCode - Code of the sales channel.\r\n         * @param {String} pickupLocationCode - Code of the pickup location.\r\n         */\r\n        getUrlForPickupLocation: function (\r\n            salesChannelCode,\r\n            pickupLocationCode\r\n        ) {\r\n            var urls = {\r\n                    default: '/inventory/in-store-pickup/pickup-locations/'\r\n                },\r\n                searchRequest = {\r\n                    searchRequest: {\r\n                        filters: {\r\n                            pickupLocationCode: {\r\n                                value: pickupLocationCode\r\n                            }\r\n                        },\r\n                        scopeCode: salesChannelCode\r\n                    }\r\n                };\r\n\r\n            return resourceUrlManager.getUrl(urls, {}) +\r\n                '?' +\r\n                $.param(searchRequest);\r\n        }\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/model/shipping-rate-processor/store-pickup-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {}\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/shipping-information-ext.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    var storePickupShippingInformation = {\r\n        defaults: {\r\n            template: 'Magento_InventoryInStorePickupFrontend/shipping-information'\r\n        },\r\n\r\n        /**\r\n         * Get shipping method title based on delivery method.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                locationName = '',\r\n                title;\r\n\r\n            if (!this.isStorePickup()) {\r\n\r\n                return this._super();\r\n            }\r\n\r\n            title = shippingMethod['carrier_title'] + ' - ' + shippingMethod['method_title'];\r\n\r\n            if (quote.shippingAddress().firstname !== undefined) {\r\n                locationName = quote.shippingAddress().firstname + ' ' + quote.shippingAddress().lastname;\r\n                title += ' \"' + locationName + '\"';\r\n            }\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Get is store pickup delivery method selected.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isStorePickup: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                isStorePickup = false;\r\n\r\n            if (shippingMethod !== null) {\r\n                isStorePickup = shippingMethod['carrier_code'] === 'instore' &&\r\n                    shippingMethod['method_code'] === 'pickup';\r\n            }\r\n\r\n            return isStorePickup;\r\n        }\r\n    };\r\n\r\n    return function (shippingInformation) {\r\n        return shippingInformation.extend(storePickupShippingInformation);\r\n    };\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/store-pickup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'underscore',\r\n    'jquery',\r\n    'knockout',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/shipping-rate-service',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/shipping-rate-processor/store-pickup-address',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-locations-service',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-address-converter',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Checkout/js/action/select-shipping-address'\r\n], function (\r\n    Component,\r\n    _,\r\n    $,\r\n    ko,\r\n    registry,\r\n    quote,\r\n    selectShippingMethodAction,\r\n    checkoutData,\r\n    shippingService,\r\n    stepNavigator,\r\n    shippingRateService,\r\n    shippingRateProcessor,\r\n    pickupLocationsService,\r\n    pickupAddressConverter,\r\n    checkoutDataResolver,\r\n    selectShippingAddress\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InventoryInStorePickupFrontend/store-pickup',\r\n            deliveryMethodSelectorTemplate: 'Magento_InventoryInStorePickupFrontend/delivery-method-selector',\r\n            isVisible: false,\r\n            isAvailable: false,\r\n            isStorePickupSelected: false,\r\n            rate: {\r\n                'carrier_code': 'instore',\r\n                'method_code': 'pickup'\r\n            },\r\n            nearbySearchLimit: 50,\r\n            defaultCountry: window.checkoutConfig.defaultCountryId,\r\n            delimiter: window.checkoutConfig.storePickupApiSearchTermDelimiter,\r\n            rates: shippingService.getShippingRates(),\r\n            inStoreMethod: null,\r\n            lastSelectedNonPickUpShippingAddress: null\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            shippingRateService.registerProcessor('store-pickup-address', shippingRateProcessor);\r\n\r\n            this.convertAddressType(quote.shippingAddress());\r\n\r\n            this.isStorePickupSelected.subscribe(function () {\r\n                this.preselectLocation();\r\n            }, this);\r\n            this.preselectLocation();\r\n\r\n            this.syncWithShipping();\r\n        },\r\n\r\n        /**\r\n         * Init component observable variables\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super().observe(['isVisible']);\r\n\r\n            this.isStorePickupSelected = ko.pureComputed(function () {\r\n                return _.isMatch(quote.shippingMethod(), this.rate);\r\n            }, this);\r\n\r\n            this.isAvailable = ko.pureComputed(function () {\r\n                return _.findWhere(this.rates(), {\r\n                    'carrier_code': this.rate['carrier_code'],\r\n                    'method_code': this.rate['method_code']\r\n                });\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Synchronize store pickup visibility with shipping step.\r\n         *\r\n         * @returns void\r\n         */\r\n        syncWithShipping: function () {\r\n            var shippingStep = _.findWhere(stepNavigator.steps(), {\r\n                code: 'shipping'\r\n            });\r\n\r\n            shippingStep.isVisible.subscribe(function (isShippingVisible) {\r\n                this.isVisible(this.isAvailable && isShippingVisible);\r\n            }, this);\r\n            this.isVisible(this.isAvailable && shippingStep.isVisible());\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        selectShipping: function () {\r\n            var nonPickupShippingMethod = _.find(\r\n                this.rates(),\r\n                function (rate) {\r\n                    return (\r\n                        rate['carrier_code'] !== this.rate['carrier_code'] &&\r\n                        rate['method_code'] !== this.rate['method_code']\r\n                    );\r\n                },\r\n                this\r\n            ),\r\n                nonPickupShippingAddress;\r\n\r\n            checkoutData.setSelectedShippingAddress(this.lastSelectedNonPickUpShippingAddress);\r\n            this.selectShippingMethod(nonPickupShippingMethod);\r\n\r\n            if (this.isStorePickupAddress(quote.shippingAddress())) {\r\n                nonPickupShippingAddress = checkoutDataResolver.getShippingAddressFromCustomerAddressList();\r\n\r\n                if (nonPickupShippingAddress) {\r\n                    selectShippingAddress(nonPickupShippingAddress);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        selectStorePickup: function () {\r\n            var pickupShippingMethod = _.findWhere(\r\n                this.rates(),\r\n                {\r\n                    'carrier_code': this.rate['carrier_code'],\r\n                    'method_code': this.rate['method_code']\r\n                },\r\n                this\r\n            );\r\n\r\n            this.lastSelectedNonPickUpShippingAddress = checkoutData.getSelectedShippingAddress();\r\n            checkoutData.setSelectedShippingAddress(null);\r\n            this.preselectLocation();\r\n            this.selectShippingMethod(pickupShippingMethod);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} shippingMethod\r\n         */\r\n        selectShippingMethod: function (shippingMethod) {\r\n            selectShippingMethodAction(shippingMethod);\r\n            checkoutData.setSelectedShippingRate(\r\n                shippingMethod ? shippingMethod['carrier_code'] + '_' + shippingMethod['method_code'] : null\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @param {Object} shippingAddress\r\n         * @returns void\r\n         */\r\n        convertAddressType: function (shippingAddress) {\r\n            var pickUpAddress;\r\n\r\n            if (\r\n                !this.isStorePickupAddress(shippingAddress) &&\r\n                this.isStorePickupSelected()\r\n            ) {\r\n                pickUpAddress = pickupAddressConverter.formatAddressToPickupAddress(shippingAddress);\r\n\r\n                if (quote.shippingAddress() !== pickUpAddress) {\r\n                    quote.shippingAddress(pickUpAddress);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        preselectLocation: function () {\r\n            var selectedLocation,\r\n                shippingAddress,\r\n                selectedPickupAddress,\r\n                customAttributes,\r\n                selectedSource,\r\n                selectedSourceCode,\r\n                nearestLocation,\r\n                productsInfo = [],\r\n                items = quote.getItems();\r\n\r\n            if (!this.isStorePickupSelected()) {\r\n                return;\r\n            }\r\n\r\n            selectedLocation = pickupLocationsService.selectedLocation();\r\n\r\n            if (selectedLocation) {\r\n                pickupLocationsService.selectForShipping(selectedLocation);\r\n\r\n                return;\r\n            }\r\n\r\n            shippingAddress = quote.shippingAddress();\r\n            customAttributes = shippingAddress.customAttributes || [];\r\n            selectedSource = _.findWhere(customAttributes, {\r\n                'attribute_code': 'sourceCode'\r\n            });\r\n\r\n            if (selectedSource) {\r\n                selectedSourceCode = selectedSource.value;\r\n            }\r\n\r\n            if (!selectedSourceCode) {\r\n                selectedSourceCode = this.getPickupLocationCodeFromAddress(shippingAddress);\r\n            }\r\n\r\n            if (!selectedSourceCode) {\r\n                selectedPickupAddress = pickupLocationsService.getSelectedPickupAddress();\r\n                selectedSourceCode = this.getPickupLocationCodeFromAddress(selectedPickupAddress);\r\n            }\r\n\r\n            if (selectedSourceCode) {\r\n                pickupLocationsService\r\n                    .getLocation(selectedSourceCode)\r\n                    .then(function (location) {\r\n                        pickupLocationsService.selectForShipping(location);\r\n                    });\r\n            } else if (shippingAddress.city && shippingAddress.postcode) {\r\n                _.each(items, function (item) {\r\n                    if (item['qty_options'] === undefined || item['qty_options'].length === 0) {\r\n                        productsInfo.push(\r\n                            {\r\n                                sku: item.sku\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n                pickupLocationsService\r\n                    .getNearbyLocations({\r\n                        area: {\r\n                            radius: this.nearbySearchRadius,\r\n                            searchTerm: shippingAddress.postcode + this.delimiter +\r\n                                        shippingAddress.countryId || this.defaultCountry\r\n                        },\r\n                        extensionAttributes: {\r\n                            productsInfo: productsInfo\r\n                        },\r\n                        pageSize: this.nearbySearchLimit\r\n                    })\r\n                    .then(function (locations) {\r\n                        nearestLocation = locations[0];\r\n\r\n                        if (nearestLocation) {\r\n                            pickupLocationsService.selectForShipping(\r\n                                nearestLocation\r\n                            );\r\n                        }\r\n                    });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @returns {Boolean}\r\n         */\r\n        isStorePickupAddress: function (address) {\r\n            return address.getType() === 'store-pickup-address';\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @returns {String|null}\r\n         */\r\n        getPickupLocationCodeFromAddress: function (address) {\r\n            if (address &&\r\n                !_.isEmpty(address.extensionAttributes) &&\r\n                address.extensionAttributes['pickup_location_code']\r\n            ) {\r\n                return address.extensionAttributes['pickup_location_code'];\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/store-selector.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/modal/modal',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/set-shipping-information',\r\n    'Magento_InventoryInStorePickupFrontend/js/model/pickup-locations-service'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    registry,\r\n    modal,\r\n    quote,\r\n    customer,\r\n    stepNavigator,\r\n    addressConverter,\r\n    setShippingInformationAction,\r\n    pickupLocationsService\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InventoryInStorePickupFrontend/store-selector',\r\n            selectedLocationTemplate:\r\n                'Magento_InventoryInStorePickupFrontend/store-selector/selected-location',\r\n            storeSelectorPopupTemplate:\r\n                'Magento_InventoryInStorePickupFrontend/store-selector/popup',\r\n            storeSelectorPopupItemTemplate:\r\n                'Magento_InventoryInStorePickupFrontend/store-selector/popup-item',\r\n            loginFormSelector:\r\n                '#store-selector form[data-role=email-with-possible-login]',\r\n            defaultCountryId: window.checkoutConfig.defaultCountryId,\r\n            delimiter: window.checkoutConfig.storePickupApiSearchTermDelimiter,\r\n            selectedLocation: pickupLocationsService.selectedLocation,\r\n            quoteIsVirtual: quote.isVirtual,\r\n            searchQuery: '',\r\n            nearbyLocations: null,\r\n            isLoading: pickupLocationsService.isLoading,\r\n            popup: null,\r\n            searchDebounceTimeout: 300,\r\n            imports: {\r\n                nearbySearchRadius: '${ $.parentName }:nearbySearchRadius',\r\n                nearbySearchLimit: '${ $.parentName }:nearbySearchLimit'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init component\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var updateNearbyLocations, country;\r\n\r\n            this._super();\r\n\r\n            updateNearbyLocations = _.debounce(function (searchQuery) {\r\n                country = quote.shippingAddress() && quote.shippingAddress().countryId ?\r\n                    quote.shippingAddress().countryId : this.defaultCountryId;\r\n                searchQuery = this.getSearchTerm(searchQuery, country);\r\n                this.updateNearbyLocations(searchQuery);\r\n            }, this.searchDebounceTimeout).bind(this);\r\n            this.searchQuery.subscribe(updateNearbyLocations);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init component observable variables\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            return this._super().observe(['nearbyLocations', 'searchQuery']);\r\n        },\r\n\r\n        /**\r\n         * Set shipping information handler\r\n         */\r\n        setPickupInformation: function () {\r\n            if (this.validatePickupInformation()) {\r\n                setShippingInformationAction().done(function () {\r\n                    stepNavigator.next();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPopup: function () {\r\n            if (!this.popup) {\r\n                this.popup = modal(\r\n                    this.popUpList.options,\r\n                    $(this.popUpList.element)\r\n                );\r\n            }\r\n\r\n            return this.popup;\r\n        },\r\n\r\n        /**\r\n         * Get Search Term from search query and country.\r\n         *\r\n         * @param {String} searchQuery\r\n         * @param {String} country\r\n         * @returns {String}\r\n         */\r\n        getSearchTerm: function (searchQuery, country) {\r\n            return searchQuery ? searchQuery + this.delimiter + country : searchQuery;\r\n        },\r\n\r\n        /**\r\n         * @returns void\r\n         */\r\n        openPopup: function () {\r\n            var shippingAddress = quote.shippingAddress(),\r\n                country = shippingAddress.countryId ? shippingAddress.countryId :\r\n                this.defaultCountryId,\r\n                searchTerm = '';\r\n\r\n            this.getPopup().openModal();\r\n\r\n            if (shippingAddress.city && shippingAddress.postcode) {\r\n                searchTerm = this.getSearchTerm(shippingAddress.postcode, country);\r\n            }\r\n\r\n            this.updateNearbyLocations(searchTerm);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} location\r\n         * @returns void\r\n         */\r\n        selectPickupLocation: function (location) {\r\n            pickupLocationsService.selectForShipping(location);\r\n            this.getPopup().closeModal();\r\n        },\r\n\r\n        /**\r\n         * @param {Object} location\r\n         * @returns {*|Boolean}\r\n         */\r\n        isPickupLocationSelected: function (location) {\r\n            return _.isEqual(this.selectedLocation(), location);\r\n        },\r\n\r\n        /**\r\n         * @param {String} searchQuery\r\n         * @returns {*}\r\n         */\r\n        updateNearbyLocations: function (searchQuery) {\r\n            var self = this,\r\n                productsInfo = [],\r\n                items = quote.getItems(),\r\n                searchCriteria;\r\n\r\n            _.each(items, function (item) {\r\n                if (item['qty_options'] === undefined || item['qty_options'].length === 0) {\r\n                    productsInfo.push(\r\n                        {\r\n                            sku: item.sku\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n\r\n            searchCriteria = {\r\n                extensionAttributes: {\r\n                    productsInfo: productsInfo\r\n                },\r\n                pageSize: this.nearbySearchLimit\r\n            };\r\n\r\n            if (searchQuery) {\r\n                searchCriteria.area = {\r\n                    radius: this.nearbySearchRadius,\r\n                    searchTerm: searchQuery\r\n                };\r\n            }\r\n\r\n            return pickupLocationsService\r\n                .getNearbyLocations(searchCriteria)\r\n                .then(function (locations) {\r\n                    self.nearbyLocations(locations);\r\n                })\r\n                .fail(function () {\r\n                    self.nearbyLocations([]);\r\n                });\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        validatePickupInformation: function () {\r\n            var emailValidationResult,\r\n                loginFormSelector = this.loginFormSelector;\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = $(loginFormSelector + ' input[name=username]').valid() ? true : false;\r\n\r\n                if (!emailValidationResult) {\r\n                    $(this.loginFormSelector + ' input[name=username]').trigger('focus');\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_InventoryInStorePickupFrontend/js/view/form/element/email.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery', 'Magento_Checkout/js/view/form/element/email'], function (\r\n    $,\r\n    Component\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template:\r\n                'Magento_InventoryInStorePickupFrontend/form/element/email',\r\n            links: {\r\n                email:\r\n                    'checkout.steps.shipping-step.shippingAddress.customer-email:email'\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_InventorySwatchesFrontendUi/js/swatch-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'configurableVariationQty',\r\n    'jquery-ui-modules/widget'\r\n], function ($, configurableVariationQty) {\r\n    'use strict';\r\n\r\n    return function (SwatchRenderer) {\r\n        $.widget('mage.SwatchRenderer', SwatchRenderer, {\r\n\r\n            /** @inheritdoc */\r\n            _OnClick: function ($this, widget) {\r\n                var salesChannel = this.options.jsonConfig.channel,\r\n                    salesChannelCode = this.options.jsonConfig.salesChannelCode,\r\n                    productVariationsSku = this.options.jsonConfig.sku;\r\n\r\n                this._super($this, widget);\r\n                configurableVariationQty(productVariationsSku[widget.getProductId()], salesChannel, salesChannelCode);\r\n            }\r\n        });\r\n\r\n        return $.mage.SwatchRenderer;\r\n    };\r\n});\r\n","Magento_LoginAsCustomerAssistance/js/opt-in.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('submit', function () {\r\n            this.elements['assistance_allowed'].value =\r\n                this.elements['assistance_allowed_checkbox'].checked ?\r\n                    config.allowAccess : config.denyAccess;\r\n        });\r\n    };\r\n});\r\n","Magento_LoginAsCustomerFrontendUi/js/login.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/section-config'\r\n], function ($, customerData, sectionConfig) {\r\n\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        customerData.reload(sectionConfig.getSectionNames()).done(function () {\r\n            window.location.href = config.redirectUrl;\r\n        });\r\n    };\r\n});\r\n","Magento_LoginAsCustomerFrontendUi/js/view/loginAsCustomer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/translate'\r\n], function ($, _, Component, customer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            isVisible: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var customerData, loggedAsCustomerData;\r\n\r\n            this._super();\r\n\r\n            customerData = customer.get('customer');\r\n            loggedAsCustomerData = customer.get('loggedAsCustomer');\r\n\r\n            customerData.subscribe(function (data) {\r\n                this.fullname = data.fullname;\r\n                this.updateBanner();\r\n            }.bind(this));\r\n            loggedAsCustomerData.subscribe(function (data) {\r\n                this.adminUserId = data.adminUserId;\r\n                this.websiteName = data.websiteName;\r\n                this.updateBanner();\r\n            }.bind(this));\r\n\r\n            this.fullname = customerData().fullname;\r\n            this.adminUserId = loggedAsCustomerData().adminUserId;\r\n            this.websiteName = loggedAsCustomerData().websiteName;\r\n\r\n            this.updateBanner();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['isVisible', 'notificationText']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update banner area\r\n         *\r\n         * @returns void\r\n         */\r\n        updateBanner: function () {\r\n            if (this.adminUserId !== undefined) {\r\n                this.isVisible(this.adminUserId);\r\n            }\r\n\r\n            if (this.fullname !== undefined && this.websiteName !== undefined) {\r\n                this.notificationText($.mage.__('You are connected as <strong>%1</strong> on %2')\r\n                    .replace('%1', _.escape(this.fullname))\r\n                    .replace('%2', _.escape(this.websiteName)));\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/msrp.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/price-utils',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/dropdown',\r\n    'mage/template'\r\n], function ($, priceUtils, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addToCart', {\r\n        options: {\r\n            showAddToCart: true,\r\n            submitUrl: '',\r\n            cartButtonId: '',\r\n            singleOpenDropDown: true,\r\n            dialog: {}, // Options for mage/dropdown\r\n            dialogDelay: 500, // Delay in ms after resize dropdown shown again\r\n            origin: '', //Required, type of popup: 'msrp', 'tier' or 'info' popup\r\n\r\n            // Selectors\r\n            cartForm: '.form.map.checkout',\r\n            msrpLabelId: '#map-popup-msrp',\r\n            msrpPriceElement: '#map-popup-msrp .price-wrapper',\r\n            priceLabelId: '#map-popup-price',\r\n            priceElement: '#map-popup-price .price',\r\n            mapInfoLinks: '.map-show-info',\r\n            displayPriceElement: '.old-price.map-old-price .price-wrapper',\r\n            fallbackPriceElement: '.normal-price.map-fallback-price .price-wrapper',\r\n            displayPriceContainer: '.old-price.map-old-price',\r\n            fallbackPriceContainer: '.normal-price.map-fallback-price',\r\n            popUpAttr: '[data-role=msrp-popup-template]',\r\n            popupCartButtonId: '#map-popup-button',\r\n            paypalCheckoutButons: '[data-action=checkout-form-submit]',\r\n            popupId: '',\r\n            realPrice: '',\r\n            isSaleable: '',\r\n            msrpPrice: '',\r\n            helpLinkId: '',\r\n            addToCartButton: '',\r\n\r\n            // Text options\r\n            productName: '',\r\n            addToCartUrl: ''\r\n        },\r\n\r\n        openDropDown: null,\r\n        triggerClass: 'dropdown-active',\r\n\r\n        popUpOptions: {\r\n            appendTo: 'body',\r\n            dialogContentClass: 'active',\r\n            closeOnMouseLeave: false,\r\n            autoPosition: true,\r\n            closeOnClickOutside: false,\r\n            'dialogClass': 'popup map-popup-wrapper',\r\n            position: {\r\n                my: 'left top',\r\n                collision: 'fit none',\r\n                at: 'left bottom',\r\n                within: 'body'\r\n            },\r\n            shadowHinter: 'popup popup-pointer'\r\n        },\r\n        popupOpened: false,\r\n        wasOpened: false,\r\n\r\n        /**\r\n         * Creates widget instance\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if (this.options.origin === 'msrp') {\r\n                this.initMsrpPopup();\r\n            } else if (this.options.origin === 'info') {\r\n                this.initInfoPopup();\r\n            } else if (this.options.origin === 'tier') {\r\n                this.initTierPopup();\r\n            }\r\n            $(this.options.cartButtonId).on('click', this._addToCartSubmit.bind(this));\r\n            $(document).on('updateMsrpPriceBlock', this.onUpdateMsrpPrice.bind(this));\r\n            $(this.options.cartForm).on('submit', this._onSubmitForm.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        initMsrpPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $msrpPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $msrpPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            $('body').append($msrpPopup);\r\n            $msrpPopup.trigger('contentUpdated');\r\n\r\n            $msrpPopup.find('button')\r\n                .on('click',\r\n                    this.handleMsrpAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $msrpPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleMsrpPaypalCheckout.bind(this));\r\n\r\n            $(this.options.popupId).on('click',\r\n                this.openPopup.bind(this));\r\n\r\n            this.$popup = $msrpPopup;\r\n        },\r\n\r\n        /**\r\n         * Init info popup\r\n         *\r\n         * @private\r\n         */\r\n        initInfoPopup: function () {\r\n            var infoPopupDOM = $('[data-role=msrp-info-template]')[0],\r\n                $infoPopup = $(infoPopupDOM.innerHTML.trim());\r\n\r\n            $('body').append($infoPopup);\r\n\r\n            $(this.options.helpLinkId).on('click', function (e) {\r\n                this.popUpOptions.position.of = $(e.target);\r\n                $infoPopup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n                this._toggle($infoPopup);\r\n            }.bind(this));\r\n\r\n            this.$popup = $infoPopup;\r\n        },\r\n\r\n        /**\r\n         * Init tier price popup\r\n         * @private\r\n         */\r\n        initTierPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $tierPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $('body').append($tierPopup);\r\n            $tierPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            this.popUpOptions.position.of = $(this.options.helpLinkId);\r\n\r\n            $tierPopup.find('button').on('click',\r\n                this.handleTierAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $tierPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleTierPaypalCheckout.bind(this));\r\n\r\n            $(this.options.attr).on('click', function (e) {\r\n                this.$popup = $tierPopup;\r\n                this.tierOptions = $(e.target).data('tier-price');\r\n                this.openPopup(e);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Msrp popup\r\n         * @param {Object} ev\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpPaypalCheckout: function () {\r\n            this.closePopup(this.$popup);\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Tier popup\r\n         *\r\n         * @param {Object} ev\r\n         * @private\r\n         */\r\n        handleTierAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton &&\r\n                this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Tier popup\r\n         *\r\n         * @private\r\n         */\r\n        handleTierPaypalCheckout: function () {\r\n            if (this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Open and set up popup\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        openPopup: function (event) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            this.popUpOptions.position.of = $(event.target);\r\n\r\n            if (!this.wasOpened) {\r\n                this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                this.wasOpened = true;\r\n            }\r\n            this.$popup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n            this._toggle(this.$popup);\r\n\r\n            if (!this.options.isSaleable) {\r\n                this.$popup.find('form').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggle MAP popup visibility\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         * @private\r\n         */\r\n        _toggle: function ($elem) {\r\n            $(document).on('mouseup.msrp touchend.msrp', function (e) {\r\n                if (!$elem.is(e.target) && $elem.has(e.target).length === 0) {\r\n                    this.closePopup($elem);\r\n                }\r\n            }.bind(this));\r\n            $(window).on('resize', function () {\r\n                this.closePopup($elem);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Close MAP information popup\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         */\r\n        closePopup: function ($elem) {\r\n            $elem.dropdownDialog('close');\r\n            $(document).off('mouseup.msrp touchend.msrp');\r\n        },\r\n\r\n        /**\r\n         * Handler for addToCart action\r\n         *\r\n         * @param {Object} e\r\n         */\r\n        _addToCartSubmit: function (e) {\r\n            this.element.trigger('addToCart', this.element);\r\n\r\n            if (this.element.data('stop-processing')) {\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartUrl) {\r\n                $('.mage-dropdown-dialog > .ui-dialog-content').dropdownDialog('close');\r\n            }\r\n\r\n            e.preventDefault();\r\n            $(this.options.cartForm).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Call on event updatePrice. Proxy to updateMsrpPrice method.\r\n         *\r\n         * @param {Event} event\r\n         * @param {mixed} priceIndex\r\n         * @param {Object} prices\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        onUpdateMsrpPrice: function onUpdateMsrpPrice(event, priceIndex, prices, $priceBox) {\r\n\r\n            var defaultMsrp,\r\n                defaultPrice,\r\n                msrpPrice,\r\n                finalPrice;\r\n\r\n            defaultMsrp = _.chain(prices).map(function (price) {\r\n                return price.msrpPrice.amount;\r\n            }).reject(function (p) {\r\n                return p === null;\r\n            }).max().value();\r\n\r\n            defaultPrice = _.chain(prices).map(function (p) {\r\n                return p.finalPrice.amount;\r\n            }).min().value();\r\n\r\n            if (typeof priceIndex !== 'undefined') {\r\n                msrpPrice = prices[priceIndex].msrpPrice.amount;\r\n                finalPrice = prices[priceIndex].finalPrice.amount;\r\n\r\n                if (msrpPrice === null || msrpPrice <= finalPrice) {\r\n                    this.updateNonMsrpPrice(priceUtils.formatPriceLocale(finalPrice), $priceBox);\r\n                } else {\r\n                    this.updateMsrpPrice(\r\n                        priceUtils.formatPriceLocale(finalPrice),\r\n                        priceUtils.formatPriceLocale(msrpPrice),\r\n                        false,\r\n                        $priceBox);\r\n                }\r\n            } else {\r\n                this.updateMsrpPrice(\r\n                    priceUtils.formatPriceLocale(defaultPrice),\r\n                    priceUtils.formatPriceLocale(defaultMsrp),\r\n                    true,\r\n                    $priceBox);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update prices for configurable product with MSRP enabled\r\n         *\r\n         * @param {String} finalPrice\r\n         * @param {String} msrpPrice\r\n         * @param {Boolean} useDefaultPrice\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateMsrpPrice: function (finalPrice, msrpPrice, useDefaultPrice, $priceBox) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            $(this.options.fallbackPriceContainer, $priceBox).hide();\r\n            $(this.options.displayPriceContainer, $priceBox).show();\r\n            $(this.options.mapInfoLinks, $priceBox).show();\r\n\r\n            if (useDefaultPrice || !this.wasOpened) {\r\n                if (this.$popup) {\r\n                    this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                    this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                }\r\n\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n                this.wasOpened = true;\r\n            }\r\n\r\n            if (!useDefaultPrice) {\r\n                this.$popup.find(this.options.msrpPriceElement).html(msrpPrice);\r\n                this.$popup.find(this.options.priceElement).html(finalPrice);\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display non MAP price for irrelevant products\r\n         *\r\n         * @param {String} price\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateNonMsrpPrice: function (price, $priceBox) {\r\n            $(this.options.fallbackPriceElement, $priceBox).html(price);\r\n            $(this.options.displayPriceContainer, $priceBox).hide();\r\n            $(this.options.mapInfoLinks, $priceBox).hide();\r\n            $(this.options.fallbackPriceContainer, $priceBox).show();\r\n        },\r\n\r\n        /**\r\n         * Handler for submit form\r\n         *\r\n         * @private\r\n         */\r\n        _onSubmitForm: function () {\r\n            if ($(this.options.cartForm).valid()) {\r\n                $(this.options.cartButtonId).prop('disabled', true);\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    return $.mage.addToCart;\r\n});\r\n","Magento_Msrp/js/product/list/columns/msrp-price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Catalog/js/product/list/columns/price-box',\r\n    'Magento_Catalog/js/product/addtocart-button',\r\n    'mage/dropdown'\r\n], function ($, _, PriceBox) {\r\n    'use strict';\r\n\r\n    return PriceBox.extend({\r\n        defaults: {\r\n            priceBoxSelector: '[data-role=msrp-price-box]',\r\n            popupTmpl: 'Magento_Msrp/product/item/popup',\r\n            popupTriggerSelector: '[data-role=msrp-popup-trigger]',\r\n            popupSelector: '[data-role=msrp-popup]',\r\n            popupOptions: {\r\n                appendTo: 'body',\r\n                dialogContentClass: 'active',\r\n                closeOnMouseLeave: false,\r\n                autoPosition: true,\r\n                dialogClass: 'popup map-popup-wrapper',\r\n                position: {\r\n                    my: 'left top',\r\n                    collision: 'fit none',\r\n                    at: 'left bottom',\r\n                    within: 'body'\r\n                },\r\n                shadowHinter: 'popup popup-pointer'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create and open popup with Msrp information.\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {DOMElement} elem - element\r\n         * @param {Event} event - event object\r\n         */\r\n        openPopup: function (data, elem, event) {\r\n            var $elem = $(elem),\r\n                $popup = $elem.find(this.popupSelector),\r\n                $trigger = $elem.find(this.popupTriggerSelector);\r\n\r\n            event.stopPropagation();\r\n\r\n            this.popupOptions.position.of = $trigger;\r\n            this.popupOptions.triggerTarget = $trigger;\r\n\r\n            $popup.dropdownDialog(this.popupOptions)\r\n                  .dropdownDialog('open');\r\n        },\r\n\r\n        /**\r\n         * Set listeners.\r\n         *\r\n         * @param {DOMElement} elem - DOM element\r\n         * @param {Object} data - element data\r\n         */\r\n        initListeners: function (elem, data) {\r\n            var $trigger = $(elem).find(this.popupTriggerSelector);\r\n\r\n            $trigger.on('click', this.openPopup.bind(this, data, elem));\r\n        },\r\n\r\n        /**\r\n         * Check whether we can apply msrp, or should use standard price.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Bool}\r\n         */\r\n        isMsrpApplicable: function (row) {\r\n            return this.getPrice(row)['is_applicable'];\r\n        },\r\n\r\n        /**\r\n         * Retrieve msrp formatted price\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getPrice: function (row) {\r\n            return row['price_info']['extension_attributes'].msrp;\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get msrp_price property of a price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getMsrpPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row)['msrp_price'];\r\n        },\r\n\r\n        /**\r\n         * Returns path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Check if popup with actual price must be shown.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isShowPriceOnGesture: function (row) {\r\n            return this.getPrice(row)['is_shown_price_on_gesture'];\r\n        },\r\n\r\n        /**\r\n         * Get msrp price supporting text.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getMsrpPriceMessage: function (row) {\r\n            return this.getPrice(row)['msrp_message'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMsrpPriceMessage.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getMsrpPriceMessageUnsanitizedHtml: function (row) {\r\n            return this.getMsrpPriceMessage(row);\r\n        },\r\n\r\n        /**\r\n         * Get msrp price supporting text, when actual price is hidden.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getExplanationMessage: function (row) {\r\n            return this.getPrice(row)['explanation_message'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getExplanationMessage.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getExplanationMessageUnsanitizedHtml: function (row) {\r\n            return this.getExplanationMessage(row);\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/minicart/subtotal/totals',\r\n    'underscore'\r\n], function (Component, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.displaySubtotal(this.isMsrpApplied(this.cart().items));\r\n            this.cart.subscribe(function (updatedCart) {\r\n\r\n                this.displaySubtotal(this.isMsrpApplied(updatedCart.items));\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Determine if subtotal should be hidden.\r\n         * @param {Array} cartItems\r\n         * @return {Boolean}\r\n         */\r\n        isMsrpApplied: function (cartItems) {\r\n            return !_.find(cartItems, function (item) {\r\n                if (_.has(item, 'canApplyMsrp')) {\r\n                    return item.canApplyMsrp;\r\n                }\r\n\r\n                return false;\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Multishipping/js/multi-shipping-balance.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/dataPost',\r\n    'jquery-ui-modules/widget'\r\n], function ($, dataPost) {\r\n    'use strict';\r\n\r\n    $.widget('mage.multiShippingBalance', {\r\n        options: {\r\n            changeUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize balance checkbox events.\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(function (event) {\r\n                dataPost().postData({\r\n                    action: this.options.changeUrl,\r\n                    data: {\r\n                        useBalance: +$(event.target).is(':checked')\r\n                    }\r\n                });\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.multiShippingBalance;\r\n});\r\n","Magento_Multishipping/js/multi-shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery-ui-modules/widget'\r\n], function ($, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.multiShipping', {\r\n        options: {\r\n            itemsQty: 0,\r\n            addNewAddressBtn: 'button[data-role=\"add-new-address\"]', // Add a new multishipping address.\r\n            addNewAddressFlag: '#add_new_address_flag', // Hidden input field with value 0 or 1.\r\n            canContinueBtn: 'button[data-role=\"can-continue\"]', // Continue (update quantity or go to shipping).\r\n            canContinueFlag: '#can_continue_flag' // Hidden input field with value 0 or 1.\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers to click events for corresponding buttons.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._prepareCartData();\r\n            $(this.options.addNewAddressBtn).on('click', $.proxy(this._addNewAddress, this));\r\n            $(this.options.canContinueBtn).on('click', $.proxy(this._canContinue, this));\r\n        },\r\n\r\n        /**\r\n         * Takes cart items qty from current cart data and compare it with current items qty\r\n         * Reloads cart data if cart items qty is wrong\r\n         * @private\r\n         */\r\n        _prepareCartData: function () {\r\n            var cartData = customerData.get('cart');\r\n\r\n            if (cartData()['summary_count'] !== this.options.itemsQty) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add a new address. Set the hidden input field and submit the form. Then enter a new shipping address.\r\n         * @private\r\n         */\r\n        _addNewAddress: function () {\r\n            $(this.options.addNewAddressFlag).val(1);\r\n            this.element.submit();\r\n        },\r\n\r\n        /**\r\n         * Can the user continue to the next step? The data-flag attribute holds either 0 (no) or 1 (yes).\r\n         * @private\r\n         * @param {Event} event - Click event on the corresponding button.\r\n         */\r\n        _canContinue: function (event) {\r\n            $(this.options.canContinueFlag).val(parseInt($(event.currentTarget).data('flag'), 10));\r\n        }\r\n    });\r\n\r\n    return $.mage.multiShipping;\r\n});\r\n","Magento_Multishipping/js/overview.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderOverview', {\r\n        options: {\r\n            opacity: 0.5, // CSS opacity for the 'Place Order' button when it's clicked and then disabled.\r\n            pleaseWaitLoader: 'span.please-wait', // 'Submitting order information...' Ajax loader.\r\n            placeOrderSubmit: 'button[type=\"submit\"]', // The 'Place Order' button.\r\n            agreements: '.checkout-agreements' // Container for all of the checkout agreements and terms/conditions\r\n        },\r\n\r\n        /**\r\n         * Bind a submit handler to the form.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('submit', $.proxy(this._showLoader, this));\r\n        },\r\n\r\n        /**\r\n         * Verify that all agreements and terms/conditions are checked. Show the Ajax loader. Disable\r\n         * the submit button (i.e. Place Order).\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _showLoader: function () {\r\n            if ($(this.options.agreements).find('input[type=\"checkbox\"]:not(:checked)').length > 0) {\r\n                return false;\r\n            }\r\n            this.element.find(this.options.pleaseWaitLoader).show().end()\r\n                .find(this.options.placeOrderSubmit).prop('disabled', true).css('opacity', this.options.opacity);\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    return $.mage.orderOverview;\r\n});\r\n","Magento_Multishipping/js/payment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, mageTemplate, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.payment', {\r\n        options: {\r\n            continueSelector: '#payment-continue',\r\n            methodsContainer: '#payment-methods',\r\n            minBalance: 0,\r\n            tmpl: '<input id=\"hidden-free\" type=\"hidden\" name=\"payment[method]\" value=\"free\">'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.element.find('dd [name^=\"payment[\"]').prop('disabled', true).end()\r\n                .on('click', this.options.continueSelector, $.proxy(this._submitHandler, this))\r\n                .on('updateCheckoutPrice', $.proxy(function (event, data) {\r\n                    //updating the checkoutPrice\r\n                    if (data.price) {\r\n                        this.options.checkoutPrice += data.price;\r\n                    }\r\n\r\n                    //updating total price\r\n                    if (data.totalPrice) {\r\n                        data.totalPrice = this.options.checkoutPrice;\r\n                    }\r\n\r\n                    if (this.options.checkoutPrice <= this.options.minBalance) {\r\n                        // Add free input field, hide and disable unchecked\r\n                        // checkbox payment method and all radio button payment methods\r\n                        this._disablePaymentMethods();\r\n                    } else {\r\n                        // Remove free input field, show all payment method\r\n                        this._enablePaymentMethods();\r\n                    }\r\n                }, this))\r\n                .on('click', 'dt input:radio', $.proxy(this._paymentMethodHandler, this));\r\n\r\n            if (this.options.checkoutPrice < this.options.minBalance) {\r\n                this._disablePaymentMethods();\r\n            } else {\r\n                this._enablePaymentMethods();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display payment details when payment method radio button is checked\r\n         * @private\r\n         * @param {EventObject} e\r\n         */\r\n        _paymentMethodHandler: function (e) {\r\n            var element = $(e.target),\r\n                parentsDl = element.closest('dl');\r\n\r\n            parentsDl.find('dt input:radio').prop('checked', false);\r\n            parentsDl.find('dd').addClass('no-display').end()\r\n                .find('.items').hide()\r\n                .find('[name^=\"payment[\"]').prop('disabled', true);\r\n            element.prop('checked', true).parent()\r\n                .next('dd').removeClass('no-display')\r\n                .find('.items').show().find('[name^=\"payment[\"]').prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * make sure one payment method is selected\r\n         * @private\r\n         * @return {Boolean}\r\n         */\r\n        _validatePaymentMethod: function () {\r\n            var methods = this.element.find('[name^=\"payment[\"]'),\r\n                isValid = false;\r\n\r\n            if (methods.length === 0) {\r\n                alert({\r\n                    content: $.mage.__('We can\\'t complete your order because you don\\'t have a payment method set up.')\r\n                });\r\n            } else if (this.options.checkoutPrice <= this.options.minBalance) {\r\n                isValid = true;\r\n            } else if (methods.filter('input:radio:checked').length) {\r\n                isValid = true;\r\n            } else {\r\n                alert({\r\n                    content: $.mage.__('Please choose a payment method.')\r\n                });\r\n            }\r\n\r\n            return isValid;\r\n        },\r\n\r\n        /**\r\n         * Disable and enable payment methods\r\n         * @private\r\n         */\r\n        _disablePaymentMethods: function () {\r\n            var tmpl = mageTemplate(this.options.tmpl, {\r\n                data: {}\r\n            });\r\n\r\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', true).end()\r\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', true).parent().hide();\r\n            this.element.find('[name=\"payment[method]\"][value=\"free\"]').parent('dt').remove();\r\n            this.element.find(this.options.methodsContainer).hide().find('[name^=\"payment[\"]').prop('disabled', true);\r\n\r\n            $(tmpl).appendTo(this.element);\r\n        },\r\n\r\n        /**\r\n         * Enable and enable payment methods\r\n         * @private\r\n         */\r\n        _enablePaymentMethods: function () {\r\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', false).end()\r\n                .find('dt input:radio:checked').trigger('click').end()\r\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', false).parent().show();\r\n            this.element.find(this.options.methodsContainer).show();\r\n        },\r\n\r\n        /**\r\n         * Returns checked payment method.\r\n         *\r\n         * @private\r\n         */\r\n        _getSelectedPaymentMethod: function () {\r\n            return this.element.find('input[name=\\'payment[method]\\']:checked');\r\n        },\r\n\r\n        /**\r\n         * Validate  before form submit\r\n         * @private\r\n         * @param {EventObject} e\r\n         */\r\n        _submitHandler: function (e) {\r\n            var currentMethod,\r\n                submitButton;\r\n\r\n            e.preventDefault();\r\n\r\n            if (this._validatePaymentMethod()) {\r\n                currentMethod = this._getSelectedPaymentMethod();\r\n                submitButton = currentMethod.parent().next('dd').find('button[type=submit]');\r\n\r\n                if (submitButton.length) {\r\n                    submitButton.first().trigger('click');\r\n                } else {\r\n                    this.element.trigger('submit');\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.payment;\r\n});\r\n","Magento_Newsletter/js/newsletter-sign-up.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'mage/url',\r\n    'subscriptionStatusResolver',\r\n    'mage/validation'\r\n], function ($, Component, urlBuilder, subscriptionStatusResolver) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            signUpElement: '',\r\n            submitButton: '',\r\n            element: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            this._super();\r\n            this.element = element;\r\n            $(element).on('change', $.proxy(this.updateSignUpStatus, this));\r\n            this.updateSignUpStatus();\r\n        },\r\n\r\n        /**\r\n         * Send status request and update subscription element according to result.\r\n         */\r\n        updateSignUpStatus: function () {\r\n            var element = $(this.element),\r\n                email = element.val(),\r\n                self = this,\r\n                newsletterSubscription;\r\n\r\n            if ($(self.signUpElement).is(':checked')) {\r\n                return;\r\n            }\r\n\r\n            if (!email || !$.validator.methods['validate-email'].call(this, email, element)) {\r\n                return;\r\n            }\r\n\r\n            newsletterSubscription = $.Deferred();\r\n\r\n            $(self.submitButton).prop('disabled', true);\r\n\r\n            subscriptionStatusResolver(email, newsletterSubscription);\r\n\r\n            $.when(newsletterSubscription).done(function (isSubscribed) {\r\n                if (isSubscribed) {\r\n                    $(self.signUpElement).prop('checked', true);\r\n                }\r\n            }).always(function () {\r\n                $(self.submitButton).prop('disabled', false);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Newsletter/js/subscription-status-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/url'\r\n], function ($, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (email, deferred) {\r\n        return $.getJSON(\r\n            urlBuilder.build('newsletter/ajax/status'),\r\n            {\r\n                email: email\r\n            }\r\n        ).done(function (response) {\r\n            if (response.errors) {\r\n                deferred.reject();\r\n            } else {\r\n                deferred.resolve(response.subscribed);\r\n            }\r\n        }).fail(function () {\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_OfflinePayments/js/view/payment/offline-payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'checkmo',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method'\r\n        },\r\n        {\r\n            type: 'banktransfer',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method'\r\n        },\r\n        {\r\n            type: 'cashondelivery',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method'\r\n        },\r\n        {\r\n            type: 'purchaseorder',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method'\r\n        }\r\n    );\r\n\r\n    /** Add view logic here if needed */\r\n    return Component.extend({});\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (ko, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/banktransfer'\r\n        },\r\n\r\n        /**\r\n         * Get value of instruction field.\r\n         * @returns {String}\r\n         */\r\n        getInstructions: function () {\r\n            return window.checkoutConfig.payment.instructions[this.item.method];\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/cashondelivery'\r\n        },\r\n\r\n        /**\r\n         * Returns payment method instructions.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getInstructions: function () {\r\n            return window.checkoutConfig.payment.instructions[this.item.method];\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/checkmo'\r\n        },\r\n\r\n        /**\r\n         * Returns send check to info.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getMailingAddress: function () {\r\n            return window.checkoutConfig.payment.checkmo.mailingAddress;\r\n        },\r\n\r\n        /**\r\n         * Returns payable to info.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getPayableTo: function () {\r\n            return window.checkoutConfig.payment.checkmo.payableTo;\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'jquery',\r\n    'mage/validation'\r\n], function (Component, $) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/purchaseorder-form',\r\n            purchaseOrderNumber: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('purchaseOrderNumber');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getData: function () {\r\n            return {\r\n                method: this.item.method,\r\n                'po_number': this.purchaseOrderNumber(),\r\n                'additional_data': null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {jQuery}\r\n         */\r\n        validate: function () {\r\n            var form = 'form[data-role=purchaseorder-form]';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'region_id': {\r\n                    'required': true\r\n                },\r\n                'region_id_input': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/flatrate',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/freeshipping',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/tablerate',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message, regionFields;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    regionFields = ['region', 'region_id', 'region_id_input'];\r\n\r\n                    if (\r\n                        $.inArray(field, regionFields) === -1 ||\r\n                        utils.isEmpty(address.region) && utils.isEmpty(address['region_id'])\r\n                    ) {\r\n                        self.validationErrors.push(message);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/flatrate',\r\n    '../../model/shipping-rates-validation-rules/flatrate'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    flatrateShippingRatesValidator,\r\n    flatrateShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('flatrate', flatrateShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('flatrate', flatrateShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/freeshipping',\r\n    '../../model/shipping-rates-validation-rules/freeshipping'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    freeshippingShippingRatesValidator,\r\n    freeshippingShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('freeshipping', freeshippingShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('freeshipping', freeshippingShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/tablerate',\r\n    '../../model/shipping-rates-validation-rules/tablerate'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    tablerateShippingRatesValidator,\r\n    tablerateShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('tablerate', tablerateShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('tablerate', tablerateShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_PageBuilder/js/events.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiEvents'], function (uiEvents) {\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Calls callback when name event is triggered\r\n         *\r\n         * @param {String} events\r\n         * @param {Function} callback\r\n         * @param {Function} ns\r\n         * @return {Object}\r\n         */\r\n        on: function (events, callback, ns) {\r\n            uiEvents.on('pagebuilder:' + events, callback, 'pagebuilder:' + ns);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Removed callback from listening to target event\r\n         *\r\n         * @param {String} ns\r\n         * @return {Object}\r\n         */\r\n        off: function (ns) {\r\n            uiEvents.off('pagebuilder:' + ns);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Triggers event and executes all attached callbacks\r\n         *\r\n         * @param {String} name\r\n         * @param {any} args\r\n         * @returns {Boolean}\r\n         */\r\n        trigger: function (name, args) {\r\n            return uiEvents.trigger('pagebuilder:' + name, args);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget-initializer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mage/apply/main',\r\n    'Magento_Ui/js/lib/view/utils/dom-observer'\r\n], function (_, $, mage, domObserver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Initializes components assigned to HTML elements.\r\n     *\r\n     *\r\n     * @param {HTMLElement} el\r\n     * @param {Array} data\r\n     * @param {Object} breakpoints\r\n     * @param {Object} currentViewport\r\n     */\r\n    function initializeWidget(el, data, breakpoints, currentViewport) {\r\n        _.each(data, function (config, component) {\r\n            config = config || {};\r\n            config.breakpoints = breakpoints;\r\n            config.currentViewport = currentViewport;\r\n            mage.applyFor(el, config, component);\r\n        });\r\n    }\r\n\r\n    return function (data, contextElement) {\r\n        _.each(data.config, function (componentConfiguration, elementPath) {\r\n            domObserver.get(\r\n                elementPath,\r\n                function (element) {\r\n                    var $element = $(element);\r\n\r\n                    if (contextElement) {\r\n                        $element = $(contextElement).find(element);\r\n                    }\r\n\r\n                    if ($element.length) {\r\n                        initializeWidget($element, componentConfiguration, data.breakpoints, data.currentViewport);\r\n                    }\r\n                }\r\n            );\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/banner/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_PageBuilder/js/widget/show-on-hover',\r\n    'Magento_PageBuilder/js/widget/video-background'\r\n], function (showOnHover, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var videoElement = element[0].querySelector('[data-background-type=video]');\r\n\r\n        showOnHover(config);\r\n\r\n        if (videoElement) {\r\n            videoBackground(config, videoElement);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/buttons/appearance/inline/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Equalize the width of a list of button-item components\r\n     *\r\n     * @param {JQuery} buttonList\r\n     */\r\n    var equalizeButtonWidth = function (buttonList) {\r\n        var buttonMinWidth = 0;\r\n\r\n        buttonList.css('min-width', buttonMinWidth);\r\n        buttonList.each(function () {\r\n            var buttonWidth = this.offsetWidth;\r\n\r\n            if (buttonWidth > buttonMinWidth) {\r\n                buttonMinWidth = buttonWidth;\r\n            }\r\n        });\r\n        buttonList.css('min-width', buttonMinWidth);\r\n    };\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            buttonSelector = '[data-element=\"link\"], [data-element=\"empty_link\"]';\r\n\r\n        if ($element.data('sameWidth')) {\r\n            equalizeButtonWidth($element.find(buttonSelector));\r\n            $(window).on('resize', function () {\r\n                equalizeButtonWidth($element.find(buttonSelector));\r\n            });\r\n            events.on('contentType:redrawAfter', function (eventData) {\r\n                if ($element.closest(eventData.element).length > 0) {\r\n                    equalizeButtonWidth($element.find(buttonSelector));\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/map/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/utils/map'\r\n], function ($, GoogleMap) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var locations,\r\n            controls,\r\n            mapOptions = {};\r\n\r\n        element = element[0];\r\n\r\n        if (element !== undefined && element.hasAttribute('data-locations')) {\r\n\r\n            /**\r\n             * Set map display to none if no locations\r\n             */\r\n            if (element.getAttribute('data-locations') === '[]') {\r\n                $(element).hide();\r\n\r\n                return;\r\n            }\r\n            locations = JSON.parse(element.getAttribute('data-locations'));\r\n            locations.forEach(function (location) {\r\n                location.position.latitude = parseFloat(location.position.latitude);\r\n                location.position.longitude = parseFloat(location.position.longitude);\r\n            });\r\n            controls = element.getAttribute('data-show-controls');\r\n            mapOptions.disableDefaultUI = controls !== 'true';\r\n            mapOptions.mapTypeControl = controls === 'true';\r\n            new GoogleMap(element, locations, mapOptions);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/products/appearance/carousel/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'matchMedia',\r\n    'Magento_PageBuilder/js/utils/breakpoints',\r\n    'Magento_PageBuilder/js/events',\r\n    'slick'\r\n], function ($, _, mediaCheck, breakpointsUtils, events) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Build slick\r\n     *\r\n     * @param {jQuery} $carouselElement\r\n     * @param {Object} config\r\n     */\r\n    function buildSlick($carouselElement, config) {\r\n        /**\r\n         * Prevent each slick slider from being initialized more than once which could throw an error.\r\n         */\r\n        if ($carouselElement.hasClass('slick-initialized')) {\r\n            $carouselElement.slick('unslick');\r\n        }\r\n\r\n        config.slidesToScroll = config.slidesToShow;\r\n        $carouselElement.slick(config);\r\n    }\r\n\r\n    /**\r\n     * Initialize slider.\r\n     *\r\n     * @param {jQuery} $element\r\n     * @param {Object} slickConfig\r\n     * @param {Object} breakpoint\r\n     */\r\n    function initSlider($element, slickConfig, breakpoint) {\r\n        var productCount = $element.find('.product-item').length,\r\n            $carouselElement = $($element.children()),\r\n            centerModeClass = 'center-mode',\r\n            carouselMode = $element.data('carousel-mode'),\r\n            slidesToShow = breakpoint.options.products[carouselMode] ?\r\n                breakpoint.options.products[carouselMode].slidesToShow :\r\n                breakpoint.options.products.default.slidesToShow;\r\n\r\n        slickConfig.slidesToShow = parseFloat(slidesToShow);\r\n\r\n        if (carouselMode === 'continuous' && productCount > slickConfig.slidesToShow) {\r\n            $element.addClass(centerModeClass);\r\n            slickConfig.centerPadding = $element.data('center-padding');\r\n            slickConfig.centerMode = true;\r\n        } else {\r\n            $element.removeClass(centerModeClass);\r\n            slickConfig.infinite = $element.data('infinite-loop');\r\n        }\r\n\r\n        buildSlick($carouselElement, slickConfig);\r\n    }\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            $carouselElement = $($element.children()),\r\n            currentViewport = config.currentViewport,\r\n            currentBreakpoint = config.breakpoints[currentViewport],\r\n            slickConfig = {\r\n                autoplay: $element.data('autoplay'),\r\n                autoplaySpeed: $element.data('autoplay-speed') || 0,\r\n                arrows: $element.data('show-arrows'),\r\n                dots: $element.data('show-dots')\r\n            };\r\n\r\n        _.each(config.breakpoints, function (breakpoint) {\r\n            mediaCheck({\r\n                media: breakpointsUtils.buildMedia(breakpoint.conditions),\r\n\r\n                /** @inheritdoc */\r\n                entry: function () {\r\n                    initSlider($element, slickConfig, breakpoint);\r\n                }\r\n            });\r\n        });\r\n\r\n        //initialize slider when content type is added in mobile viewport\r\n        if (currentViewport === 'mobile') {\r\n            initSlider($element, slickConfig, currentBreakpoint);\r\n        }\r\n\r\n        // Redraw slide after content type gets redrawn\r\n        events.on('contentType:redrawAfter', function (args) {\r\n            if ($carouselElement.closest(args.element).length) {\r\n                $carouselElement.slick('setPosition');\r\n            }\r\n        });\r\n\r\n        events.on('stage:viewportChangeAfter', function (args) {\r\n            var breakpoint = config.breakpoints[args.viewport];\r\n\r\n            initSlider($element, slickConfig, breakpoint);\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/row/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/widget/video-background',\r\n    'jarallax'\r\n], function ($, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            parallaxSpeed = null,\r\n            elementStyle = null;\r\n\r\n        if ($element.data('appearance') === 'contained') {\r\n            $element = $(element).find('[data-element=\"inner\"]');\r\n        }\r\n\r\n        if ($element.data('background-type') === 'video') {\r\n            videoBackground(config, $element[0]);\r\n\r\n            return;\r\n        }\r\n\r\n        if ($element.data('enableParallax') !== 1) {\r\n            return;\r\n        }\r\n\r\n        $element.addClass('jarallax');\r\n        $element.attr('data-jarallax', '');\r\n\r\n        parallaxSpeed = parseFloat($element.data('parallaxSpeed'));\r\n        elementStyle = window.getComputedStyle($element[0]);\r\n\r\n        window.jarallax($element[0], {\r\n            imgPosition: elementStyle.backgroundPosition || '50% 50%',\r\n            imgRepeat: elementStyle.backgroundRepeat || 'no-repeat',\r\n            imgSize: elementStyle.backgroundSize || 'cover',\r\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/slide/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_PageBuilder/js/widget/show-on-hover',\r\n    'Magento_PageBuilder/js/widget/video-background'\r\n], function ($, _, showOnHover, videoBackground) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var videoElement = element[0].querySelector('[data-background-type=video]'),\r\n            viewportElement = document.createElement('div'),\r\n            $slider = null;\r\n\r\n        showOnHover(config);\r\n\r\n        if (videoElement) {\r\n            $slider = $(element).closest('[data-content-type=slider]');\r\n            viewportElement.classList.add('jarallax-viewport-element');\r\n            videoElement.setAttribute('data-element-in-viewport', '.jarallax-viewport-element');\r\n            videoElement.appendChild(viewportElement);\r\n            videoBackground(config, videoElement);\r\n\r\n            if ($slider.data('afterChangeIsSet')) {\r\n                return;\r\n            }\r\n\r\n            $slider.on('afterChange init', function () {\r\n                var videoSlides = $slider[0].querySelectorAll('.jarallax');\r\n\r\n                _.each(videoSlides, function (videoSlide) {\r\n                    videoSlide.jarallax && videoSlide.jarallax.onScroll();\r\n                });\r\n            });\r\n            $slider.data('afterChangeIsSet', true);\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/slider/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'slick'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    return function (config, sliderElement) {\r\n        var $element = $(sliderElement);\r\n\r\n        /**\r\n         * Prevent each slick slider from being initialized more than once which could throw an error.\r\n         */\r\n        if ($element.hasClass('slick-initialized')) {\r\n            $element.slick('unslick');\r\n        }\r\n\r\n        $element.slick({\r\n            autoplay: $element.data('autoplay'),\r\n            autoplaySpeed: $element.data('autoplay-speed') || 0,\r\n            fade: $element.data('fade'),\r\n            infinite: $element.data('infinite-loop'),\r\n            arrows: $element.data('show-arrows'),\r\n            dots: $element.data('show-dots')\r\n        });\r\n\r\n        // Redraw slide after content type gets redrawn\r\n        events.on('contentType:redrawAfter', function (args) {\r\n            if ($element.closest(args.element).length) {\r\n                $element.slick('setPosition');\r\n            }\r\n        });\r\n        // eslint-disable-next-line jquery-no-bind-unbind\r\n        events.on('stage:viewportChangeAfter', $element.slick.bind($element, 'setPosition'));\r\n    };\r\n});\r\n","Magento_PageBuilder/js/content-type/tabs/appearance/default/widget.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_PageBuilder/js/events',\r\n    'jquery-ui-modules/tabs'\r\n], function ($, events) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element);\r\n\r\n        // Ignore stage builder preview tabs\r\n        if ($element.is('.pagebuilder-tabs')) {\r\n            return;\r\n        }\r\n\r\n        // Disambiguate between the mage/tabs component which is loaded randomly depending on requirejs order.\r\n        $.ui.tabs({\r\n            active: $element.data('activeTab') || 0,\r\n            create:\r\n\r\n                /**\r\n                 * Adjust the margin bottom of the navigation to correctly display the active tab\r\n                 */\r\n                function () {\r\n                    var borderWidth = parseInt($element.find('.tabs-content').css('borderWidth').toString(), 10);\r\n\r\n                    $element.find('.tabs-navigation').css('marginBottom', -borderWidth);\r\n                    $element.find('.tabs-navigation li:not(:first-child)').css('marginLeft', -borderWidth);\r\n                },\r\n            activate:\r\n\r\n                /**\r\n                 * Trigger redraw event since new content is being displayed\r\n                 */\r\n                function () {\r\n                    events.trigger('contentType:redrawAfter', {\r\n                        element: element\r\n                    });\r\n                }\r\n        }, element);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/resource/jarallax/jarallax-video.js":"/*!\r\n * Video Extension for Jarallax v2.0.3 (https://github.com/nk-o/jarallax)\r\n * Copyright 2022 nK <https://nkdev.info>\r\n * Licensed under MIT (https://github.com/nk-o/jarallax/blob/master/LICENSE)\r\n */\r\n\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n      typeof define === 'function' && define.amd ? define(factory) :\r\n          (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.jarallaxVideo = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  /*!\r\n   * Name    : Video Worker\r\n   * Version : 2.0.0\r\n   * Author  : nK <https://nkdev.info>\r\n   * GitHub  : https://github.com/nk-o/video-worker\r\n   */\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win$1;\r\n\r\n  if (typeof window !== 'undefined') {\r\n    win$1 = window;\r\n  } else if (typeof global !== 'undefined') {\r\n    win$1 = global;\r\n  } else if (typeof self !== 'undefined') {\r\n    win$1 = self;\r\n  } else {\r\n    win$1 = {};\r\n  }\r\n\r\n  var global$1$1 = win$1; // Deferred\r\n  // thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\r\n\r\n  function Deferred() {\r\n    this.doneCallbacks = [];\r\n    this.failCallbacks = [];\r\n  }\r\n\r\n  Deferred.prototype = {\r\n    execute(list, args) {\r\n      let i = list.length; // eslint-disable-next-line no-param-reassign\r\n\r\n      args = Array.prototype.slice.call(args);\r\n\r\n      while (i) {\r\n        i -= 1;\r\n        list[i].apply(null, args);\r\n      }\r\n    },\r\n\r\n    resolve(...args) {\r\n      this.execute(this.doneCallbacks, args);\r\n    },\r\n\r\n    reject(...args) {\r\n      this.execute(this.failCallbacks, args);\r\n    },\r\n\r\n    done(callback) {\r\n      this.doneCallbacks.push(callback);\r\n    },\r\n\r\n    fail(callback) {\r\n      this.failCallbacks.push(callback);\r\n    }\r\n\r\n  };\r\n  let ID = 0;\r\n  let YoutubeAPIadded = 0;\r\n  let VimeoAPIadded = 0;\r\n  let loadingYoutubePlayer = 0;\r\n  let loadingVimeoPlayer = 0;\r\n  const loadingYoutubeDefer = /*#__PURE__*/new Deferred();\r\n  const loadingVimeoDefer = /*#__PURE__*/new Deferred();\r\n\r\n  class VideoWorker {\r\n    constructor(url, options) {\r\n      const self = this;\r\n      self.url = url;\r\n      self.options_default = {\r\n        autoplay: false,\r\n        loop: false,\r\n        mute: false,\r\n        volume: 100,\r\n        showControls: true,\r\n        accessibilityHidden: false,\r\n        // start / end video time in seconds\r\n        startTime: 0,\r\n        endTime: 0\r\n      };\r\n      self.options = self.extend({}, self.options_default, options); // Fix wrong option name.\r\n      // Thanks to https://github.com/nk-o/video-worker/issues/13.\r\n\r\n      if (typeof self.options.showContols !== 'undefined') {\r\n        self.options.showControls = self.options.showContols;\r\n        delete self.options.showContols;\r\n      } // check URL\r\n\r\n\r\n      self.videoID = self.parseURL(url); // init\r\n\r\n      if (self.videoID) {\r\n        self.ID = ID;\r\n        ID += 1;\r\n        self.loadAPI();\r\n        self.init();\r\n      }\r\n    } // Extend like jQuery.extend\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    extend(...args) {\r\n      const out = args[0] || {};\r\n      Object.keys(args).forEach(i => {\r\n        if (!args[i]) {\r\n          return;\r\n        }\r\n\r\n        Object.keys(args[i]).forEach(key => {\r\n          out[key] = args[i][key];\r\n        });\r\n      });\r\n      return out;\r\n    }\r\n\r\n    parseURL(url) {\r\n      // parse youtube ID\r\n      function getYoutubeID(ytUrl) {\r\n        // eslint-disable-next-line no-useless-escape\r\n        const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\r\n        const match = ytUrl.match(regExp);\r\n        return match && match[1].length === 11 ? match[1] : false;\r\n      } // parse vimeo ID\r\n\r\n\r\n      function getVimeoID(vmUrl) {\r\n        // eslint-disable-next-line no-useless-escape\r\n        const regExp = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\r\n        const match = vmUrl.match(regExp);\r\n        return match && match[3] ? match[3] : false;\r\n      } // parse local string\r\n\r\n\r\n      function getLocalVideos(locUrl) {\r\n        // eslint-disable-next-line no-useless-escape\r\n        const videoFormats = locUrl.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\r\n        const result = {};\r\n        let ready = 0;\r\n        videoFormats.forEach(val => {\r\n          // eslint-disable-next-line no-useless-escape\r\n          const match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\r\n\r\n          if (match && match[1] && match[2]) {\r\n            // eslint-disable-next-line prefer-destructuring\r\n            result[match[1] === 'ogv' ? 'ogg' : match[1]] = match[2];\r\n            ready = 1;\r\n          }\r\n        });\r\n        return ready ? result : false;\r\n      }\r\n\r\n      const Youtube = getYoutubeID(url);\r\n      const Vimeo = getVimeoID(url);\r\n      const Local = getLocalVideos(url);\r\n\r\n      if (Youtube) {\r\n        this.type = 'youtube';\r\n        return Youtube;\r\n      }\r\n\r\n      if (Vimeo) {\r\n        this.type = 'vimeo';\r\n        return Vimeo;\r\n      }\r\n\r\n      if (Local) {\r\n        this.type = 'local';\r\n        return Local;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    isValid() {\r\n      return !!this.videoID;\r\n    } // events\r\n\r\n\r\n    on(name, callback) {\r\n      this.userEventsList = this.userEventsList || []; // add new callback in events list\r\n\r\n      (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\r\n    }\r\n\r\n    off(name, callback) {\r\n      if (!this.userEventsList || !this.userEventsList[name]) {\r\n        return;\r\n      }\r\n\r\n      if (!callback) {\r\n        delete this.userEventsList[name];\r\n      } else {\r\n        this.userEventsList[name].forEach((val, key) => {\r\n          if (val === callback) {\r\n            this.userEventsList[name][key] = false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    fire(name, ...args) {\r\n      if (this.userEventsList && typeof this.userEventsList[name] !== 'undefined') {\r\n        this.userEventsList[name].forEach(val => {\r\n          // call with all arguments\r\n          if (val) {\r\n            val.apply(this, args);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    play(start) {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.playVideo) {\r\n        if (typeof start !== 'undefined') {\r\n          self.player.seekTo(start || 0);\r\n        }\r\n\r\n        if (global$1$1.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\r\n          self.player.playVideo();\r\n        }\r\n      }\r\n\r\n      if (self.type === 'vimeo') {\r\n        if (typeof start !== 'undefined') {\r\n          self.player.setCurrentTime(start);\r\n        }\r\n\r\n        self.player.getPaused().then(paused => {\r\n          if (paused) {\r\n            self.player.play();\r\n          }\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        if (typeof start !== 'undefined') {\r\n          self.player.currentTime = start;\r\n        }\r\n\r\n        if (self.player.paused) {\r\n          self.player.play();\r\n        }\r\n      }\r\n    }\r\n\r\n    pause() {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.pauseVideo) {\r\n        if (global$1$1.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\r\n          self.player.pauseVideo();\r\n        }\r\n      }\r\n\r\n      if (self.type === 'vimeo') {\r\n        self.player.getPaused().then(paused => {\r\n          if (!paused) {\r\n            self.player.pause();\r\n          }\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        if (!self.player.paused) {\r\n          self.player.pause();\r\n        }\r\n      }\r\n    }\r\n\r\n    mute() {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.mute) {\r\n        self.player.mute();\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.setVolume) {\r\n        self.player.setVolume(0);\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        self.$video.muted = true;\r\n      }\r\n    }\r\n\r\n    unmute() {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.mute) {\r\n        self.player.unMute();\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.setVolume) {\r\n        self.player.setVolume(self.options.volume);\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        self.$video.muted = false;\r\n      }\r\n    }\r\n\r\n    setVolume(volume = false) {\r\n      const self = this;\r\n\r\n      if (!self.player || !volume) {\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.setVolume) {\r\n        self.player.setVolume(volume);\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.setVolume) {\r\n        self.player.setVolume(volume);\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        self.$video.volume = volume / 100;\r\n      }\r\n    }\r\n\r\n    getVolume(callback) {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        callback(false);\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.getVolume) {\r\n        callback(self.player.getVolume());\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.getVolume) {\r\n        self.player.getVolume().then(volume => {\r\n          callback(volume);\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        callback(self.$video.volume * 100);\r\n      }\r\n    }\r\n\r\n    getMuted(callback) {\r\n      const self = this;\r\n\r\n      if (!self.player) {\r\n        callback(null);\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube' && self.player.isMuted) {\r\n        callback(self.player.isMuted());\r\n      }\r\n\r\n      if (self.type === 'vimeo' && self.player.getVolume) {\r\n        self.player.getVolume().then(volume => {\r\n          callback(!!volume);\r\n        });\r\n      }\r\n\r\n      if (self.type === 'local') {\r\n        callback(self.$video.muted);\r\n      }\r\n    }\r\n\r\n    getImageURL(callback) {\r\n      const self = this;\r\n\r\n      if (self.videoImage) {\r\n        callback(self.videoImage);\r\n        return;\r\n      }\r\n\r\n      if (self.type === 'youtube') {\r\n        const availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\r\n        let step = 0;\r\n        const tempImg = new Image();\r\n\r\n        tempImg.onload = function () {\r\n          // if no thumbnail, youtube add their own image with width = 120px\r\n          if ((this.naturalWidth || this.width) !== 120 || step === availableSizes.length - 1) {\r\n            // ok\r\n            self.videoImage = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\r\n            callback(self.videoImage);\r\n          } else {\r\n            // try another size\r\n            step += 1;\r\n            this.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\r\n          }\r\n        };\r\n\r\n        tempImg.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\r\n      }\r\n\r\n      if (self.type === 'vimeo') {\r\n        let request = new XMLHttpRequest(); // https://vimeo.com/api/oembed.json?url=https://vimeo.com/235212527\r\n\r\n        request.open('GET', `https://vimeo.com/api/oembed.json?url=${self.url}`, true);\r\n\r\n        request.onreadystatechange = function () {\r\n          if (this.readyState === 4) {\r\n            if (this.status >= 200 && this.status < 400) {\r\n              // Success!\r\n              const response = JSON.parse(this.responseText);\r\n\r\n              if (response.thumbnail_url) {\r\n                self.videoImage = response.thumbnail_url;\r\n                callback(self.videoImage);\r\n              }\r\n            }\r\n          }\r\n        };\r\n\r\n        request.send();\r\n        request = null;\r\n      }\r\n    } // fallback to the old version.\r\n\r\n\r\n    getIframe(callback) {\r\n      this.getVideo(callback);\r\n    }\r\n\r\n    getVideo(callback) {\r\n      const self = this; // return generated video block\r\n\r\n      if (self.$video) {\r\n        callback(self.$video);\r\n        return;\r\n      } // generate new video block\r\n\r\n\r\n      self.onAPIready(() => {\r\n        let hiddenDiv;\r\n\r\n        if (!self.$video) {\r\n          hiddenDiv = document.createElement('div');\r\n          hiddenDiv.style.display = 'none';\r\n        } // Youtube\r\n\r\n\r\n        if (self.type === 'youtube') {\r\n          self.playerOptions = {\r\n            // GDPR Compliance.\r\n            host: 'https://www.youtube-nocookie.com',\r\n            videoId: self.videoID,\r\n            playerVars: {\r\n              autohide: 1,\r\n              rel: 0,\r\n              autoplay: 0,\r\n              // autoplay enable on mobile devices\r\n              playsinline: 1\r\n            }\r\n          }; // hide controls\r\n\r\n          if (!self.options.showControls) {\r\n            self.playerOptions.playerVars.iv_load_policy = 3;\r\n            self.playerOptions.playerVars.modestbranding = 1;\r\n            self.playerOptions.playerVars.controls = 0;\r\n            self.playerOptions.playerVars.showinfo = 0;\r\n            self.playerOptions.playerVars.disablekb = 1;\r\n          } // events\r\n\r\n\r\n          let ytStarted;\r\n          let ytProgressInterval;\r\n          self.playerOptions.events = {\r\n            onReady(e) {\r\n              // mute\r\n              if (self.options.mute) {\r\n                e.target.mute();\r\n              } else if (self.options.volume) {\r\n                e.target.setVolume(self.options.volume);\r\n              } // autoplay\r\n\r\n\r\n              if (self.options.autoplay) {\r\n                self.play(self.options.startTime);\r\n              }\r\n\r\n              self.fire('ready', e); // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\r\n              // https://github.com/nk-o/video-worker/issues/2\r\n\r\n              if (self.options.loop && !self.options.endTime) {\r\n                const secondsOffset = 0.1;\r\n                self.options.endTime = self.player.getDuration() - secondsOffset;\r\n              } // volumechange\r\n\r\n\r\n              setInterval(() => {\r\n                self.getVolume(volume => {\r\n                  if (self.options.volume !== volume) {\r\n                    self.options.volume = volume;\r\n                    self.fire('volumechange', e);\r\n                  }\r\n                });\r\n              }, 150);\r\n            },\r\n\r\n            onStateChange(e) {\r\n              // loop\r\n              if (self.options.loop && e.data === global$1$1.YT.PlayerState.ENDED) {\r\n                self.play(self.options.startTime);\r\n              }\r\n\r\n              if (!ytStarted && e.data === global$1$1.YT.PlayerState.PLAYING) {\r\n                ytStarted = 1;\r\n                self.fire('started', e);\r\n              }\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.PLAYING) {\r\n                self.fire('play', e);\r\n              }\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.PAUSED) {\r\n                self.fire('pause', e);\r\n              }\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.ENDED) {\r\n                self.fire('ended', e);\r\n              } // progress check\r\n\r\n\r\n              if (e.data === global$1$1.YT.PlayerState.PLAYING) {\r\n                ytProgressInterval = setInterval(() => {\r\n                  self.fire('timeupdate', e); // check for end of video and play again or stop\r\n\r\n                  if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\r\n                    if (self.options.loop) {\r\n                      self.play(self.options.startTime);\r\n                    } else {\r\n                      self.pause();\r\n                    }\r\n                  }\r\n                }, 150);\r\n              } else {\r\n                clearInterval(ytProgressInterval);\r\n              }\r\n            },\r\n\r\n            onError(e) {\r\n              self.fire('error', e);\r\n            }\r\n\r\n          };\r\n          const firstInit = !self.$video;\r\n\r\n          if (firstInit) {\r\n            const div = document.createElement('div');\r\n            div.setAttribute('id', self.playerID);\r\n            hiddenDiv.appendChild(div);\r\n            document.body.appendChild(hiddenDiv);\r\n          }\r\n\r\n          self.player = self.player || new global$1$1.YT.Player(self.playerID, self.playerOptions);\r\n\r\n          if (firstInit) {\r\n            self.$video = document.getElementById(self.playerID); // add accessibility attributes\r\n\r\n            if (self.options.accessibilityHidden) {\r\n              self.$video.setAttribute('tabindex', '-1');\r\n              self.$video.setAttribute('aria-hidden', 'true');\r\n            } // get video width and height\r\n\r\n\r\n            self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\r\n            self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\r\n          }\r\n        } // Vimeo\r\n\r\n\r\n        if (self.type === 'vimeo') {\r\n          self.playerOptions = {\r\n            // GDPR Compliance.\r\n            dnt: 1,\r\n            id: self.videoID,\r\n            autopause: 0,\r\n            transparent: 0,\r\n            autoplay: self.options.autoplay ? 1 : 0,\r\n            loop: self.options.loop ? 1 : 0,\r\n            muted: self.options.mute ? 1 : 0\r\n          };\r\n\r\n          if (self.options.volume) {\r\n            self.playerOptions.volume = self.options.volume;\r\n          } // hide controls\r\n\r\n\r\n          if (!self.options.showControls) {\r\n            self.playerOptions.badge = 0;\r\n            self.playerOptions.byline = 0;\r\n            self.playerOptions.portrait = 0;\r\n            self.playerOptions.title = 0;\r\n            self.playerOptions.background = 1;\r\n          }\r\n\r\n          if (!self.$video) {\r\n            let playerOptionsString = '';\r\n            Object.keys(self.playerOptions).forEach(key => {\r\n              if (playerOptionsString !== '') {\r\n                playerOptionsString += '&';\r\n              }\r\n\r\n              playerOptionsString += `${key}=${encodeURIComponent(self.playerOptions[key])}`;\r\n            }); // we need to create iframe manually because when we create it using API\r\n            // js events won't triggers after iframe moved to another place\r\n\r\n            self.$video = document.createElement('iframe');\r\n            self.$video.setAttribute('id', self.playerID);\r\n            self.$video.setAttribute('src', `https://player.vimeo.com/video/${self.videoID}?${playerOptionsString}`);\r\n            self.$video.setAttribute('frameborder', '0');\r\n            self.$video.setAttribute('mozallowfullscreen', '');\r\n            self.$video.setAttribute('allowfullscreen', '');\r\n            self.$video.setAttribute('title', 'Vimeo video player'); // add accessibility attributes\r\n\r\n            if (self.options.accessibilityHidden) {\r\n              self.$video.setAttribute('tabindex', '-1');\r\n              self.$video.setAttribute('aria-hidden', 'true');\r\n            }\r\n\r\n            hiddenDiv.appendChild(self.$video);\r\n            document.body.appendChild(hiddenDiv);\r\n          }\r\n\r\n          self.player = self.player || new global$1$1.Vimeo.Player(self.$video, self.playerOptions); // set current time for autoplay\r\n\r\n          if (self.options.startTime && self.options.autoplay) {\r\n            self.player.setCurrentTime(self.options.startTime);\r\n          } // get video width and height\r\n\r\n\r\n          self.player.getVideoWidth().then(width => {\r\n            self.videoWidth = width || 1280;\r\n          });\r\n          self.player.getVideoHeight().then(height => {\r\n            self.videoHeight = height || 720;\r\n          }); // events\r\n\r\n          let vmStarted;\r\n          self.player.on('timeupdate', e => {\r\n            if (!vmStarted) {\r\n              self.fire('started', e);\r\n              vmStarted = 1;\r\n            }\r\n\r\n            self.fire('timeupdate', e); // check for end of video and play again or stop\r\n\r\n            if (self.options.endTime) {\r\n              if (self.options.endTime && e.seconds >= self.options.endTime) {\r\n                if (self.options.loop) {\r\n                  self.play(self.options.startTime);\r\n                } else {\r\n                  self.pause();\r\n                }\r\n              }\r\n            }\r\n          });\r\n          self.player.on('play', e => {\r\n            self.fire('play', e); // check for the start time and start with it\r\n\r\n            if (self.options.startTime && e.seconds === 0) {\r\n              self.play(self.options.startTime);\r\n            }\r\n          });\r\n          self.player.on('pause', e => {\r\n            self.fire('pause', e);\r\n          });\r\n          self.player.on('ended', e => {\r\n            self.fire('ended', e);\r\n          });\r\n          self.player.on('loaded', e => {\r\n            self.fire('ready', e);\r\n          });\r\n          self.player.on('volumechange', e => {\r\n            self.fire('volumechange', e);\r\n          });\r\n          self.player.on('error', e => {\r\n            self.fire('error', e);\r\n          });\r\n        } // Local\r\n\r\n\r\n        function addSourceToLocal(element, src, type) {\r\n          const source = document.createElement('source');\r\n          source.src = src;\r\n          source.type = type;\r\n          element.appendChild(source);\r\n        }\r\n\r\n        if (self.type === 'local') {\r\n          if (!self.$video) {\r\n            self.$video = document.createElement('video'); // show controls\r\n\r\n            if (self.options.showControls) {\r\n              self.$video.controls = true;\r\n            } // mute\r\n\r\n\r\n            if (self.options.mute) {\r\n              self.$video.muted = true;\r\n            } else if (self.$video.volume) {\r\n              self.$video.volume = self.options.volume / 100;\r\n            } // loop\r\n\r\n\r\n            if (self.options.loop) {\r\n              self.$video.loop = true;\r\n            } // autoplay enable on mobile devices\r\n\r\n\r\n            self.$video.setAttribute('playsinline', '');\r\n            self.$video.setAttribute('webkit-playsinline', ''); // add accessibility attributes\r\n\r\n            if (self.options.accessibilityHidden) {\r\n              self.$video.setAttribute('tabindex', '-1');\r\n              self.$video.setAttribute('aria-hidden', 'true');\r\n            }\r\n\r\n            self.$video.setAttribute('id', self.playerID);\r\n            hiddenDiv.appendChild(self.$video);\r\n            document.body.appendChild(hiddenDiv);\r\n            Object.keys(self.videoID).forEach(key => {\r\n              addSourceToLocal(self.$video, self.videoID[key], `video/${key}`);\r\n            });\r\n          }\r\n\r\n          self.player = self.player || self.$video;\r\n          let locStarted;\r\n          self.player.addEventListener('playing', e => {\r\n            if (!locStarted) {\r\n              self.fire('started', e);\r\n            }\r\n\r\n            locStarted = 1;\r\n          });\r\n          self.player.addEventListener('timeupdate', function (e) {\r\n            self.fire('timeupdate', e); // check for end of video and play again or stop\r\n\r\n            if (self.options.endTime) {\r\n              if (self.options.endTime && this.currentTime >= self.options.endTime) {\r\n                if (self.options.loop) {\r\n                  self.play(self.options.startTime);\r\n                } else {\r\n                  self.pause();\r\n                }\r\n              }\r\n            }\r\n          });\r\n          self.player.addEventListener('play', e => {\r\n            self.fire('play', e);\r\n          });\r\n          self.player.addEventListener('pause', e => {\r\n            self.fire('pause', e);\r\n          });\r\n          self.player.addEventListener('ended', e => {\r\n            self.fire('ended', e);\r\n          });\r\n          self.player.addEventListener('loadedmetadata', function () {\r\n            // get video width and height\r\n            self.videoWidth = this.videoWidth || 1280;\r\n            self.videoHeight = this.videoHeight || 720;\r\n            self.fire('ready'); // autoplay\r\n\r\n            if (self.options.autoplay) {\r\n              self.play(self.options.startTime);\r\n            }\r\n          });\r\n          self.player.addEventListener('volumechange', e => {\r\n            self.getVolume(volume => {\r\n              self.options.volume = volume;\r\n            });\r\n            self.fire('volumechange', e);\r\n          });\r\n          self.player.addEventListener('error', e => {\r\n            self.fire('error', e);\r\n          });\r\n        }\r\n\r\n        callback(self.$video);\r\n      });\r\n    }\r\n\r\n    init() {\r\n      const self = this;\r\n      self.playerID = `VideoWorker-${self.ID}`;\r\n    }\r\n\r\n    loadAPI() {\r\n      const self = this;\r\n\r\n      if (YoutubeAPIadded && VimeoAPIadded) {\r\n        return;\r\n      }\r\n\r\n      let src = ''; // load Youtube API\r\n\r\n      if (self.type === 'youtube' && !YoutubeAPIadded) {\r\n        YoutubeAPIadded = 1;\r\n        src = 'https://www.youtube.com/iframe_api';\r\n      } // load Vimeo API\r\n\r\n\r\n      if (self.type === 'vimeo' && !VimeoAPIadded) {\r\n        VimeoAPIadded = 1; // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\r\n\r\n        if (typeof global$1$1.Vimeo !== 'undefined') {\r\n          return;\r\n        }\r\n\r\n        src = 'https://player.vimeo.com/api/player.js';\r\n      }\r\n\r\n      if (!src) {\r\n        return;\r\n      } // add script in head section\r\n\r\n\r\n      let tag = document.createElement('script');\r\n      let head = document.getElementsByTagName('head')[0];\r\n      tag.src = src;\r\n      head.appendChild(tag);\r\n      head = null;\r\n      tag = null;\r\n    }\r\n\r\n    onAPIready(callback) {\r\n      const self = this; // Youtube\r\n\r\n      if (self.type === 'youtube') {\r\n        // Listen for global YT player callback\r\n        if ((typeof global$1$1.YT === 'undefined' || global$1$1.YT.loaded === 0) && !loadingYoutubePlayer) {\r\n          // Prevents Ready event from being called twice\r\n          loadingYoutubePlayer = 1; // Creates deferred so, other players know when to wait.\r\n\r\n          global$1$1.onYouTubeIframeAPIReady = function () {\r\n            global$1$1.onYouTubeIframeAPIReady = null;\r\n            loadingYoutubeDefer.resolve('done');\r\n            callback();\r\n          };\r\n        } else if (typeof global$1$1.YT === 'object' && global$1$1.YT.loaded === 1) {\r\n          callback();\r\n        } else {\r\n          loadingYoutubeDefer.done(() => {\r\n            callback();\r\n          });\r\n        }\r\n      } // Vimeo\r\n\r\n\r\n      if (self.type === 'vimeo') {\r\n        if (typeof global$1$1.Vimeo === 'undefined' && !loadingVimeoPlayer) {\r\n          loadingVimeoPlayer = 1;\r\n          const vimeoInterval = setInterval(() => {\r\n            if (typeof global$1$1.Vimeo !== 'undefined') {\r\n              clearInterval(vimeoInterval);\r\n              loadingVimeoDefer.resolve('done');\r\n              callback();\r\n            }\r\n          }, 20);\r\n        } else if (typeof global$1$1.Vimeo !== 'undefined') {\r\n          callback();\r\n        } else {\r\n          loadingVimeoDefer.done(() => {\r\n            callback();\r\n          });\r\n        }\r\n      } // Local\r\n\r\n\r\n      if (self.type === 'local') {\r\n        callback();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  function ready(callback) {\r\n    if ('complete' === document.readyState || 'interactive' === document.readyState) {\r\n      // Already ready or interactive, execute callback\r\n      callback();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', callback, {\r\n        capture: true,\r\n        once: true,\r\n        passive: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win;\r\n\r\n  if ('undefined' !== typeof window) {\r\n    win = window;\r\n  } else if ('undefined' !== typeof global) {\r\n    win = global;\r\n  } else if ('undefined' !== typeof self) {\r\n    win = self;\r\n  } else {\r\n    win = {};\r\n  }\r\n\r\n  var global$1 = win;\r\n\r\n  function jarallaxVideo(jarallax = global$1.jarallax) {\r\n    if ('undefined' === typeof jarallax) {\r\n      return;\r\n    }\r\n\r\n    const Jarallax = jarallax.constructor; // append video after when block will be visible.\r\n\r\n    const defOnScroll = Jarallax.prototype.onScroll;\r\n\r\n    Jarallax.prototype.onScroll = function () {\r\n      const self = this;\r\n      defOnScroll.apply(self);\r\n      const isReady = !self.isVideoInserted && self.video && (!self.options.videoLazyLoading || self.isElementInViewport) && !self.options.disableVideo();\r\n\r\n      if (isReady) {\r\n        self.isVideoInserted = true;\r\n        self.video.getVideo(video => {\r\n          const $parent = video.parentNode;\r\n          self.css(video, {\r\n            position: self.image.position,\r\n            top: '0px',\r\n            left: '0px',\r\n            right: '0px',\r\n            bottom: '0px',\r\n            width: '100%',\r\n            height: '100%',\r\n            maxWidth: 'none',\r\n            maxHeight: 'none',\r\n            pointerEvents: 'none',\r\n            transformStyle: 'preserve-3d',\r\n            backfaceVisibility: 'hidden',\r\n            willChange: 'transform,opacity',\r\n            margin: 0,\r\n            zIndex: -1\r\n          });\r\n          self.$video = video; // add Poster attribute to self-hosted video\r\n\r\n          if ('local' === self.video.type) {\r\n            if (self.image.src) {\r\n              self.$video.setAttribute('poster', self.image.src);\r\n            } else if (self.image.$item && 'IMG' === self.image.$item.tagName && self.image.$item.src) {\r\n              self.$video.setAttribute('poster', self.image.$item.src);\r\n            }\r\n          } // insert video tag\r\n\r\n\r\n          self.image.$container.appendChild(video); // remove parent video element (created by VideoWorker)\r\n\r\n          $parent.parentNode.removeChild($parent); // call onVideoInsert event\r\n\r\n          if (self.options.onVideoInsert) {\r\n            self.options.onVideoInsert.call(self);\r\n          }\r\n        });\r\n      }\r\n    }; // cover video\r\n\r\n\r\n    const defCoverImage = Jarallax.prototype.coverImage;\r\n\r\n    Jarallax.prototype.coverImage = function () {\r\n      const self = this;\r\n      const imageData = defCoverImage.apply(self);\r\n      const node = self.image.$item ? self.image.$item.nodeName : false;\r\n\r\n      if (imageData && self.video && node && ('IFRAME' === node || 'VIDEO' === node)) {\r\n        let h = imageData.image.height;\r\n        let w = h * self.image.width / self.image.height;\r\n        let ml = (imageData.container.width - w) / 2;\r\n        let mt = imageData.image.marginTop;\r\n\r\n        if (imageData.container.width > w) {\r\n          w = imageData.container.width;\r\n          h = w * self.image.height / self.image.width;\r\n          ml = 0;\r\n          mt += (imageData.image.height - h) / 2;\r\n        } // add video height over than need to hide controls\r\n\r\n\r\n        if ('IFRAME' === node) {\r\n          h += 400;\r\n          mt -= 200;\r\n        }\r\n\r\n        self.css(self.$video, {\r\n          width: `${w}px`,\r\n          marginLeft: `${ml}px`,\r\n          height: `${h}px`,\r\n          marginTop: `${mt}px`\r\n        });\r\n      }\r\n\r\n      return imageData;\r\n    }; // init video\r\n\r\n\r\n    const defInitImg = Jarallax.prototype.initImg;\r\n\r\n    Jarallax.prototype.initImg = function () {\r\n      const self = this;\r\n      const defaultResult = defInitImg.apply(self);\r\n\r\n      if (!self.options.videoSrc) {\r\n        self.options.videoSrc = self.$item.getAttribute('data-jarallax-video') || null;\r\n      }\r\n\r\n      if (self.options.videoSrc) {\r\n        self.defaultInitImgResult = defaultResult;\r\n        return true;\r\n      }\r\n\r\n      return defaultResult;\r\n    };\r\n\r\n    const defCanInitParallax = Jarallax.prototype.canInitParallax;\r\n\r\n    Jarallax.prototype.canInitParallax = function () {\r\n      const self = this;\r\n      let defaultResult = defCanInitParallax.apply(self);\r\n\r\n      if (!self.options.videoSrc) {\r\n        return defaultResult;\r\n      } // Init video api\r\n\r\n\r\n      const video = new VideoWorker(self.options.videoSrc, {\r\n        autoplay: true,\r\n        loop: self.options.videoLoop,\r\n        showControls: false,\r\n        accessibilityHidden: true,\r\n        startTime: self.options.videoStartTime || 0,\r\n        endTime: self.options.videoEndTime || 0,\r\n        mute: self.options.videoVolume ? 0 : 1,\r\n        volume: self.options.videoVolume || 0\r\n      }); // call onVideoWorkerInit event\r\n\r\n      if (self.options.onVideoWorkerInit) {\r\n        self.options.onVideoWorkerInit.call(self, video);\r\n      }\r\n\r\n      function resetDefaultImage() {\r\n        if (self.image.$default_item) {\r\n          self.image.$item = self.image.$default_item;\r\n          self.image.$item.style.display = 'block'; // set image width and height\r\n\r\n          self.coverImage();\r\n          self.onScroll();\r\n        }\r\n      }\r\n\r\n      if (video.isValid()) {\r\n        // Force enable parallax.\r\n        // When the parallax disabled on mobile devices, we still need to display videos.\r\n        // https://github.com/nk-o/jarallax/issues/159\r\n        if (this.options.disableParallax()) {\r\n          defaultResult = true;\r\n          self.image.position = 'absolute';\r\n          self.options.type = 'scroll';\r\n          self.options.speed = 1;\r\n        } // if parallax will not be inited, we can add thumbnail on background.\r\n\r\n\r\n        if (!defaultResult) {\r\n          if (!self.defaultInitImgResult) {\r\n            video.getImageURL(url => {\r\n              // save default user styles\r\n              const curStyle = self.$item.getAttribute('style');\r\n\r\n              if (curStyle) {\r\n                self.$item.setAttribute('data-jarallax-original-styles', curStyle);\r\n              } // set new background\r\n\r\n\r\n              self.css(self.$item, {\r\n                'background-image': `url(\"${url}\")`,\r\n                'background-position': 'center',\r\n                'background-size': 'cover'\r\n              });\r\n            });\r\n          } // init video\r\n\r\n        } else {\r\n          video.on('ready', () => {\r\n            if (self.options.videoPlayOnlyVisible) {\r\n              const oldOnScroll = self.onScroll;\r\n\r\n              self.onScroll = function () {\r\n                oldOnScroll.apply(self);\r\n\r\n                if (!self.videoError && (self.options.videoLoop || !self.options.videoLoop && !self.videoEnded)) {\r\n                  if (self.isVisible()) {\r\n                    video.play();\r\n                  } else {\r\n                    video.pause();\r\n                  }\r\n                }\r\n              };\r\n            } else {\r\n              video.play();\r\n            }\r\n          });\r\n          video.on('started', () => {\r\n            self.image.$default_item = self.image.$item;\r\n            self.image.$item = self.$video; // set video width and height\r\n\r\n            self.image.width = self.video.videoWidth || 1280;\r\n            self.image.height = self.video.videoHeight || 720;\r\n            self.coverImage();\r\n            self.onScroll(); // hide image\r\n\r\n            if (self.image.$default_item) {\r\n              self.image.$default_item.style.display = 'none';\r\n            }\r\n          });\r\n          video.on('ended', () => {\r\n            self.videoEnded = true;\r\n\r\n            if (!self.options.videoLoop) {\r\n              // show default image if Loop disabled.\r\n              resetDefaultImage();\r\n            }\r\n          });\r\n          video.on('error', () => {\r\n            self.videoError = true; // show default image if video loading error.\r\n\r\n            resetDefaultImage();\r\n          });\r\n          self.video = video; // set image if not exists\r\n\r\n          if (!self.defaultInitImgResult) {\r\n            // set empty image on self-hosted video if not defined\r\n            self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n\r\n            if ('local' !== video.type) {\r\n              video.getImageURL(url => {\r\n                self.image.bgImage = `url(\"${url}\")`;\r\n                self.init();\r\n              });\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return defaultResult;\r\n    }; // Destroy video parallax\r\n\r\n\r\n    const defDestroy = Jarallax.prototype.destroy;\r\n\r\n    Jarallax.prototype.destroy = function () {\r\n      const self = this;\r\n\r\n      if (self.image.$default_item) {\r\n        self.image.$item = self.image.$default_item;\r\n        delete self.image.$default_item;\r\n      }\r\n\r\n      defDestroy.apply(self);\r\n    };\r\n  }\r\n\r\n  jarallaxVideo(); // data-jarallax-video initialization\r\n\r\n  ready(() => {\r\n    if ('undefined' !== typeof global$1.jarallax) {\r\n      global$1.jarallax(document.querySelectorAll('[data-jarallax-video]'));\r\n    }\r\n  }); // We should add VideoWorker globally, since some project uses it.\r\n\r\n  if (!global$1.VideoWorker) {\r\n    global$1.VideoWorker = VideoWorker;\r\n  }\r\n\r\n  return jarallaxVideo;\r\n\r\n}));\r\n//# sourceMappingURL=jarallax-video.js.map\r\n","Magento_PageBuilder/js/resource/jarallax/jarallax-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PageBuilder/js/resource/jarallax/jarallax'\r\n], function(jarallax){\r\n    'use strict';\r\n\r\n    window.jarallax = window.jarallax || jarallax;\r\n});\r\n","Magento_PageBuilder/js/resource/jarallax/jarallax.js":"/*!\r\n * Jarallax v2.0.3 (https://github.com/nk-o/jarallax)\r\n * Copyright 2022 nK <https://nkdev.info>\r\n * Licensed under MIT (https://github.com/nk-o/jarallax/blob/master/LICENSE)\r\n */\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n      typeof define === 'function' && define.amd ? define(factory) :\r\n          (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.jarallax = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  function ready(callback) {\r\n    if ('complete' === document.readyState || 'interactive' === document.readyState) {\r\n      // Already ready or interactive, execute callback\r\n      callback();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', callback, {\r\n        capture: true,\r\n        once: true,\r\n        passive: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win;\r\n\r\n  if ('undefined' !== typeof window) {\r\n    win = window;\r\n  } else if ('undefined' !== typeof global) {\r\n    win = global;\r\n  } else if ('undefined' !== typeof self) {\r\n    win = self;\r\n  } else {\r\n    win = {};\r\n  }\r\n\r\n  var global$1 = win;\r\n\r\n  const {\r\n    navigator\r\n  } = global$1;\r\n  const isMobile = /*#__PURE__*/ /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n  let $deviceHelper;\r\n  /**\r\n   * The most popular mobile browsers changes height after page scroll and this generates image jumping.\r\n   * We can fix it using this workaround with vh units.\r\n   */\r\n\r\n  function getDeviceHeight() {\r\n    if (!$deviceHelper && document.body) {\r\n      $deviceHelper = document.createElement('div');\r\n      $deviceHelper.style.cssText = 'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\r\n      document.body.appendChild($deviceHelper);\r\n    }\r\n\r\n    return ($deviceHelper ? $deviceHelper.clientHeight : 0) || global$1.innerHeight || document.documentElement.clientHeight;\r\n  } // Window height data\r\n\r\n\r\n  let wndH;\r\n\r\n  function updateWndVars() {\r\n    if (isMobile) {\r\n      wndH = getDeviceHeight();\r\n    } else {\r\n      wndH = global$1.innerHeight || document.documentElement.clientHeight;\r\n    }\r\n  }\r\n\r\n  updateWndVars();\r\n  global$1.addEventListener('resize', updateWndVars);\r\n  global$1.addEventListener('orientationchange', updateWndVars);\r\n  global$1.addEventListener('load', updateWndVars);\r\n  ready(() => {\r\n    updateWndVars();\r\n  }); // list with all jarallax instances\r\n  // need to render all in one scroll/resize event\r\n\r\n  const jarallaxList = []; // get all parents of the element.\r\n\r\n  function getParents(elem) {\r\n    const parents = [];\r\n\r\n    while (null !== elem.parentElement) {\r\n      elem = elem.parentElement;\r\n\r\n      if (1 === elem.nodeType) {\r\n        parents.push(elem);\r\n      }\r\n    }\r\n\r\n    return parents;\r\n  }\r\n\r\n  function updateParallax() {\r\n    if (!jarallaxList.length) {\r\n      return;\r\n    }\r\n\r\n    jarallaxList.forEach((data, k) => {\r\n      const {\r\n        instance,\r\n        oldData\r\n      } = data;\r\n      const clientRect = instance.$item.getBoundingClientRect();\r\n      const newData = {\r\n        width: clientRect.width,\r\n        height: clientRect.height,\r\n        top: clientRect.top,\r\n        bottom: clientRect.bottom,\r\n        wndW: global$1.innerWidth,\r\n        wndH\r\n      };\r\n      const isResized = !oldData || oldData.wndW !== newData.wndW || oldData.wndH !== newData.wndH || oldData.width !== newData.width || oldData.height !== newData.height;\r\n      const isScrolled = isResized || !oldData || oldData.top !== newData.top || oldData.bottom !== newData.bottom;\r\n      jarallaxList[k].oldData = newData;\r\n\r\n      if (isResized) {\r\n        instance.onResize();\r\n      }\r\n\r\n      if (isScrolled) {\r\n        instance.onScroll();\r\n      }\r\n    });\r\n    global$1.requestAnimationFrame(updateParallax);\r\n  }\r\n\r\n  let instanceID = 0; // Jarallax class\r\n\r\n  class Jarallax {\r\n    constructor(item, userOptions) {\r\n      const self = this;\r\n      self.instanceID = instanceID;\r\n      instanceID += 1;\r\n      self.$item = item;\r\n      self.defaults = {\r\n        type: 'scroll',\r\n        // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\r\n        speed: 0.5,\r\n        // supported value from -1 to 2\r\n        imgSrc: null,\r\n        imgElement: '.jarallax-img',\r\n        imgSize: 'cover',\r\n        imgPosition: '50% 50%',\r\n        imgRepeat: 'no-repeat',\r\n        // supported only for background, not for <img> tag\r\n        keepImg: false,\r\n        // keep <img> tag in it's default place\r\n        elementInViewport: null,\r\n        zIndex: -100,\r\n        disableParallax: false,\r\n        disableVideo: false,\r\n        // video\r\n        videoSrc: null,\r\n        videoStartTime: 0,\r\n        videoEndTime: 0,\r\n        videoVolume: 0,\r\n        videoLoop: true,\r\n        videoPlayOnlyVisible: true,\r\n        videoLazyLoading: true,\r\n        // events\r\n        onScroll: null,\r\n        // function(calculations) {}\r\n        onInit: null,\r\n        // function() {}\r\n        onDestroy: null,\r\n        // function() {}\r\n        onCoverImage: null // function() {}\r\n\r\n      }; // prepare data-options\r\n\r\n      const dataOptions = self.$item.dataset || {};\r\n      const pureDataOptions = {};\r\n      Object.keys(dataOptions).forEach(key => {\r\n        const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\r\n\r\n        if (loweCaseOption && 'undefined' !== typeof self.defaults[loweCaseOption]) {\r\n          pureDataOptions[loweCaseOption] = dataOptions[key];\r\n        }\r\n      });\r\n      self.options = self.extend({}, self.defaults, pureDataOptions, userOptions);\r\n      self.pureOptions = self.extend({}, self.options); // prepare 'true' and 'false' strings to boolean\r\n\r\n      Object.keys(self.options).forEach(key => {\r\n        if ('true' === self.options[key]) {\r\n          self.options[key] = true;\r\n        } else if ('false' === self.options[key]) {\r\n          self.options[key] = false;\r\n        }\r\n      }); // fix speed option [-1.0, 2.0]\r\n\r\n      self.options.speed = Math.min(2, Math.max(-1, parseFloat(self.options.speed))); // prepare disableParallax callback\r\n\r\n      if ('string' === typeof self.options.disableParallax) {\r\n        self.options.disableParallax = new RegExp(self.options.disableParallax);\r\n      }\r\n\r\n      if (self.options.disableParallax instanceof RegExp) {\r\n        const disableParallaxRegexp = self.options.disableParallax;\r\n\r\n        self.options.disableParallax = () => disableParallaxRegexp.test(navigator.userAgent);\r\n      }\r\n\r\n      if ('function' !== typeof self.options.disableParallax) {\r\n        self.options.disableParallax = () => false;\r\n      } // prepare disableVideo callback\r\n\r\n\r\n      if ('string' === typeof self.options.disableVideo) {\r\n        self.options.disableVideo = new RegExp(self.options.disableVideo);\r\n      }\r\n\r\n      if (self.options.disableVideo instanceof RegExp) {\r\n        const disableVideoRegexp = self.options.disableVideo;\r\n\r\n        self.options.disableVideo = () => disableVideoRegexp.test(navigator.userAgent);\r\n      }\r\n\r\n      if ('function' !== typeof self.options.disableVideo) {\r\n        self.options.disableVideo = () => false;\r\n      } // custom element to check if parallax in viewport\r\n\r\n\r\n      let elementInVP = self.options.elementInViewport; // get first item from array\r\n\r\n      if (elementInVP && 'object' === typeof elementInVP && 'undefined' !== typeof elementInVP.length) {\r\n        [elementInVP] = elementInVP;\r\n      } // check if dom element\r\n\r\n\r\n      if (!(elementInVP instanceof Element)) {\r\n        elementInVP = null;\r\n      }\r\n\r\n      self.options.elementInViewport = elementInVP;\r\n      self.image = {\r\n        src: self.options.imgSrc || null,\r\n        $container: null,\r\n        useImgTag: false,\r\n        // 1. Position fixed is needed for the most of browsers because absolute position have glitches\r\n        // 2. On MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\r\n        // 3. Previously used 'absolute' for mobile devices. But we re-tested on iPhone 12 and 'fixed' position is working better, then 'absolute', so for now position is always 'fixed'\r\n        position: 'fixed'\r\n      };\r\n\r\n      if (self.initImg() && self.canInitParallax()) {\r\n        self.init();\r\n      }\r\n    } // add styles to element\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    css(el, styles) {\r\n      if ('string' === typeof styles) {\r\n        return global$1.getComputedStyle(el).getPropertyValue(styles);\r\n      }\r\n\r\n      Object.keys(styles).forEach(key => {\r\n        el.style[key] = styles[key];\r\n      });\r\n      return el;\r\n    } // Extend like jQuery.extend\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    extend(out, ...args) {\r\n      out = out || {};\r\n      Object.keys(args).forEach(i => {\r\n        if (!args[i]) {\r\n          return;\r\n        }\r\n\r\n        Object.keys(args[i]).forEach(key => {\r\n          out[key] = args[i][key];\r\n        });\r\n      });\r\n      return out;\r\n    } // get window size and scroll position. Useful for extensions\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    getWindowData() {\r\n      return {\r\n        width: global$1.innerWidth || document.documentElement.clientWidth,\r\n        height: wndH,\r\n        y: document.documentElement.scrollTop\r\n      };\r\n    } // Jarallax functions\r\n\r\n\r\n    initImg() {\r\n      const self = this; // find image element\r\n\r\n      let $imgElement = self.options.imgElement;\r\n\r\n      if ($imgElement && 'string' === typeof $imgElement) {\r\n        $imgElement = self.$item.querySelector($imgElement);\r\n      } // check if dom element\r\n\r\n\r\n      if (!($imgElement instanceof Element)) {\r\n        if (self.options.imgSrc) {\r\n          $imgElement = new Image();\r\n          $imgElement.src = self.options.imgSrc;\r\n        } else {\r\n          $imgElement = null;\r\n        }\r\n      }\r\n\r\n      if ($imgElement) {\r\n        if (self.options.keepImg) {\r\n          self.image.$item = $imgElement.cloneNode(true);\r\n        } else {\r\n          self.image.$item = $imgElement;\r\n          self.image.$itemParent = $imgElement.parentNode;\r\n        }\r\n\r\n        self.image.useImgTag = true;\r\n      } // true if there is img tag\r\n\r\n\r\n      if (self.image.$item) {\r\n        return true;\r\n      } // get image src\r\n\r\n\r\n      if (null === self.image.src) {\r\n        self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n        self.image.bgImage = self.css(self.$item, 'background-image');\r\n      }\r\n\r\n      return !(!self.image.bgImage || 'none' === self.image.bgImage);\r\n    }\r\n\r\n    canInitParallax() {\r\n      return !this.options.disableParallax();\r\n    }\r\n\r\n    init() {\r\n      const self = this;\r\n      const containerStyles = {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n      };\r\n      let imageStyles = {\r\n        pointerEvents: 'none',\r\n        transformStyle: 'preserve-3d',\r\n        backfaceVisibility: 'hidden',\r\n        willChange: 'transform,opacity'\r\n      };\r\n\r\n      if (!self.options.keepImg) {\r\n        // save default user styles\r\n        const curStyle = self.$item.getAttribute('style');\r\n\r\n        if (curStyle) {\r\n          self.$item.setAttribute('data-jarallax-original-styles', curStyle);\r\n        }\r\n\r\n        if (self.image.useImgTag) {\r\n          const curImgStyle = self.image.$item.getAttribute('style');\r\n\r\n          if (curImgStyle) {\r\n            self.image.$item.setAttribute('data-jarallax-original-styles', curImgStyle);\r\n          }\r\n        }\r\n      } // set relative position and z-index to the parent\r\n\r\n\r\n      if ('static' === self.css(self.$item, 'position')) {\r\n        self.css(self.$item, {\r\n          position: 'relative'\r\n        });\r\n      }\r\n\r\n      if ('auto' === self.css(self.$item, 'z-index')) {\r\n        self.css(self.$item, {\r\n          zIndex: 0\r\n        });\r\n      } // container for parallax image\r\n\r\n\r\n      self.image.$container = document.createElement('div');\r\n      self.css(self.image.$container, containerStyles);\r\n      self.css(self.image.$container, {\r\n        'z-index': self.options.zIndex\r\n      }); // it will remove some image overlapping\r\n      // overlapping occur due to an image position fixed inside absolute position element\r\n      // needed only when background in fixed position\r\n\r\n      if ('fixed' === this.image.position) {\r\n        self.css(self.image.$container, {\r\n          '-webkit-clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%)',\r\n          'clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%)'\r\n        });\r\n      }\r\n\r\n      self.image.$container.setAttribute('id', `jarallax-container-${self.instanceID}`);\r\n      self.$item.appendChild(self.image.$container); // use img tag\r\n\r\n      if (self.image.useImgTag) {\r\n        imageStyles = self.extend({\r\n          'object-fit': self.options.imgSize,\r\n          'object-position': self.options.imgPosition,\r\n          'max-width': 'none'\r\n        }, containerStyles, imageStyles); // use div with background image\r\n      } else {\r\n        self.image.$item = document.createElement('div');\r\n\r\n        if (self.image.src) {\r\n          imageStyles = self.extend({\r\n            'background-position': self.options.imgPosition,\r\n            'background-size': self.options.imgSize,\r\n            'background-repeat': self.options.imgRepeat,\r\n            'background-image': self.image.bgImage || `url(\"${self.image.src}\")`\r\n          }, containerStyles, imageStyles);\r\n        }\r\n      }\r\n\r\n      if ('opacity' === self.options.type || 'scale' === self.options.type || 'scale-opacity' === self.options.type || 1 === self.options.speed) {\r\n        self.image.position = 'absolute';\r\n      } // 1. Check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\r\n      //    discussion - https://github.com/nk-o/jarallax/issues/9\r\n      // 2. Check if parents have overflow scroll\r\n\r\n\r\n      if ('fixed' === self.image.position) {\r\n        const $parents = getParents(self.$item).filter(el => {\r\n          const styles = global$1.getComputedStyle(el);\r\n          const parentTransform = styles['-webkit-transform'] || styles['-moz-transform'] || styles.transform;\r\n          const overflowRegex = /(auto|scroll)/;\r\n          return parentTransform && 'none' !== parentTransform || overflowRegex.test(styles.overflow + styles['overflow-y'] + styles['overflow-x']);\r\n        });\r\n        self.image.position = $parents.length ? 'absolute' : 'fixed';\r\n      } // add position to parallax block\r\n\r\n\r\n      imageStyles.position = self.image.position; // insert parallax image\r\n\r\n      self.css(self.image.$item, imageStyles);\r\n      self.image.$container.appendChild(self.image.$item); // set initial position and size\r\n\r\n      self.onResize();\r\n      self.onScroll(true); // call onInit event\r\n\r\n      if (self.options.onInit) {\r\n        self.options.onInit.call(self);\r\n      } // remove default user background\r\n\r\n\r\n      if ('none' !== self.css(self.$item, 'background-image')) {\r\n        self.css(self.$item, {\r\n          'background-image': 'none'\r\n        });\r\n      }\r\n\r\n      self.addToParallaxList();\r\n    } // add to parallax instances list\r\n\r\n\r\n    addToParallaxList() {\r\n      jarallaxList.push({\r\n        instance: this\r\n      });\r\n\r\n      if (1 === jarallaxList.length) {\r\n        global$1.requestAnimationFrame(updateParallax);\r\n      }\r\n    } // remove from parallax instances list\r\n\r\n\r\n    removeFromParallaxList() {\r\n      const self = this;\r\n      jarallaxList.forEach((data, key) => {\r\n        if (data.instance.instanceID === self.instanceID) {\r\n          jarallaxList.splice(key, 1);\r\n        }\r\n      });\r\n    }\r\n\r\n    destroy() {\r\n      const self = this;\r\n      self.removeFromParallaxList(); // return styles on container as before jarallax init\r\n\r\n      const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\r\n      self.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\r\n\r\n      if (!originalStylesTag) {\r\n        self.$item.removeAttribute('style');\r\n      } else {\r\n        self.$item.setAttribute('style', originalStylesTag);\r\n      }\r\n\r\n      if (self.image.useImgTag) {\r\n        // return styles on img tag as before jarallax init\r\n        const originalStylesImgTag = self.image.$item.getAttribute('data-jarallax-original-styles');\r\n        self.image.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\r\n\r\n        if (!originalStylesImgTag) {\r\n          self.image.$item.removeAttribute('style');\r\n        } else {\r\n          self.image.$item.setAttribute('style', originalStylesTag);\r\n        } // move img tag to its default position\r\n\r\n\r\n        if (self.image.$itemParent) {\r\n          self.image.$itemParent.appendChild(self.image.$item);\r\n        }\r\n      } // remove additional dom elements\r\n\r\n\r\n      if (self.image.$container) {\r\n        self.image.$container.parentNode.removeChild(self.image.$container);\r\n      } // call onDestroy event\r\n\r\n\r\n      if (self.options.onDestroy) {\r\n        self.options.onDestroy.call(self);\r\n      } // delete jarallax from item\r\n\r\n\r\n      delete self.$item.jarallax;\r\n    } // Fallback for removed function.\r\n    // Does nothing now.\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    clipContainer() {}\r\n\r\n    coverImage() {\r\n      const self = this;\r\n      const rect = self.image.$container.getBoundingClientRect();\r\n      const contH = rect.height;\r\n      const {\r\n        speed\r\n      } = self.options;\r\n      const isScroll = 'scroll' === self.options.type || 'scroll-opacity' === self.options.type;\r\n      let scrollDist = 0;\r\n      let resultH = contH;\r\n      let resultMT = 0; // scroll parallax\r\n\r\n      if (isScroll) {\r\n        // scroll distance and height for image\r\n        if (0 > speed) {\r\n          scrollDist = speed * Math.max(contH, wndH);\r\n\r\n          if (wndH < contH) {\r\n            scrollDist -= speed * (contH - wndH);\r\n          }\r\n        } else {\r\n          scrollDist = speed * (contH + wndH);\r\n        } // size for scroll parallax\r\n\r\n\r\n        if (1 < speed) {\r\n          resultH = Math.abs(scrollDist - wndH);\r\n        } else if (0 > speed) {\r\n          resultH = scrollDist / speed + Math.abs(scrollDist);\r\n        } else {\r\n          resultH += (wndH - contH) * (1 - speed);\r\n        }\r\n\r\n        scrollDist /= 2;\r\n      } // store scroll distance\r\n\r\n\r\n      self.parallaxScrollDistance = scrollDist; // vertical center\r\n\r\n      if (isScroll) {\r\n        resultMT = (wndH - resultH) / 2;\r\n      } else {\r\n        resultMT = (contH - resultH) / 2;\r\n      } // apply result to item\r\n\r\n\r\n      self.css(self.image.$item, {\r\n        height: `${resultH}px`,\r\n        marginTop: `${resultMT}px`,\r\n        left: 'fixed' === self.image.position ? `${rect.left}px` : '0',\r\n        width: `${rect.width}px`\r\n      }); // call onCoverImage event\r\n\r\n      if (self.options.onCoverImage) {\r\n        self.options.onCoverImage.call(self);\r\n      } // return some useful data. Used in the video cover function\r\n\r\n\r\n      return {\r\n        image: {\r\n          height: resultH,\r\n          marginTop: resultMT\r\n        },\r\n        container: rect\r\n      };\r\n    }\r\n\r\n    isVisible() {\r\n      return this.isElementInViewport || false;\r\n    }\r\n\r\n    onScroll(force) {\r\n      const self = this;\r\n      const rect = self.$item.getBoundingClientRect();\r\n      const contT = rect.top;\r\n      const contH = rect.height;\r\n      const styles = {}; // check if in viewport\r\n\r\n      let viewportRect = rect;\r\n\r\n      if (self.options.elementInViewport) {\r\n        viewportRect = self.options.elementInViewport.getBoundingClientRect();\r\n      }\r\n\r\n      self.isElementInViewport = 0 <= viewportRect.bottom && 0 <= viewportRect.right && viewportRect.top <= wndH && viewportRect.left <= global$1.innerWidth; // stop calculations if item is not in viewport\r\n\r\n      if (force ? false : !self.isElementInViewport) {\r\n        return;\r\n      } // calculate parallax helping variables\r\n\r\n\r\n      const beforeTop = Math.max(0, contT);\r\n      const beforeTopEnd = Math.max(0, contH + contT);\r\n      const afterTop = Math.max(0, -contT);\r\n      const beforeBottom = Math.max(0, contT + contH - wndH);\r\n      const beforeBottomEnd = Math.max(0, contH - (contT + contH - wndH));\r\n      const afterBottom = Math.max(0, -contT + wndH - contH);\r\n      const fromViewportCenter = 1 - 2 * ((wndH - contT) / (wndH + contH)); // calculate on how percent of section is visible\r\n\r\n      let visiblePercent = 1;\r\n\r\n      if (contH < wndH) {\r\n        visiblePercent = 1 - (afterTop || beforeBottom) / contH;\r\n      } else if (beforeTopEnd <= wndH) {\r\n        visiblePercent = beforeTopEnd / wndH;\r\n      } else if (beforeBottomEnd <= wndH) {\r\n        visiblePercent = beforeBottomEnd / wndH;\r\n      } // opacity\r\n\r\n\r\n      if ('opacity' === self.options.type || 'scale-opacity' === self.options.type || 'scroll-opacity' === self.options.type) {\r\n        styles.transform = 'translate3d(0,0,0)';\r\n        styles.opacity = visiblePercent;\r\n      } // scale\r\n\r\n\r\n      if ('scale' === self.options.type || 'scale-opacity' === self.options.type) {\r\n        let scale = 1;\r\n\r\n        if (0 > self.options.speed) {\r\n          scale -= self.options.speed * visiblePercent;\r\n        } else {\r\n          scale += self.options.speed * (1 - visiblePercent);\r\n        }\r\n\r\n        styles.transform = `scale(${scale}) translate3d(0,0,0)`;\r\n      } // scroll\r\n\r\n\r\n      if ('scroll' === self.options.type || 'scroll-opacity' === self.options.type) {\r\n        let positionY = self.parallaxScrollDistance * fromViewportCenter; // fix if parallax block in absolute position\r\n\r\n        if ('absolute' === self.image.position) {\r\n          positionY -= contT;\r\n        }\r\n\r\n        styles.transform = `translate3d(0,${positionY}px,0)`;\r\n      }\r\n\r\n      self.css(self.image.$item, styles); // call onScroll event\r\n\r\n      if (self.options.onScroll) {\r\n        self.options.onScroll.call(self, {\r\n          section: rect,\r\n          beforeTop,\r\n          beforeTopEnd,\r\n          afterTop,\r\n          beforeBottom,\r\n          beforeBottomEnd,\r\n          afterBottom,\r\n          visiblePercent,\r\n          fromViewportCenter\r\n        });\r\n      }\r\n    }\r\n\r\n    onResize() {\r\n      this.coverImage();\r\n    }\r\n\r\n  } // global definition\r\n\r\n\r\n  const jarallax = function (items, options, ...args) {\r\n    // check for dom element\r\n    // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\r\n    if ('object' === typeof HTMLElement ? items instanceof HTMLElement : items && 'object' === typeof items && null !== items && 1 === items.nodeType && 'string' === typeof items.nodeName) {\r\n      items = [items];\r\n    }\r\n\r\n    const len = items.length;\r\n    let k = 0;\r\n    let ret;\r\n\r\n    for (k; k < len; k += 1) {\r\n      if ('object' === typeof options || 'undefined' === typeof options) {\r\n        if (!items[k].jarallax) {\r\n          items[k].jarallax = new Jarallax(items[k], options);\r\n        }\r\n      } else if (items[k].jarallax) {\r\n        // eslint-disable-next-line prefer-spread\r\n        ret = items[k].jarallax[options].apply(items[k].jarallax, args);\r\n      }\r\n\r\n      if ('undefined' !== typeof ret) {\r\n        return ret;\r\n      }\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  jarallax.constructor = Jarallax;\r\n\r\n  const $ = global$1.jQuery; // jQuery support\r\n\r\n  if ('undefined' !== typeof $) {\r\n    const $Plugin = function (...args) {\r\n      Array.prototype.unshift.call(args, this);\r\n      const res = jarallax.apply(global$1, args);\r\n      return 'object' !== typeof res ? res : this;\r\n    };\r\n\r\n    $Plugin.constructor = jarallax.constructor; // no conflict\r\n\r\n    const old$Plugin = $.fn.jarallax;\r\n    $.fn.jarallax = $Plugin;\r\n\r\n    $.fn.jarallax.noConflict = function () {\r\n      $.fn.jarallax = old$Plugin;\r\n      return this;\r\n    };\r\n  } // data-jarallax initialization\r\n\r\n\r\n  ready(() => {\r\n    jarallax(document.querySelectorAll('[data-jarallax]'));\r\n  });\r\n\r\n  return jarallax;\r\n\r\n}));\r\n//# sourceMappingURL=jarallax.js.map\r\n","Magento_PageBuilder/js/resource/slick/slick.min.js":"/*\r\n     _ _      _       _\r\n ___| (_) ___| | __  (_)___\r\n/ __| | |/ __| |/ /  | / __|\r\n\\__ \\ | | (__|   < _ | \\__ \\\r\n|___/_|_|\\___|_|\\_(_)/ |___/\r\n                   |__/\r\n\r\n Version: 1.9.0\r\n  Author: Ken Wheeler\r\n Website: http://kenwheeler.github.io\r\n    Docs: http://kenwheeler.github.io/slick\r\n    Repo: http://github.com/kenwheeler/slick\r\n  Issues: http://github.com/kenwheeler/slick/issues\r\n\r\n */\r\n(function(i){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],i):\"undefined\"!=typeof exports?module.exports=i(require(\"jquery\")):i(jQuery)})(function(i){\"use strict\";var e=window.Slick||{};e=function(){function e(e,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(e),appendDots:i(e),arrows:!0,asNavFor:null,prevArrow:'<button class=\"slick-prev\" aria-label=\"Previous\" type=\"button\">Previous</button>',nextArrow:'<button class=\"slick-next\" aria-label=\"Next\" type=\"button\">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:\"50px\",cssEase:\"ease\",customPaging:function(e,t){return i('<button type=\"button\" />').text(t+1)},dots:!1,dotsClass:\"slick-dots\",draggable:!0,easing:\"linear\",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:\"ondemand\",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:\"window\",responsive:null,rows:1,rtl:!1,slide:\"\",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden=\"hidden\",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(e),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange=\"visibilitychange\",n.windowWidth=0,n.windowTimer=null,s=i(e).data(\"slick\")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,\"undefined\"!=typeof document.mozHidden?(n.hidden=\"mozHidden\",n.visibilityChange=\"mozvisibilitychange\"):\"undefined\"!=typeof document.webkitHidden&&(n.hidden=\"webkitHidden\",n.visibilityChange=\"webkitvisibilitychange\"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=t++,n.htmlExpr=/^(?:\\s*(<[\\w\\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}var t=0;return e}(),e.prototype.activateADA=function(){var i=this;i.$slideTrack.find(\".slick-active\").attr({\"aria-hidden\":\"false\"}).find(\"a, input, button, select\").attr({tabindex:\"0\"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if(\"boolean\"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),\"number\"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):o===!0?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr(\"data-slick-index\",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),s.options.vertical===!1?(o[s.animType]=\"translate(\"+i+\"px, 0px)\",s.$slideTrack.css(o)):(o[s.animType]=\"translate(0px,\"+i+\"px)\",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),s.options.vertical===!1?o[s.animType]=\"translate3d(\"+e+\"px, 0px, 0px)\":o[s.animType]=\"translate3d(0px,\"+e+\"px, 0px)\",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this,o=t.getNavTarget();null!==o&&\"object\"==typeof o&&o.each(function(){var t=i(this).slick(\"getSlick\");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};e.options.fade===!1?t[e.transitionType]=e.transformType+\" \"+e.options.speed+\"ms \"+e.options.cssEase:t[e.transitionType]=\"opacity \"+e.options.speed+\"ms \"+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(i.options.infinite===!1&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1===0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=i(e.options.prevArrow).addClass(\"slick-arrow\"),e.$nextArrow=i(e.options.nextArrow).addClass(\"slick-arrow\"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass(\"slick-hidden\").removeAttr(\"aria-hidden tabindex\"),e.$nextArrow.removeClass(\"slick-hidden\").removeAttr(\"aria-hidden tabindex\"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\")):e.$prevArrow.add(e.$nextArrow).addClass(\"slick-hidden\").attr({\"aria-disabled\":\"true\",tabindex:\"-1\"}))},e.prototype.buildDots=function(){var e,t,o=this;if(o.options.dots===!0&&o.slideCount>o.options.slidesToShow){for(o.$slider.addClass(\"slick-dotted\"),t=i(\"<ul />\").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i(\"<li />\").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find(\"li\").first().addClass(\"slick-active\")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+\":not(.slick-cloned)\").addClass(\"slick-slide\"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr(\"data-slick-index\",e).data(\"originalStyling\",i(t).attr(\"style\")||\"\")}),e.$slider.addClass(\"slick-slider\"),e.$slideTrack=0===e.slideCount?i('<div class=\"slick-track\"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class=\"slick-track\"/>').parent(),e.$list=e.$slideTrack.wrap('<div class=\"slick-list\"/>').parent(),e.$slideTrack.css(\"opacity\",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),i(\"img[data-lazy]\",e.$slider).not(\"[src]\").addClass(\"slick-loading\"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses(\"number\"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass(\"draggable\")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>0){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement(\"div\");for(e=0;e<l.options.rows;e++){var a=document.createElement(\"div\");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+\"%\",display:\"inline-block\"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if(\"window\"===r.respondTo?n=a:\"slider\"===r.respondTo?n=d:\"min\"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(r.originalSettings.mobileFirst===!1?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,\"unslick\"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,\"unslick\"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||l===!1||r.$slider.trigger(\"breakpoint\",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is(\"a\")&&e.preventDefault(),l.is(\"li\")||(l=l.closest(\"li\")),n=r.slideCount%r.options.slidesToScroll!==0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case\"previous\":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case\"next\":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case\"index\":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger(\"focus\");break;default:return}},e.prototype.checkNavigable=function(i){var e,t,o=this;if(e=o.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var s in e){if(i<e[s]){i=t;break}t=e[s]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i(\"li\",e.$dots).off(\"click.slick\",e.changeSlide).off(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)).off(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1)),e.options.accessibility===!0&&e.$dots.off(\"keydown.slick\",e.keyHandler)),e.$slider.off(\"focus.slick blur.slick\"),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off(\"click.slick\",e.changeSlide),e.$nextArrow&&e.$nextArrow.off(\"click.slick\",e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow&&e.$prevArrow.off(\"keydown.slick\",e.keyHandler),e.$nextArrow&&e.$nextArrow.off(\"keydown.slick\",e.keyHandler))),e.$list.off(\"touchstart.slick mousedown.slick\",e.swipeHandler),e.$list.off(\"touchmove.slick mousemove.slick\",e.swipeHandler),e.$list.off(\"touchend.slick mouseup.slick\",e.swipeHandler),e.$list.off(\"touchcancel.slick mouseleave.slick\",e.swipeHandler),e.$list.off(\"click.slick\",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),e.options.accessibility===!0&&e.$list.off(\"keydown.slick\",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().off(\"click.slick\",e.selectHandler),i(window).off(\"orientationchange.slick.slick-\"+e.instanceUid,e.orientationChange),i(window).off(\"resize.slick.slick-\"+e.instanceUid,e.resize),i(\"[draggable!=true]\",e.$slideTrack).off(\"dragstart\",e.preventDefault),i(window).off(\"load.slick.slick-\"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)),e.$list.off(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>0&&(i=e.$slides.children().children(),i.removeAttr(\"style\"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){var e=this;e.shouldClick===!1&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(\".slick-cloned\",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass(\"slick-disabled slick-arrow slick-hidden\").removeAttr(\"aria-hidden aria-disabled tabindex\").css(\"display\",\"\"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass(\"slick-disabled slick-arrow slick-hidden\").removeAttr(\"aria-hidden aria-disabled tabindex\").css(\"display\",\"\"),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass(\"slick-slide slick-active slick-center slick-visible slick-current\").removeAttr(\"aria-hidden\").removeAttr(\"data-slick-index\").each(function(){i(this).attr(\"style\",i(this).data(\"originalStyling\"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass(\"slick-slider\"),t.$slider.removeClass(\"slick-initialized\"),t.$slider.removeClass(\"slick-dotted\"),t.unslicked=!0,e||t.$slider.trigger(\"destroy\",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]=\"\",e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;t.cssTransitions===!1?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;e.cssTransitions===!1?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off(\"focus.slick blur.slick\").on(\"focus.slick\",\"*\",function(t){var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&o.is(\":focus\")&&(e.focussed=!0,e.autoPlay())},0)}).on(\"blur.slick\",\"*\",function(t){i(this);e.options.pauseOnFocus&&(e.focussed=!1,e.autoPlay())})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var i=this;return i.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(i.options.infinite===!0)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(i.options.centerMode===!0)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),n.options.infinite===!0?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,n.options.vertical===!0&&n.options.centerMode===!0&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!==0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),n.options.centerMode===!0&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:n.options.centerMode===!0&&n.options.infinite===!0?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:n.options.centerMode===!0&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=n.options.vertical===!1?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,n.options.variableWidth===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(\".slick-slide\").eq(i):n.$slideTrack.children(\".slick-slide\").eq(i+n.options.slidesToShow),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,n.options.centerMode===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(\".slick-slide\").eq(i):n.$slideTrack.children(\".slick-slide\").eq(i+n.options.slidesToShow+1),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){var e=this;return e.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(e.options.infinite===!1?i=e.slideCount:(t=e.options.slidesToScroll*-1,o=e.options.slidesToScroll*-1,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o,s,n=this;return s=n.options.centerMode===!0?Math.floor(n.$list.width()/2):0,o=n.swipeLeft*-1+s,n.options.swipeToSlide===!0?(n.$slideTrack.find(\".slick-slide\").each(function(e,s){var r,l,d;if(r=i(s).outerWidth(),l=s.offsetLeft,n.options.centerMode!==!0&&(l+=r/2),d=l+r,o<d)return t=s,!1}),e=Math.abs(i(t).attr(\"data-slick-index\")-n.currentSlide)||1):n.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){var t=this;t.changeSlide({data:{message:\"index\",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass(\"slick-initialized\")||(i(t.$slider).addClass(\"slick-initialized\"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger(\"init\",[t]),t.options.accessibility===!0&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(\".slick-cloned\")).attr({\"aria-hidden\":\"true\",tabindex:\"-1\"}).find(\"a, input, button, select\").attr({tabindex:\"-1\"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(\".slick-cloned\")).each(function(t){var s=o.indexOf(t);if(i(this).attr({role:\"tabpanel\",id:\"slick-slide\"+e.instanceUid+t,tabindex:-1}),s!==-1){var n=\"slick-slide-control\"+e.instanceUid+s;i(\"#\"+n).length&&i(this).attr({\"aria-describedby\":n})}}),e.$dots.attr(\"role\",\"tablist\").find(\"li\").each(function(s){var n=o[s];i(this).attr({role:\"presentation\"}),i(this).find(\"button\").first().attr({role:\"tab\",id:\"slick-slide-control\"+e.instanceUid+s,\"aria-controls\":\"slick-slide\"+e.instanceUid+n,\"aria-label\":s+1+\" of \"+t,\"aria-selected\":null,tabindex:\"-1\"})}).eq(e.currentSlide).find(\"button\").attr({\"aria-selected\":\"true\",tabindex:\"0\"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.options.focusOnChange?e.$slides.eq(s).attr({tabindex:\"0\"}):e.$slides.eq(s).removeAttr(\"tabindex\");e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off(\"click.slick\").on(\"click.slick\",{message:\"previous\"},i.changeSlide),i.$nextArrow.off(\"click.slick\").on(\"click.slick\",{message:\"next\"},i.changeSlide),i.options.accessibility===!0&&(i.$prevArrow.on(\"keydown.slick\",i.keyHandler),i.$nextArrow.on(\"keydown.slick\",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&(i(\"li\",e.$dots).on(\"click.slick\",{message:\"index\"},e.changeSlide),e.options.accessibility===!0&&e.$dots.on(\"keydown.slick\",e.keyHandler)),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.slideCount>e.options.slidesToShow&&i(\"li\",e.$dots).on(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)).on(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)),e.$list.on(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on(\"touchstart.slick mousedown.slick\",{action:\"start\"},e.swipeHandler),e.$list.on(\"touchmove.slick mousemove.slick\",{action:\"move\"},e.swipeHandler),e.$list.on(\"touchend.slick mouseup.slick\",{action:\"end\"},e.swipeHandler),e.$list.on(\"touchcancel.slick mouseleave.slick\",{action:\"end\"},e.swipeHandler),e.$list.on(\"click.slick\",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),e.options.accessibility===!0&&e.$list.on(\"keydown.slick\",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on(\"click.slick\",e.selectHandler),i(window).on(\"orientationchange.slick.slick-\"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on(\"resize.slick.slick-\"+e.instanceUid,i.proxy(e.resize,e)),i(\"[draggable!=true]\",e.$slideTrack).on(\"dragstart\",e.preventDefault),i(window).on(\"load.slick.slick-\"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match(\"TEXTAREA|INPUT|SELECT\")||(37===i.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:e.options.rtl===!0?\"next\":\"previous\"}}):39===i.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:e.options.rtl===!0?\"previous\":\"next\"}}))},e.prototype.lazyLoad=function(){function e(e){i(\"img[data-lazy]\",e).each(function(){var e=i(this),t=i(this).attr(\"data-lazy\"),o=i(this).attr(\"data-srcset\"),s=i(this).attr(\"data-sizes\")||r.$slider.attr(\"data-sizes\"),n=document.createElement(\"img\");n.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr(\"srcset\",o),s&&e.attr(\"sizes\",s)),e.attr(\"src\",t).animate({opacity:1},200,function(){e.removeAttr(\"data-lazy data-srcset data-sizes\").removeClass(\"slick-loading\")}),r.$slider.trigger(\"lazyLoaded\",[r,e,t])})},n.onerror=function(){e.removeAttr(\"data-lazy\").removeClass(\"slick-loading\").addClass(\"slick-lazyload-error\"),r.$slider.trigger(\"lazyLoadError\",[r,e,t])},n.src=t})}var t,o,s,n,r=this;if(r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),n=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),n=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,n=Math.ceil(s+r.options.slidesToShow),r.options.fade===!0&&(s>0&&s--,n<=r.slideCount&&n++)),t=r.$slider.find(\".slick-slide\").slice(s,n),\"anticipated\"===r.options.lazyLoad)for(var l=s-1,d=n,a=r.$slider.find(\".slick-slide\"),c=0;c<r.options.slidesToScroll;c++)l<0&&(l=r.slideCount-1),t=t.add(a.eq(l)),t=t.add(a.eq(d)),l--,d++;e(t),r.slideCount<=r.options.slidesToShow?(o=r.$slider.find(\".slick-slide\"),e(o)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(o=r.$slider.find(\".slick-cloned\").slice(0,r.options.slidesToShow),e(o)):0===r.currentSlide&&(o=r.$slider.find(\".slick-cloned\").slice(r.options.slidesToShow*-1),e(o))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass(\"slick-loading\"),i.initUI(),\"progressive\"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var i=this;i.changeSlide({data:{message:\"next\"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;if(!t.unslicked&&(t.$slider.trigger(\"afterChange\",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),t.options.accessibility===!0&&(t.initADA(),t.options.focusOnChange))){var o=i(t.$slides.get(t.currentSlide));o.attr(\"tabindex\",0).focus()}},e.prototype.prev=e.prototype.slickPrev=function(){var i=this;i.changeSlide({data:{message:\"previous\"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i(\"img[data-lazy]\",l.$slider);d.length?(t=d.first(),o=t.attr(\"data-lazy\"),s=t.attr(\"data-srcset\"),n=t.attr(\"data-sizes\")||l.$slider.attr(\"data-sizes\"),r=document.createElement(\"img\"),r.onload=function(){s&&(t.attr(\"srcset\",s),n&&t.attr(\"sizes\",n)),t.attr(\"src\",o).removeAttr(\"data-lazy data-srcset data-sizes\").removeClass(\"slick-loading\"),l.options.adaptiveHeight===!0&&l.setPosition(),l.$slider.trigger(\"lazyLoaded\",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr(\"data-lazy\").removeClass(\"slick-loading\").addClass(\"slick-lazyload-error\"),l.$slider.trigger(\"lazyLoadError\",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger(\"allImagesLoaded\",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:\"index\",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if(\"array\"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||\"window\";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass(\"slick-slide\"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on(\"click.slick\",e.selectHandler),e.setSlideClasses(\"number\"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger(\"reInit\",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;return\"boolean\"==typeof i?(e=i,i=e===!0?0:o.slideCount-1):i=e===!0?--i:i,!(o.slideCount<1||i<0||i>o.slideCount-1)&&(o.unload(),t===!0?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},e.prototype.setCSS=function(i){var e,t,o=this,s={};o.options.rtl===!0&&(i=-i),e=\"left\"==o.positionProp?Math.ceil(i)+\"px\":\"0px\",t=\"top\"==o.positionProp?Math.ceil(i)+\"px\":\"0px\",s[o.positionProp]=i,o.transformsEnabled===!1?o.$slideTrack.css(s):(s={},o.cssTransitions===!1?(s[o.animType]=\"translate(\"+e+\", \"+t+\")\",o.$slideTrack.css(s)):(s[o.animType]=\"translate3d(\"+e+\", \"+t+\", 0px)\",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;i.options.vertical===!1?i.options.centerMode===!0&&i.$list.css({padding:\"0px \"+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),i.options.centerMode===!0&&i.$list.css({padding:i.options.centerPadding+\" 0px\"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),i.options.vertical===!1&&i.options.variableWidth===!1?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(\".slick-slide\").length))):i.options.variableWidth===!0?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(\".slick-slide\").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();i.options.variableWidth===!1&&i.$slideTrack.children(\".slick-slide\").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,t.options.rtl===!0?i(s).css({position:\"relative\",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:\"relative\",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css(\"height\",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if(\"object\"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n=\"multiple\"):\"string\"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],\"responsive\"===arguments[0]&&\"array\"===i.type(arguments[1])?n=\"responsive\":\"undefined\"!=typeof arguments[1]&&(n=\"single\")),\"single\"===n)r.options[o]=s;else if(\"multiple\"===n)i.each(o,function(i,e){r.options[i]=e});else if(\"responsive\"===n)for(t in s)if(\"array\"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),i.options.fade===!1?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger(\"setPosition\",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=i.options.vertical===!0?\"top\":\"left\",\r\n\"top\"===i.positionProp?i.$slider.addClass(\"slick-vertical\"):i.$slider.removeClass(\"slick-vertical\"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||i.options.useCSS===!0&&(i.cssTransitions=!0),i.options.fade&&(\"number\"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType=\"OTransform\",i.transformType=\"-o-transform\",i.transitionType=\"OTransition\",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType=\"MozTransform\",i.transformType=\"-moz-transform\",i.transitionType=\"MozTransition\",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType=\"webkitTransform\",i.transformType=\"-webkit-transform\",i.transitionType=\"webkitTransition\",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType=\"msTransform\",i.transformType=\"-ms-transform\",i.transitionType=\"msTransition\",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&i.animType!==!1&&(i.animType=\"transform\",i.transformType=\"transform\",i.transitionType=\"transition\"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&i.animType!==!1},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(\".slick-slide\").removeClass(\"slick-active slick-center slick-current\").attr(\"aria-hidden\",\"true\"),n.$slides.eq(i).addClass(\"slick-current\"),n.options.centerMode===!0){var r=n.options.slidesToShow%2===0?1:0;e=Math.floor(n.options.slidesToShow/2),n.options.infinite===!0&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass(\"slick-center\"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass(\"slick-center\")),n.$slides.eq(i).addClass(\"slick-center\")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):t.length<=n.options.slidesToShow?t.addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):(s=n.slideCount%n.options.slidesToShow,o=n.options.infinite===!0?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):t.slice(o,o+n.options.slidesToShow).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"));\"ondemand\"!==n.options.lazyLoad&&\"anticipated\"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr(\"id\",\"\").attr(\"data-slick-index\",t-s.slideCount).prependTo(s.$slideTrack).addClass(\"slick-cloned\");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr(\"id\",\"\").attr(\"data-slick-index\",t+s.slideCount).appendTo(s.$slideTrack).addClass(\"slick-cloned\");s.$slideTrack.find(\".slick-cloned\").find(\"[id]\").each(function(){i(this).attr(\"id\",\"\")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(\".slick-slide\")?i(e.target):i(e.target).parents(\".slick-slide\"),s=parseInt(o.attr(\"data-slick-index\"));return s||(s=0),t.slideCount<=t.options.slidesToShow?void t.slideHandler(s,!1,!0):void t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(a.animating===!0&&a.options.waitForAnimate===!0||a.options.fade===!0&&a.currentSlide===i))return e===!1&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,a.options.infinite===!1&&a.options.centerMode===!1&&(i<0||i>a.getDotCount()*a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):a.options.infinite===!1&&a.options.centerMode===!0&&(i<0||i>a.slideCount-a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!==0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!==0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger(\"beforeChange\",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=a.getNavTarget(),l=l.slick(\"getSlick\"),l.slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide)),a.updateDots(),a.updateArrows(),a.options.fade===!0?(t!==!0?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight()):void(t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)))},e.prototype.startLoad=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass(\"slick-loading\")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),o=Math.round(180*t/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0?s.options.rtl===!1?\"left\":\"right\":o<=360&&o>=315?s.options.rtl===!1?\"left\":\"right\":o>=135&&o<=225?s.options.rtl===!1?\"right\":\"left\":s.options.verticalSwiping===!0?o>=35&&o<=135?\"down\":\"up\":\"vertical\"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(o.touchObject.edgeHit===!0&&o.$slider.trigger(\"edge\",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case\"left\":case\"down\":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case\"right\":case\"up\":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}\"vertical\"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger(\"swipe\",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(e.options.swipe===!1||\"ontouchend\"in document&&e.options.swipe===!1||e.options.draggable===!1&&i.type.indexOf(\"mouse\")!==-1))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,e.options.verticalSwiping===!0&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case\"start\":e.swipeStart(i);break;case\"move\":e.swipeMove(i);break;case\"end\":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(l.options.verticalSwiping===!0&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(l.options.rtl===!1?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),l.options.verticalSwiping===!0&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,l.options.infinite===!1&&(0===l.currentSlide&&\"right\"===t||l.currentSlide>=l.getDotCount()&&\"left\"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),l.options.vertical===!1?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,l.options.verticalSwiping===!0&&(l.swipeLeft=e+o*s),l.options.fade!==!0&&l.options.touchMove!==!1&&(l.animating===!0?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;return t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,void(t.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(\".slick-cloned\",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass(\"slick-slide slick-active slick-visible slick-current\").attr(\"aria-hidden\",\"true\").css(\"width\",\"\")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger(\"unslick\",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i,e=this;i=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\"),e.$nextArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\"),0===e.currentSlide?(e.$prevArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$nextArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find(\"li\").removeClass(\"slick-active\").end(),i.$dots.find(\"li\").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass(\"slick-active\"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if(\"object\"==typeof s||\"undefined\"==typeof s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),\"undefined\"!=typeof t)return t;return o}});\r\n","Magento_PageBuilder/js/utils/breakpoints.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Build media query.\r\n         *\r\n         * @param {Object} conditions\r\n         * @returns {String}\r\n         */\r\n        buildMedia: function (conditions) {\r\n            var result = _.map(_.pairs(conditions), function (condition) {\r\n                return '(' + condition.join(': ') + ')';\r\n            });\r\n\r\n            return result.join(' and ');\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/utils/map.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * googleMaps dependency is added within googlemaps.phtml through shim based on API key being set\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'module',\r\n    'Magento_PageBuilder/js/events'\r\n], function (_, module, events) {\r\n    'use strict';\r\n\r\n    var google = window.google || {},\r\n\r\n        /**\r\n         * Generates a google map usable latitude and longitude object\r\n         *\r\n         * @param {Object} position\r\n         * @return {google.maps.LatLng}\r\n         */\r\n        getGoogleLatitudeLongitude = function (position) {\r\n            return new google.maps.LatLng(position.latitude, position.longitude);\r\n        },\r\n        gmAuthFailure = false;\r\n\r\n    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n    /**\r\n     * Google's error listener for map loader failures\r\n     */\r\n    window.gm_authFailure = function () {\r\n        events.trigger('googleMaps:authFailure');\r\n        gmAuthFailure = true;\r\n    };\r\n    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n    return function (element, markers, additionalOptions) {\r\n        var options,\r\n            style;\r\n\r\n        // If we've previously had an API key error, throw the error even again\r\n        if (gmAuthFailure) {\r\n            events.trigger('googleMaps:authFailure');\r\n\r\n            return;\r\n        }\r\n\r\n        // If Google Maps isn't loaded don't try init the map, it won't work\r\n        if (typeof google.maps === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * Just in case of a bad JSON that bypassed validation\r\n         */\r\n        try {\r\n            style = module.config().style ? JSON.parse(module.config().style) : [];\r\n        }\r\n        catch (error) {\r\n            style = [];\r\n        }\r\n        options = _.extend({\r\n            zoom: 8,\r\n            center: getGoogleLatitudeLongitude({\r\n                latitude: 30.2672,\r\n                longitude: -97.7431\r\n            }),\r\n            scrollwheel: false,\r\n            disableDoubleClickZoom: false,\r\n            disableDefaultUI: false,\r\n            mapTypeControl: true,\r\n            mapTypeControlOptions: {\r\n                style: google.maps.MapTypeControlStyle.DEFAULT\r\n            },\r\n            styles: style\r\n        }, additionalOptions);\r\n\r\n        /* Create the map */\r\n        this.map = new google.maps.Map(element, options);\r\n        this.markers = [];\r\n\r\n        /**\r\n         * Callback function on map config update\r\n         * @param {Array} newMarkers\r\n         * @param {Object} updateOptions\r\n         */\r\n        this.onUpdate = function (newMarkers, updateOptions) {\r\n            this.map.setOptions(updateOptions);\r\n            this.setMarkers(newMarkers);\r\n        };\r\n\r\n        /**\r\n         * Sets the markers to selected map\r\n         * @param {Object} newMarkers\r\n         */\r\n        this.setMarkers = function (newMarkers) {\r\n            var activeInfoWindow,\r\n                latitudeLongitudeBounds = new google.maps.LatLngBounds();\r\n\r\n            this.markers.forEach(function (marker) {\r\n                marker.setMap(null);\r\n            }, this);\r\n\r\n            this.markers = [];\r\n            this.bounds = [];\r\n\r\n            /**\r\n             * Creates and set listener for markers\r\n             */\r\n            if (newMarkers && newMarkers.length) {\r\n                newMarkers.forEach(function (newMarker) {\r\n                    var location = _.escape(newMarker['location_name']) || '',\r\n                    comment = newMarker.comment ?\r\n                        '<p>' + _.escape(newMarker.comment).replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>') + '</p>'\r\n                        : '',\r\n                    phone = newMarker.phone ? '<p>Phone: ' + _.escape(newMarker.phone) + '</p>' : '',\r\n                    address = newMarker.address ? _.escape(newMarker.address) + '<br/>' : '',\r\n                    city = _.escape(newMarker.city) || '',\r\n                    country = newMarker.country ? _.escape(newMarker.country) : '',\r\n                    state = newMarker.state ? _.escape(newMarker.state) + ' ' : '',\r\n                    zipCode = newMarker.zipcode ? _.escape(newMarker.zipcode) : '',\r\n                    cityComma = city !== '' && (zipCode !== '' || state !== '') ? ', ' : '',\r\n                    lineBreak = city !== '' || zipCode !== '' ? '<br/>' : '',\r\n                    contentString =\r\n                        '<div>' +\r\n                        '<h3><b>' + location + '</b></h3>' +\r\n                        comment +\r\n                        phone +\r\n                        '<p><span>' + address +\r\n                        city + cityComma + state + zipCode + lineBreak +\r\n                        country + '</span></p>' +\r\n                        '</div>',\r\n                    infowindow = new google.maps.InfoWindow({\r\n                        content: contentString,\r\n                        maxWidth: 350\r\n                    }),\r\n                    newCreatedMarker = new google.maps.Marker({\r\n                        map: this.map,\r\n                        position: getGoogleLatitudeLongitude(newMarker.position),\r\n                        title: location\r\n                    });\r\n\r\n                    if (location) {\r\n                        newCreatedMarker.addListener('click', function () {\r\n                            if (activeInfoWindow) {\r\n                                activeInfoWindow.close();\r\n                            }\r\n\r\n                            infowindow.open(this.map, newCreatedMarker);\r\n                            activeInfoWindow = infowindow;\r\n                        }, this);\r\n                    }\r\n\r\n                    this.markers.push(newCreatedMarker);\r\n                    this.bounds.push(getGoogleLatitudeLongitude(newMarker.position));\r\n                }, this);\r\n            }\r\n\r\n            /**\r\n             * This sets the bounds of the map for multiple locations\r\n             */\r\n            if (this.bounds.length > 1) {\r\n                this.bounds.forEach(function (bound) {\r\n                    latitudeLongitudeBounds.extend(bound);\r\n                });\r\n                this.map.fitBounds(latitudeLongitudeBounds);\r\n            }\r\n\r\n            /**\r\n             * Zoom to 8 if there is only a single location\r\n             */\r\n            if (this.bounds.length === 1) {\r\n                this.map.setCenter(this.bounds[0]);\r\n                this.map.setZoom(8);\r\n            }\r\n        };\r\n\r\n        this.setMarkers(markers);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget/show-on-hover.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Show the overlay on hover of specific elements\r\n     *\r\n     * @param {JQuery<Element>[]} $elements\r\n     */\r\n    function showOverlayOnHover($elements) {\r\n        $elements.each(function (index, element) {\r\n            var overlayEl = $(element).find('.pagebuilder-overlay'),\r\n                overlayColor = overlayEl.attr('data-overlay-color');\r\n\r\n            $(element).on('mouseenter', function () {\r\n                overlayEl.css('background-color', overlayColor);\r\n            });\r\n\r\n            $(element).on('mouseleave', function () {\r\n                overlayEl.css('background-color', 'transparent');\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show button on hover of specific elements\r\n     *\r\n     * @param {JQuery<Element>[]} $elements\r\n     * @param {String} buttonClass\r\n     */\r\n    function showButtonOnHover($elements, buttonClass) {\r\n        $elements.each(function (index, element) {\r\n            var buttonEl = $(element).find(buttonClass);\r\n\r\n            $(element).on('mouseenter', function () {\r\n                buttonEl.css({\r\n                    'opacity': '1',\r\n                    'visibility': 'visible'\r\n                });\r\n            });\r\n\r\n            $(element).on('mouseleave', function () {\r\n                buttonEl.css({\r\n                    'opacity': '0',\r\n                    'visibility': 'hidden'\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    return function (config) {\r\n\r\n        var buttonSelector = config.buttonSelector,\r\n            overlayHoverSelector = 'div[data-content-type=\"%s\"][data-show-overlay=\"%s\"]'\r\n                .replace('%s', config.dataRole)\r\n                .replace('%s', config.showOverlay),\r\n            overlayButtonSelector = 'div[data-content-type=\"%s\"][data-show-button=\"%s\"]'\r\n                .replace('%s', config.dataRole)\r\n                .replace('%s', config.showOverlay);\r\n\r\n        showOverlayOnHover($(overlayHoverSelector));\r\n        showButtonOnHover($(overlayButtonSelector), buttonSelector);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget/video-background.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jarallax',\r\n    'jarallaxVideo',\r\n    'vimeoWrapper'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            parallaxSpeed = $element.data('enableParallax') !== 1 ? 1 : parseFloat($element.data('parallaxSpeed'));\r\n\r\n        if ($element.data('background-type') !== 'video') {\r\n            return;\r\n        }\r\n\r\n        $element.addClass('jarallax');\r\n        $element.attr('data-jarallax', '');\r\n\r\n        window.jarallax($element[0], {\r\n            imgSrc: $element.data('videoFallbackSrc'),\r\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5,\r\n            videoLoop: $element.data('videoLoop'),\r\n            videoPlayOnlyVisible: $element.data('videoPlayOnlyVisible'),\r\n            videoLazyLoading: $element.data('videoLazyLoad'),\r\n            disableVideo: false,\r\n            elementInViewport: $element.data('elementInViewport') &&\r\n                $element[0].querySelector($element.data('elementInViewport'))\r\n        });\r\n        $element[0].jarallax.video && $element[0].jarallax.video.on('started', function () {\r\n            if ($element[0].jarallax.$video) {\r\n                $element[0].jarallax.$video.style.visibility = 'visible';\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_PageCache/js/form-key-provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (settings) {\r\n        var formKey,\r\n            inputElements,\r\n            inputSelector = 'input[name=\"form_key\"]';\r\n\r\n        /**\r\n         * Set form_key cookie\r\n         * @private\r\n         */\r\n        function setFormKeyCookie(value) {\r\n            var expires,\r\n                secure,\r\n                date = new Date(),\r\n                cookiesConfig = window.cookiesConfig || {},\r\n                isSecure = !!cookiesConfig.secure,\r\n                samesite = cookiesConfig.samesite || 'lax';\r\n\r\n            date.setTime(date.getTime() + 86400000);\r\n            expires = '; expires=' + date.toUTCString();\r\n            secure = isSecure ? '; secure' : '';\r\n            samesite = '; samesite=' + samesite;\r\n\r\n            document.cookie = 'form_key=' + (value || '') + expires + secure + '; path=/' + samesite;\r\n        }\r\n\r\n        /**\r\n         * Retrieves form key from cookie\r\n         * @private\r\n         */\r\n        function getFormKeyCookie() {\r\n            var cookie,\r\n                i,\r\n                nameEQ = 'form_key=',\r\n                cookieArr = document.cookie.split(';');\r\n\r\n            for (i = 0; i < cookieArr.length; i++) {\r\n                cookie = cookieArr[i];\r\n\r\n                while (cookie.charAt(0) === ' ') {\r\n                    cookie = cookie.substring(1, cookie.length);\r\n                }\r\n\r\n                if (cookie.indexOf(nameEQ) === 0) {\r\n                    return cookie.substring(nameEQ.length, cookie.length);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Get form key from UI input hidden\r\n         * @private\r\n         */\r\n        function getFormKeyFromUI() {\r\n            return document.querySelector(inputSelector).value;\r\n        }\r\n\r\n        /**\r\n         * Generate form key string\r\n         * @private\r\n         */\r\n        function generateFormKeyString() {\r\n            var result = '',\r\n                length = 16,\r\n                chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n            while (length--) {\r\n                result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        /**\r\n         * Init form_key inputs with value\r\n         * @private\r\n         */\r\n        function initFormKey() {\r\n            formKey = getFormKeyCookie();\r\n\r\n            if (settings && settings.isPaginationCacheEnabled && !formKey) {\r\n                formKey = getFormKeyFromUI();\r\n                setFormKeyCookie(formKey);\r\n            }\r\n\r\n            if (!formKey) {\r\n                formKey = generateFormKeyString();\r\n                setFormKeyCookie(formKey);\r\n            }\r\n            inputElements = document.querySelectorAll(inputSelector);\r\n\r\n            if (inputElements.length) {\r\n                Array.prototype.forEach.call(inputElements, function (element) {\r\n                    element.setAttribute('value', formKey);\r\n                });\r\n            }\r\n        }\r\n\r\n        initFormKey();\r\n    };\r\n});\r\n","Magento_PageCache/js/page-cache.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'domReady',\r\n    'consoleLogger',\r\n    'Magento_PageCache/js/form-key-provider',\r\n    'jquery-ui-modules/widget',\r\n    'mage/cookies'\r\n], function ($, domReady, consoleLogger, formKeyInit) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Helper. Generate random string\r\n     * TODO: Merge with mage/utils\r\n     * @param {String} chars - list of symbols\r\n     * @param {Number} length - length for need string\r\n     * @returns {String}\r\n     */\r\n    function generateRandomString(chars, length) {\r\n        var result = '';\r\n\r\n        length = length > 0 ? length : 1;\r\n\r\n        while (length--) {\r\n            result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Nodes tree to flat list converter\r\n     * @returns {Array}\r\n     */\r\n    $.fn.comments = function () {\r\n        var elements = [],\r\n            contents,\r\n            elementContents;\r\n\r\n        /**\r\n         * @param {jQuery} element - Comment holder\r\n         */\r\n        (function lookup(element) {\r\n            var iframeHostName;\r\n\r\n            // prevent cross origin iframe content reading\r\n            if ($(element).prop('tagName') === 'IFRAME') {\r\n                iframeHostName = $('<a>').prop('href', $(element).prop('src'))\r\n                    .prop('hostname');\r\n\r\n                if (window.location.hostname !== iframeHostName) {\r\n                    return [];\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Rewrite jQuery contents().\r\n             *\r\n             * @param {jQuery} elem\r\n             */\r\n            contents = function (elem) {\r\n                return $.map(elem, function (el) {\r\n                    try {\r\n                        return el.nodeName.toLowerCase() === 'iframe' ?\r\n                            el.contentDocument || (el.contentWindow ? el.contentWindow.document : []) :\r\n                            $.merge([], el.childNodes);\r\n                    } catch (e) {\r\n                        consoleLogger.error(e);\r\n\r\n                        return [];\r\n                    }\r\n                });\r\n            };\r\n\r\n            elementContents = contents($(element));\r\n\r\n            $.each(elementContents, function (index, el) {\r\n                switch (el.nodeType) {\r\n                    case 1: // ELEMENT_NODE\r\n                        lookup(el);\r\n                        break;\r\n\r\n                    case 8: // COMMENT_NODE\r\n                        elements.push(el);\r\n                        break;\r\n\r\n                    case 9: // DOCUMENT_NODE\r\n                        lookup($(el).find('body'));\r\n                        break;\r\n                }\r\n            });\r\n        })(this);\r\n\r\n        return elements;\r\n    };\r\n\r\n    /**\r\n     * FormKey Widget - this widget is generating from key, saves it to cookie and\r\n     * @deprecated see Magento/PageCache/view/frontend/web/js/form-key-provider.js\r\n     */\r\n    $.widget('mage.formKey', {\r\n        options: {\r\n            inputSelector: 'input[name=\"form_key\"]',\r\n            allowedCharacters: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\r\n            length: 16\r\n        },\r\n\r\n        /**\r\n         * Creates widget 'mage.formKey'\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var formKey = $.mage.cookies.get('form_key'),\r\n                options = {\r\n                    secure: window.cookiesConfig ? window.cookiesConfig.secure : false\r\n                };\r\n\r\n            if (!formKey) {\r\n                formKey = generateRandomString(this.options.allowedCharacters, this.options.length);\r\n                $.mage.cookies.set('form_key', formKey, options);\r\n            }\r\n            $(this.options.inputSelector).val(formKey);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * PageCache Widget\r\n     * Handles additional ajax request for rendering user private content.\r\n     */\r\n    $.widget('mage.pageCache', {\r\n        options: {\r\n            url: '/',\r\n            patternPlaceholderOpen: /^ BLOCK (.+) $/,\r\n            patternPlaceholderClose: /^ \\/BLOCK (.+) $/,\r\n            versionCookieName: 'private_content_version',\r\n            handles: []\r\n        },\r\n\r\n        /**\r\n         * Creates widget 'mage.pageCache'\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var placeholders,\r\n                version = $.mage.cookies.get(this.options.versionCookieName);\r\n\r\n            if (!version) {\r\n                return;\r\n            }\r\n            placeholders = this._searchPlaceholders(this.element.comments());\r\n\r\n            if (placeholders && placeholders.length) {\r\n                this._ajax(placeholders, version);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Parse page for placeholders.\r\n         * @param {Array} elements\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _searchPlaceholders: function (elements) {\r\n            var placeholders = [],\r\n                tmp = {},\r\n                ii,\r\n                len,\r\n                el, matches, name;\r\n\r\n            if (!(elements && elements.length)) {\r\n                return placeholders;\r\n            }\r\n\r\n            for (ii = 0, len = elements.length; ii < len; ii++) {\r\n                el = elements[ii];\r\n                matches = this.options.patternPlaceholderOpen.exec(el.nodeValue);\r\n                name = null;\r\n\r\n                if (matches) {\r\n                    name = matches[1];\r\n                    tmp[name] = {\r\n                        name: name,\r\n                        openElement: el\r\n                    };\r\n                } else {\r\n                    matches = this.options.patternPlaceholderClose.exec(el.nodeValue);\r\n\r\n                    if (matches) { //eslint-disable-line max-depth\r\n                        name = matches[1];\r\n\r\n                        if (tmp[name]) { //eslint-disable-line max-depth\r\n                            tmp[name].closeElement = el;\r\n                            placeholders.push(tmp[name]);\r\n                            delete tmp[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return placeholders;\r\n        },\r\n\r\n        /**\r\n         * Parse for page and replace placeholders\r\n         * @param {Object} placeholder\r\n         * @param {Object} html\r\n         * @protected\r\n         */\r\n        _replacePlaceholder: function (placeholder, html) {\r\n            var startReplacing = false,\r\n                prevSibling = null,\r\n                parent, contents, yy, len, element;\r\n\r\n            if (!placeholder || !html) {\r\n                return;\r\n            }\r\n\r\n            parent = $(placeholder.openElement).parent();\r\n            contents = parent.contents();\r\n\r\n            for (yy = 0, len = contents.length; yy < len; yy++) {\r\n                element = contents[yy];\r\n\r\n                if (element == placeholder.openElement) { //eslint-disable-line eqeqeq\r\n                    startReplacing = true;\r\n                }\r\n\r\n                if (startReplacing) {\r\n                    $(element).remove();\r\n                } else if (element.nodeType != 8) { //eslint-disable-line eqeqeq\r\n                    //due to comment tag doesn't have siblings we try to find it manually\r\n                    prevSibling = element;\r\n                }\r\n\r\n                if (element == placeholder.closeElement) { //eslint-disable-line eqeqeq\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (prevSibling) {\r\n                $(prevSibling).after(html);\r\n            } else {\r\n                $(parent).prepend(html);\r\n            }\r\n\r\n            // trigger event to use mage-data-init attribute\r\n            $(parent).trigger('contentUpdated');\r\n        },\r\n\r\n        /**\r\n         * AJAX helper\r\n         * @param {Object} placeholders\r\n         * @param {String} version\r\n         * @private\r\n         */\r\n        _ajax: function (placeholders, version) {\r\n            var ii,\r\n                data = {\r\n                    blocks: [],\r\n                    handles: this.options.handles,\r\n                    originalRequest: this.options.originalRequest,\r\n                    version: version\r\n                };\r\n\r\n            for (ii = 0; ii < placeholders.length; ii++) {\r\n                data.blocks.push(placeholders[ii].name);\r\n            }\r\n            data.blocks = JSON.stringify(data.blocks.sort());\r\n            data.handles = JSON.stringify(data.handles);\r\n            data.originalRequest = JSON.stringify(data.originalRequest);\r\n            $.ajax({\r\n                url: this.options.url,\r\n                data: data,\r\n                type: 'GET',\r\n                cache: true,\r\n                dataType: 'json',\r\n                context: this,\r\n\r\n                /**\r\n                 * Response handler\r\n                 * @param {Object} response\r\n                 */\r\n                success: function (response) {\r\n                    var placeholder, i;\r\n\r\n                    for (i = 0; i < placeholders.length; i++) {\r\n                        placeholder = placeholders[i];\r\n\r\n                        if (response.hasOwnProperty(placeholder.name)) {\r\n                            this._replacePlaceholder(placeholder, response[placeholder.name]);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    domReady(function () {\r\n        formKeyInit();\r\n    });\r\n\r\n    return {\r\n        'pageCache': $.mage.pageCache,\r\n        'formKey': $.mage.formKey\r\n    };\r\n});\r\n","Magento_Payment/js/cc-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.creditCardType', {\r\n        options: {\r\n            typeCodes: ['SS', 'SM', 'SO'] // Type codes for Switch/Maestro/Solo credit cards.\r\n        },\r\n\r\n        /**\r\n         * Bind change handler to select element and trigger the event to show/hide\r\n         * the Switch/Maestro or Solo credit card type container for those credit card types.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(this._toggleCardType, this)).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Toggle the Switch/Maestro and Solo credit card type container depending on which\r\n         * credit card type is selected.\r\n         * @private\r\n         */\r\n        _toggleCardType: function () {\r\n            $(this.options.creditCardTypeContainer)\r\n                .toggle($.inArray(this.element.val(), this.options.typeCodes) !== -1);\r\n        }\r\n    });\r\n\r\n    return $.mage.creditCardType;\r\n});\r\n","Magento_Payment/js/transparent.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Payment/js/model/credit-card-validation/validator',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function ($, mageTemplate, alert, ui, validator, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    $.widget('mage.transparent', {\r\n        options: {\r\n            context: null,\r\n            placeOrderSelector: '[data-role=\"review-save\"]',\r\n            paymentFormSelector: '#co-payment-form',\r\n            updateSelectorPrefix: '#checkout-',\r\n            updateSelectorSuffix: '-load',\r\n            hiddenFormTmpl:\r\n                '<form target=\"<%= data.target %>\" action=\"<%= data.action %>\" method=\"POST\" ' +\r\n                'hidden enctype=\"application/x-www-form-urlencoded\" class=\"no-display\">' +\r\n                    '<% _.each(data.inputs, function(val, key){ %>' +\r\n                    '<input value=\"<%= val %>\" name=\"<%= key %>\" type=\"hidden\">' +\r\n                    '<% }); %>' +\r\n                '</form>',\r\n            reviewAgreementForm: '#checkout-agreements',\r\n            cgiUrl: null,\r\n            orderSaveUrl: null,\r\n            controller: null,\r\n            gateway: null,\r\n            dateDelim: null,\r\n            cardFieldsMap: null,\r\n            expireYearLength: 2\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.hiddenFormTmpl = mageTemplate(this.options.hiddenFormTmpl);\r\n\r\n            if (this.options.context) {\r\n                this.options.context.setPlaceOrderHandler($.proxy(this._orderSave, this));\r\n                this.options.context.setValidateHandler($.proxy(this._validateHandler, this));\r\n            } else {\r\n                $(this.options.placeOrderSelector)\r\n                    .off('click')\r\n                    .on('click', $.proxy(this._placeOrderHandler, this));\r\n            }\r\n\r\n            this.element.validation();\r\n            $('[data-container=\"' + this.options.gateway + '-cc-number\"]').on('focusout', function () {\r\n                $(this).valid();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * handler for credit card validation\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _validateHandler: function () {\r\n            return this.element.validation && this.element.validation('isValid');\r\n        },\r\n\r\n        /**\r\n         * handler for Place Order button to call gateway for credit card validation\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _placeOrderHandler: function () {\r\n            if (this._validateHandler()) {\r\n                this._orderSave();\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Save order and generate post data for gateway call\r\n         * @private\r\n         */\r\n        _orderSave: function () {\r\n            var postData = $(this.options.paymentFormSelector).serialize();\r\n\r\n            if ($(this.options.reviewAgreementForm).length) {\r\n                postData += '&' + $(this.options.reviewAgreementForm).serialize();\r\n            }\r\n            postData += '&controller=' + this.options.controller;\r\n            postData += '&cc_type=' + this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-type\"]'\r\n            ).val();\r\n\r\n            return $.ajax({\r\n                url: this.options.orderSaveUrl,\r\n                type: 'post',\r\n                context: this,\r\n                data: postData,\r\n                dataType: 'json',\r\n\r\n                /**\r\n                 * {Function}\r\n                 */\r\n                beforeSend: function () {\r\n                    fullScreenLoader.startLoader();\r\n                },\r\n\r\n                /**\r\n                 * {Function}\r\n                 */\r\n                success: function (response) {\r\n                    var preparedData,\r\n                        msg,\r\n\r\n                        /**\r\n                         * {Function}\r\n                         */\r\n                        alertActionHandler = function () {\r\n                            // default action\r\n                        };\r\n\r\n                    if (response.success && response[this.options.gateway]) {\r\n                        preparedData = this._preparePaymentData(\r\n                            response[this.options.gateway].fields,\r\n                            this.options.cardFieldsMap\r\n                        );\r\n                        this._postPaymentToGateway(preparedData);\r\n                    } else {\r\n                        fullScreenLoader.stopLoader(true);\r\n\r\n                        msg = response['error_messages'];\r\n\r\n                        if (this.options.context) {\r\n                            this.options.context.clearTimeout().fail();\r\n                            alertActionHandler = this.options.context.alertActionHandler;\r\n                        }\r\n\r\n                        if (typeof msg === 'object') {\r\n                            msg = msg.join('\\n');\r\n                        }\r\n\r\n                        if (msg) {\r\n                            alert(\r\n                                {\r\n                                    content: msg,\r\n                                    actions: {\r\n\r\n                                        /**\r\n                                         * {Function}\r\n                                         */\r\n                                        always: alertActionHandler\r\n                                    }\r\n                                }\r\n                            );\r\n                        }\r\n                    }\r\n                }.bind(this)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Post data to gateway for credit card validation\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _postPaymentToGateway: function (data) {\r\n            var tmpl,\r\n                iframeSelector = '[data-container=\"' + this.options.gateway + '-transparent-iframe\"]';\r\n\r\n            tmpl = this.hiddenFormTmpl({\r\n                data: {\r\n                    target: $(iframeSelector).attr('name'),\r\n                    action: this.options.cgiUrl,\r\n                    inputs: data\r\n                }\r\n            });\r\n            $(tmpl).appendTo($(iframeSelector)).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Add credit card fields to post data for gateway\r\n         * @param {Object} data\r\n         * @param {Object} ccfields\r\n         * @private\r\n         */\r\n        _preparePaymentData: function (data, ccfields) {\r\n            var preparedata;\r\n\r\n            if (this.element.find('[data-container=\"' + this.options.gateway + '-cc-cvv\"]').length) {\r\n                data[ccfields.cccvv] = this.element.find(\r\n                    '[data-container=\"' + this.options.gateway + '-cc-cvv\"]'\r\n                ).val();\r\n            }\r\n            preparedata = this._prepareExpDate();\r\n            data[ccfields.ccexpdate] = preparedata.month + this.options.dateDelim + preparedata.year;\r\n            data[ccfields.ccnum] = this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-number\"]'\r\n            ).val();\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Grab Month and Year into one\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _prepareExpDate: function () {\r\n            var year = this.element.find('[data-container=\"' + this.options.gateway + '-cc-year\"]').val(),\r\n                month = parseInt(\r\n                    this.element.find('[data-container=\"' + this.options.gateway + '-cc-month\"]').val(),\r\n                    10\r\n                );\r\n\r\n            if (year.length > this.options.expireYearLength) {\r\n                year = year.substring(year.length - this.options.expireYearLength);\r\n            }\r\n\r\n            if (month < 10) {\r\n                month = '0' + month;\r\n            }\r\n\r\n            return {\r\n                month: month, year: year\r\n            };\r\n        }\r\n    });\r\n\r\n    return $.mage.transparent;\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        creditCard: null,\r\n        creditCardNumber: null,\r\n        expirationMonth: null,\r\n        expirationYear: null,\r\n        cvvCode: null\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type'\r\n], function (utils, luhn10, creditCardTypes) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} card\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} isValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(card, isPotentiallyValid, isValid) {\r\n        return {\r\n            card: card,\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var potentialTypes,\r\n            cardType,\r\n            valid,\r\n            i,\r\n            maxLength;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        value = value.replace(/\\s+/g, '');\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        potentialTypes = creditCardTypes.getCardTypes(value);\r\n\r\n        if (potentialTypes.length === 0) {\r\n            return resultWrapper(null, false, false);\r\n        } else if (potentialTypes.length !== 1) {\r\n            return resultWrapper(null, true, false);\r\n        }\r\n\r\n        cardType = potentialTypes[0];\r\n\r\n        if (cardType.type === 'unionpay') {  // UnionPay is not Luhn 10 compliant\r\n            valid = true;\r\n        } else {\r\n            valid = luhn10(value);\r\n        }\r\n\r\n        for (i = 0; i < cardType.lengths.length; i++) {\r\n            if (cardType.lengths[i] === value.length) {\r\n                return resultWrapper(cardType, valid, valid);\r\n            }\r\n        }\r\n\r\n        maxLength = Math.max.apply(null, cardType.lengths);\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(cardType, true, false);\r\n        }\r\n\r\n        return resultWrapper(cardType, false, false);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/cvv-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    /**\r\n     * CVV number validation.\r\n     * Validate digit count for CVV code.\r\n     *\r\n     * @param {*} value\r\n     * @param {Number} maxLength\r\n     * @return {Object}\r\n     */\r\n    return function (value, maxLength) {\r\n        var DEFAULT_LENGTH = 3;\r\n\r\n        maxLength = maxLength || DEFAULT_LENGTH;\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (value.length === maxLength) {\r\n            return resultWrapper(true, true);\r\n        }\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (value.length > maxLength) {\r\n            return resultWrapper(false, false);\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator'\r\n], function (utils, parseDate, expirationMonth, expirationYear) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} month\r\n     * @param {*} year\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid, month, year) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid,\r\n            month: month,\r\n            year: year\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var date,\r\n            monthValid,\r\n            yearValid;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(false, false, null, null);\r\n        }\r\n\r\n        value = value.replace(/^(\\d\\d) (\\d\\d(\\d\\d)?)$/, '$1/$2');\r\n        date = parseDate(value);\r\n        monthValid = expirationMonth(date.month);\r\n        yearValid = expirationYear(date.year);\r\n\r\n        if (monthValid.isValid && yearValid.isValid) {\r\n            return resultWrapper(true, true, date.month, date.year);\r\n        }\r\n\r\n        if (monthValid.isPotentiallyValid && yearValid.isPotentiallyValid) {\r\n            return resultWrapper(false, true, null, null);\r\n        }\r\n\r\n        return resultWrapper(false, false, null, null);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/model/credit-card-validation/cvv-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'mage/translate'\r\n], function ($, cvvValidator, creditCardNumberValidator, yearValidator, monthValidator, creditCardData) {\r\n    'use strict';\r\n\r\n    $('.payment-method-content input[type=\"number\"]').on('keyup', function () {\r\n        if ($(this).val() < 0) {\r\n            $(this).val($(this).val().replace(/^-/, ''));\r\n        }\r\n    });\r\n\r\n    $.each({\r\n        'validate-card-type': [\r\n            function (number, item, allowedTypes) {\r\n                var cardInfo,\r\n                    i,\r\n                    l;\r\n\r\n                if (!creditCardNumberValidator(number).isValid) {\r\n                    return false;\r\n                }\r\n\r\n                cardInfo = creditCardNumberValidator(number).card;\r\n\r\n                for (i = 0, l = allowedTypes.length; i < l; i++) {\r\n                    if (cardInfo.title == allowedTypes[i].type) { //eslint-disable-line eqeqeq\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            },\r\n            $.mage.__('Please enter a valid credit card type number.')\r\n        ],\r\n        'validate-card-number': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             *\r\n             * @param {*} number - credit card number\r\n             * @return {Boolean}\r\n             */\r\n            function (number) {\r\n                return creditCardNumberValidator(number).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card number.')\r\n        ],\r\n        'validate-card-date': [\r\n\r\n            /**\r\n             * Validate credit card expiration month\r\n             *\r\n             * @param {String} date - month\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return monthValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration month.')\r\n        ],\r\n        'validate-card-cvv': [\r\n\r\n            /**\r\n             * Validate cvv\r\n             *\r\n             * @param {String} cvv - card verification value\r\n             * @return {Boolean}\r\n             */\r\n            function (cvv) {\r\n                var maxLength = creditCardData.creditCard ? creditCardData.creditCard.code.size : 3;\r\n\r\n                return cvvValidator(cvv, maxLength).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card verification number.')\r\n        ],\r\n        'validate-card-year': [\r\n\r\n            /**\r\n             * Validate credit card expiration year\r\n             *\r\n             * @param {String} date - year\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return yearValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration year.')\r\n        ]\r\n\r\n    }, function (i, rule) {\r\n        rule.unshift(i);\r\n        $.validator.addMethod.apply($.validator, rule);\r\n    });\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mageUtils'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    var types = [\r\n        {\r\n            title: 'Visa',\r\n            type: 'VI',\r\n            pattern: '^4\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'MasterCard',\r\n            type: 'MC',\r\n            pattern: '^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'American Express',\r\n            type: 'AE',\r\n            pattern: '^3([47]\\\\d*)?$',\r\n            isAmex: true,\r\n            gaps: [4, 10],\r\n            lengths: [15],\r\n            code: {\r\n                name: 'CID',\r\n                size: 4\r\n            }\r\n        },\r\n        {\r\n            title: 'Diners',\r\n            type: 'DN',\r\n            pattern: '^(3(0[0-5]|095|6|[8-9]))\\\\d*$',\r\n            gaps: [4, 10],\r\n            lengths: [14, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Discover',\r\n            type: 'DI',\r\n            pattern: '^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CID',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'JCB',\r\n            type: 'JCB',\r\n            pattern: '^35(2[8-9]|[3-8])\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'UnionPay',\r\n            type: 'UN',\r\n            pattern: '^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVN',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro International',\r\n            type: 'MI',\r\n            pattern: '^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro Domestic',\r\n            type: 'MD',\r\n            pattern: '^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Hipercard',\r\n            type: 'HC',\r\n            pattern: '^((606282)|(637095)|(637568)|(637599)|(637609)|(637612))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [13, 16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Elo',\r\n            type: 'ELO',\r\n            pattern: '^((509091)|(636368)|(636297)|(504175)|(438935)|(40117[8-9])|(45763[1-2])|' +\r\n                '(457393)|(431274)|(50990[0-2])|(5099[7-9][0-9])|(50996[4-9])|(509[1-8][0-9][0-9])|' +\r\n                '(5090(0[0-2]|0[4-9]|1[2-9]|[24589][0-9]|3[1-9]|6[0-46-9]|7[0-24-9]))|' +\r\n                '(5067(0[0-24-8]|1[0-24-9]|2[014-9]|3[0-379]|4[0-9]|5[0-3]|6[0-5]|7[0-8]))|' +\r\n                '(6504(0[5-9]|1[0-9]|2[0-9]|3[0-9]))|' +\r\n                '(6504(8[5-9]|9[0-9])|6505(0[0-9]|1[0-9]|2[0-9]|3[0-8]))|' +\r\n                '(6505(4[1-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-8]))|' +\r\n                '(6507(0[0-9]|1[0-8]))|(65072[0-7])|(6509(0[1-9]|1[0-9]|20))|' +\r\n                '(6516(5[2-9]|6[0-9]|7[0-9]))|(6550(0[0-9]|1[0-9]))|' +\r\n                '(6550(2[1-9]|3[0-9]|4[0-9]|5[0-8])))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Aura',\r\n            type: 'AU',\r\n            pattern: '^5078\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        }\r\n    ];\r\n\r\n    return {\r\n        /**\r\n         * @param {*} cardNumber\r\n         * @return {Array}\r\n         */\r\n        getCardTypes: function (cardNumber) {\r\n            var i, value,\r\n                result = [];\r\n\r\n            if (utils.isEmpty(cardNumber)) {\r\n                return result;\r\n            }\r\n\r\n            if (cardNumber === '') {\r\n                return $.extend(true, {}, types);\r\n            }\r\n\r\n            for (i = 0; i < types.length; i++) {\r\n                value = types[i];\r\n\r\n                if (new RegExp(value.pattern).test(cardNumber)) {\r\n                    result.push($.extend(true, {}, value));\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Luhn algorithm verification\r\n     */\r\n    return function (a, b, c, d, e) {\r\n        for (d = +a[b = a.length - 1], e = 0; b--;) {\r\n            c = +a[b];\r\n            d += ++e % 2 ? 2 * c % 10 + (c > 4) : c;\r\n        }\r\n\r\n        return !(d % 10);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var month,\r\n            monthValid;\r\n\r\n        if (value.replace(/\\s/g, '') === '' || value === '0') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (isNaN(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        month = parseInt(value, 10);\r\n        monthValid = month > 0 && month < 13;\r\n\r\n        return resultWrapper(monthValid, monthValid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var currentYear = new Date().getFullYear(),\r\n            len = value.length,\r\n            valid,\r\n            expMaxLifetime = 19;\r\n\r\n        if (value.replace(/\\s/g, '') === '') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (len !== 4) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        value = parseInt(value, 10);\r\n        valid = value >= currentYear && value <= currentYear + expMaxLifetime;\r\n\r\n        return resultWrapper(valid, valid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (value) {\r\n        var month, len;\r\n\r\n        if (value.match('/')) {\r\n            value = value.split(/\\s*\\/\\s*/g);\r\n\r\n            return {\r\n                month: value[0],\r\n                year: value.slice(1).join()\r\n            };\r\n        }\r\n\r\n        len = value[0] === '0' || value.length > 5 || value.length === 4 || value.length === 3 ? 2 : 1;\r\n        month = value.substr(0, len);\r\n\r\n        return {\r\n            month: month,\r\n            year: value.substr(month.length, 4)\r\n        };\r\n    };\r\n});\r\n","Magento_Payment/js/view/payment/cc-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'mage/translate'\r\n], function (_, Component, creditCardData, cardNumberValidator, $t) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            creditCardType: '',\r\n            creditCardExpYear: '',\r\n            creditCardExpMonth: '',\r\n            creditCardNumber: '',\r\n            creditCardSsStartMonth: '',\r\n            creditCardSsStartYear: '',\r\n            creditCardSsIssue: '',\r\n            creditCardVerificationNumber: '',\r\n            selectedCardType: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'creditCardType',\r\n                    'creditCardExpYear',\r\n                    'creditCardExpMonth',\r\n                    'creditCardNumber',\r\n                    'creditCardVerificationNumber',\r\n                    'creditCardSsStartMonth',\r\n                    'creditCardSsStartYear',\r\n                    'creditCardSsIssue',\r\n                    'selectedCardType'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init component\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            //Set credit card number to credit card data object\r\n            this.creditCardNumber.subscribe(function (value) {\r\n                var result;\r\n\r\n                self.selectedCardType(null);\r\n\r\n                if (value === '' || value === null) {\r\n                    return false;\r\n                }\r\n                result = cardNumberValidator(value);\r\n\r\n                if (!result.isPotentiallyValid && !result.isValid) {\r\n                    return false;\r\n                }\r\n\r\n                if (result.card !== null) {\r\n                    self.selectedCardType(result.card.type);\r\n                    creditCardData.creditCard = result.card;\r\n                }\r\n\r\n                if (result.isValid) {\r\n                    creditCardData.creditCardNumber = value;\r\n                    self.creditCardType(result.card.type);\r\n                }\r\n            });\r\n\r\n            //Set expiration year to credit card data object\r\n            this.creditCardExpYear.subscribe(function (value) {\r\n                creditCardData.expirationYear = value;\r\n            });\r\n\r\n            //Set expiration month to credit card data object\r\n            this.creditCardExpMonth.subscribe(function (value) {\r\n                creditCardData.expirationMonth = value;\r\n            });\r\n\r\n            //Set cvv code to credit card data object\r\n            this.creditCardVerificationNumber.subscribe(function (value) {\r\n                creditCardData.cvvCode = value;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'cc';\r\n        },\r\n\r\n        /**\r\n         * Get data\r\n         * @returns {Object}\r\n         */\r\n        getData: function () {\r\n            return {\r\n                'method': this.item.method,\r\n                'additional_data': {\r\n                    'cc_cid': this.creditCardVerificationNumber(),\r\n                    'cc_ss_start_month': this.creditCardSsStartMonth(),\r\n                    'cc_ss_start_year': this.creditCardSsStartYear(),\r\n                    'cc_ss_issue': this.creditCardSsIssue(),\r\n                    'cc_type': this.creditCardType(),\r\n                    'cc_exp_year': this.creditCardExpYear(),\r\n                    'cc_exp_month': this.creditCardExpMonth(),\r\n                    'cc_number': this.creditCardNumber()\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get list of available credit card types\r\n         * @returns {Object}\r\n         */\r\n        getCcAvailableTypes: function () {\r\n            return window.checkoutConfig.payment.ccform.availableTypes[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get payment icons\r\n         * @param {String} type\r\n         * @returns {Boolean}\r\n         */\r\n        getIcons: function (type) {\r\n            return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type) ?\r\n                window.checkoutConfig.payment.ccform.icons[type]\r\n                : false;\r\n        },\r\n\r\n        /**\r\n         * Get list of months\r\n         * @returns {Object}\r\n         */\r\n        getCcMonths: function () {\r\n            return window.checkoutConfig.payment.ccform.months[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get list of years\r\n         * @returns {Object}\r\n         */\r\n        getCcYears: function () {\r\n            return window.checkoutConfig.payment.ccform.years[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Check if current payment has verification\r\n         * @returns {Boolean}\r\n         */\r\n        hasVerification: function () {\r\n            return window.checkoutConfig.payment.ccform.hasVerification[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Boolean}\r\n         */\r\n        hasSsCardType: function () {\r\n            return window.checkoutConfig.payment.ccform.hasSsCardType[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get image url for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageUrl: function () {\r\n            return window.checkoutConfig.payment.ccform.cvvImageUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get image for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageHtml: function () {\r\n            return '<img src=\"' + this.getCvvImageUrl() +\r\n                '\" alt=\"' + $t('Card Verification Number Visual Reference') +\r\n                '\" title=\"' + $t('Card Verification Number Visual Reference') +\r\n                '\" />';\r\n        },\r\n\r\n        /**\r\n         * Get unsanitized html for image for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageUnsanitizedHtml: function () {\r\n            return this.getCvvImageHtml();\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Object}\r\n         */\r\n        getSsStartYears: function () {\r\n            return window.checkoutConfig.payment.ccform.ssStartYears[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get list of available credit card types values\r\n         * @returns {Object}\r\n         */\r\n        getCcAvailableTypesValues: function () {\r\n            return _.map(this.getCcAvailableTypes(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'type': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get list of available month values\r\n         * @returns {Object}\r\n         */\r\n        getCcMonthsValues: function () {\r\n            return _.map(this.getCcMonths(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'month': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get list of available year values\r\n         * @returns {Object}\r\n         */\r\n        getCcYearsValues: function () {\r\n            return _.map(this.getCcYears(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'year': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Object}\r\n         */\r\n        getSsStartYearsValues: function () {\r\n            return _.map(this.getSsStartYears(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'year': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Is legend available to display\r\n         * @returns {Boolean}\r\n         */\r\n        isShowLegend: function () {\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get available credit card type by code\r\n         * @param {String} code\r\n         * @returns {String}\r\n         */\r\n        getCcTypeTitleByCode: function (code) {\r\n            var title = '',\r\n                keyValue = 'value',\r\n                keyType = 'type';\r\n\r\n            _.each(this.getCcAvailableTypesValues(), function (value) {\r\n                if (value[keyValue] === code) {\r\n                    title = value[keyType];\r\n                }\r\n            });\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Prepare credit card number to output\r\n         * @param {String} number\r\n         * @returns {String}\r\n         */\r\n        formatDisplayCcNumber: function (number) {\r\n            return 'xxxx-' + number.substr(-4);\r\n        },\r\n\r\n        /**\r\n         * Get credit card details\r\n         * @returns {Array}\r\n         */\r\n        getInfo: function () {\r\n            return [\r\n                {\r\n                    'name': 'Credit Card Type', value: this.getCcTypeTitleByCode(this.creditCardType())\r\n                },\r\n                {\r\n                    'name': 'Credit Card Number', value: this.formatDisplayCcNumber(this.creditCardNumber())\r\n                }\r\n            ];\r\n        }\r\n    });\r\n});\r\n","Magento_Payment/js/view/payment/iframe.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/view/payment/cc-form',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/set-payment-information',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/modal/alert'\r\n], function (\r\n    $,\r\n    Component,\r\n    messageList,\r\n    $t,\r\n    fullScreenLoader,\r\n    setPaymentInformationAction,\r\n    additionalValidators,\r\n    alert\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Payment/payment/iframe',\r\n            timeoutId: null,\r\n            timeoutMessage: 'Sorry, but something went wrong.'\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getSource: function () {\r\n            return window.checkoutConfig.payment.iframe.source[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getControllerName: function () {\r\n            return window.checkoutConfig.payment.iframe.controllerName[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getPlaceOrderUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.placeOrderUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCgiUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.cgiUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getSaveOrderUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.saveOrderUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getDateDelim: function () {\r\n            return window.checkoutConfig.payment.iframe.dateDelim[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCardFieldsMap: function () {\r\n            return window.checkoutConfig.payment.iframe.cardFieldsMap[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getExpireYearLength: function () {\r\n            return window.checkoutConfig.payment.iframe.expireYearLength[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @param {Object} parent\r\n         * @returns {Function}\r\n         */\r\n        originalPlaceOrder: function (parent) {\r\n            return parent.placeOrder.bind(parent);\r\n        },\r\n\r\n        /**\r\n         * @returns {Number}\r\n         */\r\n        getTimeoutTime: function () {\r\n            return window.checkoutConfig.payment.iframe.timeoutTime[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getTimeoutMessage: function () {\r\n            return $t(this.timeoutMessage);\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            var self = this;\r\n\r\n            if (this.validateHandler() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                fullScreenLoader.startLoader();\r\n\r\n                this.isPlaceOrderActionAllowed(false);\r\n\r\n                $.when(\r\n                    this.setPaymentInformation()\r\n                ).done(\r\n                    this.done.bind(this)\r\n                ).fail(\r\n                    this.fail.bind(this)\r\n                ).always(\r\n                    function () {\r\n                        self.isPlaceOrderActionAllowed(true);\r\n                    }\r\n                );\r\n\r\n                this.initTimeoutHandler();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        setPaymentInformation: function () {\r\n            return setPaymentInformationAction(\r\n                this.messageContainer,\r\n                {\r\n                    method: this.getCode()\r\n                }\r\n            );\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        initTimeoutHandler: function () {\r\n            this.timeoutId = setTimeout(\r\n                this.timeoutHandler.bind(this),\r\n                this.getTimeoutTime()\r\n            );\r\n\r\n            $(window).off('clearTimeout')\r\n                .on('clearTimeout', this.clearTimeout.bind(this));\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        clearTimeout: function () {\r\n            clearTimeout(this.timeoutId);\r\n            this.fail();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        timeoutHandler: function () {\r\n            this.clearTimeout();\r\n\r\n            alert(\r\n                {\r\n                    content: this.getTimeoutMessage(),\r\n                    actions: {\r\n\r\n                        /**\r\n                         * {Function}\r\n                         */\r\n                        always: this.alertActionHandler.bind(this)\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.fail();\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        alertActionHandler: function () {\r\n            fullScreenLoader.startLoader();\r\n            window.location.reload();\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        fail: function () {\r\n            fullScreenLoader.stopLoader();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        done: function () {\r\n            this.placeOrderHandler().fail(function () {\r\n                fullScreenLoader.stopLoader();\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Payment/js/view/payment/payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'free',\r\n            component: 'Magento_Payment/js/view/payment/method-renderer/free-method'\r\n        }\r\n    );\r\n\r\n    /** Add view logic here if needed */\r\n    return Component.extend({});\r\n});\r\n","Magento_Payment/js/view/payment/method-renderer/free-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Payment/payment/free'\r\n        },\r\n\r\n        /** Returns is method available */\r\n        isAvailable: function () {\r\n            return quote.totals()['grand_total'] <= 0;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/order-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate',\r\n    'mage/mage',\r\n    'mage/validation'\r\n], function ($, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderReview', {\r\n        options: {\r\n            orderReviewSubmitSelector: '#review-button',\r\n            shippingSelector: '#shipping_method',\r\n            shippingSubmitFormSelector: null,\r\n            updateOrderSelector: '#update-order',\r\n            billingAsShippingSelector: '#billing\\\\:as_shipping',\r\n            updateContainerSelector: '#details-reload',\r\n            waitLoadingContainer: '#review-please-wait',\r\n            shippingMethodContainer: '#shipping-method-container',\r\n            agreementSelector: 'div.checkout-agreements input',\r\n            isAjax: false,\r\n            shippingMethodUpdateUrl: null,\r\n            updateOrderSubmitUrl: null,\r\n            canEditShippingMethod: false\r\n        },\r\n\r\n        /**\r\n         * Widget instance properties\r\n         */\r\n        triggerPropertyChange: true,\r\n        isShippingSubmitForm: false,\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            var isDisable;\r\n\r\n            //change handler for ajaxEnabled\r\n            if (this.options.isAjax) {\r\n                this._submitOrder = this._ajaxSubmitOrder;\r\n            }\r\n\r\n            this.element.on('click', this.options.orderReviewSubmitSelector, $.proxy(this._submitOrder, this))\r\n                .on('click', this.options.billingAsShippingSelector, $.proxy(this._shippingTobilling, this))\r\n                .on('change',\r\n                    this.options.shippingSelector,\r\n                    $.proxy(this._submitUpdateOrder,\r\n                        this,\r\n                        this.options.updateOrderSubmitUrl,\r\n                        this.options.updateContainerSelector\r\n                    )\r\n                ).find(this.options.updateOrderSelector).on('click', $.proxy(this._updateOrderHandler, this)).end();\r\n            this._shippingTobilling();\r\n\r\n            if ($(this.options.shippingSubmitFormSelector).length && this.options.canEditShippingMethod) {\r\n                this.isShippingSubmitForm = true;\r\n                $(this.options.shippingSubmitFormSelector)\r\n                    .on('change',\r\n                        this.options.shippingSelector,\r\n                        $.proxy(\r\n                            this._submitUpdateOrder,\r\n                            this,\r\n                            $(this.options.shippingSubmitFormSelector).prop('action'),\r\n                            this.options.updateContainerSelector\r\n                        )\r\n                    );\r\n                this._updateOrderSubmit(!$(this.options.shippingSubmitFormSelector)\r\n                    .find(this.options.shippingSelector).val());\r\n            } else {\r\n                isDisable = this.isShippingSubmitForm && this.element.find(this.options.shippingSelector).val();\r\n                this.element\r\n                    .on('input propertychange', ':input[name]',\r\n                        $.proxy(this._updateOrderSubmit, this, isDisable, this._onShippingChange)\r\n                    ).find('select').not(this.options.shippingSelector).on('change', this._propertyChange);\r\n                this._updateOrderSubmit(isDisable);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * show ajax loader\r\n         */\r\n        _ajaxBeforeSend: function () {\r\n            this.element.find(this.options.waitLoadingContainer).show();\r\n        },\r\n\r\n        /**\r\n         * hide ajax loader\r\n         */\r\n        _ajaxComplete: function () {\r\n            this.element.find(this.options.waitLoadingContainer).hide();\r\n        },\r\n\r\n        /**\r\n         * trigger propertychange for input type select\r\n         */\r\n        _propertyChange: function () {\r\n            $(this).trigger('propertychange');\r\n        },\r\n\r\n        /**\r\n         * trigger change for the update of shipping methods from server\r\n         */\r\n        _updateOrderHandler: function () {\r\n            $(this.options.shippingSelector).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Attempt to submit order\r\n         */\r\n        _submitOrder: function () {\r\n            if (this._validateForm()) {\r\n                this.element.find(this.options.updateOrderSelector).fadeTo(0, 0.5)\r\n                    .end().find(this.options.waitLoadingContainer).show()\r\n                    .end().trigger('submit');\r\n                this._updateOrderSubmit(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Attempt to ajax submit order\r\n         */\r\n        _ajaxSubmitOrder: function () {\r\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\r\n                return false;\r\n            }\r\n            $.ajax({\r\n                url: this.element.prop('action'),\r\n                type: 'post',\r\n                context: this,\r\n                data: {\r\n                    isAjax: 1\r\n                },\r\n                dataType: 'json',\r\n                beforeSend: this._ajaxBeforeSend,\r\n                complete: this._ajaxComplete,\r\n\r\n                /** @inheritdoc */\r\n                success: function (response) {\r\n                    var msg;\r\n\r\n                    if (typeof response === 'object' && !$.isEmptyObject(response)) {\r\n                        if (response['error_messages']) {\r\n                            this._ajaxComplete();\r\n                            msg = response['error_messages'];\r\n\r\n                            /* eslint-disable max-depth */\r\n                            if (msg) {\r\n                                if (Array.isArray(msg)) {\r\n                                    msg = msg.join('\\n');\r\n                                }\r\n                            }\r\n\r\n                            /* eslint-enablemax-depth */\r\n                            alert({\r\n                                content: msg\r\n                            });\r\n\r\n                            return false;\r\n                        }\r\n\r\n                        if (response.redirect) {\r\n                            $.mage.redirect(response.redirect);\r\n\r\n                            return false;\r\n                        } else if (response.success) {\r\n                            $.mage.redirect(this.options.successUrl);\r\n\r\n                            return false;\r\n                        }\r\n                        this._ajaxComplete();\r\n                        alert({\r\n                            content: $.mage.__('Sorry, something went wrong.')\r\n                        });\r\n                    }\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                error: function () {\r\n                    alert({\r\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\r\n                    });\r\n                    this._ajaxComplete();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate Order form\r\n         */\r\n        _validateForm: function () {\r\n            this.element.find(this.options.agreementSelector).off('change').on('change', $.proxy(function () {\r\n                var isValid = this._validateForm();\r\n\r\n                this._updateOrderSubmit(!isValid);\r\n            }, this));\r\n\r\n            if (this.element.data('mageValidation')) {\r\n                return this.element.validation().valid();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check/Set whether order can be submitted\r\n         * Also disables form submission element, if any\r\n         * @param {*} shouldDisable - whether should prevent order submission explicitly\r\n         * @param {Function} [fn] - function for shipping change handler\r\n         * @param {*} [*] - if true the property change will be set to true\r\n         */\r\n        _updateOrderSubmit: function (shouldDisable, fn) {\r\n            this._toggleButton(this.options.orderReviewSubmitSelector, shouldDisable);\r\n\r\n            if (typeof fn === 'function') {\r\n                fn.call(this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable/Disable button\r\n         * @param {jQuery} button - button selector to be toggled\r\n         * @param {*} disable - boolean for toggling\r\n         */\r\n        _toggleButton: function (button, disable) {\r\n            $(button).prop({\r\n                'disabled': disable\r\n            }).toggleClass('no-checkout', disable).fadeTo(0, disable ? 0.5 : 1);\r\n        },\r\n\r\n        /**\r\n         * Copy element value from shipping to billing address\r\n         * @param {jQuery.Event} e - optional\r\n         */\r\n        _shippingTobilling: function (e) {\r\n            var isChecked, opacity;\r\n\r\n            if (this.options.shippingSubmitFormSelector) {\r\n                return false;\r\n            }\r\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\r\n            opacity = isChecked ? 0.5 : 1;\r\n\r\n            if (isChecked) {\r\n                this.element.validation('clearError', ':input[name^=\"billing\"]');\r\n            }\r\n            $(':input[name^=\"shipping\"]', this.element).each($.proxy(function (key, value) {\r\n                var fieldObj = $(value.id.replace('shipping:', '#billing\\\\:'));\r\n\r\n                if (isChecked) {\r\n                    fieldObj = fieldObj.val($(value).val());\r\n                }\r\n                fieldObj.prop({\r\n                    'readonly': isChecked,\r\n                    'disabled': isChecked\r\n                }).fadeTo(0, opacity);\r\n\r\n                if (fieldObj.is('select')) {\r\n                    this.triggerPropertyChange = false;\r\n                    fieldObj.trigger('change');\r\n                }\r\n            }, this));\r\n\r\n            if (isChecked || e) {\r\n                this._updateOrderSubmit(true);\r\n            }\r\n            this.triggerPropertyChange = true;\r\n        },\r\n\r\n        /**\r\n         * Dispatch an ajax request of Update Order submission\r\n         * @param {*} url - url where to submit shipping method\r\n         * @param {*} resultId - id of element to be updated\r\n         */\r\n        _submitUpdateOrder: function (url, resultId) {\r\n            var isChecked, formData, callBackResponseHandler, shippingMethod;\r\n\r\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\r\n                return false;\r\n            }\r\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\r\n            formData = null;\r\n            callBackResponseHandler = null;\r\n            let val = $(this.options.shippingSelector).val();\r\n\r\n            shippingMethod = val.trim();\r\n            this._shippingTobilling();\r\n\r\n            if (url && resultId && shippingMethod) {\r\n                this._updateOrderSubmit(true);\r\n                this._toggleButton(this.options.updateOrderSelector, true);\r\n\r\n                // form data and callBack updated based on the shipping Form element\r\n                if (this.isShippingSubmitForm) {\r\n                    formData = $(this.options.shippingSubmitFormSelector).serialize() + '&isAjax=true';\r\n\r\n                    /**\r\n                     * @param {Object} response\r\n                     */\r\n                    callBackResponseHandler = function (response) {\r\n                        $(resultId).html(response);\r\n                        this._updateOrderSubmit(false);\r\n                        this._ajaxComplete();\r\n                    };\r\n                } else {\r\n                    formData = this.element.serialize() + '&isAjax=true';\r\n\r\n                    /**\r\n                     * @param {Object} response\r\n                     */\r\n                    callBackResponseHandler = function (response) {\r\n                        $(resultId).html(response);\r\n                        this._ajaxShippingUpdate(shippingMethod);\r\n                    };\r\n                }\r\n\r\n                if (isChecked) {\r\n                    $(this.options.shippingSelect).prop('disabled', true);\r\n                }\r\n                $.ajax({\r\n                    url: url,\r\n                    type: 'post',\r\n                    context: this,\r\n                    beforeSend: this._ajaxBeforeSend,\r\n                    data: formData,\r\n                    success: callBackResponseHandler\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update Shipping Methods Element from server\r\n         * @param {*} shippingMethod\r\n         */\r\n        _ajaxShippingUpdate: function (shippingMethod) {\r\n            $.ajax({\r\n                url: this.options.shippingMethodUpdateUrl,\r\n                data: {\r\n                    isAjax: true,\r\n                    'shipping_method': shippingMethod\r\n                },\r\n                type: 'post',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                success: function (response) {\r\n                    $(this.options.shippingMethodContainer).parent().html(response);\r\n                    this._toggleButton(this.options.updateOrderSelector, false);\r\n                    this._updateOrderSubmit(false);\r\n                },\r\n                complete: this._ajaxComplete\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Actions on change Shipping Address data\r\n         */\r\n        _onShippingChange: function () {\r\n            let val = $(this.options.shippingSelector).val();\r\n\r\n            if (this.triggerPropertyChange && val.trim()) {\r\n                this.element.find(this.options.shippingSelector).hide().end()\r\n                    .find(this.options.shippingSelector + '_update').show();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.orderReview;\r\n});\r\n","Magento_Paypal/js/paypal-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery-ui-modules/widget',\r\n    'mage/mage'\r\n], function ($, confirm, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.paypalCheckout', {\r\n        options: {\r\n            originalForm:\r\n                'form:not(#product_addtocart_form_from_popup):has(input[name=\"product\"][value=%1])',\r\n            productId: 'input[type=\"hidden\"][name=\"product\"]',\r\n            ppCheckoutSelector: '[data-role=pp-checkout-url]',\r\n            ppCheckoutInput: '<input type=\"hidden\" data-role=\"pp-checkout-url\" name=\"return_url\" value=\"\"/>'\r\n        },\r\n\r\n        /**\r\n         * Initialize store credit events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', '[data-action=\"checkout-form-submit\"]', $.proxy(function (e) {\r\n                var $target = $(e.target),\r\n                    returnUrl = $target.data('checkout-url'),\r\n                    productId = $target.closest('form').find(this.options.productId).val(),\r\n                    originalForm = this.options.originalForm.replace('%1', productId),\r\n                    self = this,\r\n                    billingAgreement = customerData.get('paypal-billing-agreement');\r\n\r\n                e.preventDefault();\r\n\r\n                if (billingAgreement().askToCreate) {\r\n                    confirm({\r\n                        content: billingAgreement().confirmMessage,\r\n                        actions: {\r\n\r\n                            /**\r\n                             * Confirmation handler\r\n                             *\r\n                             */\r\n                            confirm: function () {\r\n                                returnUrl = billingAgreement().confirmUrl;\r\n                                self._redirect(returnUrl, originalForm);\r\n                            },\r\n\r\n                            /**\r\n                             * Cancel confirmation handler\r\n                             *\r\n                             */\r\n                            cancel: function (event) {\r\n                                if (event && !$(event.target).hasClass('action-close')) {\r\n                                    self._redirect(returnUrl);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    this._redirect(returnUrl, originalForm);\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Redirect to certain url, with optional form\r\n         * @param {String} returnUrl\r\n         * @param {HTMLElement} originalForm\r\n         *\r\n         */\r\n        _redirect: function (returnUrl, originalForm) {\r\n            var $form,\r\n                ppCheckoutInput;\r\n\r\n            if (this.options.isCatalogProduct) {\r\n                // find the form from which the button was clicked\r\n                $form = originalForm ? $(originalForm) : $($(this.options.shortcutContainerClass).closest('form'));\r\n\r\n                ppCheckoutInput = $form.find(this.options.ppCheckoutSelector)[0];\r\n\r\n                if (!ppCheckoutInput) {\r\n                    ppCheckoutInput = $(this.options.ppCheckoutInput);\r\n                    ppCheckoutInput.appendTo($form);\r\n                }\r\n                $(ppCheckoutInput).val(returnUrl);\r\n\r\n                $form.trigger('submit');\r\n            } else {\r\n                $.mage.redirect(returnUrl);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.paypalCheckout;\r\n});\r\n","Magento_Paypal/js/action/set-payment-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/set-payment-information'\r\n], function (quote, setPaymentInformation) {\r\n    'use strict';\r\n\r\n    return function (messageContainer) {\r\n        return setPaymentInformation(messageContainer, quote.paymentMethod());\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/billing-agreement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, confirm, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.billingAgreement', {\r\n        options: {\r\n            invalidateOnLoad: false,\r\n            cancelButtonSelector: '.block-billing-agreements-view button.cancel',\r\n            cancelMessage: '',\r\n            cancelUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize billing agreements events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            if (this.options.invalidateOnLoad) {\r\n                this.invalidate();\r\n            }\r\n            $(this.options.cancelButtonSelector).on('click', function () {\r\n                confirm({\r\n                    content: self.options.cancelMessage,\r\n                    actions: {\r\n                        /**\r\n                         * 'Confirm' action handler.\r\n                         */\r\n                        confirm: function () {\r\n                            self.invalidate();\r\n                            window.location.href = self.options.cancelUrl;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return false;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * clear paypal billing agreement customer data\r\n         * @returns void\r\n         */\r\n        invalidate: function () {\r\n            customerData.invalidate(['paypal-billing-agreement']);\r\n        }\r\n    });\r\n\r\n    return $.mage.billingAgreement;\r\n});\r\n","Magento_Paypal/js/in-context/button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, $, Wrapper, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            declinePayment: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer');\r\n\r\n            this._super();\r\n            this.renderPayPalButtons(element);\r\n\r\n            if (cart().isGuestCheckoutAllowed === undefined) {\r\n                cart.subscribe(function (updatedCart) {\r\n                    this.declinePayment = !customer().firstname && !cart().isGuestCheckoutAllowed;\r\n\r\n                    return updatedCart;\r\n                }.bind(this));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            if (this.declinePayment) {\r\n                this.addError(this.signInMessage, 'warning');\r\n\r\n                reject();\r\n            } else {\r\n                promise.resolve();\r\n            }\r\n\r\n            return promise;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n\r\n            return this.clientConfig;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/in-context/express-checkout-smart-buttons.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* eslint-disable max-nested-callbacks */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_Paypal/js/in-context/paypal-sdk',\r\n    'Magento_Customer/js/customer-data',\r\n    'domReady!'\r\n], function (_, $, paypalSdk, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Triggers beforePayment action on PayPal buttons\r\n     *\r\n     * @param {Object} clientConfig\r\n     * @returns {Object} jQuery promise\r\n     */\r\n    function performCreateOrder(clientConfig) {\r\n        var params = {\r\n            'quote_id': clientConfig.quoteId,\r\n            'customer_id': clientConfig.customerId || '',\r\n            'form_key': clientConfig.formKey,\r\n            button: clientConfig.button\r\n        };\r\n\r\n        return $.Deferred(function (deferred) {\r\n            clientConfig.rendererComponent.beforePayment(deferred.resolve, deferred.reject).then(function () {\r\n                $.post(clientConfig.getTokenUrl, params).done(function (res) {\r\n                    clientConfig.rendererComponent.afterPayment(res, deferred.resolve, deferred.reject);\r\n                }).fail(function (jqXHR, textStatus, err) {\r\n                    clientConfig.rendererComponent.catchPayment(err, deferred.resolve, deferred.reject);\r\n                });\r\n            });\r\n        }).promise();\r\n    }\r\n\r\n    /**\r\n     * Triggers beforeOnAuthorize action on PayPal buttons\r\n     * @param {Object} clientConfig\r\n     * @param {Object} data\r\n     * @param {Object} actions\r\n     * @returns {Object} jQuery promise\r\n     */\r\n    function performOnApprove(clientConfig, data, actions) {\r\n        var params = {\r\n            paymentToken: data.orderID,\r\n            payerId: data.payerID,\r\n            paypalFundingSource: customerData.get('paypal-funding-source'),\r\n            'form_key': clientConfig.formKey\r\n        };\r\n\r\n        return $.Deferred(function (deferred) {\r\n            clientConfig.rendererComponent.beforeOnAuthorize(deferred.resolve, deferred.reject, actions)\r\n                .then(function () {\r\n                    $.post(clientConfig.onAuthorizeUrl, params).done(function (res) {\r\n                        clientConfig.rendererComponent\r\n                            .afterOnAuthorize(res, deferred.resolve, deferred.reject, actions);\r\n                        customerData.set('paypal-funding-source', '');\r\n                    }).fail(function (jqXHR, textStatus, err) {\r\n                        clientConfig.rendererComponent.catchOnAuthorize(err, deferred.resolve, deferred.reject);\r\n                        customerData.set('paypal-funding-source', '');\r\n                    });\r\n                });\r\n        }).promise();\r\n    }\r\n\r\n    return function (clientConfig, element) {\r\n        paypalSdk(clientConfig.sdkUrl, clientConfig.dataAttributes).done(function (paypal) {\r\n            paypal.Buttons({\r\n                style: clientConfig.styles,\r\n\r\n                /**\r\n                 * onInit is called when the button first renders\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onInit: function (data, actions) {\r\n                    clientConfig.rendererComponent.validate(actions);\r\n                },\r\n\r\n                /**\r\n                 * Triggers beforePayment action on PayPal buttons\r\n                 * @returns {Object} jQuery promise\r\n                 */\r\n                createOrder: function () {\r\n                    return performCreateOrder(clientConfig);\r\n                },\r\n\r\n                /**\r\n                 * Triggers beforeOnAuthorize action on PayPal buttons\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onApprove: function (data, actions) {\r\n                    performOnApprove(clientConfig, data, actions);\r\n                },\r\n\r\n                /**\r\n                 * Execute logic on Paypal button click\r\n                 */\r\n                onClick: function (data) {\r\n                    customerData.set('paypal-funding-source', data.fundingSource);\r\n                    clientConfig.rendererComponent.validate();\r\n                    clientConfig.rendererComponent.onClick();\r\n                },\r\n\r\n                /**\r\n                 * Process cancel action\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onCancel: function (data, actions) {\r\n                    clientConfig.rendererComponent.onCancel(data, actions);\r\n                },\r\n\r\n                /**\r\n                 * Process errors\r\n                 *\r\n                 * @param {Error} err\r\n                 */\r\n                onError: function (err) {\r\n                    clientConfig.rendererComponent.onError(err);\r\n                }\r\n            }).render(element);\r\n        });\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/express-checkout-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Paypal/js/in-context/express-checkout-smart-buttons',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/cookies'\r\n], function ($, $t, customerData, checkoutSmartButtons, alert) {\r\n    'use strict';\r\n\r\n    return {\r\n        defaults: {\r\n            paymentActionError: $t('Something went wrong with your request. Please try again later.'),\r\n            signInMessage: $t('To check out, please sign in with your email address.')\r\n        },\r\n\r\n        /**\r\n         * Render PayPal buttons using checkout.js\r\n         */\r\n        renderPayPalButtons: function (element) {\r\n            checkoutSmartButtons(this.prepareClientConfig(), element);\r\n        },\r\n\r\n        /**\r\n         * Validate payment method\r\n         *\r\n         * @param {Object} actions\r\n         */\r\n        validate: function (actions) {\r\n            this.actions = actions || this.actions;\r\n        },\r\n\r\n        /**\r\n         * Execute logic on Paypal button click\r\n         */\r\n        onClick: function () {},\r\n\r\n        /**\r\n         * Before payment execute\r\n         *\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @return {*}\r\n         */\r\n        beforePayment: function (resolve, reject) { //eslint-disable-line no-unused-vars\r\n            return $.Deferred().resolve();\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * Catch payment\r\n         *\r\n         * @param {Error} err\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         */\r\n        catchPayment: function (err, resolve, reject) {\r\n            this.addAlert(this.paymentActionError);\r\n            reject(err);\r\n        },\r\n\r\n        /**\r\n         * Before onAuthorize execute\r\n         *\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {jQuery.Deferred}\r\n         */\r\n        beforeOnAuthorize: function (resolve, reject, actions) { //eslint-disable-line no-unused-vars\r\n            //display loading widget.\r\n            $('body').trigger('processStart');\r\n\r\n            return $.Deferred().resolve();\r\n        },\r\n\r\n        /**\r\n         * After onAuthorize execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            $('body').trigger('processStop');\r\n\r\n            if (res.success) {\r\n                resolve();\r\n\r\n                return actions.redirect(res.redirectUrl);\r\n            }\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * Catch payment\r\n         *\r\n         * @param {Error} err\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         */\r\n        catchOnAuthorize: function (err, resolve, reject) {\r\n            $('body').trigger('processStop');\r\n            this.addAlert(this.paymentActionError);\r\n            reject(err);\r\n        },\r\n\r\n        /**\r\n         * Process cancel action\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} actions\r\n         */\r\n        onCancel: function (data, actions) {\r\n            $('body').trigger('processStop');\r\n            actions.redirect(this.clientConfig.onCancelUrl);\r\n        },\r\n\r\n        /**\r\n         * Process errors\r\n         *\r\n         * @param {Error} err\r\n         */\r\n        onError: function (err) { //eslint-disable-line no-unused-vars\r\n            // Uncaught error isn't displayed in the console\r\n        },\r\n\r\n        /**\r\n         * Adds error message\r\n         *\r\n         * @param {String} message\r\n         * @param {String} [type]\r\n         */\r\n        addError: function (message, type) {\r\n            type = type || 'error';\r\n            customerData.set('messages', {\r\n                messages: [{\r\n                    type: type,\r\n                    text: message\r\n                }],\r\n                'data_id': Math.floor(Date.now() / 1000)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Add alert message\r\n         *\r\n         * @param {String} message\r\n         */\r\n        addAlert: function (message) {\r\n            alert({\r\n                content: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getButtonId: function () {\r\n            return this.inContextId;\r\n        },\r\n\r\n        /**\r\n         * Populate client config with all required data\r\n         *\r\n         * @return {Object}\r\n         */\r\n        prepareClientConfig: function () {\r\n            this.clientConfig.rendererComponent = this;\r\n            this.clientConfig.formKey = $.mage.cookies.get('form_key');\r\n\r\n            return this.clientConfig;\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/paypal-sdk.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var dfd = $.Deferred();\r\n\r\n    /**\r\n     * Loads the PayPal SDK object\r\n     * @param {String} paypalUrl - the url of the PayPal SDK\r\n     * @param {Array} dataAttributes - Array of the Attributes for PayPal SDK Script tag\r\n     */\r\n    return function loadPaypalScript(paypalUrl, dataAttributes) {\r\n        //configuration for loaded PayPal script\r\n        require.config({\r\n            paths: {\r\n                paypalSdk: paypalUrl\r\n            },\r\n            shim: {\r\n                paypalSdk: {\r\n                    exports: 'paypal'\r\n                }\r\n            },\r\n            attributes: {\r\n                'paypalSdk': dataAttributes\r\n            },\r\n\r\n            /**\r\n             * Add attributes under Paypal SDK Script tag\r\n             */\r\n            onNodeCreated: function (node, config, name) {\r\n                if (config.attributes && config.attributes[name]) {\r\n                    $.each(dataAttributes, function (index, elem) {\r\n                        node.setAttribute(index, elem);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        if (dfd.state() !== 'resolved') {\r\n            require(['paypalSdk'], function (paypalObject) {\r\n                dfd.resolve(paypalObject);\r\n            });\r\n        }\r\n\r\n        return dfd.promise();\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/product-express-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, $, Component, Wrapper, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            productFormSelector: '#product_addtocart_form',\r\n            declinePayment: false,\r\n            formInvalid: false,\r\n            productAddedToCart: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer'),\r\n                isGuestCheckoutAllowed;\r\n\r\n            this._super();\r\n\r\n            isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\r\n\r\n            if (typeof isGuestCheckoutAllowed === 'undefined') {\r\n                isGuestCheckoutAllowed = config.clientConfig.isGuestCheckoutAllowed;\r\n            }\r\n\r\n            if (config.clientConfig.isVisibleOnProductPage) {\r\n                this.renderPayPalButtons(element);\r\n            }\r\n\r\n            this.declinePayment = !customer().firstname && !isGuestCheckoutAllowed;\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onClick: function () {\r\n            var $form = $(this.productFormSelector);\r\n\r\n            if (!this.declinePayment && !this.productAddedToCart) {\r\n                $form.trigger('submit');\r\n                this.formInvalid = !$form.validation('isValid');\r\n                this.productAddedToCart = true;\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            if (this.declinePayment) {\r\n                this.addError(this.signInMessage, 'warning');\r\n                reject();\r\n            } else if (this.formInvalid) {\r\n                reject();\r\n            } else {\r\n                $(document).on('ajax:addToCart', function (e, data) {\r\n                    if (_.isEmpty(data.response)) {\r\n                        return promise.resolve();\r\n                    }\r\n\r\n                    return reject();\r\n                });\r\n                $(document).on('ajax:addToCart:error', reject);\r\n            }\r\n\r\n            return promise;\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            this.addAlert(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n            this.clientConfig.quoteId = '';\r\n            this.clientConfig.customerId = '';\r\n\r\n            return this.clientConfig;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onError: function (err) {\r\n            this.productAddedToCart = false;\r\n            this._super(err);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onCancel: function (data, actions) {\r\n            this.productAddedToCart = false;\r\n            this._super(data, actions);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            this.productAddedToCart = false;\r\n\r\n            return this._super(res, resolve, reject, actions);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/model/iframe-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Paypal/js/model/iframe',\r\n    'Magento_Ui/js/model/messageList'\r\n],\r\nfunction (ko, iframe, messageList) {\r\n    'use strict';\r\n\r\n    return function (cartUrl, errorMessage, goToSuccessPage, successUrl) {\r\n        if (this === window.self) {\r\n            window.location = cartUrl;\r\n        }\r\n\r\n        if (!!errorMessage.message) { //eslint-disable-line no-extra-boolean-cast\r\n            document.removeEventListener('click', iframe.stopEventPropagation, true);\r\n            iframe.isInAction(false);\r\n            messageList.addErrorMessage(errorMessage);\r\n        } else if (!!goToSuccessPage) { //eslint-disable-line no-extra-boolean-cast\r\n            window.location = successUrl;\r\n        } else {\r\n            window.location = cartUrl;\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/model/iframe.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    var isInAction = ko.observable(false);\r\n\r\n    return {\r\n        isInAction: isInAction,\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         */\r\n        stopEventPropagation: function (event) {\r\n            event.stopImmediatePropagation();\r\n            event.preventDefault();\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/view/paylater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiElement',\r\n    'uiLayout',\r\n    'Magento_Paypal/js/in-context/paypal-sdk',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    ko,\r\n    Component,\r\n    layout,\r\n    paypalSdk\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            template: 'Magento_Paypal/paylater',\r\n            sdkUrl: '',\r\n            attributes: {\r\n                class: 'pay-later-message'\r\n            },\r\n            dataAttributes: {},\r\n            refreshSelector: '',\r\n            displayAmount: false,\r\n            amountComponentConfig: {\r\n                name: '${ $.name }.amountProvider',\r\n                component: ''\r\n            }\r\n        },\r\n        paypal: null,\r\n        amount: null,\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .observe(['amount']);\r\n\r\n            if (this.displayAmount) {\r\n                layout([this.amountComponentConfig]);\r\n            }\r\n\r\n            if (this.sdkUrl !== '') {\r\n                this.loadPayPalSdk(this.sdkUrl, this.dataAttributes)\r\n                    .then(this._setPayPalObject.bind(this));\r\n            }\r\n\r\n            if (this.refreshSelector) {\r\n                $(this.refreshSelector).on('click', this._refreshMessages.bind(this));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get attribute value from configuration\r\n         *\r\n         * @param {String} attributeName\r\n         * @returns {*|null}\r\n         */\r\n        getAttribute: function (attributeName) {\r\n            return typeof this.attributes[attributeName] !== 'undefined' ?\r\n                this.attributes[attributeName] : null;\r\n        },\r\n\r\n        /**\r\n         * Load PP SDK with preconfigured options\r\n         *\r\n         * @param {String} sdkUrl - the url of the PayPal SDK\r\n         * @param {Array} dataAttributes - Array of the Attributes for PayPal SDK Script tag\r\n         */\r\n        loadPayPalSdk: function (sdkUrl, dataAttributes) {\r\n            return paypalSdk(sdkUrl, dataAttributes);\r\n        },\r\n\r\n        /**\r\n         * Set reference to paypal Sdk object\r\n         *\r\n         * @param {Object} paypal\r\n         * @private\r\n         */\r\n        _setPayPalObject: function (paypal) {\r\n            this.paypal = paypal;\r\n        },\r\n\r\n        /**\r\n         * Render messages\r\n         *\r\n         * @private\r\n         */\r\n        _refreshMessages: function () {\r\n            if (this.paypal) {\r\n                this.paypal.Messages.render();\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/quote',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    ko,\r\n    Component,\r\n    registry,\r\n    quote\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            amount: null\r\n        },\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.updateAmount();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update amount\r\n         */\r\n        updateAmount: function () {\r\n            var payLater = registry.get(this.parentName);\r\n\r\n            quote.totals.subscribe(function (newValue) {\r\n                payLater.amount(newValue['base_grand_total']);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/product-grouped.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    Component,\r\n    registry\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            tableWrapperSelector: '.table-wrapper.grouped',\r\n            priceBoxSelector: '[data-role=\"priceBox\"]',\r\n            qtyFieldSelector: '.input-text.qty',\r\n            amount: null\r\n        },\r\n        priceInfo: {},\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            $('tbody tr', this.tableWrapperSelector).each(function (index, element) {\r\n                var priceBox = $(self.priceBoxSelector, element),\r\n                    qtyElement = $(self.qtyFieldSelector, element),\r\n                    productId = priceBox.data('productId'),\r\n                    priceElement = $('#product-price-' + productId);\r\n\r\n                self.priceInfo[productId] = {\r\n                    qty: self._getQty(qtyElement),\r\n                    price: priceElement.data('priceAmount')\r\n                };\r\n            });\r\n\r\n            $(this.qtyFieldSelector).on('change', this._onQtyChange.bind(this));\r\n\r\n            this._updateAmount();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get product quantity\r\n         *\r\n         * @param {jQuery.Element} element\r\n         * @private\r\n         */\r\n        _getQty: function (element) {\r\n            var qty = parseFloat(element.val());\r\n\r\n            return !isNaN(qty) && qty ? qty : 0;\r\n        },\r\n\r\n        /**\r\n         * Handle changed product quantity\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyChange: function (event) {\r\n            var qtyElement = $(event.target),\r\n                parent = qtyElement.parents('tr'),\r\n                priceBox = $(this.priceBoxSelector, parent),\r\n                productId = priceBox.data('productId');\r\n\r\n            if (this.priceInfo[productId]) {\r\n                this.priceInfo[productId].qty = this._getQty(qtyElement);\r\n            }\r\n\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Calculate and update amount\r\n         *\r\n         * @private\r\n         */\r\n        _updateAmount: function () {\r\n            var productId,\r\n                amount = 0,\r\n                payLater = registry.get(this.parentName);\r\n\r\n            for (productId in this.priceInfo) {\r\n                if (this.priceInfo.hasOwnProperty(productId)) {\r\n                    amount += this.priceInfo[productId].price * this.priceInfo[productId].qty;\r\n                }\r\n            }\r\n\r\n            payLater.amount(amount);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/product.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'priceBox',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    Component,\r\n    registry\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            priceBoxSelector: '.price-box',\r\n            qtyFieldSelector: '#product_addtocart_form [name=\"qty\"]',\r\n            amount: null\r\n        },\r\n        qty: 1,\r\n        price: 0,\r\n        priceType: '',\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            var priceBox;\r\n\r\n            this._super();\r\n\r\n            priceBox = $(this.priceBoxSelector);\r\n            priceBox.on('priceUpdated', this._onPriceChange.bind(this));\r\n\r\n            if (priceBox.priceBox('option') &&\r\n                priceBox.priceBox('option').prices &&\r\n                (priceBox.priceBox('option').prices.finalPrice || priceBox.priceBox('option').prices.basePrice)\r\n            ) {\r\n                this.priceType = priceBox.priceBox('option').prices.finalPrice ? 'finalPrice' : 'basePrice';\r\n                this.price = priceBox.priceBox('option').prices[this.priceType].amount;\r\n            }\r\n\r\n            $(this.qtyFieldSelector).on('change', this._onQtyChange.bind(this));\r\n\r\n            priceBox.trigger('updatePrice');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handle changed product qty\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyChange: function (event) {\r\n            var qty = parseFloat($(event.target).val());\r\n\r\n            this.qty = !isNaN(qty) && qty ? qty : 1;\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Handle product price change\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onPriceChange: function (event, data) {\r\n            this.price = data[this.priceType].amount;\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Calculate and update amount\r\n         *\r\n         * @private\r\n         */\r\n        _updateAmount: function () {\r\n            var amount = this.price * this.qty,\r\n                payLater = registry.get(this.parentName);\r\n\r\n            if (amount !== 0) {\r\n                payLater.amount(amount);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/paypal-payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    var isContextCheckout = window.checkoutConfig.payment.paypalExpress.isContextCheckout,\r\n        paypalExpress = 'Magento_Paypal/js/view/payment/method-renderer' +\r\n            (isContextCheckout ? '/in-context/checkout-express' : '/paypal-express');\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'paypal_express',\r\n            component: paypalExpress,\r\n            config: window.checkoutConfig.payment.paypalExpress.inContextConfig\r\n        },\r\n        {\r\n            type: 'payflow_express',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express'\r\n        },\r\n        {\r\n            type: 'payflow_express_bml',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml'\r\n        },\r\n        {\r\n            type: 'payflowpro',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method'\r\n        },\r\n        {\r\n            type: 'payflow_link',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'payflow_advanced',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'hosted_pro',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'paypal_billing_agreement',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement'\r\n        }\r\n    );\r\n\r\n    /**\r\n     * Add view logic here if needed\r\n     **/\r\n    return Component.extend({});\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/iframe-methods.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Paypal/js/model/iframe',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function (Component, iframe, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/iframe-methods',\r\n            paymentReady: false\r\n        },\r\n        redirectAfterPlaceOrder: false,\r\n        isInAction: iframe.isInAction,\r\n\r\n        /**\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('paymentReady');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isPaymentReady: function () {\r\n            return this.paymentReady();\r\n        },\r\n\r\n        /**\r\n         * Get action url for payment method iframe.\r\n         * @returns {String}\r\n         */\r\n        getActionUrl: function () {\r\n            return this.isInAction() ? window.checkoutConfig.payment.paypalIframe.actionUrl[this.getCode()] : '';\r\n        },\r\n\r\n        /**\r\n         * Places order in pending payment status.\r\n         */\r\n        placePendingPaymentOrder: function () {\r\n            if (this.placeOrder()) {\r\n                fullScreenLoader.startLoader();\r\n                this.isInAction(true);\r\n                // capture all click events\r\n                document.addEventListener('click', iframe.stopEventPropagation, true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPlaceOrderDeferredObject: function () {\r\n            var self = this;\r\n\r\n            return this._super().fail(function () {\r\n                fullScreenLoader.stopLoader();\r\n                self.isInAction(false);\r\n                document.removeEventListener('click', iframe.stopEventPropagation, true);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * After place order callback\r\n         */\r\n        afterPlaceOrder: function () {\r\n            if (this.iframeIsLoaded) {\r\n                document.getElementById(this.getCode() + '-iframe')\r\n                    .contentWindow.location.reload();\r\n                this.paymentReady(false);\r\n            }\r\n\r\n            this.paymentReady(true);\r\n            this.iframeIsLoaded = true;\r\n            this.isPlaceOrderActionAllowed(true);\r\n            fullScreenLoader.stopLoader();\r\n        },\r\n\r\n        /**\r\n         * Hide loader when iframe is fully loaded.\r\n         */\r\n        iframeLoaded: function () {\r\n            fullScreenLoader.stopLoader();\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express-bml'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/view/payment/iframe',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Checkout/js/action/set-payment-information',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Vault/js/view/payment/vault-enabler'\r\n], function ($, Component, additionalValidators, setPaymentInformationAction, fullScreenLoader, VaultEnabler) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflowpro-form'\r\n        },\r\n        placeOrderHandler: null,\r\n        validateHandler: null,\r\n\r\n        /**\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.vaultEnabler = new VaultEnabler();\r\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Function} handler\r\n         */\r\n        setPlaceOrderHandler: function (handler) {\r\n            this.placeOrderHandler = handler;\r\n        },\r\n\r\n        /**\r\n         * @param {Function} handler\r\n         */\r\n        setValidateHandler: function (handler) {\r\n            this.validateHandler = handler;\r\n        },\r\n\r\n        /**\r\n         * @returns {Object}\r\n         */\r\n        context: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        isShowLegend: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'payflowpro';\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            var self = this;\r\n\r\n            if (this.validateHandler() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                this.isPlaceOrderActionAllowed(false);\r\n                fullScreenLoader.startLoader();\r\n                $.when(\r\n                    setPaymentInformationAction(this.messageContainer, self.getData())\r\n                ).done(\r\n                    function () {\r\n                        self.placeOrderHandler().fail(\r\n                            function () {\r\n                                fullScreenLoader.stopLoader();\r\n                            }\r\n                        );\r\n                    }\r\n                ).always(\r\n                    function () {\r\n                        self.isPlaceOrderActionAllowed(true);\r\n                        fullScreenLoader.stopLoader();\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {Object}\r\n         */\r\n        getData: function () {\r\n            var data = {\r\n                'method': this.getCode(),\r\n                'additional_data': {\r\n                    'cc_type': this.creditCardType(),\r\n                    'cc_exp_year': this.creditCardExpYear(),\r\n                    'cc_exp_month': this.creditCardExpMonth(),\r\n                    'cc_last_4': this.creditCardNumber().substr(-4)\r\n                }\r\n            };\r\n\r\n            this.vaultEnabler.visitAdditionalData(data);\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * @returns {Bool}\r\n         */\r\n        isVaultEnabled: function () {\r\n            return this.vaultEnabler.isVaultEnabled();\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getVaultCode: function () {\r\n            return 'payflowpro_cc_vault';\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'mage/validation'\r\n], function ($, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal_billing_agreement-form',\r\n            selectedBillingAgreement: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('selectedBillingAgreement');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getTransportName: function () {\r\n            return window.checkoutConfig.payment.paypalBillingAgreement.transportName;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getBillingAgreements: function () {\r\n            return window.checkoutConfig.payment.paypalBillingAgreement.agreements;\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getData: function () {\r\n            var additionalData = null;\r\n\r\n            if (this.getTransportName()) {\r\n                additionalData = {};\r\n                additionalData[this.getTransportName()] = this.selectedBillingAgreement();\r\n            }\r\n\r\n            return {\r\n                'method': this.item.method,\r\n                'additional_data': additionalData\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {jQuery}\r\n         */\r\n        validate: function () {\r\n            var form = '#billing-agreement-form';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Paypal/js/action/set-payment-method',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, Component, setPaymentMethodAction, additionalValidators, quote, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express-bml',\r\n            billingAgreement: ''\r\n        },\r\n\r\n        /** Init observable variables */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('billingAgreement');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** Open window with  */\r\n        showAcceptanceWindow: function (data, event) {\r\n            window.open(\r\n                $(event.currentTarget).attr('href'),\r\n                'olcwhatispaypal',\r\n                'toolbar=no, location=no,' +\r\n                ' directories=no, status=no,' +\r\n                ' menubar=no, scrollbars=yes,' +\r\n                ' resizable=yes, ,left=0,' +\r\n                ' top=0, width=400, height=350'\r\n            );\r\n\r\n            return false;\r\n        },\r\n\r\n        /** Returns payment acceptance mark link path */\r\n        getPaymentAcceptanceMarkHref: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkHref;\r\n        },\r\n\r\n        /** Returns payment acceptance mark image path */\r\n        getPaymentAcceptanceMarkSrc: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkSrc;\r\n        },\r\n\r\n        /** Returns billing agreement data */\r\n        getBillingAgreementCode: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.billingAgreementCode[this.item.method];\r\n        },\r\n\r\n        /** Returns payment information data */\r\n        getData: function () {\r\n            var parent = this._super(),\r\n                additionalData = null;\r\n\r\n            if (this.getBillingAgreementCode()) {\r\n                additionalData = {};\r\n                additionalData[this.getBillingAgreementCode()] = this.billingAgreement();\r\n            }\r\n\r\n            return $.extend(true, parent, {\r\n                'additional_data': additionalData\r\n            });\r\n        },\r\n\r\n        /** Redirect to paypal */\r\n        continueToPayPal: function () {\r\n            if (additionalValidators.validate()) {\r\n                //update payment method information if additional data was changed\r\n                setPaymentMethodAction(this.messageContainer).done(\r\n                    function () {\r\n                        customerData.invalidate(['cart']);\r\n                        $.mage.redirect(\r\n                            window.checkoutConfig.payment.paypalExpress.redirectUrl[quote.paymentMethod().method]\r\n                        );\r\n                    }\r\n                );\r\n\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal-express'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/in-context/checkout-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Paypal/js/action/set-payment-method',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function ($, Component, Wrapper, setPaymentMethod, additionalValidators, messageList) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal-express-in-context',\r\n            validationElements: 'input'\r\n        },\r\n\r\n        /**\r\n         * Listens element on change and validate it.\r\n         *\r\n         * @param {HTMLElement} context\r\n         */\r\n        initListeners: function (context) {\r\n            $.async(this.validationElements, context, function (element) {\r\n                $(element).on('change', function () {\r\n                    this.validate();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         *  Validates Smart Buttons\r\n         */\r\n        validate: function () {\r\n            this._super();\r\n\r\n            if (this.actions) {\r\n                additionalValidators.validate(true) ? this.actions.enable() : this.actions.disable();\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            setPaymentMethod(this.messageContainer).done(function () {\r\n                return promise.resolve();\r\n            }).fail(function (response) {\r\n                var error;\r\n\r\n                try {\r\n                    error = JSON.parse(response.responseText);\r\n                } catch (exception) {\r\n                    error = this.paymentActionError;\r\n                }\r\n\r\n                this.addError(error);\r\n\r\n                return reject(new Error(error));\r\n            }.bind(this));\r\n\r\n            return promise;\r\n        },\r\n\r\n        /**\r\n         * Populate client config with all required data\r\n         *\r\n         * @return {Object}\r\n         */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n            this.clientConfig.quoteId = window.checkoutConfig.quoteData['entity_id'];\r\n            this.clientConfig.customerId = window.customerData.id;\r\n            this.clientConfig.button = 0;\r\n\r\n            return this.clientConfig;\r\n        },\r\n\r\n        /**\r\n         * Adding logic to be triggered onClick action for smart buttons component\r\n         */\r\n        onClick: function () {\r\n            additionalValidators.validate();\r\n        },\r\n\r\n        /**\r\n         * Adds error message\r\n         *\r\n         * @param {String} message\r\n         */\r\n        addError: function (message) {\r\n            messageList.addErrorMessage({\r\n                message: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            this.addError(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * After onAuthorize execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            if (res.success) {\r\n                resolve();\r\n\r\n                return actions.redirect(res.redirectUrl);\r\n            }\r\n\r\n            this.addError(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro/vault.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Vault/js/view/payment/method-renderer/vault'\r\n], function (VaultComponent) {\r\n    'use strict';\r\n\r\n    return VaultComponent.extend({\r\n        defaults: {\r\n            template: 'Magento_Vault/payment/form'\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getToken: function () {\r\n            return this.publicHash;\r\n        },\r\n\r\n        /**\r\n         * Get last 4 digits of card\r\n         * @returns {String}\r\n         */\r\n        getMaskedCard: function () {\r\n            return this.details['cc_last_4'];\r\n        },\r\n\r\n        /**\r\n         * Get expiration date\r\n         * @returns {String}\r\n         */\r\n        getExpirationDate: function () {\r\n            return this.details['cc_exp_month'] + '/' + this.details['cc_exp_year'];\r\n        },\r\n\r\n        /**\r\n         * Get card type\r\n         * @returns {String}\r\n         */\r\n        getCardType: function () {\r\n            return this.details['cc_type'];\r\n        }\r\n    });\r\n});\r\n","Magento_PaypalCaptcha/js/model/skipRefreshCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        skip: ko.observable(false)\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/checkout/defaultCaptcha-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PaypalCaptcha/js/model/skipRefreshCaptcha'\r\n], function (skipRefreshCaptcha) {\r\n    'use strict';\r\n\r\n    var defaultCaptchaMixin = {\r\n        /**\r\n         * @override\r\n         */\r\n        refresh: function () {\r\n            if (!skipRefreshCaptcha.skip()) {\r\n                this._super();\r\n            } else {\r\n                skipRefreshCaptcha.skip(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    return function (defaultCaptcha) {\r\n        return defaultCaptcha.extend(defaultCaptchaMixin);\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/checkout/paymentCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n    'Magento_Captcha/js/model/captchaList',\r\n    'Magento_Captcha/js/model/captcha'\r\n],\r\nfunction ($, defaultCaptcha, captchaList, Captcha) {\r\n    'use strict';\r\n\r\n    return defaultCaptcha.extend({\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var captchaConfigPayment,\r\n                currentCaptcha;\r\n\r\n            this._super();\r\n\r\n            if (window[this.configSource] && window[this.configSource].captchaPayments) {\r\n                captchaConfigPayment = window[this.configSource].captchaPayments;\r\n\r\n                $.each(captchaConfigPayment, function (formId, captchaData) {\r\n                    var captcha;\r\n\r\n                    captchaData.formId = formId;\r\n                    captcha = Captcha(captchaData);\r\n                    captchaList.add(captcha);\r\n                });\r\n            }\r\n\r\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (currentCaptcha != null) {\r\n                currentCaptcha.setIsVisible(true);\r\n                this.setCurrentCaptcha(currentCaptcha);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PaypalCaptcha/js/view/payment/list-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Captcha/js/model/captchaList'\r\n], function ($, captchaList) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n        formId: 'co-payment-form',\r\n\r\n        /**\r\n         * Sets custom template for Payflow Pro\r\n         *\r\n         * @param {Object} payment\r\n         * @returns {Object}\r\n         */\r\n        createComponent: function (payment) {\r\n\r\n            var component = this._super(payment);\r\n\r\n            if (component.component === 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method') {\r\n                component.template = 'Magento_PaypalCaptcha/payment/payflowpro-form';\r\n                $(window).off('clearTimeout')\r\n                    .on('clearTimeout', this.clearTimeout.bind(this));\r\n            }\r\n\r\n            return component;\r\n        },\r\n\r\n        /**\r\n         * Overrides default window.clearTimeout() to catch errors from iframe and reload Captcha.\r\n         *\r\n         * @param {Number} timeoutID\r\n         */\r\n        clearTimeout: function (timeoutID) {\r\n            var captcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (captcha !== null) {\r\n                captcha.refresh();\r\n            }\r\n            clearTimeout(timeoutID);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Overrides `Magento_Checkout/js/view/payment/list::createComponent`\r\n     */\r\n    return function (target) {\r\n        return target.extend(mixin);\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/payment/method-renderer/payflowpro-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PaypalCaptcha/js/model/skipRefreshCaptcha'\r\n], function (skipRefreshCaptcha) {\r\n    'use strict';\r\n\r\n    var payflowProMethodMixin = {\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            skipRefreshCaptcha.skip(true);\r\n            this._super();\r\n        }\r\n    };\r\n\r\n    return function (payflowProMethod) {\r\n        return payflowProMethod.extend(payflowProMethodMixin);\r\n    };\r\n});\r\n","Magento_Persistent/js/view/additional-welcome.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, $t, customerData) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Init.\r\n         */\r\n        init: function () {\r\n            var persistent = customerData.get('persistent');\r\n\r\n            if (persistent().fullname === undefined) {\r\n                customerData.get('persistent').subscribe(this.replacePersistentWelcome);\r\n            } else {\r\n                this.replacePersistentWelcome();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Replace welcome message for customer with persistent cookie.\r\n         */\r\n        replacePersistentWelcome: function () {\r\n            var persistent = customerData.get('persistent'),\r\n                welcomeElems;\r\n\r\n            if (persistent().fullname !== undefined) {\r\n                welcomeElems = $('li.greet.welcome > span.not-logged-in');\r\n\r\n                if (welcomeElems.length) {\r\n                    $(welcomeElems).each(function () {\r\n                        var html = $t('Welcome, %1!').replace('%1', persistent().fullname);\r\n\r\n                        $(this).attr('data-bind', html);\r\n                        $(this).html(html);\r\n                    });\r\n                    $(welcomeElems).append(' <span><a ' + window.notYouLink + '>' + $t('Not you?') + '</a>');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @constructor\r\n         */\r\n        'Magento_Persistent/js/view/additional-welcome': function () {\r\n            this.init();\r\n        }\r\n    };\r\n});\r\n","Magento_Persistent/js/view/customer-data-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper'\r\n], function ($, wrapper) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n        /**\r\n         * Check if persistent section is expired due to lifetime.\r\n         *\r\n         * @param {Function} originFn - Original method.\r\n         * @return {Array}\r\n         */\r\n        getExpiredSectionNames: function (originFn) {\r\n            var expiredSections = originFn(),\r\n                storage = $.initNamespaceStorage('mage-cache-storage').localStorage,\r\n                currentTimestamp = Math.floor(Date.now() / 1000),\r\n                persistentIndex = expiredSections.indexOf('persistent'),\r\n                persistentLifeTime = 0,\r\n                sectionData;\r\n\r\n            if (window.persistent !== undefined && window.persistent.expirationLifetime !== undefined) {\r\n                persistentLifeTime = window.persistent.expirationLifetime;\r\n            }\r\n\r\n            if (persistentIndex !== -1) {\r\n                sectionData = storage.get('persistent');\r\n\r\n                if (typeof sectionData === 'object' &&\r\n                    sectionData['data_id'] + persistentLifeTime >= currentTimestamp\r\n                ) {\r\n                    expiredSections.splice(persistentIndex, 1);\r\n                }\r\n            }\r\n\r\n            return expiredSections;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} settings\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/customer-data': function (originFn) {\r\n            let mageCacheTimeout = new Date($.localStorage.get('mage-cache-timeout')),\r\n                mageCacheSessId = $.cookieStorage.isSet('mage-cache-sessid');\r\n\r\n            originFn();\r\n            if (window.persistent !== undefined && (mageCacheTimeout < new Date() || !mageCacheSessId)) {\r\n                this.reload(['persistent','cart'],true);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Override default customer-data.getExpiredSectionNames().\r\n     */\r\n    return function (target) {\r\n        return wrapper.extend(target, mixin);\r\n    };\r\n});\r\n","Magento_ProductAlert/js/form-submitter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n\r\n        $(element).trigger('submit');\r\n    };\r\n});\r\n","Magento_ProductVideo/js/fotorama-add-video-events.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'catalogGallery',\r\n    'loadPlayer'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    var allowBase = true; //global var is needed because fotorama always fully reloads events in case of fullscreen\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    function parseHref(href) {\r\n        var a = document.createElement('a');\r\n\r\n        a.href = href;\r\n\r\n        return a;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    function parseURL(href, forceVideo) {\r\n        var id,\r\n            type,\r\n            ampersandPosition,\r\n            vimeoRegex,\r\n            useYoutubeNocookie = false;\r\n\r\n        /**\r\n         * Get youtube ID\r\n         * @param {String} srcid\r\n         * @returns {{}}\r\n         */\r\n        function _getYoutubeId(srcid) {\r\n            if (srcid) {\r\n                ampersandPosition = srcid.indexOf('&');\r\n\r\n                if (ampersandPosition === -1) {\r\n                    return srcid;\r\n                }\r\n\r\n                srcid = srcid.substring(0, ampersandPosition);\r\n            }\r\n\r\n            return srcid;\r\n        }\r\n\r\n        if (typeof href !== 'string') {\r\n            return href;\r\n        }\r\n\r\n        href = parseHref(href);\r\n\r\n        if (href.host.match(/youtube\\.com/) && href.search) {\r\n            id = href.search.split('v=')[1];\r\n\r\n            if (id) {\r\n                id = _getYoutubeId(id);\r\n                type = 'youtube';\r\n            }\r\n        } else if (href.host.match(/youtube\\.com|youtu\\.be|youtube-nocookie.com/)) {\r\n            id = href.pathname.replace(/^\\/(embed\\/|v\\/)?/, '').replace(/\\/.*/, '');\r\n            type = 'youtube';\r\n\r\n            if (href.host.match(/youtube-nocookie.com/)) {\r\n                useYoutubeNocookie = true;\r\n            }\r\n        } else if (href.host.match(/vimeo\\.com/)) {\r\n            type = 'vimeo';\r\n            vimeoRegex = new RegExp(['https?:\\\\/\\\\/(?:www\\\\.|player\\\\.)?vimeo.com\\\\/(?:channels\\\\/(?:\\\\w+\\\\/)',\r\n                '?|groups\\\\/([^\\\\/]*)\\\\/videos\\\\/|album\\\\/(\\\\d+)\\\\/video\\\\/|video\\\\/|)(\\\\d+)(?:$|\\\\/|\\\\?)'\r\n            ].join(''));\r\n            id = href.href.match(vimeoRegex)[3];\r\n        }\r\n\r\n        if ((!id || !type) && forceVideo) {\r\n            id = href.href;\r\n            type = 'custom';\r\n        }\r\n\r\n        return id ? {\r\n            id: id, type: type, s: href.search.replace(/^\\?/, ''), useYoutubeNocookie: useYoutubeNocookie\r\n        } : false;\r\n    }\r\n\r\n    //create AddFotoramaVideoEvents widget\r\n    $.widget('mage.AddFotoramaVideoEvents', {\r\n        options: {\r\n            videoData: '',\r\n            videoSettings: '',\r\n            optionsVideoData: '',\r\n            dataMergeStrategy: 'replace'\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        onVimeoJSFramework: function () {},\r\n        defaultVideoData: [],\r\n        PV: 'product-video', // [CONST]\r\n        VU: 'video-unplayed',\r\n        PVLOADED: 'fotorama__product-video--loaded', // [CONST]\r\n        PVLOADING: 'fotorama__product-video--loading', // [CONST]\r\n        VID: 'video', // [CONST]\r\n        VI: 'vimeo', // [CONST]\r\n        FTVC: 'fotorama__video-close',\r\n        FTAR: 'fotorama__arr',\r\n        fotoramaSpinner: 'fotorama__spinner',\r\n        fotoramaSpinnerShow: 'fotorama__spinner--show',\r\n        TI: 'video-thumb-icon',\r\n        isFullscreen: false,\r\n        FTCF: '[data-gallery-role=\"fotorama__fullscreen-icon\"]',\r\n        Base: 0, //on check for video is base this setting become true if there is any video with base role\r\n        MobileMaxWidth: 768,\r\n        GP: 'gallery-placeholder', //gallery placeholder class is needed to find and erase <script> tag\r\n        videoData: null,\r\n        videoDataPlaceholder: [{\r\n            id: '',\r\n            isBase: true,\r\n            mediaType: 'image',\r\n            provider: ''\r\n        }],\r\n\r\n        /**\r\n         * Creates widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            $(this.element).data('gallery') ?\r\n                this._onGalleryLoaded() :\r\n                $(this.element).on('gallery:loaded', this._onGalleryLoaded.bind(this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initialize: function () {\r\n            if (!this.defaultVideoData.length) {\r\n                this.defaultVideoData = this.options.videoData;\r\n            }\r\n\r\n            // If product does not have images, no video data generated,\r\n            // but for configurable product we still need a video data, in case of 'prepend' gallery strategy.\r\n            if (!this.defaultVideoData.length && !this.options.videoData.length) {\r\n                this.defaultVideoData = this.options.videoData = this.videoDataPlaceholder;\r\n            }\r\n\r\n            this.clearEvents();\r\n\r\n            if (this._checkForVideoExist()) {\r\n                this._checkFullscreen();\r\n                this._listenForFullscreen();\r\n                this._isVideoBase();\r\n                this._initFotoramaVideo();\r\n                this._attachFotoramaEvents();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         */\r\n        _onGalleryLoaded: function () {\r\n            this.fotoramaItem = $(this.element).find('.fotorama-item');\r\n            this._initialize();\r\n        },\r\n\r\n        /**\r\n         * Clear gallery events to prevent duplicated calls.\r\n         *\r\n         * @private\r\n         */\r\n        clearEvents: function () {\r\n            if (this.fotoramaItem !== undefined) {\r\n                this.fotoramaItem.off(\r\n                    'fotorama:show.' + this.PV +\r\n                    ' fotorama:showend.' + this.PV +\r\n                    ' fotorama:fullscreenenter.' + this.PV +\r\n                    ' fotorama:fullscreenexit.' + this.PV\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _setOptions: function (options) {\r\n            if (options.videoData && options.videoData.length) {\r\n                this.options.videoData = options.videoData;\r\n            }\r\n\r\n            this._loadVideoData(options);\r\n            this._initialize();\r\n        },\r\n\r\n        /**\r\n         * Set video data for configurable product.\r\n         *\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _loadVideoData: function (options) {\r\n            if (options.selectedOption) {\r\n                if (options.dataMergeStrategy === 'prepend') {\r\n                    this.options.videoData = [].concat(\r\n                        this.options.optionsVideoData[options.selectedOption],\r\n                        this.defaultVideoData\r\n                    );\r\n                } else {\r\n                    this.options.videoData = this.options.optionsVideoData[options.selectedOption];\r\n                }\r\n            } else {\r\n                this.options.videoData = this.defaultVideoData;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _checkFullscreen: function () {\r\n            if (this.fotoramaItem.data('fotorama').fullScreen || false) {\r\n                this.isFullscreen = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _listenForFullscreen: function () {\r\n            this.fotoramaItem.on('fotorama:fullscreenenter.' + this.PV, $.proxy(function () {\r\n                this.isFullscreen = true;\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:fullscreenexit.' + this.PV, $.proxy(function () {\r\n                this.isFullscreen = false;\r\n                this._hideVideoArrows();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} inputData\r\n         * @param {bool} isJSON\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _createVideoData: function (inputData, isJSON) {\r\n            var videoData = [],\r\n                dataUrl,\r\n                tmpVideoData,\r\n                tmpInputData,\r\n                i;\r\n\r\n            if (isJSON) {\r\n                inputData = JSON.parse(inputData);\r\n            }\r\n\r\n            for (i = 0; i < inputData.length; i++) {\r\n                tmpInputData = inputData[i];\r\n                dataUrl = '';\r\n                tmpVideoData = {\r\n                    mediaType: '',\r\n                    isBase: '',\r\n                    id: '',\r\n                    provider: ''\r\n                };\r\n                tmpVideoData.mediaType = this.VID;\r\n\r\n                if (tmpInputData.mediaType !== 'external-video') {\r\n                    tmpVideoData.mediaType = tmpInputData.mediaType;\r\n                }\r\n\r\n                tmpVideoData.isBase = tmpInputData.isBase;\r\n\r\n                if (tmpInputData.videoUrl && tmpInputData.videoUrl !== null) {\r\n                    dataUrl = tmpInputData.videoUrl;\r\n                    dataUrl = parseURL(dataUrl);\r\n                    tmpVideoData.id = dataUrl.id;\r\n                    tmpVideoData.provider = dataUrl.type;\r\n                    tmpVideoData.videoUrl = tmpInputData.videoUrl;\r\n                    tmpVideoData.useYoutubeNocookie = dataUrl.useYoutubeNocookie;\r\n                }\r\n\r\n                videoData.push(tmpVideoData);\r\n            }\r\n\r\n            return videoData;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} fotorama\r\n         * @param {bool} isBase\r\n         * @private\r\n         */\r\n        _createCloseVideo: function (fotorama, isBase) {\r\n            var closeVideo;\r\n\r\n            this.fotoramaItem.find('.' + this.FTVC).remove();\r\n            this.fotoramaItem.append('<div class=\"' + this.FTVC + '\"></div>');\r\n            this.fotoramaItem.css('position', 'relative');\r\n            closeVideo = this.fotoramaItem.find('.' + this.FTVC);\r\n            this._closeVideoSetEvents(closeVideo, fotorama);\r\n\r\n            if (\r\n                isBase &&\r\n                this.options.videoData[fotorama.activeIndex].isBase &&\r\n                $(window).width() > this.MobileMaxWidth) {\r\n                this._showCloseVideo();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _hideCloseVideo: function () {\r\n            this.fotoramaItem\r\n                .find('.' + this.FTVC)\r\n                .removeClass('fotorama-show-control');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _showCloseVideo: function () {\r\n            this.fotoramaItem\r\n                .find('.' + this.FTVC)\r\n                .addClass('fotorama-show-control');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {jQuery} $closeVideo\r\n         * @param {jQuery} fotorama\r\n         * @private\r\n         */\r\n        _closeVideoSetEvents: function ($closeVideo, fotorama) {\r\n            $closeVideo.on('click', $.proxy(function () {\r\n                this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, true);\r\n                this._hideCloseVideo();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {Boolean}\r\n         * @private\r\n         */\r\n        _checkForVideoExist: function () {\r\n            var key, result, checker, videoSettings;\r\n\r\n            if (!this.options.videoData) {\r\n                return false;\r\n            }\r\n\r\n            if (!this.options.videoSettings) {\r\n                return false;\r\n            }\r\n\r\n            result = this._createVideoData(this.options.videoData, false);\r\n            checker = false;\r\n            videoSettings = this.options.videoSettings[0];\r\n            videoSettings.playIfBase = parseInt(videoSettings.playIfBase, 10);\r\n            videoSettings.showRelated = parseInt(videoSettings.showRelated, 10);\r\n            videoSettings.videoAutoRestart = parseInt(videoSettings.videoAutoRestart, 10);\r\n\r\n            for (key in result) {\r\n                if (result[key].mediaType === this.VID) {\r\n                    checker = true;\r\n                }\r\n            }\r\n\r\n            if (checker) {\r\n                this.options.videoData = result;\r\n            }\r\n\r\n            return checker;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _isVideoBase: function () {\r\n            var allVideoData = this.options.videoData,\r\n                videoItem,\r\n                allVideoDataKeys,\r\n                key,\r\n                i;\r\n\r\n            allVideoDataKeys = Object.keys(allVideoData);\r\n\r\n            for (i = 0; i < allVideoDataKeys.length; i++) {\r\n                key = allVideoDataKeys[i];\r\n                videoItem = allVideoData[key];\r\n\r\n                if (\r\n                    videoItem.mediaType === this.VID && videoItem.isBase &&\r\n                    this.options.videoSettings[0].playIfBase && allowBase\r\n                ) {\r\n                    this.Base = true;\r\n                    allowBase = false;\r\n                }\r\n            }\r\n\r\n            if (!this.isFullscreen) {\r\n                this._createCloseVideo(this.fotoramaItem.data('fotorama'), this.Base);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Event} e\r\n         * @private\r\n         */\r\n        _initFotoramaVideo: function (e) {\r\n            var fotorama = this.fotoramaItem.data('fotorama'),\r\n                thumbsParent,\r\n                thumbs,\r\n                t;\r\n\r\n            if (!fotorama.activeFrame.$navThumbFrame) {\r\n                this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (evt, fotoramaData) {\r\n                    $(fotoramaData.activeFrame.$stageFrame).removeAttr('href');\r\n                }, this));\r\n\r\n                this._startPrepareForPlayer(e, fotorama);\r\n\r\n                return null;\r\n            }\r\n\r\n            fotorama.data.map($.proxy(this._setItemType, this));\r\n            thumbsParent = fotorama.activeFrame.$navThumbFrame.parent();\r\n            thumbs = thumbsParent.find('.fotorama__nav__frame:visible');\r\n\r\n            for (t = 0; t < thumbs.length; t++) {\r\n                this._setThumbsIcon(thumbs.eq(t), t);\r\n                this._checkForVideo(e, fotorama, t + 1);\r\n            }\r\n\r\n            this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (evt, fotoramaData) {\r\n                $(fotoramaData.activeFrame.$stageFrame).removeAttr('href');\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} elem\r\n         * @param {Number} i\r\n         * @private\r\n         */\r\n        _setThumbsIcon: function (elem, i) {\r\n            var fotorama = this.fotoramaItem.data('fotorama');\r\n\r\n            if (fotorama.options.nav === 'dots' && elem.hasClass(this.TI)) {\r\n                elem.removeClass(this.TI);\r\n            }\r\n\r\n            if (this.options.videoData[i].mediaType === this.VID &&\r\n                fotorama.data[i].type ===  this.VID &&\r\n                fotorama.options.nav === 'thumbs') {\r\n                elem.addClass(this.TI);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Temporary solution with adding types for configurable product items\r\n         *\r\n         * @param {Object} item\r\n         * @param {Number} i\r\n         * @private\r\n         */\r\n        _setItemType: function (item, i) {\r\n            !item.type && (item.type = this.options.videoData[i].mediaType);\r\n        },\r\n\r\n        /**\r\n         * Attach\r\n         *\r\n         * @private\r\n         */\r\n        _attachFotoramaEvents: function () {\r\n            this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (e, fotorama) {\r\n                this._startPrepareForPlayer(e, fotorama);\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:show.' + this.PV, $.proxy(function (e, fotorama) {\r\n                this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, true);\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:fullscreenexit.' + this.PV, $.proxy(function (e, fotorama) {\r\n                fotorama.activeFrame.$stageFrame.find('.' + this.PV).remove();\r\n                this._startPrepareForPlayer(e, fotorama);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Start prepare for player\r\n         *\r\n         * @param {Event} e\r\n         * @param {jQuery} fotorama\r\n         * @private\r\n         */\r\n        _startPrepareForPlayer: function (e, fotorama) {\r\n            this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, false);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i - 1);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i + 1);\r\n        },\r\n\r\n        /**\r\n         * Check for video\r\n         *\r\n         * @param {Event} e\r\n         * @param {jQuery} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _checkForVideo: function (e, fotorama, number) {\r\n            var videoData = this.options.videoData[number - 1],\r\n                $image = fotorama.data[number - 1];\r\n\r\n            if ($image) {\r\n                !$image.type && this._setItemType($image, number - 1);\r\n\r\n                if ($image.type === 'image') {\r\n                    $image.$navThumbFrame && $image.$navThumbFrame.removeClass(this.TI);\r\n                    this._hideCloseVideo();\r\n\r\n                    return;\r\n                } else if ($image.$navThumbFrame && $image.type === 'video') {\r\n                    !$image.$navThumbFrame.hasClass(this.TI) && $image.$navThumbFrame.addClass(this.TI);\r\n                }\r\n\r\n                $image = $image.$stageFrame;\r\n            }\r\n\r\n            if ($image && videoData && videoData.mediaType === this.VID) {\r\n                $(fotorama.activeFrame.$stageFrame).removeAttr('href');\r\n                this._prepareForVideoContainer($image, videoData, fotorama, number);\r\n            }\r\n\r\n            if (this.isFullscreen && this.fotoramaItem.data('fotorama').activeFrame.i === number) {\r\n                this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Prepare for video container\r\n         *\r\n         * @param {jQuery} $image\r\n         * @param {Object} videoData\r\n         * @param {Object} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _prepareForVideoContainer: function ($image, videoData, fotorama, number) {\r\n            $image.addClass('fotorama-video-container').addClass(this.VU);\r\n            this._createVideoContainer(videoData, $image);\r\n            this._setVideoEvent($image, this.PV, fotorama, number);\r\n        },\r\n\r\n        /**\r\n         * Create video container\r\n         *\r\n         * @param {Object} videoData\r\n         * @param {jQuery} $image\r\n         * @private\r\n         */\r\n        _createVideoContainer: function (videoData, $image) {\r\n            var videoSettings;\r\n\r\n            videoSettings = this.options.videoSettings[0];\r\n            $image.find('.' + this.PV).remove();\r\n            $image.append(\r\n                '<div class=\"' +\r\n                this.PV +\r\n                '\" data-related=\"' +\r\n                videoSettings.showRelated +\r\n                '\" data-loop=\"' +\r\n                videoSettings.videoAutoRestart +\r\n                '\" data-type=\"' +\r\n                videoData.provider +\r\n                '\" data-code=\"' +\r\n                videoData.id +\r\n                '\"  data-youtubenocookie=\"' +\r\n                videoData.useYoutubeNocookie +\r\n                '\" data-width=\"100%\" data-height=\"100%\"></div>'\r\n            );\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} $image\r\n         * @param {Object} PV\r\n         * @param {Object} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _setVideoEvent: function ($image, PV, fotorama, number) {\r\n            $image.find('.magnify-lens').remove();\r\n            $image\r\n                .off('click tap', $.proxy(this._clickHandler, this))\r\n                .on('click tap', $.proxy(this._clickHandler, this));\r\n            this._handleBaseVideo(fotorama, number); //check for video is it base and handle it if it's base\r\n        },\r\n\r\n        /**\r\n         * Hides preview arrows above video player.\r\n         * @private\r\n         */\r\n        _hideVideoArrows: function () {\r\n            var arrows = $('.' + this.FTAR);\r\n\r\n            arrows.removeClass('fotorama__arr--shown');\r\n            arrows.removeClass('fotorama__arr--hidden');\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _showLoader: function () {\r\n            var spinner = this.fotoramaItem.find('.' + this.fotoramaSpinner);\r\n\r\n            spinner.addClass(this.fotoramaSpinnerShow);\r\n            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.addClass(this.PVLOADING);\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _hideLoader: function () {\r\n            var spinner = this.fotoramaItem.find('.' + this.fotoramaSpinner);\r\n\r\n            spinner.removeClass(this.fotoramaSpinnerShow);\r\n            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.removeClass(this.PVLOADING);\r\n        },\r\n\r\n        /**\r\n         * @param {Event} event\r\n         * @private\r\n         */\r\n        _clickHandler: function (event) {\r\n            var type;\r\n\r\n            if ($(event.target).hasClass(this.VU) && $(event.target).find('iframe').length === 0) {\r\n                $(event.target).removeClass(this.VU);\r\n                type = $(event.target).find('.' + this.PV).data('type');\r\n\r\n                if (type === this.VI) {\r\n                    $(event.target).find('.' + this.PV).productVideoLoader();\r\n                } else if (type === this.VI) {\r\n                    this._showLoader();\r\n                    this.onVimeoJSFramework = function () {\r\n                        $(event.target).find('.' + this.PV).productVideoLoader();\r\n                        this._hideLoader();\r\n                    }.bind(this);\r\n                } else {\r\n                    $(event.target).find('.' + this.PV).productVideoLoader();\r\n                }\r\n\r\n                $('.' + this.FTAR).addClass(this.isFullscreen ? 'fotorama__arr--shown' : 'fotorama__arr--hidden');\r\n                $('.' + this.FTVC).addClass('fotorama-show-control');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle base video\r\n         * @param {Object} fotorama\r\n         * @param {Number} srcNumber\r\n         * @private\r\n         */\r\n        _handleBaseVideo: function (fotorama, srcNumber) {\r\n            var videoData = this.options.videoData,\r\n                activeIndex = fotorama.activeIndex,\r\n                number = parseInt(srcNumber, 10),\r\n                activeIndexIsBase = videoData[activeIndex];\r\n\r\n            if (!this.Base) {\r\n                return;\r\n            }\r\n\r\n            if (activeIndexIsBase && number === 1 && $(window).width() > this.MobileMaxWidth) {\r\n                setTimeout($.proxy(function () {\r\n                    fotorama.requestFullScreen();\r\n                    this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n                    this.Base = false;\r\n                }, this), 50);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Destroy video player\r\n         * @param {jQuery} $wrapper\r\n         * @param {jQuery} current\r\n         * @param {bool} close\r\n         * @private\r\n         */\r\n        _unloadVideoPlayer: function ($wrapper, current, close) {\r\n            var self = this;\r\n\r\n            if (!$wrapper) {\r\n                return;\r\n            }\r\n\r\n            $wrapper.find('.' + this.PVLOADED).removeClass(this.PVLOADED);\r\n            this._hideLoader();\r\n\r\n            $wrapper.find('.' + this.PV).each(function () {\r\n                var $item = $(this).parent(),\r\n                    cloneVideoDiv,\r\n                    iframeElement = $(this).find('iframe'),\r\n                    currentIndex,\r\n                    itemIndex;\r\n\r\n                if (iframeElement.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                currentIndex = current.activeFrame.$stageFrame.index();\r\n                itemIndex = $item.index();\r\n\r\n                if (currentIndex === itemIndex && !close) {\r\n                    return;\r\n                }\r\n\r\n                if (currentIndex !== itemIndex && close) {\r\n                    return;\r\n                }\r\n\r\n                iframeElement.remove();\r\n                cloneVideoDiv = $(this).clone();\r\n                $(this).remove();\r\n                $item.append(cloneVideoDiv);\r\n                $item.addClass(self.VU);\r\n\r\n                self._hideCloseVideo();\r\n                self._hideVideoArrows();\r\n\r\n                if (self.isFullscreen && !self.fotoramaItem.data('fotorama').options.fullscreen.arrows) {\r\n                    if ($('.' + self.FTAR + '--prev').is(':focus') || $('.' + self.FTAR + '--next').is(':focus')) {\r\n                        $(self.FTCF).trigger('focus');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.AddFotoramaVideoEvents;\r\n});\r\n","Magento_ProductVideo/js/load-player.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n @version 0.0.1\r\n @requires jQuery & jQuery UI\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'vimeoWrapper'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var videoRegister = {\r\n        _register: {},\r\n\r\n        /**\r\n         * Checks, if api is already registered\r\n         *\r\n         * @param {String} api\r\n         * @returns {bool}\r\n         */\r\n        isRegistered: function (api) {\r\n            return this._register[api] !== undefined;\r\n        },\r\n\r\n        /**\r\n         * Checks, if api is loaded\r\n         *\r\n         * @param {String} api\r\n         * @returns {bool}\r\n         */\r\n        isLoaded: function (api) {\r\n            return this._register[api] !== undefined && this._register[api] === true;\r\n        },\r\n\r\n        /**\r\n         * Register new video api\r\n         * @param {String} api\r\n         * @param {bool} loaded\r\n         */\r\n        register: function (api, loaded) {\r\n            loaded = loaded || false;\r\n            this._register[api] = loaded;\r\n        }\r\n    };\r\n\r\n    $.widget('mage.productVideoLoader', {\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            switch (this.element.data('type')) {\r\n                case 'youtube':\r\n                    this.element.videoYoutube();\r\n                    this._player = this.element.data('mageVideoYoutube');\r\n                    break;\r\n\r\n                case 'vimeo':\r\n                    this.element.videoVimeo();\r\n                    this._player = this.element.data('mageVideoVimeo');\r\n                    break;\r\n                default:\r\n                    throw {\r\n                        name: 'Video Error',\r\n                        message: 'Unknown video type',\r\n\r\n                        /**\r\n                         * join name with message\r\n                         */\r\n                        toString: function () {\r\n                            return this.name + ': ' + this.message;\r\n                        }\r\n                    };\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes variables\r\n         * @private\r\n         */\r\n        _initialize: function () {\r\n            this._params = this.element.data('params') || {};\r\n            this._code = this.element.data('code');\r\n            this._width = this.element.data('width');\r\n            this._height = this.element.data('height');\r\n            this._autoplay = !!this.element.data('autoplay');\r\n            this._playing = this._autoplay || false;\r\n            this._loop = this.element.data('loop');\r\n            this._rel = this.element.data('related');\r\n            this.useYoutubeNocookie = this.element.data('youtubenocookie') || false;\r\n\r\n            this._responsive = this.element.data('responsive') !== false;\r\n\r\n            if (this._responsive === true) {\r\n                this.element.addClass('responsive');\r\n            }\r\n\r\n            this._calculateRatio();\r\n        },\r\n\r\n        /**\r\n         * Abstract play command\r\n         */\r\n        play: function () {\r\n            this._player.play();\r\n        },\r\n\r\n        /**\r\n         * Abstract pause command\r\n         */\r\n        pause: function () {\r\n            this._player.pause();\r\n        },\r\n\r\n        /**\r\n         * Abstract stop command\r\n         */\r\n        stop: function () {\r\n            this._player.stop();\r\n        },\r\n\r\n        /**\r\n         * Abstract playing command\r\n         */\r\n        playing: function () {\r\n            return this._player.playing();\r\n        },\r\n\r\n        /**\r\n         * Calculates ratio for responsive videos\r\n         * @private\r\n         */\r\n        _calculateRatio: function () {\r\n            if (!this._responsive) {\r\n                return;\r\n            }\r\n            this.element.css('paddingBottom', this._height / this._width * 100 + '%');\r\n        }\r\n    });\r\n\r\n    $.widget('mage.videoYoutube', $.mage.productVideoLoader, {\r\n\r\n        /**\r\n         * Initialization of the Youtube widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            this._initialize();\r\n\r\n            this.element.append('<div></div>');\r\n\r\n            this._on(window, {\r\n\r\n                /**\r\n                 * Handle event\r\n                 */\r\n                'youtubeapiready': function () {\r\n                    var host = 'https://www.youtube.com';\r\n\r\n                    if (self.useYoutubeNocookie) {\r\n                        host = 'https://www.youtube-nocookie.com';\r\n                    }\r\n\r\n                    if (self._player !== undefined) {\r\n                        return;\r\n                    }\r\n                    self._autoplay = true;\r\n\r\n                    if (self._autoplay) {\r\n                        self._params.autoplay = 1;\r\n                    }\r\n\r\n                    if (!self._rel) {\r\n                        self._params.rel = 0;\r\n                    }\r\n\r\n                    self._player = new window.YT.Player(self.element.children(':first')[0], {\r\n                        height: self._height,\r\n                        width: self._width,\r\n                        videoId: self._code,\r\n                        playerVars: self._params,\r\n                        host: host,\r\n                        events: {\r\n\r\n                            /**\r\n                             * Get duration\r\n                             */\r\n                            'onReady': function onPlayerReady() {\r\n                                self._player.getDuration();\r\n                                self.element.closest('.fotorama__stage__frame')\r\n                                    .addClass('fotorama__product-video--loaded');\r\n                            },\r\n\r\n                            /**\r\n                             * Event observer\r\n                             */\r\n                            onStateChange: function (data) {\r\n                                switch (window.parseInt(data.data, 10)) {\r\n                                    case 1:\r\n                                        self._playing = true;\r\n                                        break;\r\n                                    default:\r\n                                        self._playing = false;\r\n                                        break;\r\n                                }\r\n\r\n                                self._trigger('statechange', {}, data);\r\n\r\n                                if (data.data === window.YT.PlayerState.ENDED && self._loop) {\r\n                                    self._player.playVideo();\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    });\r\n                }\r\n            });\r\n\r\n            this._loadApi();\r\n        },\r\n\r\n        /**\r\n         * Loads Youtube API and triggers event, when loaded\r\n         * @private\r\n         */\r\n        _loadApi: function () {\r\n            var element,\r\n                scriptTag;\r\n\r\n            if (videoRegister.isRegistered('youtube')) {\r\n                if (videoRegister.isLoaded('youtube')) {\r\n                    $(window).trigger('youtubeapiready');\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            // if script already loaded by other library\r\n            if (window.YT) {\r\n                videoRegister.register('youtube', true);\r\n                $(window).trigger('youtubeapiready');\r\n\r\n                return;\r\n            }\r\n            videoRegister.register('youtube');\r\n\r\n            element = document.createElement('script');\r\n            scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n            element.async = true;\r\n            element.src = 'https://www.youtube.com/iframe_api';\r\n            scriptTag.parentNode.insertBefore(element, scriptTag);\r\n\r\n            /**\r\n             * Event observe and handle\r\n             */\r\n            window.onYouTubeIframeAPIReady = function () {\r\n                $(window).trigger('youtubeapiready');\r\n                videoRegister.register('youtube', true);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Play command for Youtube\r\n         */\r\n        play: function () {\r\n            this._player.playVideo();\r\n            this._playing = true;\r\n        },\r\n\r\n        /**\r\n         * Pause command for Youtube\r\n         */\r\n        pause: function () {\r\n            this._player.pauseVideo();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Stop command for Youtube\r\n         */\r\n        stop: function () {\r\n            this._player.stopVideo();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Playing command for Youtube\r\n         */\r\n        playing: function () {\r\n            return this._playing;\r\n        },\r\n\r\n        /**\r\n         * stops and unloads player\r\n         * @private\r\n         */\r\n        _destroy: function () {\r\n            this.stop();\r\n        }\r\n    });\r\n\r\n    $.widget('mage.videoVimeo', $.mage.productVideoLoader, {\r\n\r\n        /**\r\n         * Initialize the Vimeo widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var timestamp,\r\n                additionalParams = '',\r\n                src,\r\n                id;\r\n\r\n            this._initialize();\r\n            timestamp = new Date().getTime();\r\n            this._autoplay = true;\r\n\r\n            if (this._autoplay) {\r\n                additionalParams += '&autoplay=1';\r\n            }\r\n\r\n            if (this._loop) {\r\n                additionalParams += '&loop=1';\r\n            }\r\n            src = 'https://player.vimeo.com/video/' +\r\n                this._code + '?api=1&player_id=vimeo' +\r\n                this._code +\r\n                timestamp +\r\n                additionalParams;\r\n            id = 'vimeo' + this._code + timestamp;\r\n            this.element.append(\r\n                $('<iframe></iframe>')\r\n                    .attr('frameborder', 0)\r\n                    .attr('id', id)\r\n                    .attr('width', this._width)\r\n                    .attr('height', this._height)\r\n                    .attr('src', src)\r\n                    .attr('webkitallowfullscreen', '')\r\n                    .attr('mozallowfullscreen', '')\r\n                    .attr('allowfullscreen', '')\r\n                    .attr('referrerPolicy', 'origin')\r\n                    .attr('allow', 'autoplay')\r\n            );\r\n\r\n            /* eslint-disable no-undef */\r\n            this._player = new Vimeo.Player(this.element.children(':first')[0]);\r\n\r\n            this._player.ready().then(function () {\r\n                $('#' + id).closest('.fotorama__stage__frame').addClass('fotorama__product-video--loaded');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Play command for Vimeo\r\n         */\r\n        play: function () {\r\n            this._player.play();\r\n            this._playing = true;\r\n        },\r\n\r\n        /**\r\n         * Pause command for Vimeo\r\n         */\r\n        pause: function () {\r\n            this._player.pause();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Stop command for Vimeo\r\n         */\r\n        stop: function () {\r\n            this._player.unload();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Playing command for Vimeo\r\n         */\r\n        playing: function () {\r\n            return this._playing;\r\n        }\r\n    });\r\n});\r\n","Magento_ReCaptchaCheckout/js/webapiReCaptchaRegistry-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (originalFunction) {\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n       originalFunction.addListener = function (id , func) {\r\n            this._listeners[id] = func;\r\n       };\r\n\r\n        return originalFunction;\r\n    };\r\n\r\n});\r\n","Magento_ReCaptchaCheckout/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* eslint-disable max-nested-callbacks */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry'\r\n], function ($, wrapper, recaptchaRegistry) {\r\n    'use strict';\r\n\r\n    return function (placeOrder) {\r\n        return wrapper.wrap(placeOrder, function (originalAction, serviceUrl, payload, messageContainer) {\r\n            var recaptchaDeferred;\r\n\r\n            if (recaptchaRegistry.triggers.hasOwnProperty('recaptcha-checkout-place-order')) {\r\n                //ReCaptcha is present for checkout\r\n                recaptchaDeferred = $.Deferred();\r\n                recaptchaRegistry.addListener('recaptcha-checkout-place-order', function (token) {\r\n                    //Add reCaptcha value to place-order request and resolve deferred with the API call results\r\n                    payload.xReCaptchaValue = token;\r\n                    originalAction(serviceUrl, payload, messageContainer).done(function () {\r\n                        recaptchaDeferred.resolve.apply(recaptchaDeferred, arguments);\r\n                    }).fail(function () {\r\n                        recaptchaDeferred.reject.apply(recaptchaDeferred, arguments);\r\n                    });\r\n                });\r\n                //Trigger ReCaptcha validation\r\n                recaptchaRegistry.triggers['recaptcha-checkout-place-order']();\r\n\r\n                if (\r\n                    !recaptchaRegistry._isInvisibleType.hasOwnProperty('recaptcha-checkout-place-order') ||\r\n                    recaptchaRegistry._isInvisibleType['recaptcha-checkout-place-order'] === false\r\n                ) {\r\n                    //remove listener so that place order action is only triggered by the 'Place Order' button\r\n                    recaptchaRegistry.removeListener('recaptcha-checkout-place-order');\r\n                }\r\n\r\n                return recaptchaDeferred;\r\n            }\r\n\r\n            //No ReCaptcha, just sending the request\r\n            return originalAction(serviceUrl, payload, messageContainer);\r\n        });\r\n    };\r\n});\r\n","Magento_ReCaptchaCheckoutSalesRule/js/checkout-sales-rule.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* global grecaptcha */\r\ndefine(\r\n    [\r\n        'Magento_ReCaptchaWebapiUi/js/webapiReCaptcha',\r\n        'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry',\r\n        'jquery',\r\n        'Magento_SalesRule/js/action/set-coupon-code',\r\n        'Magento_SalesRule/js/action/cancel-coupon',\r\n        'Magento_Checkout/js/model/quote',\r\n        'ko'\r\n    ], function (Component, recaptchaRegistry, $, setCouponCodeAction, cancelCouponAction, quote, ko) {\r\n        'use strict';\r\n\r\n        var totals = quote.getTotals(),\r\n            couponCode = ko.observable(null),\r\n            isApplied;\r\n\r\n        if (totals()) {\r\n            couponCode(totals()['coupon_code']);\r\n        }\r\n        //Captcha can only be required for adding a coupon so we need to know if one was added already.\r\n        isApplied = ko.observable(couponCode() != null);\r\n\r\n        return Component.extend({\r\n\r\n            /**\r\n             * Initialize parent form.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var self = this,\r\n                    xRecaptchaValue,\r\n                    captchaId = this.getReCaptchaId();\r\n\r\n                this._super();\r\n\r\n                if (couponCode() != null) {\r\n                    if (isApplied) {\r\n                        self.validateReCaptcha(true);\r\n                        $('#' + captchaId).hide();\r\n                    }\r\n                }\r\n\r\n                if (recaptchaRegistry.triggers.hasOwnProperty('recaptcha-checkout-coupon-apply')) {\r\n                    recaptchaRegistry.addListener('recaptcha-checkout-coupon-apply', function (token) {\r\n                        //Add reCaptcha value to coupon request\r\n                        xRecaptchaValue = token;\r\n                    });\r\n                }\r\n\r\n                setCouponCodeAction.registerDataModifier(function (headers) {\r\n                    headers['X-ReCaptcha'] = xRecaptchaValue;\r\n                });\r\n\r\n                if (self.getIsInvisibleRecaptcha()) {\r\n                    grecaptcha.execute(widgetId);\r\n                    self.validateReCaptcha(true);\r\n                }\r\n                //Refresh reCaptcha after failed request.\r\n                setCouponCodeAction.registerFailCallback(function () {\r\n                    if (self.getIsInvisibleRecaptcha()) {\r\n                        grecaptcha.execute(widgetId);\r\n                        self.validateReCaptcha(true);\r\n                    } else {\r\n                        self.validateReCaptcha(false);\r\n                        grecaptcha.reset(widgetId);\r\n                        $('#' + captchaId).show();\r\n                    }\r\n                });\r\n                //Hide captcha when a coupon has been applied.\r\n                setCouponCodeAction.registerSuccessCallback(function () {\r\n                    self.validateReCaptcha(true);\r\n                    $('#' + captchaId).hide();\r\n                });\r\n                //Show captcha again if it was canceled.\r\n                cancelCouponAction.registerSuccessCallback(function () {\r\n                    self.validateReCaptcha(false);\r\n                    grecaptcha.reset(widgetId);\r\n                    $('#' + captchaId).show();\r\n                });\r\n            }\r\n        });\r\n    });\r\n","Magento_ReCaptchaFrontendUi/js/nonInlineReCaptchaRenderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global grecaptcha */\r\ndefine([\r\n    'jquery',\r\n    'jquery/z-index'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var reCaptchaEntities = [],\r\n        initialized = false,\r\n        rendererRecaptchaId = 'recaptcha-invisible',\r\n        rendererReCaptcha = null;\r\n\r\n    return {\r\n        /**\r\n         * Add reCaptcha entity to checklist.\r\n         *\r\n         * @param {jQuery} reCaptchaEntity\r\n         * @param {Object} parameters\r\n         */\r\n        add: function (reCaptchaEntity, parameters) {\r\n            if (!initialized) {\r\n                this.init();\r\n                grecaptcha.render(rendererRecaptchaId, parameters);\r\n                setInterval(this.resolveVisibility, 100);\r\n                initialized = true;\r\n            }\r\n\r\n            reCaptchaEntities.push(reCaptchaEntity);\r\n        },\r\n\r\n        /**\r\n         * Show additional reCaptcha instance if any other should be visible, otherwise hide it.\r\n         */\r\n        resolveVisibility: function () {\r\n            reCaptchaEntities.some(function (entity) {\r\n                return entity.is(':visible') &&\r\n                    // 900 is some magic z-index value of modal popups.\r\n                    (entity.closest('[data-role=\\'modal\\']').length === 0 || entity.zIndex() > 900);\r\n            }) ? rendererReCaptcha.show() : rendererReCaptcha.hide();\r\n        },\r\n\r\n        /**\r\n         * Initialize additional reCaptcha instance.\r\n         */\r\n        init: function () {\r\n            rendererReCaptcha = $('<div/>', {\r\n                'id': rendererRecaptchaId\r\n            });\r\n            rendererReCaptcha.hide();\r\n            $('body').append(rendererReCaptcha);\r\n        }\r\n    };\r\n});\r\n","Magento_ReCaptchaFrontendUi/js/reCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global grecaptcha */\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'jquery',\r\n        'ko',\r\n        'underscore',\r\n        'Magento_ReCaptchaFrontendUi/js/registry',\r\n        'Magento_ReCaptchaFrontendUi/js/reCaptchaScriptLoader',\r\n        'Magento_ReCaptchaFrontendUi/js/nonInlineReCaptchaRenderer'\r\n    ], function (Component, $, ko, _, registry, reCaptchaLoader, nonInlineReCaptchaRenderer) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n\r\n            defaults: {\r\n                template: 'Magento_ReCaptchaFrontendUi/reCaptcha',\r\n                reCaptchaId: 'recaptcha'\r\n            },\r\n\r\n            /**\r\n             * @inheritdoc\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n                this._loadApi();\r\n            },\r\n\r\n            /**\r\n             * Loads recaptchaapi API and triggers event, when loaded\r\n             * @private\r\n             */\r\n            _loadApi: function () {\r\n                if (this._isApiRegistered !== undefined) {\r\n                    if (this._isApiRegistered === true) {\r\n                        $(window).trigger('recaptchaapiready');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n                this._isApiRegistered = false;\r\n\r\n                // global function\r\n                window.globalOnRecaptchaOnLoadCallback = function () {\r\n                    this._isApiRegistered = true;\r\n                    $(window).trigger('recaptchaapiready');\r\n                }.bind(this);\r\n\r\n                reCaptchaLoader.addReCaptchaScriptTag();\r\n            },\r\n\r\n            /**\r\n             * Checking that reCAPTCHA is invisible type\r\n             * @returns {Boolean}\r\n             */\r\n            getIsInvisibleRecaptcha: function () {\r\n                if (this.settings ===\r\n\r\n                    void 0) {\r\n                    return false;\r\n                }\r\n\r\n                return this.settings.invisible;\r\n            },\r\n\r\n            /**\r\n             * reCAPTCHA callback\r\n             * @param {String} token\r\n             */\r\n            reCaptchaCallback: function (token) {\r\n                if (this.getIsInvisibleRecaptcha()) {\r\n                    this.tokenField.value = token;\r\n                    this.$parentForm.submit();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Initialize reCAPTCHA after first rendering\r\n             */\r\n            initCaptcha: function () {\r\n                var $parentForm,\r\n                    $wrapper,\r\n                    $reCaptcha,\r\n                    widgetId,\r\n                    parameters;\r\n\r\n                if (this.captchaInitialized || this.settings ===\r\n\r\n                    void 0) {\r\n                    return;\r\n                }\r\n\r\n                this.captchaInitialized = true;\r\n\r\n                /*\r\n                 * Workaround for data-bind issue:\r\n                 * We cannot use data-bind to link a dynamic id to our component\r\n                 * See:\r\n                 * https://stackoverflow.com/questions/46657573/recaptcha-the-bind-parameter-must-be-an-element-or-id\r\n                 *\r\n                 * We create a wrapper element with a wrapping id and we inject the real ID with jQuery.\r\n                 * In this way we have no data-bind attribute at all in our reCAPTCHA div\r\n                 */\r\n                $wrapper = $('#' + this.getReCaptchaId() + '-wrapper');\r\n                $reCaptcha = $wrapper.find('.g-recaptcha');\r\n                $reCaptcha.attr('id', this.getReCaptchaId());\r\n\r\n                $parentForm = $wrapper.parents('form');\r\n\r\n                if (this.settings === undefined) {\r\n\r\n                    return;\r\n                }\r\n\r\n                parameters = _.extend(\r\n                    {\r\n                        'callback': function (token) { // jscs:ignore jsDoc\r\n                            this.reCaptchaCallback(token);\r\n                            this.validateReCaptcha(true);\r\n                        }.bind(this),\r\n                        'expired-callback': function () {\r\n                            this.validateReCaptcha(false);\r\n                        }.bind(this)\r\n                    },\r\n                    this.settings.rendering\r\n                );\r\n\r\n                if (parameters.size === 'invisible' && parameters.badge !== 'inline') {\r\n                    nonInlineReCaptchaRenderer.add($reCaptcha, parameters);\r\n                }\r\n\r\n                // eslint-disable-next-line no-undef\r\n                widgetId = grecaptcha.render(this.getReCaptchaId(), parameters);\r\n                this.initParentForm($parentForm, widgetId);\r\n\r\n                registry.ids.push(this.getReCaptchaId());\r\n                registry.captchaList.push(widgetId);\r\n                registry.tokenFields.push(this.tokenField);\r\n\r\n            },\r\n\r\n            /**\r\n             * Initialize parent form.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var listeners;\r\n\r\n                if (this.getIsInvisibleRecaptcha() && parentForm.length > 0) {\r\n                    parentForm.submit(function (event) {\r\n                        if (!this.tokenField.value) {\r\n                            // eslint-disable-next-line no-undef\r\n                            grecaptcha.execute(widgetId);\r\n                            event.preventDefault(event);\r\n                            event.stopImmediatePropagation();\r\n                        }\r\n                    }.bind(this));\r\n\r\n                    // Move our (last) handler topmost. We need this to avoid submit bindings with ko.\r\n                    listeners = $._data(parentForm[0], 'events').submit;\r\n                    listeners.unshift(listeners.pop());\r\n\r\n                    // Create a virtual token field\r\n                    this.tokenField = $('<input type=\"text\" name=\"token\" style=\"display: none\" />')[0];\r\n                    this.$parentForm = parentForm;\r\n                    parentForm.append(this.tokenField);\r\n                } else {\r\n                    this.tokenField = null;\r\n                }\r\n                if ($('#send2').length > 0) {$('#send2').prop('disabled', false);}\r\n            },\r\n\r\n            /**\r\n             * Validates reCAPTCHA\r\n             * @param {*} state\r\n             * @returns {jQuery}\r\n             */\r\n            validateReCaptcha: function (state) {\r\n                if (!this.getIsInvisibleRecaptcha()) {\r\n                    return $(document).find('input[type=checkbox].required-captcha').prop('checked', state);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Render reCAPTCHA\r\n             */\r\n            renderReCaptcha: function () {\r\n                if (window.grecaptcha && window.grecaptcha.render) { // Check if reCAPTCHA is already loaded\r\n                    this.initCaptcha();\r\n                } else { // Wait for reCAPTCHA to be loaded\r\n                    $(window).on('recaptchaapiready', function () {\r\n                        this.initCaptcha();\r\n                    }.bind(this));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Get reCAPTCHA ID\r\n             * @returns {String}\r\n             */\r\n            getReCaptchaId: function () {\r\n                return this.reCaptchaId;\r\n            }\r\n        });\r\n    });\r\n","Magento_ReCaptchaFrontendUi/js/reCaptchaScriptLoader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var scriptTagAdded = false;\r\n\r\n    return {\r\n        /**\r\n         * Add script tag. Script tag should be added once\r\n         */\r\n        addReCaptchaScriptTag: function () {\r\n            var element, scriptTag;\r\n\r\n            if (!scriptTagAdded) {\r\n                element = document.createElement('script');\r\n                scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n                element.async = true;\r\n                element.src = 'https://www.google.com/recaptcha/api.js' +\r\n                    '?onload=globalOnRecaptchaOnLoadCallback&render=explicit';\r\n\r\n                scriptTag.parentNode.insertBefore(element, scriptTag);\r\n                scriptTagAdded = true;\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_ReCaptchaFrontendUi/js/registry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        ids: ko.observableArray([]),\r\n        captchaList: ko.observableArray([]),\r\n        tokenFields: ko.observableArray([])\r\n    };\r\n});\r\n","Magento_ReCaptchaFrontendUi/js/ui-messages-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['Magento_ReCaptchaFrontendUi/js/registry'], function (registry) {\r\n    'use strict';\r\n\r\n    return function (originalComponent) {\r\n        return originalComponent.extend({\r\n            /**\r\n             * Initialize reset on messages\r\n             * @returns {initialize}\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n\r\n                this.messageContainer.errorMessages.subscribe(function () {\r\n                    var\r\n                        i,\r\n                        captchaList = registry.captchaList(),\r\n                        tokenFieldsList = registry.tokenFields();\r\n\r\n                    for (i = 0; i < captchaList.length; i++) {\r\n                        // eslint-disable-next-line no-undef\r\n                        grecaptcha.reset(captchaList[i]);\r\n\r\n                        if (tokenFieldsList[i]) {\r\n                            tokenFieldsList[i].value = '';\r\n                        }\r\n                    }\r\n                }, null, 'arrayChange');\r\n\r\n                return this;\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_ReCaptchaPaypal/js/payflowpro-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/payment/additional-validators'\r\n], function ($, additionalValidators) {\r\n    'use strict';\r\n\r\n    return function (originalComponent) {\r\n        return originalComponent.extend({\r\n            /**\r\n             * Initializes reCaptcha\r\n             */\r\n            placeOrder: function () {\r\n                var original = this._super.bind(this),\r\n                    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n                    isEnabledForPaypal = window.checkoutConfig.recaptcha_paypal,\r\n                    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n                    paymentFormSelector = $('#co-payment-form'),\r\n                    startEvent = 'captcha:startExecute',\r\n                    endEvent = 'captcha:endExecute';\r\n\r\n                if (!this.validateHandler() || !additionalValidators.validate() || !isEnabledForPaypal) {\r\n                    return original();\r\n                }\r\n\r\n                paymentFormSelector.off(endEvent).on(endEvent, function () {\r\n                    original();\r\n                    paymentFormSelector.off(endEvent);\r\n                });\r\n\r\n                paymentFormSelector.trigger(startEvent);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_ReCaptchaPaypal/js/reCaptchaPaypal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(\r\n    [\r\n        'Magento_ReCaptchaFrontendUi/js/reCaptcha',\r\n        'jquery'\r\n    ],\r\n    function (Component, $) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n\r\n            /**\r\n             * Recaptcha callback\r\n             * @param {String} token\r\n             */\r\n            reCaptchaCallback: function (token) {\r\n                this.tokenField.value = token;\r\n                this.$parentForm.trigger('captcha:endExecute');\r\n            },\r\n\r\n            /**\r\n             * Initialize parent form.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var me = this;\r\n\r\n                parentForm.on('captcha:startExecute', function (event) {\r\n                    if (!me.tokenField.value && me.getIsInvisibleRecaptcha()) {\r\n                        // eslint-disable-next-line no-undef\r\n                        grecaptcha.execute(widgetId);\r\n                        event.preventDefault(event);\r\n                        event.stopImmediatePropagation();\r\n                    } else {\r\n                        me.$parentForm.trigger('captcha:endExecute');\r\n                    }\r\n                });\r\n\r\n                // Create a virtual token field\r\n                this.tokenField = $('<input type=\"text\" name=\"token\" style=\"display: none\" />')[0];\r\n                this.$parentForm = parentForm;\r\n                parentForm.append(this.tokenField);\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_ReCaptchaStorePickup/js/reCaptchaStorePickup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['Magento_ReCaptchaFrontendUi/js/reCaptcha'], function (reCaptcha) {\r\n    'use strict';\r\n\r\n    return reCaptcha.extend({\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        renderReCaptcha: function () {\r\n            this.captchaInitialized = false;\r\n            this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_ReCaptchaWebapiUi/js/jquery-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n// jscs:disable requireDotNotation\r\n\r\ndefine([\r\n    'mage/utils/wrapper'\r\n], function (wrapper) {\r\n    'use strict';\r\n\r\n    return function (jQuery) {\r\n        jQuery.ajax = wrapper.wrapSuper(jQuery.ajax, function () {\r\n            //Moving ReCaptcha value from payload to the header for requests to web API\r\n            var settings,\r\n                payload;\r\n\r\n            if (arguments.length !== 0) {\r\n                settings = arguments.length === 1 ? arguments[0] : arguments[1];\r\n            }\r\n\r\n            if (settings && settings.hasOwnProperty('data')) {\r\n                //The request has a body, trying to parse JSON data\r\n                try {\r\n                    payload = JSON.parse(settings.data);\r\n                } catch (e) {\r\n                    //Not JSON\r\n                }\r\n            }\r\n\r\n            if (payload && payload.hasOwnProperty('xReCaptchaValue')) {\r\n                if (!settings.hasOwnProperty('headers')) {\r\n                    settings.headers = {};\r\n                }\r\n                settings.headers['X-ReCaptcha'] = payload.xReCaptchaValue;\r\n                delete payload['xReCaptchaValue'];\r\n                settings.data = JSON.stringify(payload);\r\n            }\r\n\r\n            return this._super.apply(this, arguments);\r\n        });\r\n\r\n        return jQuery;\r\n    };\r\n});\r\n","Magento_ReCaptchaWebapiUi/js/webapiReCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n// jscs:disable jsDoc\r\n\r\n/* global grecaptcha */\r\ndefine(\r\n    [\r\n        'Magento_ReCaptchaFrontendUi/js/reCaptcha',\r\n        'Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry'\r\n    ],\r\n    function (Component, registry) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                autoTrigger: false\r\n            },\r\n\r\n            /**\r\n             * Provide the token to the registry.\r\n             *\r\n             * @param {String} token\r\n             */\r\n            reCaptchaCallback: function (token) {\r\n                //Make the token retrievable in other UI components.\r\n                registry.tokens[this.getReCaptchaId()] = token;\r\n\r\n                if (typeof registry._listeners[this.getReCaptchaId()] !== 'undefined') {\r\n                    registry._listeners[this.getReCaptchaId()](token);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Register this ReCaptcha.\r\n             *\r\n             * @param {Object} parentForm\r\n             * @param {String} widgetId\r\n             */\r\n            initParentForm: function (parentForm, widgetId) {\r\n                var self = this,\r\n                    trigger;\r\n\r\n                trigger = function () {\r\n                    self.reCaptchaCallback(grecaptcha.getResponse(widgetId));\r\n                };\r\n                registry._isInvisibleType[this.getReCaptchaId()] = false;\r\n\r\n                if (this.getIsInvisibleRecaptcha()) {\r\n                    trigger = function () {\r\n                        grecaptcha.execute(widgetId);\r\n                    };\r\n                    registry._isInvisibleType[this.getReCaptchaId()] = true;\r\n                }\r\n\r\n                if (this.autoTrigger) {\r\n                    //Validate ReCaptcha when initiated\r\n                    trigger();\r\n                    registry.triggers[this.getReCaptchaId()] = new Function();\r\n                } else {\r\n                    registry.triggers[this.getReCaptchaId()] = trigger;\r\n                }\r\n                this.tokenField = null;\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * recaptchaId: token map.\r\n         *\r\n         * Tokens for already verified recaptcha.\r\n         */\r\n        tokens: {},\r\n\r\n        /**\r\n         * recaptchaId: triggerFn map.\r\n         *\r\n         * Call a trigger to initiate a recaptcha verification.\r\n         */\r\n        triggers: {},\r\n\r\n        /**\r\n         * recaptchaId: callback map\r\n         */\r\n        _listeners: {},\r\n\r\n        /**\r\n         * recaptchaId: bool map\r\n         */\r\n        _isInvisibleType: {},\r\n\r\n        /**\r\n         * Add a listener to when the ReCaptcha finishes verification\r\n         * @param {String} id - ReCaptchaId\r\n         * @param {Function} func - Will be called back with the token\r\n         */\r\n        addListener: function (id, func) {\r\n            if (this.tokens.hasOwnProperty(id)) {\r\n                func(this.tokens[id]);\r\n            } else {\r\n                this._listeners[id] = func;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove a listener\r\n         *\r\n         * @param id\r\n         */\r\n        removeListener: function (id) {\r\n            this._listeners[id] = undefined;\r\n        }\r\n    };\r\n});\r\n","Magento_Reports/js/recently-viewed.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.recentlyViewedProducts', {\r\n        options: {\r\n            localStorageKey: 'recently-viewed-products',\r\n            productBlock: '#widget_viewed_item',\r\n            viewedContainer: 'ol'\r\n        },\r\n\r\n        /**\r\n         * Bind events to the appropriate handlers.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var productHtml = $(this.options.productBlock).html(),\r\n                productSku = $(this.options.productBlock).data('sku'),\r\n                products = JSON.parse(window.localStorage.getItem(this.options.localStorageKey)),\r\n                productsLength, maximum, showed, index;\r\n\r\n            if (products) {\r\n                productsLength = products.sku.length;\r\n                maximum = $(this.element).data('count');\r\n                showed = 0;\r\n\r\n                for (index = 0; index <= productsLength; index++) {\r\n                    if (products.sku[index] == productSku || showed >= maximum) { //eslint-disable-line\r\n                        products.sku.splice(index, 1);\r\n                        products.html.splice(index, 1);\r\n                    } else {\r\n                        $(this.element).find(this.options.viewedContainer).append(products.html[index]);\r\n                        $(this.element).show();\r\n                        showed++;\r\n                    }\r\n                }\r\n                $(this.element).find(this.options.productBlock).show();\r\n            } else {\r\n                products = {};\r\n                products.sku = [];\r\n                products.html = [];\r\n            }\r\n            products.sku.unshift(productSku);\r\n            products.html.unshift(productHtml);\r\n            window.localStorage.setItem(this.options.localStorageKey, JSON.stringify(products));\r\n        }\r\n    });\r\n\r\n    return $.mage.recentlyViewedProducts;\r\n});\r\n","Magento_Review/js/error-placement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).mage('validation', {\r\n            /** @inheritdoc */\r\n            errorPlacement: function (error, el) {\r\n\r\n                if (el.parents('#product-review-table').length) {\r\n                    $('#product-review-table').siblings(this.errorElement + '.' + this.errorClass).remove();\r\n                    $('#product-review-table').after(error);\r\n                } else {\r\n                    el.after(error);\r\n                }\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/process-reviews.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'tabs',\r\n    'collapsible'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @param {*} fromPages\r\n     */\r\n    function processReviews(url, fromPages) {\r\n        $.ajax({\r\n            url: url,\r\n            cache: true,\r\n            dataType: 'html',\r\n            showLoader: false,\r\n            loaderContext: $('.product.data.items')\r\n        }).done(function (data) {\r\n            $('#product-review-container').html(data).trigger('contentUpdated'); \r\n            if($('.product.info.detailed').hasClass('vertical')) {\r\n              $('#product-review-container').parent().parent().css(\"min-height\",$('#product-review-container').parent().outerHeight()+\"px\");\r\n            }\r\n\r\n            $('[data-role=\"product-review\"] .pages a').each(function (index, element) {\r\n                $(element).on('click', function (event) { //eslint-disable-line max-nested-callbacks\r\n                    processReviews($(element).attr('href'), true);\r\n                    event.preventDefault();\r\n                });\r\n            });\r\n        }).always(function () {\r\n            if (fromPages == true) { //eslint-disable-line eqeqeq\r\n                $('html, body').animate({\r\n                    scrollTop: $('#reviews').offset().top - 50\r\n                }, 300);\r\n            }\r\n        });\r\n    }\r\n\r\n    return function (config) {\r\n        var reviewTab = $(config.reviewsTabSelector),\r\n            requiredReviewTabRole = 'tab';\r\n\r\n        if (reviewTab.attr('role') === requiredReviewTabRole && reviewTab.hasClass('active')) {\r\n            processReviews(config.productReviewUrl, location.hash === '#reviews');\r\n        } else {\r\n            reviewTab.one('beforeOpen', function () {\r\n                processReviews(config.productReviewUrl);\r\n            });\r\n        }\r\n\r\n        $(function () {\r\n            $('.product-info-main .reviews-actions a').on('click', function (event) {\r\n                var anchor, addReviewBlock;\r\n\r\n                event.preventDefault();\r\n                anchor = $(this).attr('href').replace(/^.*?(#|$)/, '');\r\n                addReviewBlock = $('#' + anchor);\r\n\r\n                if (addReviewBlock.length) {\r\n                    $('.product.data.items [data-role=\"content\"]').each(function (index) { //eslint-disable-line\r\n                        if (this.id == 'reviews') { //eslint-disable-line eqeqeq\r\n                            $('.product.data.items').tabs('activate', index);\r\n                        }\r\n                    });\r\n                    $('html, body').animate({\r\n                        scrollTop: addReviewBlock.offset().top - 50\r\n                    }, 300);\r\n                }\r\n\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/submit-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('submit', function () {\r\n            if ($(this).valid()) {\r\n                $(this).find('.submit').attr('disabled', true);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/validate-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/validate',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'rating-required', function (value) {\r\n            return value !== undefined;\r\n        }, $.mage.__('Please select one of each of the ratings above.'));\r\n});\r\n","Magento_Review/js/view/review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/view/customer'\r\n], function (Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.review = customerData.get('review').extend({\r\n                disposableCustomerData: 'review'\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        nickname: function () {\r\n            return this.review().nickname || customerData.get('customer')().firstname;\r\n        }\r\n    });\r\n});\r\n","Magento_Sales/js/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.giftMessage', {\r\n        options: {\r\n            rowPrefix: '#order-item-row-', // Selector prefix for item's row in the table.\r\n            linkPrefix: '#order-item-gift-message-link-', // Selector prefix for the 'Gift Message' link.\r\n            duration: 100, // Toggle duration.\r\n            expandedClass: 'expanded', // Class added/removed to/from the 'Gift Message' link.\r\n            expandedContentClass: 'expanded-content', // Class added/removed to/from the 'Gift Message' content.\r\n            lastClass: 'last' // Class added/removed to/from the last item's row in the products table.\r\n        },\r\n\r\n        /**\r\n         * Bind a click handler on the widget's element to toggle the gift message.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', $.proxy(this._toggleGiftMessage, this));\r\n        },\r\n\r\n        /**\r\n         * Toggle the display of the item's corresponding gift message.\r\n         * @private\r\n         * @param {jQuery.Event} event - Click event.\r\n         */\r\n        _toggleGiftMessage: function (event) {\r\n            var element = $(event.target), // Click target. The 'Gift Message' link or 'Close' button.\r\n                options = this.options, // Cached widget options.\r\n                itemId = element.data('item-id'), // The individual item's numeric id.\r\n                link = $(options.linkPrefix + itemId), // The 'Gift Message' expandable link.\r\n                row = $(options.rowPrefix + itemId), // The item's row in the products table.\r\n                region = $('#' + element.attr('aria-controls')); // The gift message container region.\r\n\r\n            region.toggleClass(options.expandedContentClass, options.duration, function () {\r\n                if (region.attr('aria-expanded') === 'true') {\r\n                    region.attr('aria-expanded', 'false');\r\n\r\n                    if (region.hasClass(options.lastClass)) {\r\n                        row.addClass(options.lastClass);\r\n                    }\r\n                } else {\r\n                    region.attr('aria-expanded', 'true');\r\n\r\n                    if (region.hasClass(options.lastClass)) {\r\n                        row.removeClass(options.lastClass);\r\n                    }\r\n                }\r\n                link.toggleClass(options.expandedClass);\r\n            });\r\n            event.preventDefault(); // Prevent event propagation and avoid going to the link's href.\r\n        }\r\n    });\r\n\r\n    return $.mage.giftMessage;\r\n});\r\n","Magento_Sales/js/orders-returns.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.ordersReturns', {\r\n        options: {\r\n            zipCode: '#oar-zip', // Search by zip code.\r\n            emailAddress: '#oar-email', // Search by email address.\r\n            searchType: '#quick-search-type-id' // Search element used for choosing between the two.\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            $(this.options.searchType).on('change', $.proxy(this._showIdentifyBlock, this)).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Show either the search by zip code option or the search by email address option.\r\n         * @private\r\n         * @param {jQuery.Event} e - Change event. Event target value is either 'zip' or 'email'.\r\n         */\r\n        _showIdentifyBlock: function (e) {\r\n            var value = $(e.target).val();\r\n\r\n            $(this.options.zipCode).toggle(value === 'zip');\r\n            $(this.options.emailAddress).toggle(value === 'email');\r\n        }\r\n    });\r\n\r\n    return $.mage.ordersReturns;\r\n});\r\n","Magento_Sales/js/view/last-ordered-items.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore'\r\n], function (Component, customerData, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isShowAddToCart: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.lastOrderedItems = customerData.get('last-ordered-items');\r\n            this.lastOrderedItems.subscribe(this.checkSalableItems.bind(this));\r\n            this.checkSalableItems();\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('isShowAddToCart');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check if items is_saleable and change add to cart button visibility.\r\n         */\r\n        checkSalableItems: function () {\r\n            var isShowAddToCart = _.some(this.lastOrderedItems().items, {\r\n                'is_saleable': true\r\n            });\r\n\r\n            this.isShowAddToCart(isShowAddToCart);\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/action/cancel-coupon.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/totals',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/recollect-shipping-rates'\r\n], function ($, quote, urlManager, errorProcessor, messageContainer, storage, getPaymentInformationAction, totals, $t,\r\n  fullScreenLoader, recollectShippingRates\r\n) {\r\n    'use strict';\r\n\r\n    var successCallbacks = [],\r\n        action,\r\n        callSuccessCallbacks;\r\n\r\n    /**\r\n     * Execute callbacks when a coupon is successfully canceled.\r\n     */\r\n    callSuccessCallbacks = function () {\r\n        successCallbacks.forEach(function (callback) {\r\n            callback();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Cancel applied coupon.\r\n     *\r\n     * @param {Boolean} isApplied\r\n     * @returns {Deferred}\r\n     */\r\n    action =  function (isApplied) {\r\n        var quoteId = quote.getQuoteId(),\r\n            url = urlManager.getCancelCouponUrl(quoteId),\r\n            message = $t('Your coupon was successfully removed.');\r\n\r\n        messageContainer.clear();\r\n        fullScreenLoader.startLoader();\r\n\r\n        return storage.delete(\r\n            url,\r\n            false\r\n        ).done(function () {\r\n            var deferred = $.Deferred();\r\n\r\n            totals.isLoading(true);\r\n            recollectShippingRates();\r\n            getPaymentInformationAction(deferred);\r\n            $.when(deferred).done(function () {\r\n                isApplied(false);\r\n                totals.isLoading(false);\r\n                fullScreenLoader.stopLoader();\r\n                //Allowing to tap into coupon-cancel process.\r\n                callSuccessCallbacks();\r\n            });\r\n            messageContainer.addSuccessMessage({\r\n                'message': message\r\n            });\r\n        }).fail(function (response) {\r\n            totals.isLoading(false);\r\n            fullScreenLoader.stopLoader();\r\n            errorProcessor.process(response, messageContainer);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Callback for when the cancel-coupon process is finished.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerSuccessCallback = function (callback) {\r\n        successCallbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_SalesRule/js/action/select-payment-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'Magento_Checkout/js/action/set-payment-information-extended',\r\n    'Magento_Checkout/js/action/get-totals',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function ($, wrapper, quote, messageContainer, setPaymentInformationExtended, getTotalsAction, coupon) {\r\n    'use strict';\r\n\r\n    return function (selectPaymentMethodAction) {\r\n\r\n        return wrapper.wrap(selectPaymentMethodAction, function (originalSelectPaymentMethodAction, paymentMethod) {\r\n\r\n            originalSelectPaymentMethodAction(paymentMethod);\r\n\r\n            if (paymentMethod === null) {\r\n                return;\r\n            }\r\n\r\n            $.when(\r\n                setPaymentInformationExtended(\r\n                    messageContainer,\r\n                    {\r\n                        method: paymentMethod.method\r\n                    },\r\n                    true\r\n                )\r\n            ).done(\r\n                function () {\r\n                    var deferred = $.Deferred(),\r\n\r\n                        /**\r\n                         * Update coupon form.\r\n                         */\r\n                        updateCouponCallback = function () {\r\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                                coupon.setCouponCode('');\r\n                                coupon.setIsApplied(false);\r\n                            }\r\n                        };\r\n\r\n                    getTotalsAction([], deferred);\r\n                    $.when(deferred).done(updateCouponCallback);\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n});\r\n","Magento_SalesRule/js/action/set-coupon-code.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'mage/storage',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/recollect-shipping-rates'\r\n], function (ko, $, quote, urlManager, errorProcessor, messageContainer, storage, $t, getPaymentInformationAction,\r\n    totals, fullScreenLoader, recollectShippingRates\r\n) {\r\n    'use strict';\r\n\r\n    var dataModifiers = [],\r\n        successCallbacks = [],\r\n        failCallbacks = [],\r\n        action;\r\n\r\n    /**\r\n     * Apply provided coupon.\r\n     *\r\n     * @param {String} couponCode\r\n     * @param {Boolean}isApplied\r\n     * @returns {Deferred}\r\n     */\r\n    action = function (couponCode, isApplied) {\r\n        var quoteId = quote.getQuoteId(),\r\n            url = urlManager.getApplyCouponUrl(couponCode, quoteId),\r\n            message = $t('Your coupon was successfully applied.'),\r\n            data = {},\r\n            headers = {};\r\n\r\n        //Allowing to modify coupon-apply request\r\n        dataModifiers.forEach(function (modifier) {\r\n            modifier(headers, data);\r\n        });\r\n        fullScreenLoader.startLoader();\r\n\r\n        return storage.put(\r\n            url,\r\n            data,\r\n            false,\r\n            null,\r\n            headers\r\n        ).done(function (response) {\r\n            var deferred;\r\n\r\n            if (response) {\r\n                deferred = $.Deferred();\r\n\r\n                isApplied(true);\r\n                totals.isLoading(true);\r\n                recollectShippingRates();\r\n                getPaymentInformationAction(deferred);\r\n                $.when(deferred).done(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                    totals.isLoading(false);\r\n                });\r\n                messageContainer.addSuccessMessage({\r\n                    'message': message\r\n                });\r\n                //Allowing to tap into apply-coupon process.\r\n                successCallbacks.forEach(function (callback) {\r\n                    callback(response);\r\n                });\r\n            }\r\n        }).fail(function (response) {\r\n            fullScreenLoader.stopLoader();\r\n            totals.isLoading(false);\r\n            errorProcessor.process(response, messageContainer);\r\n            //Allowing to tap into apply-coupon process.\r\n            failCallbacks.forEach(function (callback) {\r\n                callback(response);\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Modifying data to be sent.\r\n     *\r\n     * @param {Function} modifier\r\n     */\r\n    action.registerDataModifier = function (modifier) {\r\n        dataModifiers.push(modifier);\r\n    };\r\n\r\n    /**\r\n     * When successfully added a coupon.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerSuccessCallback = function (callback) {\r\n        successCallbacks.push(callback);\r\n    };\r\n\r\n    /**\r\n     * When failed to add a coupon.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerFailCallback = function (callback) {\r\n        failCallbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_SalesRule/js/form/element/coupon-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, uiRegistry, select) {\r\n    'use strict';\r\n\r\n    return select.extend({\r\n\r\n        /**\r\n         * Hide fields on coupon tab\r\n         */\r\n        onUpdate: function () {\r\n\r\n            /* eslint-disable eqeqeq */\r\n            if (this.value() != this.displayOnlyForCouponType) {\r\n                uiRegistry.get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation').checked(false);\r\n            }\r\n\r\n            this.enableDisableFields();\r\n        },\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/manage-coupon-codes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/components/fieldset',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (_, uiRegistry, fieldset, async) {\r\n    'use strict';\r\n\r\n    return fieldset.extend({\r\n\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * Initialize element\r\n         *\r\n         * @returns {Abstract} Chainable\r\n         */\r\n        initialize: function (elems, position) {\r\n            var obj = this;\r\n\r\n            this._super();\r\n\r\n            async.async('#sales-rule-form-tab-coupons', document.getElementById('container'), function (node) {\r\n                var useAutoGeneration = uiRegistry.get(\r\n                    'sales_rule_form.sales_rule_form.rule_information.use_auto_generation'\r\n                );\r\n\r\n                useAutoGeneration.on('checked', function () {\r\n                    obj.enableDisableFields();\r\n                });\r\n                obj.enableDisableFields();\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /*eslint-enable no-unused-vars*/\r\n        /*eslint-disable lines-around-comment*/\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            /**\r\n             * \\Magento\\Rule\\Model\\AbstractModel::COUPON_TYPE_AUTO\r\n             */\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/model/coupon.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * Coupon model.\r\n */\r\ndefine([\r\n    'ko',\r\n    'domReady!'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    var couponCode = ko.observable(null),\r\n        isApplied = ko.observable(null);\r\n\r\n    return {\r\n        couponCode: couponCode,\r\n        isApplied: isApplied,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponCode: function () {\r\n            return couponCode;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        getIsApplied: function () {\r\n            return isApplied;\r\n        },\r\n\r\n        /**\r\n         * @param {*} couponCodeValue\r\n         */\r\n        setCouponCode: function (couponCodeValue) {\r\n            couponCode(couponCodeValue);\r\n        },\r\n\r\n        /**\r\n         * @param {Boolean} isAppliedValue\r\n         */\r\n        setIsApplied: function (isAppliedValue) {\r\n            isApplied(isAppliedValue);\r\n        }\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/coupon',\r\n    'Magento_Checkout/js/action/get-totals'\r\n], function ($, wrapper, quote, coupon, getTotalsAction) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\r\n            var result;\r\n\r\n            $.when(\r\n                result = originalAction(paymentData, messageContainer)\r\n            ).fail(\r\n                function () {\r\n                    var deferred = $.Deferred(),\r\n\r\n                        /**\r\n                         * Update coupon form\r\n                         */\r\n                        updateCouponCallback = function () {\r\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                                coupon.setCouponCode('');\r\n                                coupon.setIsApplied(false);\r\n                            }\r\n                        };\r\n\r\n                    getTotalsAction([], deferred);\r\n                    $.when(deferred).done(updateCouponCallback);\r\n                }\r\n            );\r\n\r\n            return result;\r\n        });\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/shipping-save-processor-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function (wrapper, quote, coupon) {\r\n    'use strict';\r\n\r\n    return function (shippingSaveProcessor) {\r\n        shippingSaveProcessor.saveShippingInformation = wrapper.wrapSuper(\r\n            shippingSaveProcessor.saveShippingInformation,\r\n            function (type) {\r\n                var updateCouponCallback;\r\n\r\n                /**\r\n                 * Update coupon form\r\n                 */\r\n                updateCouponCallback = function () {\r\n                    if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                        coupon.setCouponCode('');\r\n                        coupon.setIsApplied(false);\r\n                    }\r\n                };\r\n\r\n                return this._super(type).done(updateCouponCallback);\r\n            }\r\n        );\r\n\r\n        return shippingSaveProcessor;\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/payment/discount-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/model/messages'\r\n], function (Messages) {\r\n    'use strict';\r\n\r\n    return new Messages();\r\n});\r\n","Magento_SalesRule/js/view/cart/totals/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_SalesRule/js/view/summary/discount'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/cart/totals/discount'\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.getPureValue() != 0; //eslint-disable-line eqeqeq\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/payment/captcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n        'Magento_Captcha/js/model/captchaList',\r\n        'Magento_SalesRule/js/action/set-coupon-code',\r\n        'Magento_SalesRule/js/action/cancel-coupon',\r\n        'Magento_Checkout/js/model/quote',\r\n        'ko'\r\n    ],\r\n    function (defaultCaptcha, captchaList, setCouponCodeAction, cancelCouponAction, quote, ko) {\r\n        'use strict';\r\n\r\n        var totals = quote.getTotals(),\r\n            couponCode = ko.observable(null),\r\n            isApplied;\r\n\r\n        if (totals()) {\r\n            couponCode(totals()['coupon_code']);\r\n        }\r\n        //Captcha can only be required for adding a coupon so we need to know if one was added already.\r\n        isApplied = ko.observable(couponCode() != null);\r\n\r\n        return defaultCaptcha.extend({\r\n            /** @inheritdoc */\r\n            initialize: function () {\r\n                var self = this,\r\n                    currentCaptcha;\r\n\r\n                this._super();\r\n                //Getting coupon captcha model.\r\n                currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n                if (currentCaptcha != null) {\r\n                    if (!isApplied()) {\r\n                        //Show captcha if we don't have a coupon applied.\r\n                        currentCaptcha.setIsVisible(true);\r\n                    }\r\n                    this.setCurrentCaptcha(currentCaptcha);\r\n                    //Add captcha code to coupon-apply request.\r\n                    setCouponCodeAction.registerDataModifier(function (headers) {\r\n                        if (self.isRequired()) {\r\n                            headers['X-Captcha'] = self.captchaValue()();\r\n                        }\r\n                    });\r\n                    //Refresh captcha after failed request.\r\n                    setCouponCodeAction.registerFailCallback(function () {\r\n                        if (self.isRequired()) {\r\n                            self.refresh();\r\n                        }\r\n                    });\r\n                    //Hide captcha when a coupon has been applied.\r\n                    setCouponCodeAction.registerSuccessCallback(function () {\r\n                        self.setIsVisible(false);\r\n                    });\r\n                    //Show captcha again if it was canceled.\r\n                    cancelCouponAction.registerSuccessCallback(function () {\r\n                        if (self.isRequired()) {\r\n                            self.setIsVisible(true);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    });\r\n","Magento_SalesRule/js/view/payment/discount-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    '../../model/payment/discount-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/payment/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/action/set-coupon-code',\r\n    'Magento_SalesRule/js/action/cancel-coupon',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function ($, ko, Component, quote, setCouponCodeAction, cancelCouponAction, coupon) {\r\n    'use strict';\r\n\r\n    var totals = quote.getTotals(),\r\n        couponCode = coupon.getCouponCode(),\r\n        isApplied = coupon.getIsApplied();\r\n\r\n    if (totals()) {\r\n        couponCode(totals()['coupon_code']);\r\n    }\r\n    isApplied(couponCode() != null);\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/payment/discount'\r\n        },\r\n        couponCode: couponCode,\r\n\r\n        /**\r\n         * Applied flag\r\n         */\r\n        isApplied: isApplied,\r\n\r\n        /**\r\n         * Coupon code application procedure\r\n         */\r\n        apply: function () {\r\n            if (this.validate()) {\r\n                setCouponCodeAction(couponCode(), isApplied);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cancel using coupon\r\n         */\r\n        cancel: function () {\r\n            if (this.validate()) {\r\n                couponCode('');\r\n                cancelCouponAction(isApplied);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Coupon form validation\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            var form = '#discount-form';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/summary/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/summary/discount'\r\n        },\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode() && this.getPureValue() != 0; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponCode: function () {\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            return this.totals()['coupon_code'];\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponLabel: function () {\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            return this.totals()['coupon_label'];\r\n        },\r\n\r\n        /**\r\n         * Get discount title\r\n         *\r\n         * @returns {null|String}\r\n         */\r\n        getTitle: function () {\r\n            var discountSegments;\r\n\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            discountSegments = this.totals()['total_segments'].filter(function (segment) {\r\n                return segment.code.indexOf('discount') !== -1;\r\n            });\r\n\r\n            return discountSegments.length ? discountSegments[0].title : null;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals() && this.totals()['discount_amount']) {\r\n                price = parseFloat(this.totals()['discount_amount']);\r\n            }\r\n\r\n            return price;\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Search/js/form-mini.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'matchMedia',\r\n    'jquery-ui-modules/widget',\r\n    'jquery-ui-modules/core',\r\n    'mage/translate'\r\n], function ($, _, mageTemplate, mediaCheck) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Check whether the incoming string is not empty or if doesn't consist of spaces.\r\n     *\r\n     * @param {String} value - Value to check.\r\n     * @returns {Boolean}\r\n     */\r\n    function isEmpty(value) {\r\n        return value.length === 0 || value == null || /^\\s+$/.test(value);\r\n    }\r\n\r\n    $.widget('mage.quickSearch', {\r\n        options: {\r\n            autocomplete: 'off',\r\n            minSearchLength: 3,\r\n            responseFieldElements: 'ul li',\r\n            selectClass: 'selected',\r\n            template:\r\n                '<li class=\"<%- data.row_class %>\" id=\"qs-option-<%- data.index %>\" role=\"option\">' +\r\n                '<span class=\"qs-option-name\">' +\r\n                ' <%- data.title %>' +\r\n                '</span>' +\r\n                '<span aria-hidden=\"true\" class=\"amount\">' +\r\n                '<%- data.num_results %>' +\r\n                '</span>' +\r\n                '</li>',\r\n            submitBtn: 'button[type=\"submit\"]',\r\n            searchLabel: '[data-role=minisearch-label]',\r\n            isExpandable: null,\r\n            suggestionDelay: 300\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.responseList = {\r\n                indexList: null,\r\n                selected: null\r\n            };\r\n            this.autoComplete = $(this.options.destinationSelector);\r\n            this.searchForm = $(this.options.formSelector);\r\n            this.submitBtn = this.searchForm.find(this.options.submitBtn)[0];\r\n            this.searchLabel = this.searchForm.find(this.options.searchLabel);\r\n            this.isExpandable = this.options.isExpandable;\r\n\r\n            _.bindAll(this, '_onKeyDown', '_onPropertyChange', '_onSubmit');\r\n\r\n            this.submitBtn.disabled = true;\r\n\r\n            this.element.attr('autocomplete', this.options.autocomplete);\r\n\r\n            mediaCheck({\r\n                media: '(max-width: 768px)',\r\n                entry: function () {\r\n                    this.isExpandable = true;\r\n                }.bind(this),\r\n                exit: function () {\r\n                    this.isExpandable = true;\r\n                }.bind(this)\r\n            });\r\n\r\n            this.searchLabel.on('click', function (e) {\r\n                // allow input to lose its' focus when clicking on label\r\n                if (this.isExpandable && this.isActive()) {\r\n                    e.preventDefault();\r\n                }\r\n            }.bind(this));\r\n\r\n            this.element.on('blur', $.proxy(function () {\r\n                if (!this.searchLabel.hasClass('active')) {\r\n                    return;\r\n                }\r\n\r\n                setTimeout($.proxy(function () {\r\n                    if (this.autoComplete.is(':hidden')) {\r\n                        this.setActiveState(false);\r\n                    } else {\r\n                        this.element.trigger('focus');\r\n                    }\r\n                    this.autoComplete.hide();\r\n                    this._updateAriaHasPopup(false);\r\n                }, this), 250);\r\n            }, this));\r\n\r\n            if (this.element.get(0) === document.activeElement) {\r\n                this.setActiveState(true);\r\n            }\r\n\r\n            this.element.on('focus', this.setActiveState.bind(this, true));\r\n            this.element.on('keydown', this._onKeyDown);\r\n            // Prevent spamming the server with requests by waiting till the user has stopped typing for period of time\r\n            this.element.on('input propertychange', _.debounce(this._onPropertyChange, this.options.suggestionDelay));\r\n\r\n            this.searchForm.on('submit', $.proxy(function (e) {\r\n                this._onSubmit(e);\r\n                this._updateAriaHasPopup(false);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Checks if search field is active.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return this.searchLabel.hasClass('active');\r\n        },\r\n\r\n        /**\r\n         * Sets state of the search field to provided value.\r\n         *\r\n         * @param {Boolean} isActive\r\n         */\r\n        setActiveState: function (isActive) {\r\n            var searchValue;\r\n\r\n            this.searchForm.toggleClass('active', isActive);\r\n            this.searchLabel.toggleClass('active', isActive);\r\n\r\n            if (this.isExpandable) {\r\n                this.element.attr('aria-expanded', isActive);\r\n                searchValue = this.element.val();\r\n                this.element.val('');\r\n                this.element.val(searchValue);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @return {Element} The first element in the suggestion list.\r\n         */\r\n        _getFirstVisibleElement: function () {\r\n            return this.responseList.indexList ? this.responseList.indexList.first() : false;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @return {Element} The last element in the suggestion list.\r\n         */\r\n        _getLastElement: function () {\r\n            return this.responseList.indexList ? this.responseList.indexList.last() : false;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @param {Boolean} show - Set attribute aria-haspopup to \"true/false\" for element.\r\n         */\r\n        _updateAriaHasPopup: function (show) {\r\n            if (show) {\r\n                this.element.attr('aria-haspopup', 'true');\r\n            } else {\r\n                this.element.attr('aria-haspopup', 'false');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clears the item selected from the suggestion list and resets the suggestion list.\r\n         * @private\r\n         * @param {Boolean} all - Controls whether to clear the suggestion list.\r\n         */\r\n        _resetResponseList: function (all) {\r\n            this.responseList.selected = null;\r\n\r\n            if (all === true) {\r\n                this.responseList.indexList = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the search box is submitted. Sets the search input field to the\r\n         * value of the selected item.\r\n         * @private\r\n         * @param {Event} e - The submit event\r\n         */\r\n        _onSubmit: function (e) {\r\n            var value = this.element.val();\r\n\r\n            if (isEmpty(value)) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            if (this.responseList.selected) {\r\n                this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when keys are pressed in the search input field. Performs specific actions\r\n         * depending on which keys are pressed.\r\n         * @private\r\n         * @param {Event} e - The key down event\r\n         * @return {Boolean} Default return type for any unhandled keys\r\n         */\r\n        _onKeyDown: function (e) {\r\n            var keyCode = e.keyCode || e.which;\r\n\r\n            switch (keyCode) {\r\n                case $.ui.keyCode.HOME:\r\n                    if (this._getFirstVisibleElement()) {\r\n                        this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                        this.responseList.selected = this._getFirstVisibleElement();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.END:\r\n                    if (this._getLastElement()) {\r\n                        this._getLastElement().addClass(this.options.selectClass);\r\n                        this.responseList.selected = this._getLastElement();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.ESCAPE:\r\n                    this._resetResponseList(true);\r\n                    this.autoComplete.hide();\r\n                    break;\r\n\r\n                case $.ui.keyCode.ENTER:\r\n                    if (this.element.val().length >= parseInt(this.options.minSearchLength, 10)) {\r\n                        this.searchForm.trigger('submit');\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.DOWN:\r\n                    if (this.responseList.indexList) {\r\n                        if (!this.responseList.selected) {  //eslint-disable-line max-depth\r\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getFirstVisibleElement();\r\n                        } else if (!this._getLastElement().hasClass(this.options.selectClass)) {\r\n                            this.responseList.selected = this.responseList.selected\r\n                                .removeClass(this.options.selectClass).next().addClass(this.options.selectClass);\r\n                        } else {\r\n                            this.responseList.selected.removeClass(this.options.selectClass);\r\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getFirstVisibleElement();\r\n                        }\r\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\r\n                        this._updateAriaHasPopup(true);\r\n                        this.autoComplete.show();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.UP:\r\n                    if (this.responseList.indexList !== null) {\r\n                        if (!this._getFirstVisibleElement().hasClass(this.options.selectClass)) {\r\n                            this.responseList.selected = this.responseList.selected\r\n                                .removeClass(this.options.selectClass).prev().addClass(this.options.selectClass);\r\n\r\n                        } else {\r\n                            this.responseList.selected.removeClass(this.options.selectClass);\r\n                            this._getLastElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getLastElement();\r\n                        }\r\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\r\n                        this._updateAriaHasPopup(true);\r\n                        this.autoComplete.show();\r\n                    }\r\n                    break;\r\n                default:\r\n                    return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the value of the search input field changes. Executes a GET request\r\n         * to populate a suggestion list based on entered text. Handles click (select), hover,\r\n         * and mouseout events on the populated suggestion list dropdown.\r\n         * @private\r\n         */\r\n        _onPropertyChange: function () {\r\n            var searchField = this.element,\r\n                clonePosition = {\r\n                    position: 'absolute',\r\n                    // Removed to fix display issues\r\n                    // left: searchField.offset().left,\r\n                    // top: searchField.offset().top + searchField.outerHeight(),\r\n                    width: searchField.outerWidth()\r\n                },\r\n                source = this.options.template,\r\n                template = mageTemplate(source),\r\n                dropdown = $('<ul role=\"listbox\"></ul>'),\r\n                value = this.element.val();\r\n\r\n            this.submitBtn.disabled = true;\r\n\r\n            if (value.length >= parseInt(this.options.minSearchLength, 10)) {\r\n                this.submitBtn.disabled = false;\r\n\r\n                if (this.options.url !== '') { //eslint-disable-line eqeqeq\r\n                    $.getJSON(this.options.url, {\r\n                        q: value\r\n                    }, $.proxy(function (data) {\r\n                        if (data.length) {\r\n                            $.each(data, function (index, element) {\r\n                                var html;\r\n\r\n                                element.index = index;\r\n                                html = template({\r\n                                    data: element\r\n                                });\r\n                                dropdown.append(html);\r\n                            });\r\n\r\n                            this._resetResponseList(true);\r\n\r\n                            this.responseList.indexList = this.autoComplete.html(dropdown)\r\n                                .css(clonePosition)\r\n                                .show()\r\n                                .find(this.options.responseFieldElements + ':visible');\r\n\r\n                            this.element.removeAttr('aria-activedescendant');\r\n\r\n                            if (this.responseList.indexList.length) {\r\n                                this._updateAriaHasPopup(true);\r\n                            } else {\r\n                                this._updateAriaHasPopup(false);\r\n                            }\r\n\r\n                            this.responseList.indexList\r\n                                .on('click', function (e) {\r\n                                    this.responseList.selected = $(e.currentTarget);\r\n                                    this.searchForm.trigger('submit');\r\n                                }.bind(this))\r\n                                .on('mouseenter mouseleave', function (e) {\r\n                                    this.responseList.indexList.removeClass(this.options.selectClass);\r\n                                    $(e.target).addClass(this.options.selectClass);\r\n                                    this.responseList.selected = $(e.target);\r\n                                    this.element.attr('aria-activedescendant', $(e.target).attr('id'));\r\n                                }.bind(this))\r\n                                .on('mouseout', function (e) {\r\n                                    if (!this._getLastElement() &&\r\n                                        this._getLastElement().hasClass(this.options.selectClass)) {\r\n                                        $(e.target).removeClass(this.options.selectClass);\r\n                                        this._resetResponseList(false);\r\n                                    }\r\n                                }.bind(this));\r\n                        } else {\r\n                            this._resetResponseList(true);\r\n                            this.autoComplete.hide();\r\n                            this._updateAriaHasPopup(false);\r\n                            this.element.removeAttr('aria-activedescendant');\r\n                        }\r\n                    }, this));\r\n                }\r\n            } else {\r\n                this._resetResponseList(true);\r\n                this.autoComplete.hide();\r\n                this._updateAriaHasPopup(false);\r\n                this.element.removeAttr('aria-activedescendant');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.quickSearch;\r\n});\r\n","Magento_Security/js/escaper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * A loose JavaScript version of Magento\\Framework\\Escaper\r\n *\r\n * Due to differences in how XML/HTML is processed in PHP vs JS there are a couple of minor differences in behavior\r\n * from the PHP counterpart.\r\n *\r\n * The first difference is that the default invocation of escapeHtml without allowedTags will double-escape existing\r\n * entities as the intention of such an invocation is that the input isn't supposed to contain any HTML.\r\n *\r\n * The second difference is that escapeHtml will not escape quotes. Since the input is actually being processed by the\r\n * DOM there is no chance of quotes being mixed with HTML syntax. And, since escapeHtml is not\r\n * intended to be used with raw injection into a HTML attribute, this is acceptable.\r\n *\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        neverAllowedElements: ['script', 'img', 'embed', 'iframe', 'video', 'source', 'object', 'audio'],\r\n        generallyAllowedAttributes: ['id', 'class', 'href', 'title', 'style'],\r\n        forbiddenAttributesByElement: {\r\n            a: ['style']\r\n        },\r\n\r\n        /**\r\n         * Escape a string for safe injection into HTML\r\n         *\r\n         * @param {String} data\r\n         * @param {Array|null} allowedTags\r\n         * @returns {String}\r\n         */\r\n        escapeHtml: function (data, allowedTags) {\r\n            var domParser = new DOMParser(),\r\n                fragment = domParser.parseFromString('<div></div>', 'text/html');\r\n\r\n            fragment = fragment.body.childNodes[0];\r\n            allowedTags = typeof allowedTags === 'object' && allowedTags.length ? allowedTags : null;\r\n\r\n            if (allowedTags) {\r\n                fragment.innerHTML = data || '';\r\n                allowedTags = this._filterProhibitedTags(allowedTags);\r\n\r\n                this._removeComments(fragment);\r\n                this._removeNotAllowedElements(fragment, allowedTags);\r\n                this._removeNotAllowedAttributes(fragment);\r\n\r\n                return fragment.innerHTML;\r\n            }\r\n\r\n            fragment.textContent = data || '';\r\n\r\n            return fragment.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * Remove the always forbidden tags from a list of provided tags\r\n         *\r\n         * @param {Array} tags\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _filterProhibitedTags: function (tags) {\r\n            return tags.filter(function (n) {\r\n                return this.neverAllowedElements.indexOf(n) === -1;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Remove comment nodes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeComments: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_COMMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                    false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                nodesToRemove.push(treeWalker.currentNode);\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.removeChild(nodeToRemove);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Strip the given node of all disallowed tags while permitting any nested text nodes\r\n         *\r\n         * @param {Node} node\r\n         * @param {Array|null} allowedTags\r\n         * @private\r\n         */\r\n        _removeNotAllowedElements: function (node, allowedTags) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function (currentNode) {\r\n                        return allowedTags.indexOf(currentNode.nodeName.toLowerCase()) === -1 ?\r\n                            NodeFilter.FILTER_ACCEPT\r\n                            // SKIP instead of REJECT because REJECT also rejects child nodes\r\n                            : NodeFilter.FILTER_SKIP;\r\n                    },\r\n                false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                if (allowedTags.indexOf(treeWalker.currentNode.nodeName.toLowerCase()) === -1) {\r\n                    nodesToRemove.push(treeWalker.currentNode);\r\n                }\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.replaceChild(\r\n                    node.ownerDocument.createTextNode(nodeToRemove.textContent),\r\n                    nodeToRemove\r\n                );\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Remove any invalid attributes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeNotAllowedAttributes: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                false\r\n                ),\r\n                i,\r\n                attribute,\r\n                nodeName,\r\n                attributesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                for (i = 0; i < treeWalker.currentNode.attributes.length; i++) {\r\n                    attribute = treeWalker.currentNode.attributes[i];\r\n                    nodeName = treeWalker.currentNode.nodeName.toLowerCase();\r\n\r\n                    if (this.generallyAllowedAttributes.indexOf(attribute.name) === -1  || // eslint-disable-line max-depth,max-len\r\n                        this._checkHrefValue(attribute) ||\r\n                        this.forbiddenAttributesByElement[nodeName] &&\r\n                        this.forbiddenAttributesByElement[nodeName].indexOf(attribute.name) !== -1\r\n                    ) {\r\n                        attributesToRemove.push(attribute);\r\n                    }\r\n                }\r\n            }\r\n\r\n            attributesToRemove.forEach(function (attributeToRemove) {\r\n                attributeToRemove.ownerElement.removeAttribute(attributeToRemove.name);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check that attribute contains script content\r\n         *\r\n         * @param {Object} attribute\r\n         * @private\r\n         */\r\n        _checkHrefValue: function (attribute) {\r\n            return attribute.nodeName === 'href' && attribute.nodeValue.startsWith('javascript');\r\n        }\r\n    };\r\n});\r\n","Magento_SendFriend/requirejs-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nvar config = {\r\n    map: {\r\n        '*': {\r\n            'Magento_SendFriend/back-event': 'Magento_SendFriend/js/back-event'\r\n        }\r\n    }\r\n};\r\n","Magento_SendFriend/js/back-event.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('click', function () {\r\n            history.back();\r\n\r\n            return false;\r\n        });\r\n    };\r\n});\r\n","Magento_Shipping/js/model/config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function () {\r\n        return window.checkoutConfig.shippingPolicy;\r\n    };\r\n});\r\n","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Shipping/js/model/config'\r\n\r\n], function (Component, config) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\r\n        },\r\n        config: config()\r\n    });\r\n});\r\n","Magento_Swatches/js/catalog-add-to-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Add selected swatch attributes to redirect url\r\n     *\r\n     * @see Magento_Catalog/js/catalog-add-to-cart\r\n     */\r\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\r\n        $(data.form).find('[name*=\"super\"]').each(function (index, item) {\r\n            var $item = $(item),\r\n                attr;\r\n\r\n            if ($item.attr('data-attr-name')) {\r\n                attr = $item.attr('data-attr-name');\r\n            } else {\r\n                attr = $item.parent().attr('attribute-code');\r\n            }\r\n            data.redirectParameters.push(attr + '=' + $item.val());\r\n\r\n        });\r\n    });\r\n});\r\n","Magento_Swatches/js/configurable-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/options-updater'\r\n], function ($, Updater) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n            formSelector: '#product_addtocart_form',\r\n            swatchSelector: '.swatch-opt'\r\n        },\r\n        swatchWidgetName = 'mage-SwatchRenderer',\r\n        widgetInitEvent = 'swatch.initialized',\r\n\r\n    /**\r\n    * Sets all configurable swatch attribute's selected values\r\n    */\r\n    updateSwatchOptions = function () {\r\n        var swatchWidget = $(selectors.swatchSelector).data(swatchWidgetName);\r\n\r\n        if (!swatchWidget || !swatchWidget._EmulateSelectedByAttributeId) {\r\n            return;\r\n        }\r\n        swatchWidget._EmulateSelectedByAttributeId(this.productOptions);\r\n    },\r\n    updater = new Updater(widgetInitEvent, updateSwatchOptions);\r\n\r\n    updater.listen();\r\n});\r\n","Magento_Swatches/js/swatch-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'mage/smart-keyboard-handler',\r\n    'mage/translate',\r\n    'priceUtils',\r\n    'jquery-ui-modules/widget',\r\n    'jquery/jquery.parsequery',\r\n    'mage/validation/validation'\r\n], function ($, _, mageTemplate, keyboardHandler, $t, priceUtils) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Extend form validation to support swatch accessibility\r\n     */\r\n    $.widget('mage.validation', $.mage.validation, {\r\n        /**\r\n         * Handle form with swatches validation. Focus on first invalid swatch block.\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} validation\r\n         */\r\n        listenFormValidateHandler: function (event, validation) {\r\n            var swatchWrapper, firstActive, swatches, swatch, successList, errorList, firstSwatch;\r\n\r\n            this._superApply(arguments);\r\n\r\n            swatchWrapper = '.swatch-attribute-options';\r\n            swatches = $(event.target).find(swatchWrapper);\r\n\r\n            if (!swatches.length) {\r\n                return;\r\n            }\r\n\r\n            swatch = '.swatch-attribute';\r\n            firstActive = $(validation.errorList[0].element || []);\r\n            successList = validation.successList;\r\n            errorList = validation.errorList;\r\n            firstSwatch = $(firstActive).parent(swatch).find(swatchWrapper);\r\n\r\n            keyboardHandler.focus(swatches);\r\n\r\n            $.each(successList, function (index, item) {\r\n                $(item).parent(swatch).find(swatchWrapper).attr('aria-invalid', false);\r\n            });\r\n\r\n            $.each(errorList, function (index, item) {\r\n                $(item.element).parent(swatch).find(swatchWrapper).attr('aria-invalid', true);\r\n            });\r\n\r\n            if (firstSwatch.length) {\r\n                $(firstSwatch).trigger('focus');\r\n            }\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Render tooltips by attributes (only to up).\r\n     * Required element attributes:\r\n     *  - data-option-type (integer, 0-3)\r\n     *  - data-option-label (string)\r\n     *  - data-option-tooltip-thumb\r\n     *  - data-option-tooltip-value\r\n     *  - data-thumb-width\r\n     *  - data-thumb-height\r\n     */\r\n    $.widget('mage.SwatchRendererTooltip', {\r\n        options: {\r\n            delay: 200,                             //how much ms before tooltip to show\r\n            tooltipClass: 'swatch-option-tooltip'  //configurable, but remember about css\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            var $widget = this,\r\n                $this = this.element,\r\n                $element = $('.' + $widget.options.tooltipClass),\r\n                timer,\r\n                type = parseInt($this.data('option-type'), 10),\r\n                label = $this.data('option-label'),\r\n                thumb = $this.data('option-tooltip-thumb'),\r\n                value = $this.data('option-tooltip-value'),\r\n                width = $this.data('thumb-width'),\r\n                height = $this.data('thumb-height'),\r\n                $image,\r\n                $title,\r\n                $corner;\r\n\r\n            if (!$element.length) {\r\n                $element = $('<div class=\"' +\r\n                    $widget.options.tooltipClass +\r\n                    '\"><div class=\"image\"></div><div class=\"title\"></div><div class=\"corner\"></div></div>'\r\n                );\r\n                $('body').append($element);\r\n            }\r\n\r\n            $image = $element.find('.image');\r\n            $title = $element.find('.title');\r\n            $corner = $element.find('.corner');\r\n\r\n            $this.on('mouseenter', function () {\r\n                if (!$this.hasClass('disabled')) {\r\n                    timer = setTimeout(\r\n                        function () {\r\n                            var leftOpt = null,\r\n                                leftCorner = 0,\r\n                                left,\r\n                                $window;\r\n\r\n                            if (type === 2) {\r\n                                // Image\r\n                                $image.css({\r\n                                    'background': 'url(\"' + thumb + '\") no-repeat center', //Background case\r\n                                    'background-size': 'initial',\r\n                                    'width': width + 'px',\r\n                                    'height': height + 'px'\r\n                                });\r\n                                $image.show();\r\n                            } else if (type === 1) {\r\n                                // Color\r\n                                $image.css({\r\n                                    background: value\r\n                                });\r\n                                $image.show();\r\n                            } else if (type === 0 || type === 3) {\r\n                                // Default\r\n                                $image.hide();\r\n                            }\r\n\r\n                            $title.text(label);\r\n\r\n                            leftOpt = $this.offset().left;\r\n                            left = leftOpt + $this.width() / 2 - $element.width() / 2;\r\n                            $window = $(window);\r\n\r\n                            // the numbers (5 and 5) is magick constants for offset from left or right page\r\n                            if (left < 0) {\r\n                                left = 5;\r\n                            } else if (left + $element.width() > $window.width()) {\r\n                                left = $window.width() - $element.width() - 5;\r\n                            }\r\n\r\n                            // the numbers (6,  3 and 18) is magick constants for offset tooltip\r\n                            leftCorner = 0;\r\n\r\n                            if ($element.width() < $this.width()) {\r\n                                leftCorner = $element.width() / 2 - 3;\r\n                            } else {\r\n                                leftCorner = (leftOpt > left ? leftOpt - left : left - leftOpt) + $this.width() / 2 - 6;\r\n                            }\r\n\r\n                            $corner.css({\r\n                                left: leftCorner\r\n                            });\r\n                            $element.css({\r\n                                left: left,\r\n                                top: $this.offset().top - $element.height() - $corner.height() - 18\r\n                            }).show();\r\n                        },\r\n                        $widget.options.delay\r\n                    );\r\n                }\r\n            });\r\n\r\n            $this.on('mouseleave', function () {\r\n                $element.hide();\r\n                clearTimeout(timer);\r\n            });\r\n\r\n            $(document).on('tap', function () {\r\n                $element.hide();\r\n                clearTimeout(timer);\r\n            });\r\n\r\n            $this.on('tap', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Render swatch controls with options and use tooltips.\r\n     * Required two json:\r\n     *  - jsonConfig (magento's option config)\r\n     *  - jsonSwatchConfig (swatch's option config)\r\n     *\r\n     *  Tuning:\r\n     *  - numberToShow (show \"more\" button if options are more)\r\n     *  - onlySwatches (hide selectboxes)\r\n     *  - moreButtonText (text for \"more\" button)\r\n     *  - selectorProduct (selector for product container)\r\n     *  - selectorProductPrice (selector for change price)\r\n     */\r\n    $.widget('mage.SwatchRenderer', {\r\n        options: {\r\n            classes: {\r\n                attributeClass: 'swatch-attribute',\r\n                attributeLabelClass: 'swatch-attribute-label',\r\n                attributeSelectedOptionLabelClass: 'swatch-attribute-selected-option',\r\n                attributeOptionsWrapper: 'swatch-attribute-options',\r\n                attributeInput: 'swatch-input',\r\n                optionClass: 'swatch-option',\r\n                selectClass: 'swatch-select',\r\n                moreButton: 'swatch-more',\r\n                loader: 'swatch-option-loading'\r\n            },\r\n            // option's json config\r\n            jsonConfig: {},\r\n\r\n            // swatch's json config\r\n            jsonSwatchConfig: {},\r\n\r\n            // selector of parental block of prices and swatches (need to know where to seek for price block)\r\n            selectorProduct: '.product-info-main',\r\n\r\n            // selector of price wrapper (need to know where set price)\r\n            selectorProductPrice: '[data-role=priceBox]',\r\n\r\n            //selector of product images gallery wrapper\r\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\r\n\r\n            // selector of category product tile wrapper\r\n            selectorProductTile: '.product-item',\r\n\r\n            // number of controls to show (false or zero = show all)\r\n            numberToShow: false,\r\n\r\n            // show only swatch controls\r\n            onlySwatches: false,\r\n\r\n            // enable label for control\r\n            enableControlLabel: true,\r\n\r\n            // control label id\r\n            controlLabelId: '',\r\n\r\n            // text for more button\r\n            moreButtonText: $t('More'),\r\n\r\n            // Callback url for media\r\n            mediaCallback: '',\r\n\r\n            // Local media cache\r\n            mediaCache: {},\r\n\r\n            // Cache for BaseProduct images. Needed when option unset\r\n            mediaGalleryInitial: [{}],\r\n\r\n            // Use ajax to get image data\r\n            useAjax: false,\r\n\r\n            /**\r\n             * Defines the mechanism of how images of a gallery should be\r\n             * updated when user switches between configurations of a product.\r\n             *\r\n             * As for now value of this option can be either 'replace' or 'prepend'.\r\n             *\r\n             * @type {String}\r\n             */\r\n            gallerySwitchStrategy: 'replace',\r\n\r\n            // whether swatches are rendered in product list or on product page\r\n            inProductList: false,\r\n\r\n            // sly-old-price block selector\r\n            slyOldPriceSelector: '.sly-old-price',\r\n\r\n            // tier prise selectors start\r\n            tierPriceTemplateSelector: '#tier-prices-template',\r\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\r\n            tierPriceTemplate: '',\r\n            // tier prise selectors end\r\n\r\n            // A price label selector\r\n            normalPriceLabelSelector: '.product-info-main .normal-price .price-label',\r\n            qtyInfo: '#qty'\r\n        },\r\n\r\n        /**\r\n         * Get chosen product\r\n         *\r\n         * @returns int|null\r\n         */\r\n        getProduct: function () {\r\n            var products = this._CalcProducts();\r\n\r\n            return _.isArray(products) ? products[0] : null;\r\n        },\r\n\r\n        /**\r\n         * Get chosen product id\r\n         *\r\n         * @returns int|null\r\n         */\r\n        getProductId: function () {\r\n            var products = this._CalcProducts();\r\n\r\n            return _.isArray(products) && products.length === 1 ? products[0] : null;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            // Don't render the same set of swatches twice\r\n            if ($(this.element).attr('data-rendered')) {\r\n                return;\r\n            }\r\n\r\n            $(this.element).attr('data-rendered', true);\r\n\r\n            if (_.isEmpty(this.options.jsonConfig.images)) {\r\n                this.options.useAjax = true;\r\n                // creates debounced variant of _LoadProductMedia()\r\n                // to use it in events handlers instead of _LoadProductMedia()\r\n                this._debouncedLoadProductMedia = _.debounce(this._LoadProductMedia.bind(this), 500);\r\n            }\r\n\r\n            this.options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\r\n\r\n            if (this.options.jsonConfig !== '' && this.options.jsonSwatchConfig !== '') {\r\n                // store unsorted attributes\r\n                this.options.jsonConfig.mappedAttributes = _.clone(this.options.jsonConfig.attributes);\r\n                this._sortAttributes();\r\n                this._RenderControls();\r\n                this._setPreSelectedGallery();\r\n                $(this.element).trigger('swatch.initialized');\r\n            } else {\r\n                console.log('SwatchRenderer: No input data received');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _sortAttributes: function () {\r\n            this.options.jsonConfig.attributes = _.sortBy(this.options.jsonConfig.attributes, function (attribute) {\r\n                return parseInt(attribute.position, 10);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var options = this.options,\r\n                gallery = $('[data-gallery-role=gallery-placeholder]', '.column.main'),\r\n                productData = this._determineProductData(),\r\n                $main = productData.isInProductView ?\r\n                    this.element.parents('.column.main') :\r\n                    this.element.parents('.product-item-info');\r\n\r\n            if (productData.isInProductView) {\r\n                gallery.data('gallery') ?\r\n                    this._onGalleryLoaded(gallery) :\r\n                    gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\r\n            } else {\r\n                options.mediaGalleryInitial = [{\r\n                    'img': $main.find('.product-image-photo').attr('src')\r\n                }];\r\n            }\r\n\r\n            this.productForm = this.element.parents(this.options.selectorProductTile).find('form:first');\r\n            this.inProductList = this.productForm.length > 0;\r\n            $(this.options.qtyInfo).on('input', this._onQtyChanged.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Determine product id and related data\r\n         *\r\n         * @returns {{productId: *, isInProductView: bool}}\r\n         * @private\r\n         */\r\n        _determineProductData: function () {\r\n            // Check if product is in a list of products.\r\n            var productId,\r\n                isInProductView = false;\r\n\r\n            productId = this.element.parents('.product-item-details')\r\n                    .find('.price-box.price-final_price').attr('data-product-id');\r\n\r\n            if (!productId) {\r\n                // Check individual product.\r\n                productId = $('[name=product]').val();\r\n                isInProductView = productId > 0;\r\n            }\r\n\r\n            return {\r\n                productId: productId,\r\n                isInProductView: isInProductView\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Render controls\r\n         *\r\n         * @private\r\n         */\r\n        _RenderControls: function () {\r\n            var $widget = this,\r\n                container = this.element,\r\n                classes = this.options.classes,\r\n                chooseText = this.options.jsonConfig.chooseText,\r\n                showTooltip = this.options.showTooltip;\r\n\r\n            $widget.optionsMap = {};\r\n\r\n            $.each(this.options.jsonConfig.attributes, function () {\r\n                var item = this,\r\n                    controlLabelId = 'option-label-' + item.code + '-' + item.id,\r\n                    options = $widget._RenderSwatchOptions(item, controlLabelId),\r\n                    select = $widget._RenderSwatchSelect(item, chooseText),\r\n                    input = $widget._RenderFormInput(item),\r\n                    listLabel = '',\r\n                    label = '';\r\n\r\n                // Show only swatch controls\r\n                if ($widget.options.onlySwatches && !$widget.options.jsonSwatchConfig.hasOwnProperty(item.id)) {\r\n                    return;\r\n                }\r\n\r\n                if ($widget.options.enableControlLabel) {\r\n                    label +=\r\n                        '<span id=\"' + controlLabelId + '\" class=\"' + classes.attributeLabelClass + '\">' +\r\n                        $('<i></i>').text(item.label).html() +\r\n                        '</span>' +\r\n                        '<span class=\"' + classes.attributeSelectedOptionLabelClass + '\"></span>';\r\n                }\r\n\r\n                if ($widget.inProductList) {\r\n                    $widget.productForm.append(input);\r\n                    input = '';\r\n                    listLabel = 'aria-label=\"' + $('<i></i>').text(item.label).html() + '\"';\r\n                } else {\r\n                    listLabel = 'aria-labelledby=\"' + controlLabelId + '\"';\r\n                }\r\n\r\n                // Create new control\r\n                container.append(\r\n                    '<div class=\"' + classes.attributeClass + ' ' + item.code + '\" ' +\r\n                         'data-attribute-code=\"' + item.code + '\" ' +\r\n                         'data-attribute-id=\"' + item.id + '\">' +\r\n                        label +\r\n                        '<div aria-activedescendant=\"\" ' +\r\n                             'tabindex=\"0\" ' +\r\n                             'aria-invalid=\"false\" ' +\r\n                             'aria-required=\"true\" ' +\r\n                             'role=\"listbox\" ' + listLabel +\r\n                             'class=\"' + classes.attributeOptionsWrapper + ' clearfix\">' +\r\n                            options + select +\r\n                        '</div>' + input +\r\n                    '</div>'\r\n                );\r\n\r\n                $widget.optionsMap[item.id] = {};\r\n\r\n                // Aggregate options array to hash (key => value)\r\n                $.each(item.options, function () {\r\n                    if (this.products.length > 0) {\r\n                        $widget.optionsMap[item.id][this.id] = {\r\n                            price: parseInt(\r\n                                $widget.options.jsonConfig.optionPrices[this.products[0]].finalPrice.amount,\r\n                                10\r\n                            ),\r\n                            products: this.products\r\n                        };\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (showTooltip === 1) {\r\n                // Connect Tooltip\r\n                container\r\n                    .find('[data-option-type=\"1\"], [data-option-type=\"2\"],' +\r\n                        ' [data-option-type=\"0\"], [data-option-type=\"3\"]')\r\n                    .SwatchRendererTooltip();\r\n            }\r\n\r\n            // Hide all elements below more button\r\n            $('.' + classes.moreButton).nextAll().hide();\r\n\r\n            // Handle events like click or change\r\n            $widget._EventListener();\r\n\r\n            // Rewind options\r\n            $widget._Rewind(container);\r\n\r\n            //Emulate click on all swatches from Request\r\n            $widget._EmulateSelected($.parseQuery());\r\n            $widget._EmulateSelected($widget._getSelectedAttributes());\r\n        },\r\n\r\n        disableSwatchForOutOfStockProducts: function () {\r\n            let $widget = this, container = this.element;\r\n\r\n            $.each(this.options.jsonConfig.attributes, function () {\r\n                let item = this;\r\n\r\n                if ($widget.options.jsonConfig.canDisplayShowOutOfStockStatus) {\r\n                    let salableProducts = $widget.options.jsonConfig.salable[item.id],\r\n                        swatchOptions = $(container).find(`[data-attribute-id='${item.id}']`).find('.swatch-option');\r\n\r\n                    swatchOptions.each(function (key, value) {\r\n                        let optionId = $(value).data('option-id');\r\n\r\n                        if (!salableProducts.hasOwnProperty(optionId)) {\r\n                            $(value).attr('disabled', true).addClass('disabled');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render swatch options by part of config\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} controlId\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _RenderSwatchOptions: function (config, controlId) {\r\n            var optionConfig = this.options.jsonSwatchConfig[config.id],\r\n                optionClass = this.options.classes.optionClass,\r\n                sizeConfig = this.options.jsonSwatchImageSizeConfig,\r\n                moreLimit = parseInt(this.options.numberToShow, 10),\r\n                moreClass = this.options.classes.moreButton,\r\n                moreText = this.options.moreButtonText,\r\n                countAttributes = 0,\r\n                html = '';\r\n\r\n            if (!this.options.jsonSwatchConfig.hasOwnProperty(config.id)) {\r\n                return '';\r\n            }\r\n\r\n            $.each(config.options, function (index) {\r\n                var id,\r\n                    type,\r\n                    value,\r\n                    thumb,\r\n                    label,\r\n                    width,\r\n                    height,\r\n                    attr,\r\n                    swatchImageWidth,\r\n                    swatchImageHeight;\r\n\r\n                if (!optionConfig.hasOwnProperty(this.id)) {\r\n                    return '';\r\n                }\r\n\r\n                // Add more button\r\n                if (moreLimit === countAttributes++) {\r\n                    html += '<a href=\"#\" class=\"' + moreClass + '\"><span>' + moreText + '</span></a>';\r\n                }\r\n\r\n                id = this.id;\r\n                type = parseInt(optionConfig[id].type, 10);\r\n                value = optionConfig[id].hasOwnProperty('value') ?\r\n                    $('<i></i>').text(optionConfig[id].value).html() : '';\r\n                thumb = optionConfig[id].hasOwnProperty('thumb') ? optionConfig[id].thumb : '';\r\n                width = _.has(sizeConfig, 'swatchThumb') ? sizeConfig.swatchThumb.width : 110;\r\n                height = _.has(sizeConfig, 'swatchThumb') ? sizeConfig.swatchThumb.height : 90;\r\n                label = this.label ? $('<i></i>').text(this.label).html() : '';\r\n                attr =\r\n                    ' id=\"' + controlId + '-item-' + id + '\"' +\r\n                    ' index=\"' + index + '\"' +\r\n                    ' aria-checked=\"false\"' +\r\n                    ' aria-describedby=\"' + controlId + '\"' +\r\n                    ' tabindex=\"0\"' +\r\n                    ' data-option-type=\"' + type + '\"' +\r\n                    ' data-option-id=\"' + id + '\"' +\r\n                    ' data-option-label=\"' + label + '\"' +\r\n                    ' aria-label=\"' + label + '\"' +\r\n                    ' role=\"option\"' +\r\n                    ' data-thumb-width=\"' + width + '\"' +\r\n                    ' data-thumb-height=\"' + height + '\"';\r\n\r\n                attr += thumb !== '' ? ' data-option-tooltip-thumb=\"' + thumb + '\"' : '';\r\n                attr += value !== '' ? ' data-option-tooltip-value=\"' + value + '\"' : '';\r\n\r\n                swatchImageWidth = _.has(sizeConfig, 'swatchImage') ? sizeConfig.swatchImage.width : 30;\r\n                swatchImageHeight = _.has(sizeConfig, 'swatchImage') ? sizeConfig.swatchImage.height : 20;\r\n\r\n                if (!this.hasOwnProperty('products') || this.products.length <= 0) {\r\n                    attr += ' data-option-empty=\"true\"';\r\n                }\r\n\r\n                if (type === 0) {\r\n                    // Text\r\n                    html += '<div class=\"' + optionClass + ' text\" ' + attr + '>' + (value ? value : label) +\r\n                        '</div>';\r\n                } else if (type === 1) {\r\n                    // Color\r\n                    html += '<div class=\"' + optionClass + ' color\" ' + attr +\r\n                        ' style=\"background: ' + value +\r\n                        ' no-repeat center; background-size: initial;\">' + '' +\r\n                        '</div>';\r\n                } else if (type === 2) {\r\n                    // Image\r\n                    html += '<div class=\"' + optionClass + ' image\" ' + attr +\r\n                        ' style=\"background: url(' + value + ') no-repeat center; background-size: initial;width:' +\r\n                        swatchImageWidth + 'px; height:' + swatchImageHeight + 'px\">' + '' +\r\n                        '</div>';\r\n                } else if (type === 3) {\r\n                    // Clear\r\n                    html += '<div class=\"' + optionClass + '\" ' + attr + '></div>';\r\n                } else {\r\n                    // Default\r\n                    html += '<div class=\"' + optionClass + '\" ' + attr + '>' + label + '</div>';\r\n                }\r\n            });\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * Render select by part of config\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} chooseText\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _RenderSwatchSelect: function (config, chooseText) {\r\n            var html;\r\n\r\n            if (this.options.jsonSwatchConfig.hasOwnProperty(config.id)) {\r\n                return '';\r\n            }\r\n\r\n            html =\r\n                '<select class=\"' + this.options.classes.selectClass + ' ' + config.code + '\">' +\r\n                '<option value=\"0\" data-option-id=\"0\">' + chooseText + '</option>';\r\n\r\n            $.each(config.options, function () {\r\n                var label = this.label,\r\n                    attr = ' value=\"' + this.id + '\" data-option-id=\"' + this.id + '\"';\r\n\r\n                if (!this.hasOwnProperty('products') || this.products.length <= 0) {\r\n                    attr += ' data-option-empty=\"true\"';\r\n                }\r\n\r\n                html += '<option ' + attr + '>' + label + '</option>';\r\n            });\r\n\r\n            html += '</select>';\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * Input for submit form.\r\n         * This control shouldn't have \"type=hidden\", \"display: none\" for validation work :(\r\n         *\r\n         * @param {Object} config\r\n         * @private\r\n         */\r\n        _RenderFormInput: function (config) {\r\n            return '<input class=\"' + this.options.classes.attributeInput + ' super-attribute-select\" ' +\r\n                'name=\"super_attribute[' + config.id + ']\" ' +\r\n                'type=\"text\" ' +\r\n                'value=\"\" ' +\r\n                'data-selector=\"super_attribute[' + config.id + ']\" ' +\r\n                'data-validate=\"{required: true}\" ' +\r\n                'aria-required=\"true\" ' +\r\n                'aria-invalid=\"false\">';\r\n        },\r\n\r\n        /**\r\n         * Event listener\r\n         *\r\n         * @private\r\n         */\r\n        _EventListener: function () {\r\n            var $widget = this,\r\n                options = this.options.classes,\r\n                target;\r\n\r\n            $widget.element.on('click', '.' + options.optionClass, function () {\r\n                return $widget._OnClick($(this), $widget);\r\n            });\r\n\r\n            $widget.element.on('change', '.' + options.selectClass, function () {\r\n                return $widget._OnChange($(this), $widget);\r\n            });\r\n\r\n            $widget.element.on('click', '.' + options.moreButton, function (e) {\r\n                e.preventDefault();\r\n\r\n                return $widget._OnMoreClick($(this));\r\n            });\r\n\r\n            $widget.element.on('keydown', function (e) {\r\n                if (e.which === 13) {\r\n                    target = $(e.target);\r\n\r\n                    if (target.is('.' + options.optionClass)) {\r\n                        return $widget._OnClick(target, $widget);\r\n                    } else if (target.is('.' + options.selectClass)) {\r\n                        return $widget._OnChange(target, $widget);\r\n                    } else if (target.is('.' + options.moreButton)) {\r\n                        e.preventDefault();\r\n\r\n                        return $widget._OnMoreClick(target);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Load media gallery using ajax or json config.\r\n         *\r\n         * @private\r\n         */\r\n        _loadMedia: function () {\r\n            var $main = this.inProductList ?\r\n                    this.element.parents('.product-item-info') :\r\n                    this.element.parents('.column.main'),\r\n                images;\r\n\r\n            if (this.options.useAjax) {\r\n                this._debouncedLoadProductMedia();\r\n            }  else {\r\n                images = this.options.jsonConfig.images[this.getProduct()];\r\n\r\n                if (!images) {\r\n                    images = this.options.mediaGalleryInitial;\r\n                }\r\n                this.updateBaseImage(this._sortImages(images), $main, !this.inProductList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sorting images array\r\n         *\r\n         * @private\r\n         */\r\n        _sortImages: function (images) {\r\n            return _.sortBy(images, function (image) {\r\n                return parseInt(image.position, 10);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Event for swatch options\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $widget\r\n         * @private\r\n         */\r\n        _OnClick: function ($this, $widget) {\r\n            var $parent = $this.parents('.' + $widget.options.classes.attributeClass),\r\n                $wrapper = $this.parents('.' + $widget.options.classes.attributeOptionsWrapper),\r\n                $label = $parent.find('.' + $widget.options.classes.attributeSelectedOptionLabelClass),\r\n                attributeId = $parent.data('attribute-id'),\r\n                $input = $parent.find('.' + $widget.options.classes.attributeInput),\r\n                checkAdditionalData = JSON.parse(this.options.jsonSwatchConfig[attributeId]['additional_data']),\r\n                $priceBox = $widget.element.parents($widget.options.selectorProduct)\r\n                    .find(this.options.selectorProductPrice);\r\n\r\n            if ($widget.inProductList) {\r\n                $input = $widget.productForm.find(\r\n                    '.' + $widget.options.classes.attributeInput + '[name=\"super_attribute[' + attributeId + ']\"]'\r\n                );\r\n            }\r\n\r\n            if ($this.hasClass('disabled')) {\r\n                return;\r\n            }\r\n\r\n            if ($this.hasClass('selected')) {\r\n                $parent.removeAttr('data-option-selected').find('.selected').removeClass('selected');\r\n                $input.val('');\r\n                $label.text('');\r\n                $this.attr('aria-checked', false);\r\n            } else {\r\n                $parent.attr('data-option-selected', $this.data('option-id')).find('.selected').removeClass('selected');\r\n                $label.text($this.data('option-label'));\r\n                $input.val($this.data('option-id'));\r\n                $input.attr('data-attr-name', this._getAttributeCodeById(attributeId));\r\n                $this.addClass('selected');\r\n                $widget._toggleCheckedAttributes($this, $wrapper);\r\n            }\r\n\r\n            $widget._Rebuild();\r\n\r\n            if ($priceBox.is(':data(mage-priceBox)')) {\r\n                $widget._UpdatePrice();\r\n            }\r\n\r\n            $(document).trigger('updateMsrpPriceBlock',\r\n                [\r\n                    this._getSelectedOptionPriceIndex(),\r\n                    $widget.options.jsonConfig.optionPrices,\r\n                    $priceBox\r\n                ]);\r\n\r\n            if (parseInt(checkAdditionalData['update_product_preview_image'], 10) === 1) {\r\n                $widget._loadMedia();\r\n            }\r\n\r\n            $input.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Get selected option price index\r\n         *\r\n         * @return {String|undefined}\r\n         * @private\r\n         */\r\n        _getSelectedOptionPriceIndex: function () {\r\n            var allowedProduct = this._getAllowedProductWithMinPrice(this._CalcProducts());\r\n\r\n            if (_.isEmpty(allowedProduct)) {\r\n                return undefined;\r\n            }\r\n\r\n            return allowedProduct;\r\n        },\r\n\r\n        /**\r\n         * Get human readable attribute code (eg. size, color) by it ID from configuration\r\n         *\r\n         * @param {Number} attributeId\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getAttributeCodeById: function (attributeId) {\r\n            var attribute = this.options.jsonConfig.mappedAttributes[attributeId];\r\n\r\n            return attribute ? attribute.code : attributeId;\r\n        },\r\n\r\n        /**\r\n         * Toggle accessibility attributes\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $wrapper\r\n         * @private\r\n         */\r\n        _toggleCheckedAttributes: function ($this, $wrapper) {\r\n            $wrapper.attr('aria-activedescendant', $this.attr('id'))\r\n                    .find('.' + this.options.classes.optionClass).attr('aria-checked', false);\r\n            $this.attr('aria-checked', true);\r\n        },\r\n\r\n        /**\r\n         * Event for select\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $widget\r\n         * @private\r\n         */\r\n        _OnChange: function ($this, $widget) {\r\n            var $parent = $this.parents('.' + $widget.options.classes.attributeClass),\r\n                attributeId = $parent.data('attribute-id'),\r\n                $input = $parent.find('.' + $widget.options.classes.attributeInput);\r\n\r\n            if ($widget.productForm.length > 0) {\r\n                $input = $widget.productForm.find(\r\n                    '.' + $widget.options.classes.attributeInput + '[name=\"super_attribute[' + attributeId + ']\"]'\r\n                );\r\n            }\r\n\r\n            if ($this.val() > 0) {\r\n                $parent.attr('data-option-selected', $this.val());\r\n                $input.val($this.val());\r\n            } else {\r\n                $parent.removeAttr('data-option-selected');\r\n                $input.val('');\r\n            }\r\n\r\n            $widget._Rebuild();\r\n            $widget._UpdatePrice();\r\n            $widget._loadMedia();\r\n            $input.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Event for more switcher\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _OnMoreClick: function ($this) {\r\n            $this.nextAll().show();\r\n            $this.trigger('blur').remove();\r\n        },\r\n\r\n        /**\r\n         * Rewind options for controls\r\n         *\r\n         * @private\r\n         */\r\n        _Rewind: function (controls) {\r\n            controls.find('div[data-option-id], option[data-option-id]')\r\n                .removeClass('disabled')\r\n                .prop('disabled', false);\r\n            controls.find('div[data-option-empty], option[data-option-empty]')\r\n                .attr('disabled', true)\r\n                .addClass('disabled')\r\n                .attr('tabindex', '-1');\r\n            this.disableSwatchForOutOfStockProducts();\r\n        },\r\n\r\n        /**\r\n         * Rebuild container\r\n         *\r\n         * @private\r\n         */\r\n        _Rebuild: function () {\r\n            var $widget = this,\r\n                controls = $widget.element.find('.' + $widget.options.classes.attributeClass + '[data-attribute-id]'),\r\n                selected = controls.filter('[data-option-selected]');\r\n\r\n            // Enable all options\r\n            $widget._Rewind(controls);\r\n\r\n            // done if nothing selected\r\n            if (selected.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            // Disable not available options\r\n            controls.each(function () {\r\n                var $this = $(this),\r\n                    id = $this.data('attribute-id'),\r\n                    products = $widget._CalcProducts(id);\r\n\r\n                if (selected.length === 1 && selected.first().data('attribute-id') === id) {\r\n                    return;\r\n                }\r\n\r\n                $this.find('[data-option-id]').each(function () {\r\n                    var $element = $(this),\r\n                        option = $element.data('option-id');\r\n\r\n                    if (!$widget.optionsMap.hasOwnProperty(id) || !$widget.optionsMap[id].hasOwnProperty(option) ||\r\n                        $element.hasClass('selected') ||\r\n                        $element.is(':selected')) {\r\n                        return;\r\n                    }\r\n\r\n                    if (_.intersection(products, $widget.optionsMap[id][option].products).length <= 0) {\r\n                        $element.attr('disabled', true).addClass('disabled');\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get selected product list\r\n         *\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _CalcProducts: function ($skipAttributeId) {\r\n            var $widget = this,\r\n                selectedOptions = '.' + $widget.options.classes.attributeClass + '[data-option-selected]',\r\n                products = [];\r\n\r\n            // Generate intersection of products\r\n            $widget.element.find(selectedOptions).each(function () {\r\n                var id = $(this).data('attribute-id'),\r\n                    option = $(this).attr('data-option-selected');\r\n\r\n                if ($skipAttributeId !== undefined && $skipAttributeId === id) {\r\n                    return;\r\n                }\r\n\r\n                if (!$widget.optionsMap.hasOwnProperty(id) || !$widget.optionsMap[id].hasOwnProperty(option)) {\r\n                    return;\r\n                }\r\n\r\n                if (products.length === 0) {\r\n                    products = $widget.optionsMap[id][option].products;\r\n                } else {\r\n                    products = _.intersection(products, $widget.optionsMap[id][option].products);\r\n                }\r\n            });\r\n\r\n            return products;\r\n        },\r\n\r\n        /**\r\n         * Update total price\r\n         *\r\n         * @private\r\n         */\r\n        _UpdatePrice: function () {\r\n            var $widget = this,\r\n                $product = $widget.element.parents($widget.options.selectorProduct),\r\n                $productPrice = $product.find(this.options.selectorProductPrice),\r\n                result = $widget._getNewPrices(),\r\n                tierPriceHtml,\r\n                isShow;\r\n\r\n            $productPrice.trigger(\r\n                'updatePrice',\r\n                {\r\n                    'prices': $widget._getPrices(result, $productPrice.priceBox('option').prices)\r\n                }\r\n            );\r\n\r\n            isShow = typeof result != 'undefined' && result.oldPrice.amount !== result.finalPrice.amount;\r\n\r\n            $productPrice.find('span:first').toggleClass('special-price', isShow);\r\n\r\n            $product.find(this.options.slyOldPriceSelector)[isShow ? 'show' : 'hide']();\r\n\r\n            if (typeof result != 'undefined' && result.tierPrices && result.tierPrices.length) {\r\n                if (this.options.tierPriceTemplate) {\r\n                    tierPriceHtml = mageTemplate(\r\n                        this.options.tierPriceTemplate,\r\n                        {\r\n                            'tierPrices': result.tierPrices,\r\n                            '$t': $t,\r\n                            'currencyFormat': this.options.jsonConfig.currencyFormat,\r\n                            'priceUtils': priceUtils\r\n                        }\r\n                    );\r\n                    $(this.options.tierPriceBlockSelector).html(tierPriceHtml).show();\r\n                }\r\n            } else {\r\n                $(this.options.tierPriceBlockSelector).hide();\r\n            }\r\n\r\n            $(this.options.normalPriceLabelSelector).hide();\r\n\r\n            _.each($('.' + this.options.classes.attributeOptionsWrapper), function (attribute) {\r\n                if ($(attribute).find('.' + this.options.classes.optionClass + '.selected').length === 0) {\r\n                    if ($(attribute).find('.' + this.options.classes.selectClass).length > 0) {\r\n                        _.each($(attribute).find('.' + this.options.classes.selectClass), function (dropdown) {\r\n                            if ($(dropdown).val() === '0') {\r\n                                $(this.options.normalPriceLabelSelector).show();\r\n                            }\r\n                        }.bind(this));\r\n                    } else {\r\n                        $(this.options.normalPriceLabelSelector).show();\r\n                    }\r\n                }\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Get new prices for selected options\r\n         *\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getNewPrices: function () {\r\n            var $widget = this,\r\n                newPrices = $widget.options.jsonConfig.prices,\r\n                allowedProduct = this._getAllowedProductWithMinPrice(this._CalcProducts());\r\n\r\n            if (!_.isEmpty(allowedProduct)) {\r\n                newPrices = this.options.jsonConfig.optionPrices[allowedProduct];\r\n            }\r\n\r\n            return newPrices;\r\n        },\r\n\r\n        /**\r\n         * Get prices\r\n         *\r\n         * @param {Object} newPrices\r\n         * @param {Object} displayPrices\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getPrices: function (newPrices, displayPrices) {\r\n            var $widget = this;\r\n\r\n            if (_.isEmpty(newPrices)) {\r\n                newPrices = $widget._getNewPrices();\r\n            }\r\n            _.each(displayPrices, function (price, code) {\r\n\r\n                if (newPrices[code]) {\r\n                    displayPrices[code].amount = newPrices[code].amount - displayPrices[code].amount;\r\n                }\r\n            });\r\n\r\n            return displayPrices;\r\n        },\r\n\r\n        /**\r\n         * Get product with minimum price from selected options.\r\n         *\r\n         * @param {Array} allowedProducts\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\r\n            var optionPrices = this.options.jsonConfig.optionPrices,\r\n                product = {},\r\n                optionFinalPrice, optionMinPrice;\r\n\r\n            _.each(allowedProducts, function (allowedProduct) {\r\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\r\n\r\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\r\n                    optionMinPrice = optionFinalPrice;\r\n                    product = allowedProduct;\r\n                }\r\n            }, this);\r\n\r\n            return product;\r\n        },\r\n\r\n        /**\r\n         * Gets all product media and change current to the needed one\r\n         *\r\n         * @private\r\n         */\r\n        _LoadProductMedia: function () {\r\n            var $widget = this,\r\n                $this = $widget.element,\r\n                productData = this._determineProductData(),\r\n                mediaCallData,\r\n                mediaCacheKey,\r\n\r\n                /**\r\n                 * Processes product media data\r\n                 *\r\n                 * @param {Object} data\r\n                 * @returns void\r\n                 */\r\n                mediaSuccessCallback = function (data) {\r\n                    if (!(mediaCacheKey in $widget.options.mediaCache)) {\r\n                        $widget.options.mediaCache[mediaCacheKey] = data;\r\n                    }\r\n                    $widget._ProductMediaCallback($this, data, productData.isInProductView);\r\n                    setTimeout(function () {\r\n                        $widget._DisableProductMediaLoader($this);\r\n                    }, 300);\r\n                };\r\n\r\n            if (!$widget.options.mediaCallback) {\r\n                return;\r\n            }\r\n\r\n            mediaCallData = {\r\n                'product_id': this.getProduct()\r\n            };\r\n\r\n            mediaCacheKey = JSON.stringify(mediaCallData);\r\n\r\n            if (mediaCacheKey in $widget.options.mediaCache) {\r\n                $widget._XhrKiller();\r\n                $widget._EnableProductMediaLoader($this);\r\n                mediaSuccessCallback($widget.options.mediaCache[mediaCacheKey]);\r\n            } else {\r\n                mediaCallData.isAjax = true;\r\n                $widget._XhrKiller();\r\n                $widget._EnableProductMediaLoader($this);\r\n                $widget.xhr = $.ajax({\r\n                    url: $widget.options.mediaCallback,\r\n                    cache: true,\r\n                    type: 'GET',\r\n                    dataType: 'json',\r\n                    data: mediaCallData,\r\n                    success: mediaSuccessCallback\r\n                }).done(function () {\r\n                    $widget._XhrKiller();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable loader\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _EnableProductMediaLoader: function ($this) {\r\n            var $widget = this;\r\n\r\n            if ($('body.catalog-product-view').length > 0) {\r\n                $this.parents('.column.main').find('.photo.image')\r\n                    .addClass($widget.options.classes.loader);\r\n            } else {\r\n                //Category View\r\n                $this.parents('.product-item-info').find('.product-image-photo')\r\n                    .addClass($widget.options.classes.loader);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable loader\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _DisableProductMediaLoader: function ($this) {\r\n            var $widget = this;\r\n\r\n            if ($('body.catalog-product-view').length > 0) {\r\n                $this.parents('.column.main').find('.photo.image')\r\n                    .removeClass($widget.options.classes.loader);\r\n            } else {\r\n                //Category View\r\n                $this.parents('.product-item-info').find('.product-image-photo')\r\n                    .removeClass($widget.options.classes.loader);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback for product media\r\n         *\r\n         * @param {Object} $this\r\n         * @param {String} response\r\n         * @param {Boolean} isInProductView\r\n         * @private\r\n         */\r\n        _ProductMediaCallback: function ($this, response, isInProductView) {\r\n            var $main = isInProductView ? $this.parents('.column.main') : $this.parents('.product-item-info'),\r\n                $widget = this,\r\n                images = [],\r\n\r\n                /**\r\n                 * Check whether object supported or not\r\n                 *\r\n                 * @param {Object} e\r\n                 * @returns {*|Boolean}\r\n                 */\r\n                support = function (e) {\r\n                    return e.hasOwnProperty('large') && e.hasOwnProperty('medium') && e.hasOwnProperty('small');\r\n                };\r\n\r\n            if (_.size($widget) < 1 || !support(response)) {\r\n                this.updateBaseImage(this.options.mediaGalleryInitial, $main, isInProductView);\r\n\r\n                return;\r\n            }\r\n\r\n            images.push({\r\n                full: response.large,\r\n                img: response.medium,\r\n                thumb: response.small,\r\n                isMain: true\r\n            });\r\n\r\n            if (response.hasOwnProperty('gallery')) {\r\n                $.each(response.gallery, function () {\r\n                    if (!support(this) || response.large === this.large) {\r\n                        return;\r\n                    }\r\n                    images.push({\r\n                        full: this.large,\r\n                        img: this.medium,\r\n                        thumb: this.small\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.updateBaseImage(images, $main, isInProductView);\r\n        },\r\n\r\n        /**\r\n         * Check if images to update are initial and set their type\r\n         * @param {Array} images\r\n         */\r\n        _setImageType: function (images) {\r\n\r\n            images.map(function (img) {\r\n                if (!img.type) {\r\n                    img.type = 'image';\r\n                }\r\n            });\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * Update [gallery-placeholder] or [product-image-photo]\r\n         * @param {Array} images\r\n         * @param {jQuery} context\r\n         * @param {Boolean} isInProductView\r\n         */\r\n        updateBaseImage: function (images, context, isInProductView) {\r\n            var justAnImage = images[0],\r\n                initialImages = this.options.mediaGalleryInitial,\r\n                imagesToUpdate,\r\n                gallery = context.find(this.options.mediaGallerySelector).data('gallery'),\r\n                isInitial;\r\n\r\n            if (isInProductView) {\r\n                if (_.isUndefined(gallery)) {\r\n                    context.find(this.options.mediaGallerySelector).on('gallery:loaded', function () {\r\n                        this.updateBaseImage(images, context, isInProductView);\r\n                    }.bind(this));\r\n\r\n                    return;\r\n                }\r\n\r\n                imagesToUpdate = images.length ? this._setImageType($.extend(true, [], images)) : [];\r\n                isInitial = _.isEqual(imagesToUpdate, initialImages);\r\n\r\n                if (this.options.gallerySwitchStrategy === 'prepend' && !isInitial) {\r\n                    imagesToUpdate = imagesToUpdate.concat(initialImages);\r\n                }\r\n\r\n                imagesToUpdate = this._setImageIndex(imagesToUpdate);\r\n\r\n                gallery.updateData(imagesToUpdate);\r\n                this._addFotoramaVideoEvents(isInitial);\r\n            } else if (justAnImage && justAnImage.img) {\r\n                context.find('.product-image-photo').attr('src', justAnImage.img);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add video events\r\n         *\r\n         * @param {Boolean} isInitial\r\n         * @private\r\n         */\r\n        _addFotoramaVideoEvents: function (isInitial) {\r\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\r\n                return;\r\n            }\r\n\r\n            if (isInitial) {\r\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\r\n\r\n                return;\r\n            }\r\n\r\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\r\n                selectedOption: this.getProduct(),\r\n                dataMergeStrategy: this.options.gallerySwitchStrategy\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set correct indexes for image set.\r\n         *\r\n         * @param {Array} images\r\n         * @private\r\n         */\r\n        _setImageIndex: function (images) {\r\n            var length = images.length,\r\n                i;\r\n\r\n            for (i = 0; length > i; i++) {\r\n                images[i].i = i + 1;\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * Kill doubled AJAX requests\r\n         *\r\n         * @private\r\n         */\r\n        _XhrKiller: function () {\r\n            var $widget = this;\r\n\r\n            if ($widget.xhr !== undefined && $widget.xhr !== null) {\r\n                $widget.xhr.abort();\r\n                $widget.xhr = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Emulate mouse click on all swatches that should be selected\r\n         * @param {Object} [selectedAttributes]\r\n         * @private\r\n         */\r\n        _EmulateSelected: function (selectedAttributes) {\r\n            $.each(selectedAttributes, $.proxy(function (attributeCode, optionId) {\r\n                var elem = this.element.find('.' + this.options.classes.attributeClass +\r\n                    '[data-attribute-code=\"' + attributeCode + '\"] [data-option-id=\"' + optionId + '\"]'),\r\n                    parentInput = elem.parent();\r\n\r\n                if (elem.hasClass('selected')) {\r\n                    return;\r\n                }\r\n\r\n                if (parentInput.hasClass(this.options.classes.selectClass)) {\r\n                    parentInput.val(optionId);\r\n                    parentInput.trigger('change');\r\n                } else {\r\n                    elem.trigger('click');\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Emulate mouse click or selection change on all swatches that should be selected\r\n         * @param {Object} [selectedAttributes]\r\n         * @private\r\n         */\r\n        _EmulateSelectedByAttributeId: function (selectedAttributes) {\r\n            $.each(selectedAttributes, $.proxy(function (attributeId, optionId) {\r\n                var elem = this.element.find('.' + this.options.classes.attributeClass +\r\n                    '[data-attribute-id=\"' + attributeId + '\"] [data-option-id=\"' + optionId + '\"]'),\r\n                    parentInput = elem.parent();\r\n\r\n                if (elem.hasClass('selected')) {\r\n                    return;\r\n                }\r\n\r\n                if (parentInput.hasClass(this.options.classes.selectClass)) {\r\n                    parentInput.val(optionId);\r\n                    parentInput.trigger('change');\r\n                } else {\r\n                    elem.trigger('click');\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Get default options values settings with either URL query parameters\r\n         * @private\r\n         */\r\n        _getSelectedAttributes: function () {\r\n            var hashIndex = window.location.href.indexOf('#'),\r\n                selectedAttributes = {},\r\n                params;\r\n\r\n            if (hashIndex !== -1) {\r\n                params = $.parseQuery(window.location.href.substr(hashIndex + 1));\r\n\r\n                selectedAttributes = _.invert(_.mapObject(_.invert(params), function (attributeId) {\r\n                    var attribute = this.options.jsonConfig.mappedAttributes[attributeId];\r\n\r\n                    return attribute ? attribute.code : attributeId;\r\n                }.bind(this)));\r\n            }\r\n\r\n            return selectedAttributes;\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         *\r\n         * @param {HTMLElement} element - DOM element associated with a gallery.\r\n         */\r\n        _onGalleryLoaded: function (element) {\r\n            var galleryObject = element.data('gallery');\r\n\r\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\r\n        },\r\n\r\n        /**\r\n         * Sets mediaCache for cases when jsonConfig contains preSelectedGallery on layered navigation result pages\r\n         *\r\n         * @private\r\n         */\r\n        _setPreSelectedGallery: function () {\r\n            var mediaCallData;\r\n\r\n            if (this.options.jsonConfig.preSelectedGallery) {\r\n                mediaCallData = {\r\n                    'product_id': this.getProduct()\r\n                };\r\n\r\n                this.options.mediaCache[JSON.stringify(mediaCallData)] = this.options.jsonConfig.preSelectedGallery;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback for quantity change event.\r\n         */\r\n        _onQtyChanged: function () {\r\n            var $price = this.element.parents(this.options.selectorProduct)\r\n                .find(this.options.selectorProductPrice);\r\n\r\n            $price.trigger(\r\n                'updatePrice',\r\n                {\r\n                    'prices': this._getPrices(this._getNewPrices(), $price.priceBox('option').prices)\r\n                }\r\n            );\r\n        }\r\n    });\r\n\r\n    return $.mage.SwatchRenderer;\r\n});\r\n","Magento_Tax/js/price/adjustment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'mage/translate'\r\n], function (Element, $t) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            bodyTmpl: 'Magento_Tax/price/adjustment',\r\n            taxPriceType: 'final_price',\r\n            taxPriceCssClass: 'price-including-tax',\r\n            bothPrices: 3,\r\n            inclTax: 2,\r\n            exclTax: 1,\r\n            modules: {\r\n                price: '${ $.parentName }'\r\n            },\r\n            listens: {\r\n                price: 'initializePriceAttributes'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {@inheritdoc}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initializePriceAttributes();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update parent price.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initializePriceAttributes: function () {\r\n            if (this.displayBothPrices && this.price()) {\r\n                this.price().priceWrapperCssClasses = this.taxPriceCssClass;\r\n                this.price().priceWrapperAttr = {\r\n                    'data-label': $t('Incl. Tax')\r\n                };\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get price tax adjustment.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} tax html\r\n         */\r\n        getTax: function (row) {\r\n            return row['price_info']['extension_attributes']['tax_adjustments']['formatted_prices'][this.taxPriceType];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getTax.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} tax html\r\n         */\r\n        getTaxUnsanitizedHtml: function (row) {\r\n            return this.getTax(row);\r\n        },\r\n\r\n        /**\r\n         * Set price tax type.\r\n         *\r\n         * @param {String} priceType\r\n         * @return {Object}\r\n         */\r\n        setPriceType: function (priceType) {\r\n            this.taxPriceType = priceType;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display\r\n         * both price including tax and price excluding tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayBothPrices: function () {\r\n            return +this.source.data.displayTaxes === this.bothPrices;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display price including tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayPriceIncludeTax: function () {\r\n            return +this.source.data.displayTaxes === this.inclTax;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display price excluding tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayPriceExclTax: function () {\r\n            return +this.source.data.displayTaxes === this.exclTax;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/cart/totals/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/summary/grand-total'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @override\r\n         */\r\n        isDisplayed: function () {\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/cart/totals/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return !!quote.shippingMethod();\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            return '(' + this._super() + ')';\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/cart/totals/tax.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/summary/tax',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, totals) {\r\n    'use strict';\r\n\r\n    var isFullTaxSummaryDisplayed = window.checkoutConfig.isFullTaxSummaryDisplayed,\r\n        isZeroTaxDisplayed = window.checkoutConfig.isZeroTaxDisplayed;\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @override\r\n         */\r\n        ifShowValue: function () {\r\n            if (parseInt(this.getPureValue()) === 0) { //eslint-disable-line radix\r\n                return isZeroTaxDisplayed;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        ifShowDetails: function () {\r\n            return this.getPureValue() > 0 && isFullTaxSummaryDisplayed;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && totals.getSegment('tax') !== null;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        displaySubtotal: ko.observable(true),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.cart = customerData.get('cart');\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/shipping_method/price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils'\r\n], function (Component, quote, priceUtils) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Tax/checkout/shipping_method/price'\r\n        },\r\n        isDisplayShippingPriceExclTax: window.checkoutConfig.isDisplayShippingPriceExclTax,\r\n        isDisplayShippingBothPrices: window.checkoutConfig.isDisplayShippingBothPrices,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {Boolean}\r\n         */\r\n        isPriceEqual: function (item) {\r\n            return item['price_excl_tax'] != item['price_incl_tax']; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            //todo add format data\r\n            return priceUtils.formatPriceLocale(price, quote.getPriceFormat());\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, quote, priceUtils, totals) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isFullTaxSummaryDisplayed: window.checkoutConfig.isFullTaxSummaryDisplayed || false,\r\n            template: 'Magento_Tax/checkout/summary/grand-total'\r\n        },\r\n        totals: quote.getTotals(),\r\n        isTaxDisplayedInGrandTotal: window.checkoutConfig.includeTaxInGrandTotal || false,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = totals.getSegment('grand_total').value;\r\n            }\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getBaseValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = this.totals()['base_grand_total'];\r\n            }\r\n\r\n            return priceUtils.formatPriceLocale(price, quote.getBasePriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getGrandTotalExclTax: function () {\r\n            var total = this.totals(),\r\n                amount;\r\n\r\n            if (!total) {\r\n                return 0;\r\n            }\r\n\r\n            amount = total['grand_total'] - total['tax_amount'];\r\n\r\n            if (amount < 0) {\r\n                amount = 0;\r\n            }\r\n\r\n            return this.getFormattedPrice(amount);\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isBaseGrandTotalDisplayNeeded: function () {\r\n            var total = this.totals();\r\n\r\n            if (!total) {\r\n                return false;\r\n            }\r\n\r\n            return total['base_currency_code'] != total['quote_currency_code']; //eslint-disable-line eqeqeq\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function ($, Component, quote) {\r\n    'use strict';\r\n\r\n    var displayMode = window.checkoutConfig.reviewShippingDisplayMode;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            displayMode: displayMode,\r\n            template: 'Magento_Tax/checkout/summary/shipping'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isBothPricesDisplayed: function () {\r\n            return this.displayMode == 'both'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isIncludingDisplayed: function () {\r\n            return this.displayMode == 'including'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isExcludingDisplayed: function () {\r\n            return this.displayMode == 'excluding'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && quote.shippingMethod() != null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getIncludingValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price = this.totals()['shipping_incl_tax'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getExcludingValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price = this.totals()['shipping_amount'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    var displaySubtotalMode = window.checkoutConfig.reviewTotalsDisplayMode;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            displaySubtotalMode: displaySubtotalMode,\r\n            template: 'Magento_Tax/checkout/summary/subtotal'\r\n        },\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = this.totals().subtotal;\r\n            }\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isBothPricesDisplayed: function () {\r\n            return this.displaySubtotalMode == 'both'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isIncludingTaxDisplayed: function () {\r\n            return this.displaySubtotalMode == 'including'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValueInclTax: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = this.totals()['subtotal_incl_tax'];\r\n            }\r\n\r\n            return this.getFormattedPrice(price);\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/tax.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/totals',\r\n    'mage/translate',\r\n    'underscore'\r\n], function (ko, Component, quote, totals, $t, _) {\r\n    'use strict';\r\n\r\n    var isTaxDisplayedInGrandTotal = window.checkoutConfig.includeTaxInGrandTotal,\r\n        isFullTaxSummaryDisplayed = window.checkoutConfig.isFullTaxSummaryDisplayed,\r\n        isZeroTaxDisplayed = window.checkoutConfig.isZeroTaxDisplayed,\r\n        taxAmount = 0,\r\n        rates = 0;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isTaxDisplayedInGrandTotal: isTaxDisplayedInGrandTotal,\r\n            notCalculatedMessage: $t('Not yet calculated'),\r\n            template: 'Magento_Tax/checkout/summary/tax'\r\n        },\r\n        totals: quote.getTotals(),\r\n        isFullTaxSummaryDisplayed: isFullTaxSummaryDisplayed,\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        ifShowValue: function () {\r\n            if (this.isFullMode() && this.getPureValue() == 0) { //eslint-disable-line eqeqeq\r\n                return isZeroTaxDisplayed;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        ifShowDetails: function () {\r\n            if (!this.isFullMode()) {\r\n                return false;\r\n            }\r\n\r\n            return this.getPureValue() > 0 && isFullTaxSummaryDisplayed;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            var amount = 0,\r\n                taxTotal;\r\n\r\n            if (this.totals()) {\r\n                taxTotal = totals.getSegment('tax');\r\n\r\n                if (taxTotal) {\r\n                    amount = taxTotal.value;\r\n                }\r\n            }\r\n\r\n            return amount;\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && totals.getSegment('tax') != null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getValue: function () {\r\n            var amount;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            amount = totals.getSegment('tax').value;\r\n\r\n            return this.getFormattedPrice(amount);\r\n        },\r\n\r\n        /**\r\n         * @param {*} amount\r\n         * @return {*|String}\r\n         */\r\n        formatPrice: function (amount) {\r\n            return this.getFormattedPrice(amount);\r\n        },\r\n\r\n        /**\r\n         * @param {*} parent\r\n         * @param {*} percentage\r\n         * @return {*|String}\r\n         */\r\n        getTaxAmount: function (parent, percentage) {\r\n            var totalPercentage = 0;\r\n\r\n            taxAmount = parent.amount;\r\n            rates = parent.rates;\r\n            _.each(rates, function (rate) {\r\n                totalPercentage += parseFloat(rate.percent);\r\n            });\r\n\r\n            return this.getFormattedPrice(this.getPercentAmount(taxAmount, totalPercentage, percentage));\r\n        },\r\n\r\n        /**\r\n         * @param {*} amount\r\n         * @param {*} totalPercentage\r\n         * @param {*} percentage\r\n         * @return {*|String}\r\n         */\r\n        getPercentAmount: function (amount, totalPercentage, percentage) {\r\n            return parseFloat(amount * percentage / totalPercentage);\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getDetails: function () {\r\n            var taxSegment = totals.getSegment('tax');\r\n\r\n            if (taxSegment && taxSegment['extension_attributes']) {\r\n                return taxSegment['extension_attributes']['tax_grandtotal_details'];\r\n            }\r\n\r\n            return [];\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/item/details/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/item/details/subtotal'\r\n], function (subtotal) {\r\n    'use strict';\r\n\r\n    var displayPriceMode = window.checkoutConfig.reviewItemPriceDisplayMode || 'including';\r\n\r\n    return subtotal.extend({\r\n        defaults: {\r\n            displayPriceMode: displayPriceMode,\r\n            template: 'Magento_Tax/checkout/summary/item/details/subtotal'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isPriceInclTaxDisplayed: function () {\r\n            return displayPriceMode == 'both' || displayPriceMode == 'including'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isPriceExclTaxDisplayed: function () {\r\n            return displayPriceMode == 'both' || displayPriceMode == 'excluding'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValueInclTax: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total_incl_tax']);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValueExclTax: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total']);\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Theme/js/cookie-status.js":"define([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal) {\r\n    'use strict';\r\n\r\n    $.widget('mage.cookieStatus', {\r\n        options: {\r\n            type: 'popup',\r\n            responsive: true,\r\n            innerScroll: true,\r\n            autoOpen: true,\r\n            buttons: [{\r\n                text: $.mage.__('Close'),\r\n                class: 'cookie-status',\r\n\r\n                /**\r\n                 * Callback for click event\r\n                 */\r\n                click: function () {\r\n                    this.closeModal();\r\n                }\r\n            }]\r\n        },\r\n\r\n        /**\r\n         * Init object\r\n         * @private\r\n         */\r\n        _init: function () {\r\n\r\n            if (!navigator.cookieEnabled) {\r\n                modal(this.options, $('#cookie-status'));\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.cookieStatus;\r\n});\r\n","Magento_Theme/js/row-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * JQuery UI Widget declaration: 'mage.rowBuilder'\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'jquery-ui-modules/widget'\r\n], function ($, mageTemplate) {\r\n    'use strict';\r\n\r\n    $.widget('mage.rowBuilder', {\r\n\r\n        /**\r\n         * options with default values for setting up the template\r\n         */\r\n        options: {\r\n            //Default template options\r\n            rowTemplate: '#template-registrant',\r\n            rowContainer: '#registrant-container',\r\n            //Row index used by the template rows.\r\n            rowIndex: 0,\r\n            //Row count: Should not be set externally\r\n            rowCount: 0,\r\n            rowParentElem: '<li></li>',\r\n            rowContainerClass: 'fields',\r\n            addRowBtn: '#add-registrant-button',\r\n            btnRemoveIdPrefix: 'btn-remove',\r\n            btnRemoveSelector: '.btn-remove',\r\n            rowIdPrefix: 'row',\r\n            //This class is added to rows added after the first one. Adds the dotted separator\r\n            additionalRowClass: 'add-row',\r\n\r\n            /*\r\n             This is provided during widget instantiation. eg :\r\n             formDataPost : {\"formData\":formData,\"templateFields\":['field1-name','field2-name'] }\r\n             -\"formData\" is the multi-dimensional array of form field values : [['a','b'],['c','b']]\r\n             received from the server and encoded\r\n             -\"templateFields\" are the input fields in the template with index suffixed after the field name\r\n             eg field1-name{index}\r\n             */\r\n            formDataPost: null,\r\n            //Default selectors for add element of a template\r\n            addEventSelector: 'button',\r\n            //Default selectors for remove markup elements of a template\r\n            remEventSelector: 'a',\r\n            //This option allows adding first row delete option and a row separator\r\n            hideFirstRowAddSeparator: true,\r\n            //Max rows - This option should be set when instantiating the widget\r\n            maxRows: 1000,\r\n            maxRowsMsg: '#max-registrant-message'\r\n        },\r\n\r\n        /**\r\n         * Initialize create\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.rowTemplate = mageTemplate(this.options.rowTemplate);\r\n\r\n            this.options.rowCount = this.options.rowIndex = 0;\r\n\r\n            //On document ready related tasks\r\n            $($.proxy(this.ready, this));\r\n\r\n            //Binding template-wide events handlers for adding and removing rows\r\n            this.element.on(\r\n                'click',\r\n                this.options.addEventSelector + this.options.addRowBtn,\r\n                $.proxy(this.handleAdd, this)\r\n            );\r\n            this.element.on(\r\n                'click',\r\n                this.options.remEventSelector + this.options.btnRemoveSelector,\r\n                $.proxy(this.handleRemove, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Initialize template\r\n         * @public\r\n         */\r\n        ready: function () {\r\n            if (this.options.formDataPost &&\r\n                this.options.formDataPost.formData &&\r\n                this.options.formDataPost.formData.length\r\n            ) {\r\n                this.processFormDataArr(this.options.formDataPost);\r\n            } else if (this.options.rowIndex === 0 && this.options.maxRows !== 0) {\r\n                //If no form data , then add default row\r\n                this.addRow(0);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Process and loop through all row data to create preselected values. This is used for any error on submit.\r\n         * For complex implementations the inheriting widget can override this behavior\r\n         * @public\r\n         * @param {Object} formDataArr\r\n         */\r\n        processFormDataArr: function (formDataArr) {\r\n            var formData = formDataArr.formData,\r\n                templateFields = formDataArr.templateFields,\r\n                formRow,\r\n                i, j;\r\n\r\n            for (i = this.options.rowIndex = 0; i < formData.length; this.options.rowIndex = i++) {\r\n                this.addRow(i);\r\n\r\n                formRow = formData[i];\r\n\r\n                for (j = 0; j < formRow.length; j++) {\r\n                    this.setFieldById(templateFields[j] + i, formRow[j]);\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Initialize and create markup for template row. Add it to the parent container.\r\n         * The template processing will substitute row index at all places marked with _index_ in the template\r\n         * using the template\r\n         * @public\r\n         * @param {Number} index - current index/count of the created template. This will be used as the id\r\n         * @return {*}\r\n         */\r\n        addRow: function (index) {\r\n            var row = $(this.options.rowParentElem),\r\n                tmpl;\r\n\r\n            row.addClass(this.options.rowContainerClass).attr('id', this.options.rowIdPrefix + index);\r\n\r\n            tmpl = this.rowTemplate({\r\n                data: {\r\n                    _index_: index\r\n                }\r\n            });\r\n\r\n            $(tmpl).appendTo(row);\r\n\r\n            $(this.options.rowContainer).append(row).trigger('contentUpdated');\r\n\r\n            row.addClass(this.options.additionalRowClass);\r\n\r\n            //Remove 'delete' link and additionalRowClass for first row\r\n            if (this.options.rowIndex === 0 && this.options.hideFirstRowAddSeparator) {\r\n                $('#' + this._esc(this.options.btnRemoveIdPrefix) + '0').remove();\r\n                $('#' + this._esc(this.options.rowIdPrefix) + '0').removeClass(this.options.additionalRowClass);\r\n            }\r\n\r\n            this.maxRowCheck(++this.options.rowCount);\r\n\r\n            return row;\r\n        },\r\n\r\n        /**\r\n         * Remove return item information row\r\n         * @public\r\n         * @param {*} rowIndex - return item information row index\r\n         * @return {Boolean}\r\n         */\r\n        removeRow: function (rowIndex) {\r\n            $('#' + this._esc(this.options.rowIdPrefix) + rowIndex).remove();\r\n            this.maxRowCheck(--this.options.rowCount);\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Function to check if maximum rows are exceeded and render/hide maxMsg and Add btn\r\n         * @public\r\n         * @param {Number} rowIndex\r\n         */\r\n        maxRowCheck: function (rowIndex) {\r\n            var addRowBtn = $(this.options.addRowBtn),\r\n                maxRowMsg = $(this.options.maxRowsMsg);\r\n\r\n            //liIndex starts from 0\r\n            if (rowIndex >= this.options.maxRows) {\r\n                addRowBtn.hide();\r\n                maxRowMsg.show();\r\n            } else if (addRowBtn.is(':hidden')) {\r\n                addRowBtn.show();\r\n                maxRowMsg.hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set the value on given element\r\n         * @public\r\n         * @param {String} domId\r\n         * @param {String} value\r\n         */\r\n        setFieldById: function (domId, value) {\r\n            var x = $('#' + this._esc(domId));\r\n\r\n            if (x.length) {\r\n\r\n                if (x.is(':checkbox')) {\r\n                    x.attr('checked', true);\r\n                } else if (x.is('option')) {\r\n                    x.attr('selected', 'selected');\r\n                } else {\r\n                    x.val(value);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delegated handler for adding a row\r\n         * @public\r\n         * @return {Boolean}\r\n         */\r\n        handleAdd: function () {\r\n            this.addRow(++this.options.rowIndex);\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Delegated handler for removing a selected row\r\n         * @public\r\n         * @param {Object} e - Native event object\r\n         * @return {Boolean}\r\n         */\r\n        handleRemove: function (e) {\r\n            this.removeRow($(e.currentTarget).closest('[id^=\"' + this.options.btnRemoveIdPrefix + '\"]')\r\n                .attr('id').replace(this.options.btnRemoveIdPrefix, ''));\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Utility function to add escape chars for jquery selector strings\r\n         * @private\r\n         * @param {String} str - String to be processed\r\n         * @return {String}\r\n         */\r\n        _esc: function (str) {\r\n            return str ? str.replace(/([ ;&,.+*~\\':\"!\\^$\\[\\]()=>|\\/@])/g, '\\\\$1') : str;\r\n        }\r\n    });\r\n\r\n    return $.mage.rowBuilder;\r\n});\r\n","Magento_Theme/js/theme.js":"/**\r\n * Copyright \u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery',\r\n    'mage/smart-keyboard-handler',\r\n    'mage/mage',\r\n    'domReady!'\r\n], function ($, keyboardHandler) {\r\n    'use strict';\r\n    $(document).ready(function(){\r\n        $('.cart-summary').mage('sticky', {\r\n            container: '#maincontent'\r\n        });\r\n\r\n        $('.panel.header .header.links').clone().appendTo('#store\\\\.links');\r\n    });\r\n    keyboardHandler.apply();\r\n});\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    (function() {\r\n        var ev = new $.Event('classadded'),\r\n            orig = $.fn.addClass;\r\n        $.fn.addClass = function() {\r\n            $(this).trigger(ev, arguments);\r\n            return orig.apply(this, arguments);\r\n        }\r\n    })();\r\n    $.fn.extend({\r\n        scrollToMe: function(){\r\n            if($(this).length){\r\n                var top = $(this).offset().top - 100;\r\n                $('html,body').animate({scrollTop: top}, 300);\r\n            }\r\n        },\r\n        scrollToJustMe: function(){\r\n            if($(this).length){\r\n                var top = jQuery(this).offset().top;\r\n                $('html,body').animate({scrollTop: top}, 300);\r\n            }\r\n        }\r\n    });\r\n    $(document).ready(function(){\r\n        var windowScroll_t;\r\n        $(window).scroll(function(){\r\n            clearTimeout(windowScroll_t);\r\n            windowScroll_t = setTimeout(function(){\r\n                if(jQuery(this).scrollTop() > 100){\r\n                    $('#totop').fadeIn();\r\n                }else{\r\n                    $('#totop').fadeOut();\r\n                }\r\n            }, 500);\r\n        });\r\n        $('#totop').off(\"click\").on(\"click\",function(){\r\n            $('html, body').animate({scrollTop: 0}, 600);\r\n        });\r\n        if ($('body').hasClass('checkout-cart-index')) {\r\n            if ($('#co-shipping-method-form .fieldset.rates').length > 0 && $('#co-shipping-method-form .fieldset.rates :checked').length === 0) {\r\n                $('#block-shipping').on('collapsiblecreate', function () {\r\n                    $('#block-shipping').collapsible('forceActivate');\r\n                });\r\n            }\r\n        }\r\n        $(\".products-grid .weltpixel-quickview\").each(function(){\r\n            $(this).appendTo($(this).parent().parent().children(\".product-item-photo\"));\r\n        });\r\n        $(\".word-rotate\").each(function() {\r\n\r\n            var $this = $(this),\r\n                itemsWrapper = $(this).find(\".word-rotate-items\"),\r\n                items = itemsWrapper.find(\"> span\"),\r\n                firstItem = items.eq(0),\r\n                firstItemClone = firstItem.clone(),\r\n                itemHeight = 0,\r\n                currentItem = 1,\r\n                currentTop = 0;\r\n\r\n            itemHeight = firstItem.height();\r\n\r\n            itemsWrapper.append(firstItemClone);\r\n\r\n            $this\r\n                .height(itemHeight)\r\n                .addClass(\"active\");\r\n\r\n            setInterval(function() {\r\n                currentTop = (currentItem * itemHeight);\r\n\r\n                itemsWrapper.animate({\r\n                    top: -(currentTop) + \"px\"\r\n                }, 300, function() {\r\n                    currentItem++;\r\n                    if(currentItem > items.length) {\r\n                        itemsWrapper.css(\"top\", 0);\r\n                        currentItem = 1;\r\n                    }\r\n                });\r\n\r\n            }, 2000);\r\n\r\n        });\r\n        $(\".top-links-icon\").off(\"click\").on(\"click\", function(e){\r\n            if($(this).parent().children(\"ul.links\").hasClass(\"show\")) {\r\n                $(this).parent().children(\"ul.links\").removeClass(\"show\");\r\n            } else {\r\n                $(this).parent().children(\"ul.links\").addClass(\"show\");\r\n            }\r\n            e.stopPropagation();\r\n        });\r\n        $(\".top-links-icon\").parent().click(function(e){\r\n            e.stopPropagation();\r\n        });\r\n        $(\".search-toggle-icon\").click(function(e){\r\n            if($(this).parent().children(\".block-search\").hasClass(\"show\")) {\r\n                $(this).parent().children(\".block-search\").removeClass(\"show\");\r\n                $(this).removeClass('open');\r\n            } else {\r\n                $(this).parent().children(\".block-search\").addClass(\"show\");\r\n                $(this).addClass('open');\r\n            }\r\n            e.stopPropagation();\r\n        });\r\n        $(\".search-toggle-icon\").parent().click(function(e){\r\n            e.stopPropagation();\r\n        });\r\n        $(\"html,body\").click(function(){\r\n            $(\".search-toggle-icon\").parent().children(\".block-search\").removeClass(\"show\");\r\n            $('.autocomplete-suggestions').hide();\r\n            $(\".search-toggle-icon\").removeClass('open');\r\n            $(\".top-links-icon\").parent().children(\"ul.links\").removeClass(\"show\");\r\n        });\r\n\r\n        /********************* Qty Holder **************************/\r\n        $(document).on(\"click\", \".qtyplus\", function(e) {\r\n            // Stop acting like a button\r\n            e.preventDefault();\r\n            // Get its current value\r\n            var currentVal = parseInt($(this).parents('form').find('input[name=\"qty\"]').val());\r\n            // If is not undefined\r\n            if (!isNaN(currentVal)) {\r\n                // Increment\r\n                $(this).parents('form').find('input[name=\"qty\"]').val(currentVal + 1);\r\n            } else {\r\n                // Otherwise put a 0 there\r\n                $(this).parents('form').find('input[name=\"qty\"]').val(0);\r\n            }\r\n        });\r\n        // This button will decrement the value till 0\r\n        $(document).on(\"click\", \".qtyminus\", function(e) {\r\n            // Stop acting like a button\r\n            e.preventDefault();\r\n            // Get the field name\r\n            fieldName = $(this).attr('field');\r\n            // Get its current value\r\n            var currentVal = parseInt($(this).parents('form').find('input[name=\"qty\"]').val());\r\n            // If it isn't undefined or its greater than 0\r\n            if (!isNaN(currentVal) && currentVal > 0) {\r\n                // Decrement one\r\n                $(this).parents('form').find('input[name=\"qty\"]').val(currentVal - 1);\r\n            } else {\r\n                // Otherwise put a 0 there\r\n                $(this).parents('form').find('input[name=\"qty\"]').val(0);\r\n            }\r\n        });\r\n        $(\".qty-inc\").unbind('click').click(function(){\r\n            if($(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").is(':enabled')){\r\n                $(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").val((+$(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").val() + 1) || 0);\r\n                $(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").trigger('change');\r\n                $(this).focus();\r\n            }\r\n        });\r\n        $(\".qty-dec\").unbind('click').click(function(){\r\n            if($(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").is(':enabled')){\r\n                $(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").val(($(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").val() - 1 > 0) ? ($(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").val() - 1) : 0);\r\n                $(this).parents('.field.qty,.control.qty').find(\"input.input-text.qty\").trigger('change');\r\n                $(this).focus();\r\n            }\r\n        });\r\n    });\r\n});\r\nrequire([\r\n    'jquery',\r\n    'lazyload'\r\n], function ($) {\r\n    $(document).ready(function(){\r\n        $(\"img.porto-lazyload:not(.porto-lazyload-loaded)\").lazyload({effect:\"fadeIn\", effect_speed: 400 });\r\n        if ($('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').length) {\r\n            $('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('initialized.owl.carousel', function() {\r\n                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\r\n            });\r\n            $('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('changed.owl.carousel', function() {\r\n                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\r\n            });\r\n        }\r\n        window.setTimeout(function(){\r\n            $('.sidebar-filterproducts').find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\r\n        },500);\r\n    });\r\n});\r\n","Magento_Theme/js/model/breadcrumb-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return [];\r\n});\r\n","Magento_Theme/js/view/add-home-breadcrumb.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* eslint-disable max-nested-callbacks, no-undef */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Theme/js/model/breadcrumb-list',\r\n    'mage/translate'\r\n], function ($, breadcrumbList) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @return {Object}\r\n     */\r\n    var homeCrumb = function () {\r\n        return {\r\n            name: 'home',\r\n            label: $.mage.__('Home'),\r\n            title: $.mage.__('Go to Home Page'),\r\n            link: BASE_URL || ''\r\n        };\r\n    };\r\n\r\n    return function (breadcrumb) {\r\n\r\n        breadcrumbList.unshift(homeCrumb());\r\n\r\n        return breadcrumb;\r\n    };\r\n});\r\n","Magento_Theme/js/view/breadcrumbs.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Theme/js/model/breadcrumb-list',\r\n    'text!Magento_Theme/templates/breadcrumbs.html',\r\n    'jquery-ui-modules/widget'\r\n], function ($, mageTemplate, breadcrumbList, tpl) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Breadcrumb Widget.\r\n     */\r\n    $.widget('mage.breadcrumbs', {\r\n\r\n        /** @inheritdoc */\r\n        _init: function () {\r\n            this._super();\r\n            this._render();\r\n        },\r\n\r\n        /**\r\n         * Render breadcrumb.\r\n         *\r\n         * @private\r\n         */\r\n        _render: function () {\r\n            var html,\r\n                crumbs = breadcrumbList,\r\n                template = mageTemplate(tpl);\r\n\r\n            this._decorate(crumbs);\r\n\r\n            html = template({\r\n                'breadcrumbs': crumbs\r\n            });\r\n\r\n            if (html.length) {\r\n                $(this.element).html(html);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Decorate list.\r\n         *\r\n         * @param {Array} list\r\n         * @private\r\n         */\r\n        _decorate: function (list) {\r\n\r\n            if (list.length) {\r\n                list[0].first = true;\r\n            }\r\n\r\n            if (list.length > 1) {\r\n                list[list.length - 1].last = true;\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.breadcrumbs;\r\n});\r\n","Magento_Theme/js/view/messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore',\r\n    'escaper',\r\n    'jquery/jquery-storageapi'\r\n], function ($, Component, customerData, _, escaper) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            cookieMessages: [],\r\n            messages: [],\r\n            allowedTags: ['div', 'span', 'b', 'strong', 'i', 'em', 'u', 'a']\r\n        },\r\n\r\n        /**\r\n         * Extends Component object by storage observable messages.\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.cookieMessages = _.unique($.cookieStorage.get('mage-messages'), 'text');\r\n            this.messages = customerData.get('messages').extend({\r\n                disposableCustomerData: 'messages'\r\n            });\r\n\r\n            // Force to clean obsolete messages\r\n            if (!_.isEmpty(this.messages().messages)) {\r\n                customerData.set('messages', {});\r\n            }\r\n\r\n            $.mage.cookies.set('mage-messages', '', {\r\n                samesite: 'strict',\r\n                domain: ''\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prepare the given message to be rendered as HTML\r\n         *\r\n         * @param {String} message\r\n         * @return {String}\r\n         */\r\n        prepareMessageForHtml: function (message) {\r\n            return escaper.escapeHtml(message, this.allowedTags);\r\n        }\r\n    });\r\n});\r\n","Magento_Translation/js/add-class.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).addClass(config.class);\r\n    };\r\n});\r\n","Magento_Translation/js/i18n-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    require.config({\r\n        config: {\r\n            'Magento_Ui/js/lib/knockout/bindings/i18n': {\r\n                inlineTranslation: true\r\n            }\r\n        }\r\n    });\r\n})();\r\n","Magento_Translation/js/mage-translation-dictionary.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'text!js-translation.json'\r\n], function (dict) {\r\n    'use strict';\r\n\r\n    return JSON.parse(dict);\r\n});\r\n","Magento_Ui/js/block-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Ui/js/lib/knockout/template/loader',\r\n    'mage/template'\r\n], function (ko, $, templateLoader, template) {\r\n    'use strict';\r\n\r\n    var blockLoaderTemplatePath = 'ui/block-loader',\r\n        blockContentLoadingClass = '_block-content-loading',\r\n        blockLoader,\r\n        blockLoaderClass,\r\n        blockLoaderElement = $.Deferred(),\r\n        loaderImageHref = $.Deferred();\r\n\r\n    templateLoader.loadTemplate(blockLoaderTemplatePath).done(function (blockLoaderTemplate) {\r\n        loaderImageHref.done(function (loaderHref) {\r\n            blockLoader = template(blockLoaderTemplate.trim(), {\r\n                loaderImageHref: loaderHref\r\n            });\r\n            blockLoader = $(blockLoader);\r\n            blockLoaderClass = '.' + blockLoader.attr('class');\r\n            blockLoaderElement.resolve();\r\n        });\r\n    });\r\n\r\n    /**\r\n     * Helper function to check if blockContentLoading class should be applied.\r\n     * @param {Object} element\r\n     * @returns {Boolean}\r\n     */\r\n    function isLoadingClassRequired(element) {\r\n        var position = element.css('position');\r\n\r\n        if (position === 'absolute' || position === 'fixed') {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Add loader to block.\r\n     * @param {Object} element\r\n     */\r\n    function addBlockLoader(element) {\r\n        element.find(':focus').trigger('blur');\r\n        element.find('input:disabled, select:disabled').addClass('_disabled');\r\n        element.find('input, select').prop('disabled', true);\r\n\r\n        if (isLoadingClassRequired(element)) {\r\n            element.addClass(blockContentLoadingClass);\r\n        }\r\n        element.append(blockLoader.clone());\r\n    }\r\n\r\n    /**\r\n     * Remove loader from block.\r\n     * @param {Object} element\r\n     */\r\n    function removeBlockLoader(element) {\r\n        if (!element.has(blockLoaderClass).length) {\r\n            return;\r\n        }\r\n        element.find(blockLoaderClass).remove();\r\n        element.find('input:not(\"._disabled\"), select:not(\"._disabled\")').prop('disabled', false);\r\n        element.find('input:disabled, select:disabled').removeClass('_disabled');\r\n        element.removeClass(blockContentLoadingClass);\r\n    }\r\n\r\n    return function (loaderHref) {\r\n        loaderImageHref.resolve(loaderHref);\r\n        ko.bindingHandlers.blockLoader = {\r\n            /**\r\n             * Process loader for block\r\n             * @param {String} element\r\n             * @param {Boolean} displayBlockLoader\r\n             */\r\n            update: function (element, displayBlockLoader) {\r\n                element = $(element);\r\n\r\n                if (ko.unwrap(displayBlockLoader())) {\r\n                    blockLoaderElement.done(addBlockLoader(element));\r\n                } else {\r\n                    blockLoaderElement.done(removeBlockLoader(element));\r\n                }\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Ui/js/core/app.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    './renderer/types',\r\n    './renderer/layout',\r\n    '../lib/knockout/bootstrap'\r\n], function (types, layout) {\r\n    'use strict';\r\n\r\n    return function (data, merge) {\r\n        types.set(data.types);\r\n        layout(data.components, undefined, true, merge);\r\n    };\r\n});\r\n","Magento_Ui/js/core/renderer/layout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    './types',\r\n    '../../lib/logger/console-logger'\r\n], function (_, $, utils, registry, types, consoleLogger) {\r\n    'use strict';\r\n\r\n    var templates = registry.create(),\r\n        layout = {},\r\n        cachedConfig = {};\r\n\r\n    /**\r\n     * Build name from parent name and node name\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @param {String} [name]\r\n     * @returns {String}\r\n     */\r\n    function getNodeName(parent, node, name) {\r\n        var parentName = parent && parent.name;\r\n\r\n        if (typeof name !== 'string') {\r\n            name = node.name || name;\r\n        }\r\n\r\n        return utils.fullPath(parentName, name);\r\n    }\r\n\r\n    /**\r\n     * Get node type from node or parent.\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @returns {String}\r\n     */\r\n    function getNodeType(parent, node) {\r\n        return node.type || parent && parent.childType;\r\n    }\r\n\r\n    /**\r\n     * Get data scope based on parent data scope and node data scope.\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @returns {String}\r\n     */\r\n    function getDataScope(parent, node) {\r\n        var dataScope = node.dataScope,\r\n            parentScope = parent && parent.dataScope;\r\n\r\n        return !utils.isEmpty(parentScope) ?\r\n            !utils.isEmpty(dataScope) ?\r\n                parentScope + '.' + dataScope :\r\n                parentScope :\r\n            dataScope || '';\r\n    }\r\n\r\n    /**\r\n     * Load node dependencies on other instances.\r\n     *\r\n     * @param {Object} node\r\n     * @returns {jQueryPromise}\r\n     */\r\n    function loadDeps(node) {\r\n        var loaded = $.Deferred(),\r\n            loggerUtils = consoleLogger.utils;\r\n\r\n        if (node.deps) {\r\n            consoleLogger.utils.asyncLog(\r\n                loaded,\r\n                {\r\n                    data: {\r\n                        component: node.name,\r\n                        deps: node.deps\r\n                    },\r\n                    messages: loggerUtils.createMessages(\r\n                        'depsStartRequesting',\r\n                        'depsFinishRequesting',\r\n                        'depsLoadingFail'\r\n                    )\r\n                }\r\n            );\r\n        }\r\n\r\n        registry.get(node.deps, function (deps) {\r\n            node.provider = node.extendProvider ? deps && deps.name : node.provider;\r\n            loaded.resolve(node);\r\n        });\r\n\r\n        return loaded.promise();\r\n    }\r\n\r\n    /**\r\n     * Load node component file via requirejs.\r\n     *\r\n     * @param {Object} node\r\n     * @returns {jQueryPromise}\r\n     */\r\n    function loadSource(node) {\r\n        var loaded = $.Deferred(),\r\n            source = node.component;\r\n\r\n        consoleLogger.info('componentStartLoading', {\r\n            component: node.component\r\n        });\r\n\r\n        require([source], function (constr) {\r\n            consoleLogger.info('componentFinishLoading', {\r\n                component: node.component\r\n            });\r\n            loaded.resolve(node, constr);\r\n        }, function () {\r\n            consoleLogger.error('componentLoadingFail', {\r\n                component: node.component\r\n            });\r\n        });\r\n\r\n        return loaded.promise();\r\n    }\r\n\r\n    /**\r\n     * Create a new component instance and set it to the registry.\r\n     *\r\n     * @param {Object} node\r\n     * @param {Function} Constr\r\n     */\r\n    function initComponent(node, Constr) {\r\n        var component = new Constr(_.omit(node, 'children'));\r\n\r\n        consoleLogger.info('componentStartInitialization', {\r\n            component: node.component,\r\n            componentName: node.name\r\n        });\r\n\r\n        registry.set(node.name, component);\r\n    }\r\n\r\n    /**\r\n     * Application entry point.\r\n     *\r\n     * @param {Object} nodes\r\n     * @param {Object} parent\r\n     * @param {Boolean} cached\r\n     * @param {Boolean} merge\r\n     * @returns {Boolean|undefined}\r\n     */\r\n    function run(nodes, parent, cached, merge) {\r\n        if (_.isBoolean(merge) && merge) {\r\n            layout.merge(nodes);\r\n\r\n            return false;\r\n        }\r\n\r\n        if (cached) {\r\n            cachedConfig[_.keys(nodes)[0]] = JSON.parse(JSON.stringify(nodes));\r\n        }\r\n\r\n        _.each(nodes || [], layout.iterator.bind(layout, parent));\r\n    }\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Determines if node ready to be added or process it.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object|String} node\r\n         */\r\n        iterator: function (parent, node) {\r\n            var action = _.isString(node) ?\r\n                this.addChild :\r\n                this.process;\r\n\r\n            action.apply(this, arguments);\r\n        },\r\n\r\n        /**\r\n         * Prepare component.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Object}\r\n         */\r\n        process: function (parent, node, name) {\r\n            if (!parent && node.parent) {\r\n                return this.waitParent(node, name);\r\n            }\r\n\r\n            if (node.nodeTemplate) {\r\n                return this.waitTemplate.apply(this, arguments);\r\n            }\r\n\r\n            node = this.build.apply(this, arguments);\r\n\r\n            if (!registry.has(node.name)) {\r\n                this.addChild(parent, node)\r\n                    .manipulate(node)\r\n                    .initComponent(node);\r\n            }\r\n\r\n            if (node) {\r\n                run(node.children, node);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Detailed processing of component config.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Boolean|Object}\r\n         */\r\n        build: function (parent, node, name) {\r\n            var defaults    = parent && parent.childDefaults || {},\r\n                children    = this.filterDisabledChildren(node.children),\r\n                type        = getNodeType(parent, node),\r\n                dataScope   = getDataScope(parent, node),\r\n                component,\r\n                extendDeps  = true,\r\n                nodeName;\r\n\r\n            node.children = false;\r\n            node.extendProvider = true;\r\n\r\n            if (node.config && node.config.provider || node.provider) {\r\n                node.extendProvider = false;\r\n            }\r\n\r\n            if (node.config && node.config.deps || node.deps) {\r\n                extendDeps = false;\r\n            }\r\n\r\n            node = utils.extend({\r\n            }, types.get(type), defaults, node);\r\n\r\n            nodeName = getNodeName(parent, node, name);\r\n\r\n            if (registry.has(nodeName)) {\r\n                component = registry.get(nodeName);\r\n                component.children = children;\r\n\r\n                return component;\r\n            }\r\n\r\n            if (extendDeps && parent && parent.deps && type) {\r\n                node.deps = parent.deps;\r\n            }\r\n\r\n            _.extend(node, node.config || {}, {\r\n                index: node.name || name,\r\n                name: nodeName,\r\n                dataScope: dataScope,\r\n                parentName: utils.getPart(nodeName, -2),\r\n                parentScope: utils.getPart(dataScope, -2)\r\n            });\r\n\r\n            node.children = children;\r\n            node.componentType = node.type;\r\n\r\n            delete node.type;\r\n            delete node.config;\r\n\r\n            if (children) {\r\n                node.initChildCount = _.size(children);\r\n            }\r\n\r\n            if (node.isTemplate) {\r\n                node.isTemplate = false;\r\n\r\n                templates.set(node.name, node);\r\n                registry.get(node.parentName, function (parentComp) {\r\n                    parentComp.childTemplate = node;\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            if (node.componentDisabled === true) {\r\n                return false;\r\n            }\r\n\r\n            return node;\r\n        },\r\n\r\n        /**\r\n         * Filter out all disabled components.\r\n         *\r\n         * @param {Object} children\r\n         * @returns {*}\r\n         */\r\n        filterDisabledChildren: function (children) {\r\n            var cIds;\r\n\r\n            //cleanup children config.componentDisabled = true\r\n            if (children && typeof children === 'object') {\r\n                cIds = Object.keys(children);\r\n\r\n                if (cIds) {\r\n                    _.each(cIds, function (cId) {\r\n                        if (typeof children[cId] === 'object' &&\r\n                            children[cId].hasOwnProperty('config') &&\r\n                            typeof children[cId].config === 'object' &&\r\n                            children[cId].config.hasOwnProperty('componentDisabled') &&\r\n                            children[cId].config.componentDisabled === true) {\r\n                            delete children[cId];\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return children;\r\n        },\r\n\r\n        /**\r\n         * Init component.\r\n         *\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        initComponent: function (node) {\r\n            if (!node.component) {\r\n                return this;\r\n            }\r\n\r\n            loadDeps(node)\r\n                .then(loadSource)\r\n                .done(initComponent);\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Loading component marked as isTemplate.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        waitTemplate: function (parent, node) {\r\n            var args = _.toArray(arguments);\r\n\r\n            templates.get(node.nodeTemplate, function () {\r\n                this.applyTemplate.apply(this, args);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Waiting for parent component and process provided component.\r\n         *\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Object}\r\n         */\r\n        waitParent: function (node, name) {\r\n            var process = this.process.bind(this);\r\n\r\n            registry.get(node.parent, function (parent) {\r\n                process(parent, node, name);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Processing component marked as isTemplate.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         */\r\n        applyTemplate: function (parent, node, name) {\r\n            var template = templates.get(node.nodeTemplate);\r\n\r\n            node = utils.extend({}, template, node);\r\n\r\n            delete node.nodeTemplate;\r\n\r\n            this.process(parent, node, name);\r\n        }\r\n    });\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Determines inserting strategy.\r\n         *\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        manipulate: function (node) {\r\n            var name = node.name;\r\n\r\n            if (node.appendTo) {\r\n                this.insert(name, node.appendTo, -1);\r\n            }\r\n\r\n            if (node.prependTo) {\r\n                this.insert(name, node.prependTo, 0);\r\n            }\r\n\r\n            if (node.insertTo) {\r\n                this.insertTo(name, node.insertTo);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Insert component to provide target and position.\r\n         *\r\n         * @param {Object|String} item\r\n         * @param {Object} target\r\n         * @param {Number} position\r\n         * @returns {Object}\r\n         */\r\n        insert: function (item, target, position) {\r\n            registry.get(target, function (container) {\r\n                container.insertChild(item, position);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Insert component into multiple targets.\r\n         *\r\n         * @param {Object} item\r\n         * @param {Array} targets\r\n         * @returns {Object}\r\n         */\r\n        insertTo: function (item, targets) {\r\n            _.each(targets, function (info, target) {\r\n                this.insert(item, target, info.position);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Add provided child to parent.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object|String} child\r\n         * @returns {Object}\r\n         */\r\n        addChild: function (parent, child) {\r\n            var name;\r\n\r\n            if (parent && parent.component) {\r\n                name = child.name || child;\r\n\r\n                this.insert(name, parent.name, child.sortOrder);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Merge components configuration with cached configuration.\r\n         *\r\n         * @param {Array} components\r\n         */\r\n        merge: function (components) {\r\n            var cachedKey = _.keys(components)[0],\r\n                compared = utils.compare(cachedConfig[cachedKey], components),\r\n                remove = this.filterComponents(this.getByProperty(compared.changes, 'type', 'remove'), true),\r\n                update = this.getByProperty(compared.changes, 'type', 'update'),\r\n                dataSources = this.getDataSources(components),\r\n                names, index, name, component;\r\n\r\n            _.each(dataSources, function (val, key) {\r\n                name = key.replace(/\\.children|\\.config/g, '');\r\n                component = registry.get(name);\r\n\r\n                component.cacheData();\r\n                component.updateConfig(\r\n                    true,\r\n                    this.getFullConfig(key, components),\r\n                    this.getFullConfig(key, cachedConfig[cachedKey])\r\n                );\r\n            }, this);\r\n\r\n            _.each(remove, function (val) {\r\n                component = registry.get(val.path);\r\n\r\n                if (component) {\r\n                    component.destroy();\r\n                }\r\n            });\r\n\r\n            update = _.compact(_.filter(update, function (val) {\r\n                return !_.isEqual(val.oldValue, val.value);\r\n            }));\r\n\r\n            _.each(update, function (val) {\r\n                names = val.path.split('.');\r\n                index = Math.max(_.lastIndexOf(names, 'config'), _.lastIndexOf(names, 'children') + 2);\r\n                name = _.without(names.splice(0, index), 'children', 'config').join('.');\r\n                component = registry.get(name);\r\n\r\n                if (val.name === 'sortOrder' && component) {\r\n                    registry.get(component.parentName).insertChild(component, val.value);\r\n                } else if (component) {\r\n                    component.updateConfig(\r\n                        val.oldValue,\r\n                        val.value,\r\n                        val.path\r\n                    );\r\n                }\r\n            }, this);\r\n\r\n            run(components, undefined, true);\r\n        },\r\n\r\n        /**\r\n         * Recursive dataSource assignment.\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} parentPath\r\n         * @returns {Object}\r\n         */\r\n        getDataSources: function (config, parentPath) {\r\n            var dataSources = {},\r\n                key, obj;\r\n\r\n            /* eslint-disable no-loop-func, max-depth */\r\n            for (key in config) {\r\n                if (config.hasOwnProperty(key)) {\r\n                    if (\r\n                        key === 'type' &&\r\n                        config[key] === 'dataSource' &&\r\n                        config.hasOwnProperty('config')\r\n                    ) {\r\n                        dataSources[parentPath + '.config'] = config.config;\r\n                    } else if (_.isObject(config[key])) {\r\n                        obj = this.getDataSources(config[key], utils.fullPath(parentPath, key));\r\n\r\n                        _.each(obj, function (value, path) {\r\n                            dataSources[path] = value;\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            /* eslint-enable no-loop-func, max-depth */\r\n\r\n            return dataSources;\r\n        },\r\n\r\n        /**\r\n         * Configuration getter.\r\n         *\r\n         * @param {String} path\r\n         * @param {Object} config\r\n         * @returns {Boolean|Object}\r\n         */\r\n        getFullConfig: function (path, config) {\r\n            var index;\r\n\r\n            path = path.split('.');\r\n            index = _.lastIndexOf(path, 'config');\r\n\r\n            if (!~index) {\r\n                return false;\r\n            }\r\n            path = path.splice(0, index);\r\n\r\n            _.each(path, function (val) {\r\n                config = config[val];\r\n            });\r\n\r\n            return config.config;\r\n        },\r\n\r\n        /**\r\n         * Filter data by property and value.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String} prop\r\n         * @param {*} propValue\r\n         */\r\n        getByProperty: function (data, prop, propValue) {\r\n            return _.filter(data, function (value) {\r\n                return value[prop] === propValue;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Filter components.\r\n         *\r\n         * @param {Array} data\r\n         * @param {Boolean} splitPath\r\n         * @param {Number} index\r\n         * @param {String} separator\r\n         * @param {String} keyName\r\n         * @returns {Array}\r\n         */\r\n        filterComponents: function (data, splitPath, index, separator, keyName) {\r\n            var result = [],\r\n                names, length;\r\n\r\n            index = -2;\r\n            separator = '.' || separator;\r\n            keyName = 'children' || keyName;\r\n\r\n            _.each(data, function (val) {\r\n                names = val.path.split(separator);\r\n                length  = names.length;\r\n\r\n                if (names[length + index] === keyName) {\r\n                    val.path = splitPath ? _.without(names, keyName).join(separator) : val.path;\r\n                    result.push(val);\r\n                }\r\n            });\r\n\r\n            return result;\r\n        }\r\n    });\r\n\r\n    return run;\r\n});\r\n","Magento_Ui/js/core/renderer/types.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'mageUtils'\r\n], function (_, utils) {\r\n    'use strict';\r\n\r\n    var store = {};\r\n\r\n    /**\r\n     * Flatten a nested data.\r\n     *\r\n     * @param {Object} data\r\n     * @returns {Object}\r\n     */\r\n    function flatten(data) {\r\n        var extender = data.extends || [],\r\n            result = {};\r\n\r\n        extender = utils.stringToArray(extender);\r\n\r\n        extender.push(data);\r\n\r\n        extender.forEach(function (item) {\r\n            if (_.isString(item)) {\r\n                item = store[item] || {};\r\n            }\r\n\r\n            utils.extend(result, item);\r\n        });\r\n\r\n        delete result.extends;\r\n\r\n        return result;\r\n    }\r\n\r\n    return {\r\n        /**\r\n         * Set types to store object.\r\n         *\r\n         * @param {Object} types\r\n         */\r\n        set: function (types) {\r\n            types = types || {};\r\n\r\n            utils.extend(store, types);\r\n\r\n            _.each(types, function (data, type) {\r\n                store[type] = flatten(data);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get type from store object.\r\n         *\r\n         * @param {String} type\r\n         * @returns {*|{}}\r\n         */\r\n        get: function (type) {\r\n            return store[type] || {};\r\n        }\r\n    };\r\n});\r\n","Magento_Ui/js/dynamic-rows/action-delete.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            links: {\r\n                value: false\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delete record handler.\r\n         *\r\n         * @param {Number} index\r\n         * @param {Number} id\r\n         */\r\n        deleteRecord: function (index, id) {\r\n            this.bubble('deleteRecord', index, id);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dnd.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (ko, $, _, Element) {\r\n    'use strict';\r\n\r\n    var transformProp;\r\n\r\n    /**\r\n     * Get element context\r\n     */\r\n    function getContext(elem) {\r\n        return ko.contextFor(elem);\r\n    }\r\n\r\n    /**\r\n     * Defines supported css 'transform' property.\r\n     *\r\n     * @returns {String|Undefined}\r\n     */\r\n    transformProp = (function () {\r\n        var style = document.createElement('div').style,\r\n            base = 'Transform',\r\n            vendors = ['webkit', 'moz', 'ms', 'o'],\r\n            vi = vendors.length,\r\n            property;\r\n\r\n        if (typeof style.transform !== 'undefined') {\r\n            return 'transform';\r\n        }\r\n\r\n        while (vi--) {\r\n            property = vendors[vi] + base;\r\n\r\n            if (typeof style[property] !== 'undefined') {\r\n                return property;\r\n            }\r\n        }\r\n    })();\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            separatorsClass: {\r\n                top: '_dragover-top',\r\n                bottom: '_dragover-bottom'\r\n            },\r\n            step: 'auto',\r\n            tableClass: 'table.admin__dynamic-rows',\r\n            recordsCache: [],\r\n            draggableElement: {},\r\n            draggableElementClass: '_dragged',\r\n            elemPositions: [],\r\n            listens: {\r\n                '${ $.recordsProvider }:elems': 'setCacheRecords'\r\n            },\r\n            modules: {\r\n                parentComponent: '${ $.recordsProvider }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize component\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(\r\n                this,\r\n                'mousemoveHandler',\r\n                'mouseupHandler'\r\n            );\r\n\r\n            this._super()\r\n                .body = $('body');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\r\n         *     properties, calls 'setOptions' passing options to it\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'recordsCache'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init listens to start drag\r\n         *\r\n         * @param {Object} elem - DOM element\r\n         * @param {Object} data - element data\r\n         */\r\n        initListeners: function (elem, data) {\r\n            $(elem).on('mousedown touchstart', this.mousedownHandler.bind(this, data, elem));\r\n        },\r\n\r\n        /**\r\n         * Mouse down handler\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {Object} elem - element\r\n         * @param {Object} event - key down event\r\n         */\r\n        mousedownHandler: function (data, elem, event) {\r\n            var recordNode = this.getRecordNode(elem),\r\n                originRecord = $(elem).parents('tr').eq(0),\r\n                drEl = this.draggableElement,\r\n                $table = $(elem).parents('table').eq(0),\r\n                $tableWrapper = $table.parent(),\r\n                outerHight =\r\n                    $table.children('thead').outerHeight() === undefined ? 0 : $table.children('thead').outerHeight();\r\n\r\n            this.disableScroll();\r\n            $(recordNode).addClass(this.draggableElementClass);\r\n            $(originRecord).addClass(this.draggableElementClass);\r\n            this.step = this.step === 'auto' ? originRecord.height() / 2 : this.step;\r\n            drEl.originRow = originRecord;\r\n            drEl.instance = recordNode = this.processingStyles(recordNode, elem);\r\n            drEl.instanceCtx = this.getRecord(originRecord[0]);\r\n            drEl.eventMousedownY = this.getPageY(event);\r\n            drEl.minYpos =\r\n                $table.offset().top - originRecord.offset().top + outerHight;\r\n            drEl.maxYpos = drEl.minYpos + $table.children('tbody').outerHeight() - originRecord.outerHeight();\r\n            $tableWrapper.append(recordNode);\r\n            this.body.on('mousemove touchmove', this.mousemoveHandler);\r\n            this.body.on('mouseup touchend', this.mouseupHandler);\r\n        },\r\n\r\n        /**\r\n         * Mouse move handler\r\n         *\r\n         * @param {Object} event - mouse move event\r\n         */\r\n        mousemoveHandler: function (event) {\r\n            var depEl = this.draggableElement,\r\n                pageY = this.getPageY(event),\r\n                positionY = pageY - depEl.eventMousedownY,\r\n                processingPositionY = positionY + 'px',\r\n                processingMaxYpos = depEl.maxYpos + 'px',\r\n                processingMinYpos = depEl.minYpos + 'px',\r\n                depElement = this.getDepElement(depEl.instance, positionY, depEl.originRow);\r\n\r\n            if (depElement) {\r\n                depEl.depElement ? depEl.depElement.elem.removeClass(depEl.depElement.className) : false;\r\n                depEl.depElement = depElement;\r\n                depEl.depElement.insert !== 'none' ? depEl.depElement.elem.addClass(depElement.className) : false;\r\n            } else if (depEl.depElement && depEl.depElement.insert !== 'none') {\r\n                depEl.depElement.elem.removeClass(depEl.depElement.className);\r\n                depEl.depElement.insert = 'none';\r\n            }\r\n\r\n            if (positionY > depEl.minYpos && positionY < depEl.maxYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingPositionY + ')';\r\n            } else if (positionY < depEl.minYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingMinYpos + ')';\r\n            } else if (positionY >= depEl.maxYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingMaxYpos + ')';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mouse up handler\r\n         */\r\n        mouseupHandler: function (event) {\r\n            var depElementCtx,\r\n                drEl = this.draggableElement,\r\n                pageY = this.getPageY(event),\r\n                positionY = pageY - drEl.eventMousedownY;\r\n\r\n            this.enableScroll();\r\n            drEl.depElement = this.getDepElement(drEl.instance, positionY, this.draggableElement.originRow);\r\n\r\n            drEl.instance.remove();\r\n\r\n            if (drEl.depElement) {\r\n                depElementCtx = this.getRecord(drEl.depElement.elem[0]);\r\n                drEl.depElement.elem.removeClass(drEl.depElement.className);\r\n\r\n                if (drEl.depElement.insert !== 'none') {\r\n                    this.setPosition(drEl.depElement.elem, depElementCtx, drEl);\r\n                }\r\n            }\r\n\r\n            drEl.originRow.removeClass(this.draggableElementClass);\r\n\r\n            this.body.off('mousemove touchmove', this.mousemoveHandler);\r\n            this.body.off('mouseup touchend', this.mouseupHandler);\r\n\r\n            this.draggableElement = {};\r\n        },\r\n\r\n        /**\r\n         * Set position to element\r\n         *\r\n         * @param {Object} depElem - dep element\r\n         * @param {Object} depElementCtx - dep element context\r\n         * @param {Object} dragData - data draggable element\r\n         */\r\n        setPosition: function (depElem, depElementCtx, dragData) {\r\n            var depElemPosition = ~~depElementCtx.position;\r\n\r\n            if (dragData.depElement.insert === 'after') {\r\n                dragData.instanceCtx.position = depElemPosition + 1;\r\n            } else if (dragData.depElement.insert === 'before') {\r\n                dragData.instanceCtx.position = depElemPosition;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get dependency element\r\n         *\r\n         * @param {Object} curInstance - current element instance\r\n         * @param {Number} position\r\n         * @param {Object} row\r\n         */\r\n        getDepElement: function (curInstance, position, row) {\r\n            var tableSelector = this.tableClass + ' tr',\r\n                $table = $(row).parents('table').eq(0),\r\n                $curInstance = $(curInstance),\r\n                recordsCollection = $table.find('table').length ?\r\n                    $table.find('tbody > tr').filter(function (index, elem) {\r\n                        return !$(elem).parents(tableSelector).length;\r\n                    }) :\r\n                    $table.find('tbody > tr'),\r\n                curInstancePositionTop = $curInstance.position().top,\r\n                curInstancePositionBottom = curInstancePositionTop + $curInstance.height();\r\n\r\n            if (position < 0) {\r\n                return this._getDepElement(recordsCollection, 'before', curInstancePositionTop);\r\n            } else if (position > 0) {\r\n                return this._getDepElement(recordsCollection, 'after', curInstancePositionBottom);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get dependency element private\r\n         *\r\n         * @param {Array} collection - record collection\r\n         * @param {String} position - position to add\r\n         * @param {Number} dragPosition - position drag element\r\n         */\r\n        _getDepElement: function (collection, position, dragPosition) {\r\n            var rec,\r\n                rangeEnd,\r\n                rangeStart,\r\n                result,\r\n                className,\r\n                i = 0,\r\n                length = collection.length;\r\n\r\n            for (i; i < length; i++) {\r\n                rec = collection.eq(i);\r\n\r\n                if (position === 'before') {\r\n                    rangeStart = collection.eq(i).position().top - this.step;\r\n                    rangeEnd = rangeStart + this.step * 2;\r\n                    className = this.separatorsClass.top;\r\n                } else if (position === 'after') {\r\n                    rangeEnd = rec.position().top + rec.height() + this.step;\r\n                    rangeStart = rangeEnd - this.step * 2;\r\n                    className = this.separatorsClass.bottom;\r\n                }\r\n\r\n                if (dragPosition > rangeStart && dragPosition < rangeEnd) {\r\n                    result = {\r\n                        elem: rec,\r\n                        insert: rec[0] === this.draggableElement.originRow[0] ? 'none' : position,\r\n                        className: className\r\n                    };\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Set default position of draggable element\r\n         *\r\n         * @param {Object} elem - current element instance\r\n         * @param {Object} data - current element data\r\n         */\r\n        _setDefaultPosition: function (elem, data) {\r\n            var originRecord = $(elem).parents('tr').eq(0),\r\n                position = originRecord.position();\r\n\r\n            ++position.top;\r\n            $(data).css(position);\r\n        },\r\n\r\n        /**\r\n         * Set records to cache\r\n         *\r\n         * @param {Object} records - record instance\r\n         */\r\n        setCacheRecords: function (records) {\r\n            this.recordsCache(records);\r\n        },\r\n\r\n        /**\r\n         * Set styles to draggable element\r\n         *\r\n         * @param {Object} data - data\r\n         * @param {Object} elem - elem instance\r\n         * @returns {Object} instance data.\r\n         */\r\n        processingStyles: function (data, elem) {\r\n            var table = $(elem).parents('table').eq(0),\r\n                columns = table.find('th'),\r\n                recordColumns = $(data).find('td');\r\n\r\n            this._setDefaultPosition(elem, $(data));\r\n            this._setColumnsWidth(columns, recordColumns);\r\n            this._setTableWidth(table, $(data));\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Set table width.\r\n         *\r\n         * @param {Object} originalTable - original record instance\r\n         * @param {Object} recordTable - draggable record instance\r\n         */\r\n        _setTableWidth: function (originalTable, recordTable) {\r\n            recordTable.outerWidth(originalTable.outerWidth());\r\n        },\r\n\r\n        /**\r\n         * Set columns width.\r\n         *\r\n         * @param {Object} originColumns - original record instance\r\n         * @param {Object} recordColumns - draggable record instance\r\n         */\r\n        _setColumnsWidth: function (originColumns, recordColumns) {\r\n            var i = 0,\r\n                length = originColumns.length;\r\n\r\n            for (i; i < length; i++) {\r\n                recordColumns.eq(i).outerWidth(originColumns.eq(i).outerWidth());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get copy original record\r\n         *\r\n         * @param {Object} record - original record instance\r\n         * @returns {Object} draggable record instance\r\n         */\r\n        getRecordNode: function (record) {\r\n            var $record = $(record),\r\n                table = $record.parents('table')[0].cloneNode(true),\r\n                $table = $(table);\r\n\r\n            $table.find('tr').remove();\r\n            $table.append($record.parents('tr')[0].cloneNode(true));\r\n\r\n            return table;\r\n        },\r\n\r\n        /**\r\n         * Get record context by element\r\n         *\r\n         * @param {Object} elem - original element\r\n         * @returns {Object} draggable record context\r\n         */\r\n        getRecord: function (elem) {\r\n            var ctx = getContext(elem),\r\n                index = _.isFunction(ctx.$index) ? ctx.$index() : ctx.$index;\r\n\r\n            return this.recordsCache()[index];\r\n        },\r\n\r\n        /**\r\n         * Get correct page Y\r\n         *\r\n         * @param {Object} event - current event\r\n         * @returns {integer}\r\n         */\r\n        getPageY: function (event) {\r\n            var pageY;\r\n\r\n            if (event.type.indexOf('touch') >= 0) {\r\n                if (event.originalEvent.touches[0]) {\r\n                    pageY = event.originalEvent.touches[0].pageY;\r\n                } else {\r\n                    pageY = event.originalEvent.changedTouches[0].pageY;\r\n                }\r\n            } else {\r\n                pageY = event.pageY;\r\n            }\r\n\r\n            return pageY;\r\n        },\r\n\r\n        /**\r\n         * Disable page scrolling\r\n         */\r\n        disableScroll: function () {\r\n            document.body.addEventListener('touchmove', this.preventDefault, {\r\n                passive: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Enable page scrolling\r\n         */\r\n        enableScroll: function () {\r\n            document.body.removeEventListener('touchmove', this.preventDefault, {\r\n                passive: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prevent default function\r\n         *\r\n         * @param {Object} event - event object\r\n         */\r\n        preventDefault: function (event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dynamic-rows-grid.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './dynamic-rows'\r\n], function (_, dynamicRows) {\r\n    'use strict';\r\n\r\n    return dynamicRows.extend({\r\n        defaults: {\r\n            dataProvider: '',\r\n            insertData: [],\r\n            map: null,\r\n            cacheGridData: [],\r\n            deleteProperty: false,\r\n            positionProvider: 'position',\r\n            dataLength: 0,\r\n            identificationProperty: 'id',\r\n            identificationDRProperty: 'id',\r\n            listens: {\r\n                'insertData': 'processingInsertData',\r\n                'recordData': 'initElements setToInsertData'\r\n            },\r\n            mappingSettings: {\r\n                enabled: true,\r\n                distinct: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this.setToInsertData = _.debounce(this.setToInsertData, 200);\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'insertData'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set data from recordData to insertData\r\n         */\r\n        setToInsertData: function () {\r\n            var insertData = [],\r\n                obj;\r\n\r\n            if (this.recordData().length && !this.update) {\r\n                _.each(this.recordData(), function (recordData) {\r\n                    obj = {};\r\n                    obj[this.map[this.identificationProperty]] = recordData[this.identificationProperty];\r\n                    insertData.push(obj);\r\n                }, this);\r\n\r\n                if (insertData.length) {\r\n                    this.source.set(this.dataProvider, insertData);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.getChildItems().forEach(function (data, index) {\r\n                this.processingAddChild(data, this.startIndex + index, data[this.identificationDRProperty]);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize elements from grid\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initElements: function (data) {\r\n            var newData = this.getNewData(data);\r\n\r\n            this.parsePagesData(data);\r\n\r\n            if (newData.length) {\r\n                if (this.insertData().length) {\r\n                    this.processingAddChild(newData[0], data.length - 1, newData[0][this.identificationProperty]);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Delete record instance\r\n         * update data provider dataScope\r\n         *\r\n         * @param {String|Number} index - record index\r\n         * @param {String|Number} recordId\r\n         */\r\n        deleteRecord: function (index, recordId) {\r\n            this.updateInsertData(recordId);\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Updates insertData when record is deleted\r\n         *\r\n         * @param {String|Number} recordId\r\n         */\r\n        updateInsertData: function (recordId) {\r\n            var data = this.getElementData(this.insertData(), recordId),\r\n            prop = this.map[this.identificationDRProperty];\r\n\r\n            this.insertData(_.reject(this.source.get(this.dataProvider), function (recordData) {\r\n                return recordData[prop].toString() === data[prop].toString();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Find data object by index\r\n         *\r\n         * @param {Array} array - data collection\r\n         * @param {Number} index - element index\r\n         * @param {String} property - to find by property\r\n         *\r\n         * @returns {Object} data object\r\n         */\r\n        getElementData: function (array, index, property) {\r\n            var obj = {},\r\n                result;\r\n\r\n            property ? obj[property] = index : obj[this.map[this.identificationDRProperty]] = index;\r\n            result = _.findWhere(array, obj);\r\n\r\n            if (!result) {\r\n                property ?\r\n                    obj[property] = index.toString() :\r\n                    obj[this.map[this.identificationDRProperty]] = index.toString();\r\n            }\r\n\r\n            result = _.findWhere(array, obj);\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Processing pages before addChild\r\n         *\r\n         * @param {Object} ctx - element context\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} prop - additional property to element\r\n         */\r\n        processingAddChild: function (ctx, index, prop) {\r\n            if (this._elems.length > this.pageSize) {\r\n                return false;\r\n            }\r\n\r\n            this.showSpinner(true);\r\n            this.addChild(ctx, index, prop);\r\n        },\r\n\r\n        /**\r\n         * Contains old data with new\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Array} changed data\r\n         */\r\n        getNewData: function (data) {\r\n            var changes = [],\r\n                tmpObj = {};\r\n\r\n            if (data.length !== this.relatedData.length) {\r\n                _.each(data, function (obj) {\r\n                    tmpObj[this.identificationDRProperty] = obj[this.identificationDRProperty];\r\n\r\n                    if (!_.findWhere(this.relatedData, tmpObj)) {\r\n                        changes.push(obj);\r\n                    }\r\n                }, this);\r\n            }\r\n\r\n            return changes;\r\n        },\r\n\r\n        /**\r\n         * Processing insert data\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        processingInsertData: function (data) {\r\n            var changes,\r\n                obj = {};\r\n\r\n            changes = this._checkGridData(data);\r\n            this.cacheGridData = data;\r\n\r\n            if (changes.length) {\r\n                obj[this.identificationDRProperty] = changes[0][this.map[this.identificationProperty]];\r\n\r\n                if (_.findWhere(this.recordData(), obj)) {\r\n                    return false;\r\n                }\r\n\r\n                changes.forEach(function (changedObject) {\r\n                    this.mappingValue(changedObject);\r\n                }, this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mapping value from grid\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        mappingValue: function (data) {\r\n            var obj = {},\r\n                tmpObj = {};\r\n\r\n            if (this.mappingSettings.enabled) {\r\n                _.each(this.map, function (prop, index) {\r\n                    obj[index] = !_.isUndefined(data[prop]) ? data[prop] : '';\r\n                }, this);\r\n            } else {\r\n                obj = data;\r\n            }\r\n\r\n            if (this.mappingSettings.distinct) {\r\n                tmpObj[this.identificationDRProperty] = obj[this.identificationDRProperty];\r\n\r\n                if (_.findWhere(this.recordData(), tmpObj)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (!obj.hasOwnProperty(this.positionProvider)) {\r\n                this.setMaxPosition();\r\n                obj[this.positionProvider] = this.maxPosition;\r\n            }\r\n\r\n            this.source.set(this.dataScope + '.' + this.index + '.' + this.recordData().length, obj);\r\n        },\r\n\r\n        /**\r\n         * Check changed records\r\n         *\r\n         * @param {Array} data - array with records data\r\n         * @returns {Array} Changed records\r\n         */\r\n        _checkGridData: function (data) {\r\n            var cacheLength = this.cacheGridData.length,\r\n                curData = data.length,\r\n                max = cacheLength > curData ? this.cacheGridData : data,\r\n                changes = [],\r\n                obj = {};\r\n\r\n            max.forEach(function (record, index) {\r\n                obj[this.map[this.identificationDRProperty]] = record[this.map[this.identificationDRProperty]];\r\n\r\n                if (!_.where(this.cacheGridData, obj).length) {\r\n                    changes.push(data[index]);\r\n                }\r\n            }, this);\r\n\r\n            return changes;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dynamic-rows.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'mageUtils',\r\n    'underscore',\r\n    'uiLayout',\r\n    'uiCollection',\r\n    'uiRegistry',\r\n    'mage/translate',\r\n    'jquery'\r\n], function (ko, utils, _, layout, uiCollection, registry, $t, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Checks value type and cast to boolean if needed\r\n     *\r\n     * @param {*} value\r\n     *\r\n     * @returns {Boolean|*} casted or origin value\r\n     */\r\n    function castValue(value) {\r\n        if (_.isUndefined(value) || value === '' || _.isNull(value)) {\r\n            return false;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Compares arrays.\r\n     *\r\n     * @param {Array} base - array as method bases its decision on first argument.\r\n     * @param {Array} current - second array\r\n     *\r\n     * @returns {Boolean} result - is current array equal to base array\r\n     */\r\n    function compareArrays(base, current) {\r\n        var index = 0,\r\n            length = base.length;\r\n\r\n        if (base.length !== current.length) {\r\n            return false;\r\n        }\r\n\r\n        /*eslint-disable max-depth, eqeqeq, no-use-before-define */\r\n        for (index; index < length; index++) {\r\n            if (_.isArray(base[index]) && _.isArray(current[index])) {\r\n                if (!compareArrays(base[index], current[index])) {\r\n                    return false;\r\n                }\r\n            } else if (typeof base[index] === 'object' && typeof current[index] === 'object') {\r\n                if (!compareObjects(base[index], current[index])) {\r\n                    return false;\r\n                }\r\n            } else if (castValue(base[index]) != castValue(current[index])) {\r\n                return false;\r\n            }\r\n        }/*eslint-enable max-depth, eqeqeq, no-use-before-define */\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Compares objects. Compares only properties from origin object,\r\n     * if current object has more properties - they are not considered\r\n     *\r\n     * @param {Object} base - first object\r\n     * @param {Object} current - second object\r\n     *\r\n     * @returns {Boolean} result - is current object equal to base object\r\n     */\r\n    function compareObjects(base, current) {\r\n        var prop;\r\n\r\n        /*eslint-disable max-depth, eqeqeq*/\r\n        for (prop in base) {\r\n            if (_.isArray(base[prop]) && _.isArray(current[prop])) {\r\n                if (!compareArrays(base[prop], current[prop])) {\r\n                    return false;\r\n                }\r\n            } else if (typeof base[prop] === 'object' && typeof current[prop] === 'object') {\r\n                if (!compareObjects(base[prop], current[prop])) {\r\n                    return false;\r\n                }\r\n            } else if (castValue(base[prop]) != castValue(current[prop])) {\r\n                return false;\r\n            }\r\n        }/*eslint-enable max-depth, eqeqeq */\r\n\r\n        return true;\r\n    }\r\n\r\n    return uiCollection.extend({\r\n        defaults: {\r\n            defaultRecord: false,\r\n            columnsHeader: true,\r\n            columnsHeaderAfterRender: false,\r\n            columnsHeaderClasses: '',\r\n            labels: [],\r\n            recordTemplate: 'record',\r\n            collapsibleHeader: false,\r\n            additionalClasses: {},\r\n            visible: true,\r\n            disabled: false,\r\n            fit: false,\r\n            addButton: true,\r\n            addButtonLabel: $t('Add'),\r\n            recordData: [],\r\n            maxPosition: 0,\r\n            deleteProperty: 'delete',\r\n            identificationProperty: 'record_id',\r\n            deleteValue: true,\r\n            showSpinner: true,\r\n            isDifferedFromDefault: false,\r\n            defaultState: [],\r\n            defaultPagesState: {},\r\n            pagesChanged: {},\r\n            hasInitialPagesState: {},\r\n            changed: false,\r\n            fallbackResetTpl: 'ui/form/element/helper/fallback-reset-link',\r\n            dndConfig: {\r\n                name: '${ $.name }_dnd',\r\n                component: 'Magento_Ui/js/dynamic-rows/dnd',\r\n                template: 'ui/dynamic-rows/cells/dnd',\r\n                recordsProvider: '${ $.name }',\r\n                enabled: true\r\n            },\r\n            templates: {\r\n                record: {\r\n                    parent: '${ $.$data.collection.name }',\r\n                    name: '${ $.$data.index }',\r\n                    dataScope: '${ $.$data.collection.index }.${ $.name }',\r\n                    nodeTemplate: '${ $.parent }.${ $.$data.collection.recordTemplate }'\r\n                }\r\n            },\r\n            links: {\r\n                recordData: '${ $.provider }:${ $.dataScope }.${ $.index }'\r\n            },\r\n            listens: {\r\n                visible: 'setVisible',\r\n                disabled: 'setDisabled',\r\n                childTemplate: 'initHeader',\r\n                recordTemplate: 'onUpdateRecordTemplate',\r\n                recordData: 'setDifferedFromDefault parsePagesData setRecordDataToCache',\r\n                currentPage: 'changePage',\r\n                elems: 'checkSpinner',\r\n                changed: 'updateTrigger'\r\n            },\r\n            modules: {\r\n                dnd: '${ $.dndConfig.name }'\r\n            },\r\n            pages: 1,\r\n            pageSize: 20,\r\n            relatedData: [],\r\n            currentPage: 1,\r\n            recordDataCache: [],\r\n            startIndex: 0\r\n        },\r\n\r\n        /**\r\n         * Sets record data to cache\r\n         */\r\n        setRecordDataToCache: function (data) {\r\n            this.recordDataCache = data;\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method, set observe variable.\r\n         * Use parent \"track\" method - wrapper observe array\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this,\r\n                'processingDeleteRecord',\r\n                'onChildrenUpdate',\r\n                'checkDefaultState',\r\n                'renderColumnsHeader',\r\n                'deleteHandler',\r\n                'setDefaultState'\r\n            );\r\n\r\n            this._super()\r\n                .initChildren()\r\n                .initDnd()\r\n                .initDefaultRecord()\r\n                .setInitialProperty()\r\n                .setColumnsHeaderListener()\r\n                .checkSpinner();\r\n\r\n            this.on('recordData', this.checkDefaultState);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        bubble: function (event) {\r\n            if (event === 'deleteRecord' || event === 'update') {\r\n                return false;\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Inits DND module\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initDnd: function () {\r\n            if (this.dndConfig.enabled) {\r\n                layout([this.dndConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            if (this.dnd()) {\r\n                this.dnd().destroy();\r\n            }\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track('childTemplate')\r\n                .observe([\r\n                    'pages',\r\n                    'currentPage',\r\n                    'recordData',\r\n                    'columnsHeader',\r\n                    'visible',\r\n                    'disabled',\r\n                    'labels',\r\n                    'showSpinner',\r\n                    'isDifferedFromDefault',\r\n                    'changed'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n            elem.on({\r\n                'deleteRecord': this.deleteHandler,\r\n                'update': this.onChildrenUpdate,\r\n                'addChild': this.setDefaultState\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler for deleteRecord event\r\n         *\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} id\r\n         */\r\n        deleteHandler: function (index, id) {\r\n            var defaultState;\r\n\r\n            this.setDefaultState();\r\n            defaultState = this.defaultPagesState[this.currentPage()];\r\n            this.processingDeleteRecord(index, id);\r\n            this.pagesChanged[this.currentPage()] =\r\n                !compareArrays(defaultState, this.arrayFilter(this.getChildItems()));\r\n            this.changed(_.some(this.pagesChanged));\r\n        },\r\n\r\n        /**\r\n         * Set initial property to records data\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setInitialProperty: function () {\r\n            if (_.isArray(this.recordData())) {\r\n                this.recordData.each(function (data, index) {\r\n                    this.source.set(this.dataScope + '.' + this.index + '.' + index + '.initialize', true);\r\n                }, this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler for update event\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        onChildrenUpdate: function (state) {\r\n            var changed,\r\n                dataScope,\r\n                changedElemDataScope;\r\n\r\n            if (state && !this.hasInitialPagesState[this.currentPage()]) {\r\n                this.setDefaultState();\r\n                changed = this.getChangedElems(this.elems());\r\n                dataScope = this.elems()[0].dataScope.split('.');\r\n                dataScope.splice(dataScope.length - 1, 1);\r\n                changed.forEach(function (elem) {\r\n                    changedElemDataScope = elem.dataScope.split('.');\r\n                    changedElemDataScope.splice(0, dataScope.length);\r\n                    changedElemDataScope[0] =\r\n                        (parseInt(changedElemDataScope[0], 10) - this.pageSize * (this.currentPage() - 1)).toString();\r\n                    this.setValueByPath(\r\n                        this.defaultPagesState[this.currentPage()],\r\n                        changedElemDataScope, elem.initialValue\r\n                    );\r\n                }, this);\r\n            }\r\n\r\n            if (this.defaultPagesState[this.currentPage()]) {\r\n                this.setChangedForCurrentPage();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set default dynamic-rows state or state before changing data\r\n         *\r\n         * @param {Array} data - defaultState data\r\n         */\r\n        setDefaultState: function (data) {\r\n            var componentData,\r\n                childItems;\r\n\r\n            if (!this.hasInitialPagesState[this.currentPage()]) {\r\n                childItems = this.getChildItems();\r\n                componentData = childItems.length ?\r\n                    utils.copy(childItems) :\r\n                    utils.copy(this.getChildItems(this.recordDataCache));\r\n                componentData.forEach(function (dataObj) {\r\n                    if (dataObj.hasOwnProperty('initialize')) {\r\n                        delete dataObj.initialize;\r\n                    }\r\n                });\r\n\r\n                this.hasInitialPagesState[this.currentPage()] = true;\r\n                this.defaultPagesState[this.currentPage()] = data ? data : this.arrayFilter(componentData);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets value to object by string path\r\n         *\r\n         * @param {Object} obj\r\n         * @param {Array|String} path\r\n         * @param {*} value\r\n         */\r\n        setValueByPath: function (obj, path, value) {\r\n            var prop;\r\n\r\n            if (_.isString(path)) {\r\n                path = path.split('.');\r\n            }\r\n\r\n            if (path.length - 1) {\r\n                prop = obj[path[0]];\r\n                path.splice(0, 1);\r\n                this.setValueByPath(prop, path, value);\r\n            } else if (path.length && obj) {\r\n                obj[path[0]] = value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns elements which changed self state\r\n         *\r\n         * @param {Array} array - data array\r\n         * @param {Array} changed - array with changed elements\r\n         * @returns {Array} changed - array with changed elements\r\n         */\r\n        getChangedElems: function (array, changed) {\r\n            changed = changed || [];\r\n\r\n            array.forEach(function (elem) {\r\n                if (_.isFunction(elem.elems)) {\r\n                    this.getChangedElems(elem.elems(), changed);\r\n                } else if (_.isFunction(elem.hasChanged) && elem.hasChanged()) {\r\n                    changed.push(elem);\r\n                }\r\n            }, this);\r\n\r\n            return changed;\r\n        },\r\n\r\n        /**\r\n         * Checks columnsHeaderAfterRender property,\r\n         * and set listener on elems if needed\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setColumnsHeaderListener: function () {\r\n            if (this.columnsHeaderAfterRender) {\r\n                this.on('recordData', this.renderColumnsHeader);\r\n\r\n                if (_.isArray(this.recordData()) && this.recordData().length) {\r\n                    this.renderColumnsHeader();\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks whether component's state is default or not\r\n         */\r\n        checkDefaultState: function () {\r\n            var isRecordDataArray = _.isArray(this.recordData()),\r\n                initialize,\r\n                hasNotDefaultRecords = isRecordDataArray ? !!this.recordData().filter(function (data) {\r\n                    return !data.initialize;\r\n                }).length : false;\r\n\r\n            if (!this.hasInitialPagesState[this.currentPage()] && isRecordDataArray && hasNotDefaultRecords) {\r\n                this.hasInitialPagesState[this.currentPage()] = true;\r\n                this.defaultPagesState[this.currentPage()] = utils.copy(this.getChildItems().filter(function (data) {\r\n                    initialize = data.initialize;\r\n                    delete data.initialize;\r\n\r\n                    return initialize;\r\n                }));\r\n\r\n                this.setChangedForCurrentPage();\r\n            } else if (this.hasInitialPagesState[this.currentPage()]) {\r\n                this.setChangedForCurrentPage();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Filters out deleted items from array\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Array} filtered array\r\n         */\r\n        arrayFilter: function (data) {\r\n            var prop;\r\n\r\n            /*eslint-disable no-loop-func*/\r\n            data.forEach(function (elem) {\r\n                for (prop in elem) {\r\n                    if (_.isArray(elem[prop])) {\r\n                        elem[prop] = _.filter(elem[prop], function (elemProp) {\r\n                            return elemProp[this.deleteProperty] !== this.deleteValue;\r\n                        }, this);\r\n\r\n                        elem[prop].forEach(function (elemProp) {\r\n                            if (_.isArray(elemProp)) {\r\n                                elem[prop] = this.arrayFilter(elemProp);\r\n                            }\r\n                        }, this);\r\n                    }\r\n                }\r\n            }, this);\r\n\r\n            /*eslint-enable no-loop-func*/\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Triggers update event\r\n         *\r\n         * @param {Boolean} val\r\n         */\r\n        updateTrigger: function (val) {\r\n            this.trigger('update', val);\r\n        },\r\n\r\n        /**\r\n         * Returns component state\r\n         */\r\n        hasChanged: function () {\r\n            return this.changed();\r\n        },\r\n\r\n        /**\r\n         * Render column header\r\n         */\r\n        renderColumnsHeader: function () {\r\n            this.recordData().length ? this.columnsHeader(true) : this.columnsHeader(false);\r\n        },\r\n\r\n        /**\r\n         * Init default record\r\n         *\r\n         * @returns Chainable.\r\n         */\r\n        initDefaultRecord: function () {\r\n            if (this.defaultRecord && !this.recordData().length) {\r\n                this.addChild();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create header template\r\n         *\r\n         * @param {Object} prop - instance obj\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        createHeaderTemplate: function (prop) {\r\n            var visible = prop.visible !== false,\r\n                disabled = _.isUndefined(prop.disabled) ? this.disabled() : prop.disabled;\r\n\r\n            return {\r\n                visible: ko.observable(visible),\r\n                disabled: ko.observable(disabled)\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Init header elements\r\n         */\r\n        initHeader: function () {\r\n            var labels = [],\r\n                data;\r\n\r\n            if (!this.labels().length) {\r\n                _.each(this.childTemplate.children, function (cell) {\r\n                    data = this.createHeaderTemplate(cell.config);\r\n                    cell.config.labelVisible = false;\r\n                    _.extend(data, {\r\n                        defaultLabelVisible: data.visible(),\r\n                        label: cell.config.label,\r\n                        name: cell.name,\r\n                        required: !!cell.config.validation,\r\n                        columnsHeaderClasses: cell.config.columnsHeaderClasses,\r\n                        sortOrder: cell.config.sortOrder\r\n                    });\r\n                    labels.push(data);\r\n                }, this);\r\n                this.labels(_.sortBy(labels, 'sortOrder'));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set max element position\r\n         *\r\n         * @param {Number} position - element position\r\n         * @param {Object} elem - instance\r\n         */\r\n        setMaxPosition: function (position, elem) {\r\n            if (position || position === 0) {\r\n                this.checkMaxPosition(position);\r\n                this.sort(position, elem);\r\n            } else {\r\n                this.maxPosition += 1;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sort element by position\r\n         *\r\n         * @param {Number} position - element position\r\n         * @param {Object} elem - instance\r\n         */\r\n        sort: function (position, elem) {\r\n            var that = this,\r\n                sorted,\r\n                updatedCollection;\r\n\r\n            if (this.elems().filter(function (el) {\r\n                    return el.position || el.position === 0;\r\n                }).length !== this.getChildItems().length) {\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!elem.containers.length) {\r\n                registry.get(elem.name, function () {\r\n                    that.sort(position, elem);\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            sorted = this.elems().sort(function (propOne, propTwo) {\r\n                return ~~propOne.position - ~~propTwo.position;\r\n            });\r\n\r\n            updatedCollection = this.updatePosition(sorted, position, elem.name);\r\n            this.elems(updatedCollection);\r\n        },\r\n\r\n        /**\r\n         * Checking loader visibility\r\n         *\r\n         * @param {Array} elems\r\n         */\r\n        checkSpinner: function (elems) {\r\n            this.showSpinner(!(!this.recordData().length || elems && elems.length === this.getChildItems().length));\r\n        },\r\n\r\n        /**\r\n         * Filtering data and calculates the quantity of pages\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        parsePagesData: function (data) {\r\n            this.relatedData = this.deleteProperty ?\r\n                _.filter(data, function (elem) {\r\n                    return elem && elem[this.deleteProperty] !== this.deleteValue;\r\n                }, this) : data;\r\n\r\n            this._updatePagesQuantity();\r\n        },\r\n\r\n        /**\r\n         * Reinit record data in order to remove deleted values\r\n         *\r\n         * @return void\r\n         */\r\n        reinitRecordData: function () {\r\n            this.recordData(\r\n                _.filter(this.recordData(), function (elem) {\r\n                    return elem && elem[this.deleteProperty] !== this.deleteValue;\r\n                }, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Get items to rendering on current page\r\n         *\r\n         * @returns {Array} data\r\n         */\r\n        getChildItems: function (data, page) {\r\n            var dataRecord = data || this.relatedData,\r\n                startIndex;\r\n\r\n            this.startIndex = (~~this.currentPage() - 1) * this.pageSize;\r\n\r\n            startIndex = page || this.startIndex;\r\n\r\n            return dataRecord.slice(startIndex, this.startIndex + parseInt(this.pageSize, 10));\r\n        },\r\n\r\n        /**\r\n         * Get record count with filtered delete property.\r\n         *\r\n         * @returns {Number} count\r\n         */\r\n        getRecordCount: function () {\r\n            return _.filter(this.recordData(), function (record) {\r\n                return record && record[this.deleteProperty] !== this.deleteValue;\r\n            }, this).length;\r\n        },\r\n\r\n        /**\r\n         * Get number of columns\r\n         *\r\n         * @returns {Number} columns\r\n         */\r\n        getColumnsCount: function () {\r\n            return this.labels().length + (this.dndConfig.enabled ? 1 : 0);\r\n        },\r\n\r\n        /**\r\n         * Processing pages before addChild\r\n         *\r\n         * @param {Object} ctx - element context\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} prop - additional property to element\r\n         */\r\n        processingAddChild: function (ctx, index, prop) {\r\n            this.bubble('addChild', false);\r\n\r\n            if (this.relatedData.length && this.relatedData.length % this.pageSize === 0) {\r\n                this.pages(this.pages() + 1);\r\n                this.nextPage();\r\n            } else if (~~this.currentPage() !== this.pages()) {\r\n                this.currentPage(this.pages());\r\n            }\r\n\r\n            this.addChild(ctx, index, prop);\r\n        },\r\n\r\n        /**\r\n         * Processing pages before deleteRecord\r\n         *\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} recordId\r\n         */\r\n        processingDeleteRecord: function (index, recordId) {\r\n            this.deleteRecord(index, recordId);\r\n        },\r\n\r\n        /**\r\n         * Change page\r\n         *\r\n         * @param {Number} page - current page\r\n         */\r\n        changePage: function (page) {\r\n            this.clear();\r\n\r\n            if (page === 1 && !this.recordData().length) {\r\n                return false;\r\n            }\r\n\r\n            if (~~page > this.pages()) {\r\n                this.currentPage(this.pages());\r\n\r\n                return false;\r\n            } else if (~~page < 1) {\r\n                this.currentPage(1);\r\n\r\n                return false;\r\n            }\r\n\r\n            this.initChildren();\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check page\r\n         *\r\n         * @returns {Boolean} is page first or not\r\n         */\r\n        isFirst: function () {\r\n            return this.currentPage() === 1;\r\n        },\r\n\r\n        /**\r\n         * Check page\r\n         *\r\n         * @returns {Boolean} is page last or not\r\n         */\r\n        isLast: function () {\r\n            return this.currentPage() === this.pages();\r\n        },\r\n\r\n        /**\r\n         * Change page to next\r\n         */\r\n        nextPage: function () {\r\n            this.currentPage(this.currentPage() + 1);\r\n        },\r\n\r\n        /**\r\n         * Change page to previous\r\n         */\r\n        previousPage: function () {\r\n            this.currentPage(this.currentPage() - 1);\r\n        },\r\n\r\n        /**\r\n         * Check dependency and set position to elements\r\n         *\r\n         * @param {Array} collection - elems\r\n         * @param {Number} position - current position\r\n         * @param {String} elemName - element name\r\n         *\r\n         * @returns {Array} collection\r\n         */\r\n        updatePosition: function (collection, position, elemName) {\r\n            var curPos,\r\n                parsePosition = ~~position,\r\n                result = _.filter(collection, function (record) {\r\n                    return ~~record.position === parsePosition;\r\n                });\r\n\r\n            if (result[1]) {\r\n                curPos = parsePosition + 1;\r\n                result[0].name === elemName ? result[1].position = curPos : result[0].position = curPos;\r\n                this.updatePosition(collection, curPos);\r\n            }\r\n\r\n            return collection;\r\n        },\r\n\r\n        /**\r\n         * Check max elements position and set if max\r\n         *\r\n         * @param {Number} position - current position\r\n         */\r\n        checkMaxPosition: function (position) {\r\n            var max = 0,\r\n                pos;\r\n\r\n            this.recordData.each(function (record) {\r\n                pos = ~~record.position;\r\n                pos > max ? max = pos : false;\r\n            });\r\n\r\n            max < position ? max = position : false;\r\n            this.maxPosition = max;\r\n        },\r\n\r\n        /**\r\n         * Remove and set new max position\r\n         */\r\n        removeMaxPosition: function () {\r\n            this.maxPosition = 0;\r\n            this.elems.each(function (record) {\r\n                this.maxPosition < record.position ? this.maxPosition = ~~record.position : false;\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Update record template and rerender elems\r\n         *\r\n         * @param {String} recordName - record name\r\n         */\r\n        onUpdateRecordTemplate: function (recordName) {\r\n            if (recordName) {\r\n                this.recordTemplate = recordName;\r\n                this.reload();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delete record\r\n         *\r\n         * @param {Number} index - row index\r\n         *\r\n         */\r\n        deleteRecord: function (index, recordId) {\r\n            var recordInstance,\r\n                lastRecord,\r\n                recordsData,\r\n                lastRecordIndex;\r\n\r\n            if (this.deleteProperty) {\r\n                recordsData = this.recordData();\r\n                recordInstance = _.find(this.elems(), function (elem) {\r\n                    return elem.index === index;\r\n                });\r\n                recordInstance.destroy();\r\n                this.elems([]);\r\n                this._updateCollection();\r\n                this.removeMaxPosition();\r\n                recordsData[recordInstance.index][this.deleteProperty] = this.deleteValue;\r\n                this.recordData(recordsData);\r\n                this.reinitRecordData();\r\n                this.reload();\r\n            } else {\r\n                this.update = true;\r\n\r\n                if (~~this.currentPage() === this.pages()) {\r\n                    lastRecordIndex = this.startIndex + this.getChildItems().length - 1;\r\n                    lastRecord =\r\n                        _.findWhere(this.elems(), {\r\n                            index: lastRecordIndex\r\n                        }) ||\r\n                        _.findWhere(this.elems(), {\r\n                            index: lastRecordIndex.toString()\r\n                        });\r\n\r\n                    lastRecord.destroy();\r\n                }\r\n\r\n                this.removeMaxPosition();\r\n                recordsData = this._getDataByProp(recordId);\r\n                this._updateData(recordsData);\r\n                this.update = false;\r\n            }\r\n\r\n            this._reducePages();\r\n            this._sort();\r\n        },\r\n\r\n        /**\r\n         * Update number of pages.\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _updatePagesQuantity: function () {\r\n            var pages = Math.ceil(this.relatedData.length / this.pageSize) || 1;\r\n\r\n            this.pages(pages);\r\n        },\r\n\r\n        /**\r\n         * Reduce the number of pages\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _reducePages: function () {\r\n            if (this.pages() < ~~this.currentPage()) {\r\n                this.currentPage(this.pages());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get data object by some property\r\n         *\r\n         * @param {Number} id - element id\r\n         * @param {String} prop - property\r\n         */\r\n        _getDataByProp: function (id, prop) {\r\n            prop = prop || this.identificationProperty;\r\n\r\n            return _.reject(this.getChildItems(), function (recordData) {\r\n                return recordData[prop].toString() === id.toString();\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Sort elems by position property\r\n         */\r\n        _sort: function () {\r\n            this.elems(this.elems().sort(function (propOne, propTwo) {\r\n                return ~~propOne.position - ~~propTwo.position;\r\n            }));\r\n        },\r\n\r\n        /**\r\n         * Set new data to dataSource,\r\n         * delete element\r\n         *\r\n         * @param {Array} data - record data\r\n         */\r\n        _updateData: function (data) {\r\n            var elems = _.clone(this.elems()),\r\n                path,\r\n                dataArr;\r\n\r\n            dataArr = this.recordData.splice(this.startIndex, this.recordData().length - this.startIndex);\r\n            dataArr.splice(0, this.pageSize);\r\n            elems = _.sortBy(this.elems(), function (elem) {\r\n                return ~~elem.index;\r\n            });\r\n\r\n            data.concat(dataArr).forEach(function (rec, idx) {\r\n                if (elems[idx]) {\r\n                    elems[idx].recordId = rec[this.identificationProperty];\r\n                }\r\n\r\n                if (!rec.position) {\r\n                    rec.position = this.maxPosition;\r\n                    this.setMaxPosition();\r\n                }\r\n\r\n                path = this.dataScope + '.' + this.index + '.' + (this.startIndex + idx);\r\n                this.source.set(path, rec);\r\n            }, this);\r\n\r\n            this.elems(elems);\r\n        },\r\n\r\n        /**\r\n         * Rerender dynamic-rows elems\r\n         */\r\n        reload: function () {\r\n            this.clear();\r\n            this.initChildren(false, true);\r\n            this._updatePagesQuantity();\r\n\r\n            /* After change page size need to check existing current page */\r\n            this._reducePages();\r\n        },\r\n\r\n        /**\r\n         * Update page size based on select change event.\r\n         * The value needs to be retrieved from select as ko value handler is executed after the event handler.\r\n         *\r\n         * @param {Object} component\r\n         * @param {jQuery.Event} event\r\n         */\r\n        updatePageSize: function (component, event) {\r\n            this.pageSize = $(event.target).val();\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Destroy all dynamic-rows elems\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        clear: function () {\r\n            this.destroyChildren();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Reset data to initial value.\r\n         * Call method reset on child elements.\r\n         */\r\n        reset: function () {\r\n            var elems = this.elems();\r\n\r\n            _.each(elems, function (elem) {\r\n                if (_.isFunction(elem.reset)) {\r\n                    elem.reset();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set classes\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object} Classes\r\n         */\r\n        setClasses: function (data) {\r\n            var additional;\r\n\r\n            if (_.isString(data.additionalClasses)) {\r\n                additional = data.additionalClasses.split(' ');\r\n                data.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    data.additionalClasses[name] = true;\r\n                });\r\n            }\r\n\r\n            if (!data.additionalClasses) {\r\n                data.additionalClasses = {};\r\n            }\r\n\r\n            _.extend(data.additionalClasses, {\r\n                '_fit': data.fit,\r\n                '_required': data.required,\r\n                '_error': data.error,\r\n                '_empty': !this.elems().length,\r\n                '_no-header': this.columnsHeaderAfterRender || this.collapsibleHeader\r\n            });\r\n\r\n            return data.additionalClasses;\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.showSpinner(true);\r\n            this.getChildItems().forEach(function (data, index) {\r\n                this.addChild(data, this.startIndex + index);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set visibility to dynamic-rows child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setVisible: function (state) {\r\n            this.elems.each(function (record) {\r\n                record.setVisible(state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to dynamic-rows child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabled: function (state) {\r\n            this.elems.each(function (record) {\r\n                record.setDisabled(state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set visibility to column\r\n         *\r\n         * @param {Number} index - column index\r\n         * @param {Boolean} state\r\n         */\r\n        setVisibilityColumn: function (index, state) {\r\n            this.elems.each(function (record) {\r\n                record.setVisibilityColumn(index, state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to column\r\n         *\r\n         * @param {Number} index - column index\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabledColumn: function (index, state) {\r\n            this.elems.each(function (record) {\r\n                record.setDisabledColumn(index, state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Add child components\r\n         *\r\n         * @param {Object} data - component data\r\n         * @param {Number} index - record(row) index\r\n         * @param {Number|String} prop - custom identify property\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        addChild: function (data, index, prop) {\r\n            var template = this.templates.record,\r\n                child;\r\n\r\n            index = index || _.isNumber(index) ? index : this.recordData().length;\r\n            prop = prop || _.isNumber(prop) ? prop : index;\r\n\r\n            _.extend(this.templates.record, {\r\n                recordId: prop\r\n            });\r\n\r\n            child = utils.template(template, {\r\n                collection: this,\r\n                index: index\r\n            });\r\n\r\n            layout([child]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Restore value to default\r\n         */\r\n        restoreToDefault: function () {\r\n            this.recordData(utils.copy(this.default));\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Update whether value differs from default value\r\n         */\r\n        setDifferedFromDefault: function () {\r\n            var recordData;\r\n\r\n            if (this.default) {\r\n                recordData = utils.copy(this.recordData());\r\n\r\n                Array.isArray(recordData) && recordData.forEach(function (item) {\r\n                    delete item['record_id'];\r\n                });\r\n\r\n                this.isDifferedFromDefault(!_.isEqual(recordData, this.default));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set the changed property if the current page is different\r\n         * than the default state\r\n         *\r\n         * @return void\r\n         */\r\n        setChangedForCurrentPage: function () {\r\n            this.pagesChanged[this.currentPage()] =\r\n                !compareArrays(this.defaultPagesState[this.currentPage()], this.arrayFilter(this.getChildItems()));\r\n            this.changed(_.some(this.pagesChanged));\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/record.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiCollection',\r\n    'uiRegistry'\r\n], function (_, uiCollection, registry) {\r\n    'use strict';\r\n\r\n    return uiCollection.extend({\r\n        defaults: {\r\n            visible: true,\r\n            disabled: true,\r\n            headerLabel: '',\r\n            label: '',\r\n            positionProvider: 'position',\r\n            imports: {\r\n                data: '${ $.provider }:${ $.dataScope }'\r\n            },\r\n            listens: {\r\n                position: 'initPosition',\r\n                elems: 'setColumnVisibleListener'\r\n            },\r\n            links: {\r\n                position: '${ $.name }.${ $.positionProvider }:value'\r\n            },\r\n            exports: {\r\n                recordId: '${ $.provider }:${ $.dataScope }.record_id'\r\n            },\r\n            modules: {\r\n                parentComponent: '${ $.parentName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method, set observe variable.\r\n         * Use parent \"track\" method - wrapper observe array\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            registry.async(this.name + '.' + this.positionProvider)(function (component) {\r\n\r\n                /**\r\n                 * Overwrite hasChanged method\r\n                 *\r\n                 * @returns {Boolean}\r\n                 */\r\n                component.hasChanged = function () {\r\n\r\n                    /* eslint-disable eqeqeq */\r\n                    return this.value().toString() != this.initialValue.toString();\r\n\r\n                    /* eslint-enable eqeqeq */\r\n                };\r\n\r\n                if (!component.initialValue) {\r\n                    component.initialValue = self.parentComponent().maxPosition;\r\n                    component.bubble('update', component.hasChanged());\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init config\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.label = this.label || this.headerLabel;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track('position')\r\n                .observe([\r\n                    'visible',\r\n                    'disabled',\r\n                    'data',\r\n                    'label'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init element position\r\n         *\r\n         * @param {Number} position - element position\r\n         */\r\n        initPosition: function (position) {\r\n            var pos = parseInt(position, 10);\r\n\r\n            this.parentComponent().setMaxPosition(pos, this);\r\n\r\n            if (!pos && pos !== 0) {\r\n                this.position = this.parentComponent().maxPosition;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set column visibility listener\r\n         */\r\n        setColumnVisibleListener: function () {\r\n            var elem = _.find(this.elems(), function (curElem) {\r\n                return !curElem.hasOwnProperty('visibleListener');\r\n            });\r\n\r\n            if (!elem) {\r\n                return;\r\n            }\r\n\r\n            this.childVisibleListener(elem);\r\n\r\n            if (!elem.visibleListener) {\r\n                elem.on('visible', this.childVisibleListener.bind(this, elem));\r\n            }\r\n\r\n            elem.visibleListener = true;\r\n        },\r\n\r\n        /**\r\n         * Child visibility listener\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        childVisibleListener: function (data) {\r\n            this.setVisibilityColumn(data.index, data.visible());\r\n        },\r\n\r\n        /**\r\n         * Reset data to initial value.\r\n         * Call method reset on child elements.\r\n         */\r\n        reset: function () {\r\n            var elems = this.elems(),\r\n                nameIsEqual,\r\n                dataScopeIsEqual;\r\n\r\n            _.each(elems, function (elem) {\r\n                nameIsEqual = this.name + '.' + this.positionProvider === elem.name;\r\n                dataScopeIsEqual = this.dataScope === elem.dataScope;\r\n\r\n                if (!(nameIsEqual || dataScopeIsEqual) && _.isFunction(elem.reset)) {\r\n                    elem.reset();\r\n                }\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Clear data\r\n         *\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        clear: function () {\r\n            var elems = this.elems(),\r\n                nameIsEqual,\r\n                dataScopeIsEqual;\r\n\r\n            _.each(elems, function (elem) {\r\n                nameIsEqual = this.name + '.' + this.positionProvider === elem.name;\r\n                dataScopeIsEqual = this.dataScope === elem.dataScope;\r\n\r\n                if (!(nameIsEqual || dataScopeIsEqual) && _.isFunction(elem.reset)) {\r\n                    elem.clear();\r\n                }\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get label for collapsible header\r\n         *\r\n         * @param {String} label\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getLabel: function (label) {\r\n            if (_.isString(label)) {\r\n                this.label(label);\r\n            } else if (label && this.label()) {\r\n                return this.label();\r\n            } else {\r\n                this.label(this.headerLabel);\r\n            }\r\n\r\n            return this.label();\r\n        },\r\n\r\n        /**\r\n         * Set visibility to record child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setVisible: function (state) {\r\n            this.elems.each(function (cell) {\r\n                cell.visible(state);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set visibility to child by index\r\n         *\r\n         * @param {Number} index\r\n         * @param {Boolean} state\r\n         */\r\n        setVisibilityColumn: function (index, state) {\r\n            var elems = this.elems(),\r\n                curElem = parseInt(index, 10),\r\n                label;\r\n\r\n            if (!this.parentComponent()) {\r\n                return false;\r\n            }\r\n\r\n            if (_.isNaN(curElem)) {\r\n                _.findWhere(elems, {\r\n                    index: index\r\n                }).visible(state);\r\n                label = _.findWhere(this.parentComponent().labels(), {\r\n                    name: index\r\n                });\r\n                label.defaultLabelVisible && label.visible(state);\r\n            } else {\r\n                elems[curElem].visible(state);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set disabled to child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabled: function (state) {\r\n            this.elems.each(function (cell) {\r\n                cell.disabled(state);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set disabled to child by index\r\n         *\r\n         * @param {Number} index\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabledColumn: function (index, state) {\r\n            index = ~~index;\r\n            this.elems()[index].disabled(state);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/adapter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/adapter/buttons'\r\n], function ($, _, buttons) {\r\n    'use strict';\r\n\r\n    var selectorPrefix = '',\r\n        eventPrefix;\r\n\r\n    /**\r\n     * Initialize listener.\r\n     *\r\n     * @param {Function} callback\r\n     * @param {String} action\r\n     */\r\n    function initListener(callback, action) {\r\n        var selector    = selectorPrefix ? selectorPrefix + ' ' + buttons[action] : buttons[action],\r\n            elem        = $(selector)[0];\r\n\r\n        if (!elem) {\r\n            return;\r\n        }\r\n\r\n        if (elem.onclick) {\r\n            elem.onclick = null;\r\n        }\r\n\r\n        $(elem).on('click' + eventPrefix, callback);\r\n    }\r\n\r\n    /**\r\n     * Destroy listener.\r\n     *\r\n     * @param {String} action\r\n     */\r\n    function destroyListener(action) {\r\n        var selector    = selectorPrefix ? selectorPrefix + ' ' + buttons[action] : buttons[action],\r\n            elem        = $(selector)[0];\r\n\r\n        if (!elem) {\r\n            return;\r\n        }\r\n\r\n        if (elem.onclick) {\r\n            elem.onclick = null;\r\n        }\r\n\r\n        $(elem).off('click' + eventPrefix);\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Attaches events handlers.\r\n         *\r\n         * @param {Object} handlers\r\n         * @param {String} selectorPref\r\n         * @param {String} eventPref\r\n         */\r\n        on: function (handlers, selectorPref, eventPref) {\r\n            selectorPrefix = selectorPrefix || selectorPref;\r\n            eventPrefix = eventPref;\r\n            _.each(handlers, initListener);\r\n            selectorPrefix = '';\r\n        },\r\n\r\n        /**\r\n         * Removes events handlers.\r\n         *\r\n         * @param {Object} handlers\r\n         * @param {String} eventPref\r\n         */\r\n        off: function (handlers, eventPref) {\r\n            eventPrefix = eventPref;\r\n            _.each(handlers, destroyListener);\r\n        }\r\n    };\r\n});\r\n","Magento_Ui/js/form/button-adapter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'jquery',\r\n    'underscore',\r\n    'uiRegistry'\r\n], function (Class, $, _, registry) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Initialize actions and adapter.\r\n         *\r\n         * @param {Object} config\r\n         * @param {Element} elem\r\n         * @returns {Object}\r\n         */\r\n        initialize: function (config, elem) {\r\n            return this._super()\r\n                .initActions()\r\n                .initAdapter(elem);\r\n        },\r\n\r\n        /**\r\n         * Creates callback from declared actions.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initActions: function () {\r\n            var callbacks = [];\r\n\r\n            _.each(this.actions, function (action) {\r\n                callbacks.push({\r\n                    action: registry.async(action.targetName),\r\n                    args: _.union([action.actionName], action.params)\r\n                });\r\n            });\r\n\r\n            /**\r\n             * Callback function.\r\n             */\r\n            this.callback = function () {\r\n                _.each(callbacks, function (callback) {\r\n                    callback.action.apply(callback.action, callback.args);\r\n                });\r\n            };\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Attach callback handler on button.\r\n         *\r\n         * @param {Element} elem\r\n         */\r\n        initAdapter: function (elem) {\r\n            $(elem).on('click', this.callback);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/client.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiClass'\r\n], function ($, _, utils, Class) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Before save validate request.\r\n     *\r\n     * @param {Object} data\r\n     * @param {String} url\r\n     * @param {String} selectorPrefix\r\n     * @param {String} messagesClass\r\n     * @returns {*}\r\n     */\r\n    function beforeSave(data, url, selectorPrefix, messagesClass) {\r\n        var save = $.Deferred();\r\n\r\n        data = utils.serialize(utils.filterFormData(data));\r\n        data['form_key'] = window.FORM_KEY;\r\n\r\n        if (!url || url === 'undefined') {\r\n            return save.resolve();\r\n        }\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax({\r\n            url: url,\r\n            data: data,\r\n\r\n            /**\r\n             * Success callback.\r\n             * @param {Object} resp\r\n             * @returns {Boolean}\r\n             */\r\n            success: function (resp) {\r\n                if (!resp.error) {\r\n                    save.resolve();\r\n\r\n                    return true;\r\n                }\r\n\r\n                $('body').notification('clear');\r\n                $.each(resp.messages || [resp.message] || [], function (key, message) {\r\n                    $('body').notification('add', {\r\n                        error: resp.error,\r\n                        message: message,\r\n\r\n                        /**\r\n                         * Insert method.\r\n                         *\r\n                         * @param {String} msg\r\n                         */\r\n                        insertMethod: function (msg) {\r\n                            var $wrapper = $('<div></div>').addClass(messagesClass).html(msg);\r\n\r\n                            $('.page-main-actions', selectorPrefix).after($wrapper);\r\n                            $('html, body').animate({\r\n                                scrollTop: $('.page-main-actions', selectorPrefix).offset().top\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Complete callback.\r\n             */\r\n            complete: function () {\r\n                $('body').trigger('processStop');\r\n            }\r\n        });\r\n\r\n        return save.promise();\r\n    }\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Assembles data and submits it using 'utils.submit' method\r\n         */\r\n        save: function (data, options) {\r\n            var url = this.urls.beforeSave,\r\n                save = this._save.bind(this, data, options);\r\n\r\n            beforeSave(data, url, this.selectorPrefix, this.messagesClass).then(save);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Save data.\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} options\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _save: function (data, options) {\r\n            var url = this.urls.save;\r\n\r\n            $('body').trigger('processStart');\r\n            options = options || {};\r\n\r\n            if (!options.redirect) {\r\n                url += 'back/edit';\r\n            }\r\n\r\n            if (options.ajaxSave) {\r\n                utils.ajaxSubmit({\r\n                    url: url,\r\n                    data: data\r\n                }, options);\r\n\r\n                $('body').trigger('processStop');\r\n\r\n                return this;\r\n            }\r\n\r\n            utils.submit({\r\n                url: url,\r\n                data: data\r\n            }, options.attributes);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/lib/spinner',\r\n    'rjsResolver',\r\n    './adapter',\r\n    'uiCollection',\r\n    'mageUtils',\r\n    'jquery',\r\n    'Magento_Ui/js/core/app',\r\n    'mage/validation'\r\n], function (_, loader, resolver, adapter, Collection, utils, $, app) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Format params\r\n     *\r\n     * @param {Object} params\r\n     * @returns {Array}\r\n     */\r\n    function prepareParams(params) {\r\n        var result = '?';\r\n\r\n        _.each(params, function (value, key) {\r\n            result += key + '=' + value + '&';\r\n        });\r\n\r\n        return result.slice(0, -1);\r\n    }\r\n\r\n    /**\r\n     * Collect form data.\r\n     *\r\n     * @param {Array} items\r\n     * @returns {Object}\r\n     */\r\n    function collectData(items) {\r\n        var result = {},\r\n            name;\r\n\r\n        items = Array.prototype.slice.call(items);\r\n\r\n        items.forEach(function (item) {\r\n            switch (item.type) {\r\n                case 'checkbox':\r\n                    result[item.name] = +!!item.checked;\r\n                    break;\r\n\r\n                case 'radio':\r\n                    if (item.checked) {\r\n                        result[item.name] = item.value;\r\n                    }\r\n                    break;\r\n\r\n                case 'select-multiple':\r\n                    name = item.name.substring(0, item.name.length - 2); //remove [] from the name ending\r\n                    result[name] = _.pluck(item.selectedOptions, 'value');\r\n                    break;\r\n\r\n                default:\r\n                    result[item.name] = item.value;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Makes ajax request\r\n     *\r\n     * @param {Object} params\r\n     * @param {Object} data\r\n     * @param {String} url\r\n     * @returns {*}\r\n     */\r\n    function makeRequest(params, data, url) {\r\n        var save = $.Deferred();\r\n\r\n        data = utils.serialize(data);\r\n        data['form_key'] = window.FORM_KEY;\r\n\r\n        if (!url) {\r\n            save.resolve();\r\n        }\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax({\r\n            url: url + prepareParams(params),\r\n            data: data,\r\n            dataType: 'json',\r\n\r\n            /**\r\n             * Success callback.\r\n             * @param {Object} resp\r\n             * @returns {Boolean}\r\n             */\r\n            success: function (resp) {\r\n                if (resp.ajaxExpired) {\r\n                    window.location.href = resp.ajaxRedirect;\r\n                }\r\n\r\n                if (!resp.error) {\r\n                    save.resolve(resp);\r\n\r\n                    return true;\r\n                }\r\n\r\n                $('body').notification('clear');\r\n                $.each(resp.messages, function (key, message) {\r\n                    $('body').notification('add', {\r\n                        error: resp.error,\r\n                        message: message,\r\n\r\n                        /**\r\n                         * Inserts message on page\r\n                         * @param {String} msg\r\n                         */\r\n                        insertMethod: function (msg) {\r\n                            $('.page-main-actions').after(msg);\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Complete callback.\r\n             */\r\n            complete: function () {\r\n                $('body').trigger('processStop');\r\n            }\r\n        });\r\n\r\n        return save.promise();\r\n    }\r\n\r\n    /**\r\n     * Check if fields is valid.\r\n     *\r\n     * @param {Array}items\r\n     * @returns {Boolean}\r\n     */\r\n    function isValidFields(items) {\r\n        var result = true;\r\n\r\n        _.each(items, function (item) {\r\n            if (!$.validator.validateSingleElement(item)) {\r\n                result = false;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            additionalFields: [],\r\n            additionalInvalid: false,\r\n            selectorPrefix: '.page-content',\r\n            messagesClass: 'messages',\r\n            errorClass: '.admin__field._error',\r\n            eventPrefix: '.${ $.index }',\r\n            ajaxSave: false,\r\n            ajaxSaveType: 'default',\r\n            imports: {\r\n                reloadUrl: '${ $.provider}:reloadUrl'\r\n            },\r\n            listens: {\r\n                selectorPrefix: 'destroyAdapter initAdapter',\r\n                '${ $.name }.${ $.reloadItem }': 'params.set reload'\r\n            },\r\n            exports: {\r\n                selectorPrefix: '${ $.provider }:client.selectorPrefix',\r\n                messagesClass: '${ $.provider }:client.messagesClass'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initAdapter();\r\n\r\n            resolver(this.hideLoader, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'responseData',\r\n                    'responseStatus'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.selector = '[data-form-part=' + this.namespace + ']';\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize adapter handlers.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initAdapter: function () {\r\n            adapter.on({\r\n                'reset': this.reset.bind(this),\r\n                'save': this.save.bind(this, true, {}),\r\n                'saveAndContinue': this.save.bind(this, false, {})\r\n            }, this.selectorPrefix, this.eventPrefix);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Destroy adapter handlers.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        destroyAdapter: function () {\r\n            adapter.off([\r\n                'reset',\r\n                'save',\r\n                'saveAndContinue'\r\n            ], this.eventPrefix);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Hide loader.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        hideLoader: function () {\r\n            loader.get(this.name).hide();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Validate and save form.\r\n         *\r\n         * @param {String} redirect\r\n         * @param {Object} data\r\n         */\r\n        save: function (redirect, data) {\r\n            this.validate();\r\n\r\n            if (!this.additionalInvalid && !this.source.get('params.invalid')) {\r\n                this.setAdditionalData(data)\r\n                    .submit(redirect);\r\n            } else {\r\n                this.focusInvalid();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Tries to set focus on first invalid form field.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        focusInvalid: function () {\r\n            var invalidField = _.find(this.delegate('checkInvalid'));\r\n\r\n            if (!_.isUndefined(invalidField) && _.isFunction(invalidField.focused)) {\r\n                invalidField.focused(true);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set additional data to source before form submit and after validation.\r\n         *\r\n         * @param {Object} data\r\n         * @returns {Object}\r\n         */\r\n        setAdditionalData: function (data) {\r\n            _.each(data, function (value, name) {\r\n                this.source.set('data.' + name, value);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Submits form\r\n         *\r\n         * @param {String} redirect\r\n         */\r\n        submit: function (redirect) {\r\n            var additional = collectData(this.additionalFields),\r\n                source = this.source;\r\n\r\n            _.each(additional, function (value, name) {\r\n                source.set('data.' + name, value);\r\n            });\r\n\r\n            source.save({\r\n                redirect: redirect,\r\n                ajaxSave: this.ajaxSave,\r\n                ajaxSaveType: this.ajaxSaveType,\r\n                response: {\r\n                    data: this.responseData,\r\n                    status: this.responseStatus\r\n                },\r\n                attributes: {\r\n                    id: this.namespace\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validates each element and returns true, if all elements are valid.\r\n         */\r\n        validate: function () {\r\n            this.additionalFields = document.querySelectorAll(this.selector);\r\n            this.source.set('params.invalid', false);\r\n            this.source.trigger('data.validate');\r\n            this.set('additionalInvalid', !isValidFields(this.additionalFields));\r\n        },\r\n\r\n        /**\r\n         * Trigger reset form data.\r\n         */\r\n        reset: function () {\r\n            this.source.trigger('data.reset');\r\n            $('[data-bind*=datepicker]').val('');\r\n        },\r\n\r\n        /**\r\n         * Trigger overload form data.\r\n         */\r\n        overload: function () {\r\n            this.source.trigger('data.overload');\r\n        },\r\n\r\n        /**\r\n         * Updates data from server.\r\n         */\r\n        reload: function () {\r\n            makeRequest(this.params, this.data, this.reloadUrl).then(function (data) {\r\n                app(data, true);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    './client',\r\n    'mageUtils'\r\n], function (_, Element, Client, utils) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            clientConfig: {\r\n                urls: {\r\n                    save: '${ $.submit_url }',\r\n                    beforeSave: '${ $.validate_url }'\r\n                }\r\n            },\r\n            ignoreTmpls: {\r\n                data: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes provider component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initClient();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes client component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initClient: function () {\r\n            this.client = new Client(this.clientConfig);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Saves currently available data.\r\n         *\r\n         * @param {Object} [options] - Addtitional request options.\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        save: function (options) {\r\n            var data = this.get('data');\r\n\r\n            this.client.save(data, options);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update data that stored in provider.\r\n         *\r\n         * @param {Boolean} isProvider\r\n         * @param {Object} newData\r\n         * @param {Object} oldData\r\n         *\r\n         * @returns {Provider}\r\n         */\r\n        updateConfig: function (isProvider, newData, oldData) {\r\n            if (isProvider === true) {\r\n                this.setData(oldData, newData, this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *  Set data to provider based on current data.\r\n         *\r\n         * @param {Object} oldData\r\n         * @param {Object} newData\r\n         * @param {Provider} current\r\n         * @param {String} parentPath\r\n         */\r\n        setData: function (oldData, newData, current, parentPath) {\r\n            _.each(newData, function (val, key) {\r\n                if (_.isObject(val) || _.isArray(val)) {\r\n                    this.setData(oldData[key], val, current[key], utils.fullPath(parentPath, key));\r\n                } else if (val != oldData[key] && oldData[key] == current[key]) {//eslint-disable-line eqeqeq\r\n                    this.set(utils.fullPath(parentPath, key), val);\r\n                }\r\n            }, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/switcher.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'uiClass'\r\n], function (_, registry, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            rules: []\r\n        },\r\n\r\n        /**\r\n         * Initializes instance of a DataSwitcher.\r\n         *\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initRules();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initRules: function () {\r\n            this.rules.forEach(this.initRule, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule definition.\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initRule: function (rule) {\r\n            var handler = this.onValueChange.bind(this, rule);\r\n\r\n            if (!rule.target) {\r\n                rule.target = this.target;\r\n            }\r\n\r\n            if (!rule.property) {\r\n                rule.property = this.property;\r\n            }\r\n\r\n            registry.get(rule.target, function (target) {\r\n                this.applyRule(rule, target.get(rule.property));\r\n                target.on(rule.property, handler);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule definition.\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        addRule: function (rule) {\r\n            this.rules.push(rule);\r\n            this.initRule(rule);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule object.\r\n         * @param {*} value - Current value associated with a rule.\r\n         */\r\n        applyRule: function (rule, value) {\r\n            var actions = rule.actions;\r\n\r\n            //TODO Refactor this logic in scope of MAGETWO-48585\r\n            /* eslint-disable eqeqeq */\r\n            if (rule.value != value) {\r\n                return;\r\n            } else if (rule.strict) {\r\n                return;\r\n            }\r\n\r\n            /* eslint-enable eqeqeq */\r\n            actions.forEach(this.applyAction, this);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} action - Action object.\r\n         */\r\n        applyAction: function (action) {\r\n            registry.get(action.target, function (target) {\r\n                var callback = target[action.callback];\r\n\r\n                callback.apply(target, action.params || []);\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rules object.\r\n         * @param {*} value - Current value associated with a rule.\r\n         */\r\n        onValueChange: function (rule, value) {\r\n            this.applyRule(rule, value);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/adapter/buttons.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return {\r\n        'reset': '#reset',\r\n        'save': '#save',\r\n        'saveAndContinue': '#save_and_continue'\r\n    };\r\n});\r\n","Magento_Ui/js/form/components/area.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './tab'\r\n], function (_, Tab) {\r\n    'use strict';\r\n\r\n    return Tab.extend({\r\n        defaults: {\r\n            uniqueNs:   'params.activeArea',\r\n            template:   'ui/area',\r\n            changed:    false,\r\n            loading:    false\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onChildrenUpdate', 'onContentLoading');\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('changed loading');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls parent's initElement method.\r\n         * Assigns callbacks on various events of incoming element.\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n\r\n            elem.on({\r\n                'update':   this.onChildrenUpdate,\r\n                'loading':  this.onContentLoading\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children update.\r\n         * Sets changed property to one incoming.\r\n         * Invokes setActive method if settings\r\n         * contain makeVisible property set to true.\r\n         *\r\n         * @param  {Boolean} hasChanged\r\n         */\r\n        onChildrenUpdate: function (hasChanged) {\r\n            if (!hasChanged) {\r\n                hasChanged = _.some(this.delegate('hasChanged'));\r\n            }\r\n\r\n            this.changed(hasChanged);\r\n        },\r\n\r\n        /**\r\n         * Callback that sets loading property to true.\r\n         */\r\n        onContentLoading: function (isLoading) {\r\n            this.loading(isLoading);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'uiLayout',\r\n    'mageUtils',\r\n    'underscore'\r\n], function (Element, registry, layout, utils, _) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            buttonClasses: {},\r\n            additionalClasses: {},\r\n            displayArea: 'outsideGroup',\r\n            displayAsLink: false,\r\n            elementTmpl: 'ui/form/element/button',\r\n            template: 'ui/form/components/button/simple',\r\n            visible: true,\r\n            disabled: false,\r\n            title: '',\r\n            buttonTextId: '',\r\n            ariLabelledby: ''\r\n        },\r\n\r\n        /**\r\n         * Initializes component.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            return this._super()\r\n                ._setClasses()\r\n                ._setButtonClasses();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'visible',\r\n                    'disabled',\r\n                    'title',\r\n                    'childError'\r\n                ]);\r\n        },\r\n\r\n        /**\r\n         * Performs configured actions\r\n         */\r\n        action: function () {\r\n            this.actions.forEach(this.applyAction, this);\r\n        },\r\n\r\n        /**\r\n         * Apply action on target component,\r\n         * but previously create this component from template if it is not existed\r\n         *\r\n         * @param {Object} action - action configuration\r\n         */\r\n        applyAction: function (action) {\r\n            var targetName = action.targetName,\r\n                params = utils.copy(action.params) || [],\r\n                actionName = action.actionName,\r\n                target;\r\n\r\n            if (!registry.has(targetName)) {\r\n                this.getFromTemplate(targetName);\r\n            }\r\n            target = registry.async(targetName);\r\n\r\n            if (target && typeof target === 'function' && actionName) {\r\n                params.unshift(actionName);\r\n                target.apply(target, params);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create target component from template\r\n         *\r\n         * @param {Object} targetName - name of component,\r\n         * that supposed to be a template and need to be initialized\r\n         */\r\n        getFromTemplate: function (targetName) {\r\n            var parentName = targetName.split('.'),\r\n                index = parentName.pop(),\r\n                child;\r\n\r\n            parentName = parentName.join('.');\r\n            child = utils.template({\r\n                parent: parentName,\r\n                name: index,\r\n                nodeTemplate: targetName\r\n            });\r\n            layout([child]);\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            if (typeof this.additionalClasses === 'string') {\r\n                if (this.additionalClasses === '') {\r\n                    this.additionalClasses = {};\r\n\r\n                    return this;\r\n                }\r\n\r\n                this.additionalClasses = this.additionalClasses\r\n                    .trim()\r\n                    .split(' ')\r\n                    .reduce(function (classes, name) {\r\n                        classes[name] = true;\r\n\r\n                        return classes;\r\n                    }, {}\r\n                );\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'buttonClasses' object.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        _setButtonClasses: function () {\r\n            var additional = this.buttonClasses;\r\n\r\n            if (_.isString(additional)) {\r\n                this.buttonClasses = {};\r\n\r\n                if (additional.trim().length) {\r\n                    additional = additional.trim().split(' ');\r\n\r\n                    additional.forEach(function (name) {\r\n                        if (name.length) {\r\n                            this.buttonClasses[name] = true;\r\n                        }\r\n                    }, this);\r\n                }\r\n            }\r\n\r\n            _.extend(this.buttonClasses, {\r\n                'action-basic': !this.displayAsLink,\r\n                'action-additional': this.displayAsLink\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/collection.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Ui/js/modal/confirm'\r\n], function (_, utils, registry, Component, layout, confirm) {\r\n    'use strict';\r\n\r\n    var childTemplate = {\r\n        parent: '${ $.$data.name }',\r\n        name: '${ $.$data.childIndex }',\r\n        dataScope: '${ $.name }',\r\n        nodeTemplate: '${ $.$data.name }.${ $.$data.itemTemplate }'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            lastIndex: 0,\r\n            template: 'ui/form/components/collection'\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Activates the incoming child and triggers the update event.\r\n         *\r\n         * @param {Object} elem - Incoming child.\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n\r\n            elem.activate();\r\n\r\n            this.bubble('update');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Loops over corresponding data in data storage,\r\n         * creates child for each and pushes it's identifier to initialItems array.\r\n         *\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var children = this.source.get(this.dataScope),\r\n                initial = this.initialItems = [];\r\n\r\n            _.each(children, function (item, index) {\r\n                initial.push(index);\r\n                this.addChild(index);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates new item of collection, based on incoming 'index'.\r\n         * If not passed creates one with 'new_' prefix.\r\n         *\r\n         * @param {String|Object} [index] - Index of a child.\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        addChild: function (index) {\r\n            this.childIndex = !_.isString(index) ?\r\n                'new_' + this.lastIndex++ :\r\n                index;\r\n\r\n            layout([utils.template(childTemplate, this)]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns true if current set of items differ from initial one,\r\n         * or if some child has been changed.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasChanged: function () {\r\n            var initial = this.initialItems,\r\n                current = this.elems.pluck('index'),\r\n                changed = !utils.equalArrays(initial, current);\r\n\r\n            return changed || this.elems.some(function (elem) {\r\n                return _.some(elem.delegate('hasChanged'));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initiates validation of its' children components.\r\n         *\r\n         * @returns {Array} An array of validation results.\r\n         */\r\n        validate: function () {\r\n            var elems;\r\n\r\n            this.allValid = true;\r\n\r\n            elems = this.elems.sortBy(function (elem) {\r\n                return !elem.active();\r\n            });\r\n\r\n            elems = elems.map(this._validate, this);\r\n\r\n            return _.flatten(elems);\r\n        },\r\n\r\n        /**\r\n         * Iterator function for components validation.\r\n         * Activates first invalid child component.\r\n         *\r\n         * @param {Object} elem - Element to run validation on.\r\n         * @returns {Array} An array of validation results.\r\n         */\r\n        _validate: function (elem) {\r\n            var result = elem.delegate('validate'),\r\n                invalid;\r\n\r\n            invalid = _.some(result, function (item) {\r\n                return !item.valid;\r\n            });\r\n\r\n            if (this.allValid && invalid) {\r\n                this.allValid = false;\r\n\r\n                elem.activate();\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Creates function that removes element\r\n         * from collection using '_removeChild' method.\r\n         * @param  {Object} elem - Element that should be removed.\r\n         * @deprecated Not used anymore\r\n         */\r\n        removeAddress: function (elem) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.removeMessage,\r\n                actions: {\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        self._removeAddress(elem);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Removes element from both collection and data storage,\r\n         * activates first element if removed one was active,\r\n         * triggers 'update' event.\r\n         *\r\n         * @param {Object} elem - Element to remove.\r\n         */\r\n        _removeAddress: function (elem) {\r\n            var isActive = elem.active(),\r\n                first;\r\n\r\n            elem.destroy();\r\n\r\n            first = this.elems.first();\r\n\r\n            if (first && isActive) {\r\n                first.activate();\r\n            }\r\n\r\n            this.bubble('update');\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/fieldset.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/lib/collapsible',\r\n    'underscore'\r\n], function (Collapsible, _) {\r\n    'use strict';\r\n\r\n    return Collapsible.extend({\r\n        defaults: {\r\n            template: 'ui/form/fieldset',\r\n            collapsible: false,\r\n            changed: false,\r\n            loading: false,\r\n            error: false,\r\n            opened: false,\r\n            level: 0,\r\n            visible: true,\r\n            initializeFieldsetDataByDefault: false, /* Data in some fieldsets should be initialized before open */\r\n            disabled: false,\r\n            listens: {\r\n                'opened': 'onVisibilityChange'\r\n            },\r\n            additionalClasses: {}\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onChildrenUpdate', 'onChildrenError', 'onContentLoading');\r\n\r\n            return this._super()\r\n                ._setClasses();\r\n        },\r\n\r\n        /**\r\n         * Initializes components' configuration.\r\n         *\r\n         * @returns {Fieldset} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this._wasOpened = this.opened || !this.collapsible;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         *\r\n         * @returns {Object} Reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('changed loading error visible');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls parent's initElement method.\r\n         * Assigns callbacks on various events of incoming element.\r\n         *\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            elem.initContainer(this);\r\n\r\n            elem.on({\r\n                'update': this.onChildrenUpdate,\r\n                'loading': this.onContentLoading,\r\n                'error': this.onChildrenError\r\n            });\r\n\r\n            if (this.disabled) {\r\n                try {\r\n                    elem.disabled(true);\r\n                }\r\n                catch (e) {\r\n\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children update.\r\n         * Sets changed property to one incoming.\r\n         *\r\n         * @param  {Boolean} hasChanged\r\n         */\r\n        onChildrenUpdate: function (hasChanged) {\r\n            if (!hasChanged) {\r\n                hasChanged = _.some(this.delegate('hasChanged'));\r\n            }\r\n\r\n            this.bubble('update', hasChanged);\r\n            this.changed(hasChanged);\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__collapsible-block-wrapper': this.collapsible,\r\n                _show: this.opened,\r\n                _hide: !this.opened,\r\n                _disabled: this.disabled\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler of the \"opened\" property changes.\r\n         *\r\n         * @param {Boolean} isOpened\r\n         */\r\n        onVisibilityChange: function (isOpened) {\r\n            if (!this._wasOpened) {\r\n                this._wasOpened = isOpened;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children validation error.\r\n         * Sets error property to one incoming.\r\n         *\r\n         * @param {String} message - error message.\r\n         */\r\n        onChildrenError: function (message) {\r\n            var hasErrors = false;\r\n\r\n            if (!message) {\r\n                hasErrors = this._isChildrenHasErrors(hasErrors, this);\r\n            }\r\n\r\n            this.error(hasErrors || message);\r\n\r\n            if (hasErrors || message) {\r\n                this.open();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns errors of children if exist\r\n         *\r\n         * @param {Boolean} hasErrors\r\n         * @param {*} container\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _isChildrenHasErrors: function (hasErrors, container) {\r\n            var self = this;\r\n\r\n            if (hasErrors === false && container.hasOwnProperty('elems')) {\r\n                hasErrors = container.elems.some('error');\r\n\r\n                if (hasErrors === false && container.hasOwnProperty('_elems')) {\r\n                    container._elems.forEach(function (child) {\r\n\r\n                        if (hasErrors === false) {\r\n                            hasErrors = self._isChildrenHasErrors(hasErrors, child);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return hasErrors;\r\n        },\r\n\r\n        /**\r\n         * Callback that sets loading property to true.\r\n         */\r\n        onContentLoading: function (isLoading) {\r\n            this.loading(isLoading);\r\n        }\r\n    });\r\n});\r\n"}
}});
