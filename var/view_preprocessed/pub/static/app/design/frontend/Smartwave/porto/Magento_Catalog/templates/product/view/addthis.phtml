<?php use Magento\Framework\App\ResourceConnection; $_product = \Magento\Framework\App\ObjectManager::getInstance()->get(\Magento\Framework\Registry::class)->registry('product'); $productId = $_product->getId(); $resource = \Magento\Framework\App\ObjectManager::getInstance()->get(ResourceConnection::class); $connection = $resource->getConnection(); $tableName = $resource->getTableName('icecat_product_attachment'); $sql = "SELECT * FROM $tableName WHERE product_id = :valor"; $params = ['valor' => $productId]; $results = $connection->fetchAll($sql, $params); $protocol = isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? 'https' : 'http'; $host = $_SERVER['HTTP_HOST']; $base_url = $protocol . '://' . $host; ?> <p><?php echo $_product->getIcecatBulletPoints(); ?></p><br> <p><?php echo $_product->getTotalDescription(); ?></p><?php if($results){ $urldoc = ""; foreach($results as $result){ $urldoc = $base_url.'/pub/media/'.$result['attachment_file']; $html = '<br>'.'<i class="fas fa-file"></i>'.'<a href='.$urldoc.' download='.$result['title'].'>'. $result['title'].'</a>'; echo $html; } } ?>