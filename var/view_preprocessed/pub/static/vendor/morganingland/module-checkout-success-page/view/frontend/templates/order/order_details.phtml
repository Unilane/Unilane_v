<?php use Morganinglad\CheckoutSuccessPage\Block\Checkout\Details; /** @var $block Details */ ?> <?php $order = $block->getOrder(); if ( ! $order->getData() ) { return; } $payment = $order->getPayment(); $method = $payment->getMethodInstance(); $reorderurl = $block->getReorder(); $printurl = $block->getPrint(); $date = $order->getCreatedAt(); $formatdate = $block->formatDate( $date ); $canShowThumbnail = $block->showProductThumbnail(); $titleColor = $block->getTitleColor(); $titleBgColor = $block->getTitleBgColor(); $titleBorderColor = $block->getTitleBorderColor(); $messageColor = $block->getMessageColor(); $messageBgColor = $block->getMessageBgColor(); $couponColor = $block->getCouponColor(); $couponBgColor = $block->getCouponBgColor(); $couponBorderColor = $block->getCouponBorderColor(); $sortOrderInfo = $block->getOrderSortOrder(); ?> <div class="order-information" style="order: <?= $sortOrderInfo ?>"><?php if ( $block->isEnableDetails() ): ?> <div class="order-details"><?php if ( $block->isEnableOrderProductDetails() ): ?> <div class="row customer-info"><h4><?= __( 'CUSTOMER INFORMATION' ) ?></h4><div class="address-wrapper col-md-12"><?php if ( $block->isEnableShippingAddressDetails() ): ?> <div class="shipping-address col-md-5"><h4><?= __( 'Shipping Address' ) ?></h4><p class="box-content"><?php $formatship = $block->formatShipping(); ?> <?php if ( $formatship ) : ?> <address><?= $formatship; ?></address><?php else: ?> <?= __( 'No shipping Address available' ); ?> <?php endif; ?></p></div><?php endif; ?> <div class="col-md-2"></div><?php if ( $block->isEnableBillingAddressDetails() ): ?> <div class="billing-address col-md-5"><h4><?= __( 'Billing Address' ) ?></h4><?php $formatbilling = $block->formatBilling(); ?> <p class="box-content"><address><?= $formatbilling; ?></address></p></div><?php endif; ?></div><div class="methods-wrapper"><?php if ( $block->isEnableShippingMethodDetails() ): ?> <div class="shipping-method"><h4><?= __( 'Shipping Method' ) ?></h4></strong> <?php $shippingMethod = $order->getShippingDescription(); ?> <p class="box-content"><?php if ( $order->getShippingDescription() ): ?> <?= $shippingMethod; ?> <?php else: ?> <?= __( 'No shipping information available' ); ?> <?php endif; ?></p></div><?php endif; ?> <?php if ( $block->isEnablePaymentMethodDetails() ): ?> <div class="billing-method"><h4><?= __( 'Payment Method' ) ?></h4><?php $methodTitle = $method->getTitle(); ?> <p class="box-content"><?= $methodTitle ?></p></div></div><?php endif; ?></div><div class="show-order table-wrapper"><?php if ( $block->isEnable() ) : ?> <h4><?= __( 'Order Details' ) ?></h4><div class="row order-additional-info"><div class="col order-additional"><?php if ( $block->isEnableOrderStatusDetails() ): ?> <h4><?= __( 'Order Status' ) ?></h4><span class="order-status"><?= $order->getStatusLabel(); ?></span> <?php endif; ?></div><div class="col order-additional"><h4><?= __( 'Order Number' ) ?></h4><?php if ( $block->getCustomerId() ) : ?> <?= __( 'Order %1', sprintf( '<a href="%s" class="order-number"><strong>#%s</strong></a>', $block->getReorder(), $order->getIncrementId() ) ) ?> <?php else : ?> <?= __( '%1', $order->getIncrementId() ) ?> <?php endif; ?></div><div class="col order-additional"><h4><?= __( 'Order Date' ) ?></h4><span><date><?= $formatdate ?></date></span></div><?= $block->getAdditionalInfoHtml() ?> <div class="col order-additional"><?php if ( $block->canViewReorder() ): ?> <h4><?= __( 'Want Reorder' ) ?></h4><a class="action-reorder" href="<?= $block->escapeUrl( $reorderurl ) ?>"><button class="action primary"><span><?= __( 'Reorder' ) ?></span></button></a> <?php endif ?></div><div class="col order-additional"><?php if ( $block->canViewPrint() ): ?> <h4><?= __( 'Want Print' ) ?></h4><a class="action-print" href="<?= $printurl ?>" onclick="this.target='_blank';"><button class="action primary"><span><?= __( 'Print Order' ) ?></span></button></a> <?php endif ?></div></div><?php endif; ?> <table class="order-details-table data table"><thead><tr><th class="product col item"><?= __( 'Image' ) ?></th><th class="product col name"><?= __( 'Product Name' ) ?></th><th class="product col sku"><?= __( 'Sku' ) ?></th><th class="col price"><?= __( 'Price' ) ?></th><th class="col qty"><?= __( 'Qty' ) ?></th><th class="col subtotal"><?= __( 'Subtotal' ) ?></th></tr></thead><tbody class="order-item item"><?php $items = $order->getItemsCollection(); foreach ( $items as $item ) : ?> <?php if ( $item->getParentItem() ) { continue; } ?> <tr class="data-item"><td class="product col item"><?php if ( $canShowThumbnail ) : ?> <div class="thumbnail"><a href="<?= $block->getProductUrl( $item ); ?>" target="_blank"><img class="thumbnail" src="<?= $this->helper( 'Magento\Cms\Helper\Wysiwyg\Images' )->getBaseUrl() . 'catalog/product' . $item->getProduct()->getThumbnail(); ?>" alt=""></a></div><?php endif; ?></td><td class="product col name"><div class="product-name"><div><strong> <a href="<?= $block->getProductUrl( $item ); ?>" target="_blank"><?= $block->escapeHtml( $item->getName() ) ?></a></strong></div><div><?php $options = $block->getItemOptions( $item ); if ( $options ): foreach ( $options as $option ): ?> <strong><?= $option['label'] ?>:</strong> <span><?= $option['value'] ?></span> <br> <?php endforeach ?> <?php endif ?></div></div></td><td class="product col sku"><div><?= $item->getSku(); ?></div></td><td class="col price" data-th="<?= $block->escapeHtmlAttr( __( 'Price' ) ) ?>"><?= $block->formatPrice( $item->getPrice(), true, false ); ?></td><td class="col qty" data-th="<?= $block->escapeHtmlAttr( __( 'QTY' ) ) ?>"><?= (int) $item->getQtyOrdered(); ?></td><td class="col subtotal" data-th="<?= $block->escapeHtmlAttr( __( 'Subtotal' ) ) ?>"><?= $block->formatPrice( $item->getRowTotal(), true, false ); ?></td></tr><?php $bundleChildrens = $item->getChildrenItems(); $atts = $block->getBundleItemOptions( $item ); $attArray = []; foreach ( $atts as $key => $att ) { $attArray[ $att['option_id'] ] = $att; } ksort( $attArray ); if ( $attArray ): $sku = []; $countSku = 0; foreach ( $bundleChildrens as $key => $bundleChildren ) { if ( $bundleChildren['sku'] ) { $countSku++; } $sku[ $countSku ] = $bundleChildren['sku']; } $count = 0; foreach ( $attArray as $att ): ?> <tr><td colspan="6"><?= $att['label'] ?></td></tr><?php foreach ( $att['value'] as $at ): $count++ ?> <tr class="bundle-option"><td><?= $at['qty'] . ' x ' . $at['title'] . ' x ' . $block->formatPrice( $at['price'] ) ?></td><td><?= $sku[ $count ]; ?></td><td><?= __( 'Ordered: ' ) . $at['qty'] * $item->getQtyOrdered(); ?></td></tr><?php endforeach ?> <?php endforeach ?> <?php endif ?> <?php endforeach ?></tbody><tfoot><tr class="data-item total"><td class="order-total-label" colspan="5"><div class="order-total-info"><div><span class="label subtotal"><?= __( 'Subtotal: ' ) ?></span></div><div><span class="label shipping"><?= __( 'Shipping: ' ) ?></span></div><div><span class="label taxes"><?= __( 'Taxes: ' ) ?></span></div></div></td><td class="order-total-value"><div class="order-total-info"><div><span class="value"><?= $block->formatPrice( $order->getSubtotal() ); ?></span></div><div><span class="value"><?= $block->formatPrice( $order->getShippingAmount() ); ?></span></div><div><span class="value"><?= $block->formatPrice( $order->getTaxAmount() ); ?></span></div></div></td></tr><tr class="data-item total total-grand"><td class="order-total-label" colspan="5"><div class="order-total-info"><div><strong class="label total"><?= __( 'Grand Total: ' ) ?></strong></div></div></td><td class="order-total-value total-grand-value"><div class="order-total-info"><div><strong class="value"><?= $block->formatPrice( $order->getGrandTotal() ); ?></strong></div></div></td></tr></tfoot></table></div><?php endif ?></div><?php endif; ?></div>